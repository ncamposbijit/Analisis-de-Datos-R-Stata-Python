<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Análisis de Datos con Python | Análisis de Datos con Stata, R y Python</title>
  <meta name="description" content="4 Análisis de Datos con Python | Análisis de Datos con Stata, R y Python" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Análisis de Datos con Python | Análisis de Datos con Stata, R y Python" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Análisis de Datos con Python | Análisis de Datos con Stata, R y Python" />
  
  
  

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="análisis-de-datos-con-stata.html"/>
<link rel="next" href="referencias.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Cursos de Programación</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prólogo</a></li>
<li class="chapter" data-level="2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html"><i class="fa fa-check"></i><b>2</b> Análisis de datos con R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#introducción-a-r-y-rstudio"><i class="fa fa-check"></i><b>2.1</b> Introducción a R y RStudio</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#por-qué-utilizar-r-como-lenguaje-de-programación"><i class="fa fa-check"></i><b>2.1.1</b> ¿Por qué utilizar R como lenguaje de programación?</a></li>
<li class="chapter" data-level="2.1.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#términos-clave-y-recurrentes-a-lo-largo-del-curso"><i class="fa fa-check"></i><b>2.1.2</b> Términos clave y recurrentes a lo largo del curso</a></li>
<li class="chapter" data-level="2.1.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#recursos-de-aprendizaje"><i class="fa fa-check"></i><b>2.1.3</b> Recursos de Aprendizaje</a></li>
<li class="chapter" data-level="2.1.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#interfaz-rstudio"><i class="fa fa-check"></i><b>2.1.4</b> Interfaz RStudio</a></li>
<li class="chapter" data-level="2.1.5" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#instalación-de-paquetes-y-ayuda"><i class="fa fa-check"></i><b>2.1.5</b> Instalación de paquetes y ayuda</a></li>
<li class="chapter" data-level="2.1.6" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-objetos"><i class="fa fa-check"></i><b>2.1.6</b> Manipulación de objetos</a></li>
<li class="chapter" data-level="2.1.7" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#tipos-de-objetos"><i class="fa fa-check"></i><b>2.1.7</b> Tipos de objetos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#herramientas-de-programación"><i class="fa fa-check"></i><b>2.2</b> Herramientas de programación</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#objetos-adicionales"><i class="fa fa-check"></i><b>2.2.1</b> Objetos adicionales</a></li>
<li class="chapter" data-level="2.2.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#acceder-a-elementos-de-un-objeto"><i class="fa fa-check"></i><b>2.2.2</b> Acceder a elementos de un objeto</a></li>
<li class="chapter" data-level="2.2.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#tipos-de-objetos-y-datos"><i class="fa fa-check"></i><b>2.2.3</b> Tipos de objetos y datos</a></li>
<li class="chapter" data-level="2.2.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#herramientas-en-r"><i class="fa fa-check"></i><b>2.2.4</b> Herramientas en R</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-i"><i class="fa fa-check"></i><b>2.3</b> Manipulación de bases de datos (Parte I)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#principios-de-programación"><i class="fa fa-check"></i><b>2.3.1</b> Principios de programación</a></li>
<li class="chapter" data-level="2.3.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulacion-de-bases-de-datos-en-r"><i class="fa fa-check"></i><b>2.3.2</b> Manipulacion de bases de datos en R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-ii"><i class="fa fa-check"></i><b>2.4</b> Manipulación de bases de datos (Parte II)</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#funciones-clave"><i class="fa fa-check"></i><b>2.4.1</b> Funciones clave</a></li>
<li class="chapter" data-level="2.4.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#operador-piping"><i class="fa fa-check"></i><b>2.4.2</b> Operador piping</a></li>
<li class="chapter" data-level="2.4.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#proceso-de-análisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar"><i class="fa fa-check"></i><b>2.4.3</b> Proceso de análisis de datos (Parte I): cargar, inspeccionar y limpiar</a></li>
<li class="chapter" data-level="2.4.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#proceso-de-análisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar"><i class="fa fa-check"></i><b>2.4.4</b> Proceso de análisis de datos (Parte II): cargar, inspeccionar y limpiar</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-iii"><i class="fa fa-check"></i><b>2.5</b> Manipulación de bases de datos (Parte III)</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#crear-variables"><i class="fa fa-check"></i><b>2.5.1</b> Crear Variables</a></li>
<li class="chapter" data-level="2.5.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#factores"><i class="fa fa-check"></i><b>2.5.2</b> Factores</a></li>
<li class="chapter" data-level="2.5.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#funciones-útiles-para-transformar-bases-de-datos"><i class="fa fa-check"></i><b>2.5.3</b> Funciones útiles para transformar bases de datos</a></li>
<li class="chapter" data-level="2.5.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#cambio-de-formato-de-los-datos"><i class="fa fa-check"></i><b>2.5.4</b> Cambio de formato de los datos</a></li>
<li class="chapter" data-level="2.5.5" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#juntar-bases-de-datos"><i class="fa fa-check"></i><b>2.5.5</b> Juntar bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#análisis-de-datos"><i class="fa fa-check"></i><b>2.6</b> Análisis de datos</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#inspección-de-datos"><i class="fa fa-check"></i><b>2.6.1</b> Inspección de datos</a></li>
<li class="chapter" data-level="2.6.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#estadística-descriptiva"><i class="fa fa-check"></i><b>2.6.2</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="2.6.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#tablas-de-frecuencia"><i class="fa fa-check"></i><b>2.6.3</b> Tablas de frecuencia</a></li>
<li class="chapter" data-level="2.6.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#estadística-descriptiva-con-dplyr"><i class="fa fa-check"></i><b>2.6.4</b> Estadística descriptiva con “dplyr”</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#visualización"><i class="fa fa-check"></i><b>2.7</b> Visualización</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#visualización-r-base"><i class="fa fa-check"></i><b>2.7.1</b> Visualización: R base</a></li>
<li class="chapter" data-level="2.7.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#uso-paquete-ggplot"><i class="fa fa-check"></i><b>2.7.2</b> Uso paquete ggplot</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#análisis-de-datos-y-generación-de-informes-con-r-markdown"><i class="fa fa-check"></i><b>2.8</b> Análisis de datos y generación de informes con R Markdown</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#test-de-hipótesis"><i class="fa fa-check"></i><b>2.8.1</b> Test de hipótesis</a></li>
<li class="chapter" data-level="2.8.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#regresión-lineal-en-r"><i class="fa fa-check"></i><b>2.8.2</b> Regresión Lineal en R</a></li>
<li class="chapter" data-level="2.8.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#r-markdown"><i class="fa fa-check"></i><b>2.8.3</b> R Markdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html"><i class="fa fa-check"></i><b>3</b> Análisis de datos con STATA</a>
<ul>
<li class="chapter" data-level="3.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#buenas-prácticas-de-programación-y-visualización-parte-i"><i class="fa fa-check"></i><b>3.1</b> Buenas prácticas de programación y visualización (Parte I)</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#introducción"><i class="fa fa-check"></i><b>3.1.1</b> Introducción</a></li>
<li class="chapter" data-level="3.1.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#estilo-de-codificación-en-stata"><i class="fa fa-check"></i><b>3.1.2</b> Estilo de codificación en Stata</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#buenas-practicas-de-programación-y-visualización-parte-ii"><i class="fa fa-check"></i><b>3.2</b> Buenas practicas de programación y visualización (Parte II)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#organización-de-un-proyecto-en-stata"><i class="fa fa-check"></i><b>3.2.1</b> Organización de un proyecto en Stata</a></li>
<li class="chapter" data-level="3.2.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#buenas-practicas-de-visualización"><i class="fa fa-check"></i><b>3.2.2</b> Buenas practicas de visualización</a></li>
<li class="chapter" data-level="3.2.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#sublime-text"><i class="fa fa-check"></i><b>3.2.3</b> Sublime Text</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programar-do---files-parte-i"><i class="fa fa-check"></i><b>3.3</b> Programar do - files (Parte I)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programar-en-stata"><i class="fa fa-check"></i><b>3.3.1</b> Programar en Stata</a></li>
<li class="chapter" data-level="3.3.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#comandos-y-funciones-claves-y-algunos-detalles"><i class="fa fa-check"></i><b>3.3.2</b> Comandos y funciones claves (y algunos detalles)}</a></li>
<li class="chapter" data-level="3.3.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#macros-locales-y-globales"><i class="fa fa-check"></i><b>3.3.3</b> Macros locales y globales</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programar-do---files-parte-ii"><i class="fa fa-check"></i><b>3.4</b> Programar do - files (Parte II)</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#estructuras-de-datos"><i class="fa fa-check"></i><b>3.4.1</b> Estructuras de datos</a></li>
<li class="chapter" data-level="3.4.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#iteradores-1"><i class="fa fa-check"></i><b>3.4.2</b> Iteradores</a></li>
<li class="chapter" data-level="3.4.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#manejo-de-bases-de-datos"><i class="fa fa-check"></i><b>3.4.3</b> Manejo de bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programar-ado---files-parte-i"><i class="fa fa-check"></i><b>3.5</b> Programar ado - files (Parte I)</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#escribir-programas-en-stata"><i class="fa fa-check"></i><b>3.5.1</b> Escribir programas en Stata</a></li>
<li class="chapter" data-level="3.5.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#por-qué-escribir-programas-abstracción"><i class="fa fa-check"></i><b>3.5.2</b> ¿Por qué escribir programas?: Abstracción</a></li>
<li class="chapter" data-level="3.5.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#mis-primeros-programas-en-stata"><i class="fa fa-check"></i><b>3.5.3</b> Mis primeros programas en Stata</a></li>
<li class="chapter" data-level="3.5.4" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programa-con-distintos-argumentos"><i class="fa fa-check"></i><b>3.5.4</b> Programa con distintos argumentos</a></li>
<li class="chapter" data-level="3.5.5" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#opción-syntax"><i class="fa fa-check"></i><b>3.5.5</b> Opción Syntax</a></li>
<li class="chapter" data-level="3.5.6" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#return"><i class="fa fa-check"></i><b>3.5.6</b> Return</a></li>
<li class="chapter" data-level="3.5.7" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#implementar-opciones-al-programa"><i class="fa fa-check"></i><b>3.5.7</b> Implementar opciones al programa</a></li>
<li class="chapter" data-level="3.5.8" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#incluir-ifin-al-programa"><i class="fa fa-check"></i><b>3.5.8</b> Incluir if/in al programa</a></li>
<li class="chapter" data-level="3.5.9" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#generalizar-el-comando-para-incluir-múltiples-variables"><i class="fa fa-check"></i><b>3.5.9</b> Generalizar el comando para incluir múltiples variables</a></li>
<li class="chapter" data-level="3.5.10" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#agregar-prefijos-a-los-programas"><i class="fa fa-check"></i><b>3.5.10</b> Agregar prefijos a los programas</a></li>
<li class="chapter" data-level="3.5.11" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programas-para-complementar-función-egen"><i class="fa fa-check"></i><b>3.5.11</b> Programas para complementar función egen</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programar-ado---files-parte-ii"><i class="fa fa-check"></i><b>3.6</b> Programar ado - files (Parte II)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#syntax"><i class="fa fa-check"></i><b>3.6.1</b> Syntax</a></li>
<li class="chapter" data-level="3.6.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#varlist"><i class="fa fa-check"></i><b>3.6.2</b> Varlist</a></li>
<li class="chapter" data-level="3.6.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#opciones"><i class="fa fa-check"></i><b>3.6.3</b> Opciones</a></li>
<li class="chapter" data-level="3.6.4" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programa-para-calcular-percentiles"><i class="fa fa-check"></i><b>3.6.4</b> Programa para calcular percentiles</a></li>
<li class="chapter" data-level="3.6.5" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programa-con-opción-return"><i class="fa fa-check"></i><b>3.6.5</b> Programa con opción return</a></li>
<li class="chapter" data-level="3.6.6" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#agregar-opciones-al-programa"><i class="fa fa-check"></i><b>3.6.6</b> Agregar opciones al programa</a></li>
<li class="chapter" data-level="3.6.7" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#generalizar-el-comando-para-incluir-múltiples-variables-1"><i class="fa fa-check"></i><b>3.6.7</b> Generalizar el comando para incluir múltiples variables</a></li>
<li class="chapter" data-level="3.6.8" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#agregar-prefijos-a-los-programas-1"><i class="fa fa-check"></i><b>3.6.8</b> Agregar prefijos a los programas</a></li>
<li class="chapter" data-level="3.6.9" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programas-para-complementar-función-egen-1"><i class="fa fa-check"></i><b>3.6.9</b> Programas para complementar función egen</a></li>
<li class="chapter" data-level="3.6.10" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#generalización-de-la-función-egen"><i class="fa fa-check"></i><b>3.6.10</b> Generalización de la función egen</a></li>
<li class="chapter" data-level="3.6.11" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#documentar-tu-programa"><i class="fa fa-check"></i><b>3.6.11</b> Documentar tu programa</a></li>
<li class="chapter" data-level="3.6.12" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#escribir-programas-e-class"><i class="fa fa-check"></i><b>3.6.12</b> Escribir programas e-class</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#programar-ado---files-parte-iii"><i class="fa fa-check"></i><b>3.7</b> Programar ado - files (Parte III)</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#marksample-mark-y-markout"><i class="fa fa-check"></i><b>3.7.1</b> Marksample, Mark y Markout</a></li>
<li class="chapter" data-level="3.7.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#sortpreserve"><i class="fa fa-check"></i><b>3.7.2</b> Sortpreserve</a></li>
<li class="chapter" data-level="3.7.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#mata"><i class="fa fa-check"></i><b>3.7.3</b> Mata</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#exportar-información"><i class="fa fa-check"></i><b>3.8</b> Exportar Información</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#stata-markdown"><i class="fa fa-check"></i><b>3.8.1</b> Stata Markdown</a></li>
<li class="chapter" data-level="3.8.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#putdocx"><i class="fa fa-check"></i><b>3.8.2</b> Putdocx</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#manejo-de-grandes-bases-de-datos-en-stata"><i class="fa fa-check"></i><b>3.9</b> Manejo de grandes bases de datos en Stata</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#estilo-de-codificación-mejorar-velocidad-y-eficiencia"><i class="fa fa-check"></i><b>3.9.1</b> Estilo de codificación: mejorar velocidad y eficiencia</a></li>
<li class="chapter" data-level="3.9.2" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#cargar-grandes-bases-de-datos"><i class="fa fa-check"></i><b>3.9.2</b> Cargar grandes bases de datos</a></li>
<li class="chapter" data-level="3.9.3" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#reducir-el-uso-de-memoria"><i class="fa fa-check"></i><b>3.9.3</b> Reducir el uso de memoria</a></li>
<li class="chapter" data-level="3.9.4" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#reducir-el-tamaño-de-la-base-de-datos"><i class="fa fa-check"></i><b>3.9.4</b> Reducir el tamaño de la base de datos</a></li>
<li class="chapter" data-level="3.9.5" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#eliminar-siempre-resultados-intermedios-incluso-temporales"><i class="fa fa-check"></i><b>3.9.5</b> Eliminar siempre resultados intermedios, incluso temporales</a></li>
<li class="chapter" data-level="3.9.6" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#dividir-en-trozos-cuando-sea-posible"><i class="fa fa-check"></i><b>3.9.6</b> Dividir en trozos cuando sea posible</a></li>
<li class="chapter" data-level="3.9.7" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#sort"><i class="fa fa-check"></i><b>3.9.7</b> Sort</a></li>
<li class="chapter" data-level="3.9.8" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#selección-de-muestra"><i class="fa fa-check"></i><b>3.9.8</b> Selección de muestra</a></li>
<li class="chapter" data-level="3.9.9" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#precaución-con-reshape"><i class="fa fa-check"></i><b>3.9.9</b> Precaución con reshape</a></li>
<li class="chapter" data-level="3.9.10" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#subexpresiones-comunes"><i class="fa fa-check"></i><b>3.9.10</b> Subexpresiones comunes</a></li>
<li class="chapter" data-level="3.9.11" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#recomendaciones-adicionales"><i class="fa fa-check"></i><b>3.9.11</b> Recomendaciones Adicionales</a></li>
<li class="chapter" data-level="3.9.12" data-path="análisis-de-datos-con-stata.html"><a href="análisis-de-datos-con-stata.html#resumen"><i class="fa fa-check"></i><b>3.9.12</b> Resumen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html"><i class="fa fa-check"></i><b>4</b> Análisis de Datos con Python</a>
<ul>
<li class="chapter" data-level="4.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#introducción-al-análisis-de-datos-con-python"><i class="fa fa-check"></i><b>4.1</b> Introducción al análisis de datos con Python</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#antes-de-partir-con-python"><i class="fa fa-check"></i><b>4.1.1</b> Antes de partir con Python…</a></li>
<li class="chapter" data-level="4.1.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#atajos"><i class="fa fa-check"></i><b>4.1.2</b> Atajos</a></li>
<li class="chapter" data-level="4.1.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#extensiones-de-jupyter-notebook"><i class="fa fa-check"></i><b>4.1.3</b> Extensiones de Jupyter Notebook</a></li>
<li class="chapter" data-level="4.1.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#sintaxis-básica"><i class="fa fa-check"></i><b>4.1.4</b> Sintaxis básica</a></li>
<li class="chapter" data-level="4.1.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#variables-y-objetos"><i class="fa fa-check"></i><b>4.1.5</b> Variables y objetos</a></li>
<li class="chapter" data-level="4.1.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#operadores"><i class="fa fa-check"></i><b>4.1.6</b> Operadores</a></li>
<li class="chapter" data-level="4.1.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#estructuras-de-datos-listas-tuplas-conjuntos-diccionarios"><i class="fa fa-check"></i><b>4.1.7</b> Estructuras de datos: listas, tuplas, conjuntos, diccionarios</a></li>
<li class="chapter" data-level="4.1.8" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#funciones-2"><i class="fa fa-check"></i><b>4.1.8</b> Funciones</a></li>
<li class="chapter" data-level="4.1.9" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#methods"><i class="fa fa-check"></i><b>4.1.9</b> Methods</a></li>
<li class="chapter" data-level="4.1.10" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#paquetes"><i class="fa fa-check"></i><b>4.1.10</b> Paquetes</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#librerias-principales-de-python---numpy-matplotlib-pandas"><i class="fa fa-check"></i><b>4.2</b> Librerías principales de Python - Numpy, Matplotlib, Pandas</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#numpy"><i class="fa fa-check"></i><b>4.2.1</b> NumPy</a></li>
<li class="chapter" data-level="4.2.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#matplotlib"><i class="fa fa-check"></i><b>4.2.2</b> Matplotlib</a></li>
<li class="chapter" data-level="4.2.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#pandas"><i class="fa fa-check"></i><b>4.2.3</b> Pandas</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#herramientas-de-programación-1"><i class="fa fa-check"></i><b>4.3</b> Herramientas de programación</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#controladores-de-flujo"><i class="fa fa-check"></i><b>4.3.1</b> Controladores de flujo</a></li>
<li class="chapter" data-level="4.3.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#if-elif-else"><i class="fa fa-check"></i><b>4.3.2</b> if-elif-else</a></li>
<li class="chapter" data-level="4.3.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#iteradores-básicos"><i class="fa fa-check"></i><b>4.3.3</b> Iteradores básicos</a></li>
<li class="chapter" data-level="4.3.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#iteradores-adicionales-en-python"><i class="fa fa-check"></i><b>4.3.4</b> Iteradores adicionales en Python</a></li>
<li class="chapter" data-level="4.3.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#list-comprehension"><i class="fa fa-check"></i><b>4.3.5</b> List Comprehension</a></li>
<li class="chapter" data-level="4.3.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#generadores"><i class="fa fa-check"></i><b>4.3.6</b> Generadores</a></li>
<li class="chapter" data-level="4.3.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#funciones-3"><i class="fa fa-check"></i><b>4.3.7</b> Funciones</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#manipulación-de-bases-de-datos-parte-i-1"><i class="fa fa-check"></i><b>4.4</b> Manipulación de bases de datos (Parte I)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#importar-e-inspeccionar-datos-repaso"><i class="fa fa-check"></i><b>4.4.1</b> Importar e inspeccionar datos (repaso)</a></li>
<li class="chapter" data-level="4.4.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#manipular-repaso"><i class="fa fa-check"></i><b>4.4.2</b> Manipular (repaso)</a></li>
<li class="chapter" data-level="4.4.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#agrupar-calculos"><i class="fa fa-check"></i><b>4.4.3</b> Agrupar calculos</a></li>
<li class="chapter" data-level="4.4.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#aplicar-funciones"><i class="fa fa-check"></i><b>4.4.4</b> Aplicar funciones</a></li>
<li class="chapter" data-level="4.4.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#datos-como-tablas-problemas-y-soluciones"><i class="fa fa-check"></i><b>4.4.5</b> Datos como tablas: problemas y soluciones</a></li>
<li class="chapter" data-level="4.4.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#concatenar-data-frames"><i class="fa fa-check"></i><b>4.4.6</b> Concatenar data frames</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#manipulación-de-bases-de-datos-parte-ii-1"><i class="fa fa-check"></i><b>4.5</b> Manipulación de bases de datos (Parte II)</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#aplicar-funciones-a-columnas-de-una-base-de-datos"><i class="fa fa-check"></i><b>4.5.1</b> Aplicar funciones a columnas de una base de datos</a></li>
<li class="chapter" data-level="4.5.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#dividir-una-base-de-datos-por-grupos"><i class="fa fa-check"></i><b>4.5.2</b> Dividir una base de datos por grupos</a></li>
<li class="chapter" data-level="4.5.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#librería-datetime"><i class="fa fa-check"></i><b>4.5.3</b> Librería datetime</a></li>
<li class="chapter" data-level="4.5.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#reestructurar-un-dataframe"><i class="fa fa-check"></i><b>4.5.4</b> Reestructurar un DataFrame</a></li>
<li class="chapter" data-level="4.5.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#reestructurar-datos-para-arreglar-posibles-problemas"><i class="fa fa-check"></i><b>4.5.5</b> Reestructurar datos para arreglar posibles problemas</a></li>
<li class="chapter" data-level="4.5.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#missing-values-2"><i class="fa fa-check"></i><b>4.5.6</b> Missing values</a></li>
<li class="chapter" data-level="4.5.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#juntar-bases-de-datos-merge-y-append"><i class="fa fa-check"></i><b>4.5.7</b> Juntar bases de datos: merge y append</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-i"><i class="fa fa-check"></i><b>4.6</b> Análisis de datos (Parte I)</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#estadistica-descriptiva"><i class="fa fa-check"></i><b>4.6.1</b> Estadistica Descriptiva</a></li>
<li class="chapter" data-level="4.6.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#la-distribución-normal"><i class="fa fa-check"></i><b>4.6.2</b> La distribución normal</a></li>
<li class="chapter" data-level="4.6.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#test-de-hipotesis"><i class="fa fa-check"></i><b>4.6.3</b> Test de hipotesis</a></li>
<li class="chapter" data-level="4.6.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-1-resumen-exploratorio-de-datos"><i class="fa fa-check"></i><b>4.6.4</b> Ejemplo 1: resumen exploratorio de datos</a></li>
<li class="chapter" data-level="4.6.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-2-datos-con-precios-de-casas"><i class="fa fa-check"></i><b>4.6.5</b> Ejemplo 2: datos con precios de casas</a></li>
<li class="chapter" data-level="4.6.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-3"><i class="fa fa-check"></i><b>4.6.6</b> Ejemplo 3</a></li>
<li class="chapter" data-level="4.6.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-4"><i class="fa fa-check"></i><b>4.6.7</b> Ejemplo 4</a></li>
<li class="chapter" data-level="4.6.8" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-5-desigualdad-de-ingreso-usando-gapminder"><i class="fa fa-check"></i><b>4.6.8</b> Ejemplo 5 : Desigualdad de ingreso usando Gapminder</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-ii"><i class="fa fa-check"></i><b>4.7</b> Análisis de datos (Parte II)</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#optimización-con-scipy"><i class="fa fa-check"></i><b>4.7.1</b> Optimización con Scipy</a></li>
<li class="chapter" data-level="4.7.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#modelo-de-regresión-lineal"><i class="fa fa-check"></i><b>4.7.2</b> Modelo de regresión lineal</a></li>
<li class="chapter" data-level="4.7.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#una-simulación-de-montecarlo"><i class="fa fa-check"></i><b>4.7.3</b> Una simulación de montecarlo</a></li>
<li class="chapter" data-level="4.7.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#bootstraping"><i class="fa fa-check"></i><b>4.7.4</b> Bootstraping</a></li>
<li class="chapter" data-level="4.7.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#regresión-logistica"><i class="fa fa-check"></i><b>4.7.5</b> Regresión Logistica</a></li>
<li class="chapter" data-level="4.7.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#matching"><i class="fa fa-check"></i><b>4.7.6</b> Matching</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-iii"><i class="fa fa-check"></i><b>4.8</b> Análisis de Datos (Parte III)</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#bootstraping-en-el-contexto-de-mco"><i class="fa fa-check"></i><b>4.8.1</b> Bootstraping en el contexto de MCO</a></li>
<li class="chapter" data-level="4.8.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#logit-probabilidad-de-sobrevivir-al-hundimiento-del-titanic"><i class="fa fa-check"></i><b>4.8.2</b> Logit: Probabilidad de sobrevivir al hundimiento del Titanic</a></li>
<li class="chapter" data-level="4.8.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#gmm"><i class="fa fa-check"></i><b>4.8.3</b> GMM</a></li>
<li class="chapter" data-level="4.8.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#diferencias-en-diferencias"><i class="fa fa-check"></i><b>4.8.4</b> Diferencias en Diferencias</a></li>
<li class="chapter" data-level="4.8.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#plotly"><i class="fa fa-check"></i><b>4.8.5</b> Plotly</a></li>
<li class="chapter" data-level="4.8.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#automatización-1"><i class="fa fa-check"></i><b>4.8.6</b> Automatización</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#web-scraping-en-python"><i class="fa fa-check"></i><b>4.9</b> Web Scraping en Python</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#introducción-3"><i class="fa fa-check"></i><b>4.9.1</b> Introducción</a></li>
<li class="chapter" data-level="4.9.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#muchos-ejemplos-practicos-de-web---scraping"><i class="fa fa-check"></i><b>4.9.2</b> Muchos ejemplos practicos de Web - scraping</a></li>
<li class="chapter" data-level="4.9.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#selenium"><i class="fa fa-check"></i><b>4.9.3</b> Selenium</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i><b>5</b> Referencias</a>
<ul>
<li class="chapter" data-level="5.1" data-path="referencias.html"><a href="referencias.html#including-plots"><i class="fa fa-check"></i><b>5.1</b> Including Plots</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análisis de Datos con Stata, R y Python</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="análisis-de-datos-con-python" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Análisis de Datos con Python<a href="análisis-de-datos-con-python.html#análisis-de-datos-con-python" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introducción-al-análisis-de-datos-con-python" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Introducción al análisis de datos con Python<a href="análisis-de-datos-con-python.html#introducción-al-análisis-de-datos-con-python" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Objetivos de este curso:</strong></p>
<ul>
<li>Perderle el miedo a Python.</li>
<li>Complementar el análisis de datos utilizando las ventajas que da Python.</li>
<li>Introducirlos al programa de forma tal de que puedan ir aprendiendo cosas nuevas por su cuenta.</li>
</ul>
<p><strong>Ventajas de Python respecto a otros programas</strong></p>
<ul>
<li>Código abierto.</li>
<li>Paquetes muy potentes y en continua actualización.</li>
<li>Múltiples usos: astronomía, física, diseños sitios web, economía, análisis de datos.<br />
</li>
<li>Muy demandando en el mercado laboral.</li>
<li>Rapido e intuitivo</li>
<li>Potente con grandes bases de datos: conectar a servidores externos como Google Cloud.</li>
</ul>
<p><strong>Algunas referencias</strong>:</p>
<ol style="list-style-type: decimal">
<li><strong>The Python Data Science Handbook by Jake VanderPlas (O’Reilly)</strong>. Copyright 2016 Jake VanderPlas, 978-1-491-91205-8.</li>
</ol>
<div id="antes-de-partir-con-python" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Antes de partir con Python…<a href="análisis-de-datos-con-python.html#antes-de-partir-con-python" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="instalar-python-jupyter-notebook-y-spyder" class="section level4 hasAnchor" number="4.1.1.1">
<h4><span class="header-section-number">4.1.1.1</span> Instalar Python, Jupyter Notebook y Spyder<a href="análisis-de-datos-con-python.html#instalar-python-jupyter-notebook-y-spyder" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p>Utilizaremos Anaconda y Python 3.</p></li>
<li><p>Aunque hay varias maneras de instalar Python, la que yo sugeriría es a través de la distribución multiplataforma Anaconda. Pueden encontrarlo en la página de [Anaconda] (<a href="https://www.continuum.io/downloads" class="uri">https://www.continuum.io/downloads</a>). Incluye tanto Python y otros paquetes preinstalados orientados a la computación científica.</p></li>
<li><p>Si tuvieron algún problema con la instalación, les recomiendo ver <a href="https://www.youtube.com/watch?v=FZ5baopI_mo&amp;list=PLdxk1ngcg7fUKn1J2mpT0x0x4DuxCNXdU&amp;index=12">video.</a>. Explica detalladamente comom instalar Python con Ananconda.</p></li>
<li><p>Para programas vamos a utilizar Jupyter Notebook para algunas clases y Spyder para otras clases. Pueden instalar Spyder directamente desde el navegador de Anaconda. La idea es que se familiarizen con la interfaz de ambos programas. Jupyter Notebook es útil para trabajar interactivamente, conectarse a servidores y trabajar en equipo más sencillmente. Spyder es útil cuando trabajamos con bases de datos debido a que la interfaz permite una programación y análisis mucho más cómodos.</p></li>
<li><p><a href="https://jupyter.org/">Jupyter Notebook</a> es útil para desarrollar, compartir y generar procesos reproducibles, pero a mi me molesta no poder ver los datos. Por lo que hay ocasiones en la que prefiero utilizar Spyder, más cuando estoy haciendo algún trabajo más exploratorio.</p></li>
</ol>
</div>
<div id="markdown-para-jupyter-notebook" class="section level4 hasAnchor" number="4.1.1.2">
<h4><span class="header-section-number">4.1.1.2</span> Markdown para Jupyter Notebook<a href="análisis-de-datos-con-python.html#markdown-para-jupyter-notebook" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Markdown es un lenguage de programación de texto plano.</li>
<li>Se puede utilizar en múltiples lenguajes de programación: por ejemplo, <strong>R Markdown y Stata Markdown</strong>.</li>
<li>Permite combinar texto plano, codificación y resultados del análisis de datos como figuras y/o tablas en un solo lugar.</li>
<li>Aprenderemos a escribir en Markdown de forma tal de mejorar la presentación de los códigos. Les servirá tambíen si es que utilzan R o Stata.</li>
<li>Es preferible ver esto al inicio de forma tal de que podamos ir incorporando esta codificación a lo largo del curso.</li>
</ol>
<p><strong>1. Títulos</strong></p>
<p>Los títulos pueden ser creados utilizando
los símbolos ‘##’. Estos símbolos determinan el tamaño del título. Van de 1 a 6.</p>
<hr />
<ol start="2" style="list-style-type: decimal">
<li><strong>Enfatizar texto</strong></li>
</ol>
<p>Para enfatizar texto tenemos las opciones más típicas</p>
<ol style="list-style-type: lower-alpha">
<li><p><code>codigo aquí</code> para escribir códigos. Lo que hacen estos símbolos es que <code>esto paresca una función o comando escrita como codigo</code>. Esto es útil si es que quieres escribir nombres de paquetes en un informe. <code>Nombre del paquete.</code> <strong>Por ejemplo</strong> paquete <code>statsmodel</code>.</p></li>
<li><p>Para utilizar <i>itálicas</i> y <u>subrayar</u>.</p></li>
<li><p>Tambien se pueden escribir de otra forma <strong>negrita</strong>, <em>negrita</em>, <em>italica</em> o bien <em>italica</em>, o bien <strong><em>negrita e itálica</em></strong> o <strong><em>negritaeitalica</em></strong>.</p></li>
<li><p><del>Para tachar texto</del></p></li>
</ol>
<hr />
<ol start="3" style="list-style-type: decimal">
<li><strong>Escribir parrafos</strong>:</li>
</ol>
<p>Para escribir parrafos tengo que colocar <code>&lt;p&gt;</code> al inicio y <code>&lt;/p&gt;</code> al final. Para hacer espacios entre parrafos simplemente presionar <code>enter</code>.
___
4. <strong>Escribir ecuaciones</strong></p>
<p>Se pueden escribir ecuaciones (para los/as que manejan Latex)</p>
<p><span class="math display">\[A = \pi*r^{2}\]</span></p>
<hr />
<ol start="5" style="list-style-type: decimal">
<li><strong>Colocar citas anidadas</strong></li>
</ol>
<blockquote>
<p>Todo lo que ponga aquí se vera como una cita
&gt; Todo lo que ponga aquí se vera como una cita
&gt;&gt; Todo lo que ponga aquí se vera como una cita</p>
</blockquote>
<ol start="6" style="list-style-type: decimal">
<li><strong>Lineas horizontales</strong></li>
</ol>
<p>Estas líneas sirven para separar los parrafos y así tener un texto mucho más ordenado.</p>
<hr />
<hr />
<hr />
<ol start="7" style="list-style-type: decimal">
<li><strong>Crear listas</strong></li>
</ol>
<p><em>Listas no ordenadas</em></p>
<ul>
<li>item 1</li>
<li>item 2</li>
<li>importante agregar un espacio entre <code>+</code>! . Sino R no lo reconocerá.</li>
<li>item 3
<ul>
<li>sub - item 1</li>
</ul></li>
</ul>
<p><em>Listas ordenadas</em></p>
<ol style="list-style-type: decimal">
<li>item 1</li>
<li>item 2</li>
</ol>
<p>Ejemplo 3: Letras no funcionan para listas</p>
<p>A. List
B. List
+ item</p>
<ol style="list-style-type: lower-alpha">
<li>List</li>
<li>List</li>
</ol>
<hr />
<p><strong>6. Agregar un link</strong></p>
<p>Opción 1: Mostrar link</p>
<p><a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html#Using_Parameters" class="uri">https://rmarkdown.rstudio.com/authoring_quick_tour.html#Using_Parameters</a></p>
<p>Opción 2: Ocultar link
<a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html#Using_Parameters">aquí</a></p>
<hr />
<p><strong>7. Agregar una imagen</strong></p>
<p><img src="https://www.python.org/static/community_logos/python-logo-master-v3-TM.png" /> <br></p>
<hr />
<p><strong>8. Cambiar colores de frases</strong></p>
<p><span style="color: #14F7CE;"> Cambiar el color del texto </span> <br>
<span style="color: #88BE1E;"> Tambien se puede especificar el color con códigos.</span> (<i> Nota </i>: Paletas de colores pueden encontrar ([aquí.])(<a href="https://www.colourlovers.com/" class="uri">https://www.colourlovers.com/</a>) <br>
<strong>Otros colores</strong>: blue|red|green|pink|yellow.</p>
<p><strong>9. Agregar listas de tareas</strong></p>
<ul>
<li><input type="checkbox" disabled="" checked="" />alguna tarea</li>
<li><a href="indica%20que%20buscar%20exactamente%20dentro%20de%20un%20lugar."></a> otra tarea</li>
</ul>
<p><strong>10. Tablas</strong></p>
<p>Para hacer tablas se utilizan “|” y “-”.</p>
<table>
<thead>
<tr class="header">
<th>Titulo</th>
<th>Titulo</th>
<th>Titulo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>B</td>
<td>C</td>
</tr>
<tr class="even">
<td>X</td>
<td>Y</td>
<td>Z</td>
</tr>
</tbody>
</table>
<p>Para cambiar manualmente la jusfiticación del texto:
<code>:-:</code>
1. Usar <code>:-:</code> para centrar
2. Usar <code>—</code> para la derecha
3. Usar <code>:-</code> para la izquierda</p>
<p><strong>11. Cajas de colores</strong></p>
<div class="alert alert-block alert-info">
<b>Tips:</b> Usar cajas azules para destacar cosas y/o hacer notas.
</div>
<div class="alert alert-block alert-warning">
<p><b>Ejemplos o advertencias:</b> Utilice los cuadros amarillos para los ejemplos que no están dentro de las celdas de código, o utilícelos para las fórmulas matemáticas si es necesario. Normalmente también se utiliza para mostrar mensajes de advertencia.</p>
</div>
<div class="alert alert-block alert-success">
<p><b>Algo positivo:</b> Este cuadro de alerta indica una acción exitosa o positiva.</p>
</div>
<div class="alert alert-block alert-danger">
<p><b>Peligro:</b> Este cuadro de alerta indica una acción peligrosa o potencialmente negativa.</p>
</div>
<p><strong>12. Destacar alguna línea</strong></p>
<p><code style="background:yellow;color:black">Útil para resaltar y captar la atención del lector hacia determinados puntos.</code></p>
<p><strong>13. Marcar algún texto con un color determinado</strong></p>
<p>No olvides comprar <mark>leche</mark> hoy.</p>
<p><strong>14. Menu de navegación</strong></p>
<nav>
<a href=”https://www.google.com">LinkedIn</a> |
<a href=”/css/”>Github</a> |
<a href=”/js/”>Medium</a> |
</nav>
</div>
</div>
<div id="atajos" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Atajos<a href="análisis-de-datos-con-python.html#atajos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Muy necesarios para ganar tiempo y no duplicar tareas, por ejemplo, cambiar de Markdown a código.<br />
</li>
<li>Nos vamos a ir acostumbrando poco a poco con la práctica.</li>
</ol>
<p><strong>Para usuarios de Mac</strong></p>
<ol style="list-style-type: decimal">
<li>Ctrl: command key ⌘</li>
<li>Shift: Shift ⇧</li>
<li>Alt: option ⌥</li>
</ol>
<p><strong>Modos</strong></p>
<ol style="list-style-type: decimal">
<li><strong>Existen dos modos</strong>: <mark>comando</mark> y <mark>edición</mark>.</li>
<li>El modo de edición le permite escribir código o texto en una celda y se indica con un borde de celda verde.</li>
<li>El modo de comando vincula el teclado a los comandos del nivel del cuaderno y se indica con un borde de celda gris con un margen izquierdo azul.</li>
</ol>
<p><strong>Algunos atajos que funcionan en ambos modos</strong></p>
<ol style="list-style-type: decimal">
<li><code>Shift + Enter</code>: ejecuta la celda seleccionada y pasa a la de abajo.</li>
<li><code>Ctrl + Enter</code>: ejecuta todas las celdas seleccionadas.</li>
<li><code>Alt + Enter</code>: ejecuta una celda, pero <strong>inserta</strong> una abajo.</li>
<li><code>Ctrl + S</code>: guardar el código.</li>
</ol>
<p><strong>Atajos: modo comando (presionar <code>esc</code> para activar)</strong></p>
<ol style="list-style-type: decimal">
<li><code>H</code> : mostrar todos los accesos directos.</li>
<li><code>arriba</code>: seleccionar la celda de arriba.</li>
<li><code>abajo</code>: seleccionar la celda de abajo.</li>
<li><code>Shift + arriba</code>: extender las celdas seleccionadas arriba.</li>
<li><code>Shift + abajo</code> : extender las celdas seleccionadas por debajo.</li>
<li><code>A</code>: insertar celda arriba.</li>
<li><code>B</code>: insertar celda abajo.</li>
<li><code>X</code>: cortar las celdas seleccionadas.</li>
<li><code>C</code>: copiar celdas seleccionadas.</li>
<li><code>V</code> : pegar celdas abajo.</li>
<li><code>Shift + V</code> : pegar celdas arriba.</li>
<li><code>D</code>: (pulsar la tecla dos veces) borrar las celdas seleccionadas.</li>
<li><code>Z</code>: deshacer el borrado de celdas.</li>
<li><code>S</code>: guardar y comprobar.</li>
<li><code>Y</code>: cambiar el tipo de celda a Código.</li>
<li><code>M</code>: cambiar el tipo de celda a Markdown.</li>
<li><code>P</code>: abrir la paleta de comandos. Muy útil para ejecutar directamente atajos.</li>
<li><code>Shift + espacio</code>: desplazar el cuaderno hacia arriba.</li>
<li><code>espacio</code>: para desplazar el cuaderno hacia abajo.</li>
<li><code>Alt + enter</code>: ejecutar linea y agregar una nueva.</li>
</ol>
<p><strong>Atajos: modo edicion(presionar <code>enter</code> para activar)</strong></p>
<ol style="list-style-type: decimal">
<li><code>Esc</code> : te lleva al modo comando.</li>
<li><code>tab</code> : para completar el código o la sangría.</li>
<li><code>Ctrl + A</code>: seleccionar todo.</li>
<li><code>Ctrl + Z</code>: deshacer.</li>
<li><code>Ctrl + Y</code>: rehacer.</li>
<li><code>Ctrl + flecha izquierda</code>: ir una palabra a la izquierda.</li>
<li><code>Ctrl + flecha derecha</code>: ir una palabra a la derecha.</li>
<li><code>Ctrl + Shift + p</code> abrir la paleta de comandos.</li>
</ol>
<p><strong>Agregar tus propios atajos</strong></p>
<p>Help &gt; Edit Keyboard Shortcuts</p>
</div>
<div id="extensiones-de-jupyter-notebook" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Extensiones de Jupyter Notebook<a href="análisis-de-datos-con-python.html#extensiones-de-jupyter-notebook" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Es posible agregar caracteristicas adicionales a Jupyter Notebook.</li>
<li>Para ello inclimos en el Promp lo siguiente:</li>
</ol>
<p><code>pip install jupyter_contrib_nbextensions &amp;&amp; jupyter contrib nbextension install</code></p>
<ol start="3" style="list-style-type: decimal">
<li>Varias extensiones útiles e interesantes: índice, ocultar código, observar variables, etc.</li>
</ol>
</div>
<div id="sintaxis-básica" class="section level3 hasAnchor" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Sintaxis básica<a href="análisis-de-datos-con-python.html#sintaxis-básica" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb428"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb428-1"><a href="análisis-de-datos-con-python.html#cb428-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb428-2"><a href="análisis-de-datos-con-python.html#cb428-2" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb428-3"><a href="análisis-de-datos-con-python.html#cb428-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb428-4"><a href="análisis-de-datos-con-python.html#cb428-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-5"><a href="análisis-de-datos-con-python.html#cb428-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo introductorio: vamos a ver una ejemplo sencillo, que involucra una </span></span>
<span id="cb428-6"><a href="análisis-de-datos-con-python.html#cb428-6" aria-hidden="true" tabindex="-1"></a><span class="co"># típica tarea de programación. </span></span>
<span id="cb428-7"><a href="análisis-de-datos-con-python.html#cb428-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-8"><a href="análisis-de-datos-con-python.html#cb428-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.Generamos una variable</span></span>
<span id="cb428-9"><a href="análisis-de-datos-con-python.html#cb428-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-10"><a href="análisis-de-datos-con-python.html#cb428-10" aria-hidden="true" tabindex="-1"></a>variable <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb428-11"><a href="análisis-de-datos-con-python.html#cb428-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-12"><a href="análisis-de-datos-con-python.html#cb428-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Generamos dos listas vacias</span></span>
<span id="cb428-13"><a href="análisis-de-datos-con-python.html#cb428-13" aria-hidden="true" tabindex="-1"></a>inferior <span class="op">=</span> []<span class="op">;</span> superior <span class="op">=</span> []</span>
<span id="cb428-14"><a href="análisis-de-datos-con-python.html#cb428-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb428-15"><a href="análisis-de-datos-con-python.html#cb428-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribuimos los números entre las dos listas</span></span>
<span id="cb428-16"><a href="análisis-de-datos-con-python.html#cb428-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb428-17"><a href="análisis-de-datos-con-python.html#cb428-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (i <span class="op">&lt;</span> variable):</span>
<span id="cb428-18"><a href="análisis-de-datos-con-python.html#cb428-18" aria-hidden="true" tabindex="-1"></a>        inferior.append(i)</span>
<span id="cb428-19"><a href="análisis-de-datos-con-python.html#cb428-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb428-20"><a href="análisis-de-datos-con-python.html#cb428-20" aria-hidden="true" tabindex="-1"></a>        superior.append(i)</span>
<span id="cb428-21"><a href="análisis-de-datos-con-python.html#cb428-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb428-22"><a href="análisis-de-datos-con-python.html#cb428-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;inferior:&quot;</span>, inferior)</span>
<span id="cb428-23"><a href="análisis-de-datos-con-python.html#cb428-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;superior:&quot;</span>, superior)</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Comentarios marcados con #. Notar que tambíen se pueden escribir al lado derecho de los códigos.</li>
<li>Se asignan variables con <strong>signo igual</strong>. Similar a Stata, casi similar a R.</li>
<li>En Python, si quiero avanzar a la línea de abajo tengo que ocupar slach. Entre parentesis no es necesario.</li>
</ol>
<div class="sourceCode" id="cb429"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb429-1"><a href="análisis-de-datos-con-python.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Quebrar un código en dos. </span></span>
<span id="cb429-2"><a href="análisis-de-datos-con-python.html#cb429-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-3"><a href="análisis-de-datos-con-python.html#cb429-3" aria-hidden="true" tabindex="-1"></a><span class="co">### Sin parentesis</span></span>
<span id="cb429-4"><a href="análisis-de-datos-con-python.html#cb429-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">4</span> <span class="op">+</span> <span class="dv">5</span> <span class="op">+</span> <span class="op">\</span></span>
<span id="cb429-5"><a href="análisis-de-datos-con-python.html#cb429-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">6</span> <span class="op">+</span> <span class="dv">7</span> </span>
<span id="cb429-6"><a href="análisis-de-datos-con-python.html#cb429-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb429-7"><a href="análisis-de-datos-con-python.html#cb429-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-8"><a href="análisis-de-datos-con-python.html#cb429-8" aria-hidden="true" tabindex="-1"></a><span class="co">### Con parentesis </span></span>
<span id="cb429-9"><a href="análisis-de-datos-con-python.html#cb429-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-10"><a href="análisis-de-datos-con-python.html#cb429-10" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">4</span> <span class="op">+</span></span>
<span id="cb429-11"><a href="análisis-de-datos-con-python.html#cb429-11" aria-hidden="true" tabindex="-1"></a>     <span class="dv">5</span> <span class="op">+</span> <span class="dv">6</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">+</span> <span class="dv">8</span>)</span>
<span id="cb429-12"><a href="análisis-de-datos-con-python.html#cb429-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-13"><a href="análisis-de-datos-con-python.html#cb429-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>El punto y coma puede terminar opcionalmente un enunciado. Esto es útil cuando quiero funciones y/o tareas en una línea.</li>
<li>El espacio en blanco es importante en Python. <strong>Muy importante</strong> Los bloques de código con sangría siempre van precedidos de dos puntos (:) en la línea anterior. En el ejemplo siguiente el resultado es distinto unicamente por los espacios en blanco.</li>
</ol>
<div class="sourceCode" id="cb430"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb430-1"><a href="análisis-de-datos-con-python.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 1: los espacios en blanco importan</span></span>
<span id="cb430-2"><a href="análisis-de-datos-con-python.html#cb430-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-3"><a href="análisis-de-datos-con-python.html#cb430-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&lt;</span> <span class="dv">4</span>: </span>
<span id="cb430-4"><a href="análisis-de-datos-con-python.html#cb430-4" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> x <span class="op">*</span> <span class="dv">2</span> </span>
<span id="cb430-5"><a href="análisis-de-datos-con-python.html#cb430-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb430-6"><a href="análisis-de-datos-con-python.html#cb430-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-7"><a href="análisis-de-datos-con-python.html#cb430-7" aria-hidden="true" tabindex="-1"></a><span class="co">### Ejemplo 2: los espacios en blanco verdaderamente importan. </span></span>
<span id="cb430-8"><a href="análisis-de-datos-con-python.html#cb430-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-9"><a href="análisis-de-datos-con-python.html#cb430-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">&lt;</span> <span class="dv">4</span>: </span>
<span id="cb430-10"><a href="análisis-de-datos-con-python.html#cb430-10" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> x <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb430-11"><a href="análisis-de-datos-con-python.html#cb430-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb430-12"><a href="análisis-de-datos-con-python.html#cb430-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-13"><a href="análisis-de-datos-con-python.html#cb430-13" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot;6. A pesar de lo anterior, es importante notar que **los espacios en blanco dentro de las líneas no importan**&quot;&quot;&quot;</span></span>
<span id="cb430-14"><a href="análisis-de-datos-con-python.html#cb430-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-15"><a href="análisis-de-datos-con-python.html#cb430-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Los espacio en blanco el interior de una linea no importan, por ejemplo, estas tres expresiones son equivalentes: </span></span>
<span id="cb430-16"><a href="análisis-de-datos-con-python.html#cb430-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-17"><a href="análisis-de-datos-con-python.html#cb430-17" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span><span class="dv">1</span><span class="op">+</span><span class="dv">2</span></span>
<span id="cb430-18"><a href="análisis-de-datos-con-python.html#cb430-18" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb430-19"><a href="análisis-de-datos-con-python.html#cb430-19" aria-hidden="true" tabindex="-1"></a>z             <span class="op">=</span>        <span class="dv">1</span>    <span class="op">+</span>                <span class="dv">2</span></span>
<span id="cb430-20"><a href="análisis-de-datos-con-python.html#cb430-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-21"><a href="análisis-de-datos-con-python.html#cb430-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x,y,z)</span></code></pre></div>
<ol start="7" style="list-style-type: decimal">
<li>Los paréntesis son para agrupar, llamar valores o ocupar funciones.</li>
</ol>
<div class="sourceCode" id="cb431"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb431-1"><a href="análisis-de-datos-con-python.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar </span></span>
<span id="cb431-2"><a href="análisis-de-datos-con-python.html#cb431-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-3"><a href="análisis-de-datos-con-python.html#cb431-3" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span> <span class="op">*</span> <span class="dv">3</span>) <span class="op">+</span> <span class="dv">3</span></span>
<span id="cb431-4"><a href="análisis-de-datos-con-python.html#cb431-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-5"><a href="análisis-de-datos-con-python.html#cb431-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Llamar </span></span>
<span id="cb431-6"><a href="análisis-de-datos-con-python.html#cb431-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-7"><a href="análisis-de-datos-con-python.html#cb431-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;valor:&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb431-8"><a href="análisis-de-datos-con-python.html#cb431-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-9"><a href="análisis-de-datos-con-python.html#cb431-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones </span></span>
<span id="cb431-10"><a href="análisis-de-datos-con-python.html#cb431-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-11"><a href="análisis-de-datos-con-python.html#cb431-11" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>]</span>
<span id="cb431-12"><a href="análisis-de-datos-con-python.html#cb431-12" aria-hidden="true" tabindex="-1"></a>L.sort()</span>
<span id="cb431-13"><a href="análisis-de-datos-con-python.html#cb431-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span>
<span id="cb431-14"><a href="análisis-de-datos-con-python.html#cb431-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb431-15"><a href="análisis-de-datos-con-python.html#cb431-15" aria-hidden="true" tabindex="-1"></a><span class="co"># El patentesis en blanco indica que la función debe ser ejecutada. </span></span>
<span id="cb431-16"><a href="análisis-de-datos-con-python.html#cb431-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Estos se llaman metodos, los veremos con detalle más adelante.</span></span></code></pre></div>
</div>
<div id="variables-y-objetos" class="section level3 hasAnchor" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Variables y objetos<a href="análisis-de-datos-con-python.html#variables-y-objetos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="escalares-1" class="section level4 hasAnchor" number="4.1.5.1">
<h4><span class="header-section-number">4.1.5.1</span> Escalares<a href="análisis-de-datos-con-python.html#escalares-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb432"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb432-1"><a href="análisis-de-datos-con-python.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se asignan variables utilizando signo &quot;=&quot;</span></span>
<span id="cb432-2"><a href="análisis-de-datos-con-python.html#cb432-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-3"><a href="análisis-de-datos-con-python.html#cb432-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">10</span> </span>
<span id="cb432-4"><a href="análisis-de-datos-con-python.html#cb432-4" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">4</span></span>
<span id="cb432-5"><a href="análisis-de-datos-con-python.html#cb432-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a,b)</span>
<span id="cb432-6"><a href="análisis-de-datos-con-python.html#cb432-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-7"><a href="análisis-de-datos-con-python.html#cb432-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Luego, podemos operar con ellas y definir nuevas variables</span></span>
<span id="cb432-8"><a href="análisis-de-datos-con-python.html#cb432-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-9"><a href="análisis-de-datos-con-python.html#cb432-9" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> a <span class="op">**</span> b <span class="op">*</span> <span class="fl">1.002</span></span>
<span id="cb432-10"><a href="análisis-de-datos-con-python.html#cb432-10" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> a <span class="op">**</span> b <span class="op">*</span> <span class="fl">1.2</span></span>
<span id="cb432-11"><a href="análisis-de-datos-con-python.html#cb432-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c,d)</span>
<span id="cb432-12"><a href="análisis-de-datos-con-python.html#cb432-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-13"><a href="análisis-de-datos-con-python.html#cb432-13" aria-hidden="true" tabindex="-1"></a>e  <span class="op">=</span> <span class="st">&quot;Hola&quot;</span></span>
<span id="cb432-14"><a href="análisis-de-datos-con-python.html#cb432-14" aria-hidden="true" tabindex="-1"></a>e1 <span class="op">=</span> <span class="st">&#39;Hola&#39;</span></span>
<span id="cb432-15"><a href="análisis-de-datos-con-python.html#cb432-15" aria-hidden="true" tabindex="-1"></a>f  <span class="op">=</span> <span class="va">True</span> </span>
<span id="cb432-16"><a href="análisis-de-datos-con-python.html#cb432-16" aria-hidden="true" tabindex="-1"></a>f1 <span class="op">=</span> <span class="va">False</span></span>
<span id="cb432-17"><a href="análisis-de-datos-con-python.html#cb432-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(e,e1,f,f1)</span>
<span id="cb432-18"><a href="análisis-de-datos-con-python.html#cb432-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-19"><a href="análisis-de-datos-con-python.html#cb432-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: ¿Qué ocurre con los separadores de decimales?</span></span></code></pre></div>
</div>
<div id="tipos-de-escalaresvalores-en-python" class="section level4 hasAnchor" number="4.1.5.2">
<h4><span class="header-section-number">4.1.5.2</span> Tipos de escalares/valores en Python<a href="análisis-de-datos-con-python.html#tipos-de-escalaresvalores-en-python" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p>Existen distintos tipos de objetos en Python, para saber cuales existen podemos
utilizar <strong>type()</strong>.</p></li>
<li><p>Cada vez que escriba un () me estaré refieriendo a una función.</p></li>
</ol>
<div id="float" class="section level5 hasAnchor" number="4.1.5.2.1">
<h5><span class="header-section-number">4.1.5.2.1</span> Float<a href="análisis-de-datos-con-python.html#float" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li>Representa un número real. Tiene una parte entera u una fracción</li>
</ul>
<div class="sourceCode" id="cb433"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb433-1"><a href="análisis-de-datos-con-python.html#cb433-1" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="fl">3.14126</span> <span class="op">*</span> <span class="fl">3.1416</span> </span>
<span id="cb433-2"><a href="análisis-de-datos-con-python.html#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(n)</span></code></pre></div>
<ul>
<li>Importante tener cuidado con la precisión. Si queremos hacer algo muy preciso, es importante tener ojo con esta caracteristica del formato float.</li>
</ul>
<div class="sourceCode" id="cb434"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb434-1"><a href="análisis-de-datos-con-python.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.2</span> <span class="op">==</span> <span class="fl">0.3</span></span>
<span id="cb434-2"><a href="análisis-de-datos-con-python.html#cb434-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb434-3"><a href="análisis-de-datos-con-python.html#cb434-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;0.1 = </span><span class="sc">{0:.17f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="fl">0.1</span>))</span>
<span id="cb434-4"><a href="análisis-de-datos-con-python.html#cb434-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;0.2 = </span><span class="sc">{0:.17f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="fl">0.2</span>))</span>
<span id="cb434-5"><a href="análisis-de-datos-con-python.html#cb434-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;0.3 = </span><span class="sc">{0:.17f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(<span class="fl">0.3</span>))</span></code></pre></div>
</div>
<div id="números-complejos." class="section level5 hasAnchor" number="4.1.5.2.2">
<h5><span class="header-section-number">4.1.5.2.2</span> Números complejos.<a href="análisis-de-datos-con-python.html#números-complejos." class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li>Números con una parte real y la otra imaginaria.</li>
</ul>
<div class="sourceCode" id="cb435"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb435-1"><a href="análisis-de-datos-con-python.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="bu">complex</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb435-2"><a href="análisis-de-datos-con-python.html#cb435-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-3"><a href="análisis-de-datos-con-python.html#cb435-3" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="dv">3</span> <span class="op">+</span> <span class="ot">4j</span></span>
<span id="cb435-4"><a href="análisis-de-datos-con-python.html#cb435-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-5"><a href="análisis-de-datos-con-python.html#cb435-5" aria-hidden="true" tabindex="-1"></a>c.real</span>
<span id="cb435-6"><a href="análisis-de-datos-con-python.html#cb435-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-7"><a href="análisis-de-datos-con-python.html#cb435-7" aria-hidden="true" tabindex="-1"></a>c.imag</span>
<span id="cb435-8"><a href="análisis-de-datos-con-python.html#cb435-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-9"><a href="análisis-de-datos-con-python.html#cb435-9" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(c.real)</span>
<span id="cb435-10"><a href="análisis-de-datos-con-python.html#cb435-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-11"><a href="análisis-de-datos-con-python.html#cb435-11" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(c)</span></code></pre></div>
</div>
<div id="integers" class="section level5 hasAnchor" number="4.1.5.2.3">
<h5><span class="header-section-number">4.1.5.2.3</span> Integers<a href="análisis-de-datos-con-python.html#integers" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li>Números enteros</li>
</ul>
<div class="sourceCode" id="cb436"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb436-1"><a href="análisis-de-datos-con-python.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. int: números enteros</span></span>
<span id="cb436-2"><a href="análisis-de-datos-con-python.html#cb436-2" aria-hidden="true" tabindex="-1"></a>dias_semana <span class="op">=</span> <span class="dv">7</span> </span>
<span id="cb436-3"><a href="análisis-de-datos-con-python.html#cb436-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dias_semana)</span>
<span id="cb436-4"><a href="análisis-de-datos-con-python.html#cb436-4" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(dias_semana)</span></code></pre></div>
</div>
<div id="boolean" class="section level5 hasAnchor" number="4.1.5.2.4">
<h5><span class="header-section-number">4.1.5.2.4</span> Boolean<a href="análisis-de-datos-con-python.html#boolean" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Variables que toman como valor verdadero o falso. Estos resultados se obtienen al utilizar comparadores. Muy importantes para programar correctamente.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb437-1"><a href="análisis-de-datos-con-python.html#cb437-1" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="va">True</span> </span>
<span id="cb437-2"><a href="análisis-de-datos-con-python.html#cb437-2" aria-hidden="true" tabindex="-1"></a>z1 <span class="op">=</span> <span class="va">False</span> </span>
<span id="cb437-3"><a href="análisis-de-datos-con-python.html#cb437-3" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(z)</span>
<span id="cb437-4"><a href="análisis-de-datos-con-python.html#cb437-4" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(z1)</span>
<span id="cb437-5"><a href="análisis-de-datos-con-python.html#cb437-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-6"><a href="análisis-de-datos-con-python.html#cb437-6" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> (<span class="dv">4</span> <span class="op">&lt;</span> <span class="dv">5</span>)</span>
<span id="cb437-7"><a href="análisis-de-datos-con-python.html#cb437-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span>
<span id="cb437-8"><a href="análisis-de-datos-con-python.html#cb437-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(result))</span>
<span id="cb437-9"><a href="análisis-de-datos-con-python.html#cb437-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-10"><a href="análisis-de-datos-con-python.html#cb437-10" aria-hidden="true" tabindex="-1"></a><span class="co"># La función bool() tambíen sirve para crear estos objetos. </span></span>
<span id="cb437-11"><a href="análisis-de-datos-con-python.html#cb437-11" aria-hidden="true" tabindex="-1"></a><span class="bu">bool</span>(<span class="dv">2022</span>)</span>
<span id="cb437-12"><a href="análisis-de-datos-con-python.html#cb437-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-13"><a href="análisis-de-datos-con-python.html#cb437-13" aria-hidden="true" tabindex="-1"></a><span class="bu">bool</span>(<span class="dv">0</span>)</span>
<span id="cb437-14"><a href="análisis-de-datos-con-python.html#cb437-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-15"><a href="análisis-de-datos-con-python.html#cb437-15" aria-hidden="true" tabindex="-1"></a><span class="bu">bool</span>(<span class="va">None</span>)</span>
<span id="cb437-16"><a href="análisis-de-datos-con-python.html#cb437-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-17"><a href="análisis-de-datos-con-python.html#cb437-17" aria-hidden="true" tabindex="-1"></a><span class="bu">bool</span>(<span class="st">&quot;&quot;</span>)</span>
<span id="cb437-18"><a href="análisis-de-datos-con-python.html#cb437-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb437-19"><a href="análisis-de-datos-con-python.html#cb437-19" aria-hidden="true" tabindex="-1"></a><span class="bu">bool</span>(<span class="st">&quot;Nico&quot;</span>)</span></code></pre></div>
</div>
<div id="strings" class="section level5 hasAnchor" number="4.1.5.2.5">
<h5><span class="header-section-number">4.1.5.2.5</span> Strings<a href="análisis-de-datos-con-python.html#strings" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<ul>
<li>Texto. Se creo con dos comillas. Recordar que la versión “missing” en string son dos comillas sin texto.</li>
</ul>
<div class="sourceCode" id="cb438"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb438-1"><a href="análisis-de-datos-con-python.html#cb438-1" aria-hidden="true" tabindex="-1"></a>minombre <span class="op">=</span> <span class="st">&#39;nico&#39;</span></span>
<span id="cb438-2"><a href="análisis-de-datos-con-python.html#cb438-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-3"><a href="análisis-de-datos-con-python.html#cb438-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenar texto</span></span>
<span id="cb438-4"><a href="análisis-de-datos-con-python.html#cb438-4" aria-hidden="true" tabindex="-1"></a>texto <span class="op">=</span> <span class="st">&#39;a&#39;</span> <span class="op">+</span> <span class="st">&#39;b&#39;</span></span>
<span id="cb438-5"><a href="análisis-de-datos-con-python.html#cb438-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(texto)</span>
<span id="cb438-6"><a href="análisis-de-datos-con-python.html#cb438-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-7"><a href="análisis-de-datos-con-python.html#cb438-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Concater multiples veces </span></span>
<span id="cb438-8"><a href="análisis-de-datos-con-python.html#cb438-8" aria-hidden="true" tabindex="-1"></a>texto_multiplicado <span class="op">=</span> <span class="st">&quot;a&quot;</span> <span class="op">*</span> <span class="dv">10</span></span>
<span id="cb438-9"><a href="análisis-de-datos-con-python.html#cb438-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(texto_multiplicado)</span>
<span id="cb438-10"><a href="análisis-de-datos-con-python.html#cb438-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-11"><a href="análisis-de-datos-con-python.html#cb438-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Tamaño </span></span>
<span id="cb438-12"><a href="análisis-de-datos-con-python.html#cb438-12" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(texto)</span>
<span id="cb438-13"><a href="análisis-de-datos-con-python.html#cb438-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb438-14"><a href="análisis-de-datos-con-python.html#cb438-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Acceder a una letra en particular</span></span>
<span id="cb438-15"><a href="análisis-de-datos-con-python.html#cb438-15" aria-hidden="true" tabindex="-1"></a>texto[<span class="dv">0</span>]</span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Alerta:</b> Los distintos tipos de datos importan debido a que se comportan distinto cuando operamos con ellos.</p>
</div>
</div>
<div id="none" class="section level5 hasAnchor" number="4.1.5.2.6">
<h5><span class="header-section-number">4.1.5.2.6</span> None<a href="análisis-de-datos-con-python.html#none" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Python incluye un tipo especial <strong>NoneType</strong> que solo tiene un valor posible “None”.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb439-1"><a href="análisis-de-datos-con-python.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(<span class="va">None</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="operadores" class="section level3 hasAnchor" number="4.1.6">
<h3><span class="header-section-number">4.1.6</span> Operadores<a href="análisis-de-datos-con-python.html#operadores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Como todo lenguaje de programación Python permite hacer operaciones de distinto tipo.</li>
</ul>
<div id="operaciones-básicas" class="section level4 hasAnchor" number="4.1.6.1">
<h4><span class="header-section-number">4.1.6.1</span> Operaciones básicas<a href="análisis-de-datos-con-python.html#operaciones-básicas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Operador</th>
<th>Nombre</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>a + b</td>
<td>Suma</td>
<td>Suma de a y b</td>
</tr>
<tr class="even">
<td>a - b</td>
<td>Sustracción</td>
<td>Diferencia de a y b</td>
</tr>
<tr class="odd">
<td>a * b</td>
<td>Multiplicación</td>
<td>Producto de a y b</td>
</tr>
<tr class="even">
<td>a / b</td>
<td>División verdadera</td>
<td>Cociente de a y b</td>
</tr>
<tr class="odd">
<td>a // b</td>
<td>División mínima</td>
<td>Cociente de a y b, eliminando las partes fraccionarias</td>
</tr>
<tr class="even">
<td>a % b</td>
<td>Módulo</td>
<td>Resto entero tras la división de a entre b</td>
</tr>
<tr class="odd">
<td>a ** b</td>
<td>Exponenciación</td>
<td>a elevado a la potencia de b</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb440"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb440-1"><a href="análisis-de-datos-con-python.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Suma </span></span>
<span id="cb440-2"><a href="análisis-de-datos-con-python.html#cb440-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">7</span> <span class="op">+</span> <span class="dv">3</span>)</span>
<span id="cb440-3"><a href="análisis-de-datos-con-python.html#cb440-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-4"><a href="análisis-de-datos-con-python.html#cb440-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Resta </span></span>
<span id="cb440-5"><a href="análisis-de-datos-con-python.html#cb440-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">10</span> <span class="op">-</span> <span class="dv">2</span>)</span>
<span id="cb440-6"><a href="análisis-de-datos-con-python.html#cb440-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-7"><a href="análisis-de-datos-con-python.html#cb440-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Division </span></span>
<span id="cb440-8"><a href="análisis-de-datos-con-python.html#cb440-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">5</span> <span class="op">/</span> <span class="dv">10</span>)</span>
<span id="cb440-9"><a href="análisis-de-datos-con-python.html#cb440-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-10"><a href="análisis-de-datos-con-python.html#cb440-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Multiplicación </span></span>
<span id="cb440-11"><a href="análisis-de-datos-con-python.html#cb440-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">5</span> <span class="op">*</span> <span class="dv">3</span>) </span>
<span id="cb440-12"><a href="análisis-de-datos-con-python.html#cb440-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-13"><a href="análisis-de-datos-con-python.html#cb440-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Modulo: retorna el resto de la división entre estos dos elementos</span></span>
<span id="cb440-14"><a href="análisis-de-datos-con-python.html#cb440-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">15</span> <span class="op">%</span> <span class="dv">7</span>)</span>
<span id="cb440-15"><a href="análisis-de-datos-con-python.html#cb440-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-16"><a href="análisis-de-datos-con-python.html#cb440-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Exponencial: para elevar en potencia. Esto es distinto a R o Stata, ojo ahí. </span></span>
<span id="cb440-17"><a href="análisis-de-datos-con-python.html#cb440-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">4</span> <span class="op">**</span> <span class="dv">10</span>)</span>
<span id="cb440-18"><a href="análisis-de-datos-con-python.html#cb440-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-19"><a href="análisis-de-datos-con-python.html#cb440-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Incluir mensajes</span></span>
<span id="cb440-20"><a href="análisis-de-datos-con-python.html#cb440-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;el resultado es&quot;</span>, <span class="dv">44</span><span class="op">**</span><span class="dv">3</span>)</span>
<span id="cb440-21"><a href="análisis-de-datos-con-python.html#cb440-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-22"><a href="análisis-de-datos-con-python.html#cb440-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. División mínima </span></span>
<span id="cb440-23"><a href="análisis-de-datos-con-python.html#cb440-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Floor division</span></span>
<span id="cb440-24"><a href="análisis-de-datos-con-python.html#cb440-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">11</span> <span class="op">//</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Alerta:</b> La forma de hacer el exponencial en Python es distinto a R o Stata.</p>
</div>
</div>
<div id="operadores-de-asignación" class="section level4 hasAnchor" number="4.1.6.2">
<h4><span class="header-section-number">4.1.6.2</span> Operadores de asignación<a href="análisis-de-datos-con-python.html#operadores-de-asignación" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb441"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb441-1"><a href="análisis-de-datos-con-python.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar valor</span></span>
<span id="cb441-2"><a href="análisis-de-datos-con-python.html#cb441-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">24</span></span>
<span id="cb441-3"><a href="análisis-de-datos-con-python.html#cb441-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb441-4"><a href="análisis-de-datos-con-python.html#cb441-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb441-5"><a href="análisis-de-datos-con-python.html#cb441-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb441-6"><a href="análisis-de-datos-con-python.html#cb441-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Actualizar valor</span></span>
<span id="cb441-7"><a href="análisis-de-datos-con-python.html#cb441-7" aria-hidden="true" tabindex="-1"></a>a <span class="op">+=</span> <span class="dv">2</span>  <span class="co"># equivalente a &quot;a = a + 2&quot;</span></span>
<span id="cb441-8"><a href="análisis-de-datos-con-python.html#cb441-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span></code></pre></div>
</div>
<div id="operadores-de-comparación" class="section level4 hasAnchor" number="4.1.6.3">
<h4><span class="header-section-number">4.1.6.3</span> Operadores de comparación<a href="análisis-de-datos-con-python.html#operadores-de-comparación" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<thead>
<tr class="header">
<th>Operación</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>a == b</td>
<td>a igual a b</td>
</tr>
<tr class="even">
<td>a != b</td>
<td>a no igual a b</td>
</tr>
<tr class="odd">
<td>a &lt; b</td>
<td>a menor que b</td>
</tr>
<tr class="even">
<td>a &gt; b</td>
<td>a mayor que b</td>
</tr>
<tr class="odd">
<td>a &lt;= b</td>
<td>a menor o igual que b</td>
</tr>
<tr class="even">
<td>a &gt;= b</td>
<td>a mayor o igual que b</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb442"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb442-1"><a href="análisis-de-datos-con-python.html#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 25 es impar</span></span>
<span id="cb442-2"><a href="análisis-de-datos-con-python.html#cb442-2" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span> <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb442-3"><a href="análisis-de-datos-con-python.html#cb442-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-4"><a href="análisis-de-datos-con-python.html#cb442-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 66 is impar</span></span>
<span id="cb442-5"><a href="análisis-de-datos-con-python.html#cb442-5" aria-hidden="true" tabindex="-1"></a><span class="dv">66</span> <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb442-6"><a href="análisis-de-datos-con-python.html#cb442-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-7"><a href="análisis-de-datos-con-python.html#cb442-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Esta entre 15 y 30?</span></span>
<span id="cb442-8"><a href="análisis-de-datos-con-python.html#cb442-8" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb442-9"><a href="análisis-de-datos-con-python.html#cb442-9" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span> <span class="op">&lt;</span> a <span class="op">&lt;</span> <span class="dv">30</span></span>
<span id="cb442-10"><a href="análisis-de-datos-con-python.html#cb442-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-11"><a href="análisis-de-datos-con-python.html#cb442-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Es una negativo la negación del cero? </span></span>
<span id="cb442-12"><a href="análisis-de-datos-con-python.html#cb442-12" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="dv">1</span> <span class="op">==</span> <span class="op">~</span><span class="dv">0</span></span></code></pre></div>
</div>
<div id="operadores-lógicos" class="section level4 hasAnchor" number="4.1.6.4">
<h4><span class="header-section-number">4.1.6.4</span> Operadores lógicos<a href="análisis-de-datos-con-python.html#operadores-lógicos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Cuando se trabaja con valores booleanos, Python proporciona operadores para combinar los valores utilizando los conceptos estándar de “and”, “or” y “not”. Como es de esperar, estos operadores se expresan utilizando estas palabras.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb443-1"><a href="análisis-de-datos-con-python.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="co"># y</span></span>
<span id="cb443-2"><a href="análisis-de-datos-con-python.html#cb443-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb443-3"><a href="análisis-de-datos-con-python.html#cb443-3" aria-hidden="true" tabindex="-1"></a>(x <span class="op">&lt;</span> <span class="dv">6</span>) <span class="kw">and</span> (x <span class="op">&gt;</span> <span class="dv">2</span>)</span>
<span id="cb443-4"><a href="análisis-de-datos-con-python.html#cb443-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-5"><a href="análisis-de-datos-con-python.html#cb443-5" aria-hidden="true" tabindex="-1"></a><span class="co"># o</span></span>
<span id="cb443-6"><a href="análisis-de-datos-con-python.html#cb443-6" aria-hidden="true" tabindex="-1"></a>(x <span class="op">&gt;</span> <span class="dv">10</span>) <span class="kw">or</span> (x <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>)</span>
<span id="cb443-7"><a href="análisis-de-datos-con-python.html#cb443-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-8"><a href="análisis-de-datos-con-python.html#cb443-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Negación</span></span>
<span id="cb443-9"><a href="análisis-de-datos-con-python.html#cb443-9" aria-hidden="true" tabindex="-1"></a><span class="kw">not</span> (x <span class="op">&lt;</span> <span class="dv">6</span>)</span>
<span id="cb443-10"><a href="análisis-de-datos-con-python.html#cb443-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-11"><a href="análisis-de-datos-con-python.html#cb443-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Distinto a </span></span>
<span id="cb443-12"><a href="análisis-de-datos-con-python.html#cb443-12" aria-hidden="true" tabindex="-1"></a>(x <span class="op">&gt;</span> <span class="dv">1</span>) <span class="op">!=</span> (x <span class="op">&lt;</span> <span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="operadores-de-identidad-y-afiliación" class="section level4 hasAnchor" number="4.1.6.5">
<h4><span class="header-section-number">4.1.6.5</span> Operadores de Identidad y Afiliación<a href="análisis-de-datos-con-python.html#operadores-de-identidad-y-afiliación" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<thead>
<tr class="header">
<th>Operador</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>a is b</td>
<td>Verdadero si a y b son objetos idénticos</td>
</tr>
<tr class="even">
<td>a is not b</td>
<td>Verdadero si a y b no son objetos idénticos</td>
</tr>
<tr class="odd">
<td>a in b</td>
<td>Verdadero si a es un miembro de b</td>
</tr>
<tr class="even">
<td>a not in b</td>
<td>Verdadero si a no es miembro de b</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb444"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb444-1"><a href="análisis-de-datos-con-python.html#cb444-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb444-2"><a href="análisis-de-datos-con-python.html#cb444-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb444-3"><a href="análisis-de-datos-con-python.html#cb444-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-4"><a href="análisis-de-datos-con-python.html#cb444-4" aria-hidden="true" tabindex="-1"></a>a <span class="op">==</span> b</span>
<span id="cb444-5"><a href="análisis-de-datos-con-python.html#cb444-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-6"><a href="análisis-de-datos-con-python.html#cb444-6" aria-hidden="true" tabindex="-1"></a>a <span class="kw">is</span> b</span>
<span id="cb444-7"><a href="análisis-de-datos-con-python.html#cb444-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-8"><a href="análisis-de-datos-con-python.html#cb444-8" aria-hidden="true" tabindex="-1"></a>a <span class="kw">is</span> <span class="kw">not</span> b</span>
<span id="cb444-9"><a href="análisis-de-datos-con-python.html#cb444-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-10"><a href="análisis-de-datos-con-python.html#cb444-10" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb444-11"><a href="análisis-de-datos-con-python.html#cb444-11" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> a</span>
<span id="cb444-12"><a href="análisis-de-datos-con-python.html#cb444-12" aria-hidden="true" tabindex="-1"></a>a <span class="kw">is</span> b</span>
<span id="cb444-13"><a href="análisis-de-datos-con-python.html#cb444-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-14"><a href="análisis-de-datos-con-python.html#cb444-14" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb444-15"><a href="análisis-de-datos-con-python.html#cb444-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-16"><a href="análisis-de-datos-con-python.html#cb444-16" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="kw">not</span> <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.1.1: </b> Genere un vecto llamado II igual a 100, un interes igual a un 1% diario y un horizonte temporal de un año. Calcule la ganancia que tendría al final del periodo si es paciente. Finalmente, genere un mensaje que diga “Partí con”YY” y ahora tengo “XX” en ganancias, donde “YY” y “XX” son los montos.</p>
</div>
</div>
</div>
<div id="estructuras-de-datos-listas-tuplas-conjuntos-diccionarios" class="section level3 hasAnchor" number="4.1.7">
<h3><span class="header-section-number">4.1.7</span> Estructuras de datos: listas, tuplas, conjuntos, diccionarios<a href="análisis-de-datos-con-python.html#estructuras-de-datos-listas-tuplas-conjuntos-diccionarios" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>De momento hemos visto distintos tipos de variables y algunas funciones asociadas a ellas. Ahora vamos a ver estructuras que nos serás de mucha utilidad a lo largo del curso. La siguiente tabla muestra todos los tipos:</li>
</ul>
<table>
<thead>
<tr class="header">
<th>Tipo</th>
<th>Ejemplo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>list</td>
<td>[1, 2, 3]</td>
<td>Colección ordenada</td>
</tr>
<tr class="even">
<td>tuple</td>
<td>(1, 2, 3)</td>
<td>Colección ordenada inmutable</td>
</tr>
<tr class="odd">
<td>dict</td>
<td>{‘a’:1, ‘b’:2, ‘c’:3}</td>
<td>Mapeo desordenado (clave,valor)</td>
</tr>
<tr class="even">
<td>set</td>
<td>{1, 2, 3}</td>
<td>Colección desordenada de valores únicos</td>
</tr>
</tbody>
</table>
<div id="listas-2" class="section level4 hasAnchor" number="4.1.7.1">
<h4><span class="header-section-number">4.1.7.1</span> Listas<a href="análisis-de-datos-con-python.html#listas-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Las listas son el tipo básico de colección de datos ordenados en Python. Se pueden definir con valores separados por comas entre corchetes cuiadrados</li>
</ul>
<div class="sourceCode" id="cb445"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb445-1"><a href="análisis-de-datos-con-python.html#cb445-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="fl">1.5</span>, <span class="fl">1.3</span>, <span class="fl">1.4</span>, ] </span>
<span id="cb445-2"><a href="análisis-de-datos-con-python.html#cb445-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb445-3"><a href="análisis-de-datos-con-python.html#cb445-3" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(a) <span class="co"># tamaño de la lista</span></span>
<span id="cb445-4"><a href="análisis-de-datos-con-python.html#cb445-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-5"><a href="análisis-de-datos-con-python.html#cb445-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Estas listas pueden incluir distintos tipos de variables en la lista, por ejemplo incluir númerico y texto </span></span>
<span id="cb445-6"><a href="análisis-de-datos-con-python.html#cb445-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-7"><a href="análisis-de-datos-con-python.html#cb445-7" aria-hidden="true" tabindex="-1"></a>numtext <span class="op">=</span> [<span class="st">&quot;pepe&quot;</span>, <span class="fl">1.3</span>, <span class="st">&quot;pepa&quot;</span>, <span class="fl">1.4</span>]</span>
<span id="cb445-8"><a href="análisis-de-datos-con-python.html#cb445-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(numtext)</span>
<span id="cb445-9"><a href="análisis-de-datos-con-python.html#cb445-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-10"><a href="análisis-de-datos-con-python.html#cb445-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pueden tambíen incluir listas anidadas y valores lógicos (lista de listas)</span></span>
<span id="cb445-11"><a href="análisis-de-datos-con-python.html#cb445-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-12"><a href="análisis-de-datos-con-python.html#cb445-12" aria-hidden="true" tabindex="-1"></a>listasanidadas <span class="op">=</span> [[<span class="fl">1.3</span>, <span class="dv">1</span>,<span class="dv">2</span>], [<span class="st">&quot;pepita&quot;</span>, <span class="st">&quot;pepito&quot;</span>], <span class="va">True</span>]</span>
<span id="cb445-13"><a href="análisis-de-datos-con-python.html#cb445-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-14"><a href="análisis-de-datos-con-python.html#cb445-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(listasanidadas)</span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Alerta:</b> Una lista anidada es una lista de listas.</p>
</div>
<div class="sourceCode" id="cb446"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb446-1"><a href="análisis-de-datos-con-python.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora veamos el tipo de la lista</span></span>
<span id="cb446-2"><a href="análisis-de-datos-con-python.html#cb446-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-3"><a href="análisis-de-datos-con-python.html#cb446-3" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(listasanidadas)</span>
<span id="cb446-4"><a href="análisis-de-datos-con-python.html#cb446-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(listasanidadas))</span>
<span id="cb446-5"><a href="análisis-de-datos-con-python.html#cb446-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb446-6"><a href="análisis-de-datos-con-python.html#cb446-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambíen podemos incluir operaciones dentro</span></span>
<span id="cb446-7"><a href="análisis-de-datos-con-python.html#cb446-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span>, <span class="st">&quot;a&quot;</span> <span class="op">*</span> <span class="dv">5</span>, <span class="dv">3</span>]</span></code></pre></div>
<div id="subconjuntos-de-listas" class="section level5 hasAnchor" number="4.1.7.1.1">
<h5><span class="header-section-number">4.1.7.1.1</span> Subconjuntos de listas<a href="análisis-de-datos-con-python.html#subconjuntos-de-listas" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb447"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb447-1"><a href="análisis-de-datos-con-python.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a ver como acceder a los elememetos de una lista. </span></span>
<span id="cb447-2"><a href="análisis-de-datos-con-python.html#cb447-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb447-3"><a href="análisis-de-datos-con-python.html#cb447-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos lista de ejemplo</span></span>
<span id="cb447-4"><a href="análisis-de-datos-con-python.html#cb447-4" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="va">True</span>, <span class="st">&quot;pepa&quot;</span>, [<span class="dv">1</span>,<span class="dv">3</span>], <span class="dv">2</span>]</span>
<span id="cb447-5"><a href="análisis-de-datos-con-python.html#cb447-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb447-6"><a href="análisis-de-datos-con-python.html#cb447-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a ver distintos subconjuntos </span></span>
<span id="cb447-7"><a href="análisis-de-datos-con-python.html#cb447-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb447-8"><a href="análisis-de-datos-con-python.html#cb447-8" aria-hidden="true" tabindex="-1"></a>lista[<span class="dv">1</span>] <span class="co"># Segundo elemento!</span></span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Alerta:</b> Python cuenta el primer elemento como un cero!</p>
</div>
<div class="sourceCode" id="cb448"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb448-1"><a href="análisis-de-datos-con-python.html#cb448-1" aria-hidden="true" tabindex="-1"></a>lista[<span class="dv">0</span>] <span class="co"># primer elemento de la lista</span></span>
<span id="cb448-2"><a href="análisis-de-datos-con-python.html#cb448-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-3"><a href="análisis-de-datos-con-python.html#cb448-3" aria-hidden="true" tabindex="-1"></a>lista[<span class="dv">2</span>] <span class="co"># tercer elemento de la lista</span></span>
<span id="cb448-4"><a href="análisis-de-datos-con-python.html#cb448-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-5"><a href="análisis-de-datos-con-python.html#cb448-5" aria-hidden="true" tabindex="-1"></a>lista[<span class="dv">3</span>] <span class="co"># cuarto elemento de la lista</span></span>
<span id="cb448-6"><a href="análisis-de-datos-con-python.html#cb448-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-7"><a href="análisis-de-datos-con-python.html#cb448-7" aria-hidden="true" tabindex="-1"></a>lista[<span class="op">-</span><span class="dv">1</span>] <span class="co"># primer elemento de derecha a izquierda!</span></span>
<span id="cb448-8"><a href="análisis-de-datos-con-python.html#cb448-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-9"><a href="análisis-de-datos-con-python.html#cb448-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien podemos hacer subconjuntos indicado el inicio y el fin </span></span>
<span id="cb448-10"><a href="análisis-de-datos-con-python.html#cb448-10" aria-hidden="true" tabindex="-1"></a>lista[<span class="dv">0</span>:<span class="dv">2</span>]</span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Alerta:</b> El primero es incluyente mientras que el segundo excluye</p>
</div>
<div class="sourceCode" id="cb449"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb449-1"><a href="análisis-de-datos-con-python.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambíen se le puede decir a Python que el inicio sea por defecto</span></span>
<span id="cb449-2"><a href="análisis-de-datos-con-python.html#cb449-2" aria-hidden="true" tabindex="-1"></a>lista[:<span class="dv">2</span>]</span></code></pre></div>
<p>Finalmente, es posible especificar un tercer entero que representa el tamaño del paso; por ejemplo, para seleccionar cada segundo elemento de la lista, podemos escribir</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb450-1"><a href="análisis-de-datos-con-python.html#cb450-1" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>]</span>
<span id="cb450-2"><a href="análisis-de-datos-con-python.html#cb450-2" aria-hidden="true" tabindex="-1"></a>L[::<span class="dv">2</span>]  <span class="co"># equivalent to lista[0:len(lista):2]</span></span>
<span id="cb450-3"><a href="análisis-de-datos-con-python.html#cb450-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-4"><a href="análisis-de-datos-con-python.html#cb450-4" aria-hidden="true" tabindex="-1"></a><span class="co"># El tercer elemento es quien nos muestra el salto. Distinto a Stata donde es: inicio(paso)final</span></span>
<span id="cb450-5"><a href="análisis-de-datos-con-python.html#cb450-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-6"><a href="análisis-de-datos-con-python.html#cb450-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  Pregunta: ¿Qué ocurre en este caso? </span></span>
<span id="cb450-7"><a href="análisis-de-datos-con-python.html#cb450-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-8"><a href="análisis-de-datos-con-python.html#cb450-8" aria-hidden="true" tabindex="-1"></a>lista2 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="st">&quot;pepe&quot;</span>,<span class="st">&quot;pepa&quot;</span>]</span>
<span id="cb450-9"><a href="análisis-de-datos-con-python.html#cb450-9" aria-hidden="true" tabindex="-1"></a>lista2[<span class="dv">2</span>:]</span>
<span id="cb450-10"><a href="análisis-de-datos-con-python.html#cb450-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-11"><a href="análisis-de-datos-con-python.html#cb450-11" aria-hidden="true" tabindex="-1"></a><span class="co"># R: Selecciona hasta final!</span></span></code></pre></div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
</div>
<div id="operar-con-listas-anidadas" class="section level5 hasAnchor" number="4.1.7.1.2">
<h5><span class="header-section-number">4.1.7.1.2</span> Operar con listas anidadas<a href="análisis-de-datos-con-python.html#operar-con-listas-anidadas" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb451"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb451-1"><a href="análisis-de-datos-con-python.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos operar con los subconjuntos incluso cuando tienen listas </span></span>
<span id="cb451-2"><a href="análisis-de-datos-con-python.html#cb451-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-3"><a href="análisis-de-datos-con-python.html#cb451-3" aria-hidden="true" tabindex="-1"></a>lista3 <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>, [<span class="dv">4</span>,<span class="dv">5</span>],<span class="dv">7</span>]</span>
<span id="cb451-4"><a href="análisis-de-datos-con-python.html#cb451-4" aria-hidden="true" tabindex="-1"></a>v1 <span class="op">=</span> lista3[<span class="dv">1</span>]</span>
<span id="cb451-5"><a href="análisis-de-datos-con-python.html#cb451-5" aria-hidden="true" tabindex="-1"></a>v2 <span class="op">=</span> lista3[<span class="dv">3</span>]</span>
<span id="cb451-6"><a href="análisis-de-datos-con-python.html#cb451-6" aria-hidden="true" tabindex="-1"></a>v3 <span class="op">=</span> v2[<span class="dv">1</span>]</span>
<span id="cb451-7"><a href="análisis-de-datos-con-python.html#cb451-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-8"><a href="análisis-de-datos-con-python.html#cb451-8" aria-hidden="true" tabindex="-1"></a>v4 <span class="op">=</span> v1 <span class="op">*</span> v3 </span>
<span id="cb451-9"><a href="análisis-de-datos-con-python.html#cb451-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(v4)</span>
<span id="cb451-10"><a href="análisis-de-datos-con-python.html#cb451-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-11"><a href="análisis-de-datos-con-python.html#cb451-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Pregunta: ¿Cómo llegamos al 10? ¿Qué paso con v3?</span></span>
<span id="cb451-12"><a href="análisis-de-datos-con-python.html#cb451-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-13"><a href="análisis-de-datos-con-python.html#cb451-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Para seleccionar los elementos de una lista de listas debemos utilziar dos parentesis cuadrados</span></span>
<span id="cb451-14"><a href="análisis-de-datos-con-python.html#cb451-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Por ejemplo, si quiero seleccionar el segundo elemento </span></span>
<span id="cb451-15"><a href="análisis-de-datos-con-python.html#cb451-15" aria-hidden="true" tabindex="-1"></a><span class="co"># del tercer elemento de la lista que hemos creado </span></span>
<span id="cb451-16"><a href="análisis-de-datos-con-python.html#cb451-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-17"><a href="análisis-de-datos-con-python.html#cb451-17" aria-hidden="true" tabindex="-1"></a>lista_anidada <span class="op">=</span> [[<span class="dv">1</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="st">&quot;pepa&quot;</span>]]</span>
<span id="cb451-18"><a href="análisis-de-datos-con-python.html#cb451-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-19"><a href="análisis-de-datos-con-python.html#cb451-19" aria-hidden="true" tabindex="-1"></a>segundalista_tercerelemento  <span class="op">=</span> lista_anidada[<span class="dv">1</span>][<span class="dv">2</span>]</span>
<span id="cb451-20"><a href="análisis-de-datos-con-python.html#cb451-20" aria-hidden="true" tabindex="-1"></a>primeralista_segundoelemento <span class="op">=</span> lista_anidada[<span class="dv">0</span>][<span class="dv">1</span>]</span>
<span id="cb451-21"><a href="análisis-de-datos-con-python.html#cb451-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-22"><a href="análisis-de-datos-con-python.html#cb451-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(segundalista_tercerelemento)</span>
<span id="cb451-23"><a href="análisis-de-datos-con-python.html#cb451-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(primeralista_segundoelemento)</span></code></pre></div>
</div>
<div id="manipulación-de-listas" class="section level5 hasAnchor" number="4.1.7.1.3">
<h5><span class="header-section-number">4.1.7.1.3</span> Manipulación de listas<a href="análisis-de-datos-con-python.html#manipulación-de-listas" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb452"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb452-1"><a href="análisis-de-datos-con-python.html#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Podemos cambiar los elementos de una lista, pro ejemplo cambiemos el útilmo </span></span>
<span id="cb452-2"><a href="análisis-de-datos-con-python.html#cb452-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-3"><a href="análisis-de-datos-con-python.html#cb452-3" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="va">True</span>, <span class="st">&quot;pepa&quot;</span>, [<span class="dv">1</span>,<span class="dv">3</span>], <span class="dv">2</span>]</span>
<span id="cb452-4"><a href="análisis-de-datos-con-python.html#cb452-4" aria-hidden="true" tabindex="-1"></a>lista[<span class="dv">3</span>] <span class="op">=</span> <span class="st">&quot;pepito&quot;</span></span>
<span id="cb452-5"><a href="análisis-de-datos-con-python.html#cb452-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista)</span>
<span id="cb452-6"><a href="análisis-de-datos-con-python.html#cb452-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-7"><a href="análisis-de-datos-con-python.html#cb452-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar elementos </span></span>
<span id="cb452-8"><a href="análisis-de-datos-con-python.html#cb452-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-9"><a href="análisis-de-datos-con-python.html#cb452-9" aria-hidden="true" tabindex="-1"></a>listaconmascosas <span class="op">=</span> lista <span class="op">+</span> [<span class="st">&quot;nico&quot;</span>, <span class="fl">1.7</span>]</span>
<span id="cb452-10"><a href="análisis-de-datos-con-python.html#cb452-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(listaconmascosas)</span>
<span id="cb452-11"><a href="análisis-de-datos-con-python.html#cb452-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-12"><a href="análisis-de-datos-con-python.html#cb452-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que es muy parecido a cuando concatenamos valores en strings.</span></span>
<span id="cb452-13"><a href="análisis-de-datos-con-python.html#cb452-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-14"><a href="análisis-de-datos-con-python.html#cb452-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Remover elementos</span></span>
<span id="cb452-15"><a href="análisis-de-datos-con-python.html#cb452-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-16"><a href="análisis-de-datos-con-python.html#cb452-16" aria-hidden="true" tabindex="-1"></a>l <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">10</span>)) <span class="co"># range: para generar 10 valores (desde el cero)</span></span>
<span id="cb452-17"><a href="análisis-de-datos-con-python.html#cb452-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(l)</span>
<span id="cb452-18"><a href="análisis-de-datos-con-python.html#cb452-18" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> l[<span class="dv">0</span>]</span>
<span id="cb452-19"><a href="análisis-de-datos-con-python.html#cb452-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(l)</span>
<span id="cb452-20"><a href="análisis-de-datos-con-python.html#cb452-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-21"><a href="análisis-de-datos-con-python.html#cb452-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que cuando borramos un elemento de la lista, cambian los índices!</span></span>
<span id="cb452-22"><a href="análisis-de-datos-con-python.html#cb452-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-23"><a href="análisis-de-datos-con-python.html#cb452-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar listas </span></span>
<span id="cb452-24"><a href="análisis-de-datos-con-python.html#cb452-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-25"><a href="análisis-de-datos-con-python.html#cb452-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos listas</span></span>
<span id="cb452-26"><a href="análisis-de-datos-con-python.html#cb452-26" aria-hidden="true" tabindex="-1"></a>listaA <span class="op">=</span> [<span class="fl">11.25</span>, <span class="fl">18.0</span>, <span class="fl">20.0</span>]</span>
<span id="cb452-27"><a href="análisis-de-datos-con-python.html#cb452-27" aria-hidden="true" tabindex="-1"></a>listaB <span class="op">=</span> [<span class="fl">10.75</span>, <span class="fl">9.50</span>]</span>
<span id="cb452-28"><a href="análisis-de-datos-con-python.html#cb452-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-29"><a href="análisis-de-datos-con-python.html#cb452-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Paste together first and second: full</span></span>
<span id="cb452-30"><a href="análisis-de-datos-con-python.html#cb452-30" aria-hidden="true" tabindex="-1"></a>juntas <span class="op">=</span> listaA <span class="op">+</span> listaB</span>
<span id="cb452-31"><a href="análisis-de-datos-con-python.html#cb452-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-32"><a href="análisis-de-datos-con-python.html#cb452-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort full in descending order: full_sorted</span></span>
<span id="cb452-33"><a href="análisis-de-datos-con-python.html#cb452-33" aria-hidden="true" tabindex="-1"></a>ordenarjuntas <span class="op">=</span> <span class="bu">sorted</span>(juntas, reverse <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb452-34"><a href="análisis-de-datos-con-python.html#cb452-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-35"><a href="análisis-de-datos-con-python.html#cb452-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out full_sorted</span></span>
<span id="cb452-36"><a href="análisis-de-datos-con-python.html#cb452-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ordenarjuntas)</span>
<span id="cb452-37"><a href="análisis-de-datos-con-python.html#cb452-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-38"><a href="análisis-de-datos-con-python.html#cb452-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Es importante tener cuidado al manipular listas y/o generamos nuevas </span></span>
<span id="cb452-39"><a href="análisis-de-datos-con-python.html#cb452-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-40"><a href="análisis-de-datos-con-python.html#cb452-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 1: cambia original</span></span>
<span id="cb452-41"><a href="análisis-de-datos-con-python.html#cb452-41" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span> , <span class="st">&quot;c&quot;</span>]</span>
<span id="cb452-42"><a href="análisis-de-datos-con-python.html#cb452-42" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> x <span class="co"># Guardamos la lista x en una lista nueva</span></span>
<span id="cb452-43"><a href="análisis-de-datos-con-python.html#cb452-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-44"><a href="análisis-de-datos-con-python.html#cb452-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a cambiar la lista y </span></span>
<span id="cb452-45"><a href="análisis-de-datos-con-python.html#cb452-45" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&quot;z&quot;</span></span>
<span id="cb452-46"><a href="análisis-de-datos-con-python.html#cb452-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-47"><a href="análisis-de-datos-con-python.html#cb452-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Miremos las listas</span></span>
<span id="cb452-48"><a href="análisis-de-datos-con-python.html#cb452-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x) </span>
<span id="cb452-49"><a href="análisis-de-datos-con-python.html#cb452-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y)</span>
<span id="cb452-50"><a href="análisis-de-datos-con-python.html#cb452-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-51"><a href="análisis-de-datos-con-python.html#cb452-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 2: no cambia original </span></span>
<span id="cb452-52"><a href="análisis-de-datos-con-python.html#cb452-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-53"><a href="análisis-de-datos-con-python.html#cb452-53" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb452-54"><a href="análisis-de-datos-con-python.html#cb452-54" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> x</span>
<span id="cb452-55"><a href="análisis-de-datos-con-python.html#cb452-55" aria-hidden="true" tabindex="-1"></a>x <span class="op">+=</span> <span class="dv">5</span>  <span class="co"># Agrego 5 al valor de 5, pero no modifico x! </span></span>
<span id="cb452-56"><a href="análisis-de-datos-con-python.html#cb452-56" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x =&quot;</span>, x)</span>
<span id="cb452-57"><a href="análisis-de-datos-con-python.html#cb452-57" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;y =&quot;</span>, y)</span>
<span id="cb452-58"><a href="análisis-de-datos-con-python.html#cb452-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-59"><a href="análisis-de-datos-con-python.html#cb452-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-60"><a href="análisis-de-datos-con-python.html#cb452-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Cuando llamamos a x += 5, no estamos modificando el valor del objeto 10 apuntado por x; </span></span>
<span id="cb452-61"><a href="análisis-de-datos-con-python.html#cb452-61" aria-hidden="true" tabindex="-1"></a><span class="co"># más bien estamos cambiando la variable x para que apunte a un nuevo objeto entero con valor 15. </span></span>
<span id="cb452-62"><a href="análisis-de-datos-con-python.html#cb452-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Por esta razón, el valor de y no se ve afectado por la operación.</span></span>
<span id="cb452-63"><a href="análisis-de-datos-con-python.html#cb452-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-64"><a href="análisis-de-datos-con-python.html#cb452-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Para evitar este problema es necesario crear listas de otra forma</span></span>
<span id="cb452-65"><a href="análisis-de-datos-con-python.html#cb452-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-66"><a href="análisis-de-datos-con-python.html#cb452-66" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]</span>
<span id="cb452-67"><a href="análisis-de-datos-con-python.html#cb452-67" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="bu">list</span>(x) <span class="co"># list() sirve para hacer una lista en base a otra</span></span>
<span id="cb452-68"><a href="análisis-de-datos-con-python.html#cb452-68" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> x[:]    <span class="co"># Subcionjunto considerando todos los elementos</span></span>
<span id="cb452-69"><a href="análisis-de-datos-con-python.html#cb452-69" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&quot;z&quot;</span></span>
<span id="cb452-70"><a href="análisis-de-datos-con-python.html#cb452-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-71"><a href="análisis-de-datos-con-python.html#cb452-71" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb452-72"><a href="análisis-de-datos-con-python.html#cb452-72" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y)</span>
<span id="cb452-73"><a href="análisis-de-datos-con-python.html#cb452-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-74"><a href="análisis-de-datos-con-python.html#cb452-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que ahora cambio la lista x, pero no la lista y.</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.1.2:</b></p>
<ol style="list-style-type: decimal">
<li>Genere una lista llamada cada con la siguiente información:</li>
</ol>
<table>
<thead>
<tr class="header">
<th>Zona</th>
<th>Tamaño (m2)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>comedor</td>
<td>11.25</td>
</tr>
<tr class="even">
<td>cocina</td>
<td>18.0</td>
</tr>
<tr class="odd">
<td>living</td>
<td>20.0</td>
</tr>
<tr class="even">
<td>pieza principal</td>
<td>10.75</td>
</tr>
<tr class="odd">
<td>baño</td>
<td>9.50</td>
</tr>
</tbody>
</table>
<ol start="2" style="list-style-type: decimal">
<li>Seleccione la siguiente información desde la lista casa:</li>
</ol>
<ul>
<li>Primeros 6 elementos</li>
<li>Últimos 4 elementos</li>
<li>Cocina y living junto a sus medidas</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Confeccione una lista llamada <code>casa_dos_pisos</code> que contenga dos listas: piso 1 y piso 2. En el piso 1 deje cocina, living y comedor mientras que en el segundo piso deje pieza principal y baño.</li>
</ol>
</div>
</div>
</div>
<div id="tuplas" class="section level4 hasAnchor" number="4.1.7.2">
<h4><span class="header-section-number">4.1.7.2</span> Tuplas<a href="análisis-de-datos-con-python.html#tuplas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Las tuplas son en muchos aspectos similares a las listas, pero se definen con paréntesis en lugar de corchetes. Tambíen pueden ser generadas sin los parentesis.</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb453-1"><a href="análisis-de-datos-con-python.html#cb453-1" aria-hidden="true" tabindex="-1"></a>tupla <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb453-2"><a href="análisis-de-datos-con-python.html#cb453-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tupla)</span>
<span id="cb453-3"><a href="análisis-de-datos-con-python.html#cb453-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-4"><a href="análisis-de-datos-con-python.html#cb453-4" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(tupla)</span>
<span id="cb453-5"><a href="análisis-de-datos-con-python.html#cb453-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-6"><a href="análisis-de-datos-con-python.html#cb453-6" aria-hidden="true" tabindex="-1"></a>tupla <span class="op">=</span> <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span></span>
<span id="cb453-7"><a href="análisis-de-datos-con-python.html#cb453-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tupla)</span>
<span id="cb453-8"><a href="análisis-de-datos-con-python.html#cb453-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-9"><a href="análisis-de-datos-con-python.html#cb453-9" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(tupla) <span class="co"># tamaño</span></span>
<span id="cb453-10"><a href="análisis-de-datos-con-python.html#cb453-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-11"><a href="análisis-de-datos-con-python.html#cb453-11" aria-hidden="true" tabindex="-1"></a>tupla[<span class="dv">0</span>]  <span class="co"># Posicion</span></span></code></pre></div>
<p><strong>¿Qué diferencia entonces a las tuplas de las listas?</strong></p>
<p>La principal característica de las tuplas es que son inmutables: esto significa que, una vez creadas, su tamaño y contenido <strong>no pueden modificarse</strong>.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb454-1"><a href="análisis-de-datos-con-python.html#cb454-1" aria-hidden="true" tabindex="-1"></a>tupla[<span class="dv">1</span>] <span class="op">=</span> <span class="dv">4</span></span></code></pre></div>
<ul>
<li>De este modo, las listas son <em>mutables</em> mientras que las tuplas son <em>inmutables</em>.</li>
</ul>
</div>
<div id="diccionarios" class="section level4 hasAnchor" number="4.1.7.3">
<h4><span class="header-section-number">4.1.7.3</span> Diccionarios<a href="análisis-de-datos-con-python.html#diccionarios" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Los diccionarios son mapeos extremadamente flexibles de claves a valores, y forman la base de gran parte de la implementación interna de Python. Pueden crearse mediante una lista separada por comas de pares clave:valor entre llaves.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb455-1"><a href="análisis-de-datos-con-python.html#cb455-1" aria-hidden="true" tabindex="-1"></a>numeros <span class="op">=</span> {<span class="st">&quot;uno&quot;</span>:<span class="dv">1</span>, <span class="st">&quot;dos&quot;</span>:<span class="dv">2</span>, <span class="st">&quot;tres&quot;</span>:<span class="dv">3</span>, <span class="st">&quot;cuatro&quot;</span>: <span class="dv">4</span>}</span>
<span id="cb455-2"><a href="análisis-de-datos-con-python.html#cb455-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(numeros)</span>
<span id="cb455-3"><a href="análisis-de-datos-con-python.html#cb455-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-4"><a href="análisis-de-datos-con-python.html#cb455-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Para accesder debo llamar al nombre, de allí que sean como un diccionario. Son &quot;similares&quot; a las listas en R. </span></span>
<span id="cb455-5"><a href="análisis-de-datos-con-python.html#cb455-5" aria-hidden="true" tabindex="-1"></a>numeros[<span class="st">&quot;dos&quot;</span>]</span>
<span id="cb455-6"><a href="análisis-de-datos-con-python.html#cb455-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-7"><a href="análisis-de-datos-con-python.html#cb455-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar nuevos elementos al diccionario</span></span>
<span id="cb455-8"><a href="análisis-de-datos-con-python.html#cb455-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-9"><a href="análisis-de-datos-con-python.html#cb455-9" aria-hidden="true" tabindex="-1"></a>numeros[<span class="st">&#39;cero&#39;</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb455-10"><a href="análisis-de-datos-con-python.html#cb455-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(numeros)</span>
<span id="cb455-11"><a href="análisis-de-datos-con-python.html#cb455-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-12"><a href="análisis-de-datos-con-python.html#cb455-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que no hay necesarimente un sendito del orden en los diccionarios. El cero esta al final por ejemplo.</span></span></code></pre></div>
</div>
<div id="conjuntos-sets" class="section level4 hasAnchor" number="4.1.7.4">
<h4><span class="header-section-number">4.1.7.4</span> Conjuntos (sets)<a href="análisis-de-datos-con-python.html#conjuntos-sets" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Se definen de forma similar a las listas y las tuplas, salvo que utilizan las llaves de los diccionarios.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb456-1"><a href="análisis-de-datos-con-python.html#cb456-1" aria-hidden="true" tabindex="-1"></a>primos <span class="op">=</span> {<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>}</span>
<span id="cb456-2"><a href="análisis-de-datos-con-python.html#cb456-2" aria-hidden="true" tabindex="-1"></a>impares <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>}</span>
<span id="cb456-3"><a href="análisis-de-datos-con-python.html#cb456-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-4"><a href="análisis-de-datos-con-python.html#cb456-4" aria-hidden="true" tabindex="-1"></a><span class="co"># unión</span></span>
<span id="cb456-5"><a href="análisis-de-datos-con-python.html#cb456-5" aria-hidden="true" tabindex="-1"></a>primos <span class="op">|</span> impares      <span class="co"># with an operator</span></span>
<span id="cb456-6"><a href="análisis-de-datos-con-python.html#cb456-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-7"><a href="análisis-de-datos-con-python.html#cb456-7" aria-hidden="true" tabindex="-1"></a><span class="co"># intersección</span></span>
<span id="cb456-8"><a href="análisis-de-datos-con-python.html#cb456-8" aria-hidden="true" tabindex="-1"></a>primos <span class="op">&amp;</span> impares</span>
<span id="cb456-9"><a href="análisis-de-datos-con-python.html#cb456-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-10"><a href="análisis-de-datos-con-python.html#cb456-10" aria-hidden="true" tabindex="-1"></a><span class="co"># diferencia: que estan en el primer grupo, pero no en el segundo </span></span>
<span id="cb456-11"><a href="análisis-de-datos-con-python.html#cb456-11" aria-hidden="true" tabindex="-1"></a>primos <span class="op">-</span> impares</span>
<span id="cb456-12"><a href="análisis-de-datos-con-python.html#cb456-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-13"><a href="análisis-de-datos-con-python.html#cb456-13" aria-hidden="true" tabindex="-1"></a><span class="co"># diferencia simetrica: solo aparecen en un conjunto (cualquiera de los dos)</span></span>
<span id="cb456-14"><a href="análisis-de-datos-con-python.html#cb456-14" aria-hidden="true" tabindex="-1"></a>primos <span class="op">^</span> impares</span></code></pre></div>
</div>
</div>
<div id="funciones-2" class="section level3 hasAnchor" number="4.1.8">
<h3><span class="header-section-number">4.1.8</span> Funciones<a href="análisis-de-datos-con-python.html#funciones-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Una función es básicamente un conjunto de tareas que podemos reutilizar a lo largo de un código. Es una buena practica de programación, permite evitar repetición.</p></li>
<li><p>Ya hemos visto varias: print(), type(), str(), int(), bool(), float().</p></li>
<li><p>En todos los programas existen funciones predeterminadas (<strong><em>Buil-in function</em></strong>). Veamos algunmos ejemplos y tambíen veamos como buscar ayuda.</p></li>
</ol>
<div class="sourceCode" id="cb457"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb457-1"><a href="análisis-de-datos-con-python.html#cb457-1" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="fl">1.5</span>, <span class="fl">1.3</span>, <span class="fl">1.2</span>]</span>
<span id="cb457-2"><a href="análisis-de-datos-con-python.html#cb457-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-3"><a href="análisis-de-datos-con-python.html#cb457-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Algunas funciones para explorar datos</span></span>
<span id="cb457-4"><a href="análisis-de-datos-con-python.html#cb457-4" aria-hidden="true" tabindex="-1"></a>minimo <span class="op">=</span> <span class="bu">min</span>(lista)</span>
<span id="cb457-5"><a href="análisis-de-datos-con-python.html#cb457-5" aria-hidden="true" tabindex="-1"></a>maximo <span class="op">=</span> <span class="bu">max</span>(lista)</span>
<span id="cb457-6"><a href="análisis-de-datos-con-python.html#cb457-6" aria-hidden="true" tabindex="-1"></a>suma <span class="op">=</span> <span class="bu">sum</span>(lista)</span>
<span id="cb457-7"><a href="análisis-de-datos-con-python.html#cb457-7" aria-hidden="true" tabindex="-1"></a>potencia <span class="op">=</span> <span class="bu">pow</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb457-8"><a href="análisis-de-datos-con-python.html#cb457-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(minimo, maximo, suma, potencia)</span>
<span id="cb457-9"><a href="análisis-de-datos-con-python.html#cb457-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-10"><a href="análisis-de-datos-con-python.html#cb457-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Redondear escalares  </span></span>
<span id="cb457-11"><a href="análisis-de-datos-con-python.html#cb457-11" aria-hidden="true" tabindex="-1"></a>escalar <span class="op">=</span> <span class="fl">5.3233232</span></span>
<span id="cb457-12"><a href="análisis-de-datos-con-python.html#cb457-12" aria-hidden="true" tabindex="-1"></a>redondear <span class="op">=</span> <span class="bu">round</span>(escalar,<span class="dv">2</span>)</span>
<span id="cb457-13"><a href="análisis-de-datos-con-python.html#cb457-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-14"><a href="análisis-de-datos-con-python.html#cb457-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Otras para ordenar listas  y medirlas</span></span>
<span id="cb457-15"><a href="análisis-de-datos-con-python.html#cb457-15" aria-hidden="true" tabindex="-1"></a>tamaño <span class="op">=</span> <span class="bu">len</span>(lista)</span>
<span id="cb457-16"><a href="análisis-de-datos-con-python.html#cb457-16" aria-hidden="true" tabindex="-1"></a>ordenar <span class="op">=</span> <span class="bu">sorted</span>(lista)  <span class="co"># Por defecto ascendente</span></span>
<span id="cb457-17"><a href="análisis-de-datos-con-python.html#cb457-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-18"><a href="análisis-de-datos-con-python.html#cb457-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tamaño)</span>
<span id="cb457-19"><a href="análisis-de-datos-con-python.html#cb457-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ordenar)</span>
<span id="cb457-20"><a href="análisis-de-datos-con-python.html#cb457-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-21"><a href="análisis-de-datos-con-python.html#cb457-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Ayuda! : la más importante de todas</span></span>
<span id="cb457-22"><a href="análisis-de-datos-con-python.html#cb457-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-23"><a href="análisis-de-datos-con-python.html#cb457-23" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(<span class="bu">len</span>)</span>
<span id="cb457-24"><a href="análisis-de-datos-con-python.html#cb457-24" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>?</span>
<span id="cb457-25"><a href="análisis-de-datos-con-python.html#cb457-25" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>??</span></code></pre></div>
</div>
<div id="methods" class="section level3 hasAnchor" number="4.1.9">
<h3><span class="header-section-number">4.1.9</span> Methods<a href="análisis-de-datos-con-python.html#methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Un <em>method</em> es una función que pertenece a un cierto objeto. Vamos a ver varios ejemplos para listas y strings.</li>
</ol>
<div id="methods-para-listas" class="section level4 hasAnchor" number="4.1.9.1">
<h4><span class="header-section-number">4.1.9.1</span> Methods para listas<a href="análisis-de-datos-con-python.html#methods-para-listas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb458"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb458-1"><a href="análisis-de-datos-con-python.html#cb458-1" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="st">&quot;pepa&quot;</span>, <span class="fl">1.45</span>, <span class="st">&quot;pepe&quot;</span>, <span class="fl">1.32</span>, <span class="st">&quot;ema&quot;</span>, <span class="fl">1.45</span>]</span>
<span id="cb458-2"><a href="análisis-de-datos-con-python.html#cb458-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-3"><a href="análisis-de-datos-con-python.html#cb458-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Indicador de un valor determinado</span></span>
<span id="cb458-4"><a href="análisis-de-datos-con-python.html#cb458-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista.index(<span class="st">&quot;ema&quot;</span>))</span>
<span id="cb458-5"><a href="análisis-de-datos-con-python.html#cb458-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-6"><a href="análisis-de-datos-con-python.html#cb458-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Contemos valores</span></span>
<span id="cb458-7"><a href="análisis-de-datos-con-python.html#cb458-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista.count(<span class="fl">1.45</span>))</span>
<span id="cb458-8"><a href="análisis-de-datos-con-python.html#cb458-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-9"><a href="análisis-de-datos-con-python.html#cb458-9" aria-hidden="true" tabindex="-1"></a>areas <span class="op">=</span> [<span class="fl">11.25</span>, <span class="fl">18.0</span>, <span class="fl">20.0</span>, <span class="fl">10.75</span>, <span class="fl">9.50</span>]</span>
<span id="cb458-10"><a href="análisis-de-datos-con-python.html#cb458-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-11"><a href="análisis-de-datos-con-python.html#cb458-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Agregar elementos </span></span>
<span id="cb458-12"><a href="análisis-de-datos-con-python.html#cb458-12" aria-hidden="true" tabindex="-1"></a>areas.append(<span class="fl">24.5</span>)</span>
<span id="cb458-13"><a href="análisis-de-datos-con-python.html#cb458-13" aria-hidden="true" tabindex="-1"></a>areas.append(<span class="fl">15.45</span>)</span>
<span id="cb458-14"><a href="análisis-de-datos-con-python.html#cb458-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(areas)</span>
<span id="cb458-15"><a href="análisis-de-datos-con-python.html#cb458-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-16"><a href="análisis-de-datos-con-python.html#cb458-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Revertir order</span></span>
<span id="cb458-17"><a href="análisis-de-datos-con-python.html#cb458-17" aria-hidden="true" tabindex="-1"></a>areas.reverse</span>
<span id="cb458-18"><a href="análisis-de-datos-con-python.html#cb458-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(areas)</span></code></pre></div>
</div>
<div id="methods-para-strings" class="section level4 hasAnchor" number="4.1.9.2">
<h4><span class="header-section-number">4.1.9.2</span> Methods para strings<a href="análisis-de-datos-con-python.html#methods-para-strings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb459"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb459-1"><a href="análisis-de-datos-con-python.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --------#</span></span>
<span id="cb459-2"><a href="análisis-de-datos-con-python.html#cb459-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Strings  </span></span>
<span id="cb459-3"><a href="análisis-de-datos-con-python.html#cb459-3" aria-hidden="true" tabindex="-1"></a><span class="co"># --------#</span></span>
<span id="cb459-4"><a href="análisis-de-datos-con-python.html#cb459-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-5"><a href="análisis-de-datos-con-python.html#cb459-5" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span> <span class="st">&quot;pepa&quot;</span></span>
<span id="cb459-6"><a href="análisis-de-datos-con-python.html#cb459-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-7"><a href="análisis-de-datos-con-python.html#cb459-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Mayusculas la primera letra</span></span>
<span id="cb459-8"><a href="análisis-de-datos-con-python.html#cb459-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-9"><a href="análisis-de-datos-con-python.html#cb459-9" aria-hidden="true" tabindex="-1"></a>string.capitalize()</span>
<span id="cb459-10"><a href="análisis-de-datos-con-python.html#cb459-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-11"><a href="análisis-de-datos-con-python.html#cb459-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Remplazamos alguna letra</span></span>
<span id="cb459-12"><a href="análisis-de-datos-con-python.html#cb459-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-13"><a href="análisis-de-datos-con-python.html#cb459-13" aria-hidden="true" tabindex="-1"></a>string.replace(<span class="st">&quot;e&quot;</span>, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb459-14"><a href="análisis-de-datos-con-python.html#cb459-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-15"><a href="análisis-de-datos-con-python.html#cb459-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Todas mayusculas </span></span>
<span id="cb459-16"><a href="análisis-de-datos-con-python.html#cb459-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-17"><a href="análisis-de-datos-con-python.html#cb459-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(string.upper())</span>
<span id="cb459-18"><a href="análisis-de-datos-con-python.html#cb459-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-19"><a href="análisis-de-datos-con-python.html#cb459-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Contar letras</span></span>
<span id="cb459-20"><a href="análisis-de-datos-con-python.html#cb459-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-21"><a href="análisis-de-datos-con-python.html#cb459-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(string.count(<span class="st">&quot;a&quot;</span>))b</span>
<span id="cb459-22"><a href="análisis-de-datos-con-python.html#cb459-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-23"><a href="análisis-de-datos-con-python.html#cb459-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Para buscar ayuda en metodos</span></span>
<span id="cb459-24"><a href="análisis-de-datos-con-python.html#cb459-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-25"><a href="análisis-de-datos-con-python.html#cb459-25" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb459-26"><a href="análisis-de-datos-con-python.html#cb459-26" aria-hidden="true" tabindex="-1"></a>L.insert?</span>
<span id="cb459-27"><a href="análisis-de-datos-con-python.html#cb459-27" aria-hidden="true" tabindex="-1"></a>L?</span>
<span id="cb459-28"><a href="análisis-de-datos-con-python.html#cb459-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-29"><a href="análisis-de-datos-con-python.html#cb459-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Tab Completation </span></span>
<span id="cb459-30"><a href="análisis-de-datos-con-python.html#cb459-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-31"><a href="análisis-de-datos-con-python.html#cb459-31" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Cómo se los métodos disponibles? Nombre objeto + &quot;.&quot; + &quot;tab&quot;. Si pongo una letra al inicio puedo </span></span>
<span id="cb459-32"><a href="análisis-de-datos-con-python.html#cb459-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ver cuales estan disponibles. </span></span>
<span id="cb459-33"><a href="análisis-de-datos-con-python.html#cb459-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-34"><a href="análisis-de-datos-con-python.html#cb459-34" aria-hidden="true" tabindex="-1"></a><span class="co">#L.</span></span>
<span id="cb459-35"><a href="análisis-de-datos-con-python.html#cb459-35" aria-hidden="true" tabindex="-1"></a><span class="co">#L.c</span></span>
<span id="cb459-36"><a href="análisis-de-datos-con-python.html#cb459-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-37"><a href="análisis-de-datos-con-python.html#cb459-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien es util para importar funciones desde paquetes. </span></span>
<span id="cb459-38"><a href="análisis-de-datos-con-python.html#cb459-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-39"><a href="análisis-de-datos-con-python.html#cb459-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Más allá del Tab, puedo utilizar * para hacer busquedas más especiales!</span></span>
<span id="cb459-40"><a href="análisis-de-datos-con-python.html#cb459-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-41"><a href="análisis-de-datos-con-python.html#cb459-41" aria-hidden="true" tabindex="-1"></a><span class="bu">str</span>.<span class="op">*</span>find?</span></code></pre></div>
<p><strong>En resumen…</strong></p>
<ol style="list-style-type: decimal">
<li>En <mark>Python</mark> todo es un objeto. Dependen del tipo de objeto.</li>
<li>Cada objeto tiene <mark> métodos </mark> especificos asociados.</li>
<li>Hay algunos metodos comunes en todos los objetos (ej. index), pero otros no (ej. replace).</li>
</ol>
<div class="sourceCode" id="cb460"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb460-1"><a href="análisis-de-datos-con-python.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Algunos metodos pueden cambiar los objetos. Veamos un ejemplo. </span></span>
<span id="cb460-2"><a href="análisis-de-datos-con-python.html#cb460-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-3"><a href="análisis-de-datos-con-python.html#cb460-3" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="st">&quot;pepa&quot;</span>, <span class="fl">1.45</span>, <span class="st">&quot;pepe&quot;</span>, <span class="fl">1.32</span>, <span class="st">&quot;ema&quot;</span>, <span class="fl">1.45</span>]</span>
<span id="cb460-4"><a href="análisis-de-datos-con-python.html#cb460-4" aria-hidden="true" tabindex="-1"></a>lista.append(<span class="st">&quot;nicolas&quot;</span>)</span>
<span id="cb460-5"><a href="análisis-de-datos-con-python.html#cb460-5" aria-hidden="true" tabindex="-1"></a>lista</span>
<span id="cb460-6"><a href="análisis-de-datos-con-python.html#cb460-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-7"><a href="análisis-de-datos-con-python.html#cb460-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Otros &quot;methods&quot; para números reales </span></span>
<span id="cb460-8"><a href="análisis-de-datos-con-python.html#cb460-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-9"><a href="análisis-de-datos-con-python.html#cb460-9" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">4.5</span></span>
<span id="cb460-10"><a href="análisis-de-datos-con-python.html#cb460-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x.real, <span class="st">&quot;+&quot;</span>, x.imag, <span class="st">&#39;i&#39;</span>)</span>
<span id="cb460-11"><a href="análisis-de-datos-con-python.html#cb460-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-12"><a href="análisis-de-datos-con-python.html#cb460-12" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">4.5</span></span>
<span id="cb460-13"><a href="análisis-de-datos-con-python.html#cb460-13" aria-hidden="true" tabindex="-1"></a>x.is_integer()</span>
<span id="cb460-14"><a href="análisis-de-datos-con-python.html#cb460-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-15"><a href="análisis-de-datos-con-python.html#cb460-15" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fl">4.0</span></span>
<span id="cb460-16"><a href="análisis-de-datos-con-python.html#cb460-16" aria-hidden="true" tabindex="-1"></a>x.is_integer()</span>
<span id="cb460-17"><a href="análisis-de-datos-con-python.html#cb460-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-18"><a href="análisis-de-datos-con-python.html#cb460-18" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(x.is_integer)</span></code></pre></div>
</div>
</div>
<div id="paquetes" class="section level3 hasAnchor" number="4.1.10">
<h3><span class="header-section-number">4.1.10</span> Paquetes<a href="análisis-de-datos-con-python.html#paquetes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Como cualquier lenguaje de programación existen paquetes. Los paquetes son conjuntos de funciones que cumplen un objetivo común. En las clases siguientes veremos en detalles varios de ellos.</p></li>
<li><p>Estos paquetes tienen funciones y metodos especificos.</p></li>
<li><p>No todos los paquetes estan disponibles en Python. Hay que instalarlos.</p></li>
<li><p>Es posible colocar el nombre que uno quiera a los paquetes. Por ejemplo</p></li>
</ol>
<div class="sourceCode" id="cb461"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb461-1"><a href="análisis-de-datos-con-python.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb461-2"><a href="análisis-de-datos-con-python.html#cb461-2" aria-hidden="true" tabindex="-1"></a>np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb461-3"><a href="análisis-de-datos-con-python.html#cb461-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-4"><a href="análisis-de-datos-con-python.html#cb461-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambíen es posible importar solo una función de un paquete. </span></span>
<span id="cb461-5"><a href="análisis-de-datos-con-python.html#cb461-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> array</span>
<span id="cb461-6"><a href="análisis-de-datos-con-python.html#cb461-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-7"><a href="análisis-de-datos-con-python.html#cb461-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Hay ocasiones en las que hay paquetes y subpaquetes</span></span>
<span id="cb461-8"><a href="análisis-de-datos-con-python.html#cb461-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-9"><a href="análisis-de-datos-con-python.html#cb461-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> inv <span class="im">as</span> my_inv</span>
<span id="cb461-10"><a href="análisis-de-datos-con-python.html#cb461-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-11"><a href="análisis-de-datos-con-python.html#cb461-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Es mejor la primer opción. Queda claro cual paquete estamos utilizando.</span></span>
<span id="cb461-12"><a href="análisis-de-datos-con-python.html#cb461-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-13"><a href="análisis-de-datos-con-python.html#cb461-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo: calcular area de una circunferencia </span></span>
<span id="cb461-14"><a href="análisis-de-datos-con-python.html#cb461-14" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fl">0.43</span></span>
<span id="cb461-15"><a href="análisis-de-datos-con-python.html#cb461-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-16"><a href="análisis-de-datos-con-python.html#cb461-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos paquete math</span></span>
<span id="cb461-17"><a href="análisis-de-datos-con-python.html#cb461-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math <span class="im">as</span> mt</span>
<span id="cb461-18"><a href="análisis-de-datos-con-python.html#cb461-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-19"><a href="análisis-de-datos-con-python.html#cb461-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcula C</span></span>
<span id="cb461-20"><a href="análisis-de-datos-con-python.html#cb461-20" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> mt.pi <span class="op">*</span> r</span>
<span id="cb461-21"><a href="análisis-de-datos-con-python.html#cb461-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-22"><a href="análisis-de-datos-con-python.html#cb461-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcula A</span></span>
<span id="cb461-23"><a href="análisis-de-datos-con-python.html#cb461-23" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> mt.pi <span class="op">*</span> r <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb461-24"><a href="análisis-de-datos-con-python.html#cb461-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-25"><a href="análisis-de-datos-con-python.html#cb461-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Build printout</span></span>
<span id="cb461-26"><a href="análisis-de-datos-con-python.html#cb461-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Circumferencia: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(C))</span>
<span id="cb461-27"><a href="análisis-de-datos-con-python.html#cb461-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Area: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(A))</span></code></pre></div>
<div id="algunos-paquete-fundamentales-para-el-análisis-de-datos" class="section level4 hasAnchor" number="4.1.10.1">
<h4><span class="header-section-number">4.1.10.1</span> Algunos paquete fundamentales para el análisis de datos<a href="análisis-de-datos-con-python.html#algunos-paquete-fundamentales-para-el-análisis-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p><code>NumPy</code> proporciona un almacenamiento y cálculo eficientes para matrices de datos multidimensionales.</p></li>
<li><p><code>Pandas</code> proporciona un objeto DataFrame junto con un potente conjunto de métodos para manipular, filtrar, agrupar y transformar datos.</p></li>
<li><p><code>Matplotlib</code> proporciona una interfaz útil para la creación de gráficos y figuras con calidad de publicación.</p></li>
</ol>
</div>
</div>
</div>
<div id="librerias-principales-de-python---numpy-matplotlib-pandas" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Librerías principales de Python - Numpy, Matplotlib, Pandas<a href="análisis-de-datos-con-python.html#librerias-principales-de-python---numpy-matplotlib-pandas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>En esta sección revisaremos todo el instrumental básico de Python: operadores, estructuras de datos, funciones y metodos.</li>
<li>Revisaremos una de las principales librerías que se utilizan para el análisis de datos: numpy. Veremos algunos ejemplos muy básicos de matplotlib tambíen.</li>
<li>Con estos elementos, ya pueden sentirse libres para trabajar en Python.</li>
</ul>
<div id="numpy" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> NumPy<a href="análisis-de-datos-con-python.html#numpy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Los conjuntos de datos pueden ser de muchos tipos como colecciones de documentos, colecciones de imágenes,
colecciones de clips de sonido, colecciones de medidas numéricas o casi cualquier cosa.<br />
</li>
<li>NumPy nos ayudará a manejar datos pensados como arreglos númericos.</li>
<li>NumPy significa <em>numerical python</em>.</li>
<li>Es una alternativa a las listas y sirve para manipular arreglos.</li>
<li>Las principales librerías de Python estan basadas en numpy: Pandas, SciPy, Matplotlib</li>
</ul>
<div id="sintaxis-básica-y-detalles" class="section level4 hasAnchor" number="4.2.1.1">
<h4><span class="header-section-number">4.2.1.1</span> Sintaxis básica y detalles<a href="análisis-de-datos-con-python.html#sintaxis-básica-y-detalles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb462"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb462-1"><a href="análisis-de-datos-con-python.html#cb462-1" aria-hidden="true" tabindex="-1"></a>ingreso <span class="op">=</span> [<span class="dv">890</span>, <span class="dv">1023</span>, <span class="dv">2500</span>, <span class="dv">3223</span>, <span class="dv">23434</span>]</span>
<span id="cb462-2"><a href="análisis-de-datos-con-python.html#cb462-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-3"><a href="análisis-de-datos-con-python.html#cb462-3" aria-hidden="true" tabindex="-1"></a>n_hogar <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">9</span>]</span>
<span id="cb462-4"><a href="análisis-de-datos-con-python.html#cb462-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb462-5"><a href="análisis-de-datos-con-python.html#cb462-5" aria-hidden="true" tabindex="-1"></a>ingreso_por_persona <span class="op">=</span> ingreso <span class="op">/</span> n_hogar</span>
<span id="cb462-6"><a href="análisis-de-datos-con-python.html#cb462-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Tenemos un error!</span></span></code></pre></div>
<ul>
<li>Para ver más detalles de la libreria es bueno recordar:
<ul>
<li>Puedo ver el contenido de np aprentando <code>&lt;tab&gt;</code>despues de apretar <code>np.</code></li>
<li>Puedo revisar la documentación con np?</li>
<li>Más información sobre numerical python: <a href="https://numpy.org/" class="uri">https://numpy.org/</a></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb463"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb463-1"><a href="análisis-de-datos-con-python.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importamos la librería o paquete </span></span>
<span id="cb463-2"><a href="análisis-de-datos-con-python.html#cb463-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np <span class="co"># importamos</span></span>
<span id="cb463-3"><a href="análisis-de-datos-con-python.html#cb463-3" aria-hidden="true" tabindex="-1"></a>np_ingreso <span class="op">=</span> np.array(ingreso) </span>
<span id="cb463-4"><a href="análisis-de-datos-con-python.html#cb463-4" aria-hidden="true" tabindex="-1"></a>np_nhogar <span class="op">=</span> np.array(n_hogar)</span>
<span id="cb463-5"><a href="análisis-de-datos-con-python.html#cb463-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb463-6"><a href="análisis-de-datos-con-python.html#cb463-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, no hay problemas en calcularlo </span></span>
<span id="cb463-7"><a href="análisis-de-datos-con-python.html#cb463-7" aria-hidden="true" tabindex="-1"></a>ingreso_por_persona <span class="op">=</span> np_ingreso <span class="op">/</span> np_nhogar</span>
<span id="cb463-8"><a href="análisis-de-datos-con-python.html#cb463-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ingreso_por_persona)</span>
<span id="cb463-9"><a href="análisis-de-datos-con-python.html#cb463-9" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(ingreso_por_persona)</span></code></pre></div>
<p><strong>En resumen</strong></p>
<ul>
<li>Con listas no se puede operar como nos gustaría, pero con NumPy si.</li>
<li>NumPy asume que la lista contiene los mismos elementos. NumPy es <em>igualador</em>!</li>
<li>Como vimos anteriormente, array es un tipo de objeto. Por lo tanto, sus <em>methods</em> pueden ser distintos.</li>
<li>ndarray: <em>n-dimentional array</em>.</li>
<li>Eje x se denomina axis 0, eje y axis1.</li>
</ul>
<div class="sourceCode" id="cb464"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb464-1"><a href="análisis-de-datos-con-python.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numpy es igualador</span></span>
<span id="cb464-2"><a href="análisis-de-datos-con-python.html#cb464-2" aria-hidden="true" tabindex="-1"></a>np.array([<span class="fl">1.2</span>, <span class="st">&quot;martes&quot;</span>, <span class="va">False</span>])</span>
<span id="cb464-3"><a href="análisis-de-datos-con-python.html#cb464-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-4"><a href="análisis-de-datos-con-python.html#cb464-4" aria-hidden="true" tabindex="-1"></a><span class="co"># logicos + numeros: todo a números. True se convierte en uno / False en cero. </span></span>
<span id="cb464-5"><a href="análisis-de-datos-con-python.html#cb464-5" aria-hidden="true" tabindex="-1"></a><span class="co"># logicos/numerico + string: todo a string</span></span>
<span id="cb464-6"><a href="análisis-de-datos-con-python.html#cb464-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-7"><a href="análisis-de-datos-con-python.html#cb464-7" aria-hidden="true" tabindex="-1"></a><span class="co"># NumPy cambia algunos operadores</span></span>
<span id="cb464-8"><a href="análisis-de-datos-con-python.html#cb464-8" aria-hidden="true" tabindex="-1"></a>lista_numeros <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb464-9"><a href="análisis-de-datos-con-python.html#cb464-9" aria-hidden="true" tabindex="-1"></a>np_numeros <span class="op">=</span> np.array(lista_numeros)</span>
<span id="cb464-10"><a href="análisis-de-datos-con-python.html#cb464-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_numeros)</span>
<span id="cb464-11"><a href="análisis-de-datos-con-python.html#cb464-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-12"><a href="análisis-de-datos-con-python.html#cb464-12" aria-hidden="true" tabindex="-1"></a><span class="co"># En una lista: + concatenar</span></span>
<span id="cb464-13"><a href="análisis-de-datos-con-python.html#cb464-13" aria-hidden="true" tabindex="-1"></a>lista_numeros <span class="op">+</span> lista_numeros</span>
<span id="cb464-14"><a href="análisis-de-datos-con-python.html#cb464-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-15"><a href="análisis-de-datos-con-python.html#cb464-15" aria-hidden="true" tabindex="-1"></a><span class="co"># En un arreglo: + suma </span></span>
<span id="cb464-16"><a href="análisis-de-datos-con-python.html#cb464-16" aria-hidden="true" tabindex="-1"></a>np_numeros <span class="op">+</span> np_numeros</span></code></pre></div>
</div>
<div id="crear-arreglos-con-numpy" class="section level4 hasAnchor" number="4.2.1.2">
<h4><span class="header-section-number">4.2.1.2</span> Crear arreglos con NumPy<a href="análisis-de-datos-con-python.html#crear-arreglos-con-numpy" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb465"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb465-1"><a href="análisis-de-datos-con-python.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos los distintos tipos de arreglos que podemos hacer en numpy</span></span>
<span id="cb465-2"><a href="análisis-de-datos-con-python.html#cb465-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">0</span>)  <span class="co"># Garantizar reproducibilidad</span></span>
<span id="cb465-3"><a href="análisis-de-datos-con-python.html#cb465-3" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">=</span> np.random.randint(<span class="dv">10</span>, size <span class="op">=</span> <span class="dv">6</span>)  <span class="co"># Arreglo de una dimensión (dimension)</span></span>
<span id="cb465-4"><a href="análisis-de-datos-con-python.html#cb465-4" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> np.random.randint(<span class="dv">10</span>, size <span class="op">=</span> (<span class="dv">3</span>, <span class="dv">4</span>))  <span class="co"># Arreglo de dos dimensiones (filas x columnas)</span></span>
<span id="cb465-5"><a href="análisis-de-datos-con-python.html#cb465-5" aria-hidden="true" tabindex="-1"></a>x3 <span class="op">=</span> np.random.randint(<span class="dv">10</span>, size <span class="op">=</span> (<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))  <span class="co"># Arreglo de tres dimensiones (numero matrices, filas x columnas)</span></span>
<span id="cb465-6"><a href="análisis-de-datos-con-python.html#cb465-6" aria-hidden="true" tabindex="-1"></a>x4 <span class="op">=</span> np.random.randint(<span class="dv">10</span>, size <span class="op">=</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)) <span class="co"># Arreglo de cuatro dimensiones (numero de grupos, numero matrices, filas x columnas)</span></span>
<span id="cb465-7"><a href="análisis-de-datos-con-python.html#cb465-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-8"><a href="análisis-de-datos-con-python.html#cb465-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x1)</span>
<span id="cb465-9"><a href="análisis-de-datos-con-python.html#cb465-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-10"><a href="análisis-de-datos-con-python.html#cb465-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2)</span>
<span id="cb465-11"><a href="análisis-de-datos-con-python.html#cb465-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-12"><a href="análisis-de-datos-con-python.html#cb465-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x3)</span>
<span id="cb465-13"><a href="análisis-de-datos-con-python.html#cb465-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-14"><a href="análisis-de-datos-con-python.html#cb465-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x4)</span>
<span id="cb465-15"><a href="análisis-de-datos-con-python.html#cb465-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-16"><a href="análisis-de-datos-con-python.html#cb465-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos más ejemplos </span></span>
<span id="cb465-17"><a href="análisis-de-datos-con-python.html#cb465-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Arreglo de una dimensión </span></span>
<span id="cb465-18"><a href="análisis-de-datos-con-python.html#cb465-18" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb465-19"><a href="análisis-de-datos-con-python.html#cb465-19" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb465-20"><a href="análisis-de-datos-con-python.html#cb465-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb465-21"><a href="análisis-de-datos-con-python.html#cb465-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-22"><a href="análisis-de-datos-con-python.html#cb465-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Arreglo de dos dimensiones </span></span>
<span id="cb465-23"><a href="análisis-de-datos-con-python.html#cb465-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-24"><a href="análisis-de-datos-con-python.html#cb465-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Hago una lista de listas</span></span>
<span id="cb465-25"><a href="análisis-de-datos-con-python.html#cb465-25" aria-hidden="true" tabindex="-1"></a>x_2d <span class="op">=</span>[[<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">5</span>], </span>
<span id="cb465-26"><a href="análisis-de-datos-con-python.html#cb465-26" aria-hidden="true" tabindex="-1"></a>      [<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">1</span>], </span>
<span id="cb465-27"><a href="análisis-de-datos-con-python.html#cb465-27" aria-hidden="true" tabindex="-1"></a>      [<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">6</span>]]</span>
<span id="cb465-28"><a href="análisis-de-datos-con-python.html#cb465-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-29"><a href="análisis-de-datos-con-python.html#cb465-29" aria-hidden="true" tabindex="-1"></a>x_2d_array <span class="op">=</span> np.array(x_2d)</span>
<span id="cb465-30"><a href="análisis-de-datos-con-python.html#cb465-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x_2d_array)</span>
<span id="cb465-31"><a href="análisis-de-datos-con-python.html#cb465-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-32"><a href="análisis-de-datos-con-python.html#cb465-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Arreglo de tres dimensiones </span></span>
<span id="cb465-33"><a href="análisis-de-datos-con-python.html#cb465-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb465-34"><a href="análisis-de-datos-con-python.html#cb465-34" aria-hidden="true" tabindex="-1"></a>x_3d <span class="op">=</span> np.array([x_2d_array,x_2d_array, x_2d_array])</span>
<span id="cb465-35"><a href="análisis-de-datos-con-python.html#cb465-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x_3d)</span></code></pre></div>
<p><strong>Arreglo de 1,2,3 dimensiones</strong></p>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<p><strong>Arreglo de 4 dimensiones</strong></p>
<div class="figure">
<img src="attachment:array_4d.png" alt="" />
<p class="caption">array_4d.png</p>
</div>
<div class="sourceCode" id="cb466"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb466-1"><a href="análisis-de-datos-con-python.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arreglo de cuatro dimensiones </span></span>
<span id="cb466-2"><a href="análisis-de-datos-con-python.html#cb466-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-3"><a href="análisis-de-datos-con-python.html#cb466-3" aria-hidden="true" tabindex="-1"></a>x_4d <span class="op">=</span> np.array([x_3d,x_3d, x_3d, x_3d])</span>
<span id="cb466-4"><a href="análisis-de-datos-con-python.html#cb466-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x_4d)</span></code></pre></div>
</div>
<div id="atributos-de-los-arreglos" class="section level4 hasAnchor" number="4.2.1.3">
<h4><span class="header-section-number">4.2.1.3</span> Atributos de los arreglos<a href="análisis-de-datos-con-python.html#atributos-de-los-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb467"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb467-1"><a href="análisis-de-datos-con-python.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber la dimensión</span></span>
<span id="cb467-2"><a href="análisis-de-datos-con-python.html#cb467-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x3 ndim: &quot;</span>, x3.ndim)</span>
<span id="cb467-3"><a href="análisis-de-datos-con-python.html#cb467-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb467-4"><a href="análisis-de-datos-con-python.html#cb467-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber detalles de la dimensión</span></span>
<span id="cb467-5"><a href="análisis-de-datos-con-python.html#cb467-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x3 shape:&quot;</span>, x3.shape)</span>
<span id="cb467-6"><a href="análisis-de-datos-con-python.html#cb467-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb467-7"><a href="análisis-de-datos-con-python.html#cb467-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Saber el número de elementos del objeto</span></span>
<span id="cb467-8"><a href="análisis-de-datos-con-python.html#cb467-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x3 size: &quot;</span>, x3.size)</span></code></pre></div>
</div>
<div id="subconjuntos-en-un-arreglo" class="section level4 hasAnchor" number="4.2.1.4">
<h4><span class="header-section-number">4.2.1.4</span> Subconjuntos en un arreglo<a href="análisis-de-datos-con-python.html#subconjuntos-en-un-arreglo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="subconjuntos-en-arreglos-unidimensionales" class="section level5 hasAnchor" number="4.2.1.4.1">
<h5><span class="header-section-number">4.2.1.4.1</span> Subconjuntos en arreglos unidimensionales<a href="análisis-de-datos-con-python.html#subconjuntos-en-arreglos-unidimensionales" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb468"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb468-1"><a href="análisis-de-datos-con-python.html#cb468-1" aria-hidden="true" tabindex="-1"></a>np_numeros</span>
<span id="cb468-2"><a href="análisis-de-datos-con-python.html#cb468-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-3"><a href="análisis-de-datos-con-python.html#cb468-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo seleccionar subconjuntos al igual que en una lista: con la posición.</span></span>
<span id="cb468-4"><a href="análisis-de-datos-con-python.html#cb468-4" aria-hidden="true" tabindex="-1"></a>np_numeros[<span class="dv">1</span>]</span>
<span id="cb468-5"><a href="análisis-de-datos-con-python.html#cb468-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-6"><a href="análisis-de-datos-con-python.html#cb468-6" aria-hidden="true" tabindex="-1"></a>np_numeros[<span class="dv">0</span>:<span class="dv">2</span>]</span>
<span id="cb468-7"><a href="análisis-de-datos-con-python.html#cb468-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-8"><a href="análisis-de-datos-con-python.html#cb468-8" aria-hidden="true" tabindex="-1"></a>np_numeros[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb468-9"><a href="análisis-de-datos-con-python.html#cb468-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-10"><a href="análisis-de-datos-con-python.html#cb468-10" aria-hidden="true" tabindex="-1"></a>np_numeros[np_numeros <span class="op">&gt;</span> <span class="dv">2</span>]</span>
<span id="cb468-11"><a href="análisis-de-datos-con-python.html#cb468-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-12"><a href="análisis-de-datos-con-python.html#cb468-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Lo anterior ocurre porque el resultado de un comparador es un valor logico</span></span>
<span id="cb468-13"><a href="análisis-de-datos-con-python.html#cb468-13" aria-hidden="true" tabindex="-1"></a>np_numeros <span class="op">&gt;</span> <span class="dv">2</span></span></code></pre></div>
<div class="alert alert-block alert-success">
<p><b> Recordar :</b> En cualquier subconjunto: parentesis cuadrados y utilizar valores lógicos.</p>
</div>
<div class="sourceCode" id="cb469"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb469-1"><a href="análisis-de-datos-con-python.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos escribirlo más general </span></span>
<span id="cb469-2"><a href="análisis-de-datos-con-python.html#cb469-2" aria-hidden="true" tabindex="-1"></a>condicion <span class="op">=</span> np_numeros <span class="op">&gt;</span> <span class="dv">2</span></span>
<span id="cb469-3"><a href="análisis-de-datos-con-python.html#cb469-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-4"><a href="análisis-de-datos-con-python.html#cb469-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_numeros[condicion])</span>
<span id="cb469-5"><a href="análisis-de-datos-con-python.html#cb469-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que obtenemos el mismo resultado que antes</span></span>
<span id="cb469-6"><a href="análisis-de-datos-con-python.html#cb469-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-7"><a href="análisis-de-datos-con-python.html#cb469-7" aria-hidden="true" tabindex="-1"></a>x1 <span class="op">=</span> np.array([<span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">9</span>])</span>
<span id="cb469-8"><a href="análisis-de-datos-con-python.html#cb469-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x1)</span>
<span id="cb469-9"><a href="análisis-de-datos-con-python.html#cb469-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-10"><a href="análisis-de-datos-con-python.html#cb469-10" aria-hidden="true" tabindex="-1"></a>x1[<span class="dv">0</span>]</span>
<span id="cb469-11"><a href="análisis-de-datos-con-python.html#cb469-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-12"><a href="análisis-de-datos-con-python.html#cb469-12" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">10</span>)</span>
<span id="cb469-13"><a href="análisis-de-datos-con-python.html#cb469-13" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb469-14"><a href="análisis-de-datos-con-python.html#cb469-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-15"><a href="análisis-de-datos-con-python.html#cb469-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeros cinco elementos</span></span>
<span id="cb469-16"><a href="análisis-de-datos-con-python.html#cb469-16" aria-hidden="true" tabindex="-1"></a>x[:<span class="dv">5</span>]</span>
<span id="cb469-17"><a href="análisis-de-datos-con-python.html#cb469-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-18"><a href="análisis-de-datos-con-python.html#cb469-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Elements despúes del indicador cinco</span></span>
<span id="cb469-19"><a href="análisis-de-datos-con-python.html#cb469-19" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">5</span>:]</span>
<span id="cb469-20"><a href="análisis-de-datos-con-python.html#cb469-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-21"><a href="análisis-de-datos-con-python.html#cb469-21" aria-hidden="true" tabindex="-1"></a><span class="co"># todos los elementos en posiciones pares</span></span>
<span id="cb469-22"><a href="análisis-de-datos-con-python.html#cb469-22" aria-hidden="true" tabindex="-1"></a>x[::<span class="dv">2</span>]</span>
<span id="cb469-23"><a href="análisis-de-datos-con-python.html#cb469-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-24"><a href="análisis-de-datos-con-python.html#cb469-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Todos los elementos, en saltos de 2 en 2, pero partiendo desde el 1</span></span>
<span id="cb469-25"><a href="análisis-de-datos-con-python.html#cb469-25" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>::<span class="dv">2</span>]</span>
<span id="cb469-26"><a href="análisis-de-datos-con-python.html#cb469-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb469-27"><a href="análisis-de-datos-con-python.html#cb469-27" aria-hidden="true" tabindex="-1"></a>x[::<span class="op">-</span><span class="dv">1</span>]  <span class="co"># Todos los elementos, pero de atras a adelante</span></span></code></pre></div>
</div>
<div id="subconjuntos-en-arreglos-multidimensionales" class="section level5 hasAnchor" number="4.2.1.4.2">
<h5><span class="header-section-number">4.2.1.4.2</span> Subconjuntos en arreglos multidimensionales<a href="análisis-de-datos-con-python.html#subconjuntos-en-arreglos-multidimensionales" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb470"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb470-1"><a href="análisis-de-datos-con-python.html#cb470-1" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> np.array([[<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>],</span>
<span id="cb470-2"><a href="análisis-de-datos-con-python.html#cb470-2" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">8</span>],</span>
<span id="cb470-3"><a href="análisis-de-datos-con-python.html#cb470-3" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">7</span>]])</span>
<span id="cb470-4"><a href="análisis-de-datos-con-python.html#cb470-4" aria-hidden="true" tabindex="-1"></a>x2</span>
<span id="cb470-5"><a href="análisis-de-datos-con-python.html#cb470-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-6"><a href="análisis-de-datos-con-python.html#cb470-6" aria-hidden="true" tabindex="-1"></a>x2[<span class="dv">0</span>, <span class="dv">0</span>]</span>
<span id="cb470-7"><a href="análisis-de-datos-con-python.html#cb470-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-8"><a href="análisis-de-datos-con-python.html#cb470-8" aria-hidden="true" tabindex="-1"></a>x2[<span class="dv">2</span>, <span class="dv">0</span>]</span>
<span id="cb470-9"><a href="análisis-de-datos-con-python.html#cb470-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-10"><a href="análisis-de-datos-con-python.html#cb470-10" aria-hidden="true" tabindex="-1"></a>x2[<span class="dv">2</span>, <span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb470-11"><a href="análisis-de-datos-con-python.html#cb470-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-12"><a href="análisis-de-datos-con-python.html#cb470-12" aria-hidden="true" tabindex="-1"></a>x2</span>
<span id="cb470-13"><a href="análisis-de-datos-con-python.html#cb470-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-14"><a href="análisis-de-datos-con-python.html#cb470-14" aria-hidden="true" tabindex="-1"></a><span class="co"># dos filas, tres columnas</span></span>
<span id="cb470-15"><a href="análisis-de-datos-con-python.html#cb470-15" aria-hidden="true" tabindex="-1"></a>x2[:<span class="dv">2</span>, :<span class="dv">3</span>]</span>
<span id="cb470-16"><a href="análisis-de-datos-con-python.html#cb470-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-17"><a href="análisis-de-datos-con-python.html#cb470-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Dar vuelta todo</span></span>
<span id="cb470-18"><a href="análisis-de-datos-con-python.html#cb470-18" aria-hidden="true" tabindex="-1"></a>x2[::<span class="op">-</span><span class="dv">1</span>, ::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb470-19"><a href="análisis-de-datos-con-python.html#cb470-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-20"><a href="análisis-de-datos-con-python.html#cb470-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2[:, <span class="dv">0</span>]) <span class="co"># primera columna</span></span>
<span id="cb470-21"><a href="análisis-de-datos-con-python.html#cb470-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-22"><a href="análisis-de-datos-con-python.html#cb470-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2[<span class="dv">0</span>, :])  <span class="co"># primera fila</span></span>
<span id="cb470-23"><a href="análisis-de-datos-con-python.html#cb470-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb470-24"><a href="análisis-de-datos-con-python.html#cb470-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2[<span class="dv">0</span>])   <span class="co"># equivalente a x2[0, :]</span></span></code></pre></div>
</div>
</div>
<div id="filtrar-arreglos" class="section level4 hasAnchor" number="4.2.1.5">
<h4><span class="header-section-number">4.2.1.5</span> Filtrar arreglos<a href="análisis-de-datos-con-python.html#filtrar-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb471"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb471-1"><a href="análisis-de-datos-con-python.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtros con mascaras</span></span>
<span id="cb471-2"><a href="análisis-de-datos-con-python.html#cb471-2" aria-hidden="true" tabindex="-1"></a>uno_al_diez <span class="op">=</span> np.arange(<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb471-3"><a href="análisis-de-datos-con-python.html#cb471-3" aria-hidden="true" tabindex="-1"></a>uno_al_diez</span>
<span id="cb471-4"><a href="análisis-de-datos-con-python.html#cb471-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-5"><a href="análisis-de-datos-con-python.html#cb471-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Creo la mascara</span></span>
<span id="cb471-6"><a href="análisis-de-datos-con-python.html#cb471-6" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> uno_al_diez <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span> </span>
<span id="cb471-7"><a href="análisis-de-datos-con-python.html#cb471-7" aria-hidden="true" tabindex="-1"></a>mask</span>
<span id="cb471-8"><a href="análisis-de-datos-con-python.html#cb471-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-9"><a href="análisis-de-datos-con-python.html#cb471-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Va a dejar unicamente los elementos donde la condición </span></span>
<span id="cb471-10"><a href="análisis-de-datos-con-python.html#cb471-10" aria-hidden="true" tabindex="-1"></a><span class="co"># es cierta </span></span>
<span id="cb471-11"><a href="análisis-de-datos-con-python.html#cb471-11" aria-hidden="true" tabindex="-1"></a>uno_al_diez[mask]</span>
<span id="cb471-12"><a href="análisis-de-datos-con-python.html#cb471-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-13"><a href="análisis-de-datos-con-python.html#cb471-13" aria-hidden="true" tabindex="-1"></a>y_2d <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">22</span>], [<span class="dv">2</span>,<span class="dv">21</span>], [<span class="dv">3</span>,<span class="dv">27</span>], [<span class="dv">4</span>,<span class="dv">26</span>]])</span>
<span id="cb471-14"><a href="análisis-de-datos-con-python.html#cb471-14" aria-hidden="true" tabindex="-1"></a>y_2d</span>
<span id="cb471-15"><a href="análisis-de-datos-con-python.html#cb471-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-16"><a href="análisis-de-datos-con-python.html#cb471-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Voy a colocar la condición dentro del subconjunto</span></span>
<span id="cb471-17"><a href="análisis-de-datos-con-python.html#cb471-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Es analogo a lo que esta arriba </span></span>
<span id="cb471-18"><a href="análisis-de-datos-con-python.html#cb471-18" aria-hidden="true" tabindex="-1"></a>y_2d[:,<span class="dv">0</span>][y_2d[:,<span class="dv">1</span>] <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb471-19"><a href="análisis-de-datos-con-python.html#cb471-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-20"><a href="análisis-de-datos-con-python.html#cb471-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra opción es utilizar np.where()</span></span>
<span id="cb471-21"><a href="análisis-de-datos-con-python.html#cb471-21" aria-hidden="true" tabindex="-1"></a>np.where(y_2d[:,<span class="dv">1</span>] <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>)</span>
<span id="cb471-22"><a href="análisis-de-datos-con-python.html#cb471-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Retorna un array de INDICES en donde </span></span>
<span id="cb471-23"><a href="análisis-de-datos-con-python.html#cb471-23" aria-hidden="true" tabindex="-1"></a><span class="co"># se cumplen las condiciones</span></span>
<span id="cb471-24"><a href="análisis-de-datos-con-python.html#cb471-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-25"><a href="análisis-de-datos-con-python.html#cb471-25" aria-hidden="true" tabindex="-1"></a>np.where(y_2d <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb471-26"><a href="análisis-de-datos-con-python.html#cb471-26" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(np.where(y_2d <span class="op">==</span> <span class="dv">2</span>))</span>
<span id="cb471-27"><a href="análisis-de-datos-con-python.html#cb471-27" aria-hidden="true" tabindex="-1"></a><span class="co"># El resultado es una tupla! (indice fila, indice columna)</span></span>
<span id="cb471-28"><a href="análisis-de-datos-con-python.html#cb471-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-29"><a href="análisis-de-datos-con-python.html#cb471-29" aria-hidden="true" tabindex="-1"></a>np.where(y_2d <span class="op">==</span> <span class="dv">2</span>)</span>
<span id="cb471-30"><a href="análisis-de-datos-con-python.html#cb471-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-31"><a href="análisis-de-datos-con-python.html#cb471-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo ocupar np.where para modificar un arreglo según </span></span>
<span id="cb471-32"><a href="análisis-de-datos-con-python.html#cb471-32" aria-hidden="true" tabindex="-1"></a><span class="co"># alguna condición </span></span>
<span id="cb471-33"><a href="análisis-de-datos-con-python.html#cb471-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-34"><a href="análisis-de-datos-con-python.html#cb471-34" aria-hidden="true" tabindex="-1"></a>np.where(y_2d <span class="op">==</span> <span class="dv">2</span>, <span class="st">&quot; &quot;</span>, y_2d)</span>
<span id="cb471-35"><a href="análisis-de-datos-con-python.html#cb471-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Lo primero indica la condición, lo segundo el remplazo, </span></span>
<span id="cb471-36"><a href="análisis-de-datos-con-python.html#cb471-36" aria-hidden="true" tabindex="-1"></a><span class="co"># lo tercero donde se remplaza</span></span></code></pre></div>
</div>
<div id="modificar-arreglos" class="section level4 hasAnchor" number="4.2.1.6">
<h4><span class="header-section-number">4.2.1.6</span> Modificar arreglos<a href="análisis-de-datos-con-python.html#modificar-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Es importante tener ojo al modificar los arreglos</strong></p>
<div class="sourceCode" id="cb472"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb472-1"><a href="análisis-de-datos-con-python.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recordemos el arreglo x2</span></span>
<span id="cb472-2"><a href="análisis-de-datos-con-python.html#cb472-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2)</span>
<span id="cb472-3"><a href="análisis-de-datos-con-python.html#cb472-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-4"><a href="análisis-de-datos-con-python.html#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Hagamos un subconjunto del arreglo x2</span></span>
<span id="cb472-5"><a href="análisis-de-datos-con-python.html#cb472-5" aria-hidden="true" tabindex="-1"></a>x2_sub <span class="op">=</span> x2[:<span class="dv">2</span>, :<span class="dv">2</span>]</span>
<span id="cb472-6"><a href="análisis-de-datos-con-python.html#cb472-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2_sub)</span>
<span id="cb472-7"><a href="análisis-de-datos-con-python.html#cb472-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-8"><a href="análisis-de-datos-con-python.html#cb472-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Modifiquemos el arreglo x2</span></span>
<span id="cb472-9"><a href="análisis-de-datos-con-python.html#cb472-9" aria-hidden="true" tabindex="-1"></a>x2_sub[<span class="dv">0</span>, <span class="dv">0</span>] <span class="op">=</span> <span class="dv">99</span></span>
<span id="cb472-10"><a href="análisis-de-datos-con-python.html#cb472-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2_sub)</span>
<span id="cb472-11"><a href="análisis-de-datos-con-python.html#cb472-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-12"><a href="análisis-de-datos-con-python.html#cb472-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2) <span class="co"># x2 cambio!!!</span></span>
<span id="cb472-13"><a href="análisis-de-datos-con-python.html#cb472-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-14"><a href="análisis-de-datos-con-python.html#cb472-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Para evitar que el objeto original se modifique utilizamos el metodo copy()</span></span>
<span id="cb472-15"><a href="análisis-de-datos-con-python.html#cb472-15" aria-hidden="true" tabindex="-1"></a>x2_sub_copy <span class="op">=</span> x2[:<span class="dv">2</span>, :<span class="dv">2</span>].copy()</span>
<span id="cb472-16"><a href="análisis-de-datos-con-python.html#cb472-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2_sub_copy)</span>
<span id="cb472-17"><a href="análisis-de-datos-con-python.html#cb472-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-18"><a href="análisis-de-datos-con-python.html#cb472-18" aria-hidden="true" tabindex="-1"></a>x2_sub_copy[<span class="dv">0</span>, <span class="dv">0</span>] <span class="op">=</span> <span class="dv">42</span></span>
<span id="cb472-19"><a href="análisis-de-datos-con-python.html#cb472-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2_sub_copy)</span>
<span id="cb472-20"><a href="análisis-de-datos-con-python.html#cb472-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-21"><a href="análisis-de-datos-con-python.html#cb472-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x2) <span class="co"># No se ha modificado!</span></span></code></pre></div>
</div>
<div id="manipular-arreglos" class="section level4 hasAnchor" number="4.2.1.7">
<h4><span class="header-section-number">4.2.1.7</span> Manipular arreglos<a href="análisis-de-datos-con-python.html#manipular-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>También es posible combinar múltiples arrays en uno solo, y a la inversa, dividir un único array en múltiples arrays. Aquí veremos esas operaciones.</li>
<li>La concatenación, o unión de dos arrays en NumPy, se realiza principalmente utilizando las rutinas <strong>np.concatenate, np.vstack y np.hstack. np.concatenate</strong> toma una tupla o lista de arrays como primer argumento, como podemos ver aquí</li>
</ul>
<div id="concatenar-arreglos" class="section level5 hasAnchor" number="4.2.1.7.1">
<h5><span class="header-section-number">4.2.1.7.1</span> Concatenar arreglos<a href="análisis-de-datos-con-python.html#concatenar-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb473"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb473-1"><a href="análisis-de-datos-con-python.html#cb473-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb473-2"><a href="análisis-de-datos-con-python.html#cb473-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array([<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb473-3"><a href="análisis-de-datos-con-python.html#cb473-3" aria-hidden="true" tabindex="-1"></a>np.concatenate([x, y])</span>
<span id="cb473-4"><a href="análisis-de-datos-con-python.html#cb473-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-5"><a href="análisis-de-datos-con-python.html#cb473-5" aria-hidden="true" tabindex="-1"></a><span class="co"># O de otra forma</span></span>
<span id="cb473-6"><a href="análisis-de-datos-con-python.html#cb473-6" aria-hidden="true" tabindex="-1"></a>np.concatenate((x,y))</span>
<span id="cb473-7"><a href="análisis-de-datos-con-python.html#cb473-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-8"><a href="análisis-de-datos-con-python.html#cb473-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar un nuevo arreglo</span></span>
<span id="cb473-9"><a href="análisis-de-datos-con-python.html#cb473-9" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> [<span class="dv">99</span>, <span class="dv">99</span>, <span class="dv">99</span>]</span>
<span id="cb473-10"><a href="análisis-de-datos-con-python.html#cb473-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.concatenate([x, y, z]))</span>
<span id="cb473-11"><a href="análisis-de-datos-con-python.html#cb473-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-12"><a href="análisis-de-datos-con-python.html#cb473-12" aria-hidden="true" tabindex="-1"></a>grid <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb473-13"><a href="análisis-de-datos-con-python.html#cb473-13" aria-hidden="true" tabindex="-1"></a>                 [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb473-14"><a href="análisis-de-datos-con-python.html#cb473-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-15"><a href="análisis-de-datos-con-python.html#cb473-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenar con matrices de dimensión 2</span></span>
<span id="cb473-16"><a href="análisis-de-datos-con-python.html#cb473-16" aria-hidden="true" tabindex="-1"></a>np.concatenate([grid, grid])</span>
<span id="cb473-17"><a href="análisis-de-datos-con-python.html#cb473-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-18"><a href="análisis-de-datos-con-python.html#cb473-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenar con matrices de dimensión 2</span></span>
<span id="cb473-19"><a href="análisis-de-datos-con-python.html#cb473-19" aria-hidden="true" tabindex="-1"></a>np.concatenate([grid, grid], axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb473-20"><a href="análisis-de-datos-con-python.html#cb473-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-21"><a href="análisis-de-datos-con-python.html#cb473-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Concatenar con matrices de dimensión 2</span></span>
<span id="cb473-22"><a href="análisis-de-datos-con-python.html#cb473-22" aria-hidden="true" tabindex="-1"></a>np.concatenate([grid, grid], axis <span class="op">=</span> <span class="dv">1</span>)</span></code></pre></div>
<ul>
<li>Para trabajar con matrices de dimensiones mixtas, puede ser más claro
utilizar las funciones np.vstack (pila vertical) y np.hstack (pila horizontal):</li>
</ul>
<div class="sourceCode" id="cb474"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb474-1"><a href="análisis-de-datos-con-python.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pegar arreglos verticalmente</span></span>
<span id="cb474-2"><a href="análisis-de-datos-con-python.html#cb474-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], </span>
<span id="cb474-3"><a href="análisis-de-datos-con-python.html#cb474-3" aria-hidden="true" tabindex="-1"></a>              [<span class="op">-</span><span class="dv">11</span>, <span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">3</span>]])</span>
<span id="cb474-4"><a href="análisis-de-datos-con-python.html#cb474-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-5"><a href="análisis-de-datos-con-python.html#cb474-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array([[<span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">7</span>],</span>
<span id="cb474-6"><a href="análisis-de-datos-con-python.html#cb474-6" aria-hidden="true" tabindex="-1"></a>                 [<span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>]])</span>
<span id="cb474-7"><a href="análisis-de-datos-con-python.html#cb474-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-8"><a href="análisis-de-datos-con-python.html#cb474-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.vstack([x, y]))</span>
<span id="cb474-9"><a href="análisis-de-datos-con-python.html#cb474-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-10"><a href="análisis-de-datos-con-python.html#cb474-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pegar arreglos horizontalmente</span></span>
<span id="cb474-11"><a href="análisis-de-datos-con-python.html#cb474-11" aria-hidden="true" tabindex="-1"></a>np.hstack([y, x])</span></code></pre></div>
</div>
<div id="separar-arreglos" class="section level5 hasAnchor" number="4.2.1.7.2">
<h5><span class="header-section-number">4.2.1.7.2</span> Separar arreglos<a href="análisis-de-datos-con-python.html#separar-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb475"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb475-1"><a href="análisis-de-datos-con-python.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo indicarle el numero de grupos </span></span>
<span id="cb475-2"><a href="análisis-de-datos-con-python.html#cb475-2" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>])</span>
<span id="cb475-3"><a href="análisis-de-datos-con-python.html#cb475-3" aria-hidden="true" tabindex="-1"></a>newarr <span class="op">=</span> np.array_split(arr, <span class="dv">4</span>)</span>
<span id="cb475-4"><a href="análisis-de-datos-con-python.html#cb475-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(newarr)</span>
<span id="cb475-5"><a href="análisis-de-datos-con-python.html#cb475-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-6"><a href="análisis-de-datos-con-python.html#cb475-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo indicarle los indices de los grupos</span></span>
<span id="cb475-7"><a href="análisis-de-datos-con-python.html#cb475-7" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">99</span>, <span class="dv">99</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb475-8"><a href="análisis-de-datos-con-python.html#cb475-8" aria-hidden="true" tabindex="-1"></a>x1, x2, x3 <span class="op">=</span> np.split(x, [<span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb475-9"><a href="análisis-de-datos-con-python.html#cb475-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x1, x2, x3)</span></code></pre></div>
</div>
<div id="trasponer-arreglos" class="section level5 hasAnchor" number="4.2.1.7.3">
<h5><span class="header-section-number">4.2.1.7.3</span> Trasponer arreglos<a href="análisis-de-datos-con-python.html#trasponer-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb476"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb476-1"><a href="análisis-de-datos-con-python.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb476-2"><a href="análisis-de-datos-con-python.html#cb476-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-3"><a href="análisis-de-datos-con-python.html#cb476-3" aria-hidden="true" tabindex="-1"></a>xT <span class="op">=</span> np.transpose(x)</span>
<span id="cb476-4"><a href="análisis-de-datos-con-python.html#cb476-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(xT)</span>
<span id="cb476-5"><a href="análisis-de-datos-con-python.html#cb476-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que ahora es un vector fila</span></span>
<span id="cb476-6"><a href="análisis-de-datos-con-python.html#cb476-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-7"><a href="análisis-de-datos-con-python.html#cb476-7" aria-hidden="true" tabindex="-1"></a>np_2d_t <span class="op">=</span> np.transpose(np_2d)</span>
<span id="cb476-8"><a href="análisis-de-datos-con-python.html#cb476-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_2d_t)</span>
<span id="cb476-9"><a href="análisis-de-datos-con-python.html#cb476-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb476-10"><a href="análisis-de-datos-con-python.html#cb476-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo aplicarlo como método. </span></span>
<span id="cb476-11"><a href="análisis-de-datos-con-python.html#cb476-11" aria-hidden="true" tabindex="-1"></a>np_2d.T</span></code></pre></div>
</div>
<div id="otras-funciones-para-crear-arreglos" class="section level5 hasAnchor" number="4.2.1.7.4">
<h5><span class="header-section-number">4.2.1.7.4</span> Otras funciones para crear arreglos<a href="análisis-de-datos-con-python.html#otras-funciones-para-crear-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb477"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb477-1"><a href="análisis-de-datos-con-python.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea un arreglo unidimensional de zeros</span></span>
<span id="cb477-2"><a href="análisis-de-datos-con-python.html#cb477-2" aria-hidden="true" tabindex="-1"></a>np.zeros(<span class="dv">10</span>)</span>
<span id="cb477-3"><a href="análisis-de-datos-con-python.html#cb477-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-4"><a href="análisis-de-datos-con-python.html#cb477-4" aria-hidden="true" tabindex="-1"></a>np.zeros((<span class="dv">10</span>,<span class="dv">10</span>))</span>
<span id="cb477-5"><a href="análisis-de-datos-con-python.html#cb477-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-6"><a href="análisis-de-datos-con-python.html#cb477-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una matriz de las dimensiones que se le indican </span></span>
<span id="cb477-7"><a href="análisis-de-datos-con-python.html#cb477-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar parentesis cuadrado</span></span>
<span id="cb477-8"><a href="análisis-de-datos-con-python.html#cb477-8" aria-hidden="true" tabindex="-1"></a>np.zeros([<span class="dv">10</span>,<span class="dv">10</span>])</span>
<span id="cb477-9"><a href="análisis-de-datos-con-python.html#cb477-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-10"><a href="análisis-de-datos-con-python.html#cb477-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea una matriz de 3x5 puntos flotantes llena de unos</span></span>
<span id="cb477-11"><a href="análisis-de-datos-con-python.html#cb477-11" aria-hidden="true" tabindex="-1"></a>np.ones((<span class="dv">3</span>, <span class="dv">5</span>), dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb477-12"><a href="análisis-de-datos-con-python.html#cb477-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-13"><a href="análisis-de-datos-con-python.html#cb477-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea una matriz de 3x5 llena de 3,14</span></span>
<span id="cb477-14"><a href="análisis-de-datos-con-python.html#cb477-14" aria-hidden="true" tabindex="-1"></a>np.full((<span class="dv">3</span>, <span class="dv">5</span>), <span class="fl">3.14</span>)</span>
<span id="cb477-15"><a href="análisis-de-datos-con-python.html#cb477-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-16"><a href="análisis-de-datos-con-python.html#cb477-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea un array lleno de una secuencia lineal</span></span>
<span id="cb477-17"><a href="análisis-de-datos-con-python.html#cb477-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Empezando en 0, terminando en 20, pasando por 2</span></span>
<span id="cb477-18"><a href="análisis-de-datos-con-python.html#cb477-18" aria-hidden="true" tabindex="-1"></a><span class="co"># (esto es similar a la función incorporada range())</span></span>
<span id="cb477-19"><a href="análisis-de-datos-con-python.html#cb477-19" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">2</span>)</span>
<span id="cb477-20"><a href="análisis-de-datos-con-python.html#cb477-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-21"><a href="análisis-de-datos-con-python.html#cb477-21" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="op">-</span><span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb477-22"><a href="análisis-de-datos-con-python.html#cb477-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Incluye el primer elemento, pero el último no</span></span>
<span id="cb477-23"><a href="análisis-de-datos-con-python.html#cb477-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-24"><a href="análisis-de-datos-con-python.html#cb477-24" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="op">-</span><span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">3</span>)</span>
<span id="cb477-25"><a href="análisis-de-datos-con-python.html#cb477-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-26"><a href="análisis-de-datos-con-python.html#cb477-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una matriz 3x3 de valores aleatorios normalmente distribuidos</span></span>
<span id="cb477-27"><a href="análisis-de-datos-con-python.html#cb477-27" aria-hidden="true" tabindex="-1"></a><span class="co"># con media 0 y desviación estándar 1</span></span>
<span id="cb477-28"><a href="análisis-de-datos-con-python.html#cb477-28" aria-hidden="true" tabindex="-1"></a>np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, (<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb477-29"><a href="análisis-de-datos-con-python.html#cb477-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-30"><a href="análisis-de-datos-con-python.html#cb477-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea una matriz 3x3 de enteros aleatorios en el intervalo [0, 10)</span></span>
<span id="cb477-31"><a href="análisis-de-datos-con-python.html#cb477-31" aria-hidden="true" tabindex="-1"></a>np.random.randint(<span class="dv">0</span>, <span class="dv">10</span>, (<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb477-32"><a href="análisis-de-datos-con-python.html#cb477-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-33"><a href="análisis-de-datos-con-python.html#cb477-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Crea una matriz identidad</span></span>
<span id="cb477-34"><a href="análisis-de-datos-con-python.html#cb477-34" aria-hidden="true" tabindex="-1"></a>np.eye(<span class="dv">3</span>)</span>
<span id="cb477-35"><a href="análisis-de-datos-con-python.html#cb477-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-36"><a href="análisis-de-datos-con-python.html#cb477-36" aria-hidden="true" tabindex="-1"></a><span class="co">#  Crear una matriz de valores espaciados uniformemente</span></span>
<span id="cb477-37"><a href="análisis-de-datos-con-python.html#cb477-37" aria-hidden="true" tabindex="-1"></a><span class="co"># espaciados entre sí</span></span>
<span id="cb477-38"><a href="análisis-de-datos-con-python.html#cb477-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-39"><a href="análisis-de-datos-con-python.html#cb477-39" aria-hidden="true" tabindex="-1"></a>np.linspace(<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">9</span>)</span>
<span id="cb477-40"><a href="análisis-de-datos-con-python.html#cb477-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-41"><a href="análisis-de-datos-con-python.html#cb477-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Solo valores aleatorios</span></span>
<span id="cb477-42"><a href="análisis-de-datos-con-python.html#cb477-42" aria-hidden="true" tabindex="-1"></a>np.random.random((<span class="dv">2</span>,<span class="dv">4</span>))</span>
<span id="cb477-43"><a href="análisis-de-datos-con-python.html#cb477-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-44"><a href="análisis-de-datos-con-python.html#cb477-44" aria-hidden="true" tabindex="-1"></a><span class="co"># La primera parte es el modulo de numpy, el segundo </span></span>
<span id="cb477-45"><a href="análisis-de-datos-con-python.html#cb477-45" aria-hidden="true" tabindex="-1"></a><span class="co"># es el nombre de la función.</span></span>
<span id="cb477-46"><a href="análisis-de-datos-con-python.html#cb477-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-47"><a href="análisis-de-datos-con-python.html#cb477-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un arreglo vacio</span></span>
<span id="cb477-48"><a href="análisis-de-datos-con-python.html#cb477-48" aria-hidden="true" tabindex="-1"></a>np.empty((<span class="dv">3</span>,<span class="dv">2</span>))</span>
<span id="cb477-49"><a href="análisis-de-datos-con-python.html#cb477-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-50"><a href="análisis-de-datos-con-python.html#cb477-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Reshape: modifica las dimensiones de un arreglo </span></span>
<span id="cb477-51"><a href="análisis-de-datos-con-python.html#cb477-51" aria-hidden="true" tabindex="-1"></a>array <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>], [<span class="dv">5</span>,<span class="dv">7</span>], [<span class="dv">6</span>,<span class="dv">6</span>]])</span>
<span id="cb477-52"><a href="análisis-de-datos-con-python.html#cb477-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(array)</span>
<span id="cb477-53"><a href="análisis-de-datos-con-python.html#cb477-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-54"><a href="análisis-de-datos-con-python.html#cb477-54" aria-hidden="true" tabindex="-1"></a>array.reshape((<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb477-55"><a href="análisis-de-datos-con-python.html#cb477-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-56"><a href="análisis-de-datos-con-python.html#cb477-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Flatten: toma todos los elementos de un arreglo y los </span></span>
<span id="cb477-57"><a href="análisis-de-datos-con-python.html#cb477-57" aria-hidden="true" tabindex="-1"></a><span class="co"># deja en una dimensión </span></span>
<span id="cb477-58"><a href="análisis-de-datos-con-python.html#cb477-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-59"><a href="análisis-de-datos-con-python.html#cb477-59" aria-hidden="true" tabindex="-1"></a>array.flatten()</span>
<span id="cb477-60"><a href="análisis-de-datos-con-python.html#cb477-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb477-61"><a href="análisis-de-datos-con-python.html#cb477-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos componer funciones, volver al origina </span></span>
<span id="cb477-62"><a href="análisis-de-datos-con-python.html#cb477-62" aria-hidden="true" tabindex="-1"></a>array.flatten().reshape((<span class="dv">2</span>,<span class="dv">3</span>))</span></code></pre></div>
</div>
<div id="ordenar-arreglos" class="section level5 hasAnchor" number="4.2.1.7.5">
<h5><span class="header-section-number">4.2.1.7.5</span> Ordenar arreglos<a href="análisis-de-datos-con-python.html#ordenar-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb478"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb478-1"><a href="análisis-de-datos-con-python.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Como función</span></span>
<span id="cb478-2"><a href="análisis-de-datos-con-python.html#cb478-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>])</span>
<span id="cb478-3"><a href="análisis-de-datos-con-python.html#cb478-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb478-4"><a href="análisis-de-datos-con-python.html#cb478-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-5"><a href="análisis-de-datos-con-python.html#cb478-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sort(x))</span>
<span id="cb478-6"><a href="análisis-de-datos-con-python.html#cb478-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-7"><a href="análisis-de-datos-con-python.html#cb478-7" aria-hidden="true" tabindex="-1"></a>np.sort?</span>
<span id="cb478-8"><a href="análisis-de-datos-con-python.html#cb478-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-9"><a href="análisis-de-datos-con-python.html#cb478-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Como método</span></span>
<span id="cb478-10"><a href="análisis-de-datos-con-python.html#cb478-10" aria-hidden="true" tabindex="-1"></a>x.sort()</span>
<span id="cb478-11"><a href="análisis-de-datos-con-python.html#cb478-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb478-12"><a href="análisis-de-datos-con-python.html#cb478-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-13"><a href="análisis-de-datos-con-python.html#cb478-13" aria-hidden="true" tabindex="-1"></a><span class="co"># argsort() retorna los indices</span></span>
<span id="cb478-14"><a href="análisis-de-datos-con-python.html#cb478-14" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>])</span>
<span id="cb478-15"><a href="análisis-de-datos-con-python.html#cb478-15" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> np.argsort(x)</span>
<span id="cb478-16"><a href="análisis-de-datos-con-python.html#cb478-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(i)</span>
<span id="cb478-17"><a href="análisis-de-datos-con-python.html#cb478-17" aria-hidden="true" tabindex="-1"></a><span class="co"># El primero es el menor</span></span>
<span id="cb478-18"><a href="análisis-de-datos-con-python.html#cb478-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-19"><a href="análisis-de-datos-con-python.html#cb478-19" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot;+ **Si queremos ordenar por filas o columnas?**&quot;&quot;&quot;</span></span>
<span id="cb478-20"><a href="análisis-de-datos-con-python.html#cb478-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-21"><a href="análisis-de-datos-con-python.html#cb478-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a utilizar el argumento axis</span></span>
<span id="cb478-22"><a href="análisis-de-datos-con-python.html#cb478-22" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.random.randint(<span class="dv">0</span>, <span class="dv">10</span>, (<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb478-23"><a href="análisis-de-datos-con-python.html#cb478-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb478-24"><a href="análisis-de-datos-con-python.html#cb478-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-25"><a href="análisis-de-datos-con-python.html#cb478-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamos por columnas</span></span>
<span id="cb478-26"><a href="análisis-de-datos-con-python.html#cb478-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sort(a, axis <span class="op">=</span> <span class="dv">0</span>))</span>
<span id="cb478-27"><a href="análisis-de-datos-con-python.html#cb478-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb478-28"><a href="análisis-de-datos-con-python.html#cb478-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenamos por filas</span></span>
<span id="cb478-29"><a href="análisis-de-datos-con-python.html#cb478-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.sort(a, axis <span class="op">=</span> <span class="dv">1</span>))</span></code></pre></div>
<ul>
<li>Notar que trata a cada columna/fila como arreglos independientes.</li>
<li>Cualquier relación entre columnas/filas se pierde al ordenarlos.</li>
</ul>
<div class="sourceCode" id="cb479"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb479-1"><a href="análisis-de-datos-con-python.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo ordenar con la siguiente regla: </span></span>
<span id="cb479-2"><a href="análisis-de-datos-con-python.html#cb479-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-3"><a href="análisis-de-datos-con-python.html#cb479-3" aria-hidden="true" tabindex="-1"></a><span class="co"># indica un número: total de elementos a ordenar</span></span>
<span id="cb479-4"><a href="análisis-de-datos-con-python.html#cb479-4" aria-hidden="true" tabindex="-1"></a><span class="co"># a la izquierda los menores</span></span>
<span id="cb479-5"><a href="análisis-de-datos-con-python.html#cb479-5" aria-hidden="true" tabindex="-1"></a><span class="co"># a la derecha los mayores</span></span>
<span id="cb479-6"><a href="análisis-de-datos-con-python.html#cb479-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-7"><a href="análisis-de-datos-con-python.html#cb479-7" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">4</span>])</span>
<span id="cb479-8"><a href="análisis-de-datos-con-python.html#cb479-8" aria-hidden="true" tabindex="-1"></a>np.partition(x, <span class="dv">3</span>)</span>
<span id="cb479-9"><a href="análisis-de-datos-con-python.html#cb479-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb479-10"><a href="análisis-de-datos-con-python.html#cb479-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Analogo para un 2d </span></span>
<span id="cb479-11"><a href="análisis-de-datos-con-python.html#cb479-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.partition(a, <span class="dv">2</span>, axis<span class="op">=</span><span class="dv">1</span>))</span></code></pre></div>
</div>
</div>
<div id="broadcasting" class="section level4 hasAnchor" number="4.2.1.8">
<h4><span class="header-section-number">4.2.1.8</span> Broadcasting<a href="análisis-de-datos-con-python.html#broadcasting" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Es una de las razones de que Python sea tan eficiente.</p></li>
<li><p>Permite operar entre objetos (ej. matrices) que tienen distinta dimensión.</p></li>
<li><p>La transmisión en NumPy sigue un estricto conjunto de reglas para determinar la interacción entre las dos matrices:</p>
<ul>
<li><p>Regla 1: Si las dos matrices difieren en su número de dimensiones, el objeto de la que tiene menos dimensiones se rellena con unos en su lado frontal (izquierdo).</p></li>
<li><p>Regla 2: Si la forma de las dos matrices no coincide en ninguna dimensión, la matriz con forma igual a 1 en esa dimensión se estira para que coincida con la otra forma.</p></li>
<li><p>Regla 3: Si en alguna dimensión los tamaños no coinciden y ninguno es igual a 1, se produce un error.</p></li>
</ul></li>
<li><p>Más info: <a href="https://numpy.org/doc/stable/user/basics.broadcasting.html" class="uri">https://numpy.org/doc/stable/user/basics.broadcasting.html</a></p></li>
</ul>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="sourceCode" id="cb480"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb480-1"><a href="análisis-de-datos-con-python.html#cb480-1" aria-hidden="true" tabindex="-1"></a>array2_2 <span class="op">=</span> np.array([<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>]).reshape(<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb480-2"><a href="análisis-de-datos-con-python.html#cb480-2" aria-hidden="true" tabindex="-1"></a>array2_1 <span class="op">=</span> np.array([<span class="dv">0</span>,<span class="dv">1</span>]).reshape((<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb480-3"><a href="análisis-de-datos-con-python.html#cb480-3" aria-hidden="true" tabindex="-1"></a>array1_2 <span class="op">=</span> np.array([<span class="dv">0</span>,<span class="dv">1</span>]).reshape((<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb480-4"><a href="análisis-de-datos-con-python.html#cb480-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-5"><a href="análisis-de-datos-con-python.html#cb480-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(array2_2)</span>
<span id="cb480-6"><a href="análisis-de-datos-con-python.html#cb480-6" aria-hidden="true" tabindex="-1"></a>np.shape(array2_2)</span>
<span id="cb480-7"><a href="análisis-de-datos-con-python.html#cb480-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-8"><a href="análisis-de-datos-con-python.html#cb480-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(array2_1)</span>
<span id="cb480-9"><a href="análisis-de-datos-con-python.html#cb480-9" aria-hidden="true" tabindex="-1"></a>np.shape(array2_1)</span>
<span id="cb480-10"><a href="análisis-de-datos-con-python.html#cb480-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-11"><a href="análisis-de-datos-con-python.html#cb480-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(array1_2)</span>
<span id="cb480-12"><a href="análisis-de-datos-con-python.html#cb480-12" aria-hidden="true" tabindex="-1"></a>np.shape(array1_2)</span>
<span id="cb480-13"><a href="análisis-de-datos-con-python.html#cb480-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-14"><a href="análisis-de-datos-con-python.html#cb480-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 1: sumo a cada columna</span></span>
<span id="cb480-15"><a href="análisis-de-datos-con-python.html#cb480-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(array2_2 <span class="op">+</span> array2_1)</span>
<span id="cb480-16"><a href="análisis-de-datos-con-python.html#cb480-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-17"><a href="análisis-de-datos-con-python.html#cb480-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 2: sumo a cada fila</span></span>
<span id="cb480-18"><a href="análisis-de-datos-con-python.html#cb480-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(array2_2 <span class="op">+</span> array1_2)</span>
<span id="cb480-19"><a href="análisis-de-datos-con-python.html#cb480-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-20"><a href="análisis-de-datos-con-python.html#cb480-20" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Que hizo python? : respeto siempre las filas.</span></span>
<span id="cb480-21"><a href="análisis-de-datos-con-python.html#cb480-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-22"><a href="análisis-de-datos-con-python.html#cb480-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Todo lo anterior aplica para otras operaciones.</span></span>
<span id="cb480-23"><a href="análisis-de-datos-con-python.html#cb480-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-24"><a href="análisis-de-datos-con-python.html#cb480-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí tambien hay de alguna forma bc</span></span>
<span id="cb480-25"><a href="análisis-de-datos-con-python.html#cb480-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-26"><a href="análisis-de-datos-con-python.html#cb480-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb480-27"><a href="análisis-de-datos-con-python.html#cb480-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-28"><a href="análisis-de-datos-con-python.html#cb480-28" aria-hidden="true" tabindex="-1"></a>a <span class="op">+</span> <span class="dv">5</span></span>
<span id="cb480-29"><a href="análisis-de-datos-con-python.html#cb480-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Es similar a transformar 5 en [5,5,5]</span></span>
<span id="cb480-30"><a href="análisis-de-datos-con-python.html#cb480-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-31"><a href="análisis-de-datos-con-python.html#cb480-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo</span></span>
<span id="cb480-32"><a href="análisis-de-datos-con-python.html#cb480-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-33"><a href="análisis-de-datos-con-python.html#cb480-33" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.ones((<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb480-34"><a href="análisis-de-datos-con-python.html#cb480-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(M)</span>
<span id="cb480-35"><a href="análisis-de-datos-con-python.html#cb480-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-36"><a href="análisis-de-datos-con-python.html#cb480-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb480-37"><a href="análisis-de-datos-con-python.html#cb480-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-38"><a href="análisis-de-datos-con-python.html#cb480-38" aria-hidden="true" tabindex="-1"></a>M <span class="op">+</span> a</span></code></pre></div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="sourceCode" id="cb481"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb481-1"><a href="análisis-de-datos-con-python.html#cb481-1" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.ones((<span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb481-2"><a href="análisis-de-datos-con-python.html#cb481-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">3</span>)</span>
<span id="cb481-3"><a href="análisis-de-datos-con-python.html#cb481-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-4"><a href="análisis-de-datos-con-python.html#cb481-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(M)</span>
<span id="cb481-5"><a href="análisis-de-datos-con-python.html#cb481-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-6"><a href="análisis-de-datos-con-python.html#cb481-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb481-7"><a href="análisis-de-datos-con-python.html#cb481-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb481-8"><a href="análisis-de-datos-con-python.html#cb481-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(M.shape)</span>
<span id="cb481-9"><a href="análisis-de-datos-con-python.html#cb481-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.shape)</span></code></pre></div>
<ul>
<li>Regla 1: a tiene menos dimension, por lo tanto, a la izquierda con 1.</li>
</ul>
<p>M -&gt; (2,3)
a -&gt;(1,3)</p>
<ul>
<li>Regla 2: como difieren en la primera dimensión, estiramos la más pequeña hasta hacerla coincidir</li>
</ul>
<div class="sourceCode" id="cb482"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb482-1"><a href="análisis-de-datos-con-python.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(M <span class="op">+</span> a)</span>
<span id="cb482-2"><a href="análisis-de-datos-con-python.html#cb482-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-3"><a href="análisis-de-datos-con-python.html#cb482-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 2: Cuando ambos tienen que hacer broadcasting</span></span>
<span id="cb482-4"><a href="análisis-de-datos-con-python.html#cb482-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-5"><a href="análisis-de-datos-con-python.html#cb482-5" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">3</span>).reshape((<span class="dv">3</span>, <span class="dv">1</span>))</span>
<span id="cb482-6"><a href="análisis-de-datos-con-python.html#cb482-6" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.arange(<span class="dv">3</span>)</span>
<span id="cb482-7"><a href="análisis-de-datos-con-python.html#cb482-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-8"><a href="análisis-de-datos-con-python.html#cb482-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb482-9"><a href="análisis-de-datos-con-python.html#cb482-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-10"><a href="análisis-de-datos-con-python.html#cb482-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)</span>
<span id="cb482-11"><a href="análisis-de-datos-con-python.html#cb482-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb482-12"><a href="análisis-de-datos-con-python.html#cb482-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.shape)</span>
<span id="cb482-13"><a href="análisis-de-datos-con-python.html#cb482-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b.shape)</span></code></pre></div>
<ul>
<li>Regla 1: el de dimensión más baja con 1 a la izquierda</li>
</ul>
<p>(3,1)
(1,3)</p>
<ul>
<li>Regla 2: ambos deben coincidir
(3,3) y (3,3).</li>
</ul>
<div class="sourceCode" id="cb483"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb483-1"><a href="análisis-de-datos-con-python.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a <span class="op">+</span> b)</span>
<span id="cb483-2"><a href="análisis-de-datos-con-python.html#cb483-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-3"><a href="análisis-de-datos-con-python.html#cb483-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 3</span></span>
<span id="cb483-4"><a href="análisis-de-datos-con-python.html#cb483-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-5"><a href="análisis-de-datos-con-python.html#cb483-5" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.ones((<span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb483-6"><a href="análisis-de-datos-con-python.html#cb483-6" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">3</span>)</span></code></pre></div>
<ul>
<li>Regla 1:</li>
</ul>
<p>M -&gt; 3,2
a -&gt; 1,3</p>
<ul>
<li>Regla 2: La dimensión 1 se modifica hasta que sean iguales</li>
</ul>
<p>M -&gt; 3,2
a -&gt; 3,3</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb484-1"><a href="análisis-de-datos-con-python.html#cb484-1" aria-hidden="true" tabindex="-1"></a>M <span class="op">+</span> a</span></code></pre></div>
</div>
<div id="operaciones-matematicas-en-arreglos" class="section level4 hasAnchor" number="4.2.1.9">
<h4><span class="header-section-number">4.2.1.9</span> Operaciones matematicas en arreglos<a href="análisis-de-datos-con-python.html#operaciones-matematicas-en-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb485"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb485-1"><a href="análisis-de-datos-con-python.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para hacer operaciones</span></span>
<span id="cb485-2"><a href="análisis-de-datos-con-python.html#cb485-2" aria-hidden="true" tabindex="-1"></a>np_mat <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb485-3"><a href="análisis-de-datos-con-python.html#cb485-3" aria-hidden="true" tabindex="-1"></a>                   [<span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb485-4"><a href="análisis-de-datos-con-python.html#cb485-4" aria-hidden="true" tabindex="-1"></a>                   [<span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb485-5"><a href="análisis-de-datos-con-python.html#cb485-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_mat <span class="op">**</span> <span class="dv">1</span>)</span>
<span id="cb485-6"><a href="análisis-de-datos-con-python.html#cb485-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-7"><a href="análisis-de-datos-con-python.html#cb485-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.array([<span class="dv">10</span>, <span class="dv">10</span>]))</span>
<span id="cb485-8"><a href="análisis-de-datos-con-python.html#cb485-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-9"><a href="análisis-de-datos-con-python.html#cb485-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_mat <span class="op">+</span> np.array([<span class="dv">10</span>, <span class="dv">10</span>]))</span>
<span id="cb485-10"><a href="análisis-de-datos-con-python.html#cb485-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-11"><a href="análisis-de-datos-con-python.html#cb485-11" aria-hidden="true" tabindex="-1"></a>np_mat <span class="op">+</span> np_mat</span></code></pre></div>
<div id="operaciones-vectorizadas-en-python" class="section level5 hasAnchor" number="4.2.1.9.1">
<h5><span class="header-section-number">4.2.1.9.1</span> Operaciones vectorizadas en Python<a href="análisis-de-datos-con-python.html#operaciones-vectorizadas-en-python" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb486"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb486-1"><a href="análisis-de-datos-con-python.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dividirporvalores(valores):</span>
<span id="cb486-2"><a href="análisis-de-datos-con-python.html#cb486-2" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> np.empty(<span class="bu">len</span>(valores))</span>
<span id="cb486-3"><a href="análisis-de-datos-con-python.html#cb486-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(valores)):</span>
<span id="cb486-4"><a href="análisis-de-datos-con-python.html#cb486-4" aria-hidden="true" tabindex="-1"></a>        output[i] <span class="op">=</span> <span class="dv">1</span> <span class="op">/</span> valores[i]</span>
<span id="cb486-5"><a href="análisis-de-datos-con-python.html#cb486-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output</span>
<span id="cb486-6"><a href="análisis-de-datos-con-python.html#cb486-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb486-7"><a href="análisis-de-datos-con-python.html#cb486-7" aria-hidden="true" tabindex="-1"></a>arreglo <span class="op">=</span> np.random.randint(<span class="dv">1</span>, <span class="dv">20</span>, size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb486-8"><a href="análisis-de-datos-con-python.html#cb486-8" aria-hidden="true" tabindex="-1"></a>dividirporvalores(arreglo)</span>
<span id="cb486-9"><a href="análisis-de-datos-con-python.html#cb486-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb486-10"><a href="análisis-de-datos-con-python.html#cb486-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Commented out IPython magic to ensure Python compatibility.</span></span>
<span id="cb486-11"><a href="análisis-de-datos-con-python.html#cb486-11" aria-hidden="true" tabindex="-1"></a>arreglo_muygrande <span class="op">=</span> np.random.randint(<span class="dv">1</span>, <span class="dv">100</span>, size<span class="op">=</span><span class="dv">1000000</span>)</span>
<span id="cb486-12"><a href="análisis-de-datos-con-python.html#cb486-12" aria-hidden="true" tabindex="-1"></a><span class="co"># %timeit dividirporvalores(arreglo_muygrande)</span></span></code></pre></div>
<ul>
<li>Al vectorizar operaciones se reduce el tiempo de ejecución.</li>
<li>Las típicas operaciones que realizamos muchas veces en estos lenguajes son las que permiten disminuir el tiempo de ejecución en los programas.</li>
</ul>
<div class="sourceCode" id="cb487"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb487-1"><a href="análisis-de-datos-con-python.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dividirporvalores(arreglo))</span>
<span id="cb487-2"><a href="análisis-de-datos-con-python.html#cb487-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="fl">1.0</span> <span class="op">/</span> arreglo)</span>
<span id="cb487-3"><a href="análisis-de-datos-con-python.html#cb487-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-4"><a href="análisis-de-datos-con-python.html#cb487-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Commented out IPython magic to ensure Python compatibility.</span></span>
<span id="cb487-5"><a href="análisis-de-datos-con-python.html#cb487-5" aria-hidden="true" tabindex="-1"></a><span class="co"># %timeit (1.0 / arreglo_muygrande)</span></span>
<span id="cb487-6"><a href="análisis-de-datos-con-python.html#cb487-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-7"><a href="análisis-de-datos-con-python.html#cb487-7" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">5</span>) <span class="op">/</span> np.arange(<span class="dv">1</span>, <span class="dv">6</span>)</span>
<span id="cb487-8"><a href="análisis-de-datos-con-python.html#cb487-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-9"><a href="análisis-de-datos-con-python.html#cb487-9" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">100000</span>) <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb487-10"><a href="análisis-de-datos-con-python.html#cb487-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb487-11"><a href="análisis-de-datos-con-python.html#cb487-11" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">100000</span>).<span class="bu">sum</span>()</span></code></pre></div>
</div>
<div id="operaciones-básicas-y-funciones-básicas" class="section level5 hasAnchor" number="4.2.1.9.2">
<h5><span class="header-section-number">4.2.1.9.2</span> Operaciones básicas y funciones básicas<a href="análisis-de-datos-con-python.html#operaciones-básicas-y-funciones-básicas" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb488"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb488-1"><a href="análisis-de-datos-con-python.html#cb488-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">4</span>)</span>
<span id="cb488-2"><a href="análisis-de-datos-con-python.html#cb488-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x     =&quot;</span>, x)</span>
<span id="cb488-3"><a href="análisis-de-datos-con-python.html#cb488-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x + 5 =&quot;</span>, x <span class="op">+</span> <span class="dv">5</span>)</span>
<span id="cb488-4"><a href="análisis-de-datos-con-python.html#cb488-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x - 5 =&quot;</span>, x <span class="op">-</span> <span class="dv">5</span>)</span>
<span id="cb488-5"><a href="análisis-de-datos-con-python.html#cb488-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x * 2 =&quot;</span>, x <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb488-6"><a href="análisis-de-datos-con-python.html#cb488-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x / 2 =&quot;</span>, x <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb488-7"><a href="análisis-de-datos-con-python.html#cb488-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x // 2 =&quot;</span>, x <span class="op">//</span> <span class="dv">2</span>)  <span class="co"># floor division</span></span>
<span id="cb488-8"><a href="análisis-de-datos-con-python.html#cb488-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;-x     = &quot;</span>, <span class="op">-</span>x)</span>
<span id="cb488-9"><a href="análisis-de-datos-con-python.html#cb488-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x ** 2 = &quot;</span>, x <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb488-10"><a href="análisis-de-datos-con-python.html#cb488-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;x % 2  = &quot;</span>, x <span class="op">%</span> <span class="dv">2</span>)</span>
<span id="cb488-11"><a href="análisis-de-datos-con-python.html#cb488-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Todas estas funciones/operadores se encuentran como metodos</span></span>
<span id="cb488-12"><a href="análisis-de-datos-con-python.html#cb488-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-13"><a href="análisis-de-datos-con-python.html#cb488-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones como metodos</span></span>
<span id="cb488-14"><a href="análisis-de-datos-con-python.html#cb488-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.add(x, <span class="dv">2</span>))</span>
<span id="cb488-15"><a href="análisis-de-datos-con-python.html#cb488-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.multiply(x,<span class="dv">2</span>))</span>
<span id="cb488-16"><a href="análisis-de-datos-con-python.html#cb488-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.divide(x,<span class="dv">2</span>))</span>
<span id="cb488-17"><a href="análisis-de-datos-con-python.html#cb488-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.subtract(x,<span class="dv">2</span>))</span>
<span id="cb488-18"><a href="análisis-de-datos-con-python.html#cb488-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-19"><a href="análisis-de-datos-con-python.html#cb488-19" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb488-20"><a href="análisis-de-datos-con-python.html#cb488-20" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="fl">1.5</span>,<span class="op">-</span><span class="dv">32</span>,<span class="op">-</span><span class="dv">33</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]])</span>
<span id="cb488-21"><a href="análisis-de-datos-con-python.html#cb488-21" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb488-22"><a href="análisis-de-datos-con-python.html#cb488-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-23"><a href="análisis-de-datos-con-python.html#cb488-23" aria-hidden="true" tabindex="-1"></a>np.absolute(b)</span>
<span id="cb488-24"><a href="análisis-de-datos-con-python.html#cb488-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-25"><a href="análisis-de-datos-con-python.html#cb488-25" aria-hidden="true" tabindex="-1"></a>np.exp(b)</span>
<span id="cb488-26"><a href="análisis-de-datos-con-python.html#cb488-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-27"><a href="análisis-de-datos-con-python.html#cb488-27" aria-hidden="true" tabindex="-1"></a>np.sqrt(b)</span>
<span id="cb488-28"><a href="análisis-de-datos-con-python.html#cb488-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-29"><a href="análisis-de-datos-con-python.html#cb488-29" aria-hidden="true" tabindex="-1"></a>np.sin(a)</span>
<span id="cb488-30"><a href="análisis-de-datos-con-python.html#cb488-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-31"><a href="análisis-de-datos-con-python.html#cb488-31" aria-hidden="true" tabindex="-1"></a>np.cos(b)</span>
<span id="cb488-32"><a href="análisis-de-datos-con-python.html#cb488-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb488-33"><a href="análisis-de-datos-con-python.html#cb488-33" aria-hidden="true" tabindex="-1"></a>np.log(a)</span></code></pre></div>
</div>
<div id="operaciones-entre-distintos-tipos-de-objeto" class="section level5 hasAnchor" number="4.2.1.9.3">
<h5><span class="header-section-number">4.2.1.9.3</span> Operaciones entre distintos tipos de objeto<a href="análisis-de-datos-con-python.html#operaciones-entre-distintos-tipos-de-objeto" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb489"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb489-1"><a href="análisis-de-datos-con-python.html#cb489-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb489-2"><a href="análisis-de-datos-con-python.html#cb489-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.array([[<span class="fl">1.5</span>,<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]]).reshape(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb489-3"><a href="análisis-de-datos-con-python.html#cb489-3" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> np.array([[<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">3</span>,<span class="dv">3</span>],[<span class="dv">3</span>,<span class="dv">5</span>]]).reshape(<span class="dv">3</span>,<span class="dv">2</span>)</span>
<span id="cb489-4"><a href="análisis-de-datos-con-python.html#cb489-4" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb489-5"><a href="análisis-de-datos-con-python.html#cb489-5" aria-hidden="true" tabindex="-1"></a>e <span class="op">=</span> np.array([[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>]])</span>
<span id="cb489-6"><a href="análisis-de-datos-con-python.html#cb489-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-7"><a href="análisis-de-datos-con-python.html#cb489-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb489-8"><a href="análisis-de-datos-con-python.html#cb489-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-9"><a href="análisis-de-datos-con-python.html#cb489-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)</span>
<span id="cb489-10"><a href="análisis-de-datos-con-python.html#cb489-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-11"><a href="análisis-de-datos-con-python.html#cb489-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c)</span>
<span id="cb489-12"><a href="análisis-de-datos-con-python.html#cb489-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-13"><a href="análisis-de-datos-con-python.html#cb489-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d)</span>
<span id="cb489-14"><a href="análisis-de-datos-con-python.html#cb489-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-15"><a href="análisis-de-datos-con-python.html#cb489-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(e)</span>
<span id="cb489-16"><a href="análisis-de-datos-con-python.html#cb489-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-17"><a href="análisis-de-datos-con-python.html#cb489-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Vector con escalar</span></span>
<span id="cb489-18"><a href="análisis-de-datos-con-python.html#cb489-18" aria-hidden="true" tabindex="-1"></a>a <span class="op">+</span> d</span>
<span id="cb489-19"><a href="análisis-de-datos-con-python.html#cb489-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-20"><a href="análisis-de-datos-con-python.html#cb489-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz con escalar</span></span>
<span id="cb489-21"><a href="análisis-de-datos-con-python.html#cb489-21" aria-hidden="true" tabindex="-1"></a>b <span class="op">-</span> d</span>
<span id="cb489-22"><a href="análisis-de-datos-con-python.html#cb489-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-23"><a href="análisis-de-datos-con-python.html#cb489-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz con matriz (suma)</span></span>
<span id="cb489-24"><a href="análisis-de-datos-con-python.html#cb489-24" aria-hidden="true" tabindex="-1"></a>b <span class="op">+</span> b</span>
<span id="cb489-25"><a href="análisis-de-datos-con-python.html#cb489-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-26"><a href="análisis-de-datos-con-python.html#cb489-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Matriz con matriz (producto)</span></span>
<span id="cb489-27"><a href="análisis-de-datos-con-python.html#cb489-27" aria-hidden="true" tabindex="-1"></a>b <span class="op">*</span> c</span>
<span id="cb489-28"><a href="análisis-de-datos-con-python.html#cb489-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-29"><a href="análisis-de-datos-con-python.html#cb489-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Si quiero multiplicar matrices normalmente</span></span>
<span id="cb489-30"><a href="análisis-de-datos-con-python.html#cb489-30" aria-hidden="true" tabindex="-1"></a>np.dot(b,c)</span>
<span id="cb489-31"><a href="análisis-de-datos-con-python.html#cb489-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-32"><a href="análisis-de-datos-con-python.html#cb489-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo</span></span>
<span id="cb489-33"><a href="análisis-de-datos-con-python.html#cb489-33" aria-hidden="true" tabindex="-1"></a>m1 <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">7</span>],[<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">8</span>]])</span>
<span id="cb489-34"><a href="análisis-de-datos-con-python.html#cb489-34" aria-hidden="true" tabindex="-1"></a>m2 <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">5</span>],[<span class="dv">3</span>,<span class="dv">6</span>]])</span>
<span id="cb489-35"><a href="análisis-de-datos-con-python.html#cb489-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-36"><a href="análisis-de-datos-con-python.html#cb489-36" aria-hidden="true" tabindex="-1"></a>np.shape(m1)</span>
<span id="cb489-37"><a href="análisis-de-datos-con-python.html#cb489-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-38"><a href="análisis-de-datos-con-python.html#cb489-38" aria-hidden="true" tabindex="-1"></a>np.shape(m2)</span>
<span id="cb489-39"><a href="análisis-de-datos-con-python.html#cb489-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-40"><a href="análisis-de-datos-con-python.html#cb489-40" aria-hidden="true" tabindex="-1"></a>m3 <span class="op">=</span> np.dot(m1,m2) </span>
<span id="cb489-41"><a href="análisis-de-datos-con-python.html#cb489-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(m3)</span>
<span id="cb489-42"><a href="análisis-de-datos-con-python.html#cb489-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb489-43"><a href="análisis-de-datos-con-python.html#cb489-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Por qué aquí pudimos multiplicar? </span></span>
<span id="cb489-44"><a href="análisis-de-datos-con-python.html#cb489-44" aria-hidden="true" tabindex="-1"></a>b <span class="op">*</span> e</span></code></pre></div>
</div>
</div>
<div id="estadistica-exploratoria-con-arreglos" class="section level4 hasAnchor" number="4.2.1.10">
<h4><span class="header-section-number">4.2.1.10</span> Estadistica exploratoria con arreglos<a href="análisis-de-datos-con-python.html#estadistica-exploratoria-con-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb490"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb490-1"><a href="análisis-de-datos-con-python.html#cb490-1" aria-hidden="true" tabindex="-1"></a>np_mat <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>,<span class="dv">30</span>],</span>
<span id="cb490-2"><a href="análisis-de-datos-con-python.html#cb490-2" aria-hidden="true" tabindex="-1"></a>                   [<span class="dv">30</span>, <span class="dv">4</span>, <span class="op">-</span><span class="dv">5</span>],</span>
<span id="cb490-3"><a href="análisis-de-datos-con-python.html#cb490-3" aria-hidden="true" tabindex="-1"></a>                   [<span class="dv">5</span>, <span class="dv">6</span>,<span class="dv">7</span> ]])</span>
<span id="cb490-4"><a href="análisis-de-datos-con-python.html#cb490-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_mat)</span>
<span id="cb490-5"><a href="análisis-de-datos-con-python.html#cb490-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-6"><a href="análisis-de-datos-con-python.html#cb490-6" aria-hidden="true" tabindex="-1"></a>np_mat[:,<span class="dv">0</span>]</span>
<span id="cb490-7"><a href="análisis-de-datos-con-python.html#cb490-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-8"><a href="análisis-de-datos-con-python.html#cb490-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Media</span></span>
<span id="cb490-9"><a href="análisis-de-datos-con-python.html#cb490-9" aria-hidden="true" tabindex="-1"></a>np.mean(np_mat[:,<span class="dv">0</span>])</span>
<span id="cb490-10"><a href="análisis-de-datos-con-python.html#cb490-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-11"><a href="análisis-de-datos-con-python.html#cb490-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Mediana </span></span>
<span id="cb490-12"><a href="análisis-de-datos-con-python.html#cb490-12" aria-hidden="true" tabindex="-1"></a>np.median(np_mat[:,<span class="dv">0</span>])</span>
<span id="cb490-13"><a href="análisis-de-datos-con-python.html#cb490-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-14"><a href="análisis-de-datos-con-python.html#cb490-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Coeficiente de correlación </span></span>
<span id="cb490-15"><a href="análisis-de-datos-con-python.html#cb490-15" aria-hidden="true" tabindex="-1"></a>np.corrcoef(np_mat[:,<span class="dv">1</span>],np_mat[:,<span class="dv">2</span>] )</span>
<span id="cb490-16"><a href="análisis-de-datos-con-python.html#cb490-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-17"><a href="análisis-de-datos-con-python.html#cb490-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Desviación estandar</span></span>
<span id="cb490-18"><a href="análisis-de-datos-con-python.html#cb490-18" aria-hidden="true" tabindex="-1"></a>np.std(np_mat[:,<span class="dv">1</span>])</span>
<span id="cb490-19"><a href="análisis-de-datos-con-python.html#cb490-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-20"><a href="análisis-de-datos-con-python.html#cb490-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Suma </span></span>
<span id="cb490-21"><a href="análisis-de-datos-con-python.html#cb490-21" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(np_mat[:,<span class="dv">1</span>])</span>
<span id="cb490-22"><a href="análisis-de-datos-con-python.html#cb490-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-23"><a href="análisis-de-datos-con-python.html#cb490-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Suma acumulada</span></span>
<span id="cb490-24"><a href="análisis-de-datos-con-python.html#cb490-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.cumsum(np_mat))</span>
<span id="cb490-25"><a href="análisis-de-datos-con-python.html#cb490-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-26"><a href="análisis-de-datos-con-python.html#cb490-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo utilizarlas como metodos</span></span>
<span id="cb490-27"><a href="análisis-de-datos-con-python.html#cb490-27" aria-hidden="true" tabindex="-1"></a>np_mat.<span class="bu">sum</span>()</span>
<span id="cb490-28"><a href="análisis-de-datos-con-python.html#cb490-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-29"><a href="análisis-de-datos-con-python.html#cb490-29" aria-hidden="true" tabindex="-1"></a>np_mat.<span class="bu">min</span>()</span>
<span id="cb490-30"><a href="análisis-de-datos-con-python.html#cb490-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-31"><a href="análisis-de-datos-con-python.html#cb490-31" aria-hidden="true" tabindex="-1"></a>np_mat.<span class="bu">max</span>()</span>
<span id="cb490-32"><a href="análisis-de-datos-con-python.html#cb490-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-33"><a href="análisis-de-datos-con-python.html#cb490-33" aria-hidden="true" tabindex="-1"></a>np_mat.mean()</span>
<span id="cb490-34"><a href="análisis-de-datos-con-python.html#cb490-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-35"><a href="análisis-de-datos-con-python.html#cb490-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar datos aleatorios a partir de una distribución normal</span></span>
<span id="cb490-36"><a href="análisis-de-datos-con-python.html#cb490-36" aria-hidden="true" tabindex="-1"></a>ingreso <span class="op">=</span> np.<span class="bu">round</span>(np.random.normal(<span class="dv">1000</span>,<span class="dv">100</span>,<span class="dv">5000</span>),<span class="dv">1</span>)</span>
<span id="cb490-37"><a href="análisis-de-datos-con-python.html#cb490-37" aria-hidden="true" tabindex="-1"></a>n_hogar <span class="op">=</span> np.<span class="bu">round</span>(np.random.normal(<span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">5000</span>),<span class="dv">0</span>)</span>
<span id="cb490-38"><a href="análisis-de-datos-con-python.html#cb490-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-39"><a href="análisis-de-datos-con-python.html#cb490-39" aria-hidden="true" tabindex="-1"></a>ingreso</span>
<span id="cb490-40"><a href="análisis-de-datos-con-python.html#cb490-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-41"><a href="análisis-de-datos-con-python.html#cb490-41" aria-hidden="true" tabindex="-1"></a>ingreso.shape</span>
<span id="cb490-42"><a href="análisis-de-datos-con-python.html#cb490-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-43"><a href="análisis-de-datos-con-python.html#cb490-43" aria-hidden="true" tabindex="-1"></a>n_hogar</span>
<span id="cb490-44"><a href="análisis-de-datos-con-python.html#cb490-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-45"><a href="análisis-de-datos-con-python.html#cb490-45" aria-hidden="true" tabindex="-1"></a>n_hogar.shape</span>
<span id="cb490-46"><a href="análisis-de-datos-con-python.html#cb490-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-47"><a href="análisis-de-datos-con-python.html#cb490-47" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> np.column_stack((ingreso,n_hogar))</span>
<span id="cb490-48"><a href="análisis-de-datos-con-python.html#cb490-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(datos)</span>
<span id="cb490-49"><a href="análisis-de-datos-con-python.html#cb490-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-50"><a href="análisis-de-datos-con-python.html#cb490-50" aria-hidden="true" tabindex="-1"></a>datos[:,<span class="dv">0</span>].mean()</span>
<span id="cb490-51"><a href="análisis-de-datos-con-python.html#cb490-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-52"><a href="análisis-de-datos-con-python.html#cb490-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien podemos utilizar variables categoricas excluyentes</span></span>
<span id="cb490-53"><a href="análisis-de-datos-con-python.html#cb490-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijemos colores y precios como listas</span></span>
<span id="cb490-54"><a href="análisis-de-datos-con-python.html#cb490-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-55"><a href="análisis-de-datos-con-python.html#cb490-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Listas : colores y precios</span></span>
<span id="cb490-56"><a href="análisis-de-datos-con-python.html#cb490-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-57"><a href="análisis-de-datos-con-python.html#cb490-57" aria-hidden="true" tabindex="-1"></a>mano <span class="op">=</span> [<span class="st">&quot;diestro&quot;</span>, <span class="st">&quot;zurdo&quot;</span>, <span class="st">&quot;zurdo&quot;</span>, <span class="st">&quot;diestro&quot;</span>, <span class="st">&quot;zurdo&quot;</span>]</span>
<span id="cb490-58"><a href="análisis-de-datos-con-python.html#cb490-58" aria-hidden="true" tabindex="-1"></a>valor <span class="op">=</span> [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">24</span>, <span class="dv">12</span>, <span class="dv">15</span>]</span>
<span id="cb490-59"><a href="análisis-de-datos-con-python.html#cb490-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-60"><a href="análisis-de-datos-con-python.html#cb490-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertimos a arreglos</span></span>
<span id="cb490-61"><a href="análisis-de-datos-con-python.html#cb490-61" aria-hidden="true" tabindex="-1"></a>np_mano <span class="op">=</span> np.array(mano)</span>
<span id="cb490-62"><a href="análisis-de-datos-con-python.html#cb490-62" aria-hidden="true" tabindex="-1"></a>np_valor <span class="op">=</span> np.array(valor)</span>
<span id="cb490-63"><a href="análisis-de-datos-con-python.html#cb490-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-64"><a href="análisis-de-datos-con-python.html#cb490-64" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np_mano, np_valor)</span>
<span id="cb490-65"><a href="análisis-de-datos-con-python.html#cb490-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-66"><a href="análisis-de-datos-con-python.html#cb490-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacemos una selección solo para diestros</span></span>
<span id="cb490-67"><a href="análisis-de-datos-con-python.html#cb490-67" aria-hidden="true" tabindex="-1"></a>valores_diestro <span class="op">=</span> np_valor[np_mano <span class="op">==</span> <span class="st">&#39;diestro&#39;</span>]</span>
<span id="cb490-68"><a href="análisis-de-datos-con-python.html#cb490-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-69"><a href="análisis-de-datos-con-python.html#cb490-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacemos una selección solo para zurdos</span></span>
<span id="cb490-70"><a href="análisis-de-datos-con-python.html#cb490-70" aria-hidden="true" tabindex="-1"></a>valores_zurdos <span class="op">=</span> np_valor[np_mano <span class="op">!=</span> <span class="st">&#39;diestro&#39;</span>]</span>
<span id="cb490-71"><a href="análisis-de-datos-con-python.html#cb490-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-72"><a href="análisis-de-datos-con-python.html#cb490-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimimos los resultados utilizando las estadisticas promedio</span></span>
<span id="cb490-73"><a href="análisis-de-datos-con-python.html#cb490-73" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Mediana valor diestros: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(np.median(valores_diestro )))</span>
<span id="cb490-74"><a href="análisis-de-datos-con-python.html#cb490-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-75"><a href="análisis-de-datos-con-python.html#cb490-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the median height of other players. Replace &#39;None&#39;</span></span>
<span id="cb490-76"><a href="análisis-de-datos-con-python.html#cb490-76" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Mediana valor zurdos: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(np.median(valores_zurdos)))</span>
<span id="cb490-77"><a href="análisis-de-datos-con-python.html#cb490-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-78"><a href="análisis-de-datos-con-python.html#cb490-78" aria-hidden="true" tabindex="-1"></a>np_mat</span>
<span id="cb490-79"><a href="análisis-de-datos-con-python.html#cb490-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-80"><a href="análisis-de-datos-con-python.html#cb490-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Ojo que le puedo indicar los ejes</span></span>
<span id="cb490-81"><a href="análisis-de-datos-con-python.html#cb490-81" aria-hidden="true" tabindex="-1"></a>np_mat.<span class="bu">sum</span>(axis <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb490-82"><a href="análisis-de-datos-con-python.html#cb490-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-83"><a href="análisis-de-datos-con-python.html#cb490-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Ojo que le puedo indicar los ejes</span></span>
<span id="cb490-84"><a href="análisis-de-datos-con-python.html#cb490-84" aria-hidden="true" tabindex="-1"></a>np_mat.<span class="bu">sum</span>(axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb490-85"><a href="análisis-de-datos-con-python.html#cb490-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-86"><a href="análisis-de-datos-con-python.html#cb490-86" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> np.random.random((<span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb490-87"><a href="análisis-de-datos-con-python.html#cb490-87" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(M)</span>
<span id="cb490-88"><a href="análisis-de-datos-con-python.html#cb490-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-89"><a href="análisis-de-datos-con-python.html#cb490-89" aria-hidden="true" tabindex="-1"></a>M.<span class="bu">sum</span>()</span>
<span id="cb490-90"><a href="análisis-de-datos-con-python.html#cb490-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-91"><a href="análisis-de-datos-con-python.html#cb490-91" aria-hidden="true" tabindex="-1"></a>M.<span class="bu">min</span>(axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb490-92"><a href="análisis-de-datos-con-python.html#cb490-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-93"><a href="análisis-de-datos-con-python.html#cb490-93" aria-hidden="true" tabindex="-1"></a>M.<span class="bu">max</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb490-94"><a href="análisis-de-datos-con-python.html#cb490-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-95"><a href="análisis-de-datos-con-python.html#cb490-95" aria-hidden="true" tabindex="-1"></a>np.argmin(M)</span>
<span id="cb490-96"><a href="análisis-de-datos-con-python.html#cb490-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-97"><a href="análisis-de-datos-con-python.html#cb490-97" aria-hidden="true" tabindex="-1"></a>np.percentile(M, <span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="comparativos-en-arreglos" class="section level4 hasAnchor" number="4.2.1.11">
<h4><span class="header-section-number">4.2.1.11</span> Comparativos en arreglos<a href="análisis-de-datos-con-python.html#comparativos-en-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb491"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb491-1"><a href="análisis-de-datos-con-python.html#cb491-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">==</span> b</span>
<span id="cb491-2"><a href="análisis-de-datos-con-python.html#cb491-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb491-3"><a href="análisis-de-datos-con-python.html#cb491-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">&lt;</span> <span class="dv">2</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.2.1:</b></p>
<ol style="list-style-type: decimal">
<li><p>Genere una lista llamada <code>ejercicio1</code> que contenga cuatro listas. La primera debe tener los números (180, 78.4, 15, 18), la segunda (215, 102.7, 17, 19), la tercera (210, 98.5, 18, 20) y la cuarta (188, 75.2, 22, 21).</p></li>
<li><p>Importe el paquete <code>numpy</code> como <code>np</code>. Transfore <code>ejercicio1</code> en un arreglo llamado np_ejercicio1. Finalmente, imprima el tipo de arreglo y el tamaño de este (<em>shape</em>.)</p></li>
<li><p>Cree un arreglo que contenga unicamente la segunda columna de <code>ejercicio1</code>. Llame a este arreglo <code>segunda columna</code>. Haga el mismo procedimiento con la primera fila.</p></li>
<li><p>Múltiplique la segunda columna por la primera fila. Llame a este arreglo resultado.</p></li>
<li><p>Cree un mensaje que le muestre el promedio, la mediana y la desviación estadar de la tercera fila del arreglo <code>ejercicio1</code>.</p></li>
</ol>
</div>
</div>
</div>
<div id="matplotlib" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Matplotlib<a href="análisis-de-datos-con-python.html#matplotlib" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Librería de Python para visualizar datos.</li>
<li>Importante para explorar datos y para comunicar efectivamente el análisis de datos.</li>
</ul>
<div id="visualizaciones-básicas" class="section level4 hasAnchor" number="4.2.2.1">
<h4><span class="header-section-number">4.2.2.1</span> Visualizaciones básicas<a href="análisis-de-datos-con-python.html#visualizaciones-básicas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="lineas" class="section level5 hasAnchor" number="4.2.2.1.1">
<h5><span class="header-section-number">4.2.2.1.1</span> Lineas<a href="análisis-de-datos-con-python.html#lineas" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb492"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb492-1"><a href="análisis-de-datos-con-python.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb492-2"><a href="análisis-de-datos-con-python.html#cb492-2" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb492-3"><a href="análisis-de-datos-con-python.html#cb492-3" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb492-4"><a href="análisis-de-datos-con-python.html#cb492-4" aria-hidden="true" tabindex="-1"></a>plt.plot(años,pib)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-496-1.png" width="672" /></p>
</div>
<div id="puntos" class="section level5 hasAnchor" number="4.2.2.1.2">
<h5><span class="header-section-number">4.2.2.1.2</span> Puntos<a href="análisis-de-datos-con-python.html#puntos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb493"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb493-1"><a href="análisis-de-datos-con-python.html#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb493-2"><a href="análisis-de-datos-con-python.html#cb493-2" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb493-3"><a href="análisis-de-datos-con-python.html#cb493-3" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb493-4"><a href="análisis-de-datos-con-python.html#cb493-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(años,pib)</span>
<span id="cb493-5"><a href="análisis-de-datos-con-python.html#cb493-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-497-3.png" width="672" /></p>
</div>
<div id="histograma-1" class="section level5 hasAnchor" number="4.2.2.1.3">
<h5><span class="header-section-number">4.2.2.1.3</span> Histograma<a href="análisis-de-datos-con-python.html#histograma-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb494"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb494-1"><a href="análisis-de-datos-con-python.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma de la distribución de la variable ingreso </span></span>
<span id="cb494-2"><a href="análisis-de-datos-con-python.html#cb494-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-3"><a href="análisis-de-datos-con-python.html#cb494-3" aria-hidden="true" tabindex="-1"></a>ingreso <span class="op">=</span> np.<span class="bu">round</span>(np.random.normal(<span class="dv">1000</span>,<span class="dv">100</span>,<span class="dv">5000</span>),<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb496"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb496-1"><a href="análisis-de-datos-con-python.html#cb496-1" aria-hidden="true" tabindex="-1"></a>plt.hist(ingreso, bins <span class="op">=</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;ingreso&#39; is not defined</code></pre>
<div class="sourceCode" id="cb498"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb498-1"><a href="análisis-de-datos-con-python.html#cb498-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb498-2"><a href="análisis-de-datos-con-python.html#cb498-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb498-3"><a href="análisis-de-datos-con-python.html#cb498-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Por defecto Python selecciona en 10 el número de bins. Muy pocos &quot;bins&quot; sobre simplifican. </span></span>
<span id="cb498-4"><a href="análisis-de-datos-con-python.html#cb498-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Muchos no permiten ver algún patrón en los datos</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-498-5.png" width="672" /></p>
</div>
<div id="barras" class="section level5 hasAnchor" number="4.2.2.1.4">
<h5><span class="header-section-number">4.2.2.1.4</span> Barras<a href="análisis-de-datos-con-python.html#barras" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb499"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb499-1"><a href="análisis-de-datos-con-python.html#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafico de barras</span></span>
<span id="cb499-2"><a href="análisis-de-datos-con-python.html#cb499-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">2</span>]</span>
<span id="cb499-3"><a href="análisis-de-datos-con-python.html#cb499-3" aria-hidden="true" tabindex="-1"></a>y<span class="op">=</span> [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>]</span>
<span id="cb499-4"><a href="análisis-de-datos-con-python.html#cb499-4" aria-hidden="true" tabindex="-1"></a>plt.bar(y,x)</span></code></pre></div>
<div class="sourceCode" id="cb500"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb500-1"><a href="análisis-de-datos-con-python.html#cb500-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb500-2"><a href="análisis-de-datos-con-python.html#cb500-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb500-3"><a href="análisis-de-datos-con-python.html#cb500-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafico de barras horizontal </span></span>
<span id="cb500-4"><a href="análisis-de-datos-con-python.html#cb500-4" aria-hidden="true" tabindex="-1"></a><span class="co">#create data for plotting</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-499-7.png" width="672" /></p>
<div class="sourceCode" id="cb501"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb501-1"><a href="análisis-de-datos-con-python.html#cb501-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">2</span>]</span>
<span id="cb501-2"><a href="análisis-de-datos-con-python.html#cb501-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>]</span>
<span id="cb501-3"><a href="análisis-de-datos-con-python.html#cb501-3" aria-hidden="true" tabindex="-1"></a>plt.barh(y,x)</span></code></pre></div>
<div class="sourceCode" id="cb502"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb502-1"><a href="análisis-de-datos-con-python.html#cb502-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-499-8.png" width="672" /></p>
</div>
</div>
<div id="personalizar-gráficos" class="section level4 hasAnchor" number="4.2.2.2">
<h4><span class="header-section-number">4.2.2.2</span> Personalizar gráficos<a href="análisis-de-datos-con-python.html#personalizar-gráficos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb503"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb503-1"><a href="análisis-de-datos-con-python.html#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar  escalas logaritmicas </span></span>
<span id="cb503-2"><a href="análisis-de-datos-con-python.html#cb503-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb503-3"><a href="análisis-de-datos-con-python.html#cb503-3" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb503-4"><a href="análisis-de-datos-con-python.html#cb503-4" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb503-5"><a href="análisis-de-datos-con-python.html#cb503-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(años,pib)</span>
<span id="cb503-6"><a href="análisis-de-datos-con-python.html#cb503-6" aria-hidden="true" tabindex="-1"></a>plt.yscale(<span class="st">&quot;log&quot;</span>) <span class="co"># Para cambiar las escalas a logaritmos</span></span>
<span id="cb503-7"><a href="análisis-de-datos-con-python.html#cb503-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb503-8"><a href="análisis-de-datos-con-python.html#cb503-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb503-9"><a href="análisis-de-datos-con-python.html#cb503-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar el tamaño</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-11.png" width="672" /></p>
<div class="sourceCode" id="cb504"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb504-1"><a href="análisis-de-datos-con-python.html#cb504-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb504-2"><a href="análisis-de-datos-con-python.html#cb504-2" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>], [<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>])</span>
<span id="cb504-3"><a href="análisis-de-datos-con-python.html#cb504-3" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb504-4"><a href="análisis-de-datos-con-python.html#cb504-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb504-5"><a href="análisis-de-datos-con-python.html#cb504-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb504-6"><a href="análisis-de-datos-con-python.html#cb504-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar simbolos</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-12.png" width="768" /></p>
<div class="sourceCode" id="cb505"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb505-1"><a href="análisis-de-datos-con-python.html#cb505-1" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>], [<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>], <span class="st">&quot;gd&quot;</span>)</span>
<span id="cb505-2"><a href="análisis-de-datos-con-python.html#cb505-2" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb505-3"><a href="análisis-de-datos-con-python.html#cb505-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb505-4"><a href="análisis-de-datos-con-python.html#cb505-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-5"><a href="análisis-de-datos-con-python.html#cb505-5" aria-hidden="true" tabindex="-1"></a><span class="co"># gd: green dot.</span></span>
<span id="cb505-6"><a href="análisis-de-datos-con-python.html#cb505-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-7"><a href="análisis-de-datos-con-python.html#cb505-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar color</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-13.png" width="768" /></p>
<div class="sourceCode" id="cb506"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb506-1"><a href="análisis-de-datos-con-python.html#cb506-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]</span>
<span id="cb506-2"><a href="análisis-de-datos-con-python.html#cb506-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>]</span>
<span id="cb506-3"><a href="análisis-de-datos-con-python.html#cb506-3" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,x2, s<span class="op">=</span><span class="dv">10</span>, color <span class="op">=</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb506-4"><a href="análisis-de-datos-con-python.html#cb506-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb506-5"><a href="análisis-de-datos-con-python.html#cb506-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb506-6"><a href="análisis-de-datos-con-python.html#cb506-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar titulos y nombres de los ejes</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-14.png" width="768" /></p>
<div class="sourceCode" id="cb507"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb507-1"><a href="análisis-de-datos-con-python.html#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb507-2"><a href="análisis-de-datos-con-python.html#cb507-2" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb507-3"><a href="análisis-de-datos-con-python.html#cb507-3" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb507-4"><a href="análisis-de-datos-con-python.html#cb507-4" aria-hidden="true" tabindex="-1"></a>plt.plot(años,pib)</span>
<span id="cb507-5"><a href="análisis-de-datos-con-python.html#cb507-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Años&quot;</span>) <span class="co"># Titulo eje x</span></span>
<span id="cb507-6"><a href="análisis-de-datos-con-python.html#cb507-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Producto interno bruto&quot;</span>) <span class="co"># Titulo eje y</span></span>
<span id="cb507-7"><a href="análisis-de-datos-con-python.html#cb507-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Evolución PIB en el tiempo&quot;</span>) <span class="co"># Titulon grafico</span></span>
<span id="cb507-8"><a href="análisis-de-datos-con-python.html#cb507-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb507-9"><a href="análisis-de-datos-con-python.html#cb507-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar los números de los ejes</span></span>
<span id="cb507-10"><a href="análisis-de-datos-con-python.html#cb507-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb507-11"><a href="análisis-de-datos-con-python.html#cb507-11" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb507-12"><a href="análisis-de-datos-con-python.html#cb507-12" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb507-13"><a href="análisis-de-datos-con-python.html#cb507-13" aria-hidden="true" tabindex="-1"></a>plt.plot(años,pib)</span>
<span id="cb507-14"><a href="análisis-de-datos-con-python.html#cb507-14" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Años&quot;</span>) <span class="co"># Titulo eje x</span></span>
<span id="cb507-15"><a href="análisis-de-datos-con-python.html#cb507-15" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Producto interno bruto&quot;</span>) <span class="co"># Titulo eje y</span></span>
<span id="cb507-16"><a href="análisis-de-datos-con-python.html#cb507-16" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Evolución PIB en el tiempo&quot;</span>) <span class="co"># Titulon grafico</span></span>
<span id="cb507-17"><a href="análisis-de-datos-con-python.html#cb507-17" aria-hidden="true" tabindex="-1"></a>plt.yticks([<span class="dv">0</span>,<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">1500</span>,<span class="dv">2000</span>]) <span class="co"># Eje y</span></span></code></pre></div>
<div class="sourceCode" id="cb508"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb508-1"><a href="análisis-de-datos-con-python.html#cb508-1" aria-hidden="true" tabindex="-1"></a>plt.xticks([<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>])<span class="co"># Eje x</span></span>
<span id="cb508-2"><a href="análisis-de-datos-con-python.html#cb508-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb508-3"><a href="análisis-de-datos-con-python.html#cb508-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Colocar una etiqueta en el eje</span></span></code></pre></div>
<div class="sourceCode" id="cb509"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb509-1"><a href="análisis-de-datos-con-python.html#cb509-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt </span>
<span id="cb509-2"><a href="análisis-de-datos-con-python.html#cb509-2" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb509-3"><a href="análisis-de-datos-con-python.html#cb509-3" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb509-4"><a href="análisis-de-datos-con-python.html#cb509-4" aria-hidden="true" tabindex="-1"></a>plt.plot(años,pib)</span>
<span id="cb509-5"><a href="análisis-de-datos-con-python.html#cb509-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Años&quot;</span>) <span class="co"># Titulo eje x</span></span>
<span id="cb509-6"><a href="análisis-de-datos-con-python.html#cb509-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Producto interno bruto&quot;</span>) <span class="co"># TItulo eje y</span></span>
<span id="cb509-7"><a href="análisis-de-datos-con-python.html#cb509-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Evolución PIB en el tiempo&quot;</span>)</span>
<span id="cb509-8"><a href="análisis-de-datos-con-python.html#cb509-8" aria-hidden="true" tabindex="-1"></a>plt.yticks([<span class="dv">0</span>,<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">1500</span>,<span class="dv">2000</span>], [<span class="dv">0</span>, <span class="st">&quot;0.5M&quot;</span>, <span class="st">&quot;1M&quot;</span>, <span class="st">&quot;1.5M&quot;</span>, <span class="st">&quot;2M&quot;</span> ])</span>
<span id="cb509-9"><a href="análisis-de-datos-con-python.html#cb509-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb509-10"><a href="análisis-de-datos-con-python.html#cb509-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar la opacidad </span></span></code></pre></div>
<div class="sourceCode" id="cb510"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb510-1"><a href="análisis-de-datos-con-python.html#cb510-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb510-2"><a href="análisis-de-datos-con-python.html#cb510-2" aria-hidden="true" tabindex="-1"></a>plt.hist(x, </span>
<span id="cb510-3"><a href="análisis-de-datos-con-python.html#cb510-3" aria-hidden="true" tabindex="-1"></a>         bins <span class="op">=</span> <span class="dv">10</span>, </span>
<span id="cb510-4"><a href="análisis-de-datos-con-python.html#cb510-4" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">&#39;blue&#39;</span>, </span>
<span id="cb510-5"><a href="análisis-de-datos-con-python.html#cb510-5" aria-hidden="true" tabindex="-1"></a>         alpha<span class="op">=</span><span class="fl">0.2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb511"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb511-1"><a href="análisis-de-datos-con-python.html#cb511-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb511-2"><a href="análisis-de-datos-con-python.html#cb511-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb511-3"><a href="análisis-de-datos-con-python.html#cb511-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Alpha: cambia la opacidad del grafico. Entre 0 y 1.</span></span>
<span id="cb511-4"><a href="análisis-de-datos-con-python.html#cb511-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb511-5"><a href="análisis-de-datos-con-python.html#cb511-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar color</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-15.png" width="768" /></p>
<div class="sourceCode" id="cb512"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb512-1"><a href="análisis-de-datos-con-python.html#cb512-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">2</span>]</span>
<span id="cb512-2"><a href="análisis-de-datos-con-python.html#cb512-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>]</span>
<span id="cb512-3"><a href="análisis-de-datos-con-python.html#cb512-3" aria-hidden="true" tabindex="-1"></a>plt.bar(y,x, color <span class="op">=</span> <span class="st">&quot;green&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb513"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb513-1"><a href="análisis-de-datos-con-python.html#cb513-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb513-2"><a href="análisis-de-datos-con-python.html#cb513-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb513-3"><a href="análisis-de-datos-con-python.html#cb513-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafico de barras horizontal y con color</span></span>
<span id="cb513-4"><a href="análisis-de-datos-con-python.html#cb513-4" aria-hidden="true" tabindex="-1"></a><span class="co">#create data for plotting</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-16.png" width="768" /></p>
<div class="sourceCode" id="cb514"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb514-1"><a href="análisis-de-datos-con-python.html#cb514-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">2</span>]</span>
<span id="cb514-2"><a href="análisis-de-datos-con-python.html#cb514-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>]</span>
<span id="cb514-3"><a href="análisis-de-datos-con-python.html#cb514-3" aria-hidden="true" tabindex="-1"></a>plt.barh(y,x, color <span class="op">=</span><span class="st">&quot;yellowgreen&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb515"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb515-1"><a href="análisis-de-datos-con-python.html#cb515-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb515-2"><a href="análisis-de-datos-con-python.html#cb515-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb515-3"><a href="análisis-de-datos-con-python.html#cb515-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar texto al grafico</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-17.png" width="768" /></p>
<div class="sourceCode" id="cb516"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb516-1"><a href="análisis-de-datos-con-python.html#cb516-1" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>], [<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>], <span class="st">&#39;rd&#39;</span>)</span>
<span id="cb516-2"><a href="análisis-de-datos-con-python.html#cb516-2" aria-hidden="true" tabindex="-1"></a>plt.axis([<span class="dv">10</span>, <span class="dv">16</span>, <span class="dv">15</span>, <span class="dv">20</span>])</span></code></pre></div>
<div class="sourceCode" id="cb517"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb517-1"><a href="análisis-de-datos-con-python.html#cb517-1" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Eje x&#39;</span>)</span>
<span id="cb517-2"><a href="análisis-de-datos-con-python.html#cb517-2" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Eje y&#39;</span>)</span>
<span id="cb517-3"><a href="análisis-de-datos-con-python.html#cb517-3" aria-hidden="true" tabindex="-1"></a>plt.text(<span class="fl">11.2</span>, <span class="fl">15.9</span>, <span class="vs">r&#39;Este es el segundo punto&#39;</span>)</span>
<span id="cb517-4"><a href="análisis-de-datos-con-python.html#cb517-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb517-5"><a href="análisis-de-datos-con-python.html#cb517-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb517-6"><a href="análisis-de-datos-con-python.html#cb517-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar una linea horizontal</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-18.png" width="768" /></p>
<div class="sourceCode" id="cb518"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb518-1"><a href="análisis-de-datos-con-python.html#cb518-1" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb518-2"><a href="análisis-de-datos-con-python.html#cb518-2" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb518-3"><a href="análisis-de-datos-con-python.html#cb518-3" aria-hidden="true" tabindex="-1"></a>plt.plot(años,pib)</span>
<span id="cb518-4"><a href="análisis-de-datos-con-python.html#cb518-4" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="dv">1200</span>, ls<span class="op">=</span><span class="st">&#39;--&#39;</span>, c<span class="op">=</span><span class="st">&#39;r&#39;</span>)</span>
<span id="cb518-5"><a href="análisis-de-datos-con-python.html#cb518-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb518-6"><a href="análisis-de-datos-con-python.html#cb518-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb518-7"><a href="análisis-de-datos-con-python.html#cb518-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar una linea vertical</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-19.png" width="768" /></p>
<div class="sourceCode" id="cb519"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb519-1"><a href="análisis-de-datos-con-python.html#cb519-1" aria-hidden="true" tabindex="-1"></a>años <span class="op">=</span> [<span class="dv">2010</span>, <span class="dv">2011</span>, <span class="dv">2012</span>, <span class="dv">2013</span>, <span class="dv">2014</span>]</span>
<span id="cb519-2"><a href="análisis-de-datos-con-python.html#cb519-2" aria-hidden="true" tabindex="-1"></a>pib  <span class="op">=</span> [<span class="dv">1000</span>, <span class="dv">1150</span>, <span class="dv">1090</span>, <span class="dv">1200</span>, <span class="dv">1500</span>]</span>
<span id="cb519-3"><a href="análisis-de-datos-con-python.html#cb519-3" aria-hidden="true" tabindex="-1"></a>plt.plot(años,pib)</span>
<span id="cb519-4"><a href="análisis-de-datos-con-python.html#cb519-4" aria-hidden="true" tabindex="-1"></a>plt.axvline(x <span class="op">=</span> <span class="dv">2011</span>, ls<span class="op">=</span><span class="st">&#39;--&#39;</span>, c<span class="op">=</span><span class="st">&#39;r&#39;</span>)</span>
<span id="cb519-5"><a href="análisis-de-datos-con-python.html#cb519-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb519-6"><a href="análisis-de-datos-con-python.html#cb519-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb519-7"><a href="análisis-de-datos-con-python.html#cb519-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar caja con nombres </span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-20.png" width="768" /></p>
<div class="sourceCode" id="cb520"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb520-1"><a href="análisis-de-datos-con-python.html#cb520-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">30</span>) <span class="co"># Devuelve números espaciados uniformemente en un intervalo especificado.</span></span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb522"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb522-1"><a href="análisis-de-datos-con-python.html#cb522-1" aria-hidden="true" tabindex="-1"></a>plt.plot(x, np.sin(x), label<span class="op">=</span><span class="st">&#39;seno&#39;</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb524"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb524-1"><a href="análisis-de-datos-con-python.html#cb524-1" aria-hidden="true" tabindex="-1"></a>plt.plot(x, np.cos(x), label<span class="op">=</span><span class="st">&#39;coseno&#39;</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb526"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb526-1"><a href="análisis-de-datos-con-python.html#cb526-1" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb526-2"><a href="análisis-de-datos-con-python.html#cb526-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb526-3"><a href="análisis-de-datos-con-python.html#cb526-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb526-4"><a href="análisis-de-datos-con-python.html#cb526-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra forma de agregar caja con nombres</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-21.png" width="768" /></p>
<div class="sourceCode" id="cb527"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb527-1"><a href="análisis-de-datos-con-python.html#cb527-1" aria-hidden="true" tabindex="-1"></a>plt.plot(x, np.sin(x))</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb529"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb529-1"><a href="análisis-de-datos-con-python.html#cb529-1" aria-hidden="true" tabindex="-1"></a>plt.plot(x, np.cos(x))</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb531"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb531-1"><a href="análisis-de-datos-con-python.html#cb531-1" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">&quot;seno&quot;</span>, <span class="st">&quot;cos&quot;</span>])</span>
<span id="cb531-2"><a href="análisis-de-datos-con-python.html#cb531-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb531-3"><a href="análisis-de-datos-con-python.html#cb531-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb531-4"><a href="análisis-de-datos-con-python.html#cb531-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar la ubicación de la leyenda</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-22.png" width="768" /></p>
<div class="sourceCode" id="cb532"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb532-1"><a href="análisis-de-datos-con-python.html#cb532-1" aria-hidden="true" tabindex="-1"></a>plt.plot(x, np.sin(x))</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb534"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb534-1"><a href="análisis-de-datos-con-python.html#cb534-1" aria-hidden="true" tabindex="-1"></a>plt.plot(x, np.cos(x))</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb536"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb536-1"><a href="análisis-de-datos-con-python.html#cb536-1" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">&quot;seno&quot;</span>, <span class="st">&quot;cos&quot;</span>], loc <span class="op">=</span> <span class="st">&quot;upper right&quot;</span>)</span>
<span id="cb536-2"><a href="análisis-de-datos-con-python.html#cb536-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb536-3"><a href="análisis-de-datos-con-python.html#cb536-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb536-4"><a href="análisis-de-datos-con-python.html#cb536-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualización más compleja con más de una leyanda</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-23.png" width="768" /></p>
<div class="sourceCode" id="cb537"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb537-1"><a href="análisis-de-datos-con-python.html#cb537-1" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> []</span>
<span id="cb537-2"><a href="análisis-de-datos-con-python.html#cb537-2" aria-hidden="true" tabindex="-1"></a>line_styles <span class="op">=</span> [<span class="st">&#39;-&#39;</span>, <span class="st">&#39;-.&#39;</span>, <span class="st">&#39;--&#39;</span>, <span class="st">&#39;:&#39;</span>]</span>
<span id="cb537-3"><a href="análisis-de-datos-con-python.html#cb537-3" aria-hidden="true" tabindex="-1"></a>line_colors <span class="op">=</span> [<span class="st">&#39;red&#39;</span>, <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;green&#39;</span>, <span class="st">&#39;black&#39;</span>]</span>
<span id="cb537-4"><a href="análisis-de-datos-con-python.html#cb537-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb539"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb539-1"><a href="análisis-de-datos-con-python.html#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</span>
<span id="cb539-2"><a href="análisis-de-datos-con-python.html#cb539-2" aria-hidden="true" tabindex="-1"></a>    line, <span class="op">=</span> plt.plot(</span>
<span id="cb539-3"><a href="análisis-de-datos-con-python.html#cb539-3" aria-hidden="true" tabindex="-1"></a>        x, </span>
<span id="cb539-4"><a href="análisis-de-datos-con-python.html#cb539-4" aria-hidden="true" tabindex="-1"></a>        np.sin(x <span class="op">-</span> i <span class="op">*</span> np.pi <span class="op">/</span> <span class="dv">2</span>), </span>
<span id="cb539-5"><a href="análisis-de-datos-con-python.html#cb539-5" aria-hidden="true" tabindex="-1"></a>        line_styles[i], </span>
<span id="cb539-6"><a href="análisis-de-datos-con-python.html#cb539-6" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span>line_colors[i]</span>
<span id="cb539-7"><a href="análisis-de-datos-con-python.html#cb539-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb539-8"><a href="análisis-de-datos-con-python.html#cb539-8" aria-hidden="true" tabindex="-1"></a>    lines.append(line)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb541"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb541-1"><a href="análisis-de-datos-con-python.html#cb541-1" aria-hidden="true" tabindex="-1"></a>legend1 <span class="op">=</span> plt.legend(lines[:<span class="dv">2</span>], [<span class="st">&#39;part A&#39;</span>, <span class="st">&#39;part B&#39;</span>], loc<span class="op">=</span><span class="st">&#39;upper right&#39;</span>)</span>
<span id="cb541-2"><a href="análisis-de-datos-con-python.html#cb541-2" aria-hidden="true" tabindex="-1"></a>legend2 <span class="op">=</span> plt.legend(lines[<span class="dv">2</span>:], [<span class="st">&#39;part C&#39;</span>, <span class="st">&#39;part B&#39;</span>], loc<span class="op">=</span><span class="st">&#39;lower right&#39;</span>)</span>
<span id="cb541-3"><a href="análisis-de-datos-con-python.html#cb541-3" aria-hidden="true" tabindex="-1"></a>plt.gca().add_artist(legend1)</span>
<span id="cb541-4"><a href="análisis-de-datos-con-python.html#cb541-4" aria-hidden="true" tabindex="-1"></a>plt.gca().add_artist(legend2)</span>
<span id="cb541-5"><a href="análisis-de-datos-con-python.html#cb541-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb541-6"><a href="análisis-de-datos-con-python.html#cb541-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb541-7"><a href="análisis-de-datos-con-python.html#cb541-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar cuatro elemento: variable 1 y 2 con los ejes, variable 3 con color y variable 4 con tamaño- </span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-24.png" width="768" /></p>
<div class="sourceCode" id="cb542"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb542-1"><a href="análisis-de-datos-con-python.html#cb542-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.randn(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb544"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb544-1"><a href="análisis-de-datos-con-python.html#cb544-1" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.random.randn(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb546"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb546-1"><a href="análisis-de-datos-con-python.html#cb546-1" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> np.random.rand(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb548"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb548-1"><a href="análisis-de-datos-con-python.html#cb548-1" aria-hidden="true" tabindex="-1"></a>sizes <span class="op">=</span> <span class="dv">100</span> <span class="op">*</span> np.random.rand(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb550"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb550-1"><a href="análisis-de-datos-con-python.html#cb550-1" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y, c<span class="op">=</span>colors, s<span class="op">=</span>sizes, alpha<span class="op">=</span><span class="fl">0.8</span>, cmap<span class="op">=</span><span class="st">&#39;viridis&#39;</span>) <span class="co"># cmap: color maps. Otro ejemplo: plasma</span></span></code></pre></div>
<pre><code>## Error: NameError: name &#39;colors&#39; is not defined</code></pre>
<div class="sourceCode" id="cb552"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb552-1"><a href="análisis-de-datos-con-python.html#cb552-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-500-25.png" width="768" /></p>
<p>Más colores en: <a href="https://matplotlib.org/3.5.0/tutorials/colors/colormaps.html" class="uri">https://matplotlib.org/3.5.0/tutorials/colors/colormaps.html</a></p>
<div class="sourceCode" id="cb553"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb553-1"><a href="análisis-de-datos-con-python.html#cb553-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar barra de colores</span></span>
<span id="cb553-2"><a href="análisis-de-datos-con-python.html#cb553-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar cuatro elemento: variable 1 y 2 con los ejes, variable 3 con color y variable 4 con tamaño- </span></span>
<span id="cb553-3"><a href="análisis-de-datos-con-python.html#cb553-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.randn(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb555"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb555-1"><a href="análisis-de-datos-con-python.html#cb555-1" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.random.randn(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb557"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb557-1"><a href="análisis-de-datos-con-python.html#cb557-1" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> np.random.rand(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb559"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb559-1"><a href="análisis-de-datos-con-python.html#cb559-1" aria-hidden="true" tabindex="-1"></a>sizes <span class="op">=</span> <span class="dv">100</span> <span class="op">*</span> np.random.rand(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb561"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb561-1"><a href="análisis-de-datos-con-python.html#cb561-1" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y, c<span class="op">=</span>colors, s<span class="op">=</span>sizes, alpha<span class="op">=</span><span class="fl">0.8</span>, cmap<span class="op">=</span><span class="st">&#39;viridis&#39;</span>) <span class="co"># cmap: color maps. Otro ejemplo: plasma</span></span></code></pre></div>
<pre><code>## Error: NameError: name &#39;colors&#39; is not defined</code></pre>
<div class="sourceCode" id="cb563"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb563-1"><a href="análisis-de-datos-con-python.html#cb563-1" aria-hidden="true" tabindex="-1"></a>plt.colorbar(orientation <span class="op">=</span> <span class="st">&quot;horizontal&quot;</span>)</span></code></pre></div>
<pre><code>## Error: RuntimeError: No mappable was found to use for colorbar creation. First define a mappable such as an image (with imshow) or a contour set (with contourf).</code></pre>
<div class="sourceCode" id="cb565"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb565-1"><a href="análisis-de-datos-con-python.html#cb565-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-501-41.png" width="768" /></p>
<p>Para ver más opciones de la librería: <a href="https://matplotlib.org/3.5.0/api/" class="uri">https://matplotlib.org/3.5.0/api/</a></p>
<div class="sourceCode" id="cb566"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb566-1"><a href="análisis-de-datos-con-python.html#cb566-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb568"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb568-1"><a href="análisis-de-datos-con-python.html#cb568-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb568-2"><a href="análisis-de-datos-con-python.html#cb568-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb568-3"><a href="análisis-de-datos-con-python.html#cb568-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar tres histogramas en un grafico</span></span></code></pre></div>
<div class="sourceCode" id="cb569"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb569-1"><a href="análisis-de-datos-con-python.html#cb569-1" aria-hidden="true" tabindex="-1"></a>h1 <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="fl">0.8</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb571"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb571-1"><a href="análisis-de-datos-con-python.html#cb571-1" aria-hidden="true" tabindex="-1"></a>h2 <span class="op">=</span> np.random.normal(<span class="op">-</span><span class="dv">3</span>, <span class="fl">1.2</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb573"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb573-1"><a href="análisis-de-datos-con-python.html#cb573-1" aria-hidden="true" tabindex="-1"></a>h3 <span class="op">=</span> np.random.normal(<span class="dv">4</span>, <span class="fl">0.5</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb575"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb575-1"><a href="análisis-de-datos-con-python.html#cb575-1" aria-hidden="true" tabindex="-1"></a>plt.hist(h1, bins<span class="op">=</span><span class="dv">40</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;h1&#39; is not defined</code></pre>
<div class="sourceCode" id="cb577"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb577-1"><a href="análisis-de-datos-con-python.html#cb577-1" aria-hidden="true" tabindex="-1"></a>plt.hist(h2, bins<span class="op">=</span><span class="dv">40</span>, alpha<span class="op">=</span><span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;h2&#39; is not defined</code></pre>
<div class="sourceCode" id="cb579"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb579-1"><a href="análisis-de-datos-con-python.html#cb579-1" aria-hidden="true" tabindex="-1"></a>plt.hist(h3, bins<span class="op">=</span><span class="dv">40</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;h3&#39; is not defined</code></pre>
<div class="sourceCode" id="cb581"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb581-1"><a href="análisis-de-datos-con-python.html#cb581-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb581-2"><a href="análisis-de-datos-con-python.html#cb581-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb581-3"><a href="análisis-de-datos-con-python.html#cb581-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar la opacidad del grafico</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-502-43.png" width="768" /></p>
<div class="sourceCode" id="cb582"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb582-1"><a href="análisis-de-datos-con-python.html#cb582-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">10</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">2</span>,<span class="dv">1</span>]</span>
<span id="cb582-2"><a href="análisis-de-datos-con-python.html#cb582-2" aria-hidden="true" tabindex="-1"></a><span class="co">#plot for a histogram</span></span>
<span id="cb582-3"><a href="análisis-de-datos-con-python.html#cb582-3" aria-hidden="true" tabindex="-1"></a>plt.hist(x, bins <span class="op">=</span> <span class="dv">10</span>, color<span class="op">=</span><span class="st">&#39;blue&#39;</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span></code></pre></div>
<div class="sourceCode" id="cb583"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb583-1"><a href="análisis-de-datos-con-python.html#cb583-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb583-2"><a href="análisis-de-datos-con-python.html#cb583-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb583-3"><a href="análisis-de-datos-con-python.html#cb583-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Alpha: cambia la opacidad del grafico. Entre 0 y 1.</span></span>
<span id="cb583-4"><a href="análisis-de-datos-con-python.html#cb583-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb583-5"><a href="análisis-de-datos-con-python.html#cb583-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar graficos, combinarlos, pero uno despues del otro</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-502-44.png" width="768" /></p>
<div class="sourceCode" id="cb584"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb584-1"><a href="análisis-de-datos-con-python.html#cb584-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure() <span class="co"># Genero un espacio para la figura</span></span>
<span id="cb584-2"><a href="análisis-de-datos-con-python.html#cb584-2" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_axes([<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>, <span class="fl">0.4</span>], ylim<span class="op">=</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb584-3"><a href="análisis-de-datos-con-python.html#cb584-3" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> fig.add_axes([<span class="fl">0.1</span>, <span class="fl">0.0</span>, <span class="fl">0.8</span>, <span class="fl">0.4</span>], ylim<span class="op">=</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb584-4"><a href="análisis-de-datos-con-python.html#cb584-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb586"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb586-1"><a href="análisis-de-datos-con-python.html#cb586-1" aria-hidden="true" tabindex="-1"></a>ax1.plot(np.sin(x))</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb588"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb588-1"><a href="análisis-de-datos-con-python.html#cb588-1" aria-hidden="true" tabindex="-1"></a>ax2.plot(np.cos(x))</span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb590"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb590-1"><a href="análisis-de-datos-con-python.html#cb590-1" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb590-2"><a href="análisis-de-datos-con-python.html#cb590-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb590-3"><a href="análisis-de-datos-con-python.html#cb590-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate normal distributed sample points in 2-D</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-502-45.png" width="672" /></p>
<div class="sourceCode" id="cb591"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb591-1"><a href="análisis-de-datos-con-python.html#cb591-1" aria-hidden="true" tabindex="-1"></a>x, y <span class="op">=</span> np.random.multivariate_normal([<span class="dv">0</span>, <span class="dv">0</span>], [[<span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">2</span>]], <span class="dv">3000</span>).T</span>
<span id="cb591-2"><a href="análisis-de-datos-con-python.html#cb591-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Define subplot styles</span></span></code></pre></div>
<pre><code>## Error: NameError: name &#39;np&#39; is not defined</code></pre>
<div class="sourceCode" id="cb593"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb593-1"><a href="análisis-de-datos-con-python.html#cb593-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</span>
<span id="cb593-2"><a href="análisis-de-datos-con-python.html#cb593-2" aria-hidden="true" tabindex="-1"></a>grid <span class="op">=</span> plt.GridSpec(<span class="dv">4</span>, <span class="dv">4</span>, hspace<span class="op">=</span><span class="fl">0.2</span>, wspace<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb593-3"><a href="análisis-de-datos-con-python.html#cb593-3" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(grid[:<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:])</span>
<span id="cb593-4"><a href="análisis-de-datos-con-python.html#cb593-4" aria-hidden="true" tabindex="-1"></a>ax_x <span class="op">=</span> fig.add_subplot(grid[<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>:])</span>
<span id="cb593-5"><a href="análisis-de-datos-con-python.html#cb593-5" aria-hidden="true" tabindex="-1"></a>ax_y <span class="op">=</span> fig.add_subplot(grid[:<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>])</span>
<span id="cb593-6"><a href="análisis-de-datos-con-python.html#cb593-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data to subplots</span></span>
<span id="cb593-7"><a href="análisis-de-datos-con-python.html#cb593-7" aria-hidden="true" tabindex="-1"></a>ax.scatter(x, y, s<span class="op">=</span><span class="dv">3</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span></code></pre></div>
<pre><code>## Error: ValueError: x and y must be the same size</code></pre>
<div class="sourceCode" id="cb595"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb595-1"><a href="análisis-de-datos-con-python.html#cb595-1" aria-hidden="true" tabindex="-1"></a>ax_x.hist(x, <span class="dv">40</span>, orientation<span class="op">=</span><span class="st">&#39;vertical&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb596"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb596-1"><a href="análisis-de-datos-con-python.html#cb596-1" aria-hidden="true" tabindex="-1"></a>ax_y.hist(y, <span class="dv">40</span>, orientation<span class="op">=</span><span class="st">&#39;horizontal&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb597"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb597-1"><a href="análisis-de-datos-con-python.html#cb597-1" aria-hidden="true" tabindex="-1"></a>ax_x.invert_yaxis()</span>
<span id="cb597-2"><a href="análisis-de-datos-con-python.html#cb597-2" aria-hidden="true" tabindex="-1"></a>ax_y.invert_xaxis()</span>
<span id="cb597-3"><a href="análisis-de-datos-con-python.html#cb597-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-502-46.png" width="960" /></p>
</div>
<div id="ejemplo-de-generación-de-visualizaciones" class="section level4 hasAnchor" number="4.2.2.3">
<h4><span class="header-section-number">4.2.2.3</span> Ejemplo de generación de visualizaciones<a href="análisis-de-datos-con-python.html#ejemplo-de-generación-de-visualizaciones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb598"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb598-1"><a href="análisis-de-datos-con-python.html#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preambulo</span></span>
<span id="cb598-2"><a href="análisis-de-datos-con-python.html#cb598-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb598-3"><a href="análisis-de-datos-con-python.html#cb598-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd                    <span class="co"># datos</span></span>
<span id="cb598-4"><a href="análisis-de-datos-con-python.html#cb598-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl               <span class="co"># graficos</span></span>
<span id="cb598-5"><a href="análisis-de-datos-con-python.html#cb598-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt                  <span class="co"># fechas</span></span>
<span id="cb598-6"><a href="análisis-de-datos-con-python.html#cb598-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np                     <span class="co"># arreglos</span></span>
<span id="cb598-7"><a href="análisis-de-datos-con-python.html#cb598-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb598-8"><a href="análisis-de-datos-con-python.html#cb598-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequear todo</span></span>
<span id="cb598-9"><a href="análisis-de-datos-con-python.html#cb598-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pandas version: &#39;</span>, pd.__version__)</span>
<span id="cb598-10"><a href="análisis-de-datos-con-python.html#cb598-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Matplotlib version: &#39;</span>, mpl.__version__)</span>
<span id="cb598-11"><a href="análisis-de-datos-con-python.html#cb598-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Today: &#39;</span>, dt.date.today())</span>
<span id="cb598-12"><a href="análisis-de-datos-con-python.html#cb598-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb598-13"><a href="análisis-de-datos-con-python.html#cb598-13" aria-hidden="true" tabindex="-1"></a><span class="co"># PIB y consumo USA</span></span>
<span id="cb598-14"><a href="análisis-de-datos-con-python.html#cb598-14" aria-hidden="true" tabindex="-1"></a>gdp  <span class="op">=</span> [<span class="fl">13271.1</span>, <span class="fl">13773.5</span>, <span class="fl">14234.2</span>, <span class="fl">14613.8</span>, <span class="fl">14873.7</span>, <span class="fl">14830.4</span>, <span class="fl">14418.7</span>,</span>
<span id="cb598-15"><a href="análisis-de-datos-con-python.html#cb598-15" aria-hidden="true" tabindex="-1"></a>        <span class="fl">14783.8</span>, <span class="fl">15020.6</span>, <span class="fl">15369.2</span>, <span class="fl">15710.3</span>]</span>
<span id="cb598-16"><a href="análisis-de-datos-con-python.html#cb598-16" aria-hidden="true" tabindex="-1"></a>pce  <span class="op">=</span> [<span class="fl">8867.6</span>, <span class="fl">9208.2</span>, <span class="fl">9531.8</span>, <span class="fl">9821.7</span>, <span class="fl">10041.6</span>, <span class="fl">10007.2</span>, <span class="fl">9847.0</span>, <span class="fl">10036.3</span>,</span>
<span id="cb598-17"><a href="análisis-de-datos-con-python.html#cb598-17" aria-hidden="true" tabindex="-1"></a>        <span class="fl">10263.5</span>, <span class="fl">10449.7</span>, <span class="fl">10699.7</span>]</span>
<span id="cb598-18"><a href="análisis-de-datos-con-python.html#cb598-18" aria-hidden="true" tabindex="-1"></a>year <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">2003</span>,<span class="dv">2014</span>))        <span class="co"># use range for years 2003-2013 </span></span>
<span id="cb598-19"><a href="análisis-de-datos-con-python.html#cb598-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb598-20"><a href="análisis-de-datos-con-python.html#cb598-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos data frame</span></span>
<span id="cb598-21"><a href="análisis-de-datos-con-python.html#cb598-21" aria-hidden="true" tabindex="-1"></a>us <span class="op">=</span> pd.DataFrame({<span class="st">&#39;gdp&#39;</span>: gdp, <span class="st">&#39;pce&#39;</span>: pce}, index<span class="op">=</span>year) </span>
<span id="cb598-22"><a href="análisis-de-datos-con-python.html#cb598-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(us.head(<span class="dv">3</span>))</span>
<span id="cb598-23"><a href="análisis-de-datos-con-python.html#cb598-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb598-24"><a href="análisis-de-datos-con-python.html#cb598-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Pib percapita (World Bank data, 2013, thousands of USD) </span></span>
<span id="cb598-25"><a href="análisis-de-datos-con-python.html#cb598-25" aria-hidden="true" tabindex="-1"></a>code    <span class="op">=</span> [<span class="st">&#39;USA&#39;</span>, <span class="st">&#39;FRA&#39;</span>, <span class="st">&#39;JPN&#39;</span>, <span class="st">&#39;CHN&#39;</span>, <span class="st">&#39;IND&#39;</span>, <span class="st">&#39;BRA&#39;</span>, <span class="st">&#39;MEX&#39;</span>]</span>
<span id="cb598-26"><a href="análisis-de-datos-con-python.html#cb598-26" aria-hidden="true" tabindex="-1"></a>country <span class="op">=</span> [<span class="st">&#39;United States&#39;</span>, <span class="st">&#39;France&#39;</span>, <span class="st">&#39;Japan&#39;</span>, <span class="st">&#39;China&#39;</span>, <span class="st">&#39;India&#39;</span>,</span>
<span id="cb598-27"><a href="análisis-de-datos-con-python.html#cb598-27" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;Brazil&#39;</span>, <span class="st">&#39;Mexico&#39;</span>]</span>
<span id="cb598-28"><a href="análisis-de-datos-con-python.html#cb598-28" aria-hidden="true" tabindex="-1"></a>gdppc   <span class="op">=</span> [<span class="fl">53.1</span>, <span class="fl">36.9</span>, <span class="fl">36.3</span>, <span class="fl">11.9</span>, <span class="fl">5.4</span>, <span class="fl">15.0</span>, <span class="fl">16.5</span>]</span>
<span id="cb598-29"><a href="análisis-de-datos-con-python.html#cb598-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb598-30"><a href="análisis-de-datos-con-python.html#cb598-30" aria-hidden="true" tabindex="-1"></a>wbdf <span class="op">=</span> pd.DataFrame({<span class="st">&#39;gdppc&#39;</span>: gdppc, <span class="st">&#39;country&#39;</span>: country}, index<span class="op">=</span>code)</span>
<span id="cb598-31"><a href="análisis-de-datos-con-python.html#cb598-31" aria-hidden="true" tabindex="-1"></a>wbdf</span></code></pre></div>
<p><strong>Método 1: Aplicar plot()</strong></p>
<div class="sourceCode" id="cb599"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb599-1"><a href="análisis-de-datos-con-python.html#cb599-1" aria-hidden="true" tabindex="-1"></a>us</span>
<span id="cb599-2"><a href="análisis-de-datos-con-python.html#cb599-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb599-3"><a href="análisis-de-datos-con-python.html#cb599-3" aria-hidden="true" tabindex="-1"></a>us.plot()</span>
<span id="cb599-4"><a href="análisis-de-datos-con-python.html#cb599-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb599-5"><a href="análisis-de-datos-con-python.html#cb599-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Solo pib</span></span>
<span id="cb599-6"><a href="análisis-de-datos-con-python.html#cb599-6" aria-hidden="true" tabindex="-1"></a>us[<span class="st">&#39;gdp&#39;</span>].plot()</span>
<span id="cb599-7"><a href="análisis-de-datos-con-python.html#cb599-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb599-8"><a href="análisis-de-datos-con-python.html#cb599-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ahora en barras</span></span>
<span id="cb599-9"><a href="análisis-de-datos-con-python.html#cb599-9" aria-hidden="true" tabindex="-1"></a>us.plot(kind<span class="op">=</span><span class="st">&#39;bar&#39;</span>)</span>
<span id="cb599-10"><a href="análisis-de-datos-con-python.html#cb599-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb599-11"><a href="análisis-de-datos-con-python.html#cb599-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Comp puntos </span></span>
<span id="cb599-12"><a href="análisis-de-datos-con-python.html#cb599-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Orden importa </span></span>
<span id="cb599-13"><a href="análisis-de-datos-con-python.html#cb599-13" aria-hidden="true" tabindex="-1"></a>us.plot.scatter(<span class="st">&#39;pce&#39;</span>, <span class="st">&#39;gdp&#39;</span>)</span></code></pre></div>
<p><strong>Método 2: Aplicar la función plot(x,y)</strong></p>
<div class="sourceCode" id="cb600"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb600-1"><a href="análisis-de-datos-con-python.html#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import pyplot module of Matplotlib </span></span>
<span id="cb600-2"><a href="análisis-de-datos-con-python.html#cb600-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb600-3"><a href="análisis-de-datos-con-python.html#cb600-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-4"><a href="análisis-de-datos-con-python.html#cb600-4" aria-hidden="true" tabindex="-1"></a>us</span>
<span id="cb600-5"><a href="análisis-de-datos-con-python.html#cb600-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-6"><a href="análisis-de-datos-con-python.html#cb600-6" aria-hidden="true" tabindex="-1"></a>us.index</span>
<span id="cb600-7"><a href="análisis-de-datos-con-python.html#cb600-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-8"><a href="análisis-de-datos-con-python.html#cb600-8" aria-hidden="true" tabindex="-1"></a>plt.plot(us.index, us[<span class="st">&#39;pce&#39;</span>])</span>
<span id="cb600-9"><a href="análisis-de-datos-con-python.html#cb600-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-10"><a href="análisis-de-datos-con-python.html#cb600-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Dos lineas juntas </span></span>
<span id="cb600-11"><a href="análisis-de-datos-con-python.html#cb600-11" aria-hidden="true" tabindex="-1"></a>plt.plot(us.index, us[<span class="st">&#39;gdp&#39;</span>])</span>
<span id="cb600-12"><a href="análisis-de-datos-con-python.html#cb600-12" aria-hidden="true" tabindex="-1"></a>plt.plot(us.index, us[<span class="st">&#39;pce&#39;</span>])</span>
<span id="cb600-13"><a href="análisis-de-datos-con-python.html#cb600-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-14"><a href="análisis-de-datos-con-python.html#cb600-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten como python agrega</span></span>
<span id="cb600-15"><a href="análisis-de-datos-con-python.html#cb600-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-16"><a href="análisis-de-datos-con-python.html#cb600-16" aria-hidden="true" tabindex="-1"></a>us</span>
<span id="cb600-17"><a href="análisis-de-datos-con-python.html#cb600-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-18"><a href="análisis-de-datos-con-python.html#cb600-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafico de barras </span></span>
<span id="cb600-19"><a href="análisis-de-datos-con-python.html#cb600-19" aria-hidden="true" tabindex="-1"></a>plt.barh(us.index, us[<span class="st">&#39;gdp&#39;</span>], align <span class="op">=</span> <span class="st">&#39;center&#39;</span>)</span>
<span id="cb600-20"><a href="análisis-de-datos-con-python.html#cb600-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-21"><a href="análisis-de-datos-con-python.html#cb600-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos nuevos elementos </span></span>
<span id="cb600-22"><a href="análisis-de-datos-con-python.html#cb600-22" aria-hidden="true" tabindex="-1"></a>plt.plot(us.index, us[<span class="st">&#39;gdp&#39;</span>]) </span>
<span id="cb600-23"><a href="análisis-de-datos-con-python.html#cb600-23" aria-hidden="true" tabindex="-1"></a>plt.plot(us.index, us[<span class="st">&#39;pce&#39;</span>]) </span>
<span id="cb600-24"><a href="análisis-de-datos-con-python.html#cb600-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb600-25"><a href="análisis-de-datos-con-python.html#cb600-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;US GDP&#39;</span>, fontsize<span class="op">=</span><span class="dv">12</span>, loc<span class="op">=</span><span class="st">&#39;left&#39;</span>) <span class="co"># Títutlo</span></span>
<span id="cb600-26"><a href="análisis-de-datos-con-python.html#cb600-26" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Billions of 2009 USD&#39;</span>)           <span class="co"># Eje y</span></span>
<span id="cb600-27"><a href="análisis-de-datos-con-python.html#cb600-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Years&quot;</span>)</span>
<span id="cb600-28"><a href="análisis-de-datos-con-python.html#cb600-28" aria-hidden="true" tabindex="-1"></a>plt.xlim(<span class="fl">2002.5</span>, <span class="fl">2013.5</span>)                     <span class="co"># Limites eje x</span></span>
<span id="cb600-29"><a href="análisis-de-datos-con-python.html#cb600-29" aria-hidden="true" tabindex="-1"></a>plt.tick_params(labelcolor<span class="op">=</span><span class="st">&#39;gray&#39;</span>)            <span class="co"># Colores</span></span>
<span id="cb600-30"><a href="análisis-de-datos-con-python.html#cb600-30" aria-hidden="true" tabindex="-1"></a>plt.legend([<span class="st">&#39;GDP&#39;</span>, <span class="st">&#39;Consumption&#39;</span>])           <span class="co"># Nombres variables </span></span>
<span id="cb600-31"><a href="análisis-de-datos-con-python.html#cb600-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p><strong>Método 3: Crear una figura vacía y aplicar metodos</strong></p>
<div class="sourceCode" id="cb601"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb601-1"><a href="análisis-de-datos-con-python.html#cb601-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos figura vacía</span></span>
<span id="cb601-2"><a href="análisis-de-datos-con-python.html#cb601-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb601-3"><a href="análisis-de-datos-con-python.html#cb601-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb601-4"><a href="análisis-de-datos-con-python.html#cb601-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos con más cosas </span></span>
<span id="cb601-5"><a href="análisis-de-datos-con-python.html#cb601-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb601-6"><a href="análisis-de-datos-con-python.html#cb601-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb601-7"><a href="análisis-de-datos-con-python.html#cb601-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos cosas con metodos de ax</span></span>
<span id="cb601-8"><a href="análisis-de-datos-con-python.html#cb601-8" aria-hidden="true" tabindex="-1"></a>ax.plot(us.index, us[<span class="st">&#39;gdp&#39;</span>], linewidth<span class="op">=</span><span class="dv">2</span>, color<span class="op">=</span><span class="st">&#39;magenta&#39;</span>)</span>
<span id="cb601-9"><a href="análisis-de-datos-con-python.html#cb601-9" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">&#39;US GDP&#39;</span>, fontsize<span class="op">=</span><span class="dv">14</span>, loc<span class="op">=</span><span class="st">&#39;left&#39;</span>)</span>
<span id="cb601-10"><a href="análisis-de-datos-con-python.html#cb601-10" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">&#39;Billions of USD&#39;</span>)</span>
<span id="cb601-11"><a href="análisis-de-datos-con-python.html#cb601-11" aria-hidden="true" tabindex="-1"></a>ax.set_xticks([<span class="dv">2004</span>, <span class="dv">2008</span>, <span class="dv">2012</span>])</span>
<span id="cb601-12"><a href="análisis-de-datos-con-python.html#cb601-12" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb601-13"><a href="análisis-de-datos-con-python.html#cb601-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb601-14"><a href="análisis-de-datos-con-python.html#cb601-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos la figura</span></span>
<span id="cb601-15"><a href="análisis-de-datos-con-python.html#cb601-15" aria-hidden="true" tabindex="-1"></a>fig.savefig(<span class="st">&#39;resultados</span><span class="ch">\\</span><span class="st">us_gdp.pdf&#39;</span>)</span></code></pre></div>
<p><strong>Múltiples sub-plots</strong></p>
<div class="sourceCode" id="cb602"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb602-1"><a href="análisis-de-datos-con-python.html#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos un arreglo de 2d </span></span>
<span id="cb602-2"><a href="análisis-de-datos-con-python.html#cb602-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">1</span>, sharex<span class="op">=</span><span class="va">True</span>)  </span>
<span id="cb602-3"><a href="análisis-de-datos-con-python.html#cb602-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Objeto ax tiene dimensión&#39;</span>, <span class="bu">len</span>(ax))</span>
<span id="cb602-4"><a href="análisis-de-datos-con-python.html#cb602-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-5"><a href="análisis-de-datos-con-python.html#cb602-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos contenido</span></span>
<span id="cb602-6"><a href="análisis-de-datos-con-python.html#cb602-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">1</span>, sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb602-7"><a href="análisis-de-datos-con-python.html#cb602-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-8"><a href="análisis-de-datos-con-python.html#cb602-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].plot(us.index, us[<span class="st">&#39;gdp&#39;</span>], color<span class="op">=</span><span class="st">&#39;green&#39;</span>)   <span class="co"># first plot </span></span>
<span id="cb602-9"><a href="análisis-de-datos-con-python.html#cb602-9" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].plot(us.index, us[<span class="st">&#39;pce&#39;</span>], color<span class="op">=</span><span class="st">&#39;red&#39;</span>)     <span class="co"># second plot</span></span></code></pre></div>
<ul>
<li>Otro ejemplo: combinación método 1 y método 3</li>
</ul>
<div class="sourceCode" id="cb603"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb603-1"><a href="análisis-de-datos-con-python.html#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grab the axis</span></span>
<span id="cb603-2"><a href="análisis-de-datos-con-python.html#cb603-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> us.plot()</span>
<span id="cb603-3"><a href="análisis-de-datos-con-python.html#cb603-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-4"><a href="análisis-de-datos-con-python.html#cb603-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicamos métodos</span></span>
<span id="cb603-5"><a href="análisis-de-datos-con-python.html#cb603-5" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> us.plot()  </span>
<span id="cb603-6"><a href="análisis-de-datos-con-python.html#cb603-6" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">&#39;US GDP and Consumption&#39;</span>, fontsize<span class="op">=</span><span class="dv">14</span>, loc<span class="op">=</span><span class="st">&#39;left&#39;</span>)</span>
<span id="cb603-7"><a href="análisis-de-datos-con-python.html#cb603-7" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">&#39;Billions of 2013 USD&#39;</span>)</span>
<span id="cb603-8"><a href="análisis-de-datos-con-python.html#cb603-8" aria-hidden="true" tabindex="-1"></a>ax.legend(loc<span class="op">=</span><span class="st">&#39;center right&#39;</span>)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.2.1:</b> Escribir una función que pregunte al usuario o usuaria por las ventas de un rango de años y muestre por pantalla un diagrama de líneas con la evolución de las ventas.</p>
</div>
<div class="sourceCode" id="cb604"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb604-1"><a href="análisis-de-datos-con-python.html#cb604-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Respuesta: </span></span>
<span id="cb604-2"><a href="análisis-de-datos-con-python.html#cb604-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-3"><a href="análisis-de-datos-con-python.html#cb604-3" aria-hidden="true" tabindex="-1"></a>inicio <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;Introduce el año inicial: &quot;</span>))</span>
<span id="cb604-4"><a href="análisis-de-datos-con-python.html#cb604-4" aria-hidden="true" tabindex="-1"></a>fin    <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;Introduce el año final: &quot;</span>))</span>
<span id="cb604-5"><a href="análisis-de-datos-con-python.html#cb604-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-6"><a href="análisis-de-datos-con-python.html#cb604-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos un diccionario vacio donde ir guardando los datos </span></span>
<span id="cb604-7"><a href="análisis-de-datos-con-python.html#cb604-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-8"><a href="análisis-de-datos-con-python.html#cb604-8" aria-hidden="true" tabindex="-1"></a>ventas <span class="op">=</span> {}</span>
<span id="cb604-9"><a href="análisis-de-datos-con-python.html#cb604-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-10"><a href="análisis-de-datos-con-python.html#cb604-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacer una iteración </span></span>
<span id="cb604-11"><a href="análisis-de-datos-con-python.html#cb604-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-12"><a href="análisis-de-datos-con-python.html#cb604-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(inicio, fin <span class="op">+</span> <span class="dv">1</span>): </span>
<span id="cb604-13"><a href="análisis-de-datos-con-python.html#cb604-13" aria-hidden="true" tabindex="-1"></a>    ventas[i] <span class="op">=</span> <span class="bu">input</span>(<span class="st">&quot;Introduce las ventas del año: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(i))</span>
<span id="cb604-14"><a href="análisis-de-datos-con-python.html#cb604-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-15"><a href="análisis-de-datos-con-python.html#cb604-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Armamos la figura: </span></span>
<span id="cb604-16"><a href="análisis-de-datos-con-python.html#cb604-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-17"><a href="análisis-de-datos-con-python.html#cb604-17" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb604-18"><a href="análisis-de-datos-con-python.html#cb604-18" aria-hidden="true" tabindex="-1"></a>ax.plot(ventas.keys(), ventas.values())</span>
<span id="cb604-19"><a href="análisis-de-datos-con-python.html#cb604-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</div>
</div>
<div id="pandas" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Pandas<a href="análisis-de-datos-con-python.html#pandas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Esta librería nos permitirá analizar data como tablas, rectangular o <strong>data frames</strong>.</p></li>
<li><p>En las que las filas y columnas se identifican con etiquetas en lugar de con simples índices enteros</p></li>
<li><p>La documentación la encuentra aquí: <a href="https://pandas.pydata.org/docs/" class="uri">https://pandas.pydata.org/docs/</a></p></li>
</ul>
<div id="sintaxis-básica-ejemplo-1" class="section level4 hasAnchor" number="4.2.3.1">
<h4><span class="header-section-number">4.2.3.1</span> Sintaxis básica: Ejemplo 1<a href="análisis-de-datos-con-python.html#sintaxis-básica-ejemplo-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb605"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb605-1"><a href="análisis-de-datos-con-python.html#cb605-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos librería pandas </span></span>
<span id="cb605-2"><a href="análisis-de-datos-con-python.html#cb605-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb605-3"><a href="análisis-de-datos-con-python.html#cb605-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-4"><a href="análisis-de-datos-con-python.html#cb605-4" aria-hidden="true" tabindex="-1"></a>columnas <span class="op">=</span> [<span class="st">&quot;ind1&quot;</span>, <span class="st">&quot;ind2&quot;</span>, <span class="st">&quot;ind3&quot;</span>]</span>
<span id="cb605-5"><a href="análisis-de-datos-con-python.html#cb605-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(columnas)</span>
<span id="cb605-6"><a href="análisis-de-datos-con-python.html#cb605-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-7"><a href="análisis-de-datos-con-python.html#cb605-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformemoslo </span></span>
<span id="cb605-8"><a href="análisis-de-datos-con-python.html#cb605-8" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(columnas)</span>
<span id="cb605-9"><a href="análisis-de-datos-con-python.html#cb605-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-10"><a href="análisis-de-datos-con-python.html#cb605-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora los datos estan en un data.frame</span></span>
<span id="cb605-11"><a href="análisis-de-datos-con-python.html#cb605-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span>
<span id="cb605-12"><a href="análisis-de-datos-con-python.html#cb605-12" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(data)</span>
<span id="cb605-13"><a href="análisis-de-datos-con-python.html#cb605-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-14"><a href="análisis-de-datos-con-python.html#cb605-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a agregar nombres y nuevas columnas con un diccionario </span></span>
<span id="cb605-15"><a href="análisis-de-datos-con-python.html#cb605-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-16"><a href="análisis-de-datos-con-python.html#cb605-16" aria-hidden="true" tabindex="-1"></a>nombres_columna <span class="op">=</span> {<span class="st">&quot;nombre&quot;</span>: columnas,</span>
<span id="cb605-17"><a href="análisis-de-datos-con-python.html#cb605-17" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;altura&quot;</span>: [<span class="fl">1.67</span>, <span class="fl">1.9</span>, <span class="fl">0.23</span>], </span>
<span id="cb605-18"><a href="análisis-de-datos-con-python.html#cb605-18" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;peso&quot;</span>: [<span class="dv">54</span>, <span class="dv">100</span>, <span class="dv">2</span>]}</span>
<span id="cb605-19"><a href="análisis-de-datos-con-python.html#cb605-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-20"><a href="análisis-de-datos-con-python.html#cb605-20" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(nombres_columna)</span>
<span id="cb605-21"><a href="análisis-de-datos-con-python.html#cb605-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span>
<span id="cb605-22"><a href="análisis-de-datos-con-python.html#cb605-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-23"><a href="análisis-de-datos-con-python.html#cb605-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos acceder a elementos </span></span>
<span id="cb605-24"><a href="análisis-de-datos-con-python.html#cb605-24" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&quot;altura&quot;</span>]</span>
<span id="cb605-25"><a href="análisis-de-datos-con-python.html#cb605-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-26"><a href="análisis-de-datos-con-python.html#cb605-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos acceder a un valor en particular, similar a las listas</span></span>
<span id="cb605-27"><a href="análisis-de-datos-con-python.html#cb605-27" aria-hidden="true" tabindex="-1"></a>seleccion_columna <span class="op">=</span> data[<span class="st">&quot;altura&quot;</span>][<span class="dv">2</span>]</span>
<span id="cb605-28"><a href="análisis-de-datos-con-python.html#cb605-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seleccion_columna)</span>
<span id="cb605-29"><a href="análisis-de-datos-con-python.html#cb605-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-30"><a href="análisis-de-datos-con-python.html#cb605-30" aria-hidden="true" tabindex="-1"></a>seleccion_filas <span class="op">=</span> data.iloc[<span class="dv">2</span>]</span>
<span id="cb605-31"><a href="análisis-de-datos-con-python.html#cb605-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-32"><a href="análisis-de-datos-con-python.html#cb605-32" aria-hidden="true" tabindex="-1"></a><span class="co">#data1.iloc?</span></span>
<span id="cb605-33"><a href="análisis-de-datos-con-python.html#cb605-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-34"><a href="análisis-de-datos-con-python.html#cb605-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seleccion_filas)</span>
<span id="cb605-35"><a href="análisis-de-datos-con-python.html#cb605-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-36"><a href="análisis-de-datos-con-python.html#cb605-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar nueva información</span></span>
<span id="cb605-37"><a href="análisis-de-datos-con-python.html#cb605-37" aria-hidden="true" tabindex="-1"></a>bmi <span class="op">=</span> []</span>
<span id="cb605-38"><a href="análisis-de-datos-con-python.html#cb605-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-39"><a href="análisis-de-datos-con-python.html#cb605-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(data)): </span>
<span id="cb605-40"><a href="análisis-de-datos-con-python.html#cb605-40" aria-hidden="true" tabindex="-1"></a>    bmi_score <span class="op">=</span> data[<span class="st">&quot;peso&quot;</span>][i]<span class="op">/</span>(data[<span class="st">&quot;altura&quot;</span>][i]<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb605-41"><a href="análisis-de-datos-con-python.html#cb605-41" aria-hidden="true" tabindex="-1"></a>    bmi.append(bmi_score)</span>
<span id="cb605-42"><a href="análisis-de-datos-con-python.html#cb605-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-43"><a href="análisis-de-datos-con-python.html#cb605-43" aria-hidden="true" tabindex="-1"></a>bmi</span>
<span id="cb605-44"><a href="análisis-de-datos-con-python.html#cb605-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-45"><a href="análisis-de-datos-con-python.html#cb605-45" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&quot;bmi&quot;</span>] <span class="op">=</span> bmi</span>
<span id="cb605-46"><a href="análisis-de-datos-con-python.html#cb605-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-47"><a href="análisis-de-datos-con-python.html#cb605-47" aria-hidden="true" tabindex="-1"></a>data</span>
<span id="cb605-48"><a href="análisis-de-datos-con-python.html#cb605-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb605-49"><a href="análisis-de-datos-con-python.html#cb605-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardemos </span></span>
<span id="cb605-50"><a href="análisis-de-datos-con-python.html#cb605-50" aria-hidden="true" tabindex="-1"></a>data.to_csv(<span class="st">&quot;datos_ejemplo1.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="sintaxis-básica-ejemplo-2" class="section level4 hasAnchor" number="4.2.3.2">
<h4><span class="header-section-number">4.2.3.2</span> Sintaxis básica: Ejemplo 2<a href="análisis-de-datos-con-python.html#sintaxis-básica-ejemplo-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb606"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb606-1"><a href="análisis-de-datos-con-python.html#cb606-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos datos que utilizaremos durante la clase</span></span>
<span id="cb606-2"><a href="análisis-de-datos-con-python.html#cb606-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> gapminder <span class="im">import</span> gapminder</span>
<span id="cb606-3"><a href="análisis-de-datos-con-python.html#cb606-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb606-4"><a href="análisis-de-datos-con-python.html#cb606-4" aria-hidden="true" tabindex="-1"></a>gapminder</span></code></pre></div>
</div>
<div id="inspeccionar-un-data-frame" class="section level4 hasAnchor" number="4.2.3.3">
<h4><span class="header-section-number">4.2.3.3</span> Inspeccionar un data frame<a href="análisis-de-datos-con-python.html#inspeccionar-un-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb607"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb607-1"><a href="análisis-de-datos-con-python.html#cb607-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> gapminder </span>
<span id="cb607-2"><a href="análisis-de-datos-con-python.html#cb607-2" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">5</span>)</span>
<span id="cb607-3"><a href="análisis-de-datos-con-python.html#cb607-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-4"><a href="análisis-de-datos-con-python.html#cb607-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar las primeras 10 filas</span></span>
<span id="cb607-5"><a href="análisis-de-datos-con-python.html#cb607-5" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">5</span>).tail(<span class="dv">2</span>)</span>
<span id="cb607-6"><a href="análisis-de-datos-con-python.html#cb607-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-7"><a href="análisis-de-datos-con-python.html#cb607-7" aria-hidden="true" tabindex="-1"></a>df.tail()</span>
<span id="cb607-8"><a href="análisis-de-datos-con-python.html#cb607-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-9"><a href="análisis-de-datos-con-python.html#cb607-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar los tipos de datos</span></span>
<span id="cb607-10"><a href="análisis-de-datos-con-python.html#cb607-10" aria-hidden="true" tabindex="-1"></a>df.dtypes</span>
<span id="cb607-11"><a href="análisis-de-datos-con-python.html#cb607-11" aria-hidden="true" tabindex="-1"></a><span class="co"># object se refiere a datos de texto.</span></span>
<span id="cb607-12"><a href="análisis-de-datos-con-python.html#cb607-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-13"><a href="análisis-de-datos-con-python.html#cb607-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar las columnas</span></span>
<span id="cb607-14"><a href="análisis-de-datos-con-python.html#cb607-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.columns)</span>
<span id="cb607-15"><a href="análisis-de-datos-con-python.html#cb607-15" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(df.columns)</span>
<span id="cb607-16"><a href="análisis-de-datos-con-python.html#cb607-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-17"><a href="análisis-de-datos-con-python.html#cb607-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar N fila- M columna</span></span>
<span id="cb607-18"><a href="análisis-de-datos-con-python.html#cb607-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.shape)</span>
<span id="cb607-19"><a href="análisis-de-datos-con-python.html#cb607-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-20"><a href="análisis-de-datos-con-python.html#cb607-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar una columna en particular</span></span>
<span id="cb607-21"><a href="análisis-de-datos-con-python.html#cb607-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 1</span></span>
<span id="cb607-22"><a href="análisis-de-datos-con-python.html#cb607-22" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;country&#39;</span>]</span>
<span id="cb607-23"><a href="análisis-de-datos-con-python.html#cb607-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-24"><a href="análisis-de-datos-con-python.html#cb607-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Todas: resumen estadistico</span></span>
<span id="cb607-25"><a href="análisis-de-datos-con-python.html#cb607-25" aria-hidden="true" tabindex="-1"></a>df.describe()</span>
<span id="cb607-26"><a href="análisis-de-datos-con-python.html#cb607-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-27"><a href="análisis-de-datos-con-python.html#cb607-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Texto</span></span>
<span id="cb607-28"><a href="análisis-de-datos-con-python.html#cb607-28" aria-hidden="true" tabindex="-1"></a>df.country.describe()</span>
<span id="cb607-29"><a href="análisis-de-datos-con-python.html#cb607-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-30"><a href="análisis-de-datos-con-python.html#cb607-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Numerica</span></span>
<span id="cb607-31"><a href="análisis-de-datos-con-python.html#cb607-31" aria-hidden="true" tabindex="-1"></a>df.lifeExp.describe()</span>
<span id="cb607-32"><a href="análisis-de-datos-con-python.html#cb607-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-33"><a href="análisis-de-datos-con-python.html#cb607-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;min:&quot;</span>, df.gdpPercap.<span class="bu">min</span>())</span>
<span id="cb607-34"><a href="análisis-de-datos-con-python.html#cb607-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;max:&quot;</span>, df.gdpPercap.<span class="bu">max</span>())</span>
<span id="cb607-35"><a href="análisis-de-datos-con-python.html#cb607-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;mean:&quot;</span>, df.gdpPercap.mean())</span>
<span id="cb607-36"><a href="análisis-de-datos-con-python.html#cb607-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;std:&quot;</span>, df.gdpPercap.std())</span>
<span id="cb607-37"><a href="análisis-de-datos-con-python.html#cb607-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;count:&quot;</span>, df.gdpPercap.count())</span></code></pre></div>
</div>
<div id="manipular" class="section level4 hasAnchor" number="4.2.3.4">
<h4><span class="header-section-number">4.2.3.4</span> Manipular<a href="análisis-de-datos-con-python.html#manipular" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Renombrar:</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb608-1"><a href="análisis-de-datos-con-python.html#cb608-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renombrar variables: diccionario + rename </span></span>
<span id="cb608-2"><a href="análisis-de-datos-con-python.html#cb608-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-3"><a href="análisis-de-datos-con-python.html#cb608-3" aria-hidden="true" tabindex="-1"></a>df.rename(columns <span class="op">=</span> {<span class="st">&#39;country&#39;</span>: <span class="st">&#39;pais&#39;</span>, <span class="st">&#39;continent&#39;</span>:<span class="st">&#39;continent&#39;</span>, </span>
<span id="cb608-4"><a href="análisis-de-datos-con-python.html#cb608-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;year&#39;</span>:<span class="st">&#39;año&#39;</span>, <span class="st">&#39;lifExp&#39;</span>:<span class="st">&#39;esperanza_vida&#39;</span>, </span>
<span id="cb608-5"><a href="análisis-de-datos-con-python.html#cb608-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;pop&#39;</span>:<span class="st">&#39;poblacion&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>:<span class="st">&#39;pib_percapita&#39;</span>})</span>
<span id="cb608-6"><a href="análisis-de-datos-con-python.html#cb608-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-7"><a href="análisis-de-datos-con-python.html#cb608-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ojo que no hemos asignado</span></span>
<span id="cb608-8"><a href="análisis-de-datos-con-python.html#cb608-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-9"><a href="análisis-de-datos-con-python.html#cb608-9" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb608-10"><a href="análisis-de-datos-con-python.html#cb608-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-11"><a href="análisis-de-datos-con-python.html#cb608-11" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.rename(columns <span class="op">=</span> {<span class="st">&#39;country&#39;</span>: <span class="st">&#39;pais&#39;</span>, <span class="st">&#39;continent&#39;</span>:<span class="st">&#39;continente&#39;</span>, </span>
<span id="cb608-12"><a href="análisis-de-datos-con-python.html#cb608-12" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;year&#39;</span>:<span class="st">&#39;año&#39;</span>, <span class="st">&#39;lifeExp&#39;</span>:<span class="st">&#39;esperanza_vida&#39;</span>, </span>
<span id="cb608-13"><a href="análisis-de-datos-con-python.html#cb608-13" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;pop&#39;</span>:<span class="st">&#39;poblacion&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>:<span class="st">&#39;pib_percapita&#39;</span>})</span>
<span id="cb608-14"><a href="análisis-de-datos-con-python.html#cb608-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-15"><a href="análisis-de-datos-con-python.html#cb608-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Recomendable generar una nueva base de datos, va dejando un registro</span></span>
<span id="cb608-16"><a href="análisis-de-datos-con-python.html#cb608-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb608-17"><a href="análisis-de-datos-con-python.html#cb608-17" aria-hidden="true" tabindex="-1"></a>df2</span></code></pre></div>
<p>Filtrar:</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb609-1"><a href="análisis-de-datos-con-python.html#cb609-1" aria-hidden="true" tabindex="-1"></a>solo_asia <span class="op">=</span> df[df[<span class="st">&quot;continent&quot;</span>] <span class="op">==</span> <span class="st">&quot;Asia&quot;</span>]</span>
<span id="cb609-2"><a href="análisis-de-datos-con-python.html#cb609-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb609-3"><a href="análisis-de-datos-con-python.html#cb609-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Lo que esta adentro es un vecto booleano</span></span>
<span id="cb609-4"><a href="análisis-de-datos-con-python.html#cb609-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;continent&quot;</span>] <span class="op">==</span> <span class="st">&quot;Asia&quot;</span></span>
<span id="cb609-5"><a href="análisis-de-datos-con-python.html#cb609-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb609-6"><a href="análisis-de-datos-con-python.html#cb609-6" aria-hidden="true" tabindex="-1"></a>df_asia <span class="op">=</span> solo_asia</span>
<span id="cb609-7"><a href="análisis-de-datos-con-python.html#cb609-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_asia)</span></code></pre></div>
<p>Reemplazar:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb610-1"><a href="análisis-de-datos-con-python.html#cb610-1" aria-hidden="true" tabindex="-1"></a>datos_remplazados <span class="op">=</span> df.replace(<span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;asia&quot;</span>)</span>
<span id="cb610-2"><a href="análisis-de-datos-con-python.html#cb610-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb610-3"><a href="análisis-de-datos-con-python.html#cb610-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(datos_remplazados)</span></code></pre></div>
<p>Remover:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb611-1"><a href="análisis-de-datos-con-python.html#cb611-1" aria-hidden="true" tabindex="-1"></a>remover_columna <span class="op">=</span> df.drop(<span class="st">&quot;pop&quot;</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb611-2"><a href="análisis-de-datos-con-python.html#cb611-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-3"><a href="análisis-de-datos-con-python.html#cb611-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(remover_columna)</span>
<span id="cb611-4"><a href="análisis-de-datos-con-python.html#cb611-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-5"><a href="análisis-de-datos-con-python.html#cb611-5" aria-hidden="true" tabindex="-1"></a>remover_dos_columnas <span class="op">=</span> df.drop([<span class="st">&quot;gdpPercap&quot;</span>, <span class="st">&quot;pop&quot;</span>], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb611-6"><a href="análisis-de-datos-con-python.html#cb611-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-7"><a href="análisis-de-datos-con-python.html#cb611-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(remover_dos_columnas)</span>
<span id="cb611-8"><a href="análisis-de-datos-con-python.html#cb611-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-9"><a href="análisis-de-datos-con-python.html#cb611-9" aria-hidden="true" tabindex="-1"></a>remover_filas <span class="op">=</span> df.iloc[<span class="dv">0</span>:<span class="dv">100</span>]</span>
<span id="cb611-10"><a href="análisis-de-datos-con-python.html#cb611-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-11"><a href="análisis-de-datos-con-python.html#cb611-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(remover_filas)</span></code></pre></div>
<p>Agregar nuevas filas:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb612-1"><a href="análisis-de-datos-con-python.html#cb612-1" aria-hidden="true" tabindex="-1"></a>nuevas_filas <span class="op">=</span> {<span class="st">&quot;country&quot;</span>: <span class="st">&quot;nuevo&quot;</span>, </span>
<span id="cb612-2"><a href="análisis-de-datos-con-python.html#cb612-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;continent&quot;</span>: <span class="st">&quot;Asia&quot;</span>, </span>
<span id="cb612-3"><a href="análisis-de-datos-con-python.html#cb612-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;year&quot;</span> : <span class="st">&quot;2022&quot;</span>, </span>
<span id="cb612-4"><a href="análisis-de-datos-con-python.html#cb612-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;gdpPercap&quot;</span> : <span class="st">&quot;100000000&quot;</span>}</span>
<span id="cb612-5"><a href="análisis-de-datos-con-python.html#cb612-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-6"><a href="análisis-de-datos-con-python.html#cb612-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb612-7"><a href="análisis-de-datos-con-python.html#cb612-7" aria-hidden="true" tabindex="-1"></a>df.append(nuevas_filas, ignore_index <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb612-8"><a href="análisis-de-datos-con-python.html#cb612-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Para agregar un diccionario es importante la úñtima opción</span></span></code></pre></div>
<p>Describir una base de datos:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb613-1"><a href="análisis-de-datos-con-python.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar un data frame: group_by </span></span>
<span id="cb613-2"><a href="análisis-de-datos-con-python.html#cb613-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-3"><a href="análisis-de-datos-con-python.html#cb613-3" aria-hidden="true" tabindex="-1"></a>df_agrupado <span class="op">=</span> df.groupby(<span class="st">&#39;year&#39;</span>)</span>
<span id="cb613-4"><a href="análisis-de-datos-con-python.html#cb613-4" aria-hidden="true" tabindex="-1"></a>df_agrupado.mean()</span>
<span id="cb613-5"><a href="análisis-de-datos-con-python.html#cb613-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-6"><a href="análisis-de-datos-con-python.html#cb613-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobre una variable en particular</span></span>
<span id="cb613-7"><a href="análisis-de-datos-con-python.html#cb613-7" aria-hidden="true" tabindex="-1"></a>df_agrupado <span class="op">=</span> df[[<span class="st">&#39;gdpPercap&#39;</span>, <span class="st">&#39;year&#39;</span>]].groupby(<span class="st">&#39;year&#39;</span>)</span>
<span id="cb613-8"><a href="análisis-de-datos-con-python.html#cb613-8" aria-hidden="true" tabindex="-1"></a>df_agrupado.mean()</span>
<span id="cb613-9"><a href="análisis-de-datos-con-python.html#cb613-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-10"><a href="análisis-de-datos-con-python.html#cb613-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos agrupar varias operaciones</span></span>
<span id="cb613-11"><a href="análisis-de-datos-con-python.html#cb613-11" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&quot;year&quot;</span>).agg({<span class="st">&quot;lifeExp&quot;</span>: np.mean, <span class="st">&quot;gdpPercap&quot;</span>: np.size})</span>
<span id="cb613-12"><a href="análisis-de-datos-con-python.html#cb613-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-13"><a href="análisis-de-datos-con-python.html#cb613-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar por mas de una variable: año y continente</span></span>
<span id="cb613-14"><a href="análisis-de-datos-con-python.html#cb613-14" aria-hidden="true" tabindex="-1"></a>df.groupby([<span class="st">&quot;year&quot;</span>, <span class="st">&quot;continent&quot;</span>]).agg({<span class="st">&quot;lifeExp&quot;</span>: np.mean, <span class="st">&quot;gdpPercap&quot;</span>: np.size})</span></code></pre></div>
</div>
</div>
</div>
<div id="herramientas-de-programación-1" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Herramientas de programación<a href="análisis-de-datos-con-python.html#herramientas-de-programación-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="controladores-de-flujo" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Controladores de flujo<a href="análisis-de-datos-con-python.html#controladores-de-flujo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Controlar los caminos de los códigos que programamos.</li>
<li>Permite sofisticar procesos de análisis de datos.</li>
<li>Veremos algunos típicos + otros que son propiamente de Python.</li>
</ul>
</div>
<div id="if-elif-else" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> if-elif-else<a href="análisis-de-datos-con-python.html#if-elif-else" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb614"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb614-1"><a href="análisis-de-datos-con-python.html#cb614-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sintaxis básica</span></span>
<span id="cb614-2"><a href="análisis-de-datos-con-python.html#cb614-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-3"><a href="análisis-de-datos-con-python.html#cb614-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="op">-</span><span class="dv">100</span></span>
<span id="cb614-4"><a href="análisis-de-datos-con-python.html#cb614-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb614-5"><a href="análisis-de-datos-con-python.html#cb614-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> x <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb614-6"><a href="análisis-de-datos-con-python.html#cb614-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x, <span class="st">&quot;es cero&quot;</span>)</span>
<span id="cb614-7"><a href="análisis-de-datos-con-python.html#cb614-7" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> x <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb614-8"><a href="análisis-de-datos-con-python.html#cb614-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x, <span class="st">&quot;es positivo&quot;</span>)</span>
<span id="cb614-9"><a href="análisis-de-datos-con-python.html#cb614-9" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> x <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb614-10"><a href="análisis-de-datos-con-python.html#cb614-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x, <span class="st">&quot;es negativo&quot;</span>)</span>
<span id="cb614-11"><a href="análisis-de-datos-con-python.html#cb614-11" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb614-12"><a href="análisis-de-datos-con-python.html#cb614-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x, <span class="st">&quot;cualquier cosa.&quot;</span>)</span></code></pre></div>
<ul>
<li><p>La operación if nos permite evaluar si se cumple una condición.</p></li>
<li><p>Por ejemplo: Iteramos sobre una lista entre (0, 10), si el valor es mayor que 5 muestra el resultado, caso contrario si es que no.</p></li>
</ul>
<div class="sourceCode" id="cb615"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb615-1"><a href="análisis-de-datos-con-python.html#cb615-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo sencillo</span></span>
<span id="cb615-2"><a href="análisis-de-datos-con-python.html#cb615-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">10</span>): <span class="co">#iteración</span></span>
<span id="cb615-3"><a href="análisis-de-datos-con-python.html#cb615-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&gt;</span> <span class="dv">5</span>: <span class="co">#condición</span></span>
<span id="cb615-4"><a href="análisis-de-datos-con-python.html#cb615-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(i) <span class="co">#operación</span></span>
<span id="cb615-5"><a href="análisis-de-datos-con-python.html#cb615-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-6"><a href="análisis-de-datos-con-python.html#cb615-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo puedo definir variables dentro</span></span>
<span id="cb615-7"><a href="análisis-de-datos-con-python.html#cb615-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-8"><a href="análisis-de-datos-con-python.html#cb615-8" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">10</span> </span>
<span id="cb615-9"><a href="análisis-de-datos-con-python.html#cb615-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-10"><a href="análisis-de-datos-con-python.html#cb615-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> a <span class="op">==</span> <span class="dv">10</span>: </span>
<span id="cb615-11"><a href="análisis-de-datos-con-python.html#cb615-11" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> a</span>
<span id="cb615-12"><a href="análisis-de-datos-con-python.html#cb615-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb615-13"><a href="análisis-de-datos-con-python.html#cb615-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-14"><a href="análisis-de-datos-con-python.html#cb615-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Otros operadores con texto</span></span>
<span id="cb615-15"><a href="análisis-de-datos-con-python.html#cb615-15" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">&#39;texto2&#39;</span></span>
<span id="cb615-16"><a href="análisis-de-datos-con-python.html#cb615-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-17"><a href="análisis-de-datos-con-python.html#cb615-17" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> a <span class="op">!=</span> <span class="st">&#39;texto&#39;</span>:</span>
<span id="cb615-18"><a href="análisis-de-datos-con-python.html#cb615-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;ok&quot;</span>)</span>
<span id="cb615-19"><a href="análisis-de-datos-con-python.html#cb615-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-20"><a href="análisis-de-datos-con-python.html#cb615-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Dentro de una lista </span></span>
<span id="cb615-21"><a href="análisis-de-datos-con-python.html#cb615-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Es importante entender el flujo de los códigos que escribamos</span></span>
<span id="cb615-22"><a href="análisis-de-datos-con-python.html#cb615-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-23"><a href="análisis-de-datos-con-python.html#cb615-23" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">0</span>, <span class="st">&#39;x&#39;</span>, <span class="dv">3</span>]</span>
<span id="cb615-24"><a href="análisis-de-datos-con-python.html#cb615-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-25"><a href="análisis-de-datos-con-python.html#cb615-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(a)): </span>
<span id="cb615-26"><a href="análisis-de-datos-con-python.html#cb615-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(a[i])</span>
<span id="cb615-27"><a href="análisis-de-datos-con-python.html#cb615-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb615-28"><a href="análisis-de-datos-con-python.html#cb615-28" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&quot;ok&quot;</span>)</span>
<span id="cb615-29"><a href="análisis-de-datos-con-python.html#cb615-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb615-30"><a href="análisis-de-datos-con-python.html#cb615-30" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">&quot;ok2&quot;</span>)</span>
<span id="cb615-31"><a href="análisis-de-datos-con-python.html#cb615-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-32"><a href="análisis-de-datos-con-python.html#cb615-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten lo importante que es la sangria</span></span>
<span id="cb615-33"><a href="análisis-de-datos-con-python.html#cb615-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-34"><a href="análisis-de-datos-con-python.html#cb615-34" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> a <span class="op">==</span> <span class="dv">10</span>: </span>
<span id="cb615-35"><a href="análisis-de-datos-con-python.html#cb615-35" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> a</span>
<span id="cb615-36"><a href="análisis-de-datos-con-python.html#cb615-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span>
<span id="cb615-37"><a href="análisis-de-datos-con-python.html#cb615-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-38"><a href="análisis-de-datos-con-python.html#cb615-38" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué ocurre si movemos el print()?</span></span></code></pre></div>
<ul>
<li><p>Como vimos en el ejemplo anterior, para poder realizar flujos de códigos que consideren varias situaciones vamos a usar if, elif y else.</p></li>
<li><p>Vamos a crear una lista A utilizando valores de una segunda lista B con valores entre 0-10.</p></li>
<li><p>Vamos a iterar sobre los valores de la lista A y realizar las siguientes operaciones:</p>
<ul>
<li><p>Si el valor está entre 0-3 guardamos ese mismo valor en B</p></li>
<li><p>Si el valor es mayor que 3 y menor que 5 lo multiplicamos por 2</p></li>
<li><p>Si el valor es igual a 5 pedir ingresar un valor con la función <code>input()</code></p></li>
</ul></li>
<li><p>Para todo el resto eleva el número al cuadrado</p></li>
</ul>
<div class="sourceCode" id="cb616"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb616-1"><a href="análisis-de-datos-con-python.html#cb616-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Cargamos numpy</span></span>
<span id="cb616-2"><a href="análisis-de-datos-con-python.html#cb616-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb616-3"><a href="análisis-de-datos-con-python.html#cb616-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-4"><a href="análisis-de-datos-con-python.html#cb616-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Creamos las listas</span></span>
<span id="cb616-5"><a href="análisis-de-datos-con-python.html#cb616-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-6"><a href="análisis-de-datos-con-python.html#cb616-6" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">11</span>, <span class="dv">1</span>)</span>
<span id="cb616-7"><a href="análisis-de-datos-con-python.html#cb616-7" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> []</span>
<span id="cb616-8"><a href="análisis-de-datos-con-python.html#cb616-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-9"><a href="análisis-de-datos-con-python.html#cb616-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Iteramos sobre A</span></span>
<span id="cb616-10"><a href="análisis-de-datos-con-python.html#cb616-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> A: </span>
<span id="cb616-11"><a href="análisis-de-datos-con-python.html#cb616-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb616-12"><a href="análisis-de-datos-con-python.html#cb616-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creamos la primera condición</span></span>
<span id="cb616-13"><a href="análisis-de-datos-con-python.html#cb616-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> i <span class="op">&lt;=</span> <span class="dv">3</span>: </span>
<span id="cb616-14"><a href="análisis-de-datos-con-python.html#cb616-14" aria-hidden="true" tabindex="-1"></a>        B.append(i)</span>
<span id="cb616-15"><a href="análisis-de-datos-con-python.html#cb616-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb616-16"><a href="análisis-de-datos-con-python.html#cb616-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Segunda condición</span></span>
<span id="cb616-17"><a href="análisis-de-datos-con-python.html#cb616-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">&gt;</span> <span class="dv">3</span> <span class="kw">and</span> i <span class="op">&lt;</span> <span class="dv">5</span>: </span>
<span id="cb616-18"><a href="análisis-de-datos-con-python.html#cb616-18" aria-hidden="true" tabindex="-1"></a>        B.append(i <span class="op">*</span> <span class="dv">2</span>)</span>
<span id="cb616-19"><a href="análisis-de-datos-con-python.html#cb616-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb616-20"><a href="análisis-de-datos-con-python.html#cb616-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Tercera condición    </span></span>
<span id="cb616-21"><a href="análisis-de-datos-con-python.html#cb616-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb616-22"><a href="análisis-de-datos-con-python.html#cb616-22" aria-hidden="true" tabindex="-1"></a>        B.append(<span class="bu">float</span>(<span class="bu">input</span>(<span class="st">&quot;Agregar un valor &quot;</span>)))</span>
<span id="cb616-23"><a href="análisis-de-datos-con-python.html#cb616-23" aria-hidden="true" tabindex="-1"></a>        B.append(<span class="bu">input</span>(<span class="st">&quot;cualquier cosa: &quot;</span>))</span>
<span id="cb616-24"><a href="análisis-de-datos-con-python.html#cb616-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb616-25"><a href="análisis-de-datos-con-python.html#cb616-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Para todo el resto</span></span>
<span id="cb616-26"><a href="análisis-de-datos-con-python.html#cb616-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>: </span>
<span id="cb616-27"><a href="análisis-de-datos-con-python.html#cb616-27" aria-hidden="true" tabindex="-1"></a>        B.append(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb616-28"><a href="análisis-de-datos-con-python.html#cb616-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb616-29"><a href="análisis-de-datos-con-python.html#cb616-29" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué ocurre de especial con el formato float()?</span></span>
<span id="cb616-30"><a href="análisis-de-datos-con-python.html#cb616-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb616-31"><a href="análisis-de-datos-con-python.html#cb616-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;A:&quot;</span>, A)</span>
<span id="cb616-32"><a href="análisis-de-datos-con-python.html#cb616-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;B:&quot;</span>, B)</span></code></pre></div>
<ul>
<li>La función input() nos va a pedir entregar un valor. Esto es útil cuando necesitamos que el usuario nos reporte algún dato.</li>
</ul>
<div class="sourceCode" id="cb617"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb617-1"><a href="análisis-de-datos-con-python.html#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="bu">input</span>()</span>
<span id="cb617-2"><a href="análisis-de-datos-con-python.html#cb617-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-3"><a href="análisis-de-datos-con-python.html#cb617-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que es un string. Tenemos que cambiarle el formato. </span></span>
<span id="cb617-4"><a href="análisis-de-datos-con-python.html#cb617-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">input</span>(<span class="st">&quot;Su edad aquí: &quot;</span>)</span>
<span id="cb617-5"><a href="análisis-de-datos-con-python.html#cb617-5" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(x)</span>
<span id="cb617-6"><a href="análisis-de-datos-con-python.html#cb617-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-7"><a href="análisis-de-datos-con-python.html#cb617-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo con múltiples condiciones </span></span>
<span id="cb617-8"><a href="análisis-de-datos-con-python.html#cb617-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-9"><a href="análisis-de-datos-con-python.html#cb617-9" aria-hidden="true" tabindex="-1"></a>llueve <span class="op">=</span> <span class="va">True</span></span>
<span id="cb617-10"><a href="análisis-de-datos-con-python.html#cb617-10" aria-hidden="true" tabindex="-1"></a>salir <span class="op">=</span> <span class="va">True</span></span>
<span id="cb617-11"><a href="análisis-de-datos-con-python.html#cb617-11" aria-hidden="true" tabindex="-1"></a>temperatura <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb617-12"><a href="análisis-de-datos-con-python.html#cb617-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-13"><a href="análisis-de-datos-con-python.html#cb617-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiples condiciones</span></span>
<span id="cb617-14"><a href="análisis-de-datos-con-python.html#cb617-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> llueve <span class="kw">and</span> salir:</span>
<span id="cb617-15"><a href="análisis-de-datos-con-python.html#cb617-15" aria-hidden="true" tabindex="-1"></a>    usar_paraguas <span class="op">=</span> <span class="va">True</span></span>
<span id="cb617-16"><a href="análisis-de-datos-con-python.html#cb617-16" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> llueve <span class="kw">and</span> <span class="kw">not</span> salir:</span>
<span id="cb617-17"><a href="análisis-de-datos-con-python.html#cb617-17" aria-hidden="true" tabindex="-1"></a>    usar_paraguas <span class="op">=</span> <span class="va">False</span></span>
<span id="cb617-18"><a href="análisis-de-datos-con-python.html#cb617-18" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> <span class="kw">not</span> llueve <span class="kw">and</span> salir <span class="kw">and</span> temperatura <span class="op">&gt;</span> <span class="dv">25</span>:</span>
<span id="cb617-19"><a href="análisis-de-datos-con-python.html#cb617-19" aria-hidden="true" tabindex="-1"></a>    usar_bloqueador <span class="op">=</span> <span class="va">True</span></span>
<span id="cb617-20"><a href="análisis-de-datos-con-python.html#cb617-20" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb617-21"><a href="análisis-de-datos-con-python.html#cb617-21" aria-hidden="true" tabindex="-1"></a>    vender_paragua <span class="op">=</span> <span class="va">True</span></span>
<span id="cb617-22"><a href="análisis-de-datos-con-python.html#cb617-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-23"><a href="análisis-de-datos-con-python.html#cb617-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que el if no sigue en caso de que una condición ya esta saldada. </span></span>
<span id="cb617-24"><a href="análisis-de-datos-con-python.html#cb617-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Paraguas:&quot;</span>, usar_paraguas)</span>
<span id="cb617-25"><a href="análisis-de-datos-con-python.html#cb617-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Bloqueador:&quot;</span>, usar_bloqueador)</span>
<span id="cb617-26"><a href="análisis-de-datos-con-python.html#cb617-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-27"><a href="análisis-de-datos-con-python.html#cb617-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Vender Paraguas:&quot;</span>, vender_paragua)</span>
<span id="cb617-28"><a href="análisis-de-datos-con-python.html#cb617-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-29"><a href="análisis-de-datos-con-python.html#cb617-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Defino variables</span></span>
<span id="cb617-30"><a href="análisis-de-datos-con-python.html#cb617-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-31"><a href="análisis-de-datos-con-python.html#cb617-31" aria-hidden="true" tabindex="-1"></a>cuarto <span class="op">=</span> <span class="st">&quot;cocina&quot;</span></span>
<span id="cb617-32"><a href="análisis-de-datos-con-python.html#cb617-32" aria-hidden="true" tabindex="-1"></a>area <span class="op">=</span> <span class="fl">10.0</span></span>
<span id="cb617-33"><a href="análisis-de-datos-con-python.html#cb617-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-34"><a href="análisis-de-datos-con-python.html#cb617-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Para habitaciones</span></span>
<span id="cb617-35"><a href="análisis-de-datos-con-python.html#cb617-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-36"><a href="análisis-de-datos-con-python.html#cb617-36" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> cuarto <span class="op">==</span> <span class="st">&quot;cocina&quot;</span> :</span>
<span id="cb617-37"><a href="análisis-de-datos-con-python.html#cb617-37" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Mira en la cocina&quot;</span>)</span>
<span id="cb617-38"><a href="análisis-de-datos-con-python.html#cb617-38" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> cuarto <span class="op">==</span> <span class="st">&quot;cuarto&quot;</span>:</span>
<span id="cb617-39"><a href="análisis-de-datos-con-python.html#cb617-39" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Mira en el cuarto&quot;</span>)</span>
<span id="cb617-40"><a href="análisis-de-datos-con-python.html#cb617-40" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> :</span>
<span id="cb617-41"><a href="análisis-de-datos-con-python.html#cb617-41" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Mira en cualquier lugar&quot;</span>)</span>
<span id="cb617-42"><a href="análisis-de-datos-con-python.html#cb617-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-43"><a href="análisis-de-datos-con-python.html#cb617-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Para areas </span></span>
<span id="cb617-44"><a href="análisis-de-datos-con-python.html#cb617-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb617-45"><a href="análisis-de-datos-con-python.html#cb617-45" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> area <span class="op">&gt;</span> <span class="dv">15</span> :</span>
<span id="cb617-46"><a href="análisis-de-datos-con-python.html#cb617-46" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Gran tamaño&quot;</span>)</span>
<span id="cb617-47"><a href="análisis-de-datos-con-python.html#cb617-47" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> area <span class="op">&gt;</span> <span class="dv">10</span> :</span>
<span id="cb617-48"><a href="análisis-de-datos-con-python.html#cb617-48" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Tamaño normal&quot;</span>)</span>
<span id="cb617-49"><a href="análisis-de-datos-con-python.html#cb617-49" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> :</span>
<span id="cb617-50"><a href="análisis-de-datos-con-python.html#cb617-50" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Bastante pequeño&quot;</span>)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.3.1:</b> Escriba un programa que tenga como resultado su nombre si la edad ingresada es multiplo de 5. Note que la edad debe ser ingresada por el mismo usuario. Si la edad no es multiplo de 5 el programa debe dar como resultado su apellido.</p>
</div>
<div class="sourceCode" id="cb618"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb618-1"><a href="análisis-de-datos-con-python.html#cb618-1" aria-hidden="true" tabindex="-1"></a>edad <span class="op">=</span> <span class="bu">int</span>(<span class="bu">input</span>(<span class="st">&quot;Diga su edad: &quot;</span>))</span>
<span id="cb618-2"><a href="análisis-de-datos-con-python.html#cb618-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> edad <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>: </span>
<span id="cb618-3"><a href="análisis-de-datos-con-python.html#cb618-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Nicolás&quot;</span>)</span>
<span id="cb618-4"><a href="análisis-de-datos-con-python.html#cb618-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>: </span>
<span id="cb618-5"><a href="análisis-de-datos-con-python.html#cb618-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Campos&quot;</span>)</span></code></pre></div>
</div>
<div id="iteradores-básicos" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Iteradores básicos<a href="análisis-de-datos-con-python.html#iteradores-básicos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="for-loop" class="section level4 hasAnchor" number="4.3.3.1">
<h4><span class="header-section-number">4.3.3.1</span> For loop<a href="análisis-de-datos-con-python.html#for-loop" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb619"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb619-1"><a href="análisis-de-datos-con-python.html#cb619-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For loops </span></span>
<span id="cb619-2"><a href="análisis-de-datos-con-python.html#cb619-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> N <span class="kw">in</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>]:</span>
<span id="cb619-3"><a href="análisis-de-datos-con-python.html#cb619-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(N)</span>
<span id="cb619-4"><a href="análisis-de-datos-con-python.html#cb619-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-5"><a href="análisis-de-datos-con-python.html#cb619-5" aria-hidden="true" tabindex="-1"></a><span class="co"># For </span></span>
<span id="cb619-6"><a href="análisis-de-datos-con-python.html#cb619-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb619-7"><a href="análisis-de-datos-con-python.html#cb619-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb619-8"><a href="análisis-de-datos-con-python.html#cb619-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb619-9"><a href="análisis-de-datos-con-python.html#cb619-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Todo en la misma linea</span></span>
<span id="cb619-10"><a href="análisis-de-datos-con-python.html#cb619-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-11"><a href="análisis-de-datos-con-python.html#cb619-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos iterar sobre una lista: iteramos en el rango de valores que tiene la lista</span></span>
<span id="cb619-12"><a href="análisis-de-datos-con-python.html#cb619-12" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>, <span class="st">&#39;a&#39;</span>, <span class="va">True</span>]</span>
<span id="cb619-13"><a href="análisis-de-datos-con-python.html#cb619-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-14"><a href="análisis-de-datos-con-python.html#cb619-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(x)):</span>
<span id="cb619-15"><a href="análisis-de-datos-con-python.html#cb619-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb619-16"><a href="análisis-de-datos-con-python.html#cb619-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-17"><a href="análisis-de-datos-con-python.html#cb619-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(x)):</span>
<span id="cb619-18"><a href="análisis-de-datos-con-python.html#cb619-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x[i], end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb619-19"><a href="análisis-de-datos-con-python.html#cb619-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-20"><a href="análisis-de-datos-con-python.html#cb619-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos iterar sobre un array</span></span>
<span id="cb619-21"><a href="análisis-de-datos-con-python.html#cb619-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb619-22"><a href="análisis-de-datos-con-python.html#cb619-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-23"><a href="análisis-de-datos-con-python.html#cb619-23" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.array([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb619-24"><a href="análisis-de-datos-con-python.html#cb619-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-25"><a href="análisis-de-datos-con-python.html#cb619-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(x)):</span>
<span id="cb619-26"><a href="análisis-de-datos-con-python.html#cb619-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i,end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb619-27"><a href="análisis-de-datos-con-python.html#cb619-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-28"><a href="análisis-de-datos-con-python.html#cb619-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos iterar sobre un string</span></span>
<span id="cb619-29"><a href="análisis-de-datos-con-python.html#cb619-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-30"><a href="análisis-de-datos-con-python.html#cb619-30" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> a <span class="kw">in</span> <span class="st">&quot;Nicolas&quot;</span> :</span>
<span id="cb619-31"><a href="análisis-de-datos-con-python.html#cb619-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(a.capitalize(), end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb619-32"><a href="análisis-de-datos-con-python.html#cb619-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-33"><a href="análisis-de-datos-con-python.html#cb619-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos iterar en una lista de listas </span></span>
<span id="cb619-34"><a href="análisis-de-datos-con-python.html#cb619-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-35"><a href="análisis-de-datos-con-python.html#cb619-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Lista de listas </span></span>
<span id="cb619-36"><a href="análisis-de-datos-con-python.html#cb619-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-37"><a href="análisis-de-datos-con-python.html#cb619-37" aria-hidden="true" tabindex="-1"></a>casa <span class="op">=</span> [[<span class="st">&quot;living&quot;</span>, <span class="fl">11.25</span>], </span>
<span id="cb619-38"><a href="análisis-de-datos-con-python.html#cb619-38" aria-hidden="true" tabindex="-1"></a>         [<span class="st">&quot;cocina&quot;</span>, <span class="fl">18.0</span>], </span>
<span id="cb619-39"><a href="análisis-de-datos-con-python.html#cb619-39" aria-hidden="true" tabindex="-1"></a>         [<span class="st">&quot;comedor&quot;</span>, <span class="fl">20.0</span>], </span>
<span id="cb619-40"><a href="análisis-de-datos-con-python.html#cb619-40" aria-hidden="true" tabindex="-1"></a>         [<span class="st">&quot;habitacion&quot;</span>, <span class="fl">10.75</span>], </span>
<span id="cb619-41"><a href="análisis-de-datos-con-python.html#cb619-41" aria-hidden="true" tabindex="-1"></a>         [<span class="st">&quot;baño&quot;</span>, <span class="fl">9.50</span>]]</span>
<span id="cb619-42"><a href="análisis-de-datos-con-python.html#cb619-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(casa)</span>
<span id="cb619-43"><a href="análisis-de-datos-con-python.html#cb619-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-44"><a href="análisis-de-datos-con-python.html#cb619-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Iteramos</span></span>
<span id="cb619-45"><a href="análisis-de-datos-con-python.html#cb619-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> casa :</span>
<span id="cb619-46"><a href="análisis-de-datos-con-python.html#cb619-46" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;La &quot;</span> <span class="op">+</span> x[<span class="dv">0</span>] <span class="op">+</span> <span class="st">&quot; es de &quot;</span> <span class="op">+</span> <span class="bu">str</span>(x[<span class="dv">1</span>]) <span class="op">+</span> <span class="st">&quot; m2&quot;</span>)</span>
<span id="cb619-47"><a href="análisis-de-datos-con-python.html#cb619-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb619-48"><a href="análisis-de-datos-con-python.html#cb619-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que el x en si mismo es una lista con dos elemenos. </span></span>
<span id="cb619-49"><a href="análisis-de-datos-con-python.html#cb619-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilizando subconjuntos de listas podemos ir llamando a los elemenos del iterador.</span></span>
<span id="cb619-50"><a href="análisis-de-datos-con-python.html#cb619-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-51"><a href="análisis-de-datos-con-python.html#cb619-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos x y y fuera de la iteración</span></span>
<span id="cb619-52"><a href="análisis-de-datos-con-python.html#cb619-52" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">0</span> </span>
<span id="cb619-53"><a href="análisis-de-datos-con-python.html#cb619-53" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb619-54"><a href="análisis-de-datos-con-python.html#cb619-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-55"><a href="análisis-de-datos-con-python.html#cb619-55" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">5</span>): </span>
<span id="cb619-56"><a href="análisis-de-datos-con-python.html#cb619-56" aria-hidden="true" tabindex="-1"></a>    z <span class="op">=</span> <span class="dv">0</span> <span class="co"># creamos z dentro de la iteración</span></span>
<span id="cb619-57"><a href="análisis-de-datos-con-python.html#cb619-57" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">+</span> i</span>
<span id="cb619-58"><a href="análisis-de-datos-con-python.html#cb619-58" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> i </span>
<span id="cb619-59"><a href="análisis-de-datos-con-python.html#cb619-59" aria-hidden="true" tabindex="-1"></a>    z <span class="op">=</span> z <span class="op">+</span> i</span>
<span id="cb619-60"><a href="análisis-de-datos-con-python.html#cb619-60" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;i:&quot;</span>, i, <span class="st">&quot;, x=&quot;</span>, x, <span class="st">&quot;, y=&quot;</span>, y, <span class="st">&quot;, z=&quot;</span>, z)</span>
<span id="cb619-61"><a href="análisis-de-datos-con-python.html#cb619-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-62"><a href="análisis-de-datos-con-python.html#cb619-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos generar objetos para ir iterando sobre ellos. Recordar: linspace (inicio, término, cantidad de elementos)</span></span>
<span id="cb619-63"><a href="análisis-de-datos-con-python.html#cb619-63" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.linspace(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">5</span>)</span>
<span id="cb619-64"><a href="análisis-de-datos-con-python.html#cb619-64" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;type de a:&quot;</span>, <span class="bu">type</span>(a))</span>
<span id="cb619-65"><a href="análisis-de-datos-con-python.html#cb619-65" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;a: &quot;</span>, a)</span>
<span id="cb619-66"><a href="análisis-de-datos-con-python.html#cb619-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb619-67"><a href="análisis-de-datos-con-python.html#cb619-67" aria-hidden="true" tabindex="-1"></a><span class="co">#arange(inicio, término, separador)</span></span>
<span id="cb619-68"><a href="análisis-de-datos-con-python.html#cb619-68" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">10</span>,<span class="dv">1</span>)</span>
<span id="cb619-69"><a href="análisis-de-datos-con-python.html#cb619-69" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;type de b:&quot;</span>, <span class="bu">type</span>(b))</span>
<span id="cb619-70"><a href="análisis-de-datos-con-python.html#cb619-70" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;b: &quot;</span>, b)</span></code></pre></div>
<ul>
<li>Veamos dos versiones alternativas de hacer el mismo for, pero anidado</li>
</ul>
<div class="sourceCode" id="cb620"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb620-1"><a href="análisis-de-datos-con-python.html#cb620-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a,b)</span>
<span id="cb620-2"><a href="análisis-de-datos-con-python.html#cb620-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-3"><a href="análisis-de-datos-con-python.html#cb620-3" aria-hidden="true" tabindex="-1"></a><span class="co"># For anidados. </span></span>
<span id="cb620-4"><a href="análisis-de-datos-con-python.html#cb620-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-5"><a href="análisis-de-datos-con-python.html#cb620-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Creamos una lista</span></span>
<span id="cb620-6"><a href="análisis-de-datos-con-python.html#cb620-6" aria-hidden="true" tabindex="-1"></a>lista1 <span class="op">=</span> []</span>
<span id="cb620-7"><a href="análisis-de-datos-con-python.html#cb620-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-8"><a href="análisis-de-datos-con-python.html#cb620-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Iteramos sobre los valoes de a y b</span></span>
<span id="cb620-9"><a href="análisis-de-datos-con-python.html#cb620-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> a: </span>
<span id="cb620-10"><a href="análisis-de-datos-con-python.html#cb620-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> b: </span>
<span id="cb620-11"><a href="análisis-de-datos-con-python.html#cb620-11" aria-hidden="true" tabindex="-1"></a>        <span class="co">#3. Anexamos una operación a la lista</span></span>
<span id="cb620-12"><a href="análisis-de-datos-con-python.html#cb620-12" aria-hidden="true" tabindex="-1"></a><span class="co">#         print((i, j), &quot;multiplicacion:&quot;, i * j)</span></span>
<span id="cb620-13"><a href="análisis-de-datos-con-python.html#cb620-13" aria-hidden="true" tabindex="-1"></a>        lista1.append(i <span class="op">*</span> j) </span>
<span id="cb620-14"><a href="análisis-de-datos-con-python.html#cb620-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista1)</span>
<span id="cb620-15"><a href="análisis-de-datos-con-python.html#cb620-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-16"><a href="análisis-de-datos-con-python.html#cb620-16" aria-hidden="true" tabindex="-1"></a><span class="co">#1. Creamos una lista 2</span></span>
<span id="cb620-17"><a href="análisis-de-datos-con-python.html#cb620-17" aria-hidden="true" tabindex="-1"></a>lista2 <span class="op">=</span> []</span>
<span id="cb620-18"><a href="análisis-de-datos-con-python.html#cb620-18" aria-hidden="true" tabindex="-1"></a><span class="co">#2. Iteramos sobre el largo de las listas a y b</span></span>
<span id="cb620-19"><a href="análisis-de-datos-con-python.html#cb620-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(a)): </span>
<span id="cb620-20"><a href="análisis-de-datos-con-python.html#cb620-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(b)): </span>
<span id="cb620-21"><a href="análisis-de-datos-con-python.html#cb620-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">#3. Anexamos una operación a la lista</span></span>
<span id="cb620-22"><a href="análisis-de-datos-con-python.html#cb620-22" aria-hidden="true" tabindex="-1"></a>        lista2.append(a[i] <span class="op">*</span> b[j]) </span>
<span id="cb620-23"><a href="análisis-de-datos-con-python.html#cb620-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista2)</span>
<span id="cb620-24"><a href="análisis-de-datos-con-python.html#cb620-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-25"><a href="análisis-de-datos-con-python.html#cb620-25" aria-hidden="true" tabindex="-1"></a><span class="co">#Podemos sumar los valores de una lista con sum()</span></span>
<span id="cb620-26"><a href="análisis-de-datos-con-python.html#cb620-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;suma de la lista:&quot;</span>, <span class="bu">sum</span>(lista2))</span>
<span id="cb620-27"><a href="análisis-de-datos-con-python.html#cb620-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-28"><a href="análisis-de-datos-con-python.html#cb620-28" aria-hidden="true" tabindex="-1"></a>lista1 <span class="op">==</span> lista2</span>
<span id="cb620-29"><a href="análisis-de-datos-con-python.html#cb620-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-30"><a href="análisis-de-datos-con-python.html#cb620-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo ingresar tuplas de forma tal de recuperar el indice y el resultado! </span></span>
<span id="cb620-31"><a href="análisis-de-datos-con-python.html#cb620-31" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="fl">1.73</span>, <span class="fl">1.68</span>, <span class="fl">1.71</span>, <span class="fl">1.89</span>]</span>
<span id="cb620-32"><a href="análisis-de-datos-con-python.html#cb620-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb620-33"><a href="análisis-de-datos-con-python.html#cb620-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, a <span class="kw">in</span> <span class="bu">enumerate</span>(lista):</span>
<span id="cb620-34"><a href="análisis-de-datos-con-python.html#cb620-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;indice &quot;</span> <span class="op">+</span> <span class="bu">str</span>(index) <span class="op">+</span> <span class="st">&quot;: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(a))</span>
<span id="cb620-35"><a href="análisis-de-datos-con-python.html#cb620-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb620-36"><a href="análisis-de-datos-con-python.html#cb620-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que utilizamos un enumerate(). </span></span>
<span id="cb620-37"><a href="análisis-de-datos-con-python.html#cb620-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Esto es un interador. </span></span>
<span id="cb620-38"><a href="análisis-de-datos-con-python.html#cb620-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Revisaremos más de estos en la siguiente sección</span></span>
<span id="cb620-39"><a href="análisis-de-datos-con-python.html#cb620-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Como pueden ver auenta nuestra posibilidades en Python</span></span>
<span id="cb620-40"><a href="análisis-de-datos-con-python.html#cb620-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Se pueden saltar en saltos de más de uno? (en tuplas?)</span></span></code></pre></div>
</div>
<div id="while-loop-1" class="section level4 hasAnchor" number="4.3.3.2">
<h4><span class="header-section-number">4.3.3.2</span> While loop<a href="análisis-de-datos-con-python.html#while-loop-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>No muy común</li>
<li>Útil para resolver problemas de optimización</li>
</ul>
<div class="sourceCode" id="cb621"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb621-1"><a href="análisis-de-datos-con-python.html#cb621-1" aria-hidden="true" tabindex="-1"></a>error <span class="op">=</span> <span class="dv">50</span> </span>
<span id="cb621-2"><a href="análisis-de-datos-con-python.html#cb621-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-3"><a href="análisis-de-datos-con-python.html#cb621-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> error <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb621-4"><a href="análisis-de-datos-con-python.html#cb621-4" aria-hidden="true" tabindex="-1"></a>    error <span class="op">=</span> error<span class="op">/</span><span class="dv">4</span></span>
<span id="cb621-5"><a href="análisis-de-datos-con-python.html#cb621-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(error)</span>
<span id="cb621-6"><a href="análisis-de-datos-con-python.html#cb621-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-7"><a href="análisis-de-datos-con-python.html#cb621-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra forma más típica de hacer la actualización </span></span>
<span id="cb621-8"><a href="análisis-de-datos-con-python.html#cb621-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-9"><a href="análisis-de-datos-con-python.html#cb621-9" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb621-10"><a href="análisis-de-datos-con-python.html#cb621-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-11"><a href="análisis-de-datos-con-python.html#cb621-11" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb621-12"><a href="análisis-de-datos-con-python.html#cb621-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb621-13"><a href="análisis-de-datos-con-python.html#cb621-13" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb621-14"><a href="análisis-de-datos-con-python.html#cb621-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-15"><a href="análisis-de-datos-con-python.html#cb621-15" aria-hidden="true" tabindex="-1"></a><span class="co"># While loop: pueden ser eternos. ¿Utilidad practica? </span></span>
<span id="cb621-16"><a href="análisis-de-datos-con-python.html#cb621-16" aria-hidden="true" tabindex="-1"></a> i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb621-17"><a href="análisis-de-datos-con-python.html#cb621-17" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span> i <span class="op">&lt;</span> <span class="dv">10</span>:</span>
<span id="cb621-18"><a href="análisis-de-datos-con-python.html#cb621-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb621-19"><a href="análisis-de-datos-con-python.html#cb621-19" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> i <span class="op">+</span>  <span class="dv">1</span></span>
<span id="cb621-20"><a href="análisis-de-datos-con-python.html#cb621-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-21"><a href="análisis-de-datos-con-python.html#cb621-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Recuerden que puedo agregar condicionales </span></span>
<span id="cb621-22"><a href="análisis-de-datos-con-python.html#cb621-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-23"><a href="análisis-de-datos-con-python.html#cb621-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Condición inicial</span></span>
<span id="cb621-24"><a href="análisis-de-datos-con-python.html#cb621-24" aria-hidden="true" tabindex="-1"></a>inicial <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb621-25"><a href="análisis-de-datos-con-python.html#cb621-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb621-26"><a href="análisis-de-datos-con-python.html#cb621-26" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> inicial <span class="op">!=</span> <span class="dv">0</span> :</span>
<span id="cb621-27"><a href="análisis-de-datos-con-python.html#cb621-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;corregir...&quot;</span>)</span>
<span id="cb621-28"><a href="análisis-de-datos-con-python.html#cb621-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> inicial <span class="op">&gt;</span> <span class="dv">0</span> :</span>
<span id="cb621-29"><a href="análisis-de-datos-con-python.html#cb621-29" aria-hidden="true" tabindex="-1"></a>        inicial <span class="op">=</span> inicial <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb621-30"><a href="análisis-de-datos-con-python.html#cb621-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb621-31"><a href="análisis-de-datos-con-python.html#cb621-31" aria-hidden="true" tabindex="-1"></a>        inicial <span class="op">=</span> inicial <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb621-32"><a href="análisis-de-datos-con-python.html#cb621-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(inicial)</span></code></pre></div>
</div>
<div id="opcionales-break-y-continue" class="section level4 hasAnchor" number="4.3.3.3">
<h4><span class="header-section-number">4.3.3.3</span> Opcionales: break y continue<a href="análisis-de-datos-con-python.html#opcionales-break-y-continue" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>break</strong>: quiebra loop</li>
<li><strong>continue</strong>: siguiente</li>
</ul>
<div class="sourceCode" id="cb622"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb622-1"><a href="análisis-de-datos-con-python.html#cb622-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se lo salta</span></span>
<span id="cb622-2"><a href="análisis-de-datos-con-python.html#cb622-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb622-3"><a href="análisis-de-datos-con-python.html#cb622-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb622-4"><a href="análisis-de-datos-con-python.html#cb622-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb622-5"><a href="análisis-de-datos-con-python.html#cb622-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(n, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb622-6"><a href="análisis-de-datos-con-python.html#cb622-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb622-7"><a href="análisis-de-datos-con-python.html#cb622-7" aria-hidden="true" tabindex="-1"></a><span class="co"># No continua si se llega a un nivel predeterminado </span></span>
<span id="cb622-8"><a href="análisis-de-datos-con-python.html#cb622-8" aria-hidden="true" tabindex="-1"></a>a, b <span class="op">=</span> <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb622-9"><a href="análisis-de-datos-con-python.html#cb622-9" aria-hidden="true" tabindex="-1"></a>amax <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb622-10"><a href="análisis-de-datos-con-python.html#cb622-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb622-11"><a href="análisis-de-datos-con-python.html#cb622-11" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> []</span>
<span id="cb622-12"><a href="análisis-de-datos-con-python.html#cb622-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb622-13"><a href="análisis-de-datos-con-python.html#cb622-13" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb622-14"><a href="análisis-de-datos-con-python.html#cb622-14" aria-hidden="true" tabindex="-1"></a>    (a, b) <span class="op">=</span> (b, a <span class="op">+</span> b)</span>
<span id="cb622-15"><a href="análisis-de-datos-con-python.html#cb622-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> a <span class="op">&gt;</span> amax:</span>
<span id="cb622-16"><a href="análisis-de-datos-con-python.html#cb622-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb622-17"><a href="análisis-de-datos-con-python.html#cb622-17" aria-hidden="true" tabindex="-1"></a>    L.append(a)</span>
<span id="cb622-18"><a href="análisis-de-datos-con-python.html#cb622-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb622-19"><a href="análisis-de-datos-con-python.html#cb622-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span></code></pre></div>
</div>
<div id="iterar-sobre-diccionarios-y-arreglos" class="section level4 hasAnchor" number="4.3.3.4">
<h4><span class="header-section-number">4.3.3.4</span> Iterar sobre diccionarios y arreglos<a href="análisis-de-datos-con-python.html#iterar-sobre-diccionarios-y-arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Hay que tener cuidado al iterar sobre estos objetos</li>
<li>Veamos dos ejemplos</li>
</ul>
<div class="sourceCode" id="cb623"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb623-1"><a href="análisis-de-datos-con-python.html#cb623-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Diccionarios </span></span>
<span id="cb623-2"><a href="análisis-de-datos-con-python.html#cb623-2" aria-hidden="true" tabindex="-1"></a>mundo <span class="op">=</span> {<span class="st">&quot;Burgos&quot;</span>: <span class="fl">30.55</span>, </span>
<span id="cb623-3"><a href="análisis-de-datos-con-python.html#cb623-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Villasana de Mena&quot;</span>: <span class="fl">2.77</span>, </span>
<span id="cb623-4"><a href="análisis-de-datos-con-python.html#cb623-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Santiago&quot;</span>: <span class="dv">39</span>}</span>
<span id="cb623-5"><a href="análisis-de-datos-con-python.html#cb623-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-6"><a href="análisis-de-datos-con-python.html#cb623-6" aria-hidden="true" tabindex="-1"></a>mundo</span>
<span id="cb623-7"><a href="análisis-de-datos-con-python.html#cb623-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-8"><a href="análisis-de-datos-con-python.html#cb623-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> mundo: </span>
<span id="cb623-9"><a href="análisis-de-datos-con-python.html#cb623-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(key <span class="op">+</span> <span class="st">&quot;:&quot;</span> <span class="op">+</span> <span class="bu">str</span>(value))</span>
<span id="cb623-10"><a href="análisis-de-datos-con-python.html#cb623-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-11"><a href="análisis-de-datos-con-python.html#cb623-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Tenemos que utilizar un metodo</span></span>
<span id="cb623-12"><a href="análisis-de-datos-con-python.html#cb623-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> mundo.items(): </span>
<span id="cb623-13"><a href="análisis-de-datos-con-python.html#cb623-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(key <span class="op">+</span> <span class="st">&quot;: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(value))</span>
<span id="cb623-14"><a href="análisis-de-datos-con-python.html#cb623-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-15"><a href="análisis-de-datos-con-python.html#cb623-15" aria-hidden="true" tabindex="-1"></a>mundo.items()</span>
<span id="cb623-16"><a href="análisis-de-datos-con-python.html#cb623-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-17"><a href="análisis-de-datos-con-python.html#cb623-17" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(mundo.items())</span>
<span id="cb623-18"><a href="análisis-de-datos-con-python.html#cb623-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-19"><a href="análisis-de-datos-con-python.html#cb623-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo: </span></span>
<span id="cb623-20"><a href="análisis-de-datos-con-python.html#cb623-20" aria-hidden="true" tabindex="-1"></a>europa <span class="op">=</span> {<span class="st">&#39;spain&#39;</span>:<span class="st">&#39;madrid&#39;</span>, <span class="st">&#39;france&#39;</span>:<span class="st">&#39;paris&#39;</span>, <span class="st">&#39;germany&#39;</span>:<span class="st">&#39;berlin&#39;</span>,</span>
<span id="cb623-21"><a href="análisis-de-datos-con-python.html#cb623-21" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;norway&#39;</span>:<span class="st">&#39;oslo&#39;</span>, <span class="st">&#39;italy&#39;</span>:<span class="st">&#39;rome&#39;</span>, <span class="st">&#39;poland&#39;</span>:<span class="st">&#39;warsaw&#39;</span>, <span class="st">&#39;austria&#39;</span>:<span class="st">&#39;vienna&#39;</span> }</span>
<span id="cb623-22"><a href="análisis-de-datos-con-python.html#cb623-22" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb623-23"><a href="análisis-de-datos-con-python.html#cb623-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre un diccionario </span></span>
<span id="cb623-24"><a href="análisis-de-datos-con-python.html#cb623-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> europa.items() :</span>
<span id="cb623-25"><a href="análisis-de-datos-con-python.html#cb623-25" aria-hidden="true" tabindex="-1"></a>     <span class="bu">print</span>(<span class="st">&quot;the capital of &quot;</span> <span class="op">+</span> <span class="bu">str</span>(key) <span class="op">+</span> <span class="st">&quot; is &quot;</span> <span class="op">+</span> <span class="bu">str</span>(value))</span>
<span id="cb623-26"><a href="análisis-de-datos-con-python.html#cb623-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb623-27"><a href="análisis-de-datos-con-python.html#cb623-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb623-28"><a href="análisis-de-datos-con-python.html#cb623-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que hacermos el for con una tupla!</span></span>
<span id="cb623-29"><a href="análisis-de-datos-con-python.html#cb623-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-30"><a href="análisis-de-datos-con-python.html#cb623-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Arreglo 2d</span></span>
<span id="cb623-31"><a href="análisis-de-datos-con-python.html#cb623-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-32"><a href="análisis-de-datos-con-python.html#cb623-32" aria-hidden="true" tabindex="-1"></a>np_altura <span class="op">=</span> np.array([<span class="fl">1.73</span>,<span class="fl">1.68</span>,<span class="fl">1.71</span>,<span class="fl">1.89</span>,<span class="fl">1.79</span>])</span>
<span id="cb623-33"><a href="análisis-de-datos-con-python.html#cb623-33" aria-hidden="true" tabindex="-1"></a>np_peso <span class="op">=</span> np.array([<span class="fl">65.4</span>,<span class="fl">32.2</span>,<span class="fl">42.3</span>,<span class="fl">42.3</span>,<span class="fl">89.2</span>])</span>
<span id="cb623-34"><a href="análisis-de-datos-con-python.html#cb623-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-35"><a href="análisis-de-datos-con-python.html#cb623-35" aria-hidden="true" tabindex="-1"></a>meas <span class="op">=</span> np.array([np_altura,np_peso])</span>
<span id="cb623-36"><a href="análisis-de-datos-con-python.html#cb623-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-37"><a href="análisis-de-datos-con-python.html#cb623-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(meas)</span>
<span id="cb623-38"><a href="análisis-de-datos-con-python.html#cb623-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-39"><a href="análisis-de-datos-con-python.html#cb623-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> meas: </span>
<span id="cb623-40"><a href="análisis-de-datos-con-python.html#cb623-40" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span>
<span id="cb623-41"><a href="análisis-de-datos-con-python.html#cb623-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb623-42"><a href="análisis-de-datos-con-python.html#cb623-42" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> np.nditer(meas): </span>
<span id="cb623-43"><a href="análisis-de-datos-con-python.html#cb623-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span></code></pre></div>
</div>
<div id="iterar-sobre-pandas" class="section level4 hasAnchor" number="4.3.3.5">
<h4><span class="header-section-number">4.3.3.5</span> Iterar sobre Pandas<a href="análisis-de-datos-con-python.html#iterar-sobre-pandas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Hay que tener cuidado al iterar sobre estos objetos</li>
<li>Veamos dos ejemplos</li>
</ul>
<div class="sourceCode" id="cb624"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb624-1"><a href="análisis-de-datos-con-python.html#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> gapminder <span class="im">import</span> gapminder</span>
<span id="cb624-2"><a href="análisis-de-datos-con-python.html#cb624-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-3"><a href="análisis-de-datos-con-python.html#cb624-3" aria-hidden="true" tabindex="-1"></a>gapminder</span>
<span id="cb624-4"><a href="análisis-de-datos-con-python.html#cb624-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-5"><a href="análisis-de-datos-con-python.html#cb624-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Primer intento</span></span>
<span id="cb624-6"><a href="análisis-de-datos-con-python.html#cb624-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> gapminder: </span>
<span id="cb624-7"><a href="análisis-de-datos-con-python.html#cb624-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val)</span>
<span id="cb624-8"><a href="análisis-de-datos-con-python.html#cb624-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-9"><a href="análisis-de-datos-con-python.html#cb624-9" aria-hidden="true" tabindex="-1"></a><span class="co"># No entiende que queremos...</span></span>
<span id="cb624-10"><a href="análisis-de-datos-con-python.html#cb624-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-11"><a href="análisis-de-datos-con-python.html#cb624-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilizamos iterrows method</span></span>
<span id="cb624-12"><a href="análisis-de-datos-con-python.html#cb624-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lab,row <span class="kw">in</span> gapminder.iterrows(): </span>
<span id="cb624-13"><a href="análisis-de-datos-con-python.html#cb624-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(lab)</span>
<span id="cb624-14"><a href="análisis-de-datos-con-python.html#cb624-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(row)</span>
<span id="cb624-15"><a href="análisis-de-datos-con-python.html#cb624-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-16"><a href="análisis-de-datos-con-python.html#cb624-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Lab esta asociado al ID de un data frame</span></span>
<span id="cb624-17"><a href="análisis-de-datos-con-python.html#cb624-17" aria-hidden="true" tabindex="-1"></a><span class="co"># row es toda la fila asociada</span></span>
<span id="cb624-18"><a href="análisis-de-datos-con-python.html#cb624-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-19"><a href="análisis-de-datos-con-python.html#cb624-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacerlo selectivamente</span></span>
<span id="cb624-20"><a href="análisis-de-datos-con-python.html#cb624-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lab,row <span class="kw">in</span> gapminder.iterrows(): </span>
<span id="cb624-21"><a href="análisis-de-datos-con-python.html#cb624-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">str</span>(lab) <span class="op">+</span> <span class="st">&quot;: &quot;</span> <span class="op">+</span> row[<span class="st">&quot;continent&quot;</span>])</span>
<span id="cb624-22"><a href="análisis-de-datos-con-python.html#cb624-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-23"><a href="análisis-de-datos-con-python.html#cb624-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar una columna con un iterador </span></span>
<span id="cb624-24"><a href="análisis-de-datos-con-python.html#cb624-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-25"><a href="análisis-de-datos-con-python.html#cb624-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lab,row <span class="kw">in</span> gapminder.iterrows(): </span>
<span id="cb624-26"><a href="análisis-de-datos-con-python.html#cb624-26" aria-hidden="true" tabindex="-1"></a>    gapminder.loc[lab, <span class="st">&quot;tamaño_continente&quot;</span>] <span class="op">=</span> <span class="bu">len</span>(row[<span class="st">&quot;continent&quot;</span>])</span>
<span id="cb624-27"><a href="análisis-de-datos-con-python.html#cb624-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-28"><a href="análisis-de-datos-con-python.html#cb624-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Es solo un ejemplo, no es muy eficiente.</span></span>
<span id="cb624-29"><a href="análisis-de-datos-con-python.html#cb624-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-30"><a href="análisis-de-datos-con-python.html#cb624-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo, utilizando una función en vez de un método</span></span>
<span id="cb624-31"><a href="análisis-de-datos-con-python.html#cb624-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-32"><a href="análisis-de-datos-con-python.html#cb624-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lab,row <span class="kw">in</span> gapminder.iterrows(): </span>
<span id="cb624-33"><a href="análisis-de-datos-con-python.html#cb624-33" aria-hidden="true" tabindex="-1"></a>    gapminder.loc[lab, <span class="st">&quot;continente_mayus&quot;</span>] <span class="op">=</span> row[<span class="st">&quot;continent&quot;</span>].upper()</span>
<span id="cb624-34"><a href="análisis-de-datos-con-python.html#cb624-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-35"><a href="análisis-de-datos-con-python.html#cb624-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Es solo un ejemplo, no es muy eficiente.</span></span>
<span id="cb624-36"><a href="análisis-de-datos-con-python.html#cb624-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-37"><a href="análisis-de-datos-con-python.html#cb624-37" aria-hidden="true" tabindex="-1"></a>gapminder</span>
<span id="cb624-38"><a href="análisis-de-datos-con-python.html#cb624-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-39"><a href="análisis-de-datos-con-python.html#cb624-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Opcion alternativa: buscar un method y vectorizar</span></span>
<span id="cb624-40"><a href="análisis-de-datos-con-python.html#cb624-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-41"><a href="análisis-de-datos-con-python.html#cb624-41" aria-hidden="true" tabindex="-1"></a>gapminder[<span class="st">&quot;tamaño_continente_vect&quot;</span>] <span class="op">=</span> gapminder[<span class="st">&quot;continent&quot;</span>].<span class="bu">apply</span>(<span class="bu">len</span>)</span>
<span id="cb624-42"><a href="análisis-de-datos-con-python.html#cb624-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-43"><a href="análisis-de-datos-con-python.html#cb624-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Esta es la opción eficiente.</span></span>
<span id="cb624-44"><a href="análisis-de-datos-con-python.html#cb624-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-45"><a href="análisis-de-datos-con-python.html#cb624-45" aria-hidden="true" tabindex="-1"></a>gapminder</span>
<span id="cb624-46"><a href="análisis-de-datos-con-python.html#cb624-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-47"><a href="análisis-de-datos-con-python.html#cb624-47" aria-hidden="true" tabindex="-1"></a>gapminder[<span class="st">&quot;Cont_mayus_vect&quot;</span>] <span class="op">=</span> gapminder[<span class="st">&quot;continent&quot;</span>].<span class="bu">apply</span>(<span class="bu">str</span>.upper)</span>
<span id="cb624-48"><a href="análisis-de-datos-con-python.html#cb624-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb624-49"><a href="análisis-de-datos-con-python.html#cb624-49" aria-hidden="true" tabindex="-1"></a>gapminder</span></code></pre></div>
</div>
</div>
<div id="iteradores-adicionales-en-python" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Iteradores adicionales en Python<a href="análisis-de-datos-con-python.html#iteradores-adicionales-en-python" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="enumerate" class="section level4 hasAnchor" number="4.3.4.1">
<h4><span class="header-section-number">4.3.4.1</span> Enumerate<a href="análisis-de-datos-con-python.html#enumerate" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>usar cuando</strong>: queremos tener registro tanto del indice como del valor asociado</li>
</ul>
<div class="sourceCode" id="cb625"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb625-1"><a href="análisis-de-datos-con-python.html#cb625-1" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>]</span>
<span id="cb625-2"><a href="análisis-de-datos-con-python.html#cb625-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb625-3"><a href="análisis-de-datos-con-python.html#cb625-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(L)):</span>
<span id="cb625-4"><a href="análisis-de-datos-con-python.html#cb625-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, L[i])</span>
<span id="cb625-5"><a href="análisis-de-datos-con-python.html#cb625-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb625-6"><a href="análisis-de-datos-con-python.html#cb625-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, val <span class="kw">in</span> <span class="bu">enumerate</span>(L):</span>
<span id="cb625-7"><a href="análisis-de-datos-con-python.html#cb625-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, val)</span></code></pre></div>
</div>
<div id="zip" class="section level4 hasAnchor" number="4.3.4.2">
<h4><span class="header-section-number">4.3.4.2</span> Zip<a href="análisis-de-datos-con-python.html#zip" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>usar cuando</strong>: Se quiera iterar sobre múltiples listas simultaneamente</li>
</ul>
<div class="sourceCode" id="cb626"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb626-1"><a href="análisis-de-datos-con-python.html#cb626-1" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>]</span>
<span id="cb626-2"><a href="análisis-de-datos-con-python.html#cb626-2" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">15</span>]</span>
<span id="cb626-3"><a href="análisis-de-datos-con-python.html#cb626-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb626-4"><a href="análisis-de-datos-con-python.html#cb626-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lval, rval <span class="kw">in</span> <span class="bu">zip</span>(L, R):</span>
<span id="cb626-5"><a href="análisis-de-datos-con-python.html#cb626-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(lval, rval)</span>
<span id="cb626-6"><a href="análisis-de-datos-con-python.html#cb626-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb626-7"><a href="análisis-de-datos-con-python.html#cb626-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Si son de distinto tamaño?</span></span>
<span id="cb626-8"><a href="análisis-de-datos-con-python.html#cb626-8" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>]</span>
<span id="cb626-9"><a href="análisis-de-datos-con-python.html#cb626-9" aria-hidden="true" tabindex="-1"></a>R <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">9</span>]</span>
<span id="cb626-10"><a href="análisis-de-datos-con-python.html#cb626-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> lval, rval <span class="kw">in</span> <span class="bu">zip</span>(L, R):</span>
<span id="cb626-11"><a href="análisis-de-datos-con-python.html#cb626-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(lval, rval)</span>
<span id="cb626-12"><a href="análisis-de-datos-con-python.html#cb626-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb626-13"><a href="análisis-de-datos-con-python.html#cb626-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Va a utilizar como referencia el más corto</span></span></code></pre></div>
</div>
<div id="map" class="section level4 hasAnchor" number="4.3.4.3">
<h4><span class="header-section-number">4.3.4.3</span> Map<a href="análisis-de-datos-con-python.html#map" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>usar cuando</strong>: quiera tomar una función y aplicarla al valor dentro de un objeto</li>
</ul>
<div class="sourceCode" id="cb627"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb627-1"><a href="análisis-de-datos-con-python.html#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defino una función</span></span>
<span id="cb627-2"><a href="análisis-de-datos-con-python.html#cb627-2" aria-hidden="true" tabindex="-1"></a>cuadrado <span class="op">=</span> <span class="kw">lambda</span> x: x <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb627-3"><a href="análisis-de-datos-con-python.html#cb627-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb627-4"><a href="análisis-de-datos-con-python.html#cb627-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> <span class="bu">map</span>(cuadrado, <span class="bu">range</span>(<span class="dv">100</span>)):</span>
<span id="cb627-5"><a href="análisis-de-datos-con-python.html#cb627-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val, end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb627-6"><a href="análisis-de-datos-con-python.html#cb627-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb627-7"><a href="análisis-de-datos-con-python.html#cb627-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: Una función lambda puede tomar cualquier número de argumentos, pero sólo puede tener una expresión.</span></span>
<span id="cb627-8"><a href="análisis-de-datos-con-python.html#cb627-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb627-9"><a href="análisis-de-datos-con-python.html#cb627-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo: importar funciones especificas a una librearía </span></span>
<span id="cb627-10"><a href="análisis-de-datos-con-python.html#cb627-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb627-11"><a href="análisis-de-datos-con-python.html#cb627-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb627-12"><a href="análisis-de-datos-con-python.html#cb627-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> <span class="bu">map</span>(math.sqrt, <span class="bu">range</span>(<span class="dv">100</span>)):</span>
<span id="cb627-13"><a href="análisis-de-datos-con-python.html#cb627-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val, end <span class="op">=</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
</div>
<div id="filter" class="section level4 hasAnchor" number="4.3.4.4">
<h4><span class="header-section-number">4.3.4.4</span> Filter<a href="análisis-de-datos-con-python.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>similar a map, excepto que pasa valores que son considerados verdaderos por la función de filtrado</li>
</ul>
<div class="sourceCode" id="cb628"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb628-1"><a href="análisis-de-datos-con-python.html#cb628-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Itera sobre los valores para los cuales se cumple la condición</span></span>
<span id="cb628-2"><a href="análisis-de-datos-con-python.html#cb628-2" aria-hidden="true" tabindex="-1"></a>es_par <span class="op">=</span> <span class="kw">lambda</span> x: x <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb628-3"><a href="análisis-de-datos-con-python.html#cb628-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb628-4"><a href="análisis-de-datos-con-python.html#cb628-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> <span class="bu">filter</span>(es_par, <span class="bu">range</span>(<span class="dv">100</span>)):</span>
<span id="cb628-5"><a href="análisis-de-datos-con-python.html#cb628-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.3.2:</b> Genere un código que tome una lista de strings y calcule su tamaño.</p>
</div>
<div class="sourceCode" id="cb629"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb629-1"><a href="análisis-de-datos-con-python.html#cb629-1" aria-hidden="true" tabindex="-1"></a>lista_strings <span class="op">=</span> [<span class="st">&quot;Rodrigo&quot;</span>, <span class="st">&quot;Santiago&quot;</span>, <span class="st">&quot;Tania&quot;</span>, <span class="st">&quot;Laura&quot;</span>, <span class="st">&quot;Nicolás&quot;</span>]</span>
<span id="cb629-2"><a href="análisis-de-datos-con-python.html#cb629-2" aria-hidden="true" tabindex="-1"></a>lista_final <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="bu">len</span>,lista_strings))</span>
<span id="cb629-3"><a href="análisis-de-datos-con-python.html#cb629-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lista_final)</span></code></pre></div>
</div>
</div>
<div id="list-comprehension" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> List Comprehension<a href="análisis-de-datos-con-python.html#list-comprehension" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Es una forma de comprimir la construcción de un objeto utilizando un iterador.</li>
</ul>
<div class="sourceCode" id="cb630"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb630-1"><a href="análisis-de-datos-con-python.html#cb630-1" aria-hidden="true" tabindex="-1"></a>[i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>) <span class="cf">if</span> i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb630-2"><a href="análisis-de-datos-con-python.html#cb630-2" aria-hidden="true" tabindex="-1"></a><span class="co"># El resultado es una lista que solo considera los números pares.</span></span>
<span id="cb630-3"><a href="análisis-de-datos-con-python.html#cb630-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb630-4"><a href="análisis-de-datos-con-python.html#cb630-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Un for-loop</span></span>
<span id="cb630-5"><a href="análisis-de-datos-con-python.html#cb630-5" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> []</span>
<span id="cb630-6"><a href="análisis-de-datos-con-python.html#cb630-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb630-7"><a href="análisis-de-datos-con-python.html#cb630-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>):</span>
<span id="cb630-8"><a href="análisis-de-datos-con-python.html#cb630-8" aria-hidden="true" tabindex="-1"></a>    L.append(n <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb630-9"><a href="análisis-de-datos-con-python.html#cb630-9" aria-hidden="true" tabindex="-1"></a>L</span>
<span id="cb630-10"><a href="análisis-de-datos-con-python.html#cb630-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb630-11"><a href="análisis-de-datos-con-python.html#cb630-11" aria-hidden="true" tabindex="-1"></a>[n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>)]</span>
<span id="cb630-12"><a href="análisis-de-datos-con-python.html#cb630-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb630-13"><a href="análisis-de-datos-con-python.html#cb630-13" aria-hidden="true" tabindex="-1"></a><span class="co"># construir una lista formada por el cuadrado de n para cada n hasta 12</span></span></code></pre></div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div id="iteración-múltiple" class="section level4 hasAnchor" number="4.3.5.1">
<h4><span class="header-section-number">4.3.5.1</span> Iteración Múltiple<a href="análisis-de-datos-con-python.html#iteración-múltiple" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>objetivo</strong>: armar for-loops anidados en una linea</li>
</ul>
<div class="sourceCode" id="cb631"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb631-1"><a href="análisis-de-datos-con-python.html#cb631-1" aria-hidden="true" tabindex="-1"></a>[(i, j) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>) <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</span>
<span id="cb631-2"><a href="análisis-de-datos-con-python.html#cb631-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb631-3"><a href="análisis-de-datos-con-python.html#cb631-3" aria-hidden="true" tabindex="-1"></a>[(i, j, z) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>) <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>) <span class="cf">for</span> z <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)]</span></code></pre></div>
</div>
<div id="condicionales-en-el-iterador" class="section level4 hasAnchor" number="4.3.5.2">
<h4><span class="header-section-number">4.3.5.2</span> Condicionales en el iterador<a href="análisis-de-datos-con-python.html#condicionales-en-el-iterador" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Idea</strong>: agregar condicionales al final de la expresión.</li>
</ul>
<div class="sourceCode" id="cb632"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb632-1"><a href="análisis-de-datos-con-python.html#cb632-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Construir una lista de valores para cada valor hasta 20, pero sólo si el valor no es divisible por 3&quot;</span></span>
<span id="cb632-2"><a href="análisis-de-datos-con-python.html#cb632-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-3"><a href="análisis-de-datos-con-python.html#cb632-3" aria-hidden="true" tabindex="-1"></a>[val <span class="cf">for</span> val <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>) <span class="cf">if</span> val <span class="op">%</span> <span class="dv">3</span> <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb632-4"><a href="análisis-de-datos-con-python.html#cb632-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-5"><a href="análisis-de-datos-con-python.html#cb632-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Equivalente a</span></span>
<span id="cb632-6"><a href="análisis-de-datos-con-python.html#cb632-6" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> []</span>
<span id="cb632-7"><a href="análisis-de-datos-con-python.html#cb632-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-8"><a href="análisis-de-datos-con-python.html#cb632-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>):</span>
<span id="cb632-9"><a href="análisis-de-datos-con-python.html#cb632-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> val <span class="op">%</span> <span class="dv">3</span> <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb632-10"><a href="análisis-de-datos-con-python.html#cb632-10" aria-hidden="true" tabindex="-1"></a>        L.append(val)</span>
<span id="cb632-11"><a href="análisis-de-datos-con-python.html#cb632-11" aria-hidden="true" tabindex="-1"></a>L</span>
<span id="cb632-12"><a href="análisis-de-datos-con-python.html#cb632-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-13"><a href="análisis-de-datos-con-python.html#cb632-13" aria-hidden="true" tabindex="-1"></a>val <span class="op">=</span> <span class="op">-</span><span class="dv">1000</span></span>
<span id="cb632-14"><a href="análisis-de-datos-con-python.html#cb632-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-15"><a href="análisis-de-datos-con-python.html#cb632-15" aria-hidden="true" tabindex="-1"></a>val <span class="cf">if</span> val <span class="op">&gt;=</span> <span class="dv">0</span> <span class="cf">else</span> <span class="op">-</span>val</span>
<span id="cb632-16"><a href="análisis-de-datos-con-python.html#cb632-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-17"><a href="análisis-de-datos-con-python.html#cb632-17" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué función es esta?</span></span>
<span id="cb632-18"><a href="análisis-de-datos-con-python.html#cb632-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-19"><a href="análisis-de-datos-con-python.html#cb632-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Una más compleja</span></span>
<span id="cb632-20"><a href="análisis-de-datos-con-python.html#cb632-20" aria-hidden="true" tabindex="-1"></a><span class="co"># construir una lista, dejando fuera los múltiplos de 3, y haciendo negativos todos los múltiplos de 2.</span></span>
<span id="cb632-21"><a href="análisis-de-datos-con-python.html#cb632-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-22"><a href="análisis-de-datos-con-python.html#cb632-22" aria-hidden="true" tabindex="-1"></a>[val <span class="cf">if</span> val <span class="op">%</span> <span class="dv">2</span> <span class="cf">else</span> <span class="op">-</span>val <span class="cf">for</span> val <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">20</span>) <span class="cf">if</span> val <span class="op">%</span> <span class="dv">3</span>]</span>
<span id="cb632-23"><a href="análisis-de-datos-con-python.html#cb632-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-24"><a href="análisis-de-datos-con-python.html#cb632-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Se puede extender para otro tipo de objetos, por ejemplo a conjuntos</span></span>
<span id="cb632-25"><a href="análisis-de-datos-con-python.html#cb632-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-26"><a href="análisis-de-datos-con-python.html#cb632-26" aria-hidden="true" tabindex="-1"></a>{n<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>)}</span>
<span id="cb632-27"><a href="análisis-de-datos-con-python.html#cb632-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-28"><a href="análisis-de-datos-con-python.html#cb632-28" aria-hidden="true" tabindex="-1"></a>{a <span class="op">%</span> <span class="dv">3</span> <span class="cf">for</span> a <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>)}</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.3.3:</b> Escriba los siguientes procesos iterativos en formato de <em>list comprehension</em>:</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb633-1"><a href="análisis-de-datos-con-python.html#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parte a</span></span>
<span id="cb633-2"><a href="análisis-de-datos-con-python.html#cb633-2" aria-hidden="true" tabindex="-1"></a>numeros <span class="op">=</span> [<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">45</span>,<span class="dv">97</span>,<span class="dv">32</span>,<span class="dv">22</span>,<span class="dv">10</span>,<span class="dv">19</span>,<span class="dv">39</span>,<span class="dv">43</span>]</span>
<span id="cb633-3"><a href="análisis-de-datos-con-python.html#cb633-3" aria-hidden="true" tabindex="-1"></a>resultado <span class="op">=</span> []</span>
<span id="cb633-4"><a href="análisis-de-datos-con-python.html#cb633-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-5"><a href="análisis-de-datos-con-python.html#cb633-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> numeros:</span>
<span id="cb633-6"><a href="análisis-de-datos-con-python.html#cb633-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb633-7"><a href="análisis-de-datos-con-python.html#cb633-7" aria-hidden="true" tabindex="-1"></a>    resultado.append(n)</span>
<span id="cb633-8"><a href="análisis-de-datos-con-python.html#cb633-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resultado)</span>
<span id="cb633-9"><a href="análisis-de-datos-con-python.html#cb633-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-10"><a href="análisis-de-datos-con-python.html#cb633-10" aria-hidden="true" tabindex="-1"></a>[n <span class="cf">for</span> n <span class="kw">in</span> numeros <span class="cf">if</span> n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb633-11"><a href="análisis-de-datos-con-python.html#cb633-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-12"><a href="análisis-de-datos-con-python.html#cb633-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Parte b: Cuente el número de espacios en un string cualquiera</span></span>
<span id="cb633-13"><a href="análisis-de-datos-con-python.html#cb633-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-14"><a href="análisis-de-datos-con-python.html#cb633-14" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span> <span class="st">&quot;Mi nombre es Nicolás Campos &quot;</span></span>
<span id="cb633-15"><a href="análisis-de-datos-con-python.html#cb633-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb633-16"><a href="análisis-de-datos-con-python.html#cb633-16" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>([x <span class="cf">for</span> x <span class="kw">in</span> string <span class="cf">if</span> x <span class="op">==</span> <span class="st">&quot; &quot;</span>])</span></code></pre></div>
</div>
</div>
</div>
<div id="generadores" class="section level3 hasAnchor" number="4.3.6">
<h3><span class="header-section-number">4.3.6</span> Generadores<a href="análisis-de-datos-con-python.html#generadores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Similar a los iteradores de listas, pero ahorra bastate memoria, es eficiente.</li>
</ul>
<div class="sourceCode" id="cb634"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb634-1"><a href="análisis-de-datos-con-python.html#cb634-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hasta el momento</span></span>
<span id="cb634-2"><a href="análisis-de-datos-con-python.html#cb634-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb634-3"><a href="análisis-de-datos-con-python.html#cb634-3" aria-hidden="true" tabindex="-1"></a>[n <span class="op">**</span> <span class="dv">3</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>)]</span>
<span id="cb634-4"><a href="análisis-de-datos-con-python.html#cb634-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb634-5"><a href="análisis-de-datos-con-python.html#cb634-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Un generador</span></span>
<span id="cb634-6"><a href="análisis-de-datos-con-python.html#cb634-6" aria-hidden="true" tabindex="-1"></a>(n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb634-7"><a href="análisis-de-datos-con-python.html#cb634-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb634-8"><a href="análisis-de-datos-con-python.html#cb634-8" aria-hidden="true" tabindex="-1"></a><span class="co"># No genera el contenido.</span></span>
<span id="cb634-9"><a href="análisis-de-datos-con-python.html#cb634-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb634-10"><a href="análisis-de-datos-con-python.html#cb634-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Si lo quiero expresar</span></span>
<span id="cb634-11"><a href="análisis-de-datos-con-python.html#cb634-11" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> (n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb634-12"><a href="análisis-de-datos-con-python.html#cb634-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb634-13"><a href="análisis-de-datos-con-python.html#cb634-13" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(G)</span></code></pre></div>
<ul>
<li>Un generador es básicamente un <em>recipiente</em> en donde se van a colocar valores.</li>
<li>Un generador no calcula los valores a menos que sea necesario, lo cual aumenta su eficiencia.</li>
</ul>
<div class="sourceCode" id="cb635"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb635-1"><a href="análisis-de-datos-con-python.html#cb635-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generadores utilizan parentesis</span></span>
<span id="cb635-2"><a href="análisis-de-datos-con-python.html#cb635-2" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> (n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb635-3"><a href="análisis-de-datos-con-python.html#cb635-3" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(G)</span>
<span id="cb635-4"><a href="análisis-de-datos-con-python.html#cb635-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-5"><a href="análisis-de-datos-con-python.html#cb635-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Una lista es una colección de valores</span></span>
<span id="cb635-6"><a href="análisis-de-datos-con-python.html#cb635-6" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>)]</span>
<span id="cb635-7"><a href="análisis-de-datos-con-python.html#cb635-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-8"><a href="análisis-de-datos-con-python.html#cb635-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> L:</span>
<span id="cb635-9"><a href="análisis-de-datos-con-python.html#cb635-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb635-10"><a href="análisis-de-datos-con-python.html#cb635-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-11"><a href="análisis-de-datos-con-python.html#cb635-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Un generador es un recipiente para guardar valores</span></span>
<span id="cb635-12"><a href="análisis-de-datos-con-python.html#cb635-12" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> (n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb635-13"><a href="análisis-de-datos-con-python.html#cb635-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-14"><a href="análisis-de-datos-con-python.html#cb635-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> G:</span>
<span id="cb635-15"><a href="análisis-de-datos-con-python.html#cb635-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb635-16"><a href="análisis-de-datos-con-python.html#cb635-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb635-17"><a href="análisis-de-datos-con-python.html#cb635-17" aria-hidden="true" tabindex="-1"></a><span class="co"># El potencial del generador es mayor</span></span>
<span id="cb635-18"><a href="análisis-de-datos-con-python.html#cb635-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-19"><a href="análisis-de-datos-con-python.html#cb635-19" aria-hidden="true" tabindex="-1"></a>L1 <span class="op">=</span> [n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>)]</span>
<span id="cb635-20"><a href="análisis-de-datos-con-python.html#cb635-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-21"><a href="análisis-de-datos-con-python.html#cb635-21" aria-hidden="true" tabindex="-1"></a>L2 <span class="op">=</span> []</span>
<span id="cb635-22"><a href="análisis-de-datos-con-python.html#cb635-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb635-23"><a href="análisis-de-datos-con-python.html#cb635-23" aria-hidden="true" tabindex="-1"></a>    L2.append(n <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb635-24"><a href="análisis-de-datos-con-python.html#cb635-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-25"><a href="análisis-de-datos-con-python.html#cb635-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L1)</span>
<span id="cb635-26"><a href="análisis-de-datos-con-python.html#cb635-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L2)</span>
<span id="cb635-27"><a href="análisis-de-datos-con-python.html#cb635-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-28"><a href="análisis-de-datos-con-python.html#cb635-28" aria-hidden="true" tabindex="-1"></a>G1 <span class="op">=</span> (n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>))</span>
<span id="cb635-29"><a href="análisis-de-datos-con-python.html#cb635-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-30"><a href="análisis-de-datos-con-python.html#cb635-30" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gen():</span>
<span id="cb635-31"><a href="análisis-de-datos-con-python.html#cb635-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb635-32"><a href="análisis-de-datos-con-python.html#cb635-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> n <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb635-33"><a href="análisis-de-datos-con-python.html#cb635-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-34"><a href="análisis-de-datos-con-python.html#cb635-34" aria-hidden="true" tabindex="-1"></a>G2 <span class="op">=</span> gen()</span>
<span id="cb635-35"><a href="análisis-de-datos-con-python.html#cb635-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>G1)</span>
<span id="cb635-36"><a href="análisis-de-datos-con-python.html#cb635-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>G2)</span>
<span id="cb635-37"><a href="análisis-de-datos-con-python.html#cb635-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-38"><a href="análisis-de-datos-con-python.html#cb635-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Utiliza yield para representar una secuencia potencialmente infinita de valores</span></span>
<span id="cb635-39"><a href="análisis-de-datos-con-python.html#cb635-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-40"><a href="análisis-de-datos-con-python.html#cb635-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Recordemos que estos dos aspectos son iguales</span></span>
<span id="cb635-41"><a href="análisis-de-datos-con-python.html#cb635-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-42"><a href="análisis-de-datos-con-python.html#cb635-42" aria-hidden="true" tabindex="-1"></a>L1 <span class="op">=</span> [n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>)]</span>
<span id="cb635-43"><a href="análisis-de-datos-con-python.html#cb635-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-44"><a href="análisis-de-datos-con-python.html#cb635-44" aria-hidden="true" tabindex="-1"></a>L2 <span class="op">=</span> []</span>
<span id="cb635-45"><a href="análisis-de-datos-con-python.html#cb635-45" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>):</span>
<span id="cb635-46"><a href="análisis-de-datos-con-python.html#cb635-46" aria-hidden="true" tabindex="-1"></a>    L2.append(n <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb635-47"><a href="análisis-de-datos-con-python.html#cb635-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-48"><a href="análisis-de-datos-con-python.html#cb635-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L1)</span>
<span id="cb635-49"><a href="análisis-de-datos-con-python.html#cb635-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L2)</span>
<span id="cb635-50"><a href="análisis-de-datos-con-python.html#cb635-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-51"><a href="análisis-de-datos-con-python.html#cb635-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos hacer la equivalencia, pero con generadores tenemos</span></span>
<span id="cb635-52"><a href="análisis-de-datos-con-python.html#cb635-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-53"><a href="análisis-de-datos-con-python.html#cb635-53" aria-hidden="true" tabindex="-1"></a>G1 <span class="op">=</span> (n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb635-54"><a href="análisis-de-datos-con-python.html#cb635-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-55"><a href="análisis-de-datos-con-python.html#cb635-55" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gen():</span>
<span id="cb635-56"><a href="análisis-de-datos-con-python.html#cb635-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>):</span>
<span id="cb635-57"><a href="análisis-de-datos-con-python.html#cb635-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> n <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb635-58"><a href="análisis-de-datos-con-python.html#cb635-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-59"><a href="análisis-de-datos-con-python.html#cb635-59" aria-hidden="true" tabindex="-1"></a>G2 <span class="op">=</span> gen()</span>
<span id="cb635-60"><a href="análisis-de-datos-con-python.html#cb635-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-61"><a href="análisis-de-datos-con-python.html#cb635-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>G1)</span>
<span id="cb635-62"><a href="análisis-de-datos-con-python.html#cb635-62" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>G2)</span>
<span id="cb635-63"><a href="análisis-de-datos-con-python.html#cb635-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-64"><a href="análisis-de-datos-con-python.html#cb635-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que tuve que ingresar la función yield en vez de return. </span></span>
<span id="cb635-65"><a href="análisis-de-datos-con-python.html#cb635-65" aria-hidden="true" tabindex="-1"></a><span class="co"># La idea es que pueda incluir potencialmente una lista infinita de valores.</span></span></code></pre></div>
<ul>
<li>Un generador se puede utilizar una vez, un iteador normal muchas veces</li>
</ul>
<div class="sourceCode" id="cb636"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb636-1"><a href="análisis-de-datos-con-python.html#cb636-1" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>)]</span>
<span id="cb636-2"><a href="análisis-de-datos-con-python.html#cb636-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb636-3"><a href="análisis-de-datos-con-python.html#cb636-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Normal </span></span>
<span id="cb636-4"><a href="análisis-de-datos-con-python.html#cb636-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> L:</span>
<span id="cb636-5"><a href="análisis-de-datos-con-python.html#cb636-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(val, end<span class="op">=</span><span class="st">&#39; &#39;</span>)</span>
<span id="cb636-6"><a href="análisis-de-datos-con-python.html#cb636-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb636-7"><a href="análisis-de-datos-con-python.html#cb636-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb636-8"><a href="análisis-de-datos-con-python.html#cb636-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Generador</span></span>
<span id="cb636-9"><a href="análisis-de-datos-con-python.html#cb636-9" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> (n <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">12</span>))</span>
<span id="cb636-10"><a href="análisis-de-datos-con-python.html#cb636-10" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(G)</span>
<span id="cb636-11"><a href="análisis-de-datos-con-python.html#cb636-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb636-12"><a href="análisis-de-datos-con-python.html#cb636-12" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(G)</span></code></pre></div>
<div id="algoritmo-de-erastotenes" class="section level4 hasAnchor" number="4.3.6.1">
<h4><span class="header-section-number">4.3.6.1</span> Algoritmo de erastotenes<a href="análisis-de-datos-con-python.html#algoritmo-de-erastotenes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Vamos a generar un algoritmo que nos permita obtener todos los numeros primos bajo un cierto número natural dado.</li>
</ul>
<div class="sourceCode" id="cb637"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb637-1"><a href="análisis-de-datos-con-python.html#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generamos una lista de candidatos </span></span>
<span id="cb637-2"><a href="análisis-de-datos-con-python.html#cb637-2" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">10</span>)]</span>
<span id="cb637-3"><a href="análisis-de-datos-con-python.html#cb637-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span>
<span id="cb637-4"><a href="análisis-de-datos-con-python.html#cb637-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-5"><a href="análisis-de-datos-con-python.html#cb637-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Removemos todos los múltiplos de dos salvo si mismo</span></span>
<span id="cb637-6"><a href="análisis-de-datos-con-python.html#cb637-6" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="cf">for</span> n <span class="kw">in</span> L <span class="cf">if</span> n <span class="op">==</span> L[<span class="dv">0</span>] <span class="kw">or</span> n <span class="op">%</span> L[<span class="dv">0</span>] <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb637-7"><a href="análisis-de-datos-con-python.html#cb637-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span>
<span id="cb637-8"><a href="análisis-de-datos-con-python.html#cb637-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-9"><a href="análisis-de-datos-con-python.html#cb637-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Removemos todos los múltiplos de tres salvo si mismo</span></span>
<span id="cb637-10"><a href="análisis-de-datos-con-python.html#cb637-10" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="cf">for</span> n <span class="kw">in</span> L <span class="cf">if</span> n <span class="op">==</span> L[<span class="dv">1</span>] <span class="kw">or</span> n <span class="op">%</span> L[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb637-11"><a href="análisis-de-datos-con-python.html#cb637-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span>
<span id="cb637-12"><a href="análisis-de-datos-con-python.html#cb637-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-13"><a href="análisis-de-datos-con-python.html#cb637-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Asi sucesivamente hasta converger</span></span>
<span id="cb637-14"><a href="análisis-de-datos-con-python.html#cb637-14" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="cf">for</span> n <span class="kw">in</span> L <span class="cf">if</span> n <span class="op">==</span> L[<span class="dv">2</span>] <span class="kw">or</span> n <span class="op">%</span> L[<span class="dv">2</span>] <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb637-15"><a href="análisis-de-datos-con-python.html#cb637-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span>
<span id="cb637-16"><a href="análisis-de-datos-con-python.html#cb637-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-17"><a href="análisis-de-datos-con-python.html#cb637-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Asi sucesivamente hasta converger</span></span>
<span id="cb637-18"><a href="análisis-de-datos-con-python.html#cb637-18" aria-hidden="true" tabindex="-1"></a>L <span class="op">=</span> [n <span class="cf">for</span> n <span class="kw">in</span> L <span class="cf">if</span> n <span class="op">==</span> L[<span class="dv">3</span>] <span class="kw">or</span> n <span class="op">%</span> L[<span class="dv">3</span>] <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb637-19"><a href="análisis-de-datos-con-python.html#cb637-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(L)</span>
<span id="cb637-20"><a href="análisis-de-datos-con-python.html#cb637-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-21"><a href="análisis-de-datos-con-python.html#cb637-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Generamos esto como un generador </span></span>
<span id="cb637-22"><a href="análisis-de-datos-con-python.html#cb637-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-23"><a href="análisis-de-datos-con-python.html#cb637-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gen_primos(N):</span>
<span id="cb637-24"><a href="análisis-de-datos-con-python.html#cb637-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;Generar primos hasta N&quot;&quot;&quot;</span></span>
<span id="cb637-25"><a href="análisis-de-datos-con-python.html#cb637-25" aria-hidden="true" tabindex="-1"></a>    primos <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb637-26"><a href="análisis-de-datos-con-python.html#cb637-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, N):</span>
<span id="cb637-27"><a href="análisis-de-datos-con-python.html#cb637-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">all</span>(n <span class="op">%</span> p <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">for</span> p <span class="kw">in</span> primos):</span>
<span id="cb637-28"><a href="análisis-de-datos-con-python.html#cb637-28" aria-hidden="true" tabindex="-1"></a>            primos.add(n)</span>
<span id="cb637-29"><a href="análisis-de-datos-con-python.html#cb637-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">yield</span> n</span>
<span id="cb637-30"><a href="análisis-de-datos-con-python.html#cb637-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-31"><a href="análisis-de-datos-con-python.html#cb637-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>gen_primos(<span class="dv">1000</span>))</span></code></pre></div>
<ul>
<li>Es conveniente utilizar generadores cuando se trabajan con grandes bases de datos.</li>
<li>Es importante recordar que el generador solo puede ser iterado una vez.</li>
<li>No es conveniente utilizar generadores cuando necesitamos los valores previos.
Recuerden que solo itera una vez.</li>
<li>Cuando tengo bases de datos pequeñas no es necesario.</li>
<li>¿Puedo escribir lo anterior con un for? : Si, el generador es por la actualización y el espacio.</li>
</ul>
</div>
</div>
<div id="funciones-3" class="section level3 hasAnchor" number="4.3.7">
<h3><span class="header-section-number">4.3.7</span> Funciones<a href="análisis-de-datos-con-python.html#funciones-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Parte importante de cualquier proceso sofisticado de análisis de datos</p></li>
<li><p>Son lo que conocemos como <em>programas</em> en Stata.</p></li>
<li><p>Tres grupos principales:</p>
<ul>
<li><p>Funciones incorporadas, como help() para pedir ayuda, min() para obtener el valor mínimo, print() para imprimir un objeto en la terminal. Listado: <a href="https://docs.python.org/3/library/functions.html" class="uri">https://docs.python.org/3/library/functions.html</a></p></li>
<li><p>Funciones definidas por el usuario (UDFs), que son funciones que los usuarios crean para mejorar sus procesos.</p></li>
<li><p>Funciones anónimas, que también se llaman funciones lambda porque no se declaran con la palabra clave def estándar.</p></li>
</ul></li>
<li><p>Diferencia entre metodos y funciones?</p>
<ul>
<li>Metodo es especifico a una clase de objeto</li>
<li>Todos los metodos son funciones, pero no todas las funciones son metodos.</li>
</ul></li>
</ul>
<div id="sintaxis-básica-y-algunos-ejemplos" class="section level4 hasAnchor" number="4.3.7.1">
<h4><span class="header-section-number">4.3.7.1</span> Sintaxis básica y algunos ejemplos<a href="análisis-de-datos-con-python.html#sintaxis-básica-y-algunos-ejemplos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb638"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb638-1"><a href="análisis-de-datos-con-python.html#cb638-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> miprimerafuncion(a): <span class="co">#declaramos la función y establecemos el input</span></span>
<span id="cb638-2"><a href="análisis-de-datos-con-python.html#cb638-2" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> a <span class="op">*</span> <span class="dv">2</span>  <span class="co">#definimos qué hace la función</span></span>
<span id="cb638-3"><a href="análisis-de-datos-con-python.html#cb638-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b <span class="co">#Establecemos un output</span></span>
<span id="cb638-4"><a href="análisis-de-datos-con-python.html#cb638-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-5"><a href="análisis-de-datos-con-python.html#cb638-5" aria-hidden="true" tabindex="-1"></a><span class="co"># llamamos la función</span></span>
<span id="cb638-6"><a href="análisis-de-datos-con-python.html#cb638-6" aria-hidden="true" tabindex="-1"></a>miprimerafuncion(<span class="st">&quot;nico&quot;</span>)</span>
<span id="cb638-7"><a href="análisis-de-datos-con-python.html#cb638-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-8"><a href="análisis-de-datos-con-python.html#cb638-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> miprimerafuncion_sr(a):</span>
<span id="cb638-9"><a href="análisis-de-datos-con-python.html#cb638-9" aria-hidden="true" tabindex="-1"></a>     a <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb638-10"><a href="análisis-de-datos-con-python.html#cb638-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-11"><a href="análisis-de-datos-con-python.html#cb638-11" aria-hidden="true" tabindex="-1"></a>miprimerafuncion_sr(<span class="dv">15</span>)</span>
<span id="cb638-12"><a href="análisis-de-datos-con-python.html#cb638-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-13"><a href="análisis-de-datos-con-python.html#cb638-13" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb638-14"><a href="análisis-de-datos-con-python.html#cb638-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(miprimerafuncion(b))</span>
<span id="cb638-15"><a href="análisis-de-datos-con-python.html#cb638-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(miprimerafuncion(<span class="dv">1000</span>))</span>
<span id="cb638-16"><a href="análisis-de-datos-con-python.html#cb638-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-17"><a href="análisis-de-datos-con-python.html#cb638-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones con más de un argumento</span></span>
<span id="cb638-18"><a href="análisis-de-datos-con-python.html#cb638-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-19"><a href="análisis-de-datos-con-python.html#cb638-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ejemplo2(a, b): </span>
<span id="cb638-20"><a href="análisis-de-datos-con-python.html#cb638-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b, a <span class="op">**</span> b</span>
<span id="cb638-21"><a href="análisis-de-datos-con-python.html#cb638-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-22"><a href="análisis-de-datos-con-python.html#cb638-22" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(ejemplo2(<span class="dv">10</span>,<span class="dv">2</span>))</span>
<span id="cb638-23"><a href="análisis-de-datos-con-python.html#cb638-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-24"><a href="análisis-de-datos-con-python.html#cb638-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones que puedo asignar como tuplas</span></span>
<span id="cb638-25"><a href="análisis-de-datos-con-python.html#cb638-25" aria-hidden="true" tabindex="-1"></a>X, Y <span class="op">=</span> ejemplo2(<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb638-26"><a href="análisis-de-datos-con-python.html#cb638-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;X =&quot;</span>, X, <span class="st">&quot;Y =&quot;</span>, Y)</span>
<span id="cb638-27"><a href="análisis-de-datos-con-python.html#cb638-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-28"><a href="análisis-de-datos-con-python.html#cb638-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones sin argumentos </span></span>
<span id="cb638-29"><a href="análisis-de-datos-con-python.html#cb638-29" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello():</span>
<span id="cb638-30"><a href="análisis-de-datos-con-python.html#cb638-30" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&quot;Hola mundo&quot;</span>) </span>
<span id="cb638-31"><a href="análisis-de-datos-con-python.html#cb638-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span></span>
<span id="cb638-32"><a href="análisis-de-datos-con-python.html#cb638-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-33"><a href="análisis-de-datos-con-python.html#cb638-33" aria-hidden="true" tabindex="-1"></a>hello()</span>
<span id="cb638-34"><a href="análisis-de-datos-con-python.html#cb638-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-35"><a href="análisis-de-datos-con-python.html#cb638-35" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fibonacci(N):</span>
<span id="cb638-36"><a href="análisis-de-datos-con-python.html#cb638-36" aria-hidden="true" tabindex="-1"></a>    L <span class="op">=</span> []</span>
<span id="cb638-37"><a href="análisis-de-datos-con-python.html#cb638-37" aria-hidden="true" tabindex="-1"></a>    a, b <span class="op">=</span> <span class="dv">0</span>, <span class="dv">1</span></span>
<span id="cb638-38"><a href="análisis-de-datos-con-python.html#cb638-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(L) <span class="op">&lt;</span> N:</span>
<span id="cb638-39"><a href="análisis-de-datos-con-python.html#cb638-39" aria-hidden="true" tabindex="-1"></a>        a, b <span class="op">=</span> b, a <span class="op">+</span> b</span>
<span id="cb638-40"><a href="análisis-de-datos-con-python.html#cb638-40" aria-hidden="true" tabindex="-1"></a>        L.append(a)</span>
<span id="cb638-41"><a href="análisis-de-datos-con-python.html#cb638-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> L</span>
<span id="cb638-42"><a href="análisis-de-datos-con-python.html#cb638-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-43"><a href="análisis-de-datos-con-python.html#cb638-43" aria-hidden="true" tabindex="-1"></a>fibonacci()</span>
<span id="cb638-44"><a href="análisis-de-datos-con-python.html#cb638-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-45"><a href="análisis-de-datos-con-python.html#cb638-45" aria-hidden="true" tabindex="-1"></a><span class="co">## Valores por parametros y opciones por defecto</span></span>
<span id="cb638-46"><a href="análisis-de-datos-con-python.html#cb638-46" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fibonacci_cd(N, a <span class="op">=</span> <span class="dv">0</span>, b <span class="op">=</span> <span class="dv">1</span>):</span>
<span id="cb638-47"><a href="análisis-de-datos-con-python.html#cb638-47" aria-hidden="true" tabindex="-1"></a>    L <span class="op">=</span> []</span>
<span id="cb638-48"><a href="análisis-de-datos-con-python.html#cb638-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(L) <span class="op">&lt;</span> N:</span>
<span id="cb638-49"><a href="análisis-de-datos-con-python.html#cb638-49" aria-hidden="true" tabindex="-1"></a>        a, b <span class="op">=</span> b, a <span class="op">+</span> b</span>
<span id="cb638-50"><a href="análisis-de-datos-con-python.html#cb638-50" aria-hidden="true" tabindex="-1"></a>        L.append(a)</span>
<span id="cb638-51"><a href="análisis-de-datos-con-python.html#cb638-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> L</span>
<span id="cb638-52"><a href="análisis-de-datos-con-python.html#cb638-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-53"><a href="análisis-de-datos-con-python.html#cb638-53" aria-hidden="true" tabindex="-1"></a>fibonacci(<span class="dv">10</span>)</span>
<span id="cb638-54"><a href="análisis-de-datos-con-python.html#cb638-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-55"><a href="análisis-de-datos-con-python.html#cb638-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Por defecto</span></span>
<span id="cb638-56"><a href="análisis-de-datos-con-python.html#cb638-56" aria-hidden="true" tabindex="-1"></a>fibonacci_cd(<span class="dv">10</span>)</span>
<span id="cb638-57"><a href="análisis-de-datos-con-python.html#cb638-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-58"><a href="análisis-de-datos-con-python.html#cb638-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables locales y variables globales </span></span>
<span id="cb638-59"><a href="análisis-de-datos-con-python.html#cb638-59" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ejemplo3(a):</span>
<span id="cb638-60"><a href="análisis-de-datos-con-python.html#cb638-60" aria-hidden="true" tabindex="-1"></a>    AA <span class="op">=</span> []</span>
<span id="cb638-61"><a href="análisis-de-datos-con-python.html#cb638-61" aria-hidden="true" tabindex="-1"></a>    AA.append(a)</span>
<span id="cb638-62"><a href="análisis-de-datos-con-python.html#cb638-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> AA</span>
<span id="cb638-63"><a href="análisis-de-datos-con-python.html#cb638-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-64"><a href="análisis-de-datos-con-python.html#cb638-64" aria-hidden="true" tabindex="-1"></a>C <span class="op">=</span> ejemplo3(<span class="st">&quot;hola&quot;</span>)</span>
<span id="cb638-65"><a href="análisis-de-datos-con-python.html#cb638-65" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(C)</span>
<span id="cb638-66"><a href="análisis-de-datos-con-python.html#cb638-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb638-67"><a href="análisis-de-datos-con-python.html#cb638-67" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(C)</span></code></pre></div>
<ul>
<li><p>Una variable local va a existir en un lugar específico.</p></li>
<li><p>Dentro de la función ejemplo3(a) definimos A=<a href="indica%20que%20buscar%20exactamente%20dentro%20de%20un%20lugar."></a>, esta variable A existe sólo dentro de la función ejemplo3(), es decir es una <strong>variable local</strong>.</p></li>
<li><p>Cuando decimos que A = ejemplo3(“hola”) estamos definiendo una variable global, que existe en todo el espacio del Jupyter, una vez definida puede ser llamada en en cualquier parte.</p></li>
</ul>
<div class="sourceCode" id="cb639"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb639-1"><a href="análisis-de-datos-con-python.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a crear una función que nos permita interactuar con los/las usuarias</span></span>
<span id="cb639-2"><a href="análisis-de-datos-con-python.html#cb639-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-3"><a href="análisis-de-datos-con-python.html#cb639-3" aria-hidden="true" tabindex="-1"></a><span class="co">#1. Creamos la función con un input A</span></span>
<span id="cb639-4"><a href="análisis-de-datos-con-python.html#cb639-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ejemplo4(A):</span>
<span id="cb639-5"><a href="análisis-de-datos-con-python.html#cb639-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb639-6"><a href="análisis-de-datos-con-python.html#cb639-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">#2. Creamos una lista  vacía</span></span>
<span id="cb639-7"><a href="análisis-de-datos-con-python.html#cb639-7" aria-hidden="true" tabindex="-1"></a>    B <span class="op">=</span> []</span>
<span id="cb639-8"><a href="análisis-de-datos-con-python.html#cb639-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-9"><a href="análisis-de-datos-con-python.html#cb639-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#3. Iteramos sobre A</span></span>
<span id="cb639-10"><a href="análisis-de-datos-con-python.html#cb639-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> A: </span>
<span id="cb639-11"><a href="análisis-de-datos-con-python.html#cb639-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb639-12"><a href="análisis-de-datos-con-python.html#cb639-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">#Creamos la primera condición</span></span>
<span id="cb639-13"><a href="análisis-de-datos-con-python.html#cb639-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">and</span> i<span class="op">&lt;=</span> <span class="dv">3</span>: </span>
<span id="cb639-14"><a href="análisis-de-datos-con-python.html#cb639-14" aria-hidden="true" tabindex="-1"></a>            B.append(i)</span>
<span id="cb639-15"><a href="análisis-de-datos-con-python.html#cb639-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">#Segunda condición</span></span>
<span id="cb639-16"><a href="análisis-de-datos-con-python.html#cb639-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> i <span class="op">&gt;</span> <span class="dv">3</span> <span class="kw">and</span> i<span class="op">&lt;</span><span class="dv">5</span>: </span>
<span id="cb639-17"><a href="análisis-de-datos-con-python.html#cb639-17" aria-hidden="true" tabindex="-1"></a>            B.append(i<span class="op">*</span><span class="dv">2</span>)</span>
<span id="cb639-18"><a href="análisis-de-datos-con-python.html#cb639-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">#Tercera condición</span></span>
<span id="cb639-19"><a href="análisis-de-datos-con-python.html#cb639-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> i<span class="op">==</span><span class="dv">5</span>:</span>
<span id="cb639-20"><a href="análisis-de-datos-con-python.html#cb639-20" aria-hidden="true" tabindex="-1"></a>            B.append(<span class="bu">input</span>(<span class="st">&quot;Agregar un valor&quot;</span>))</span>
<span id="cb639-21"><a href="análisis-de-datos-con-python.html#cb639-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">#Todo el resto</span></span>
<span id="cb639-22"><a href="análisis-de-datos-con-python.html#cb639-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>: </span>
<span id="cb639-23"><a href="análisis-de-datos-con-python.html#cb639-23" aria-hidden="true" tabindex="-1"></a>            B.append(i<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb639-24"><a href="análisis-de-datos-con-python.html#cb639-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-25"><a href="análisis-de-datos-con-python.html#cb639-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">#4. Output</span></span>
<span id="cb639-26"><a href="análisis-de-datos-con-python.html#cb639-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> B</span>
<span id="cb639-27"><a href="análisis-de-datos-con-python.html#cb639-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-28"><a href="análisis-de-datos-con-python.html#cb639-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos una lista entre 0-10</span></span>
<span id="cb639-29"><a href="análisis-de-datos-con-python.html#cb639-29" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">11</span>, <span class="dv">1</span>)</span>
<span id="cb639-30"><a href="análisis-de-datos-con-python.html#cb639-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-31"><a href="análisis-de-datos-con-python.html#cb639-31" aria-hidden="true" tabindex="-1"></a><span class="co">#Llamamos la función y guardamos el resultado en una variable global</span></span>
<span id="cb639-32"><a href="análisis-de-datos-con-python.html#cb639-32" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> ejemplo4(A)</span>
<span id="cb639-33"><a href="análisis-de-datos-con-python.html#cb639-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-34"><a href="análisis-de-datos-con-python.html#cb639-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;A:&quot;</span>, A)</span>
<span id="cb639-35"><a href="análisis-de-datos-con-python.html#cb639-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;B:&quot;</span>, B)</span>
<span id="cb639-36"><a href="análisis-de-datos-con-python.html#cb639-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-37"><a href="análisis-de-datos-con-python.html#cb639-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo</span></span>
<span id="cb639-38"><a href="análisis-de-datos-con-python.html#cb639-38" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello():</span>
<span id="cb639-39"><a href="análisis-de-datos-con-python.html#cb639-39" aria-hidden="true" tabindex="-1"></a>  name <span class="op">=</span> <span class="bu">str</span>(<span class="bu">input</span>(<span class="st">&quot;Tu nombre aquí: &quot;</span>))</span>
<span id="cb639-40"><a href="análisis-de-datos-con-python.html#cb639-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> name:</span>
<span id="cb639-41"><a href="análisis-de-datos-con-python.html#cb639-41" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span> (<span class="st">&quot;Hola &quot;</span> <span class="op">+</span> <span class="bu">str</span>(name))</span>
<span id="cb639-42"><a href="análisis-de-datos-con-python.html#cb639-42" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb639-43"><a href="análisis-de-datos-con-python.html#cb639-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Hola no más&quot;</span>) </span>
<span id="cb639-44"><a href="análisis-de-datos-con-python.html#cb639-44" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> </span>
<span id="cb639-45"><a href="análisis-de-datos-con-python.html#cb639-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb639-46"><a href="análisis-de-datos-con-python.html#cb639-46" aria-hidden="true" tabindex="-1"></a>hello()</span>
<span id="cb639-47"><a href="análisis-de-datos-con-python.html#cb639-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-48"><a href="análisis-de-datos-con-python.html#cb639-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Notemos el uso de return </span></span>
<span id="cb639-49"><a href="análisis-de-datos-con-python.html#cb639-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-50"><a href="análisis-de-datos-con-python.html#cb639-50" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola():</span>
<span id="cb639-51"><a href="análisis-de-datos-con-python.html#cb639-51" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&quot;Hola mundo&quot;</span>) </span>
<span id="cb639-52"><a href="análisis-de-datos-con-python.html#cb639-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(<span class="st">&quot;hola&quot;</span>)</span>
<span id="cb639-53"><a href="análisis-de-datos-con-python.html#cb639-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-54"><a href="análisis-de-datos-con-python.html#cb639-54" aria-hidden="true" tabindex="-1"></a>hola() <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb639-55"><a href="análisis-de-datos-con-python.html#cb639-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-56"><a href="análisis-de-datos-con-python.html#cb639-56" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hola_sinreturn():</span>
<span id="cb639-57"><a href="análisis-de-datos-con-python.html#cb639-57" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&quot;Hola mundo&quot;</span>)</span>
<span id="cb639-58"><a href="análisis-de-datos-con-python.html#cb639-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-59"><a href="análisis-de-datos-con-python.html#cb639-59" aria-hidden="true" tabindex="-1"></a>hola_sinreturn() <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb639-60"><a href="análisis-de-datos-con-python.html#cb639-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Arroja un error</span></span>
<span id="cb639-61"><a href="análisis-de-datos-con-python.html#cb639-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-62"><a href="análisis-de-datos-con-python.html#cb639-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones anidadas (revisar prox clase)</span></span>
<span id="cb639-63"><a href="análisis-de-datos-con-python.html#cb639-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-64"><a href="análisis-de-datos-con-python.html#cb639-64" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> display(name):</span>
<span id="cb639-65"><a href="análisis-de-datos-con-python.html#cb639-65" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> message():</span>
<span id="cb639-66"><a href="análisis-de-datos-con-python.html#cb639-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Hello &quot;</span></span>
<span id="cb639-67"><a href="análisis-de-datos-con-python.html#cb639-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> name</span>
<span id="cb639-68"><a href="análisis-de-datos-con-python.html#cb639-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb639-69"><a href="análisis-de-datos-con-python.html#cb639-69" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(message(), display(<span class="st">&quot; Siva&quot;</span>))</span></code></pre></div>
</div>
<div id="argumentos-de-las-funciones-en-python" class="section level4 hasAnchor" number="4.3.7.2">
<h4><span class="header-section-number">4.3.7.2</span> Argumentos de las funciones en Python<a href="análisis-de-datos-con-python.html#argumentos-de-las-funciones-en-python" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb640"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb640-1"><a href="análisis-de-datos-con-python.html#cb640-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Defecto </span></span>
<span id="cb640-2"><a href="análisis-de-datos-con-python.html#cb640-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plus(a,b <span class="op">=</span> <span class="dv">2</span>):</span>
<span id="cb640-3"><a href="análisis-de-datos-con-python.html#cb640-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb640-4"><a href="análisis-de-datos-con-python.html#cb640-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb640-5"><a href="análisis-de-datos-con-python.html#cb640-5" aria-hidden="true" tabindex="-1"></a>plus(<span class="dv">1</span>)</span>
<span id="cb640-6"><a href="análisis-de-datos-con-python.html#cb640-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-7"><a href="análisis-de-datos-con-python.html#cb640-7" aria-hidden="true" tabindex="-1"></a>plus(<span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb640-8"><a href="análisis-de-datos-con-python.html#cb640-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-9"><a href="análisis-de-datos-con-python.html#cb640-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Requeridos: son los que necesita la funcion</span></span>
<span id="cb640-10"><a href="análisis-de-datos-con-python.html#cb640-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plus(a,b):</span>
<span id="cb640-11"><a href="análisis-de-datos-con-python.html#cb640-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb640-12"><a href="análisis-de-datos-con-python.html#cb640-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-13"><a href="análisis-de-datos-con-python.html#cb640-13" aria-hidden="true" tabindex="-1"></a>plus()</span>
<span id="cb640-14"><a href="análisis-de-datos-con-python.html#cb640-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-15"><a href="análisis-de-datos-con-python.html#cb640-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Argumentos clave</span></span>
<span id="cb640-16"><a href="análisis-de-datos-con-python.html#cb640-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-17"><a href="análisis-de-datos-con-python.html#cb640-17" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plus(a,b):</span>
<span id="cb640-18"><a href="análisis-de-datos-con-python.html#cb640-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> a <span class="op">-</span> b</span>
<span id="cb640-19"><a href="análisis-de-datos-con-python.html#cb640-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb640-20"><a href="análisis-de-datos-con-python.html#cb640-20" aria-hidden="true" tabindex="-1"></a>plus(<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb640-21"><a href="análisis-de-datos-con-python.html#cb640-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-22"><a href="análisis-de-datos-con-python.html#cb640-22" aria-hidden="true" tabindex="-1"></a>plus(b <span class="op">=</span> <span class="dv">2</span>, a <span class="op">=</span> <span class="dv">4</span>)</span>
<span id="cb640-23"><a href="análisis-de-datos-con-python.html#cb640-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb640-24"><a href="análisis-de-datos-con-python.html#cb640-24" aria-hidden="true" tabindex="-1"></a>plus(<span class="dv">2</span>,<span class="dv">4</span>)</span></code></pre></div>
</div>
<div id="args-and-kwargs-argumentos-flexibles" class="section level4 hasAnchor" number="4.3.7.3">
<h4><span class="header-section-number">4.3.7.3</span> args and kwargs: argumentos flexibles<a href="análisis-de-datos-con-python.html#args-and-kwargs-argumentos-flexibles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>idea:</strong> Querer escribir una función en la que no sepas inicialmente cuántos argumentos va a tener.</li>
<li><code>*args</code> y <code>**kwargs</code> permiten trabajar con este tipo de problemas</li>
</ul>
<div class="sourceCode" id="cb641"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb641-1"><a href="análisis-de-datos-con-python.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> catch_all(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb641-2"><a href="análisis-de-datos-con-python.html#cb641-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;args =&quot;</span>, args)</span>
<span id="cb641-3"><a href="análisis-de-datos-con-python.html#cb641-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;kwargs = &quot;</span>, kwargs)</span>
<span id="cb641-4"><a href="análisis-de-datos-con-python.html#cb641-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb641-5"><a href="análisis-de-datos-con-python.html#cb641-5" aria-hidden="true" tabindex="-1"></a>catch_all(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">65</span>, a <span class="op">=</span> <span class="dv">4</span>, b <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb641-6"><a href="análisis-de-datos-con-python.html#cb641-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb641-7"><a href="análisis-de-datos-con-python.html#cb641-7" aria-hidden="true" tabindex="-1"></a>catch_all(<span class="st">&#39;a&#39;</span>, keyword<span class="op">=</span><span class="dv">2</span>)</span></code></pre></div>
<ul>
<li><p>Aquí lo importante <strong>no</strong> son los nombres args y kwargs, sino los caracteres * que los preceden.</p></li>
<li><p><code>args</code> y <code>kwargs</code> son sólo los nombres de las variables que se utilizan a menudo por convención, abreviatura de “argumentos” y “argumentos de palabras clave”.</p></li>
<li><p>La diferencia operativa son los caracteres de asterisco: un solo * antes de una variable significa “expandir esto como una secuencia”, mientras que un doble ** antes de una variable significa “expandir esto como un diccionario”.</p></li>
</ul>
<div class="sourceCode" id="cb642"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb642-1"><a href="análisis-de-datos-con-python.html#cb642-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo ocupar esta sintaxis (* y **) al llamar variables dentro de una función</span></span>
<span id="cb642-2"><a href="análisis-de-datos-con-python.html#cb642-2" aria-hidden="true" tabindex="-1"></a>inputs <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb642-3"><a href="análisis-de-datos-con-python.html#cb642-3" aria-hidden="true" tabindex="-1"></a>keywords <span class="op">=</span> {<span class="st">&#39;pi&#39;</span>: <span class="fl">3.14</span>}</span>
<span id="cb642-4"><a href="análisis-de-datos-con-python.html#cb642-4" aria-hidden="true" tabindex="-1"></a>catch_all(<span class="op">*</span>inputs, <span class="op">**</span>keywords)</span></code></pre></div>
</div>
<div id="anonymous-lambda-functions" class="section level4 hasAnchor" number="4.3.7.4">
<h4><span class="header-section-number">4.3.7.4</span> Anonymous (lambda) Functions<a href="análisis-de-datos-con-python.html#anonymous-lambda-functions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Idea: quiero hacer funciones que sean anonimas</li>
</ul>
<div class="sourceCode" id="cb643"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb643-1"><a href="análisis-de-datos-con-python.html#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 1</span></span>
<span id="cb643-2"><a href="análisis-de-datos-con-python.html#cb643-2" aria-hidden="true" tabindex="-1"></a>add <span class="op">=</span> <span class="kw">lambda</span> x, y: x <span class="op">+</span> y</span>
<span id="cb643-3"><a href="análisis-de-datos-con-python.html#cb643-3" aria-hidden="true" tabindex="-1"></a>add(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb643-4"><a href="análisis-de-datos-con-python.html#cb643-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-5"><a href="análisis-de-datos-con-python.html#cb643-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 2 </span></span>
<span id="cb643-6"><a href="análisis-de-datos-con-python.html#cb643-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(x, y):</span>
<span id="cb643-7"><a href="análisis-de-datos-con-python.html#cb643-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb643-8"><a href="análisis-de-datos-con-python.html#cb643-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-9"><a href="análisis-de-datos-con-python.html#cb643-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que esta función no tiene nombre</span></span>
<span id="cb643-10"><a href="análisis-de-datos-con-python.html#cb643-10" aria-hidden="true" tabindex="-1"></a>double <span class="op">=</span> <span class="kw">lambda</span> x: x<span class="op">*</span><span class="dv">2</span></span>
<span id="cb643-11"><a href="análisis-de-datos-con-python.html#cb643-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-12"><a href="análisis-de-datos-con-python.html#cb643-12" aria-hidden="true" tabindex="-1"></a>double(<span class="dv">5</span>)</span>
<span id="cb643-13"><a href="análisis-de-datos-con-python.html#cb643-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb643-14"><a href="análisis-de-datos-con-python.html#cb643-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Con dos argumentos </span></span>
<span id="cb643-15"><a href="análisis-de-datos-con-python.html#cb643-15" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span> <span class="op">=</span> <span class="kw">lambda</span> x, y: x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb643-16"><a href="análisis-de-datos-con-python.html#cb643-16" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(<span class="dv">4</span>,<span class="dv">5</span>)</span></code></pre></div>
<ul>
<li>Caso 1 y Caso 2 son equivalentes</li>
<li>¿Por qué quiero escribir entonces funciones lambda?:
<ul>
<li>Función por un periodo corto de tiempo.</li>
<li>O cuando tenemos una función que tiene como input otras funciones.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb644"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb644-1"><a href="análisis-de-datos-con-python.html#cb644-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> <span class="bu">reduce</span></span>
<span id="cb644-2"><a href="análisis-de-datos-con-python.html#cb644-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-3"><a href="análisis-de-datos-con-python.html#cb644-3" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>]</span>
<span id="cb644-4"><a href="análisis-de-datos-con-python.html#cb644-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-5"><a href="análisis-de-datos-con-python.html#cb644-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtro: filtra según un criterio. En este caso el criterio es una función creada por mi y anonima </span></span>
<span id="cb644-6"><a href="análisis-de-datos-con-python.html#cb644-6" aria-hidden="true" tabindex="-1"></a>filtrado_list <span class="op">=</span> <span class="bu">list</span>(<span class="bu">filter</span>(<span class="kw">lambda</span> x: (x<span class="op">*</span><span class="dv">2</span> <span class="op">&gt;</span> <span class="dv">10</span>), lista))</span>
<span id="cb644-7"><a href="análisis-de-datos-con-python.html#cb644-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-8"><a href="análisis-de-datos-con-python.html#cb644-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Mapeo: aplica una función a un objeto. En este caso una anonima</span></span>
<span id="cb644-9"><a href="análisis-de-datos-con-python.html#cb644-9" aria-hidden="true" tabindex="-1"></a>mapeo_list <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x: x<span class="op">*</span><span class="dv">2</span>, lista))</span>
<span id="cb644-10"><a href="análisis-de-datos-con-python.html#cb644-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-11"><a href="análisis-de-datos-con-python.html#cb644-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Reducir: reduce la secuencia a un simple valor. Suma el acumulado finalmente.</span></span>
<span id="cb644-12"><a href="análisis-de-datos-con-python.html#cb644-12" aria-hidden="true" tabindex="-1"></a>reducedico_list <span class="op">=</span> <span class="bu">reduce</span>(<span class="kw">lambda</span> x, y: x<span class="op">+</span>y, lista)</span>
<span id="cb644-13"><a href="análisis-de-datos-con-python.html#cb644-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-14"><a href="análisis-de-datos-con-python.html#cb644-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(filtrado_list)</span>
<span id="cb644-15"><a href="análisis-de-datos-con-python.html#cb644-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mapeo_list)</span>
<span id="cb644-16"><a href="análisis-de-datos-con-python.html#cb644-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(reducedico_list)</span>
<span id="cb644-17"><a href="análisis-de-datos-con-python.html#cb644-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb644-18"><a href="análisis-de-datos-con-python.html#cb644-18" aria-hidden="true" tabindex="-1"></a><span class="co">#reduce?</span></span></code></pre></div>
</div>
<div id="documentar-funciones" class="section level4 hasAnchor" number="4.3.7.5">
<h4><span class="header-section-number">4.3.7.5</span> Documentar funciones<a href="análisis-de-datos-con-python.html#documentar-funciones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Es útil documentar lo que hacen las funciones que hacemos</li>
</ul>
<div class="sourceCode" id="cb645"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb645-1"><a href="análisis-de-datos-con-python.html#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> count_letter(content, letter):</span>
<span id="cb645-2"><a href="análisis-de-datos-con-python.html#cb645-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb645-3"><a href="análisis-de-datos-con-python.html#cb645-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">&quot;&quot;&quot;Cuenta el número de veces que una `letra` aparece en `contenido`.</span></span>
<span id="cb645-4"><a href="análisis-de-datos-con-python.html#cb645-4" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb645-5"><a href="análisis-de-datos-con-python.html#cb645-5" aria-hidden="true" tabindex="-1"></a><span class="co">  Argumentos:</span></span>
<span id="cb645-6"><a href="análisis-de-datos-con-python.html#cb645-6" aria-hidden="true" tabindex="-1"></a><span class="co">    contenido (str): La palabra (string) donde vamos a ir a buscar.</span></span>
<span id="cb645-7"><a href="análisis-de-datos-con-python.html#cb645-7" aria-hidden="true" tabindex="-1"></a><span class="co">    letra (str): La letra que vamos a ir a buscar. </span></span>
<span id="cb645-8"><a href="análisis-de-datos-con-python.html#cb645-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-9"><a href="análisis-de-datos-con-python.html#cb645-9" aria-hidden="true" tabindex="-1"></a><span class="co">  Retorna:</span></span>
<span id="cb645-10"><a href="análisis-de-datos-con-python.html#cb645-10" aria-hidden="true" tabindex="-1"></a><span class="co">    int</span></span>
<span id="cb645-11"><a href="análisis-de-datos-con-python.html#cb645-11" aria-hidden="true" tabindex="-1"></a><span class="co">  &quot;&quot;&quot;</span></span>
<span id="cb645-12"><a href="análisis-de-datos-con-python.html#cb645-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">len</span>([char <span class="cf">for</span> char <span class="kw">in</span> content <span class="cf">if</span> char <span class="op">==</span> letter])</span>
<span id="cb645-13"><a href="análisis-de-datos-con-python.html#cb645-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-14"><a href="análisis-de-datos-con-python.html#cb645-14" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> count_letter(<span class="st">&quot;nicolascampos&quot;</span>, <span class="st">&quot;s&quot;</span>)</span>
<span id="cb645-15"><a href="análisis-de-datos-con-python.html#cb645-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-16"><a href="análisis-de-datos-con-python.html#cb645-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span>
<span id="cb645-17"><a href="análisis-de-datos-con-python.html#cb645-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb645-18"><a href="análisis-de-datos-con-python.html#cb645-18" aria-hidden="true" tabindex="-1"></a>count_letter?</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.3.4:</b></p>
<p>Crear una función que calcule la estimación del ingreso según la ecuación de Mincer:</p>
<p><span class="math inline">\(Ln(Y)=\beta_0+\beta_1S+\beta_2^2 Exp+ Exp2\)</span></p>
<p>Donde:</p>
<p><span class="math inline">\(S\)</span>: años de educación</p>
<p><span class="math inline">\(Exp\)</span>: experiencia</p>
<p><span class="math inline">\(Exp2\)</span>: experiencia al cuadrado</p>
<p>Utilice: _0=9.7, _1=0.14, _2=0.07, _3=−0.001</p>
</div>
<div class="sourceCode" id="cb646"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb646-1"><a href="análisis-de-datos-con-python.html#cb646-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mincer(S , Exp):</span>
<span id="cb646-2"><a href="análisis-de-datos-con-python.html#cb646-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb646-3"><a href="análisis-de-datos-con-python.html#cb646-3" aria-hidden="true" tabindex="-1"></a>    ß<span class="dv">0</span> <span class="op">=</span> <span class="fl">9.7</span></span>
<span id="cb646-4"><a href="análisis-de-datos-con-python.html#cb646-4" aria-hidden="true" tabindex="-1"></a>    ß<span class="dv">1</span> <span class="op">=</span> <span class="fl">0.14</span></span>
<span id="cb646-5"><a href="análisis-de-datos-con-python.html#cb646-5" aria-hidden="true" tabindex="-1"></a>    ß<span class="dv">2</span> <span class="op">=</span> <span class="fl">0.07</span></span>
<span id="cb646-6"><a href="análisis-de-datos-con-python.html#cb646-6" aria-hidden="true" tabindex="-1"></a>    ß<span class="dv">3</span> <span class="op">=</span> <span class="op">-</span><span class="fl">0.001</span></span>
<span id="cb646-7"><a href="análisis-de-datos-con-python.html#cb646-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ß<span class="dv">0</span> <span class="op">+</span> ß<span class="dv">1</span><span class="op">*</span>S <span class="op">+</span> ß<span class="dv">2</span><span class="op">*</span>Exp <span class="op">+</span> ß<span class="dv">3</span><span class="op">*</span>Exp<span class="op">**</span><span class="dv">2</span></span>
<span id="cb646-8"><a href="análisis-de-datos-con-python.html#cb646-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb646-9"><a href="análisis-de-datos-con-python.html#cb646-9" aria-hidden="true" tabindex="-1"></a>educ_list <span class="op">=</span> np.array([<span class="dv">14</span>,<span class="dv">8</span>,<span class="dv">20</span>])</span>
<span id="cb646-10"><a href="análisis-de-datos-con-python.html#cb646-10" aria-hidden="true" tabindex="-1"></a>exp_list <span class="op">=</span>  np.array([<span class="dv">2</span>,<span class="dv">20</span>,<span class="dv">1</span>])</span>
<span id="cb646-11"><a href="análisis-de-datos-con-python.html#cb646-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb646-12"><a href="análisis-de-datos-con-python.html#cb646-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mincer(educ_list, exp_list))</span></code></pre></div>
</div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-i-1" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Manipulación de bases de datos (Parte I)<a href="análisis-de-datos-con-python.html#manipulación-de-bases-de-datos-parte-i-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="importar-e-inspeccionar-datos-repaso" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Importar e inspeccionar datos (repaso)<a href="análisis-de-datos-con-python.html#importar-e-inspeccionar-datos-repaso" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>¿Cuál es mi directorio?</li>
</ul>
<div class="sourceCode" id="cb647"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb647-1"><a href="análisis-de-datos-con-python.html#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb647-2"><a href="análisis-de-datos-con-python.html#cb647-2" aria-hidden="true" tabindex="-1"></a>os.getcwd()</span>
<span id="cb647-3"><a href="análisis-de-datos-con-python.html#cb647-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-4"><a href="análisis-de-datos-con-python.html#cb647-4" aria-hidden="true" tabindex="-1"></a>os.listdir()</span>
<span id="cb647-5"><a href="análisis-de-datos-con-python.html#cb647-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-6"><a href="análisis-de-datos-con-python.html#cb647-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Carpetas </span></span>
<span id="cb647-7"><a href="análisis-de-datos-con-python.html#cb647-7" aria-hidden="true" tabindex="-1"></a>principal <span class="op">=</span> os.getcwd()</span>
<span id="cb647-8"><a href="análisis-de-datos-con-python.html#cb647-8" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> principal <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">datos&quot;</span></span>
<span id="cb647-9"><a href="análisis-de-datos-con-python.html#cb647-9" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb647-10"><a href="análisis-de-datos-con-python.html#cb647-10" aria-hidden="true" tabindex="-1"></a>resultados <span class="op">=</span> principal <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">resultados&quot;</span></span>
<span id="cb647-11"><a href="análisis-de-datos-con-python.html#cb647-11" aria-hidden="true" tabindex="-1"></a>resultados</span>
<span id="cb647-12"><a href="análisis-de-datos-con-python.html#cb647-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-13"><a href="análisis-de-datos-con-python.html#cb647-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Recordar como es un dataframe de pandas </span></span>
<span id="cb647-14"><a href="análisis-de-datos-con-python.html#cb647-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd </span>
<span id="cb647-15"><a href="análisis-de-datos-con-python.html#cb647-15" aria-hidden="true" tabindex="-1"></a>exam_data  <span class="op">=</span> {<span class="st">&#39;name&#39;</span>: [<span class="st">&#39;Anastasia&#39;</span>, <span class="st">&#39;Dima&#39;</span>, <span class="st">&#39;Katherine&#39;</span>, <span class="st">&#39;James&#39;</span>, <span class="st">&#39;Emily&#39;</span>, <span class="st">&#39;Michael&#39;</span>, <span class="st">&#39;Matthew&#39;</span>, <span class="st">&#39;Laura&#39;</span>, <span class="st">&#39;Kevin&#39;</span>, <span class="st">&#39;Jonas&#39;</span>],</span>
<span id="cb647-16"><a href="análisis-de-datos-con-python.html#cb647-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;score&#39;</span>: [<span class="fl">12.5</span>, <span class="dv">9</span>, <span class="fl">16.5</span>, np.nan, <span class="dv">9</span>, <span class="dv">20</span>, <span class="fl">14.5</span>, np.nan, <span class="dv">8</span>, <span class="dv">19</span>],</span>
<span id="cb647-17"><a href="análisis-de-datos-con-python.html#cb647-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;attempts&#39;</span>: [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>],</span>
<span id="cb647-18"><a href="análisis-de-datos-con-python.html#cb647-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;qualify&#39;</span>: [<span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>, <span class="st">&#39;no&#39;</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;yes&#39;</span>, <span class="st">&#39;no&#39;</span>, <span class="st">&#39;no&#39;</span>, <span class="st">&#39;yes&#39;</span>]}</span>
<span id="cb647-19"><a href="análisis-de-datos-con-python.html#cb647-19" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;f&#39;</span>, <span class="st">&#39;g&#39;</span>, <span class="st">&#39;h&#39;</span>, <span class="st">&#39;i&#39;</span>, <span class="st">&#39;j&#39;</span>]</span>
<span id="cb647-20"><a href="análisis-de-datos-con-python.html#cb647-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-21"><a href="análisis-de-datos-con-python.html#cb647-21" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(exam_data , index <span class="op">=</span> labels)</span>
<span id="cb647-22"><a href="análisis-de-datos-con-python.html#cb647-22" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb647-23"><a href="análisis-de-datos-con-python.html#cb647-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-24"><a href="análisis-de-datos-con-python.html#cb647-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos datos que utilizaremos durante la clase</span></span>
<span id="cb647-25"><a href="análisis-de-datos-con-python.html#cb647-25" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> gapminder <span class="im">import</span> gapminder</span>
<span id="cb647-26"><a href="análisis-de-datos-con-python.html#cb647-26" aria-hidden="true" tabindex="-1"></a>gapminder</span>
<span id="cb647-27"><a href="análisis-de-datos-con-python.html#cb647-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-28"><a href="análisis-de-datos-con-python.html#cb647-28" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> gapminder</span>
<span id="cb647-29"><a href="análisis-de-datos-con-python.html#cb647-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-30"><a href="análisis-de-datos-con-python.html#cb647-30" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span>
<span id="cb647-31"><a href="análisis-de-datos-con-python.html#cb647-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-32"><a href="análisis-de-datos-con-python.html#cb647-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Acceder al nombre de las columnas</span></span>
<span id="cb647-33"><a href="análisis-de-datos-con-python.html#cb647-33" aria-hidden="true" tabindex="-1"></a>df.columns</span>
<span id="cb647-34"><a href="análisis-de-datos-con-python.html#cb647-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-35"><a href="análisis-de-datos-con-python.html#cb647-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Acceder al nombre de las filas </span></span>
<span id="cb647-36"><a href="análisis-de-datos-con-python.html#cb647-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.index)</span>
<span id="cb647-37"><a href="análisis-de-datos-con-python.html#cb647-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-38"><a href="análisis-de-datos-con-python.html#cb647-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Acceder a valores</span></span>
<span id="cb647-39"><a href="análisis-de-datos-con-python.html#cb647-39" aria-hidden="true" tabindex="-1"></a>df.values</span>
<span id="cb647-40"><a href="análisis-de-datos-con-python.html#cb647-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-41"><a href="análisis-de-datos-con-python.html#cb647-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Nuevamente el tipo </span></span>
<span id="cb647-42"><a href="análisis-de-datos-con-python.html#cb647-42" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(df)</span>
<span id="cb647-43"><a href="análisis-de-datos-con-python.html#cb647-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-44"><a href="análisis-de-datos-con-python.html#cb647-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Forma</span></span>
<span id="cb647-45"><a href="análisis-de-datos-con-python.html#cb647-45" aria-hidden="true" tabindex="-1"></a>df.shape</span>
<span id="cb647-46"><a href="análisis-de-datos-con-python.html#cb647-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-47"><a href="análisis-de-datos-con-python.html#cb647-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspeccion detallada de las columnas </span></span>
<span id="cb647-48"><a href="análisis-de-datos-con-python.html#cb647-48" aria-hidden="true" tabindex="-1"></a>df.info()</span>
<span id="cb647-49"><a href="análisis-de-datos-con-python.html#cb647-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-50"><a href="análisis-de-datos-con-python.html#cb647-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar una sola columna</span></span>
<span id="cb647-51"><a href="análisis-de-datos-con-python.html#cb647-51" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;country&#39;</span>]</span>
<span id="cb647-52"><a href="análisis-de-datos-con-python.html#cb647-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-53"><a href="análisis-de-datos-con-python.html#cb647-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un nuevo dataset</span></span>
<span id="cb647-54"><a href="análisis-de-datos-con-python.html#cb647-54" aria-hidden="true" tabindex="-1"></a>country_df <span class="op">=</span> df[<span class="st">&quot;country&quot;</span>]</span>
<span id="cb647-55"><a href="análisis-de-datos-con-python.html#cb647-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-56"><a href="análisis-de-datos-con-python.html#cb647-56" aria-hidden="true" tabindex="-1"></a>country_df</span>
<span id="cb647-57"><a href="análisis-de-datos-con-python.html#cb647-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-58"><a href="análisis-de-datos-con-python.html#cb647-58" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(country_df)</span>
<span id="cb647-59"><a href="análisis-de-datos-con-python.html#cb647-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-60"><a href="análisis-de-datos-con-python.html#cb647-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Tenemos una serie: cada columna es una serie para python. Similar a un arreglo 1D.</span></span>
<span id="cb647-61"><a href="análisis-de-datos-con-python.html#cb647-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-62"><a href="análisis-de-datos-con-python.html#cb647-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Sunconjuntos de variables </span></span>
<span id="cb647-63"><a href="análisis-de-datos-con-python.html#cb647-63" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> df[[<span class="st">&quot;country&quot;</span>, <span class="st">&quot;continent&quot;</span>, <span class="st">&quot;year&quot;</span>]]</span>
<span id="cb647-64"><a href="análisis-de-datos-con-python.html#cb647-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-65"><a href="análisis-de-datos-con-python.html#cb647-65" aria-hidden="true" tabindex="-1"></a>subset.head()</span>
<span id="cb647-66"><a href="análisis-de-datos-con-python.html#cb647-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-67"><a href="análisis-de-datos-con-python.html#cb647-67" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb647-68"><a href="análisis-de-datos-con-python.html#cb647-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-69"><a href="análisis-de-datos-con-python.html#cb647-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Buscamos la fila con el indice 2</span></span>
<span id="cb647-70"><a href="análisis-de-datos-con-python.html#cb647-70" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">3</span>]</span>
<span id="cb647-71"><a href="análisis-de-datos-con-python.html#cb647-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-72"><a href="análisis-de-datos-con-python.html#cb647-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Buscamos las filas con el id en 0 u 2</span></span>
<span id="cb647-73"><a href="análisis-de-datos-con-python.html#cb647-73" aria-hidden="true" tabindex="-1"></a>df.loc[[<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">100</span>]]</span>
<span id="cb647-74"><a href="análisis-de-datos-con-python.html#cb647-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-75"><a href="análisis-de-datos-con-python.html#cb647-75" aria-hidden="true" tabindex="-1"></a>df.iloc[<span class="dv">3</span>]</span>
<span id="cb647-76"><a href="análisis-de-datos-con-python.html#cb647-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb647-77"><a href="análisis-de-datos-con-python.html#cb647-77" aria-hidden="true" tabindex="-1"></a>df.iloc[[<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">100</span>]]</span></code></pre></div>
<ul>
<li><strong>loc</strong> se refiere al nombre de la unidad de observación (<em>labeling indexing</em>).</li>
<li><strong>iloc</strong> se refiere al índice (<em>positional indexing</em>).</li>
<li>En este caso son iguales dado que los nombres son efectivamente las posiciones. En casos donde esto
no sea así, es importante considerar la diferencia al utilizar estas funciones.</li>
</ul>
<div class="sourceCode" id="cb648"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb648-1"><a href="análisis-de-datos-con-python.html#cb648-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recordar filas y columnas</span></span>
<span id="cb648-2"><a href="análisis-de-datos-con-python.html#cb648-2" aria-hidden="true" tabindex="-1"></a>subset <span class="op">=</span> df.loc[:,[<span class="st">&quot;year&quot;</span>, <span class="st">&quot;pop&quot;</span>]]</span>
<span id="cb648-3"><a href="análisis-de-datos-con-python.html#cb648-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-4"><a href="análisis-de-datos-con-python.html#cb648-4" aria-hidden="true" tabindex="-1"></a>subset.head()</span>
<span id="cb648-5"><a href="análisis-de-datos-con-python.html#cb648-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-6"><a href="análisis-de-datos-con-python.html#cb648-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Para hacer filtros en base a condiciones</span></span>
<span id="cb648-7"><a href="análisis-de-datos-con-python.html#cb648-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtramos todas las filas que tienen como año 1967</span></span>
<span id="cb648-8"><a href="análisis-de-datos-con-python.html#cb648-8" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">&quot;year&quot;</span>] <span class="op">==</span> <span class="dv">1967</span>, [<span class="st">&quot;year&quot;</span>, <span class="st">&quot;pop&quot;</span>]]</span>
<span id="cb648-9"><a href="análisis-de-datos-con-python.html#cb648-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-10"><a href="análisis-de-datos-con-python.html#cb648-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora con múltiples condiciones</span></span>
<span id="cb648-11"><a href="análisis-de-datos-con-python.html#cb648-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Ocupar paretesis redondos</span></span>
<span id="cb648-12"><a href="análisis-de-datos-con-python.html#cb648-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Ocupar entre ellos iperadores de comparación</span></span>
<span id="cb648-13"><a href="análisis-de-datos-con-python.html#cb648-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Note como escrbimimos el número</span></span>
<span id="cb648-14"><a href="análisis-de-datos-con-python.html#cb648-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-15"><a href="análisis-de-datos-con-python.html#cb648-15" aria-hidden="true" tabindex="-1"></a>df.loc[(df[<span class="st">&quot;year&quot;</span>] <span class="op">==</span> <span class="dv">1967</span>) <span class="op">&amp;</span> (df[<span class="st">&quot;pop&quot;</span>] <span class="op">&gt;</span> <span class="dv">1_000_000</span>), [<span class="st">&quot;year&quot;</span>, <span class="st">&quot;pop&quot;</span>]]</span>
<span id="cb648-16"><a href="análisis-de-datos-con-python.html#cb648-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-17"><a href="análisis-de-datos-con-python.html#cb648-17" aria-hidden="true" tabindex="-1"></a><span class="dv">1_000_000</span></span>
<span id="cb648-18"><a href="análisis-de-datos-con-python.html#cb648-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-19"><a href="análisis-de-datos-con-python.html#cb648-19" aria-hidden="true" tabindex="-1"></a>scientists<span class="op">=</span>pd.DataFrame(</span>
<span id="cb648-20"><a href="análisis-de-datos-con-python.html#cb648-20" aria-hidden="true" tabindex="-1"></a>data<span class="op">=</span>{<span class="st">&#39;Occupation&#39;</span>:[<span class="st">&#39;Chemist&#39;</span>,<span class="st">&#39;Statistician&#39;</span>],</span>
<span id="cb648-21"><a href="análisis-de-datos-con-python.html#cb648-21" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Born&#39;</span>:[<span class="st">&#39;1920-07-25&#39;</span>, <span class="st">&#39;1876-06-13&#39;</span>],</span>
<span id="cb648-22"><a href="análisis-de-datos-con-python.html#cb648-22" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Died&#39;</span>:[<span class="st">&#39;1958-04-16&#39;</span>, <span class="st">&#39;1937-10-16&#39;</span>],</span>
<span id="cb648-23"><a href="análisis-de-datos-con-python.html#cb648-23" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Age&#39;</span>:[<span class="dv">37</span>,<span class="dv">61</span>]},</span>
<span id="cb648-24"><a href="análisis-de-datos-con-python.html#cb648-24" aria-hidden="true" tabindex="-1"></a>index<span class="op">=</span>[<span class="st">&#39;Rosaline Franklin&#39;</span>,<span class="st">&#39;William Gosset&#39;</span>],</span>
<span id="cb648-25"><a href="análisis-de-datos-con-python.html#cb648-25" aria-hidden="true" tabindex="-1"></a>columns<span class="op">=</span>[<span class="st">&#39;Occupation&#39;</span>, <span class="st">&#39;Born&#39;</span>,<span class="st">&#39;Died&#39;</span>,<span class="st">&#39;Age&#39;</span>])</span>
<span id="cb648-26"><a href="análisis-de-datos-con-python.html#cb648-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-27"><a href="análisis-de-datos-con-python.html#cb648-27" aria-hidden="true" tabindex="-1"></a>scientists</span>
<span id="cb648-28"><a href="análisis-de-datos-con-python.html#cb648-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-29"><a href="análisis-de-datos-con-python.html#cb648-29" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb648-30"><a href="análisis-de-datos-con-python.html#cb648-30" aria-hidden="true" tabindex="-1"></a>os.getcwd()</span>
<span id="cb648-31"><a href="análisis-de-datos-con-python.html#cb648-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-32"><a href="análisis-de-datos-con-python.html#cb648-32" aria-hidden="true" tabindex="-1"></a>os.listdir()</span>
<span id="cb648-33"><a href="análisis-de-datos-con-python.html#cb648-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-34"><a href="análisis-de-datos-con-python.html#cb648-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Carpetas </span></span>
<span id="cb648-35"><a href="análisis-de-datos-con-python.html#cb648-35" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os </span>
<span id="cb648-36"><a href="análisis-de-datos-con-python.html#cb648-36" aria-hidden="true" tabindex="-1"></a>principal <span class="op">=</span> os.getcwd()</span>
<span id="cb648-37"><a href="análisis-de-datos-con-python.html#cb648-37" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> principal <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">datos&quot;</span></span>
<span id="cb648-38"><a href="análisis-de-datos-con-python.html#cb648-38" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb648-39"><a href="análisis-de-datos-con-python.html#cb648-39" aria-hidden="true" tabindex="-1"></a>resultados <span class="op">=</span> principal <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">resultados&quot;</span></span>
<span id="cb648-40"><a href="análisis-de-datos-con-python.html#cb648-40" aria-hidden="true" tabindex="-1"></a>resultados</span>
<span id="cb648-41"><a href="análisis-de-datos-con-python.html#cb648-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-42"><a href="análisis-de-datos-con-python.html#cb648-42" aria-hidden="true" tabindex="-1"></a>scientists <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">scientists.csv&#39;</span>)</span>
<span id="cb648-43"><a href="análisis-de-datos-con-python.html#cb648-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-44"><a href="análisis-de-datos-con-python.html#cb648-44" aria-hidden="true" tabindex="-1"></a>scientists</span>
<span id="cb648-45"><a href="análisis-de-datos-con-python.html#cb648-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-46"><a href="análisis-de-datos-con-python.html#cb648-46" aria-hidden="true" tabindex="-1"></a>ages <span class="op">=</span> scientists[<span class="st">&#39;Age&#39;</span>]</span>
<span id="cb648-47"><a href="análisis-de-datos-con-python.html#cb648-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-48"><a href="análisis-de-datos-con-python.html#cb648-48" aria-hidden="true" tabindex="-1"></a>ages</span>
<span id="cb648-49"><a href="análisis-de-datos-con-python.html#cb648-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-50"><a href="análisis-de-datos-con-python.html#cb648-50" aria-hidden="true" tabindex="-1"></a>ages <span class="op">=</span> scientists.Age</span>
<span id="cb648-51"><a href="análisis-de-datos-con-python.html#cb648-51" aria-hidden="true" tabindex="-1"></a>ages</span>
<span id="cb648-52"><a href="análisis-de-datos-con-python.html#cb648-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-53"><a href="análisis-de-datos-con-python.html#cb648-53" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(ages)</span>
<span id="cb648-54"><a href="análisis-de-datos-con-python.html#cb648-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-55"><a href="análisis-de-datos-con-python.html#cb648-55" aria-hidden="true" tabindex="-1"></a>ages.mean()</span>
<span id="cb648-56"><a href="análisis-de-datos-con-python.html#cb648-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-57"><a href="análisis-de-datos-con-python.html#cb648-57" aria-hidden="true" tabindex="-1"></a>ages.shape</span>
<span id="cb648-58"><a href="análisis-de-datos-con-python.html#cb648-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-59"><a href="análisis-de-datos-con-python.html#cb648-59" aria-hidden="true" tabindex="-1"></a>ages.<span class="bu">min</span>()</span>
<span id="cb648-60"><a href="análisis-de-datos-con-python.html#cb648-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-61"><a href="análisis-de-datos-con-python.html#cb648-61" aria-hidden="true" tabindex="-1"></a>ages.describe()</span>
<span id="cb648-62"><a href="análisis-de-datos-con-python.html#cb648-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-63"><a href="análisis-de-datos-con-python.html#cb648-63" aria-hidden="true" tabindex="-1"></a>ages[ages <span class="op">&gt;</span> ages.mean()]</span>
<span id="cb648-64"><a href="análisis-de-datos-con-python.html#cb648-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-65"><a href="análisis-de-datos-con-python.html#cb648-65" aria-hidden="true" tabindex="-1"></a>ages[(ages <span class="op">&gt;</span> ages.mean()) <span class="op">&amp;</span> (ages <span class="op">&gt;</span> <span class="dv">75</span>)]</span>
<span id="cb648-66"><a href="análisis-de-datos-con-python.html#cb648-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-67"><a href="análisis-de-datos-con-python.html#cb648-67" aria-hidden="true" tabindex="-1"></a>ages[(ages <span class="op">&gt;</span> ages.mean()) <span class="op">&amp;</span> <span class="op">~</span>(ages <span class="op">&gt;</span> <span class="dv">75</span>)]</span>
<span id="cb648-68"><a href="análisis-de-datos-con-python.html#cb648-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-69"><a href="análisis-de-datos-con-python.html#cb648-69" aria-hidden="true" tabindex="-1"></a>ages.describe()</span>
<span id="cb648-70"><a href="análisis-de-datos-con-python.html#cb648-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-71"><a href="análisis-de-datos-con-python.html#cb648-71" aria-hidden="true" tabindex="-1"></a>ages <span class="op">+</span> <span class="dv">100</span></span>
<span id="cb648-72"><a href="análisis-de-datos-con-python.html#cb648-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-73"><a href="análisis-de-datos-con-python.html#cb648-73" aria-hidden="true" tabindex="-1"></a>scientists</span>
<span id="cb648-74"><a href="análisis-de-datos-con-python.html#cb648-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-75"><a href="análisis-de-datos-con-python.html#cb648-75" aria-hidden="true" tabindex="-1"></a>scientists[scientists[<span class="st">&#39;Age&#39;</span>] <span class="op">&gt;</span> scientists[<span class="st">&#39;Age&#39;</span>].mean()]</span>
<span id="cb648-76"><a href="análisis-de-datos-con-python.html#cb648-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-77"><a href="análisis-de-datos-con-python.html#cb648-77" aria-hidden="true" tabindex="-1"></a>scientists[<span class="st">&#39;Age&#39;</span>] <span class="op">&gt;</span> scientists[<span class="st">&#39;Age&#39;</span>].mean()</span>
<span id="cb648-78"><a href="análisis-de-datos-con-python.html#cb648-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-79"><a href="análisis-de-datos-con-python.html#cb648-79" aria-hidden="true" tabindex="-1"></a>scientists</span>
<span id="cb648-80"><a href="análisis-de-datos-con-python.html#cb648-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-81"><a href="análisis-de-datos-con-python.html#cb648-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar valores</span></span>
<span id="cb648-82"><a href="análisis-de-datos-con-python.html#cb648-82" aria-hidden="true" tabindex="-1"></a>scientists.sort_values(by<span class="op">=</span><span class="st">&quot;Age&quot;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb648-83"><a href="análisis-de-datos-con-python.html#cb648-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb648-84"><a href="análisis-de-datos-con-python.html#cb648-84" aria-hidden="true" tabindex="-1"></a>scientists.to_csv(<span class="st">&#39;resultados</span><span class="ch">\\</span><span class="st">scientists_clean.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
</div>
<div id="manipular-repaso" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Manipular (repaso)<a href="análisis-de-datos-con-python.html#manipular-repaso" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="renombrar" class="section level4 hasAnchor" number="4.4.2.1">
<h4><span class="header-section-number">4.4.2.1</span> Renombrar<a href="análisis-de-datos-con-python.html#renombrar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb649"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb649-1"><a href="análisis-de-datos-con-python.html#cb649-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Renombrar variables: diccionario + rename </span></span>
<span id="cb649-2"><a href="análisis-de-datos-con-python.html#cb649-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-3"><a href="análisis-de-datos-con-python.html#cb649-3" aria-hidden="true" tabindex="-1"></a>df.rename(columns <span class="op">=</span> {<span class="st">&#39;country&#39;</span>: <span class="st">&#39;pais&#39;</span>, <span class="st">&#39;continent&#39;</span>:<span class="st">&#39;continent&#39;</span>, </span>
<span id="cb649-4"><a href="análisis-de-datos-con-python.html#cb649-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;year&#39;</span>:<span class="st">&#39;año&#39;</span>, <span class="st">&#39;lifExp&#39;</span>:<span class="st">&#39;esperanza_vida&#39;</span>, </span>
<span id="cb649-5"><a href="análisis-de-datos-con-python.html#cb649-5" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;pop&#39;</span>:<span class="st">&#39;poblacion&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>:<span class="st">&#39;pib_percapita&#39;</span>})</span>
<span id="cb649-6"><a href="análisis-de-datos-con-python.html#cb649-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-7"><a href="análisis-de-datos-con-python.html#cb649-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ojo que no hemos asignado</span></span>
<span id="cb649-8"><a href="análisis-de-datos-con-python.html#cb649-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-9"><a href="análisis-de-datos-con-python.html#cb649-9" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb649-10"><a href="análisis-de-datos-con-python.html#cb649-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-11"><a href="análisis-de-datos-con-python.html#cb649-11" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.rename(columns <span class="op">=</span> {<span class="st">&#39;country&#39;</span>: <span class="st">&#39;pais&#39;</span>, <span class="st">&#39;continent&#39;</span>:<span class="st">&#39;continente&#39;</span>, </span>
<span id="cb649-12"><a href="análisis-de-datos-con-python.html#cb649-12" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;year&#39;</span>:<span class="st">&#39;año&#39;</span>, <span class="st">&#39;lifeExp&#39;</span>:<span class="st">&#39;esperanza_vida&#39;</span>, </span>
<span id="cb649-13"><a href="análisis-de-datos-con-python.html#cb649-13" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&#39;pop&#39;</span>:<span class="st">&#39;poblacion&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>:<span class="st">&#39;pib_percapita&#39;</span>})</span>
<span id="cb649-14"><a href="análisis-de-datos-con-python.html#cb649-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-15"><a href="análisis-de-datos-con-python.html#cb649-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Recomendable generar una nueva base de datos, va dejando un registro</span></span>
<span id="cb649-16"><a href="análisis-de-datos-con-python.html#cb649-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb649-17"><a href="análisis-de-datos-con-python.html#cb649-17" aria-hidden="true" tabindex="-1"></a>df2</span></code></pre></div>
</div>
<div id="filtrar" class="section level4 hasAnchor" number="4.4.2.2">
<h4><span class="header-section-number">4.4.2.2</span> Filtrar<a href="análisis-de-datos-con-python.html#filtrar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb650"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb650-1"><a href="análisis-de-datos-con-python.html#cb650-1" aria-hidden="true" tabindex="-1"></a>solo_asia <span class="op">=</span> df[df[<span class="st">&quot;continent&quot;</span>] <span class="op">==</span> <span class="st">&quot;Asia&quot;</span>]</span>
<span id="cb650-2"><a href="análisis-de-datos-con-python.html#cb650-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb650-3"><a href="análisis-de-datos-con-python.html#cb650-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Lo que esta adentro es un vecto booleano</span></span>
<span id="cb650-4"><a href="análisis-de-datos-con-python.html#cb650-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;continent&quot;</span>] <span class="op">==</span> <span class="st">&quot;Asia&quot;</span></span>
<span id="cb650-5"><a href="análisis-de-datos-con-python.html#cb650-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb650-6"><a href="análisis-de-datos-con-python.html#cb650-6" aria-hidden="true" tabindex="-1"></a>df_asia <span class="op">=</span> solo_asia</span>
<span id="cb650-7"><a href="análisis-de-datos-con-python.html#cb650-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_asia)</span></code></pre></div>
</div>
<div id="replazar" class="section level4 hasAnchor" number="4.4.2.3">
<h4><span class="header-section-number">4.4.2.3</span> Replazar<a href="análisis-de-datos-con-python.html#replazar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb651"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb651-1"><a href="análisis-de-datos-con-python.html#cb651-1" aria-hidden="true" tabindex="-1"></a>datos_remplazados <span class="op">=</span> df.replace(<span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;asia&quot;</span>)</span>
<span id="cb651-2"><a href="análisis-de-datos-con-python.html#cb651-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb651-3"><a href="análisis-de-datos-con-python.html#cb651-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(datos_remplazados)</span></code></pre></div>
</div>
<div id="remover" class="section level4 hasAnchor" number="4.4.2.4">
<h4><span class="header-section-number">4.4.2.4</span> Remover<a href="análisis-de-datos-con-python.html#remover" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb652"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb652-1"><a href="análisis-de-datos-con-python.html#cb652-1" aria-hidden="true" tabindex="-1"></a>remover_columna <span class="op">=</span> df.drop(<span class="st">&quot;pop&quot;</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb652-2"><a href="análisis-de-datos-con-python.html#cb652-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-3"><a href="análisis-de-datos-con-python.html#cb652-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(remover_columna)</span>
<span id="cb652-4"><a href="análisis-de-datos-con-python.html#cb652-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-5"><a href="análisis-de-datos-con-python.html#cb652-5" aria-hidden="true" tabindex="-1"></a>remover_dos_columnas <span class="op">=</span> df.drop([<span class="st">&quot;gdpPercap&quot;</span>, <span class="st">&quot;pop&quot;</span>], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb652-6"><a href="análisis-de-datos-con-python.html#cb652-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-7"><a href="análisis-de-datos-con-python.html#cb652-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(remover_dos_columnas)</span>
<span id="cb652-8"><a href="análisis-de-datos-con-python.html#cb652-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-9"><a href="análisis-de-datos-con-python.html#cb652-9" aria-hidden="true" tabindex="-1"></a>remover_filas <span class="op">=</span> df.iloc[<span class="dv">0</span>:<span class="dv">100</span>]</span>
<span id="cb652-10"><a href="análisis-de-datos-con-python.html#cb652-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-11"><a href="análisis-de-datos-con-python.html#cb652-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(remover_filas)</span>
<span id="cb652-12"><a href="análisis-de-datos-con-python.html#cb652-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-13"><a href="análisis-de-datos-con-python.html#cb652-13" aria-hidden="true" tabindex="-1"></a><span class="co">#### Agregar nuevas filas</span></span>
<span id="cb652-14"><a href="análisis-de-datos-con-python.html#cb652-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-15"><a href="análisis-de-datos-con-python.html#cb652-15" aria-hidden="true" tabindex="-1"></a>nuevas_filas <span class="op">=</span> {<span class="st">&quot;country&quot;</span>: <span class="st">&quot;nuevo&quot;</span>, </span>
<span id="cb652-16"><a href="análisis-de-datos-con-python.html#cb652-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;continent&quot;</span>: <span class="st">&quot;Asia&quot;</span>, </span>
<span id="cb652-17"><a href="análisis-de-datos-con-python.html#cb652-17" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;year&quot;</span> : <span class="st">&quot;2022&quot;</span>, </span>
<span id="cb652-18"><a href="análisis-de-datos-con-python.html#cb652-18" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;gdpPercap&quot;</span> : <span class="st">&quot;100000000&quot;</span>}</span>
<span id="cb652-19"><a href="análisis-de-datos-con-python.html#cb652-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-20"><a href="análisis-de-datos-con-python.html#cb652-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb652-21"><a href="análisis-de-datos-con-python.html#cb652-21" aria-hidden="true" tabindex="-1"></a>df.append(nuevas_filas, ignore_index <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb652-22"><a href="análisis-de-datos-con-python.html#cb652-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Para agregar un diccionario es importante la úñtima opción</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.4.1: </b></p>
<ul>
<li>Escriba una función llamada <code>ins_simpl</code> que le permita a usted obtener un resumen exploratorio de su base de datos.</li>
<li>La función debe tener como input un dataframe y retornar 5 outputs:
<ul>
<li>Primerar y últimas 8 filas.</li>
<li>Tipo de datos para todas las columnas</li>
<li>Nombre de las columnas</li>
<li>Descripción completa de la base de datos (metodo: describe)</li>
<li>El mínimo, máximo y el promedio de la columna 4 de la base de datos.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="agrupar-calculos" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Agrupar calculos<a href="análisis-de-datos-con-python.html#agrupar-calculos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb653"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb653-1"><a href="análisis-de-datos-con-python.html#cb653-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> gapminder</span>
<span id="cb653-2"><a href="análisis-de-datos-con-python.html#cb653-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-3"><a href="análisis-de-datos-con-python.html#cb653-3" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb653-4"><a href="análisis-de-datos-con-python.html#cb653-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-5"><a href="análisis-de-datos-con-python.html#cb653-5" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;year&#39;</span>)[<span class="st">&#39;gdpPercap&#39;</span>].mean()</span>
<span id="cb653-6"><a href="análisis-de-datos-con-python.html#cb653-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-7"><a href="análisis-de-datos-con-python.html#cb653-7" aria-hidden="true" tabindex="-1"></a>df.groupby([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;continent&#39;</span>])[[<span class="st">&#39;lifeExp&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>]].mean()</span>
<span id="cb653-8"><a href="análisis-de-datos-con-python.html#cb653-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-9"><a href="análisis-de-datos-con-python.html#cb653-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra forma de escribir lo mismo</span></span>
<span id="cb653-10"><a href="análisis-de-datos-con-python.html#cb653-10" aria-hidden="true" tabindex="-1"></a>df<span class="op">\</span></span>
<span id="cb653-11"><a href="análisis-de-datos-con-python.html#cb653-11" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;continent&#39;</span>])[[<span class="st">&#39;lifeExp&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>]]<span class="op">\</span></span>
<span id="cb653-12"><a href="análisis-de-datos-con-python.html#cb653-12" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb653-13"><a href="análisis-de-datos-con-python.html#cb653-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-14"><a href="análisis-de-datos-con-python.html#cb653-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Para dejarlos como un dataframe -&gt; reset_index</span></span>
<span id="cb653-15"><a href="análisis-de-datos-con-python.html#cb653-15" aria-hidden="true" tabindex="-1"></a>(df</span>
<span id="cb653-16"><a href="análisis-de-datos-con-python.html#cb653-16" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;continent&#39;</span>])[[<span class="st">&#39;lifeExp&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>]]</span>
<span id="cb653-17"><a href="análisis-de-datos-con-python.html#cb653-17" aria-hidden="true" tabindex="-1"></a>    .mean()</span>
<span id="cb653-18"><a href="análisis-de-datos-con-python.html#cb653-18" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb653-19"><a href="análisis-de-datos-con-python.html#cb653-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb653-20"><a href="análisis-de-datos-con-python.html#cb653-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-21"><a href="análisis-de-datos-con-python.html#cb653-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar lo que obtengo con visualizaciones </span></span>
<span id="cb653-22"><a href="análisis-de-datos-con-python.html#cb653-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb653-23"><a href="análisis-de-datos-con-python.html#cb653-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-24"><a href="análisis-de-datos-con-python.html#cb653-24" aria-hidden="true" tabindex="-1"></a>(df</span>
<span id="cb653-25"><a href="análisis-de-datos-con-python.html#cb653-25" aria-hidden="true" tabindex="-1"></a>     .groupby([<span class="st">&#39;year&#39;</span>])</span>
<span id="cb653-26"><a href="análisis-de-datos-con-python.html#cb653-26" aria-hidden="true" tabindex="-1"></a>     [[<span class="st">&#39;lifeExp&#39;</span>]]</span>
<span id="cb653-27"><a href="análisis-de-datos-con-python.html#cb653-27" aria-hidden="true" tabindex="-1"></a>     .mean()</span>
<span id="cb653-28"><a href="análisis-de-datos-con-python.html#cb653-28" aria-hidden="true" tabindex="-1"></a>     .plot()</span>
<span id="cb653-29"><a href="análisis-de-datos-con-python.html#cb653-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb653-30"><a href="análisis-de-datos-con-python.html#cb653-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb653-31"><a href="análisis-de-datos-con-python.html#cb653-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-32"><a href="análisis-de-datos-con-python.html#cb653-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprima un subconjunto de datos</span></span>
<span id="cb653-33"><a href="análisis-de-datos-con-python.html#cb653-33" aria-hidden="true" tabindex="-1"></a>solo_asia <span class="op">=</span> gapminder.groupby(<span class="st">&#39;continent&#39;</span>)</span>
<span id="cb653-34"><a href="análisis-de-datos-con-python.html#cb653-34" aria-hidden="true" tabindex="-1"></a>asiaDf <span class="op">=</span> solo_asia.get_group(<span class="st">&#39;Asia&#39;</span>)</span>
<span id="cb653-35"><a href="análisis-de-datos-con-python.html#cb653-35" aria-hidden="true" tabindex="-1"></a>asiaDf</span>
<span id="cb653-36"><a href="análisis-de-datos-con-python.html#cb653-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-37"><a href="análisis-de-datos-con-python.html#cb653-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar valores por grupp</span></span>
<span id="cb653-38"><a href="análisis-de-datos-con-python.html#cb653-38" aria-hidden="true" tabindex="-1"></a>gapminder[<span class="st">&quot;continent&quot;</span>].value_counts()</span>
<span id="cb653-39"><a href="análisis-de-datos-con-python.html#cb653-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-40"><a href="análisis-de-datos-con-python.html#cb653-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar un data frame: group_by </span></span>
<span id="cb653-41"><a href="análisis-de-datos-con-python.html#cb653-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-42"><a href="análisis-de-datos-con-python.html#cb653-42" aria-hidden="true" tabindex="-1"></a>df_agrupado <span class="op">=</span> df.groupby(<span class="st">&#39;year&#39;</span>)</span>
<span id="cb653-43"><a href="análisis-de-datos-con-python.html#cb653-43" aria-hidden="true" tabindex="-1"></a>df_agrupado.mean()</span>
<span id="cb653-44"><a href="análisis-de-datos-con-python.html#cb653-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-45"><a href="análisis-de-datos-con-python.html#cb653-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Sobre una variable en particular</span></span>
<span id="cb653-46"><a href="análisis-de-datos-con-python.html#cb653-46" aria-hidden="true" tabindex="-1"></a>df_agrupado <span class="op">=</span> df[[<span class="st">&#39;gdpPercap&#39;</span>, <span class="st">&#39;year&#39;</span>]].groupby(<span class="st">&#39;year&#39;</span>)</span>
<span id="cb653-47"><a href="análisis-de-datos-con-python.html#cb653-47" aria-hidden="true" tabindex="-1"></a>df_agrupado.mean()</span>
<span id="cb653-48"><a href="análisis-de-datos-con-python.html#cb653-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-49"><a href="análisis-de-datos-con-python.html#cb653-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos agrupar varias operaciones</span></span>
<span id="cb653-50"><a href="análisis-de-datos-con-python.html#cb653-50" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&quot;year&quot;</span>).agg({<span class="st">&quot;lifeExp&quot;</span>: np.mean, <span class="st">&quot;gdpPercap&quot;</span>: np.size})</span>
<span id="cb653-51"><a href="análisis-de-datos-con-python.html#cb653-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb653-52"><a href="análisis-de-datos-con-python.html#cb653-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrupar por mas de una variable: año y continente</span></span>
<span id="cb653-53"><a href="análisis-de-datos-con-python.html#cb653-53" aria-hidden="true" tabindex="-1"></a>df.groupby([<span class="st">&quot;year&quot;</span>, <span class="st">&quot;continent&quot;</span>]).agg({<span class="st">&quot;lifeExp&quot;</span>: np.mean, <span class="st">&quot;gdpPercap&quot;</span>: np.size})</span></code></pre></div>
</div>
<div id="aplicar-funciones" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Aplicar funciones<a href="análisis-de-datos-con-python.html#aplicar-funciones" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><strong>Idea</strong>: Aplicar funciones a columnas de una dataframe</li>
</ul>
<div class="sourceCode" id="cb654"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb654-1"><a href="análisis-de-datos-con-python.html#cb654-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_sq(x):</span>
<span id="cb654-2"><a href="análisis-de-datos-con-python.html#cb654-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb654-3"><a href="análisis-de-datos-con-python.html#cb654-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-4"><a href="análisis-de-datos-con-python.html#cb654-4" aria-hidden="true" tabindex="-1"></a>my_sq(<span class="dv">4</span>)</span>
<span id="cb654-5"><a href="análisis-de-datos-con-python.html#cb654-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-6"><a href="análisis-de-datos-con-python.html#cb654-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> avg_2(x, y):</span>
<span id="cb654-7"><a href="análisis-de-datos-con-python.html#cb654-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (x <span class="op">+</span> y) <span class="op">/</span> <span class="dv">2</span></span>
<span id="cb654-8"><a href="análisis-de-datos-con-python.html#cb654-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-9"><a href="análisis-de-datos-con-python.html#cb654-9" aria-hidden="true" tabindex="-1"></a>avg_2(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb654-10"><a href="análisis-de-datos-con-python.html#cb654-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-11"><a href="análisis-de-datos-con-python.html#cb654-11" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> avg_2(<span class="dv">10</span>, <span class="dv">20</span>) <span class="op">==</span> <span class="fl">15.0</span></span>
<span id="cb654-12"><a href="análisis-de-datos-con-python.html#cb654-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-13"><a href="análisis-de-datos-con-python.html#cb654-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Esta es una función muy importante para programar defensivamente!!!</span></span>
<span id="cb654-14"><a href="análisis-de-datos-con-python.html#cb654-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-15"><a href="análisis-de-datos-con-python.html#cb654-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Apliquemos funciones a un dataframe</span></span>
<span id="cb654-16"><a href="análisis-de-datos-con-python.html#cb654-16" aria-hidden="true" tabindex="-1"></a>df<span class="op">=</span>pd.DataFrame({<span class="st">&#39;a&#39;</span>:[<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>],</span>
<span id="cb654-17"><a href="análisis-de-datos-con-python.html#cb654-17" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;b&#39;</span>:[<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>]})</span>
<span id="cb654-18"><a href="análisis-de-datos-con-python.html#cb654-18" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb654-19"><a href="análisis-de-datos-con-python.html#cb654-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-20"><a href="análisis-de-datos-con-python.html#cb654-20" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;a&#39;</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb654-21"><a href="análisis-de-datos-con-python.html#cb654-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-22"><a href="análisis-de-datos-con-python.html#cb654-22" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(df[<span class="st">&#39;a&#39;</span>])</span>
<span id="cb654-23"><a href="análisis-de-datos-con-python.html#cb654-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-24"><a href="análisis-de-datos-con-python.html#cb654-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_sq(x):</span>
<span id="cb654-25"><a href="análisis-de-datos-con-python.html#cb654-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># assert isinstance(x, int)</span></span>
<span id="cb654-26"><a href="análisis-de-datos-con-python.html#cb654-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb654-27"><a href="análisis-de-datos-con-python.html#cb654-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-28"><a href="análisis-de-datos-con-python.html#cb654-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Con el metodo apply lo utilizamos </span></span>
<span id="cb654-29"><a href="análisis-de-datos-con-python.html#cb654-29" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;a&#39;</span>].<span class="bu">apply</span>(my_sq)</span>
<span id="cb654-30"><a href="análisis-de-datos-con-python.html#cb654-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-31"><a href="análisis-de-datos-con-python.html#cb654-31" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_exp(x, e):</span>
<span id="cb654-32"><a href="análisis-de-datos-con-python.html#cb654-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">**</span> e</span>
<span id="cb654-33"><a href="análisis-de-datos-con-python.html#cb654-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-34"><a href="análisis-de-datos-con-python.html#cb654-34" aria-hidden="true" tabindex="-1"></a>my_exp(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb654-35"><a href="análisis-de-datos-con-python.html#cb654-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-36"><a href="análisis-de-datos-con-python.html#cb654-36" aria-hidden="true" tabindex="-1"></a>my_exp(<span class="dv">2</span>, <span class="dv">10</span>)</span>
<span id="cb654-37"><a href="análisis-de-datos-con-python.html#cb654-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-38"><a href="análisis-de-datos-con-python.html#cb654-38" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;a&#39;</span>].<span class="bu">apply</span>(my_exp, e<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb654-39"><a href="análisis-de-datos-con-python.html#cb654-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-40"><a href="análisis-de-datos-con-python.html#cb654-40" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_me(x):</span>
<span id="cb654-41"><a href="análisis-de-datos-con-python.html#cb654-41" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb654-42"><a href="análisis-de-datos-con-python.html#cb654-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-43"><a href="análisis-de-datos-con-python.html#cb654-43" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb654-44"><a href="análisis-de-datos-con-python.html#cb654-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-45"><a href="análisis-de-datos-con-python.html#cb654-45" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">apply</span>(print_me, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb654-46"><a href="análisis-de-datos-con-python.html#cb654-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-47"><a href="análisis-de-datos-con-python.html#cb654-47" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb654-48"><a href="análisis-de-datos-con-python.html#cb654-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb654-49"><a href="análisis-de-datos-con-python.html#cb654-49" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">apply</span>(np.mean)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.4.2:</b></p>
<ul>
<li>Importe Automobile data. Llamela df_auto</li>
<li>Imprima las últimas dos filas de las primeras cinco filas</li>
<li>¿Cuál es el auto más caro de la compañía?</li>
<li>Cree un data frame con toda la info de los autos toyota.</li>
<li>¿Cuál es el número total de autos de la compañia?</li>
<li>¿Cuàl es el auto más caro de cada compañia?</li>
<li>¿Cuales son las millas promedio por compañia?</li>
<li>Ordene la base de datos por precio de los autos.</li>
</ul>
</div>
</div>
<div id="datos-como-tablas-problemas-y-soluciones" class="section level3 hasAnchor" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Datos como tablas: problemas y soluciones<a href="análisis-de-datos-con-python.html#datos-como-tablas-problemas-y-soluciones" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="ejemplo-1-encabezados-de-las-columnas-son-valores-y-no-nombres-de-variables" class="section level4 hasAnchor" number="4.4.5.1">
<h4><span class="header-section-number">4.4.5.1</span> Ejemplo 1: encabezados de las columnas son valores y no nombres de variables<a href="análisis-de-datos-con-python.html#ejemplo-1-encabezados-de-las-columnas-son-valores-y-no-nombres-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb655"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb655-1"><a href="análisis-de-datos-con-python.html#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijar directorio principal </span></span>
<span id="cb655-2"><a href="análisis-de-datos-con-python.html#cb655-2" aria-hidden="true" tabindex="-1"></a>main <span class="op">=</span> os.getcwd()</span>
<span id="cb655-3"><a href="análisis-de-datos-con-python.html#cb655-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb655-4"><a href="análisis-de-datos-con-python.html#cb655-4" aria-hidden="true" tabindex="-1"></a>main</span>
<span id="cb655-5"><a href="análisis-de-datos-con-python.html#cb655-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb655-6"><a href="análisis-de-datos-con-python.html#cb655-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijar directorios secundarios en base al principal</span></span>
<span id="cb655-7"><a href="análisis-de-datos-con-python.html#cb655-7" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> main <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">datos&quot;</span></span>
<span id="cb655-8"><a href="análisis-de-datos-con-python.html#cb655-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb655-9"><a href="análisis-de-datos-con-python.html#cb655-9" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb655-10"><a href="análisis-de-datos-con-python.html#cb655-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb655-11"><a href="análisis-de-datos-con-python.html#cb655-11" aria-hidden="true" tabindex="-1"></a>pew <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">pew-raw.csv&#39;</span>)</span>
<span id="cb655-12"><a href="análisis-de-datos-con-python.html#cb655-12" aria-hidden="true" tabindex="-1"></a>pew</span>
<span id="cb655-13"><a href="análisis-de-datos-con-python.html#cb655-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb655-14"><a href="análisis-de-datos-con-python.html#cb655-14" aria-hidden="true" tabindex="-1"></a>pew.head()</span></code></pre></div>
<ul>
<li>Noten que esta es una base de datos donde tenemos información en las columnas</li>
</ul>
<div class="sourceCode" id="cb656"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb656-1"><a href="análisis-de-datos-con-python.html#cb656-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato wide a formato 2 </span></span>
<span id="cb656-2"><a href="análisis-de-datos-con-python.html#cb656-2" aria-hidden="true" tabindex="-1"></a>pew_long <span class="op">=</span> pd.melt(pew, </span>
<span id="cb656-3"><a href="análisis-de-datos-con-python.html#cb656-3" aria-hidden="true" tabindex="-1"></a>                   id_vars <span class="op">=</span> <span class="st">&quot;religion&quot;</span>)</span>
<span id="cb656-4"><a href="análisis-de-datos-con-python.html#cb656-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-5"><a href="análisis-de-datos-con-python.html#cb656-5" aria-hidden="true" tabindex="-1"></a>pew_long.head()</span>
<span id="cb656-6"><a href="análisis-de-datos-con-python.html#cb656-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-7"><a href="análisis-de-datos-con-python.html#cb656-7" aria-hidden="true" tabindex="-1"></a>pew_long <span class="op">=</span> pd.melt(pew, </span>
<span id="cb656-8"><a href="análisis-de-datos-con-python.html#cb656-8" aria-hidden="true" tabindex="-1"></a>                   id_vars <span class="op">=</span> <span class="st">&quot;religion&quot;</span>, </span>
<span id="cb656-9"><a href="análisis-de-datos-con-python.html#cb656-9" aria-hidden="true" tabindex="-1"></a>                   var_name <span class="op">=</span> <span class="st">&quot;ingreso&quot;</span>)</span>
<span id="cb656-10"><a href="análisis-de-datos-con-python.html#cb656-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-11"><a href="análisis-de-datos-con-python.html#cb656-11" aria-hidden="true" tabindex="-1"></a>pew_long.head()</span>
<span id="cb656-12"><a href="análisis-de-datos-con-python.html#cb656-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-13"><a href="análisis-de-datos-con-python.html#cb656-13" aria-hidden="true" tabindex="-1"></a>pew_long <span class="op">=</span> pd.melt(pew, </span>
<span id="cb656-14"><a href="análisis-de-datos-con-python.html#cb656-14" aria-hidden="true" tabindex="-1"></a>                   id_vars <span class="op">=</span> <span class="st">&quot;religion&quot;</span>, </span>
<span id="cb656-15"><a href="análisis-de-datos-con-python.html#cb656-15" aria-hidden="true" tabindex="-1"></a>                   var_name <span class="op">=</span> <span class="st">&quot;ingreso&quot;</span>, </span>
<span id="cb656-16"><a href="análisis-de-datos-con-python.html#cb656-16" aria-hidden="true" tabindex="-1"></a>                   value_name <span class="op">=</span> <span class="st">&quot;Casos&quot;</span>)</span>
<span id="cb656-17"><a href="análisis-de-datos-con-python.html#cb656-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-18"><a href="análisis-de-datos-con-python.html#cb656-18" aria-hidden="true" tabindex="-1"></a>pew_long.head()</span>
<span id="cb656-19"><a href="análisis-de-datos-con-python.html#cb656-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-20"><a href="análisis-de-datos-con-python.html#cb656-20" aria-hidden="true" tabindex="-1"></a>pew</span>
<span id="cb656-21"><a href="análisis-de-datos-con-python.html#cb656-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-22"><a href="análisis-de-datos-con-python.html#cb656-22" aria-hidden="true" tabindex="-1"></a>billboard <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">billboard.csv&quot;</span>)</span>
<span id="cb656-23"><a href="análisis-de-datos-con-python.html#cb656-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-24"><a href="análisis-de-datos-con-python.html#cb656-24" aria-hidden="true" tabindex="-1"></a>billboard</span>
<span id="cb656-25"><a href="análisis-de-datos-con-python.html#cb656-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-26"><a href="análisis-de-datos-con-python.html#cb656-26" aria-hidden="true" tabindex="-1"></a>billboard_long <span class="op">=</span> pd.melt(</span>
<span id="cb656-27"><a href="análisis-de-datos-con-python.html#cb656-27" aria-hidden="true" tabindex="-1"></a>    billboard, </span>
<span id="cb656-28"><a href="análisis-de-datos-con-python.html#cb656-28" aria-hidden="true" tabindex="-1"></a>    id_vars <span class="op">=</span> [<span class="st">&quot;year&quot;</span>, <span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;time&quot;</span>, <span class="st">&quot;date.entered&quot;</span>],</span>
<span id="cb656-29"><a href="análisis-de-datos-con-python.html#cb656-29" aria-hidden="true" tabindex="-1"></a>    var_name <span class="op">=</span> <span class="st">&quot;week&quot;</span>, </span>
<span id="cb656-30"><a href="análisis-de-datos-con-python.html#cb656-30" aria-hidden="true" tabindex="-1"></a>    value_name <span class="op">=</span> <span class="st">&quot;rating&quot;</span></span>
<span id="cb656-31"><a href="análisis-de-datos-con-python.html#cb656-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb656-32"><a href="análisis-de-datos-con-python.html#cb656-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-33"><a href="análisis-de-datos-con-python.html#cb656-33" aria-hidden="true" tabindex="-1"></a>billboard_long</span>
<span id="cb656-34"><a href="análisis-de-datos-con-python.html#cb656-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-35"><a href="análisis-de-datos-con-python.html#cb656-35" aria-hidden="true" tabindex="-1"></a>billboard.shape</span>
<span id="cb656-36"><a href="análisis-de-datos-con-python.html#cb656-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb656-37"><a href="análisis-de-datos-con-python.html#cb656-37" aria-hidden="true" tabindex="-1"></a>billboard_long.shape</span></code></pre></div>
</div>
<div id="ejemplo-2-múltiples-variables-guardadas-en-la-columna-1" class="section level4 hasAnchor" number="4.4.5.2">
<h4><span class="header-section-number">4.4.5.2</span> Ejemplo 2: múltiples variables guardadas en la columna 1<a href="análisis-de-datos-con-python.html#ejemplo-2-múltiples-variables-guardadas-en-la-columna-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb657"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb657-1"><a href="análisis-de-datos-con-python.html#cb657-1" aria-hidden="true" tabindex="-1"></a>ebola <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">country_timeseries.csv&quot;</span>)</span>
<span id="cb657-2"><a href="análisis-de-datos-con-python.html#cb657-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-3"><a href="análisis-de-datos-con-python.html#cb657-3" aria-hidden="true" tabindex="-1"></a>ebola.head()</span>
<span id="cb657-4"><a href="análisis-de-datos-con-python.html#cb657-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-5"><a href="análisis-de-datos-con-python.html#cb657-5" aria-hidden="true" tabindex="-1"></a>ebola_long <span class="op">=</span> pd.melt(ebola, </span>
<span id="cb657-6"><a href="análisis-de-datos-con-python.html#cb657-6" aria-hidden="true" tabindex="-1"></a>                     id_vars <span class="op">=</span> [<span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Day&quot;</span>])</span>
<span id="cb657-7"><a href="análisis-de-datos-con-python.html#cb657-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-8"><a href="análisis-de-datos-con-python.html#cb657-8" aria-hidden="true" tabindex="-1"></a>ebola_long.head()</span>
<span id="cb657-9"><a href="análisis-de-datos-con-python.html#cb657-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-10"><a href="análisis-de-datos-con-python.html#cb657-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a quitar &quot;Cases&quot; en variables</span></span>
<span id="cb657-11"><a href="análisis-de-datos-con-python.html#cb657-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-12"><a href="análisis-de-datos-con-python.html#cb657-12" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;cases_Guinea&quot;</span>.split(<span class="st">&quot;_&quot;</span>)</span>
<span id="cb657-13"><a href="análisis-de-datos-con-python.html#cb657-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-14"><a href="análisis-de-datos-con-python.html#cb657-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Columna + tipo de acceso + metodo</span></span>
<span id="cb657-15"><a href="análisis-de-datos-con-python.html#cb657-15" aria-hidden="true" tabindex="-1"></a>variable_split <span class="op">=</span> ebola_long[<span class="st">&quot;variable&quot;</span>].<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>)</span>
<span id="cb657-16"><a href="análisis-de-datos-con-python.html#cb657-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-17"><a href="análisis-de-datos-con-python.html#cb657-17" aria-hidden="true" tabindex="-1"></a>variable_split</span>
<span id="cb657-18"><a href="análisis-de-datos-con-python.html#cb657-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-19"><a href="análisis-de-datos-con-python.html#cb657-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos que tiene por partes </span></span>
<span id="cb657-20"><a href="análisis-de-datos-con-python.html#cb657-20" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(variable_split)</span>
<span id="cb657-21"><a href="análisis-de-datos-con-python.html#cb657-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-22"><a href="análisis-de-datos-con-python.html#cb657-22" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(variable_split[<span class="dv">0</span>])</span>
<span id="cb657-23"><a href="análisis-de-datos-con-python.html#cb657-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-24"><a href="análisis-de-datos-con-python.html#cb657-24" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(variable_split[<span class="dv">0</span>][<span class="dv">0</span>])</span>
<span id="cb657-25"><a href="análisis-de-datos-con-python.html#cb657-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-26"><a href="análisis-de-datos-con-python.html#cb657-26" aria-hidden="true" tabindex="-1"></a>variable_split.<span class="bu">str</span>.get(<span class="dv">0</span>)</span>
<span id="cb657-27"><a href="análisis-de-datos-con-python.html#cb657-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-28"><a href="análisis-de-datos-con-python.html#cb657-28" aria-hidden="true" tabindex="-1"></a>variable_split.<span class="bu">str</span>.get(<span class="dv">1</span>)</span>
<span id="cb657-29"><a href="análisis-de-datos-con-python.html#cb657-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-30"><a href="análisis-de-datos-con-python.html#cb657-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a utilizar estos dos para actualizar base de datos </span></span>
<span id="cb657-31"><a href="análisis-de-datos-con-python.html#cb657-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-32"><a href="análisis-de-datos-con-python.html#cb657-32" aria-hidden="true" tabindex="-1"></a>ebola_long[<span class="st">&quot;stats&quot;</span>] <span class="op">=</span> variable_split.<span class="bu">str</span>.get(<span class="dv">0</span>)</span>
<span id="cb657-33"><a href="análisis-de-datos-con-python.html#cb657-33" aria-hidden="true" tabindex="-1"></a>ebola_long[<span class="st">&quot;country&quot;</span>] <span class="op">=</span> variable_split.<span class="bu">str</span>.get(<span class="dv">1</span>)</span>
<span id="cb657-34"><a href="análisis-de-datos-con-python.html#cb657-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-35"><a href="análisis-de-datos-con-python.html#cb657-35" aria-hidden="true" tabindex="-1"></a>ebola_long</span>
<span id="cb657-36"><a href="análisis-de-datos-con-python.html#cb657-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-37"><a href="análisis-de-datos-con-python.html#cb657-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra forma de hacer lo anterior</span></span>
<span id="cb657-38"><a href="análisis-de-datos-con-python.html#cb657-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-39"><a href="análisis-de-datos-con-python.html#cb657-39" aria-hidden="true" tabindex="-1"></a>ebola_long[[<span class="st">&quot;stats_e&quot;</span>, <span class="st">&quot;country_e&quot;</span>]] <span class="op">=</span> (ebola_long[<span class="st">&quot;variable&quot;</span>].<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>, expand <span class="op">=</span> <span class="va">True</span>))</span>
<span id="cb657-40"><a href="análisis-de-datos-con-python.html#cb657-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-41"><a href="análisis-de-datos-con-python.html#cb657-41" aria-hidden="true" tabindex="-1"></a>ebola_long</span></code></pre></div>
</div>
<div id="ejemplo-3-mútiples-tipos-de-unidades-de-observación-en-la-misma-tabla" class="section level4 hasAnchor" number="4.4.5.3">
<h4><span class="header-section-number">4.4.5.3</span> Ejemplo 3: Mútiples tipos de unidades de observación en la misma tabla<a href="análisis-de-datos-con-python.html#ejemplo-3-mútiples-tipos-de-unidades-de-observación-en-la-misma-tabla" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb658"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb658-1"><a href="análisis-de-datos-con-python.html#cb658-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables guradads en filas y columnas </span></span>
<span id="cb658-2"><a href="análisis-de-datos-con-python.html#cb658-2" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">weather.csv&quot;</span>)</span>
<span id="cb658-3"><a href="análisis-de-datos-con-python.html#cb658-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-4"><a href="análisis-de-datos-con-python.html#cb658-4" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb658-5"><a href="análisis-de-datos-con-python.html#cb658-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-6"><a href="análisis-de-datos-con-python.html#cb658-6" aria-hidden="true" tabindex="-1"></a>weather_melt <span class="op">=</span> pd.melt(</span>
<span id="cb658-7"><a href="análisis-de-datos-con-python.html#cb658-7" aria-hidden="true" tabindex="-1"></a>        weather, </span>
<span id="cb658-8"><a href="análisis-de-datos-con-python.html#cb658-8" aria-hidden="true" tabindex="-1"></a>        id_vars <span class="op">=</span> [<span class="st">&quot;id&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;element&quot;</span>], </span>
<span id="cb658-9"><a href="análisis-de-datos-con-python.html#cb658-9" aria-hidden="true" tabindex="-1"></a>        var_name <span class="op">=</span> <span class="st">&quot;day&quot;</span>,</span>
<span id="cb658-10"><a href="análisis-de-datos-con-python.html#cb658-10" aria-hidden="true" tabindex="-1"></a>        value_name <span class="op">=</span> <span class="st">&quot;temp&quot;</span></span>
<span id="cb658-11"><a href="análisis-de-datos-con-python.html#cb658-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb658-12"><a href="análisis-de-datos-con-python.html#cb658-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-13"><a href="análisis-de-datos-con-python.html#cb658-13" aria-hidden="true" tabindex="-1"></a>weather_melt</span>
<span id="cb658-14"><a href="análisis-de-datos-con-python.html#cb658-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-15"><a href="análisis-de-datos-con-python.html#cb658-15" aria-hidden="true" tabindex="-1"></a>weather_tidy <span class="op">=</span> weather_melt.pivot_table(</span>
<span id="cb658-16"><a href="análisis-de-datos-con-python.html#cb658-16" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> [<span class="st">&quot;id&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>], </span>
<span id="cb658-17"><a href="análisis-de-datos-con-python.html#cb658-17" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">&quot;element&quot;</span>, </span>
<span id="cb658-18"><a href="análisis-de-datos-con-python.html#cb658-18" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">&quot;temp&quot;</span></span>
<span id="cb658-19"><a href="análisis-de-datos-con-python.html#cb658-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb658-20"><a href="análisis-de-datos-con-python.html#cb658-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-21"><a href="análisis-de-datos-con-python.html#cb658-21" aria-hidden="true" tabindex="-1"></a>weather_tidy</span>
<span id="cb658-22"><a href="análisis-de-datos-con-python.html#cb658-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Nos permite ver la jerarquí ad elos datos que tenemos</span></span>
<span id="cb658-23"><a href="análisis-de-datos-con-python.html#cb658-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-24"><a href="análisis-de-datos-con-python.html#cb658-24" aria-hidden="true" tabindex="-1"></a>weather_tidy.reset_index()</span>
<span id="cb658-25"><a href="análisis-de-datos-con-python.html#cb658-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-26"><a href="análisis-de-datos-con-python.html#cb658-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple Types of Observational Unit in Same Table (i.e De-nomalized Table)</span></span>
<span id="cb658-27"><a href="análisis-de-datos-con-python.html#cb658-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-28"><a href="análisis-de-datos-con-python.html#cb658-28" aria-hidden="true" tabindex="-1"></a>billboard_long.head()</span>
<span id="cb658-29"><a href="análisis-de-datos-con-python.html#cb658-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-30"><a href="análisis-de-datos-con-python.html#cb658-30" aria-hidden="true" tabindex="-1"></a>billboard_long.loc[billboard_long[<span class="st">&quot;track&quot;</span>] <span class="op">==</span> <span class="st">&quot;Loser&quot;</span>]</span>
<span id="cb658-31"><a href="análisis-de-datos-con-python.html#cb658-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-32"><a href="análisis-de-datos-con-python.html#cb658-32" aria-hidden="true" tabindex="-1"></a>billboard_songs <span class="op">=</span> billboard_long[[<span class="st">&quot;year&quot;</span>, <span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;time&quot;</span>]]</span>
<span id="cb658-33"><a href="análisis-de-datos-con-python.html#cb658-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-34"><a href="análisis-de-datos-con-python.html#cb658-34" aria-hidden="true" tabindex="-1"></a>billboard_songs.shape</span>
<span id="cb658-35"><a href="análisis-de-datos-con-python.html#cb658-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-36"><a href="análisis-de-datos-con-python.html#cb658-36" aria-hidden="true" tabindex="-1"></a>billboard_songs.head()</span>
<span id="cb658-37"><a href="análisis-de-datos-con-python.html#cb658-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-38"><a href="análisis-de-datos-con-python.html#cb658-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar duplicados </span></span>
<span id="cb658-39"><a href="análisis-de-datos-con-python.html#cb658-39" aria-hidden="true" tabindex="-1"></a>billboard_songs <span class="op">=</span> billboard_songs.drop_duplicates()</span>
<span id="cb658-40"><a href="análisis-de-datos-con-python.html#cb658-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-41"><a href="análisis-de-datos-con-python.html#cb658-41" aria-hidden="true" tabindex="-1"></a>billboard_songs[<span class="st">&quot;id&quot;</span>] <span class="op">=</span> <span class="bu">range</span>(<span class="bu">len</span>(billboard_songs))</span>
<span id="cb658-42"><a href="análisis-de-datos-con-python.html#cb658-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-43"><a href="análisis-de-datos-con-python.html#cb658-43" aria-hidden="true" tabindex="-1"></a>billboard_songs.head()</span>
<span id="cb658-44"><a href="análisis-de-datos-con-python.html#cb658-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-45"><a href="análisis-de-datos-con-python.html#cb658-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos </span></span>
<span id="cb658-46"><a href="análisis-de-datos-con-python.html#cb658-46" aria-hidden="true" tabindex="-1"></a>resultados <span class="op">=</span> main <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">resultados&quot;</span></span>
<span id="cb658-47"><a href="análisis-de-datos-con-python.html#cb658-47" aria-hidden="true" tabindex="-1"></a>billboard_songs.to_csv(<span class="st">&quot;resultados</span><span class="ch">\\</span><span class="st">billboard_songs.csv&quot;</span>, index <span class="op">=</span>  <span class="va">False</span>)</span>
<span id="cb658-48"><a href="análisis-de-datos-con-python.html#cb658-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-49"><a href="análisis-de-datos-con-python.html#cb658-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinemos dos bases de datos </span></span>
<span id="cb658-50"><a href="análisis-de-datos-con-python.html#cb658-50" aria-hidden="true" tabindex="-1"></a>billboard_ratings <span class="op">=</span> billboard_long.merge(</span>
<span id="cb658-51"><a href="análisis-de-datos-con-python.html#cb658-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-52"><a href="análisis-de-datos-con-python.html#cb658-52" aria-hidden="true" tabindex="-1"></a>    billboard_songs, </span>
<span id="cb658-53"><a href="análisis-de-datos-con-python.html#cb658-53" aria-hidden="true" tabindex="-1"></a>    on <span class="op">=</span> [<span class="st">&quot;year&quot;</span>, <span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;time&quot;</span>]</span>
<span id="cb658-54"><a href="análisis-de-datos-con-python.html#cb658-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-55"><a href="análisis-de-datos-con-python.html#cb658-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-56"><a href="análisis-de-datos-con-python.html#cb658-56" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb658-57"><a href="análisis-de-datos-con-python.html#cb658-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-58"><a href="análisis-de-datos-con-python.html#cb658-58" aria-hidden="true" tabindex="-1"></a>billboard_ratings.head()</span>
<span id="cb658-59"><a href="análisis-de-datos-con-python.html#cb658-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-60"><a href="análisis-de-datos-con-python.html#cb658-60" aria-hidden="true" tabindex="-1"></a>billboard_ratings <span class="op">=</span> billboard_ratings[[<span class="st">&quot;id&quot;</span>, <span class="st">&quot;date.entered&quot;</span>, <span class="st">&quot;week&quot;</span>, <span class="st">&quot;rating&quot;</span>]]</span>
<span id="cb658-61"><a href="análisis-de-datos-con-python.html#cb658-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-62"><a href="análisis-de-datos-con-python.html#cb658-62" aria-hidden="true" tabindex="-1"></a>billboard_ratings.head()</span>
<span id="cb658-63"><a href="análisis-de-datos-con-python.html#cb658-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-64"><a href="análisis-de-datos-con-python.html#cb658-64" aria-hidden="true" tabindex="-1"></a>billboard_ratings.sample(<span class="dv">20</span>)</span>
<span id="cb658-65"><a href="análisis-de-datos-con-python.html#cb658-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-66"><a href="análisis-de-datos-con-python.html#cb658-66" aria-hidden="true" tabindex="-1"></a>billboard_songs.to_csv(<span class="st">&quot;resultados</span><span class="ch">\\</span><span class="st">billboard_ratings.csv&quot;</span>, index <span class="op">=</span>  <span class="va">False</span>)</span>
<span id="cb658-67"><a href="análisis-de-datos-con-python.html#cb658-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-68"><a href="análisis-de-datos-con-python.html#cb658-68" aria-hidden="true" tabindex="-1"></a>billboard_ratings.info()</span>
<span id="cb658-69"><a href="análisis-de-datos-con-python.html#cb658-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb658-70"><a href="análisis-de-datos-con-python.html#cb658-70" aria-hidden="true" tabindex="-1"></a>billboard_long.info()</span></code></pre></div>
</div>
</div>
<div id="concatenar-data-frames" class="section level3 hasAnchor" number="4.4.6">
<h3><span class="header-section-number">4.4.6</span> Concatenar data frames<a href="análisis-de-datos-con-python.html#concatenar-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb659"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb659-1"><a href="análisis-de-datos-con-python.html#cb659-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb659-2"><a href="análisis-de-datos-con-python.html#cb659-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-3"><a href="análisis-de-datos-con-python.html#cb659-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">concat_1.csv&#39;</span>)</span>
<span id="cb659-4"><a href="análisis-de-datos-con-python.html#cb659-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">concat_2.csv&#39;</span>)</span>
<span id="cb659-5"><a href="análisis-de-datos-con-python.html#cb659-5" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">concat_3.csv&#39;</span>)</span>
<span id="cb659-6"><a href="análisis-de-datos-con-python.html#cb659-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-7"><a href="análisis-de-datos-con-python.html#cb659-7" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb659-8"><a href="análisis-de-datos-con-python.html#cb659-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-9"><a href="análisis-de-datos-con-python.html#cb659-9" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb659-10"><a href="análisis-de-datos-con-python.html#cb659-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-11"><a href="análisis-de-datos-con-python.html#cb659-11" aria-hidden="true" tabindex="-1"></a>df3</span>
<span id="cb659-12"><a href="análisis-de-datos-con-python.html#cb659-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-13"><a href="análisis-de-datos-con-python.html#cb659-13" aria-hidden="true" tabindex="-1"></a>row_concat <span class="op">=</span> pd.concat([df1, df2, df3])</span>
<span id="cb659-14"><a href="análisis-de-datos-con-python.html#cb659-14" aria-hidden="true" tabindex="-1"></a>row_concat</span>
<span id="cb659-15"><a href="análisis-de-datos-con-python.html#cb659-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-16"><a href="análisis-de-datos-con-python.html#cb659-16" aria-hidden="true" tabindex="-1"></a>row_concat.loc[<span class="dv">0</span>]</span>
<span id="cb659-17"><a href="análisis-de-datos-con-python.html#cb659-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-18"><a href="análisis-de-datos-con-python.html#cb659-18" aria-hidden="true" tabindex="-1"></a>row_concat.iloc[<span class="dv">0</span>]</span>
<span id="cb659-19"><a href="análisis-de-datos-con-python.html#cb659-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-20"><a href="análisis-de-datos-con-python.html#cb659-20" aria-hidden="true" tabindex="-1"></a>row_concat.ix[<span class="dv">0</span>]</span>
<span id="cb659-21"><a href="análisis-de-datos-con-python.html#cb659-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-22"><a href="análisis-de-datos-con-python.html#cb659-22" aria-hidden="true" tabindex="-1"></a>row_concat_reset <span class="op">=</span> pd.concat([df1, df2, df3], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb659-23"><a href="análisis-de-datos-con-python.html#cb659-23" aria-hidden="true" tabindex="-1"></a>row_concat_reset</span>
<span id="cb659-24"><a href="análisis-de-datos-con-python.html#cb659-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-25"><a href="análisis-de-datos-con-python.html#cb659-25" aria-hidden="true" tabindex="-1"></a>new_row_series <span class="op">=</span> pd.Series([<span class="st">&#39;n1&#39;</span>, <span class="st">&#39;n2&#39;</span>, <span class="st">&#39;n3&#39;</span>, <span class="st">&#39;n4&#39;</span>])</span>
<span id="cb659-26"><a href="análisis-de-datos-con-python.html#cb659-26" aria-hidden="true" tabindex="-1"></a>new_row_series</span>
<span id="cb659-27"><a href="análisis-de-datos-con-python.html#cb659-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-28"><a href="análisis-de-datos-con-python.html#cb659-28" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, new_row_series])</span>
<span id="cb659-29"><a href="análisis-de-datos-con-python.html#cb659-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-30"><a href="análisis-de-datos-con-python.html#cb659-30" aria-hidden="true" tabindex="-1"></a>new_row_data <span class="op">=</span> pd.DataFrame([[<span class="st">&#39;n1&#39;</span>, <span class="st">&#39;n2&#39;</span>, <span class="st">&#39;n3&#39;</span>, <span class="st">&#39;n4&#39;</span>]],</span>
<span id="cb659-31"><a href="análisis-de-datos-con-python.html#cb659-31" aria-hidden="true" tabindex="-1"></a>                            columns<span class="op">=</span>[<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>, <span class="st">&#39;D&#39;</span>])</span>
<span id="cb659-32"><a href="análisis-de-datos-con-python.html#cb659-32" aria-hidden="true" tabindex="-1"></a>new_row_data</span>
<span id="cb659-33"><a href="análisis-de-datos-con-python.html#cb659-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-34"><a href="análisis-de-datos-con-python.html#cb659-34" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, new_row_data])</span>
<span id="cb659-35"><a href="análisis-de-datos-con-python.html#cb659-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-36"><a href="análisis-de-datos-con-python.html#cb659-36" aria-hidden="true" tabindex="-1"></a>col_concat <span class="op">=</span> pd.concat([df1, df2, df3], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb659-37"><a href="análisis-de-datos-con-python.html#cb659-37" aria-hidden="true" tabindex="-1"></a>col_concat</span>
<span id="cb659-38"><a href="análisis-de-datos-con-python.html#cb659-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-39"><a href="análisis-de-datos-con-python.html#cb659-39" aria-hidden="true" tabindex="-1"></a>col_concat[<span class="st">&#39;A&#39;</span>]</span>
<span id="cb659-40"><a href="análisis-de-datos-con-python.html#cb659-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-41"><a href="análisis-de-datos-con-python.html#cb659-41" aria-hidden="true" tabindex="-1"></a>col_concat_ignore <span class="op">=</span> pd.concat([df1, df2, df3], axis<span class="op">=</span><span class="dv">1</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb659-42"><a href="análisis-de-datos-con-python.html#cb659-42" aria-hidden="true" tabindex="-1"></a>col_concat_ignore</span>
<span id="cb659-43"><a href="análisis-de-datos-con-python.html#cb659-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-44"><a href="análisis-de-datos-con-python.html#cb659-44" aria-hidden="true" tabindex="-1"></a>df1.columns<span class="op">=</span>[<span class="st">&#39;A&#39;</span>,<span class="st">&#39;B&#39;</span>,<span class="st">&#39;C&#39;</span>,<span class="st">&#39;D&#39;</span>]</span>
<span id="cb659-45"><a href="análisis-de-datos-con-python.html#cb659-45" aria-hidden="true" tabindex="-1"></a>df2.columns<span class="op">=</span>[<span class="st">&#39;E&#39;</span>,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;G&#39;</span>,<span class="st">&#39;H&#39;</span>]</span>
<span id="cb659-46"><a href="análisis-de-datos-con-python.html#cb659-46" aria-hidden="true" tabindex="-1"></a>df3.columns<span class="op">=</span>[<span class="st">&#39;A&#39;</span>,<span class="st">&#39;H&#39;</span>,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;C&#39;</span>]</span>
<span id="cb659-47"><a href="análisis-de-datos-con-python.html#cb659-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-48"><a href="análisis-de-datos-con-python.html#cb659-48" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb659-49"><a href="análisis-de-datos-con-python.html#cb659-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-50"><a href="análisis-de-datos-con-python.html#cb659-50" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb659-51"><a href="análisis-de-datos-con-python.html#cb659-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-52"><a href="análisis-de-datos-con-python.html#cb659-52" aria-hidden="true" tabindex="-1"></a>df3</span>
<span id="cb659-53"><a href="análisis-de-datos-con-python.html#cb659-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb659-54"><a href="análisis-de-datos-con-python.html#cb659-54" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, df2, df3])</span></code></pre></div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-ii-1" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Manipulación de bases de datos (Parte II)<a href="análisis-de-datos-con-python.html#manipulación-de-bases-de-datos-parte-ii-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb660"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb660-1"><a href="análisis-de-datos-con-python.html#cb660-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preambulo</span></span>
<span id="cb660-2"><a href="análisis-de-datos-con-python.html#cb660-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb660-3"><a href="análisis-de-datos-con-python.html#cb660-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías: </span></span>
<span id="cb660-4"><a href="análisis-de-datos-con-python.html#cb660-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb660-5"><a href="análisis-de-datos-con-python.html#cb660-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd                    <span class="co"># datos</span></span>
<span id="cb660-6"><a href="análisis-de-datos-con-python.html#cb660-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl               <span class="co"># graficos</span></span>
<span id="cb660-7"><a href="análisis-de-datos-con-python.html#cb660-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np                     <span class="co"># arreglos</span></span>
<span id="cb660-8"><a href="análisis-de-datos-con-python.html#cb660-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt                  <span class="co"># fechas </span></span>
<span id="cb660-9"><a href="análisis-de-datos-con-python.html#cb660-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os                              <span class="co"># directorios </span></span>
<span id="cb660-10"><a href="análisis-de-datos-con-python.html#cb660-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb660-11"><a href="análisis-de-datos-con-python.html#cb660-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fecha</span></span>
<span id="cb660-12"><a href="análisis-de-datos-con-python.html#cb660-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.date.today())</span></code></pre></div>
<div id="aplicar-funciones-a-columnas-de-una-base-de-datos" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Aplicar funciones a columnas de una base de datos<a href="análisis-de-datos-con-python.html#aplicar-funciones-a-columnas-de-una-base-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><strong>Idea</strong>: Aplicar funciones a columnas de una dataframe</li>
<li>Recuerden todo el instrumental que aprendimos en las clases anteriores respecto al uso de funciones!</li>
</ul>
<div class="sourceCode" id="cb661"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb661-1"><a href="análisis-de-datos-con-python.html#cb661-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apliquemos funciones a un dataframe</span></span>
<span id="cb661-2"><a href="análisis-de-datos-con-python.html#cb661-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-3"><a href="análisis-de-datos-con-python.html#cb661-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;a&#39;</span>:[<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>],</span>
<span id="cb661-4"><a href="análisis-de-datos-con-python.html#cb661-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;b&#39;</span>:[<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>]})</span>
<span id="cb661-5"><a href="análisis-de-datos-con-python.html#cb661-5" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb661-6"><a href="análisis-de-datos-con-python.html#cb661-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-7"><a href="análisis-de-datos-con-python.html#cb661-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplico directamente a una columna, la cual llamo por su nombre</span></span>
<span id="cb661-8"><a href="análisis-de-datos-con-python.html#cb661-8" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df[<span class="st">&#39;a&#39;</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb661-9"><a href="análisis-de-datos-con-python.html#cb661-9" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb661-10"><a href="análisis-de-datos-con-python.html#cb661-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-11"><a href="análisis-de-datos-con-python.html#cb661-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;b&#39;</span>] <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb661-12"><a href="análisis-de-datos-con-python.html#cb661-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-13"><a href="análisis-de-datos-con-python.html#cb661-13" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(df[<span class="st">&#39;a&#39;</span>])</span>
<span id="cb661-14"><a href="análisis-de-datos-con-python.html#cb661-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-15"><a href="análisis-de-datos-con-python.html#cb661-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Defino una función cualquiera, tan compleja como lo desee</span></span>
<span id="cb661-16"><a href="análisis-de-datos-con-python.html#cb661-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_sq(x):</span>
<span id="cb661-17"><a href="análisis-de-datos-con-python.html#cb661-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">**</span> <span class="dv">2</span></span>
<span id="cb661-18"><a href="análisis-de-datos-con-python.html#cb661-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-19"><a href="análisis-de-datos-con-python.html#cb661-19" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;b&#39;</span>].<span class="bu">apply</span>(my_sq)</span>
<span id="cb661-20"><a href="análisis-de-datos-con-python.html#cb661-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-21"><a href="análisis-de-datos-con-python.html#cb661-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacer lo mismo con funciones que tengan más de un parámetro</span></span>
<span id="cb661-22"><a href="análisis-de-datos-con-python.html#cb661-22" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_exp(x, e):</span>
<span id="cb661-23"><a href="análisis-de-datos-con-python.html#cb661-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">**</span> e</span>
<span id="cb661-24"><a href="análisis-de-datos-con-python.html#cb661-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-25"><a href="análisis-de-datos-con-python.html#cb661-25" aria-hidden="true" tabindex="-1"></a>my_exp(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb661-26"><a href="análisis-de-datos-con-python.html#cb661-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-27"><a href="análisis-de-datos-con-python.html#cb661-27" aria-hidden="true" tabindex="-1"></a>my_exp(<span class="dv">2</span>, <span class="dv">10</span>)</span>
<span id="cb661-28"><a href="análisis-de-datos-con-python.html#cb661-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-29"><a href="análisis-de-datos-con-python.html#cb661-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que puedo incluir valores para los argumentos adicionales al principal! </span></span>
<span id="cb661-30"><a href="análisis-de-datos-con-python.html#cb661-30" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;a&#39;</span>].<span class="bu">apply</span>(my_exp, e<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb661-31"><a href="análisis-de-datos-con-python.html#cb661-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-32"><a href="análisis-de-datos-con-python.html#cb661-32" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_me(x):</span>
<span id="cb661-33"><a href="análisis-de-datos-con-python.html#cb661-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x)</span>
<span id="cb661-34"><a href="análisis-de-datos-con-python.html#cb661-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-35"><a href="análisis-de-datos-con-python.html#cb661-35" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb661-36"><a href="análisis-de-datos-con-python.html#cb661-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-37"><a href="análisis-de-datos-con-python.html#cb661-37" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">apply</span>(print_me, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb661-38"><a href="análisis-de-datos-con-python.html#cb661-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb661-39"><a href="análisis-de-datos-con-python.html#cb661-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo incluir funciones de otras librerías de python </span></span>
<span id="cb661-40"><a href="análisis-de-datos-con-python.html#cb661-40" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">apply</span>(np.mean)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.5.1: </b> + Escribir una función que reciba una muestra de números en una lista y devuelva un diccionario con su media, varianza y desviación estandar.</p>
</div>
<div class="sourceCode" id="cb662"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb662-1"><a href="análisis-de-datos-con-python.html#cb662-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb662-2"><a href="análisis-de-datos-con-python.html#cb662-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> statistics(sample): </span>
<span id="cb662-3"><a href="análisis-de-datos-con-python.html#cb662-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb662-4"><a href="análisis-de-datos-con-python.html#cb662-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Función que calcula media, varianza y desv.estandar </span></span>
<span id="cb662-5"><a href="análisis-de-datos-con-python.html#cb662-5" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb662-6"><a href="análisis-de-datos-con-python.html#cb662-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Parámetros:</span></span>
<span id="cb662-7"><a href="análisis-de-datos-con-python.html#cb662-7" aria-hidden="true" tabindex="-1"></a><span class="co">    sample: Es una lista de números </span></span>
<span id="cb662-8"><a href="análisis-de-datos-con-python.html#cb662-8" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb662-9"><a href="análisis-de-datos-con-python.html#cb662-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Output </span></span>
<span id="cb662-10"><a href="análisis-de-datos-con-python.html#cb662-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Diccionario con media, varianza y desv. estandar. </span></span>
<span id="cb662-11"><a href="análisis-de-datos-con-python.html#cb662-11" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb662-12"><a href="análisis-de-datos-con-python.html#cb662-12" aria-hidden="true" tabindex="-1"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb662-13"><a href="análisis-de-datos-con-python.html#cb662-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb662-14"><a href="análisis-de-datos-con-python.html#cb662-14" aria-hidden="true" tabindex="-1"></a>    stat <span class="op">=</span> {}</span>
<span id="cb662-15"><a href="análisis-de-datos-con-python.html#cb662-15" aria-hidden="true" tabindex="-1"></a>    stat[<span class="st">&#39;media&#39;</span>] <span class="op">=</span> <span class="bu">sum</span>(sample)<span class="op">/</span><span class="bu">len</span>(sample)</span>
<span id="cb662-16"><a href="análisis-de-datos-con-python.html#cb662-16" aria-hidden="true" tabindex="-1"></a>    stat[<span class="st">&#39;varianza&#39;</span>] <span class="op">=</span> <span class="bu">sum</span>(np.square(sample))<span class="op">/</span><span class="bu">len</span>(sample)<span class="op">-</span>stat[<span class="st">&#39;media&#39;</span>]<span class="op">**</span><span class="dv">2</span></span>
<span id="cb662-17"><a href="análisis-de-datos-con-python.html#cb662-17" aria-hidden="true" tabindex="-1"></a>    stat[<span class="st">&#39;desviacion estandar&#39;</span>] <span class="op">=</span> stat[<span class="st">&#39;varianza&#39;</span>]<span class="op">**</span><span class="fl">0.5</span></span>
<span id="cb662-18"><a href="análisis-de-datos-con-python.html#cb662-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> stat</span>
<span id="cb662-19"><a href="análisis-de-datos-con-python.html#cb662-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb662-20"><a href="análisis-de-datos-con-python.html#cb662-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(statistics([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]))</span></code></pre></div>
</div>
<div id="dividir-una-base-de-datos-por-grupos" class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Dividir una base de datos por grupos<a href="análisis-de-datos-con-python.html#dividir-una-base-de-datos-por-grupos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb663"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb663-1"><a href="análisis-de-datos-con-python.html#cb663-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(</span>
<span id="cb663-2"><a href="análisis-de-datos-con-python.html#cb663-2" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;https://raw.githubusercontent.com/asalber/manual-python/master/datos/colesterol.csv&#39;</span>)</span>
<span id="cb663-3"><a href="análisis-de-datos-con-python.html#cb663-3" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb663-4"><a href="análisis-de-datos-con-python.html#cb663-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-5"><a href="análisis-de-datos-con-python.html#cb663-5" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;sexo&#39;</span>).groups</span>
<span id="cb663-6"><a href="análisis-de-datos-con-python.html#cb663-6" aria-hidden="true" tabindex="-1"></a><span class="co"># groups devuelve un diccionario cuyas claves categoricas y valores son indices</span></span>
<span id="cb663-7"><a href="análisis-de-datos-con-python.html#cb663-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-8"><a href="análisis-de-datos-con-python.html#cb663-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Si quiero obtener uno de estos grupos utilizo get_group</span></span>
<span id="cb663-9"><a href="análisis-de-datos-con-python.html#cb663-9" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;sexo&#39;</span>).get_group(<span class="st">&#39;M&#39;</span>)</span>
<span id="cb663-10"><a href="análisis-de-datos-con-python.html#cb663-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-11"><a href="análisis-de-datos-con-python.html#cb663-11" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;sexo&#39;</span>).get_group(<span class="st">&#39;H&#39;</span>)</span>
<span id="cb663-12"><a href="análisis-de-datos-con-python.html#cb663-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-13"><a href="análisis-de-datos-con-python.html#cb663-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacer esto es útil si es que quiero aplicar una función a ciertos subconjuntos de observaciones </span></span>
<span id="cb663-14"><a href="análisis-de-datos-con-python.html#cb663-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-15"><a href="análisis-de-datos-con-python.html#cb663-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Voy a agrupar por sexo y voy a calcular el promedio de cada variable</span></span>
<span id="cb663-16"><a href="análisis-de-datos-con-python.html#cb663-16" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;sexo&#39;</span>).agg(np.mean)</span>
<span id="cb663-17"><a href="análisis-de-datos-con-python.html#cb663-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-18"><a href="análisis-de-datos-con-python.html#cb663-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que utilizamos agg. Este metodo aplica la función a todo el dataframe</span></span>
<span id="cb663-19"><a href="análisis-de-datos-con-python.html#cb663-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-20"><a href="análisis-de-datos-con-python.html#cb663-20" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;sexo&#39;</span>).agg(np.<span class="bu">sum</span>)</span>
<span id="cb663-21"><a href="análisis-de-datos-con-python.html#cb663-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb663-22"><a href="análisis-de-datos-con-python.html#cb663-22" aria-hidden="true" tabindex="-1"></a>df.groupby(<span class="st">&#39;sexo&#39;</span>).agg(np.std)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.5.2:</b> Análisis exploratorio de una base de datos</p>
<ol style="list-style-type: decimal">
<li>Importe desde su carpeta de trabajo <code>auto.csv</code>, llame a esta base de datos <code>df</code>.</li>
<li>Imprima las últimas dos filas de las primeras cinco filas de <code>df</code>.</li>
<li>¿Cuál es el auto más caro de la compañía?</li>
<li>Cree un data frame con toda la información disponible para los autos toyota.</li>
<li>¿Cuál es el número total de autos de la compañia?</li>
<li>¿Cuál es el auto más caro de cada compañia?</li>
<li>¿Cuales son las millas promedio por compañia?</li>
<li>Ordene la base de datos por precio de los autos.</li>
</ol>
</div>
<div class="sourceCode" id="cb664"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb664-1"><a href="análisis-de-datos-con-python.html#cb664-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importar datos </span></span>
<span id="cb664-2"><a href="análisis-de-datos-con-python.html#cb664-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-3"><a href="análisis-de-datos-con-python.html#cb664-3" aria-hidden="true" tabindex="-1"></a>main <span class="op">=</span> os.getcwd()</span>
<span id="cb664-4"><a href="análisis-de-datos-con-python.html#cb664-4" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> main <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">datos&quot;</span></span>
<span id="cb664-5"><a href="análisis-de-datos-con-python.html#cb664-5" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb664-6"><a href="análisis-de-datos-con-python.html#cb664-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-7"><a href="análisis-de-datos-con-python.html#cb664-7" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">auto.csv&quot;</span>)</span>
<span id="cb664-8"><a href="análisis-de-datos-con-python.html#cb664-8" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb664-9"><a href="análisis-de-datos-con-python.html#cb664-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-10"><a href="análisis-de-datos-con-python.html#cb664-10" aria-hidden="true" tabindex="-1"></a>df.tail()</span>
<span id="cb664-11"><a href="análisis-de-datos-con-python.html#cb664-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-12"><a href="análisis-de-datos-con-python.html#cb664-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Inspeccionar </span></span>
<span id="cb664-13"><a href="análisis-de-datos-con-python.html#cb664-13" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">5</span>).tail(<span class="dv">2</span>)</span>
<span id="cb664-14"><a href="análisis-de-datos-con-python.html#cb664-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-15"><a href="análisis-de-datos-con-python.html#cb664-15" aria-hidden="true" tabindex="-1"></a><span class="co"># El auto más caro </span></span>
<span id="cb664-16"><a href="análisis-de-datos-con-python.html#cb664-16" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&#39;company&#39;</span>,<span class="st">&#39;price&#39;</span>]][df.price<span class="op">==</span>df[<span class="st">&#39;price&#39;</span>].<span class="bu">max</span>()]</span>
<span id="cb664-17"><a href="análisis-de-datos-con-python.html#cb664-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-18"><a href="análisis-de-datos-con-python.html#cb664-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Imprima todos los autos de toyota y su información</span></span>
<span id="cb664-19"><a href="análisis-de-datos-con-python.html#cb664-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-20"><a href="análisis-de-datos-con-python.html#cb664-20" aria-hidden="true" tabindex="-1"></a>toyotaDf <span class="op">=</span> df.groupby(<span class="st">&#39;company&#39;</span>).get_group(<span class="st">&#39;toyota&#39;</span>)</span>
<span id="cb664-21"><a href="análisis-de-datos-con-python.html#cb664-21" aria-hidden="true" tabindex="-1"></a>toyotaDf</span>
<span id="cb664-22"><a href="análisis-de-datos-con-python.html#cb664-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-23"><a href="análisis-de-datos-con-python.html#cb664-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. ¿Cuál es el número total de autos por compañia? </span></span>
<span id="cb664-24"><a href="análisis-de-datos-con-python.html#cb664-24" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;company&#39;</span>].value_counts()</span>
<span id="cb664-25"><a href="análisis-de-datos-con-python.html#cb664-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-26"><a href="análisis-de-datos-con-python.html#cb664-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. ¿Cuál es el auto más caro de cada compañia?</span></span>
<span id="cb664-27"><a href="análisis-de-datos-con-python.html#cb664-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-28"><a href="análisis-de-datos-con-python.html#cb664-28" aria-hidden="true" tabindex="-1"></a>companias <span class="op">=</span> df.groupby(<span class="st">&#39;company&#39;</span>)</span>
<span id="cb664-29"><a href="análisis-de-datos-con-python.html#cb664-29" aria-hidden="true" tabindex="-1"></a>precioMaxComp <span class="op">=</span> companias[<span class="st">&#39;price&#39;</span>].<span class="bu">max</span>()</span>
<span id="cb664-30"><a href="análisis-de-datos-con-python.html#cb664-30" aria-hidden="true" tabindex="-1"></a>precioMaxComp</span>
<span id="cb664-31"><a href="análisis-de-datos-con-python.html#cb664-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-32"><a href="análisis-de-datos-con-python.html#cb664-32" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. Millas promedio por cada compañia </span></span>
<span id="cb664-33"><a href="análisis-de-datos-con-python.html#cb664-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-34"><a href="análisis-de-datos-con-python.html#cb664-34" aria-hidden="true" tabindex="-1"></a>grupo <span class="op">=</span> df.groupby(<span class="st">&#39;company&#39;</span>)</span>
<span id="cb664-35"><a href="análisis-de-datos-con-python.html#cb664-35" aria-hidden="true" tabindex="-1"></a>millasDF <span class="op">=</span> grupo[<span class="st">&#39;company&#39;</span>,<span class="st">&#39;average-mileage&#39;</span>].mean()</span>
<span id="cb664-36"><a href="análisis-de-datos-con-python.html#cb664-36" aria-hidden="true" tabindex="-1"></a>millasDF</span>
<span id="cb664-37"><a href="análisis-de-datos-con-python.html#cb664-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb664-38"><a href="análisis-de-datos-con-python.html#cb664-38" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. Ordene por precio columna </span></span>
<span id="cb664-39"><a href="análisis-de-datos-con-python.html#cb664-39" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(by<span class="op">=</span>[<span class="st">&#39;price&#39;</span>], ascending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb664-40"><a href="análisis-de-datos-con-python.html#cb664-40" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">5</span>)</span></code></pre></div>
</div>
<div id="librería-datetime" class="section level3 hasAnchor" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Librería datetime<a href="análisis-de-datos-con-python.html#librería-datetime" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Para manejar fechas en Python se suele utilizar la librería <strong>datetime</strong></p></li>
<li><p>Esta incluye los tipos de datos date, time y datetime para representar fechas y funciones para manejarlas.</p></li>
<li><p>Algunas de las operaciones más habituales que permite son:</p></li>
<li><p>Acceder a los distintos componentes de una fecha (año, mes, día, hora, minutos, segundos y microsegundos).</p></li>
<li><p>Convertir cadenas con formato de fecha en los tipos date, time o datetime.</p></li>
<li><p>Convertir fechas de los tipos date, time o datetime en cadenas formateadas de acuerdo a diferentes formatos de fechas.</p></li>
<li><p>Hacer aritmética de fechas (sumar o restar fechas).</p></li>
<li><p>Comparar fechas.</p></li>
<li><p>Los tipos de datos date, time y datetime</p></li>
<li><p>date(año, mes, dia) : Devuelve un objeto de tipo date que representa la fecha con el año, mes y dia indicados.</p></li>
<li><p>time(hora, minutos, segundos, microsegundos) : Devuelve un objeto de tipo time que representa un tiempo la hora, minutos, segundos y microsegundos indicados.</p></li>
<li><p>datetime(año, mes, dia, hora, minutos, segundos, microsegundos) : Devuelve un objeto de tipo datetime que representa una fecha y hora con el año, mes, dia, hora, minutos, segundos y microsegundos indicados.</p></li>
</ul>
<div class="sourceCode" id="cb665"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb665-1"><a href="análisis-de-datos-con-python.html#cb665-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Devuelve un objeto de tipo date que representa la fecha con el año, mes y dia indicados.</span></span>
<span id="cb665-2"><a href="análisis-de-datos-con-python.html#cb665-2" aria-hidden="true" tabindex="-1"></a>fecha1 <span class="op">=</span> dt.date(<span class="dv">2020</span>, <span class="dv">12</span>, <span class="dv">25</span>)</span>
<span id="cb665-3"><a href="análisis-de-datos-con-python.html#cb665-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(fecha1)</span>
<span id="cb665-4"><a href="análisis-de-datos-con-python.html#cb665-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-5"><a href="análisis-de-datos-con-python.html#cb665-5" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(dt.time(<span class="dv">13</span>,<span class="dv">30</span>,<span class="dv">5</span>))</span>
<span id="cb665-6"><a href="análisis-de-datos-con-python.html#cb665-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-7"><a href="análisis-de-datos-con-python.html#cb665-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Devuelve un objeto de tipo time que representa un tiempo la hora, minutos, segundos y microsegundos indicados.</span></span>
<span id="cb665-8"><a href="análisis-de-datos-con-python.html#cb665-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-9"><a href="análisis-de-datos-con-python.html#cb665-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.datetime(<span class="dv">2020</span>, <span class="dv">12</span>, <span class="dv">25</span>, <span class="dv">13</span>, <span class="dv">30</span>, <span class="dv">5</span>))</span>
<span id="cb665-10"><a href="análisis-de-datos-con-python.html#cb665-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Representa una fecha y hora con el año, mes, dia, hora, minutos, segundos y microsegundos indicados.</span></span>
<span id="cb665-11"><a href="análisis-de-datos-con-python.html#cb665-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-12"><a href="análisis-de-datos-con-python.html#cb665-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Acceder a los elementos de una fecha</span></span>
<span id="cb665-13"><a href="análisis-de-datos-con-python.html#cb665-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.date.today())</span>
<span id="cb665-14"><a href="análisis-de-datos-con-python.html#cb665-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-15"><a href="análisis-de-datos-con-python.html#cb665-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date, time, datetime</span>
<span id="cb665-16"><a href="análisis-de-datos-con-python.html#cb665-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-17"><a href="análisis-de-datos-con-python.html#cb665-17" aria-hidden="true" tabindex="-1"></a>dt.month</span>
<span id="cb665-18"><a href="análisis-de-datos-con-python.html#cb665-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-19"><a href="análisis-de-datos-con-python.html#cb665-19" aria-hidden="true" tabindex="-1"></a>dt.day</span>
<span id="cb665-20"><a href="análisis-de-datos-con-python.html#cb665-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-21"><a href="análisis-de-datos-con-python.html#cb665-21" aria-hidden="true" tabindex="-1"></a>dt.hour</span>
<span id="cb665-22"><a href="análisis-de-datos-con-python.html#cb665-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-23"><a href="análisis-de-datos-con-python.html#cb665-23" aria-hidden="true" tabindex="-1"></a>dt.minute</span>
<span id="cb665-24"><a href="análisis-de-datos-con-python.html#cb665-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-25"><a href="análisis-de-datos-con-python.html#cb665-25" aria-hidden="true" tabindex="-1"></a>dt.second</span>
<span id="cb665-26"><a href="análisis-de-datos-con-python.html#cb665-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-27"><a href="análisis-de-datos-con-python.html#cb665-27" aria-hidden="true" tabindex="-1"></a>dt.microsecond</span></code></pre></div>
<ul>
<li><p>Usualmente vamos a querer cambiar formato de fechas, para hacerlo ocupamos marcadores de posición:</p>
<ul>
<li>%Y (año completo),</li>
<li>%y (últimos dos dígitos del año),</li>
<li>%m (mes en número),</li>
<li>%B (mes en palabra),</li>
<li>%d (día),</li>
<li>%A (día de la semana),</li>
<li>%a (día de la semana abrevidado),</li>
<li>%H (hora en formato 24 horas),</li>
<li>%I (hora en formato 12 horas),</li>
<li>%M (minutos), %S (segundos),</li>
<li>%p (AM o PM),</li>
<li>%C (fecha y hora completas),</li>
<li>%x (fecha completa),</li>
<li>%X (hora completa).</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb666"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb666-1"><a href="análisis-de-datos-con-python.html#cb666-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conversión de fechas en cadenas con diferentes formatos</span></span>
<span id="cb666-2"><a href="análisis-de-datos-con-python.html#cb666-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date, time, datetime</span>
<span id="cb666-3"><a href="análisis-de-datos-con-python.html#cb666-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> datetime.now()</span>
<span id="cb666-4"><a href="análisis-de-datos-con-python.html#cb666-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.strftime(<span class="st">&#39;</span><span class="sc">%d</span><span class="st">-%m-%Y&#39;</span>))</span>
<span id="cb666-5"><a href="análisis-de-datos-con-python.html#cb666-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.strftime(<span class="st">&#39;%A, </span><span class="sc">%d</span><span class="st"> %B, %y&#39;</span>))</span>
<span id="cb666-6"><a href="análisis-de-datos-con-python.html#cb666-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.strftime(<span class="st">&#39;%H:%M:%S&#39;</span>))</span>
<span id="cb666-7"><a href="análisis-de-datos-con-python.html#cb666-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d.strftime(<span class="st">&#39;%H horas, %M minutos y %S segundos&#39;</span>))</span>
<span id="cb666-8"><a href="análisis-de-datos-con-python.html#cb666-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-9"><a href="análisis-de-datos-con-python.html#cb666-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Función strptime(s, formato):</span></span>
<span id="cb666-10"><a href="análisis-de-datos-con-python.html#cb666-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(datetime.strptime(<span class="st">&#39;15/4/2020&#39;</span>, <span class="st">&#39;</span><span class="sc">%d</span><span class="st">/%m/%Y&#39;</span>))</span>
<span id="cb666-11"><a href="análisis-de-datos-con-python.html#cb666-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-12"><a href="análisis-de-datos-con-python.html#cb666-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(datetime.strptime(<span class="st">&#39;2020-4-15 20:50:30&#39;</span>, <span class="st">&#39;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&#39;</span>))</span>
<span id="cb666-13"><a href="análisis-de-datos-con-python.html#cb666-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-14"><a href="análisis-de-datos-con-python.html#cb666-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Para hacer aritmetica de fechas utilizar </span></span>
<span id="cb666-15"><a href="análisis-de-datos-con-python.html#cb666-15" aria-hidden="true" tabindex="-1"></a><span class="co"># timedelta(dias, segundos, microsegundos) : intervalo de tiempo con los dias, segundos y micorsegundos indicados.</span></span>
<span id="cb666-16"><a href="análisis-de-datos-con-python.html#cb666-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date, time, datetime, timedelta</span>
<span id="cb666-17"><a href="análisis-de-datos-con-python.html#cb666-17" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> datetime(<span class="dv">2020</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb666-18"><a href="análisis-de-datos-con-python.html#cb666-18" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> d1 <span class="op">+</span> timedelta(<span class="dv">200000</span>, <span class="dv">3600</span>)</span>
<span id="cb666-19"><a href="análisis-de-datos-con-python.html#cb666-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d2)</span>
<span id="cb666-20"><a href="análisis-de-datos-con-python.html#cb666-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-21"><a href="análisis-de-datos-con-python.html#cb666-21" aria-hidden="true" tabindex="-1"></a><span class="co">## Convertir una columna con to_datetime para que sea del tipo fecha</span></span>
<span id="cb666-22"><a href="análisis-de-datos-con-python.html#cb666-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-23"><a href="análisis-de-datos-con-python.html#cb666-23" aria-hidden="true" tabindex="-1"></a><span class="co"># to_datetime(columna, formato): devuelve la serie que resulta de convertir las cadenas de la columna con el </span></span>
<span id="cb666-24"><a href="análisis-de-datos-con-python.html#cb666-24" aria-hidden="true" tabindex="-1"></a><span class="co"># nombre columna en fechas del tipo datetime con el formado especificado en formato</span></span>
<span id="cb666-25"><a href="análisis-de-datos-con-python.html#cb666-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-26"><a href="análisis-de-datos-con-python.html#cb666-26" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">&#39;Name&#39;</span>: [<span class="st">&#39;María&#39;</span>, <span class="st">&#39;Carlos&#39;</span>, <span class="st">&#39;Carmen&#39;</span>], <span class="st">&#39;Nacimiento&#39;</span>:[<span class="st">&#39;05-03-2000&#39;</span>, <span class="st">&#39;20-05-2001&#39;</span>, <span class="st">&#39;10-12-1999&#39;</span>]})</span>
<span id="cb666-27"><a href="análisis-de-datos-con-python.html#cb666-27" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb666-28"><a href="análisis-de-datos-con-python.html#cb666-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-29"><a href="análisis-de-datos-con-python.html#cb666-29" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;Nacimiento&#39;</span>]</span>
<span id="cb666-30"><a href="análisis-de-datos-con-python.html#cb666-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb666-31"><a href="análisis-de-datos-con-python.html#cb666-31" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.to_datetime(df.Nacimiento, <span class="bu">format</span> <span class="op">=</span> <span class="st">&#39;</span><span class="sc">%d</span><span class="st">-%m-%Y&#39;</span>)</span>
<span id="cb666-32"><a href="análisis-de-datos-con-python.html#cb666-32" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
</div>
<div id="reestructurar-un-dataframe" class="section level3 hasAnchor" number="4.5.4">
<h3><span class="header-section-number">4.5.4</span> Reestructurar un DataFrame<a href="análisis-de-datos-con-python.html#reestructurar-un-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Formato ancho a largo y viceversa</li>
<li>Diferencias entre ambos?</li>
</ul>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="sourceCode" id="cb667"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb667-1"><a href="análisis-de-datos-con-python.html#cb667-1" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> {<span class="st">&#39;nombre&#39;</span>:[<span class="st">&#39;Pepe&#39;</span>, <span class="st">&#39;Pepa&#39;</span>, <span class="st">&#39;Nico&#39;</span>],</span>
<span id="cb667-2"><a href="análisis-de-datos-con-python.html#cb667-2" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;edad&#39;</span>:[<span class="dv">18</span>, <span class="dv">22</span>, <span class="dv">20</span>],</span>
<span id="cb667-3"><a href="análisis-de-datos-con-python.html#cb667-3" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;Matemáticas&#39;</span>:[<span class="fl">8.5</span>, <span class="dv">9</span>, <span class="fl">3.5</span>],</span>
<span id="cb667-4"><a href="análisis-de-datos-con-python.html#cb667-4" aria-hidden="true" tabindex="-1"></a> <span class="st">&#39;Economía&#39;</span>:[<span class="dv">8</span>, <span class="fl">8.5</span>, <span class="dv">5</span>],</span>
<span id="cb667-5"><a href="análisis-de-datos-con-python.html#cb667-5" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;Programación&#39;</span>:[<span class="fl">6.5</span>, <span class="fl">9.2</span>, <span class="dv">9</span>]}</span>
<span id="cb667-6"><a href="análisis-de-datos-con-python.html#cb667-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-7"><a href="análisis-de-datos-con-python.html#cb667-7" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(datos)</span>
<span id="cb667-8"><a href="análisis-de-datos-con-python.html#cb667-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-9"><a href="análisis-de-datos-con-python.html#cb667-9" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb667-10"><a href="análisis-de-datos-con-python.html#cb667-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Esta en formato ancho</span></span>
<span id="cb667-11"><a href="análisis-de-datos-con-python.html#cb667-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-12"><a href="análisis-de-datos-con-python.html#cb667-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Para pasar a formato largo utilizo melt()</span></span>
<span id="cb667-13"><a href="análisis-de-datos-con-python.html#cb667-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-14"><a href="análisis-de-datos-con-python.html#cb667-14" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> df.melt(id_vars<span class="op">=</span>[<span class="st">&#39;nombre&#39;</span>, <span class="st">&#39;edad&#39;</span>], </span>
<span id="cb667-15"><a href="análisis-de-datos-con-python.html#cb667-15" aria-hidden="true" tabindex="-1"></a>              var_name<span class="op">=</span><span class="st">&#39;asignatura&#39;</span>, </span>
<span id="cb667-16"><a href="análisis-de-datos-con-python.html#cb667-16" aria-hidden="true" tabindex="-1"></a>              value_name<span class="op">=</span><span class="st">&#39;nota&#39;</span>)</span>
<span id="cb667-17"><a href="análisis-de-datos-con-python.html#cb667-17" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb667-18"><a href="análisis-de-datos-con-python.html#cb667-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-19"><a href="análisis-de-datos-con-python.html#cb667-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora pasemosla de vuelta a un formato ancho el metodo pivot()</span></span>
<span id="cb667-20"><a href="análisis-de-datos-con-python.html#cb667-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-21"><a href="análisis-de-datos-con-python.html#cb667-21" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df1.pivot(index<span class="op">=</span>[<span class="st">&#39;nombre&#39;</span>, <span class="st">&#39;edad&#39;</span>],</span>
<span id="cb667-22"><a href="análisis-de-datos-con-python.html#cb667-22" aria-hidden="true" tabindex="-1"></a>          columns<span class="op">=</span><span class="st">&#39;asignatura&#39;</span>, </span>
<span id="cb667-23"><a href="análisis-de-datos-con-python.html#cb667-23" aria-hidden="true" tabindex="-1"></a>          values<span class="op">=</span> <span class="st">&quot;nota&quot;</span>)</span>
<span id="cb667-24"><a href="análisis-de-datos-con-python.html#cb667-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-25"><a href="análisis-de-datos-con-python.html#cb667-25" aria-hidden="true" tabindex="-1"></a>df2</span></code></pre></div>
</div>
<div id="reestructurar-datos-para-arreglar-posibles-problemas" class="section level3 hasAnchor" number="4.5.5">
<h3><span class="header-section-number">4.5.5</span> Reestructurar datos para arreglar posibles problemas<a href="análisis-de-datos-con-python.html#reestructurar-datos-para-arreglar-posibles-problemas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="caso-1-encabezados-de-las-columnas-son-valores-y-no-nombres-de-variables" class="section level4 hasAnchor" number="4.5.5.1">
<h4><span class="header-section-number">4.5.5.1</span> Caso 1: encabezados de las columnas son valores y no nombres de variables<a href="análisis-de-datos-con-python.html#caso-1-encabezados-de-las-columnas-son-valores-y-no-nombres-de-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb668"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb668-1"><a href="análisis-de-datos-con-python.html#cb668-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijar directorio principal </span></span>
<span id="cb668-2"><a href="análisis-de-datos-con-python.html#cb668-2" aria-hidden="true" tabindex="-1"></a>main <span class="op">=</span> os.getcwd()</span>
<span id="cb668-3"><a href="análisis-de-datos-con-python.html#cb668-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb668-4"><a href="análisis-de-datos-con-python.html#cb668-4" aria-hidden="true" tabindex="-1"></a>main</span>
<span id="cb668-5"><a href="análisis-de-datos-con-python.html#cb668-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb668-6"><a href="análisis-de-datos-con-python.html#cb668-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijar directorios secundarios en base al principal</span></span>
<span id="cb668-7"><a href="análisis-de-datos-con-python.html#cb668-7" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> main <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">datos&quot;</span></span>
<span id="cb668-8"><a href="análisis-de-datos-con-python.html#cb668-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb668-9"><a href="análisis-de-datos-con-python.html#cb668-9" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb668-10"><a href="análisis-de-datos-con-python.html#cb668-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb668-11"><a href="análisis-de-datos-con-python.html#cb668-11" aria-hidden="true" tabindex="-1"></a>pew <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">pew-raw.csv&#39;</span>)</span>
<span id="cb668-12"><a href="análisis-de-datos-con-python.html#cb668-12" aria-hidden="true" tabindex="-1"></a>pew</span>
<span id="cb668-13"><a href="análisis-de-datos-con-python.html#cb668-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb668-14"><a href="análisis-de-datos-con-python.html#cb668-14" aria-hidden="true" tabindex="-1"></a>pew.head()</span></code></pre></div>
<ul>
<li>Noten que esta es una base de datos donde tenemos información en las columnas</li>
</ul>
<div class="sourceCode" id="cb669"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb669-1"><a href="análisis-de-datos-con-python.html#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Formato wide a formato 2 </span></span>
<span id="cb669-2"><a href="análisis-de-datos-con-python.html#cb669-2" aria-hidden="true" tabindex="-1"></a>pew_long <span class="op">=</span> pd.melt(pew, </span>
<span id="cb669-3"><a href="análisis-de-datos-con-python.html#cb669-3" aria-hidden="true" tabindex="-1"></a>                   id_vars <span class="op">=</span> <span class="st">&quot;religion&quot;</span>)</span>
<span id="cb669-4"><a href="análisis-de-datos-con-python.html#cb669-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-5"><a href="análisis-de-datos-con-python.html#cb669-5" aria-hidden="true" tabindex="-1"></a>pew_long.head(<span class="dv">10</span>)</span>
<span id="cb669-6"><a href="análisis-de-datos-con-python.html#cb669-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-7"><a href="análisis-de-datos-con-python.html#cb669-7" aria-hidden="true" tabindex="-1"></a>pew_long <span class="op">=</span> pd.melt(pew, </span>
<span id="cb669-8"><a href="análisis-de-datos-con-python.html#cb669-8" aria-hidden="true" tabindex="-1"></a>                   id_vars <span class="op">=</span> <span class="st">&quot;religion&quot;</span>, </span>
<span id="cb669-9"><a href="análisis-de-datos-con-python.html#cb669-9" aria-hidden="true" tabindex="-1"></a>                   var_name <span class="op">=</span> <span class="st">&quot;ingreso&quot;</span>)</span>
<span id="cb669-10"><a href="análisis-de-datos-con-python.html#cb669-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-11"><a href="análisis-de-datos-con-python.html#cb669-11" aria-hidden="true" tabindex="-1"></a>pew_long.head()</span>
<span id="cb669-12"><a href="análisis-de-datos-con-python.html#cb669-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-13"><a href="análisis-de-datos-con-python.html#cb669-13" aria-hidden="true" tabindex="-1"></a>pew_long <span class="op">=</span> pd.melt(pew, </span>
<span id="cb669-14"><a href="análisis-de-datos-con-python.html#cb669-14" aria-hidden="true" tabindex="-1"></a>                   id_vars <span class="op">=</span> <span class="st">&quot;religion&quot;</span>, </span>
<span id="cb669-15"><a href="análisis-de-datos-con-python.html#cb669-15" aria-hidden="true" tabindex="-1"></a>                   var_name <span class="op">=</span> <span class="st">&quot;ingreso&quot;</span>, </span>
<span id="cb669-16"><a href="análisis-de-datos-con-python.html#cb669-16" aria-hidden="true" tabindex="-1"></a>                   value_name <span class="op">=</span> <span class="st">&quot;Casos&quot;</span>)</span>
<span id="cb669-17"><a href="análisis-de-datos-con-python.html#cb669-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-18"><a href="análisis-de-datos-con-python.html#cb669-18" aria-hidden="true" tabindex="-1"></a>pew_long.head()</span>
<span id="cb669-19"><a href="análisis-de-datos-con-python.html#cb669-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-20"><a href="análisis-de-datos-con-python.html#cb669-20" aria-hidden="true" tabindex="-1"></a>pew</span>
<span id="cb669-21"><a href="análisis-de-datos-con-python.html#cb669-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-22"><a href="análisis-de-datos-con-python.html#cb669-22" aria-hidden="true" tabindex="-1"></a>billboard <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">billboard.csv&quot;</span>)</span>
<span id="cb669-23"><a href="análisis-de-datos-con-python.html#cb669-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-24"><a href="análisis-de-datos-con-python.html#cb669-24" aria-hidden="true" tabindex="-1"></a>billboard</span>
<span id="cb669-25"><a href="análisis-de-datos-con-python.html#cb669-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-26"><a href="análisis-de-datos-con-python.html#cb669-26" aria-hidden="true" tabindex="-1"></a>billboard_long <span class="op">=</span> pd.melt(</span>
<span id="cb669-27"><a href="análisis-de-datos-con-python.html#cb669-27" aria-hidden="true" tabindex="-1"></a>    billboard, </span>
<span id="cb669-28"><a href="análisis-de-datos-con-python.html#cb669-28" aria-hidden="true" tabindex="-1"></a>    id_vars <span class="op">=</span> [<span class="st">&quot;year&quot;</span>, <span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;time&quot;</span>, <span class="st">&quot;date.entered&quot;</span>],</span>
<span id="cb669-29"><a href="análisis-de-datos-con-python.html#cb669-29" aria-hidden="true" tabindex="-1"></a>    var_name <span class="op">=</span> <span class="st">&quot;week&quot;</span>, </span>
<span id="cb669-30"><a href="análisis-de-datos-con-python.html#cb669-30" aria-hidden="true" tabindex="-1"></a>    value_name <span class="op">=</span> <span class="st">&quot;rating&quot;</span></span>
<span id="cb669-31"><a href="análisis-de-datos-con-python.html#cb669-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb669-32"><a href="análisis-de-datos-con-python.html#cb669-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-33"><a href="análisis-de-datos-con-python.html#cb669-33" aria-hidden="true" tabindex="-1"></a>billboard_long</span>
<span id="cb669-34"><a href="análisis-de-datos-con-python.html#cb669-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-35"><a href="análisis-de-datos-con-python.html#cb669-35" aria-hidden="true" tabindex="-1"></a>billboard.shape</span>
<span id="cb669-36"><a href="análisis-de-datos-con-python.html#cb669-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-37"><a href="análisis-de-datos-con-python.html#cb669-37" aria-hidden="true" tabindex="-1"></a>billboard_long.shape</span>
<span id="cb669-38"><a href="análisis-de-datos-con-python.html#cb669-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-39"><a href="análisis-de-datos-con-python.html#cb669-39" aria-hidden="true" tabindex="-1"></a><span class="dv">317</span><span class="op">*</span><span class="dv">76</span></span></code></pre></div>
</div>
<div id="caso-2-múltiples-tipos-de-datos-en-una-misma-columna" class="section level4 hasAnchor" number="4.5.5.2">
<h4><span class="header-section-number">4.5.5.2</span> Caso 2: múltiples tipos de datos en una misma columna<a href="análisis-de-datos-con-python.html#caso-2-múltiples-tipos-de-datos-en-una-misma-columna" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb670"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb670-1"><a href="análisis-de-datos-con-python.html#cb670-1" aria-hidden="true" tabindex="-1"></a>ebola <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">country_timeseries.csv&quot;</span>)</span>
<span id="cb670-2"><a href="análisis-de-datos-con-python.html#cb670-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-3"><a href="análisis-de-datos-con-python.html#cb670-3" aria-hidden="true" tabindex="-1"></a>ebola.head()</span>
<span id="cb670-4"><a href="análisis-de-datos-con-python.html#cb670-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-5"><a href="análisis-de-datos-con-python.html#cb670-5" aria-hidden="true" tabindex="-1"></a>ebola_long <span class="op">=</span> pd.melt(ebola, </span>
<span id="cb670-6"><a href="análisis-de-datos-con-python.html#cb670-6" aria-hidden="true" tabindex="-1"></a>                     id_vars <span class="op">=</span> [<span class="st">&quot;Date&quot;</span>, <span class="st">&quot;Day&quot;</span>])</span>
<span id="cb670-7"><a href="análisis-de-datos-con-python.html#cb670-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-8"><a href="análisis-de-datos-con-python.html#cb670-8" aria-hidden="true" tabindex="-1"></a>ebola_long</span>
<span id="cb670-9"><a href="análisis-de-datos-con-python.html#cb670-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-10"><a href="análisis-de-datos-con-python.html#cb670-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a quitar &quot;Cases&quot; en variables</span></span>
<span id="cb670-11"><a href="análisis-de-datos-con-python.html#cb670-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-12"><a href="análisis-de-datos-con-python.html#cb670-12" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;cases_Guinea&quot;</span>.split(<span class="st">&quot;_&quot;</span>)</span>
<span id="cb670-13"><a href="análisis-de-datos-con-python.html#cb670-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-14"><a href="análisis-de-datos-con-python.html#cb670-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Columna + tipo de acceso + metodo</span></span>
<span id="cb670-15"><a href="análisis-de-datos-con-python.html#cb670-15" aria-hidden="true" tabindex="-1"></a>variable_split <span class="op">=</span> ebola_long[<span class="st">&quot;variable&quot;</span>].<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>)</span>
<span id="cb670-16"><a href="análisis-de-datos-con-python.html#cb670-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-17"><a href="análisis-de-datos-con-python.html#cb670-17" aria-hidden="true" tabindex="-1"></a>variable_split</span>
<span id="cb670-18"><a href="análisis-de-datos-con-python.html#cb670-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-19"><a href="análisis-de-datos-con-python.html#cb670-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos que tiene por partes </span></span>
<span id="cb670-20"><a href="análisis-de-datos-con-python.html#cb670-20" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(variable_split)</span>
<span id="cb670-21"><a href="análisis-de-datos-con-python.html#cb670-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-22"><a href="análisis-de-datos-con-python.html#cb670-22" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(variable_split[<span class="dv">0</span>])</span>
<span id="cb670-23"><a href="análisis-de-datos-con-python.html#cb670-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-24"><a href="análisis-de-datos-con-python.html#cb670-24" aria-hidden="true" tabindex="-1"></a>variable_split[<span class="dv">0</span>][<span class="dv">1</span>]</span>
<span id="cb670-25"><a href="análisis-de-datos-con-python.html#cb670-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-26"><a href="análisis-de-datos-con-python.html#cb670-26" aria-hidden="true" tabindex="-1"></a>variable_split.<span class="bu">str</span>.get(<span class="dv">0</span>)</span>
<span id="cb670-27"><a href="análisis-de-datos-con-python.html#cb670-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-28"><a href="análisis-de-datos-con-python.html#cb670-28" aria-hidden="true" tabindex="-1"></a>variable_split.<span class="bu">str</span>.get(<span class="dv">1</span>)</span>
<span id="cb670-29"><a href="análisis-de-datos-con-python.html#cb670-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-30"><a href="análisis-de-datos-con-python.html#cb670-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a utilizar estos dos para actualizar base de datos </span></span>
<span id="cb670-31"><a href="análisis-de-datos-con-python.html#cb670-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-32"><a href="análisis-de-datos-con-python.html#cb670-32" aria-hidden="true" tabindex="-1"></a>ebola_long[<span class="st">&quot;stats&quot;</span>] <span class="op">=</span> variable_split.<span class="bu">str</span>.get(<span class="dv">0</span>)</span>
<span id="cb670-33"><a href="análisis-de-datos-con-python.html#cb670-33" aria-hidden="true" tabindex="-1"></a>ebola_long[<span class="st">&quot;country&quot;</span>] <span class="op">=</span> variable_split.<span class="bu">str</span>.get(<span class="dv">1</span>)</span>
<span id="cb670-34"><a href="análisis-de-datos-con-python.html#cb670-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-35"><a href="análisis-de-datos-con-python.html#cb670-35" aria-hidden="true" tabindex="-1"></a>ebola_long</span>
<span id="cb670-36"><a href="análisis-de-datos-con-python.html#cb670-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-37"><a href="análisis-de-datos-con-python.html#cb670-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra forma de hacer lo anterior</span></span>
<span id="cb670-38"><a href="análisis-de-datos-con-python.html#cb670-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-39"><a href="análisis-de-datos-con-python.html#cb670-39" aria-hidden="true" tabindex="-1"></a>ebola_long[[<span class="st">&quot;stats_e&quot;</span>, <span class="st">&quot;country_e&quot;</span>]] <span class="op">=</span> (ebola_long[<span class="st">&quot;variable&quot;</span>].<span class="bu">str</span>.split(<span class="st">&quot;_&quot;</span>, expand <span class="op">=</span> <span class="va">True</span>))</span>
<span id="cb670-40"><a href="análisis-de-datos-con-python.html#cb670-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-41"><a href="análisis-de-datos-con-python.html#cb670-41" aria-hidden="true" tabindex="-1"></a>ebola_long</span></code></pre></div>
</div>
<div id="caso-3-multiples-variables-guardadas-en-una-columna" class="section level4 hasAnchor" number="4.5.5.3">
<h4><span class="header-section-number">4.5.5.3</span> Caso 3: Multiples variables guardadas en una columna<a href="análisis-de-datos-con-python.html#caso-3-multiples-variables-guardadas-en-una-columna" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A few notes on the raw data set:</p>
<ul>
<li>The columns starting with “m” or “f” contain multiple variables:
<ul>
<li>Sex (“m” or “f”)</li>
<li>Age Group (“0-14”,“15-24”, “25-34”, “45-54”, “55-64”, “65”, “unknown”)</li>
</ul></li>
<li>Mixture of 0s and missing values(“NaN”). This is due to the data collection process and the distinction is important for this dataset.</li>
</ul>
<div class="sourceCode" id="cb671"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb671-1"><a href="análisis-de-datos-con-python.html#cb671-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">tb-raw.csv&quot;</span>)</span>
<span id="cb671-2"><a href="análisis-de-datos-con-python.html#cb671-2" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb671-3"><a href="análisis-de-datos-con-python.html#cb671-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb671-4"><a href="análisis-de-datos-con-python.html#cb671-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.melt(df, id_vars<span class="op">=</span>[<span class="st">&quot;country&quot;</span>,<span class="st">&quot;year&quot;</span>], value_name<span class="op">=</span><span class="st">&quot;cases&quot;</span>, var_name<span class="op">=</span><span class="st">&quot;sex_and_age&quot;</span>)</span>
<span id="cb671-5"><a href="análisis-de-datos-con-python.html#cb671-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb671-6"><a href="análisis-de-datos-con-python.html#cb671-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract Sex, Age lower bound and Age upper bound group</span></span>
<span id="cb671-7"><a href="análisis-de-datos-con-python.html#cb671-7" aria-hidden="true" tabindex="-1"></a>tmp_df <span class="op">=</span> df[<span class="st">&quot;sex_and_age&quot;</span>].<span class="bu">str</span>.extract(<span class="st">&quot;(\D)(\d+)(\d</span><span class="sc">{2}</span><span class="st">)&quot;</span>, expand<span class="op">=</span><span class="va">False</span>)    </span>
<span id="cb671-8"><a href="análisis-de-datos-con-python.html#cb671-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb671-9"><a href="análisis-de-datos-con-python.html#cb671-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Name columns</span></span>
<span id="cb671-10"><a href="análisis-de-datos-con-python.html#cb671-10" aria-hidden="true" tabindex="-1"></a>tmp_df.columns <span class="op">=</span> [<span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age_lower&quot;</span>, <span class="st">&quot;age_upper&quot;</span>]</span>
<span id="cb671-11"><a href="análisis-de-datos-con-python.html#cb671-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb671-12"><a href="análisis-de-datos-con-python.html#cb671-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create `age`column based on `age_lower` and `age_upper`</span></span>
<span id="cb671-13"><a href="análisis-de-datos-con-python.html#cb671-13" aria-hidden="true" tabindex="-1"></a>tmp_df[<span class="st">&quot;age&quot;</span>] <span class="op">=</span> tmp_df[<span class="st">&quot;age_lower&quot;</span>] <span class="op">+</span> <span class="st">&quot;-&quot;</span> <span class="op">+</span> tmp_df[<span class="st">&quot;age_upper&quot;</span>]</span>
<span id="cb671-14"><a href="análisis-de-datos-con-python.html#cb671-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb671-15"><a href="análisis-de-datos-con-python.html#cb671-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge </span></span>
<span id="cb671-16"><a href="análisis-de-datos-con-python.html#cb671-16" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([df, tmp_df], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb671-17"><a href="análisis-de-datos-con-python.html#cb671-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb671-18"><a href="análisis-de-datos-con-python.html#cb671-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop unnecessary columns and rows</span></span>
<span id="cb671-19"><a href="análisis-de-datos-con-python.html#cb671-19" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.drop([<span class="st">&#39;sex_and_age&#39;</span>,<span class="st">&quot;age_lower&quot;</span>,<span class="st">&quot;age_upper&quot;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb671-20"><a href="análisis-de-datos-con-python.html#cb671-20" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.dropna()</span>
<span id="cb671-21"><a href="análisis-de-datos-con-python.html#cb671-21" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.sort_values(ascending<span class="op">=</span><span class="va">True</span>,by<span class="op">=</span>[<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>])</span>
<span id="cb671-22"><a href="análisis-de-datos-con-python.html#cb671-22" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="caso-4-variables-guardadas-en-filas-y-columnas" class="section level4 hasAnchor" number="4.5.5.4">
<h4><span class="header-section-number">4.5.5.4</span> Caso 4: Variables guardadas en filas y columnas<a href="análisis-de-datos-con-python.html#caso-4-variables-guardadas-en-filas-y-columnas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb672"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb672-1"><a href="análisis-de-datos-con-python.html#cb672-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables guradads en filas y columnas </span></span>
<span id="cb672-2"><a href="análisis-de-datos-con-python.html#cb672-2" aria-hidden="true" tabindex="-1"></a>weather <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">weather.csv&quot;</span>)</span>
<span id="cb672-3"><a href="análisis-de-datos-con-python.html#cb672-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-4"><a href="análisis-de-datos-con-python.html#cb672-4" aria-hidden="true" tabindex="-1"></a>weather</span>
<span id="cb672-5"><a href="análisis-de-datos-con-python.html#cb672-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-6"><a href="análisis-de-datos-con-python.html#cb672-6" aria-hidden="true" tabindex="-1"></a>weather_melt <span class="op">=</span> pd.melt(</span>
<span id="cb672-7"><a href="análisis-de-datos-con-python.html#cb672-7" aria-hidden="true" tabindex="-1"></a>        weather, </span>
<span id="cb672-8"><a href="análisis-de-datos-con-python.html#cb672-8" aria-hidden="true" tabindex="-1"></a>        id_vars <span class="op">=</span> [<span class="st">&quot;id&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;element&quot;</span>], </span>
<span id="cb672-9"><a href="análisis-de-datos-con-python.html#cb672-9" aria-hidden="true" tabindex="-1"></a>        var_name <span class="op">=</span> <span class="st">&quot;day&quot;</span>,</span>
<span id="cb672-10"><a href="análisis-de-datos-con-python.html#cb672-10" aria-hidden="true" tabindex="-1"></a>        value_name <span class="op">=</span> <span class="st">&quot;temp&quot;</span></span>
<span id="cb672-11"><a href="análisis-de-datos-con-python.html#cb672-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb672-12"><a href="análisis-de-datos-con-python.html#cb672-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-13"><a href="análisis-de-datos-con-python.html#cb672-13" aria-hidden="true" tabindex="-1"></a>weather_melt</span>
<span id="cb672-14"><a href="análisis-de-datos-con-python.html#cb672-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-15"><a href="análisis-de-datos-con-python.html#cb672-15" aria-hidden="true" tabindex="-1"></a>weather_tidy <span class="op">=</span> weather_melt.pivot_table(</span>
<span id="cb672-16"><a href="análisis-de-datos-con-python.html#cb672-16" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> [<span class="st">&quot;id&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>], </span>
<span id="cb672-17"><a href="análisis-de-datos-con-python.html#cb672-17" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">&quot;element&quot;</span>, </span>
<span id="cb672-18"><a href="análisis-de-datos-con-python.html#cb672-18" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">&quot;temp&quot;</span></span>
<span id="cb672-19"><a href="análisis-de-datos-con-python.html#cb672-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb672-20"><a href="análisis-de-datos-con-python.html#cb672-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-21"><a href="análisis-de-datos-con-python.html#cb672-21" aria-hidden="true" tabindex="-1"></a>weather_tidy</span>
<span id="cb672-22"><a href="análisis-de-datos-con-python.html#cb672-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Nos permite ver la jerarquí ad elos datos que tenemos</span></span>
<span id="cb672-23"><a href="análisis-de-datos-con-python.html#cb672-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-24"><a href="análisis-de-datos-con-python.html#cb672-24" aria-hidden="true" tabindex="-1"></a>weather_tidy.reset_index()</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.5.3:</b> Reestructurar datos</p>
<ul>
<li>Cree una base de datos llamada <code>productos</code> con la siguiente información</li>
</ul>
<table>
<thead>
<tr class="header">
<th>categoría</th>
<th>tienda</th>
<th>precio</th>
<th>puntaje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Limpieza</td>
<td>Walmart</td>
<td>1132</td>
<td>4</td>
</tr>
<tr class="even">
<td>Limpieza</td>
<td>Dia</td>
<td>2350</td>
<td>3</td>
</tr>
<tr class="odd">
<td>Entretenimiento</td>
<td>Walmart</td>
<td>1999</td>
<td>5</td>
</tr>
<tr class="even">
<td>Entretenimiento</td>
<td>Fnac</td>
<td>1595</td>
<td>7</td>
</tr>
<tr class="odd">
<td>Tecnología</td>
<td>Dia</td>
<td>5575</td>
<td>5</td>
</tr>
<tr class="even">
<td>Tecnología</td>
<td>Walmart</td>
<td>11134</td>
<td>8</td>
</tr>
</tbody>
</table>
<ul>
<li>Transforme la base de datos de formato largo a formato ancho.</li>
</ul>
</div>
<div class="sourceCode" id="cb673"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb673-1"><a href="análisis-de-datos-con-python.html#cb673-1" aria-hidden="true" tabindex="-1"></a>productos <span class="op">=</span> pd.DataFrame({<span class="st">&#39;categoria&#39;</span>: [<span class="st">&#39;Cleaning&#39;</span>, <span class="st">&#39;Cleaning&#39;</span>, <span class="st">&#39;Entertainment&#39;</span>, <span class="st">&#39;Entertainment&#39;</span>, <span class="st">&#39;Tech&#39;</span>, <span class="st">&#39;Tech&#39;</span>],</span>
<span id="cb673-2"><a href="análisis-de-datos-con-python.html#cb673-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;tienda&#39;</span>: [<span class="st">&#39;Walmart&#39;</span>, <span class="st">&#39;Dia&#39;</span>, <span class="st">&#39;Walmart&#39;</span>, <span class="st">&#39;Fnac&#39;</span>, <span class="st">&#39;Dia&#39;</span>,<span class="st">&#39;Walmart&#39;</span>],</span>
<span id="cb673-3"><a href="análisis-de-datos-con-python.html#cb673-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;precio&#39;</span>:[<span class="dv">1142</span>, <span class="dv">2350</span>, <span class="dv">1999</span>, <span class="dv">1595</span>, <span class="dv">5575</span>, <span class="dv">11134</span>],</span>
<span id="cb673-4"><a href="análisis-de-datos-con-python.html#cb673-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;puntaje&#39;</span>: [<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">8</span>]})</span>
<span id="cb673-5"><a href="análisis-de-datos-con-python.html#cb673-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb673-6"><a href="análisis-de-datos-con-python.html#cb673-6" aria-hidden="true" tabindex="-1"></a>productos</span>
<span id="cb673-7"><a href="análisis-de-datos-con-python.html#cb673-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb673-8"><a href="análisis-de-datos-con-python.html#cb673-8" aria-hidden="true" tabindex="-1"></a>productos_ancho <span class="op">=</span> productos.pivot(index <span class="op">=</span> <span class="st">&quot;categoria&quot;</span>, </span>
<span id="cb673-9"><a href="análisis-de-datos-con-python.html#cb673-9" aria-hidden="true" tabindex="-1"></a>                                  columns <span class="op">=</span> <span class="st">&quot;tienda&quot;</span>, </span>
<span id="cb673-10"><a href="análisis-de-datos-con-python.html#cb673-10" aria-hidden="true" tabindex="-1"></a>                                  values <span class="op">=</span> <span class="st">&quot;precio&quot;</span>)</span>
<span id="cb673-11"><a href="análisis-de-datos-con-python.html#cb673-11" aria-hidden="true" tabindex="-1"></a>productos_ancho</span></code></pre></div>
</div>
</div>
<div id="missing-values-2" class="section level3 hasAnchor" number="4.5.6">
<h3><span class="header-section-number">4.5.6</span> Missing values<a href="análisis-de-datos-con-python.html#missing-values-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Datos del mundo real rara vez son homogeneos.</li>
<li>Muchos valores no van a encontrarse por múltiples razones.</li>
<li>Vamos a discutir un poco sobre este tipo de valores en la librería de pandas.</li>
<li>NaN puede utilizarse como valor numérico en operaciones matemáticas, mientras que None no puede</li>
<li>NaN es un valor numérico flotantes None es un tipo interno de Python ( NoneType ) y sería más como “inexistente” o “vacío” que “numéricamente inválido” en este contexto.</li>
</ul>
<div id="realidad-cuando-importamos-datos" class="section level4 hasAnchor" number="4.5.6.1">
<h4><span class="header-section-number">4.5.6.1</span> Realidad cuando importamos datos<a href="análisis-de-datos-con-python.html#realidad-cuando-importamos-datos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb674"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb674-1"><a href="análisis-de-datos-con-python.html#cb674-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos//survey_visited.csv&#39;</span>)</span>
<span id="cb674-2"><a href="análisis-de-datos-con-python.html#cb674-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb674-3"><a href="análisis-de-datos-con-python.html#cb674-3" aria-hidden="true" tabindex="-1"></a>pd.read_csv(<span class="st">&#39;datos//survey_visited.csv&#39;</span>, keep_default_na<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb674-4"><a href="análisis-de-datos-con-python.html#cb674-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb674-5"><a href="análisis-de-datos-con-python.html#cb674-5" aria-hidden="true" tabindex="-1"></a>pd.read_csv(<span class="st">&#39;datos//survey_visited.csv&#39;</span>, </span>
<span id="cb674-6"><a href="análisis-de-datos-con-python.html#cb674-6" aria-hidden="true" tabindex="-1"></a>            na_values<span class="op">=</span>[<span class="dv">619</span>, <span class="dv">622</span>])</span></code></pre></div>
</div>
<div id="dos-funciones-claves" class="section level4 hasAnchor" number="4.5.6.2">
<h4><span class="header-section-number">4.5.6.2</span> Dos funciones claves<a href="análisis-de-datos-con-python.html#dos-funciones-claves" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb675"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb675-1"><a href="análisis-de-datos-con-python.html#cb675-1" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb675-2"><a href="análisis-de-datos-con-python.html#cb675-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-3"><a href="análisis-de-datos-con-python.html#cb675-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones is.na() y notna()</span></span>
<span id="cb675-4"><a href="análisis-de-datos-con-python.html#cb675-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-5"><a href="análisis-de-datos-con-python.html#cb675-5" aria-hidden="true" tabindex="-1"></a>pd.isna(df[<span class="st">&quot;dated&quot;</span>])</span>
<span id="cb675-6"><a href="análisis-de-datos-con-python.html#cb675-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-7"><a href="análisis-de-datos-con-python.html#cb675-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Resultado: valor booleano donde me indica que valores son na</span></span>
<span id="cb675-8"><a href="análisis-de-datos-con-python.html#cb675-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-9"><a href="análisis-de-datos-con-python.html#cb675-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Toda la base de datos </span></span>
<span id="cb675-10"><a href="análisis-de-datos-con-python.html#cb675-10" aria-hidden="true" tabindex="-1"></a>pd.isna(df)</span>
<span id="cb675-11"><a href="análisis-de-datos-con-python.html#cb675-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-12"><a href="análisis-de-datos-con-python.html#cb675-12" aria-hidden="true" tabindex="-1"></a>pd.notna(df[<span class="st">&quot;dated&quot;</span>])</span>
<span id="cb675-13"><a href="análisis-de-datos-con-python.html#cb675-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-14"><a href="análisis-de-datos-con-python.html#cb675-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Resultado: inverso de lo anterior</span></span>
<span id="cb675-15"><a href="análisis-de-datos-con-python.html#cb675-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-16"><a href="análisis-de-datos-con-python.html#cb675-16" aria-hidden="true" tabindex="-1"></a>pd.notna(df)</span>
<span id="cb675-17"><a href="análisis-de-datos-con-python.html#cb675-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-18"><a href="análisis-de-datos-con-python.html#cb675-18" aria-hidden="true" tabindex="-1"></a>df.notna()</span>
<span id="cb675-19"><a href="análisis-de-datos-con-python.html#cb675-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-20"><a href="análisis-de-datos-con-python.html#cb675-20" aria-hidden="true" tabindex="-1"></a>df.isna()</span></code></pre></div>
</div>
<div id="calculos-con-missing-values" class="section level4 hasAnchor" number="4.5.6.3">
<h4><span class="header-section-number">4.5.6.3</span> Calculos con missing values<a href="análisis-de-datos-con-python.html#calculos-con-missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb676"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb676-1"><a href="análisis-de-datos-con-python.html#cb676-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> pd.DataFrame({<span class="st">&quot;one&quot;</span>: [<span class="va">None</span>, <span class="va">None</span>, <span class="fl">0.11</span>, <span class="op">-</span><span class="fl">2.1</span>, <span class="op">-</span><span class="fl">2.2</span>], </span>
<span id="cb676-2"><a href="análisis-de-datos-con-python.html#cb676-2" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;two&quot;</span>:[<span class="dv">32</span>, <span class="dv">4</span>, <span class="fl">0.11</span>, <span class="op">-</span><span class="fl">2.1</span>, <span class="op">-</span><span class="fl">2.2</span>] })</span>
<span id="cb676-3"><a href="análisis-de-datos-con-python.html#cb676-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb676-4"><a href="análisis-de-datos-con-python.html#cb676-4" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb676-5"><a href="análisis-de-datos-con-python.html#cb676-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb676-6"><a href="análisis-de-datos-con-python.html#cb676-6" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> pd.DataFrame({<span class="st">&quot;one&quot;</span>: [<span class="va">None</span>, <span class="va">None</span>, <span class="fl">0.11</span>, <span class="op">-</span><span class="fl">2.1</span>, <span class="va">None</span>], </span>
<span id="cb676-7"><a href="análisis-de-datos-con-python.html#cb676-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;two&quot;</span>:[<span class="dv">32</span>, <span class="dv">4</span>, <span class="fl">0.11</span>, <span class="va">None</span>, <span class="op">-</span><span class="fl">2.2</span>], </span>
<span id="cb676-8"><a href="análisis-de-datos-con-python.html#cb676-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;three&quot;</span>:[<span class="dv">322</span>, <span class="dv">43</span>, <span class="fl">1.3</span>, <span class="fl">2.1</span>, <span class="fl">2.2</span>]})</span>
<span id="cb676-9"><a href="análisis-de-datos-con-python.html#cb676-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb676-10"><a href="análisis-de-datos-con-python.html#cb676-10" aria-hidden="true" tabindex="-1"></a>b</span>
<span id="cb676-11"><a href="análisis-de-datos-con-python.html#cb676-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb676-12"><a href="análisis-de-datos-con-python.html#cb676-12" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> a <span class="op">+</span> b</span>
<span id="cb676-13"><a href="análisis-de-datos-con-python.html#cb676-13" aria-hidden="true" tabindex="-1"></a>c</span></code></pre></div>
<ul>
<li>Entre objetos los <strong>missing values</strong> se traspasan. No se tratan como un cero.</li>
</ul>
<div class="sourceCode" id="cb677"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb677-1"><a href="análisis-de-datos-con-python.html#cb677-1" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb677-2"><a href="análisis-de-datos-con-python.html#cb677-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-3"><a href="análisis-de-datos-con-python.html#cb677-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué ocurre cuando queremos hacer estadistica descriptiva? </span></span>
<span id="cb677-4"><a href="análisis-de-datos-con-python.html#cb677-4" aria-hidden="true" tabindex="-1"></a>a[<span class="st">&quot;one&quot;</span>].<span class="bu">sum</span>()</span>
<span id="cb677-5"><a href="análisis-de-datos-con-python.html#cb677-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cuando sumamos todos los valores son tratados como ceros.</span></span>
<span id="cb677-6"><a href="análisis-de-datos-con-python.html#cb677-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-7"><a href="análisis-de-datos-con-python.html#cb677-7" aria-hidden="true" tabindex="-1"></a>c</span>
<span id="cb677-8"><a href="análisis-de-datos-con-python.html#cb677-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-9"><a href="análisis-de-datos-con-python.html#cb677-9" aria-hidden="true" tabindex="-1"></a>c[<span class="st">&quot;three&quot;</span>].<span class="bu">sum</span>()</span>
<span id="cb677-10"><a href="análisis-de-datos-con-python.html#cb677-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-11"><a href="análisis-de-datos-con-python.html#cb677-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Si todos los valors son NA la suma será cero.</span></span>
<span id="cb677-12"><a href="análisis-de-datos-con-python.html#cb677-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-13"><a href="análisis-de-datos-con-python.html#cb677-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Otros tipos de funciones, por ejemplo, cumsum() ignoar NA por defecto, </span></span>
<span id="cb677-14"><a href="análisis-de-datos-con-python.html#cb677-14" aria-hidden="true" tabindex="-1"></a><span class="co"># pero los preservan en los resultados </span></span>
<span id="cb677-15"><a href="análisis-de-datos-con-python.html#cb677-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-16"><a href="análisis-de-datos-con-python.html#cb677-16" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb677-17"><a href="análisis-de-datos-con-python.html#cb677-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-18"><a href="análisis-de-datos-con-python.html#cb677-18" aria-hidden="true" tabindex="-1"></a>a.cumsum()</span>
<span id="cb677-19"><a href="análisis-de-datos-con-python.html#cb677-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-20"><a href="análisis-de-datos-con-python.html#cb677-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Si quiero incorporar el hecho de que existen missing values, ocupo la opción skipna = False</span></span>
<span id="cb677-21"><a href="análisis-de-datos-con-python.html#cb677-21" aria-hidden="true" tabindex="-1"></a>a.cumsum(skipna <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb677-22"><a href="análisis-de-datos-con-python.html#cb677-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb677-23"><a href="análisis-de-datos-con-python.html#cb677-23" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
</div>
<div id="qué-hacer-con-los-missing-values" class="section level4 hasAnchor" number="4.5.6.4">
<h4><span class="header-section-number">4.5.6.4</span> ¿Qué hacer con los missing values?<a href="análisis-de-datos-con-python.html#qué-hacer-con-los-missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb678"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb678-1"><a href="análisis-de-datos-con-python.html#cb678-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos//banglore.csv&#39;</span>)</span>
<span id="cb678-2"><a href="análisis-de-datos-con-python.html#cb678-2" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span>
<span id="cb678-3"><a href="análisis-de-datos-con-python.html#cb678-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb678-4"><a href="análisis-de-datos-con-python.html#cb678-4" aria-hidden="true" tabindex="-1"></a>df.shape</span>
<span id="cb678-5"><a href="análisis-de-datos-con-python.html#cb678-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb678-6"><a href="análisis-de-datos-con-python.html#cb678-6" aria-hidden="true" tabindex="-1"></a>df.isnull().head(<span class="dv">10</span>)</span>
<span id="cb678-7"><a href="análisis-de-datos-con-python.html#cb678-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Verdadero: significa NaN</span></span>
<span id="cb678-8"><a href="análisis-de-datos-con-python.html#cb678-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb678-9"><a href="análisis-de-datos-con-python.html#cb678-9" aria-hidden="true" tabindex="-1"></a>df.isnull?</span>
<span id="cb678-10"><a href="análisis-de-datos-con-python.html#cb678-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb678-11"><a href="análisis-de-datos-con-python.html#cb678-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a sumar los missing values por columna</span></span>
<span id="cb678-12"><a href="análisis-de-datos-con-python.html#cb678-12" aria-hidden="true" tabindex="-1"></a>df.isna().<span class="bu">sum</span>()</span>
<span id="cb678-13"><a href="análisis-de-datos-con-python.html#cb678-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb678-14"><a href="análisis-de-datos-con-python.html#cb678-14" aria-hidden="true" tabindex="-1"></a><span class="dv">5502</span><span class="op">/</span><span class="dv">13320</span></span>
<span id="cb678-15"><a href="análisis-de-datos-con-python.html#cb678-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb678-16"><a href="análisis-de-datos-con-python.html#cb678-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Contamos el total</span></span>
<span id="cb678-17"><a href="análisis-de-datos-con-python.html#cb678-17" aria-hidden="true" tabindex="-1"></a>df.isnull().<span class="bu">sum</span>().<span class="bu">sum</span>()</span></code></pre></div>
</div>
<div id="fillna" class="section level4 hasAnchor" number="4.5.6.5">
<h4><span class="header-section-number">4.5.6.5</span> fillna()<a href="análisis-de-datos-con-python.html#fillna" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb679"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb679-1"><a href="análisis-de-datos-con-python.html#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a remplazar los valores missing por alguno arbitrario</span></span>
<span id="cb679-2"><a href="análisis-de-datos-con-python.html#cb679-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.fillna(value <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb679-3"><a href="análisis-de-datos-con-python.html#cb679-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-4"><a href="análisis-de-datos-con-python.html#cb679-4" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span>
<span id="cb679-5"><a href="análisis-de-datos-con-python.html#cb679-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-6"><a href="análisis-de-datos-con-python.html#cb679-6" aria-hidden="true" tabindex="-1"></a>df2.head(<span class="dv">10</span>)</span>
<span id="cb679-7"><a href="análisis-de-datos-con-python.html#cb679-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-8"><a href="análisis-de-datos-con-python.html#cb679-8" aria-hidden="true" tabindex="-1"></a>df2.isnull().<span class="bu">sum</span>().<span class="bu">sum</span>()</span>
<span id="cb679-9"><a href="análisis-de-datos-con-python.html#cb679-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-10"><a href="análisis-de-datos-con-python.html#cb679-10" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> df.fillna(value <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb679-11"><a href="análisis-de-datos-con-python.html#cb679-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-12"><a href="análisis-de-datos-con-python.html#cb679-12" aria-hidden="true" tabindex="-1"></a>df3.isnull().<span class="bu">sum</span>().<span class="bu">sum</span>()</span>
<span id="cb679-13"><a href="análisis-de-datos-con-python.html#cb679-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-14"><a href="análisis-de-datos-con-python.html#cb679-14" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span>
<span id="cb679-15"><a href="análisis-de-datos-con-python.html#cb679-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-16"><a href="análisis-de-datos-con-python.html#cb679-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Llenar valores con alguno previo</span></span>
<span id="cb679-17"><a href="análisis-de-datos-con-python.html#cb679-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-18"><a href="análisis-de-datos-con-python.html#cb679-18" aria-hidden="true" tabindex="-1"></a>df4 <span class="op">=</span> df.fillna(method <span class="op">=</span> <span class="st">&quot;pad&quot;</span>)</span>
<span id="cb679-19"><a href="análisis-de-datos-con-python.html#cb679-19" aria-hidden="true" tabindex="-1"></a>df4.head(<span class="dv">10</span>)</span>
<span id="cb679-20"><a href="análisis-de-datos-con-python.html#cb679-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-21"><a href="análisis-de-datos-con-python.html#cb679-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Llenar valores con algun valor posterior</span></span>
<span id="cb679-22"><a href="análisis-de-datos-con-python.html#cb679-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-23"><a href="análisis-de-datos-con-python.html#cb679-23" aria-hidden="true" tabindex="-1"></a>df5 <span class="op">=</span> df.fillna(method <span class="op">=</span> <span class="st">&quot;bfill&quot;</span>)</span>
<span id="cb679-24"><a href="análisis-de-datos-con-python.html#cb679-24" aria-hidden="true" tabindex="-1"></a>df5.head(<span class="dv">10</span>)</span>
<span id="cb679-25"><a href="análisis-de-datos-con-python.html#cb679-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-26"><a href="análisis-de-datos-con-python.html#cb679-26" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span>
<span id="cb679-27"><a href="análisis-de-datos-con-python.html#cb679-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-28"><a href="análisis-de-datos-con-python.html#cb679-28" aria-hidden="true" tabindex="-1"></a>df6 <span class="op">=</span> df.fillna(method <span class="op">=</span> <span class="st">&quot;pad&quot;</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb679-29"><a href="análisis-de-datos-con-python.html#cb679-29" aria-hidden="true" tabindex="-1"></a>df6.head(<span class="dv">10</span>)</span>
<span id="cb679-30"><a href="análisis-de-datos-con-python.html#cb679-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-31"><a href="análisis-de-datos-con-python.html#cb679-31" aria-hidden="true" tabindex="-1"></a>df7 <span class="op">=</span> df.fillna(method <span class="op">=</span> <span class="st">&quot;bfill&quot;</span>, axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb679-32"><a href="análisis-de-datos-con-python.html#cb679-32" aria-hidden="true" tabindex="-1"></a>df7.head(<span class="dv">10</span>)</span>
<span id="cb679-33"><a href="análisis-de-datos-con-python.html#cb679-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-34"><a href="análisis-de-datos-con-python.html#cb679-34" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span>
<span id="cb679-35"><a href="análisis-de-datos-con-python.html#cb679-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-36"><a href="análisis-de-datos-con-python.html#cb679-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Llenar diferentes valores en diferentes columnas</span></span>
<span id="cb679-37"><a href="análisis-de-datos-con-python.html#cb679-37" aria-hidden="true" tabindex="-1"></a>df8 <span class="op">=</span> df.fillna({<span class="st">&quot;society&quot;</span>:<span class="st">&quot;abc&quot;</span>, </span>
<span id="cb679-38"><a href="análisis-de-datos-con-python.html#cb679-38" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;balcony&quot;</span>: <span class="st">&quot;defg&quot;</span>})</span>
<span id="cb679-39"><a href="análisis-de-datos-con-python.html#cb679-39" aria-hidden="true" tabindex="-1"></a>df8.tail(<span class="dv">10</span>)</span>
<span id="cb679-40"><a href="análisis-de-datos-con-python.html#cb679-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-41"><a href="análisis-de-datos-con-python.html#cb679-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a completarlo con el promedio de la columna </span></span>
<span id="cb679-42"><a href="análisis-de-datos-con-python.html#cb679-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-43"><a href="análisis-de-datos-con-python.html#cb679-43" aria-hidden="true" tabindex="-1"></a>df9 <span class="op">=</span> df.fillna(value <span class="op">=</span> df[<span class="st">&quot;balcony&quot;</span>].mean())</span>
<span id="cb679-44"><a href="análisis-de-datos-con-python.html#cb679-44" aria-hidden="true" tabindex="-1"></a>df9.head(<span class="dv">10</span>)</span>
<span id="cb679-45"><a href="análisis-de-datos-con-python.html#cb679-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-46"><a href="análisis-de-datos-con-python.html#cb679-46" aria-hidden="true" tabindex="-1"></a><span class="co"># alternativamente podemos ocupar max() o min()</span></span></code></pre></div>
</div>
<div id="drop-na" class="section level4 hasAnchor" number="4.5.6.6">
<h4><span class="header-section-number">4.5.6.6</span> Drop na ()<a href="análisis-de-datos-con-python.html#drop-na" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb680"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb680-1"><a href="análisis-de-datos-con-python.html#cb680-1" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb680-2"><a href="análisis-de-datos-con-python.html#cb680-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-3"><a href="análisis-de-datos-con-python.html#cb680-3" aria-hidden="true" tabindex="-1"></a>df10 <span class="op">=</span> df.dropna()</span>
<span id="cb680-4"><a href="análisis-de-datos-con-python.html#cb680-4" aria-hidden="true" tabindex="-1"></a>df10</span>
<span id="cb680-5"><a href="análisis-de-datos-con-python.html#cb680-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-6"><a href="análisis-de-datos-con-python.html#cb680-6" aria-hidden="true" tabindex="-1"></a>df11 <span class="op">=</span> df.dropna(how <span class="op">=</span> <span class="st">&quot;all&quot;</span>)</span>
<span id="cb680-7"><a href="análisis-de-datos-con-python.html#cb680-7" aria-hidden="true" tabindex="-1"></a>df11.shape</span>
<span id="cb680-8"><a href="análisis-de-datos-con-python.html#cb680-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-9"><a href="análisis-de-datos-con-python.html#cb680-9" aria-hidden="true" tabindex="-1"></a>df11a <span class="op">=</span> df.dropna(how <span class="op">=</span> <span class="st">&quot;any&quot;</span>)</span>
<span id="cb680-10"><a href="análisis-de-datos-con-python.html#cb680-10" aria-hidden="true" tabindex="-1"></a>df11a.shape</span></code></pre></div>
</div>
<div id="replace" class="section level4 hasAnchor" number="4.5.6.7">
<h4><span class="header-section-number">4.5.6.7</span> replace ()<a href="análisis-de-datos-con-python.html#replace" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb681"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb681-1"><a href="análisis-de-datos-con-python.html#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remplaza cualquier valor</span></span>
<span id="cb681-2"><a href="análisis-de-datos-con-python.html#cb681-2" aria-hidden="true" tabindex="-1"></a>df12 <span class="op">=</span> df.replace(to_replace <span class="op">=</span> np.nan, value <span class="op">=</span> <span class="dv">343434</span>)</span>
<span id="cb681-3"><a href="análisis-de-datos-con-python.html#cb681-3" aria-hidden="true" tabindex="-1"></a>df12</span>
<span id="cb681-4"><a href="análisis-de-datos-con-python.html#cb681-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb681-5"><a href="análisis-de-datos-con-python.html#cb681-5" aria-hidden="true" tabindex="-1"></a>df13 <span class="op">=</span> df.replace(to_replace <span class="op">=</span> <span class="fl">3.0</span>, value <span class="op">=</span> <span class="dv">343434</span>)</span>
<span id="cb681-6"><a href="análisis-de-datos-con-python.html#cb681-6" aria-hidden="true" tabindex="-1"></a>df13</span></code></pre></div>
</div>
<div id="interpolate" class="section level4 hasAnchor" number="4.5.6.8">
<h4><span class="header-section-number">4.5.6.8</span> interpolate()<a href="análisis-de-datos-con-python.html#interpolate" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Cambia por el promedio de una lista ordenada</li>
</ul>
<div class="sourceCode" id="cb682"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb682-1"><a href="análisis-de-datos-con-python.html#cb682-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;balcony&quot;</span>] <span class="op">=</span> df[<span class="st">&quot;balcony&quot;</span>].interpolate(method <span class="op">=</span> <span class="st">&quot;linear&quot;</span>)</span>
<span id="cb682-2"><a href="análisis-de-datos-con-python.html#cb682-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb682-3"><a href="análisis-de-datos-con-python.html#cb682-3" aria-hidden="true" tabindex="-1"></a>df.head(<span class="dv">10</span>)</span></code></pre></div>
</div>
</div>
<div id="juntar-bases-de-datos-merge-y-append" class="section level3 hasAnchor" number="4.5.7">
<h3><span class="header-section-number">4.5.7</span> Juntar bases de datos: merge y append<a href="análisis-de-datos-con-python.html#juntar-bases-de-datos-merge-y-append" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div id="ejemplo-1-juntar-por-filas-append" class="section level4 hasAnchor" number="4.5.7.1">
<h4><span class="header-section-number">4.5.7.1</span> Ejemplo 1: Juntar por filas (append)<a href="análisis-de-datos-con-python.html#ejemplo-1-juntar-por-filas-append" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb683"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb683-1"><a href="análisis-de-datos-con-python.html#cb683-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame({<span class="st">&quot;Nombre&quot;</span>:[<span class="st">&quot;Carmen&quot;</span>, <span class="st">&quot;Luis&quot;</span>], </span>
<span id="cb683-2"><a href="análisis-de-datos-con-python.html#cb683-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Sexo&quot;</span>:[<span class="st">&quot;Mujer&quot;</span>, <span class="st">&quot;Hombre&quot;</span>], <span class="st">&quot;Edad&quot;</span>:[<span class="dv">22</span>, <span class="dv">18</span>]}).set_index(<span class="st">&quot;Nombre&quot;</span>)</span>
<span id="cb683-3"><a href="análisis-de-datos-con-python.html#cb683-3" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb683-4"><a href="análisis-de-datos-con-python.html#cb683-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb683-5"><a href="análisis-de-datos-con-python.html#cb683-5" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame({<span class="st">&quot;Nombre&quot;</span>:[<span class="st">&quot;María&quot;</span>, <span class="st">&quot;Pedro&quot;</span>, <span class="st">&quot;Carmen&quot;</span>], </span>
<span id="cb683-6"><a href="análisis-de-datos-con-python.html#cb683-6" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Sexo&quot;</span>:[<span class="st">&quot;Mujer&quot;</span>, <span class="st">&quot;Hombre&quot;</span>, <span class="st">&quot;Mujer&quot;</span>], <span class="st">&quot;Edad&quot;</span>:[<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">22</span>], <span class="st">&quot;FT&quot;</span>: [<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>]}).set_index(<span class="st">&quot;Nombre&quot;</span>)</span>
<span id="cb683-7"><a href="análisis-de-datos-con-python.html#cb683-7" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb683-8"><a href="análisis-de-datos-con-python.html#cb683-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb683-9"><a href="análisis-de-datos-con-python.html#cb683-9" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> pd.DataFrame({<span class="st">&quot;Nombre&quot;</span>:[<span class="st">&quot;María&quot;</span>, <span class="st">&quot;Pedro&quot;</span>, <span class="st">&quot;Carmen&quot;</span>], </span>
<span id="cb683-10"><a href="análisis-de-datos-con-python.html#cb683-10" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Sexo&quot;</span>:[<span class="st">&quot;Mujer&quot;</span>, <span class="st">&quot;Hombre&quot;</span>, <span class="st">&quot;Mujer&quot;</span>], <span class="st">&quot;Edad&quot;</span>:[<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">22</span>]}).set_index(<span class="st">&quot;Nombre&quot;</span>)</span>
<span id="cb683-11"><a href="análisis-de-datos-con-python.html#cb683-11" aria-hidden="true" tabindex="-1"></a>df3</span>
<span id="cb683-12"><a href="análisis-de-datos-con-python.html#cb683-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb683-13"><a href="análisis-de-datos-con-python.html#cb683-13" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([df1, df3])</span>
<span id="cb683-14"><a href="análisis-de-datos-con-python.html#cb683-14" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
</div>
<div id="ejemplo-2-juntar-por-columnas-merge" class="section level4 hasAnchor" number="4.5.7.2">
<h4><span class="header-section-number">4.5.7.2</span> Ejemplo 2: Juntar por columnas (merge)<a href="análisis-de-datos-con-python.html#ejemplo-2-juntar-por-columnas-merge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Sintaxis básica</li>
</ul>
<p><code>df.merge(df1, df2, on = clave, how = tipo)</code></p>
<ul>
<li><p>Tipos</p></li>
<li><p><strong>inner (por defecto)</strong>: El DataFrame resultante solo contiene las filas cuyos valores en la clave están en los <strong>dos</strong> DataFrames</p></li>
</ul>
<div class="figure">
<img src="attachment:inner-join.gif" alt="" />
<p class="caption">inner-join.gif</p>
</div>
<p><strong>outer</strong>:
+ El DataFrame resultante contiene todas las filas de los dos DataFrames.
+ Si una fila de un DataFrame no puede emparejarse con otra los mismos valores en la clave en el otro DataFrame, la fila se añade igualmente al DataFrame resultante rellenando las columnas del otro DataFrame con el valor NaN.
+ Es equivalente a la unión de conjuntos.</p>
<div class="figure">
<img src="attachment:full-join.gif" alt="" />
<p class="caption">full-join.gif</p>
</div>
<p><strong>left</strong>:</p>
<ul>
<li>El DataFrame resultante contiene todas las filas del primer DataFrame.</li>
<li>Descarta las filas del segundo DataFrame que no pueden emparejarse con alguna fila del primero-</li>
</ul>
<div class="figure">
<img src="attachment:left-join.gif" alt="" />
<p class="caption">left-join.gif</p>
</div>
<p><strong>right</strong>:</p>
<ul>
<li>El DataFrame resultante contiene todas las filas del segundo DataFrame</li>
<li>Descarta las filas del primer DataFrame que no pueden emparejarse con alguna fila del segundo DataFrame a través de la clave.</li>
</ul>
<div class="figure">
<img src="attachment:right-join.gif" alt="" />
<p class="caption">right-join.gif</p>
</div>
</div>
<div id="aplicaciones-a-bases-de-datos-append" class="section level4 hasAnchor" number="4.5.7.3">
<h4><span class="header-section-number">4.5.7.3</span> Aplicaciones a bases de datos : append<a href="análisis-de-datos-con-python.html#aplicaciones-a-bases-de-datos-append" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb684"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb684-1"><a href="análisis-de-datos-con-python.html#cb684-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">concat_1.csv&#39;</span>)</span>
<span id="cb684-2"><a href="análisis-de-datos-con-python.html#cb684-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">concat_2.csv&#39;</span>)</span>
<span id="cb684-3"><a href="análisis-de-datos-con-python.html#cb684-3" aria-hidden="true" tabindex="-1"></a>df3 <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">concat_3.csv&#39;</span>)</span>
<span id="cb684-4"><a href="análisis-de-datos-con-python.html#cb684-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-5"><a href="análisis-de-datos-con-python.html#cb684-5" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb684-6"><a href="análisis-de-datos-con-python.html#cb684-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-7"><a href="análisis-de-datos-con-python.html#cb684-7" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb684-8"><a href="análisis-de-datos-con-python.html#cb684-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-9"><a href="análisis-de-datos-con-python.html#cb684-9" aria-hidden="true" tabindex="-1"></a>df3</span>
<span id="cb684-10"><a href="análisis-de-datos-con-python.html#cb684-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-11"><a href="análisis-de-datos-con-python.html#cb684-11" aria-hidden="true" tabindex="-1"></a>row_concat <span class="op">=</span> pd.concat([df1, df2, df3])</span>
<span id="cb684-12"><a href="análisis-de-datos-con-python.html#cb684-12" aria-hidden="true" tabindex="-1"></a>row_concat</span>
<span id="cb684-13"><a href="análisis-de-datos-con-python.html#cb684-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-14"><a href="análisis-de-datos-con-python.html#cb684-14" aria-hidden="true" tabindex="-1"></a>row_concat.loc[<span class="dv">0</span>]</span>
<span id="cb684-15"><a href="análisis-de-datos-con-python.html#cb684-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-16"><a href="análisis-de-datos-con-python.html#cb684-16" aria-hidden="true" tabindex="-1"></a>row_concat.iloc[<span class="dv">0</span>]</span>
<span id="cb684-17"><a href="análisis-de-datos-con-python.html#cb684-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-18"><a href="análisis-de-datos-con-python.html#cb684-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Si quiero resetear el indice utilizo opcion ignore_index = True</span></span>
<span id="cb684-19"><a href="análisis-de-datos-con-python.html#cb684-19" aria-hidden="true" tabindex="-1"></a>row_concat_reset <span class="op">=</span> pd.concat([df1, df2, df3], ignore_index <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb684-20"><a href="análisis-de-datos-con-python.html#cb684-20" aria-hidden="true" tabindex="-1"></a>row_concat_reset</span>
<span id="cb684-21"><a href="análisis-de-datos-con-python.html#cb684-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-22"><a href="análisis-de-datos-con-python.html#cb684-22" aria-hidden="true" tabindex="-1"></a>row_concat_reset.loc[<span class="dv">0</span>]</span>
<span id="cb684-23"><a href="análisis-de-datos-con-python.html#cb684-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-24"><a href="análisis-de-datos-con-python.html#cb684-24" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué ocurre si es que pego un data frame con una serie?</span></span>
<span id="cb684-25"><a href="análisis-de-datos-con-python.html#cb684-25" aria-hidden="true" tabindex="-1"></a>new_row_series <span class="op">=</span> pd.Series([<span class="st">&#39;n1&#39;</span>, <span class="st">&#39;n2&#39;</span>, <span class="st">&#39;n3&#39;</span>, <span class="st">&#39;n4&#39;</span>])</span>
<span id="cb684-26"><a href="análisis-de-datos-con-python.html#cb684-26" aria-hidden="true" tabindex="-1"></a>new_row_series</span>
<span id="cb684-27"><a href="análisis-de-datos-con-python.html#cb684-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-28"><a href="análisis-de-datos-con-python.html#cb684-28" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb684-29"><a href="análisis-de-datos-con-python.html#cb684-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-30"><a href="análisis-de-datos-con-python.html#cb684-30" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, new_row_series])</span>
<span id="cb684-31"><a href="análisis-de-datos-con-python.html#cb684-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-32"><a href="análisis-de-datos-con-python.html#cb684-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Miren lo que ocurre si ahora defino columnas similares</span></span>
<span id="cb684-33"><a href="análisis-de-datos-con-python.html#cb684-33" aria-hidden="true" tabindex="-1"></a>new_row_data <span class="op">=</span> pd.DataFrame([[<span class="st">&#39;n1&#39;</span>, <span class="st">&#39;n2&#39;</span>, <span class="st">&#39;n3&#39;</span>, <span class="st">&#39;n4&#39;</span>]],</span>
<span id="cb684-34"><a href="análisis-de-datos-con-python.html#cb684-34" aria-hidden="true" tabindex="-1"></a>                            columns<span class="op">=</span>[<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>, <span class="st">&#39;D&#39;</span>])</span>
<span id="cb684-35"><a href="análisis-de-datos-con-python.html#cb684-35" aria-hidden="true" tabindex="-1"></a>new_row_data</span>
<span id="cb684-36"><a href="análisis-de-datos-con-python.html#cb684-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-37"><a href="análisis-de-datos-con-python.html#cb684-37" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, new_row_data])</span>
<span id="cb684-38"><a href="análisis-de-datos-con-python.html#cb684-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-39"><a href="análisis-de-datos-con-python.html#cb684-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo modificar los ejes de forma tal de pegar hacia el lado</span></span>
<span id="cb684-40"><a href="análisis-de-datos-con-python.html#cb684-40" aria-hidden="true" tabindex="-1"></a>col_concat <span class="op">=</span> pd.concat([df1, df2, df3], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb684-41"><a href="análisis-de-datos-con-python.html#cb684-41" aria-hidden="true" tabindex="-1"></a>col_concat</span>
<span id="cb684-42"><a href="análisis-de-datos-con-python.html#cb684-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-43"><a href="análisis-de-datos-con-python.html#cb684-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo hacer algunas selecciones que pueden generar tablas de interes </span></span>
<span id="cb684-44"><a href="análisis-de-datos-con-python.html#cb684-44" aria-hidden="true" tabindex="-1"></a>col_concat[<span class="st">&#39;A&#39;</span>]</span>
<span id="cb684-45"><a href="análisis-de-datos-con-python.html#cb684-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-46"><a href="análisis-de-datos-con-python.html#cb684-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo resetear los indices, en este caso el de las columnmas </span></span>
<span id="cb684-47"><a href="análisis-de-datos-con-python.html#cb684-47" aria-hidden="true" tabindex="-1"></a>col_concat_ignore <span class="op">=</span> pd.concat([df1, df2, df3], axis<span class="op">=</span><span class="dv">1</span>, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb684-48"><a href="análisis-de-datos-con-python.html#cb684-48" aria-hidden="true" tabindex="-1"></a>col_concat_ignore</span>
<span id="cb684-49"><a href="análisis-de-datos-con-python.html#cb684-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-50"><a href="análisis-de-datos-con-python.html#cb684-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Miremos un ultimo ejemplo: junta lo común, genera nuevos en caso de que no lo sean</span></span>
<span id="cb684-51"><a href="análisis-de-datos-con-python.html#cb684-51" aria-hidden="true" tabindex="-1"></a>df1.columns<span class="op">=</span>[<span class="st">&#39;A&#39;</span>,<span class="st">&#39;B&#39;</span>,<span class="st">&#39;C&#39;</span>,<span class="st">&#39;D&#39;</span>]</span>
<span id="cb684-52"><a href="análisis-de-datos-con-python.html#cb684-52" aria-hidden="true" tabindex="-1"></a>df2.columns<span class="op">=</span>[<span class="st">&#39;E&#39;</span>,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;G&#39;</span>,<span class="st">&#39;H&#39;</span>]</span>
<span id="cb684-53"><a href="análisis-de-datos-con-python.html#cb684-53" aria-hidden="true" tabindex="-1"></a>df3.columns<span class="op">=</span>[<span class="st">&#39;A&#39;</span>,<span class="st">&#39;H&#39;</span>,<span class="st">&#39;F&#39;</span>,<span class="st">&#39;C&#39;</span>]</span>
<span id="cb684-54"><a href="análisis-de-datos-con-python.html#cb684-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-55"><a href="análisis-de-datos-con-python.html#cb684-55" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb684-56"><a href="análisis-de-datos-con-python.html#cb684-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-57"><a href="análisis-de-datos-con-python.html#cb684-57" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb684-58"><a href="análisis-de-datos-con-python.html#cb684-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-59"><a href="análisis-de-datos-con-python.html#cb684-59" aria-hidden="true" tabindex="-1"></a>df3</span>
<span id="cb684-60"><a href="análisis-de-datos-con-python.html#cb684-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb684-61"><a href="análisis-de-datos-con-python.html#cb684-61" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, df2, df3])</span></code></pre></div>
</div>
<div id="aplicaciones-a-bases-de-datos-merge" class="section level4 hasAnchor" number="4.5.7.4">
<h4><span class="header-section-number">4.5.7.4</span> Aplicaciones a bases de datos : merge<a href="análisis-de-datos-con-python.html#aplicaciones-a-bases-de-datos-merge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb685"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb685-1"><a href="análisis-de-datos-con-python.html#cb685-1" aria-hidden="true" tabindex="-1"></a>person<span class="op">=</span>pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">survey_person.csv&#39;</span>)</span>
<span id="cb685-2"><a href="análisis-de-datos-con-python.html#cb685-2" aria-hidden="true" tabindex="-1"></a>site<span class="op">=</span>pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">survey_site.csv&#39;</span>)</span>
<span id="cb685-3"><a href="análisis-de-datos-con-python.html#cb685-3" aria-hidden="true" tabindex="-1"></a>survey<span class="op">=</span>pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">survey_survey.csv&#39;</span>)</span>
<span id="cb685-4"><a href="análisis-de-datos-con-python.html#cb685-4" aria-hidden="true" tabindex="-1"></a>visited<span class="op">=</span>pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">survey_visited.csv&#39;</span>)</span>
<span id="cb685-5"><a href="análisis-de-datos-con-python.html#cb685-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-6"><a href="análisis-de-datos-con-python.html#cb685-6" aria-hidden="true" tabindex="-1"></a>person</span>
<span id="cb685-7"><a href="análisis-de-datos-con-python.html#cb685-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-8"><a href="análisis-de-datos-con-python.html#cb685-8" aria-hidden="true" tabindex="-1"></a>site</span>
<span id="cb685-9"><a href="análisis-de-datos-con-python.html#cb685-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-10"><a href="análisis-de-datos-con-python.html#cb685-10" aria-hidden="true" tabindex="-1"></a>survey</span>
<span id="cb685-11"><a href="análisis-de-datos-con-python.html#cb685-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-12"><a href="análisis-de-datos-con-python.html#cb685-12" aria-hidden="true" tabindex="-1"></a>visited</span>
<span id="cb685-13"><a href="análisis-de-datos-con-python.html#cb685-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-14"><a href="análisis-de-datos-con-python.html#cb685-14" aria-hidden="true" tabindex="-1"></a>visited_sub <span class="op">=</span> visited.loc[[<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">6</span>]]</span>
<span id="cb685-15"><a href="análisis-de-datos-con-python.html#cb685-15" aria-hidden="true" tabindex="-1"></a>visited_sub</span>
<span id="cb685-16"><a href="análisis-de-datos-con-python.html#cb685-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-17"><a href="análisis-de-datos-con-python.html#cb685-17" aria-hidden="true" tabindex="-1"></a>site</span>
<span id="cb685-18"><a href="análisis-de-datos-con-python.html#cb685-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-19"><a href="análisis-de-datos-con-python.html#cb685-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Por defecto va a ser inner, noten que le indico left_on y right_on. ¿Razón? </span></span>
<span id="cb685-20"><a href="análisis-de-datos-con-python.html#cb685-20" aria-hidden="true" tabindex="-1"></a>o2o <span class="op">=</span> site.merge(visited_sub, </span>
<span id="cb685-21"><a href="análisis-de-datos-con-python.html#cb685-21" aria-hidden="true" tabindex="-1"></a>                 left_on<span class="op">=</span>[<span class="st">&#39;name&#39;</span>], </span>
<span id="cb685-22"><a href="análisis-de-datos-con-python.html#cb685-22" aria-hidden="true" tabindex="-1"></a>                 right_on<span class="op">=</span><span class="st">&#39;site&#39;</span>)</span>
<span id="cb685-23"><a href="análisis-de-datos-con-python.html#cb685-23" aria-hidden="true" tabindex="-1"></a>o2o</span>
<span id="cb685-24"><a href="análisis-de-datos-con-python.html#cb685-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-25"><a href="análisis-de-datos-con-python.html#cb685-25" aria-hidden="true" tabindex="-1"></a>o2o.shape</span>
<span id="cb685-26"><a href="análisis-de-datos-con-python.html#cb685-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-27"><a href="análisis-de-datos-con-python.html#cb685-27" aria-hidden="true" tabindex="-1"></a>visited</span>
<span id="cb685-28"><a href="análisis-de-datos-con-python.html#cb685-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-29"><a href="análisis-de-datos-con-python.html#cb685-29" aria-hidden="true" tabindex="-1"></a>site</span>
<span id="cb685-30"><a href="análisis-de-datos-con-python.html#cb685-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-31"><a href="análisis-de-datos-con-python.html#cb685-31" aria-hidden="true" tabindex="-1"></a>m2o <span class="op">=</span> site.merge(visited, </span>
<span id="cb685-32"><a href="análisis-de-datos-con-python.html#cb685-32" aria-hidden="true" tabindex="-1"></a>                 left_on<span class="op">=</span><span class="st">&#39;name&#39;</span>, </span>
<span id="cb685-33"><a href="análisis-de-datos-con-python.html#cb685-33" aria-hidden="true" tabindex="-1"></a>                 right_on<span class="op">=</span><span class="st">&#39;site&#39;</span>)</span>
<span id="cb685-34"><a href="análisis-de-datos-con-python.html#cb685-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-35"><a href="análisis-de-datos-con-python.html#cb685-35" aria-hidden="true" tabindex="-1"></a>m2o</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.5.4: </b></p>
<ul>
<li>Genere dos bases de datos (df1 y df2) con la siguiente información:</li>
</ul>
<p><strong>df1</strong></p>
<table>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Género</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Carmen</td>
<td>Walmart</td>
</tr>
<tr class="even">
<td>Luis</td>
<td>Dia</td>
</tr>
<tr class="odd">
<td>María</td>
<td>Walmart</td>
</tr>
</tbody>
</table>
<p><strong>df2</strong></p>
<table>
<thead>
<tr class="header">
<th>Nombre</th>
<th>Género</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>María</td>
<td>Fnac</td>
</tr>
<tr class="even">
<td>Pedro</td>
<td>Dia</td>
</tr>
<tr class="odd">
<td>Luis</td>
<td>Walmart</td>
</tr>
</tbody>
</table>
<ul>
<li>Aplique los cuatro tipos de “join”: inner, outer, left y right. Compare sus resultados</li>
</ul>
</div>
<div class="sourceCode" id="cb686"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb686-1"><a href="análisis-de-datos-con-python.html#cb686-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame({<span class="st">&quot;Nombre&quot;</span>:[<span class="st">&quot;Carmen&quot;</span>, <span class="st">&quot;Luis&quot;</span>, <span class="st">&quot;María&quot;</span>],  <span class="st">&quot;Sexo&quot;</span>:[<span class="st">&quot;Mujer&quot;</span>, <span class="st">&quot;Hombre&quot;</span>, <span class="st">&quot;Mujer&quot;</span>]})</span>
<span id="cb686-2"><a href="análisis-de-datos-con-python.html#cb686-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame({<span class="st">&quot;Nombre&quot;</span>:[<span class="st">&quot;María&quot;</span>, <span class="st">&quot;Pedro&quot;</span>, <span class="st">&quot;Luis&quot;</span>], <span class="st">&quot;Edad&quot;</span>:[<span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">18</span>]})</span>
<span id="cb686-3"><a href="análisis-de-datos-con-python.html#cb686-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-4"><a href="análisis-de-datos-con-python.html#cb686-4" aria-hidden="true" tabindex="-1"></a>df1</span>
<span id="cb686-5"><a href="análisis-de-datos-con-python.html#cb686-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-6"><a href="análisis-de-datos-con-python.html#cb686-6" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb686-7"><a href="análisis-de-datos-con-python.html#cb686-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-8"><a href="análisis-de-datos-con-python.html#cb686-8" aria-hidden="true" tabindex="-1"></a>df_inner <span class="op">=</span> pd.merge(df1, df2, on<span class="op">=</span><span class="st">&quot;Nombre&quot;</span>)</span>
<span id="cb686-9"><a href="análisis-de-datos-con-python.html#cb686-9" aria-hidden="true" tabindex="-1"></a>df_outer <span class="op">=</span> pd.merge(df1, df2, on<span class="op">=</span><span class="st">&quot;Nombre&quot;</span>, how<span class="op">=</span><span class="st">&quot;outer&quot;</span>)</span>
<span id="cb686-10"><a href="análisis-de-datos-con-python.html#cb686-10" aria-hidden="true" tabindex="-1"></a>df_left <span class="op">=</span> pd.merge(df1, df2, on<span class="op">=</span><span class="st">&quot;Nombre&quot;</span>, how<span class="op">=</span><span class="st">&quot;left&quot;</span>)</span>
<span id="cb686-11"><a href="análisis-de-datos-con-python.html#cb686-11" aria-hidden="true" tabindex="-1"></a>df_right <span class="op">=</span> pd.merge(df1, df2, on<span class="op">=</span><span class="st">&quot;Nombre&quot;</span>, how<span class="op">=</span><span class="st">&quot;right&quot;</span>)</span>
<span id="cb686-12"><a href="análisis-de-datos-con-python.html#cb686-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-13"><a href="análisis-de-datos-con-python.html#cb686-13" aria-hidden="true" tabindex="-1"></a>df_inner</span>
<span id="cb686-14"><a href="análisis-de-datos-con-python.html#cb686-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-15"><a href="análisis-de-datos-con-python.html#cb686-15" aria-hidden="true" tabindex="-1"></a>df_outer</span>
<span id="cb686-16"><a href="análisis-de-datos-con-python.html#cb686-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-17"><a href="análisis-de-datos-con-python.html#cb686-17" aria-hidden="true" tabindex="-1"></a>df_left</span>
<span id="cb686-18"><a href="análisis-de-datos-con-python.html#cb686-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-19"><a href="análisis-de-datos-con-python.html#cb686-19" aria-hidden="true" tabindex="-1"></a>df_right</span></code></pre></div>
</div>
</div>
</div>
<div id="análisis-de-datos-parte-i" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Análisis de datos (Parte I)<a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-i" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>La clase de hoy tiene como objetivo revisar algunos elementos releacionados con análisis estadístico.</li>
<li>Veremos algunos concepts básicos y su aplicación en python.</li>
<li>En la segunda parte de la clase revisaremos varios ejemplos.</li>
</ul>
<div class="sourceCode" id="cb687"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb687-1"><a href="análisis-de-datos-con-python.html#cb687-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preambulo</span></span>
<span id="cb687-2"><a href="análisis-de-datos-con-python.html#cb687-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-3"><a href="análisis-de-datos-con-python.html#cb687-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías: </span></span>
<span id="cb687-4"><a href="análisis-de-datos-con-python.html#cb687-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-5"><a href="análisis-de-datos-con-python.html#cb687-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd                    <span class="co"># datos/dataframes</span></span>
<span id="cb687-6"><a href="análisis-de-datos-con-python.html#cb687-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np                     <span class="co"># arreglos</span></span>
<span id="cb687-7"><a href="análisis-de-datos-con-python.html#cb687-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt                  <span class="co"># fechas </span></span>
<span id="cb687-8"><a href="análisis-de-datos-con-python.html#cb687-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os                              <span class="co"># directorios </span></span>
<span id="cb687-9"><a href="análisis-de-datos-con-python.html#cb687-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt        <span class="co"># Visualización básicas y no tan básicas</span></span>
<span id="cb687-10"><a href="análisis-de-datos-con-python.html#cb687-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats            <span class="co"># Librería estadística</span></span>
<span id="cb687-11"><a href="análisis-de-datos-con-python.html#cb687-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random                          <span class="co"># Números aleatorios</span></span>
<span id="cb687-12"><a href="análisis-de-datos-con-python.html#cb687-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math                            <span class="co"># Operaciones matemáticas</span></span>
<span id="cb687-13"><a href="análisis-de-datos-con-python.html#cb687-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-14"><a href="análisis-de-datos-con-python.html#cb687-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Fecha de hoy</span></span>
<span id="cb687-15"><a href="análisis-de-datos-con-python.html#cb687-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt.date.today())</span>
<span id="cb687-16"><a href="análisis-de-datos-con-python.html#cb687-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-17"><a href="análisis-de-datos-con-python.html#cb687-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Carpetas</span></span>
<span id="cb687-18"><a href="análisis-de-datos-con-python.html#cb687-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-19"><a href="análisis-de-datos-con-python.html#cb687-19" aria-hidden="true" tabindex="-1"></a>main <span class="op">=</span> os.getcwd()</span>
<span id="cb687-20"><a href="análisis-de-datos-con-python.html#cb687-20" aria-hidden="true" tabindex="-1"></a>datos <span class="op">=</span> main <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">datos&quot;</span></span>
<span id="cb687-21"><a href="análisis-de-datos-con-python.html#cb687-21" aria-hidden="true" tabindex="-1"></a>resultados <span class="op">=</span> main <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">resultados&quot;</span></span>
<span id="cb687-22"><a href="análisis-de-datos-con-python.html#cb687-22" aria-hidden="true" tabindex="-1"></a>tablas <span class="op">=</span> resultados <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">tablas&quot;</span></span>
<span id="cb687-23"><a href="análisis-de-datos-con-python.html#cb687-23" aria-hidden="true" tabindex="-1"></a>figuras <span class="op">=</span> resultados <span class="op">+</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">figuras&quot;</span></span>
<span id="cb687-24"><a href="análisis-de-datos-con-python.html#cb687-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-25"><a href="análisis-de-datos-con-python.html#cb687-25" aria-hidden="true" tabindex="-1"></a>main</span></code></pre></div>
<div id="estadistica-descriptiva" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Estadistica Descriptiva<a href="análisis-de-datos-con-python.html#estadistica-descriptiva" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Las estadísticas descriptivas son medidas que resumen características importantes de los datos.</p></li>
<li><p>La elaboración de estadísticas descriptivas es un primer paso común después de limpiar y preparar un conjunto de datos para su análisis.</p></li>
<li><p>Ya hemos visto varios ejemplos de estadísticas descriptivas en clases anteriores, en esta clase formalizaremos algunos temas y veremos muchos ejemplos.</p></li>
</ul>
<div id="medidas-de-tendencia-central-media-mediana-y-moda" class="section level4 hasAnchor" number="4.6.1.1">
<h4><span class="header-section-number">4.6.1.1</span> Medidas de tendencia central : media, mediana y moda<a href="análisis-de-datos-con-python.html#medidas-de-tendencia-central-media-mediana-y-moda" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Las medidas de centralidad son estadísticas que nos dan una idea del “centro” de una variable numérica.</p></li>
<li><p>En otras palabras, las medidas de centralidad dan una idea del valor típico que se espera ver en una distribución de datos.</p></li>
<li><p>Las medidas de centralidad más comunes son la media, la mediana y la moda.</p></li>
<li><p>La media es simplemente un promedio: la suma de los valores dividida por el número total de registros. Como hemos visto en lecciones anteriores, podemos utilizar <em>df.mean()</em> para obtener la media de cada columna de un DataFrame:</p></li>
</ul>
<div class="sourceCode" id="cb688"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb688-1"><a href="análisis-de-datos-con-python.html#cb688-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos datos</span></span>
<span id="cb688-2"><a href="análisis-de-datos-con-python.html#cb688-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">mtcars.csv&quot;</span>)</span>
<span id="cb688-3"><a href="análisis-de-datos-con-python.html#cb688-3" aria-hidden="true" tabindex="-1"></a>mtcars</span>
<span id="cb688-4"><a href="análisis-de-datos-con-python.html#cb688-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-5"><a href="análisis-de-datos-con-python.html#cb688-5" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> mtcars[<span class="st">&quot;model&quot;</span>]</span>
<span id="cb688-6"><a href="análisis-de-datos-con-python.html#cb688-6" aria-hidden="true" tabindex="-1"></a>mtcars</span>
<span id="cb688-7"><a href="análisis-de-datos-con-python.html#cb688-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-8"><a href="análisis-de-datos-con-python.html#cb688-8" aria-hidden="true" tabindex="-1"></a>mtcars.head(<span class="dv">10</span>)</span>
<span id="cb688-9"><a href="análisis-de-datos-con-python.html#cb688-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-10"><a href="análisis-de-datos-con-python.html#cb688-10" aria-hidden="true" tabindex="-1"></a>mtcars.tail()</span>
<span id="cb688-11"><a href="análisis-de-datos-con-python.html#cb688-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-12"><a href="análisis-de-datos-con-python.html#cb688-12" aria-hidden="true" tabindex="-1"></a>mtcars.columns</span>
<span id="cb688-13"><a href="análisis-de-datos-con-python.html#cb688-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-14"><a href="análisis-de-datos-con-python.html#cb688-14" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(mtcars.columns)</span>
<span id="cb688-15"><a href="análisis-de-datos-con-python.html#cb688-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-16"><a href="análisis-de-datos-con-python.html#cb688-16" aria-hidden="true" tabindex="-1"></a><span class="bu">sorted</span>(mtcars.columns)</span>
<span id="cb688-17"><a href="análisis-de-datos-con-python.html#cb688-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-18"><a href="análisis-de-datos-con-python.html#cb688-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Promedio cada columna</span></span>
<span id="cb688-19"><a href="análisis-de-datos-con-python.html#cb688-19" aria-hidden="true" tabindex="-1"></a>promedio <span class="op">=</span> mtcars.mean()   </span>
<span id="cb688-20"><a href="análisis-de-datos-con-python.html#cb688-20" aria-hidden="true" tabindex="-1"></a>promedio</span>
<span id="cb688-21"><a href="análisis-de-datos-con-python.html#cb688-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-22"><a href="análisis-de-datos-con-python.html#cb688-22" aria-hidden="true" tabindex="-1"></a>t1 <span class="op">=</span> pd.DataFrame(promedio) </span>
<span id="cb688-23"><a href="análisis-de-datos-con-python.html#cb688-23" aria-hidden="true" tabindex="-1"></a>t1</span>
<span id="cb688-24"><a href="análisis-de-datos-con-python.html#cb688-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-25"><a href="análisis-de-datos-con-python.html#cb688-25" aria-hidden="true" tabindex="-1"></a>t1 <span class="op">=</span> t1.rename(columns <span class="op">=</span> {<span class="dv">0</span>: <span class="st">&quot;Promedio&quot;</span>})</span>
<span id="cb688-26"><a href="análisis-de-datos-con-python.html#cb688-26" aria-hidden="true" tabindex="-1"></a>t1</span>
<span id="cb688-27"><a href="análisis-de-datos-con-python.html#cb688-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-28"><a href="análisis-de-datos-con-python.html#cb688-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos nuestra T1</span></span>
<span id="cb688-29"><a href="análisis-de-datos-con-python.html#cb688-29" aria-hidden="true" tabindex="-1"></a>os.chdir(tablas)</span>
<span id="cb688-30"><a href="análisis-de-datos-con-python.html#cb688-30" aria-hidden="true" tabindex="-1"></a>t1.to_excel(<span class="st">&quot;t1.xlsx&quot;</span>, </span>
<span id="cb688-31"><a href="análisis-de-datos-con-python.html#cb688-31" aria-hidden="true" tabindex="-1"></a>            sheet_name<span class="op">=</span><span class="st">&#39;t1&#39;</span>, </span>
<span id="cb688-32"><a href="análisis-de-datos-con-python.html#cb688-32" aria-hidden="true" tabindex="-1"></a>            index<span class="op">=</span><span class="va">True</span>)</span></code></pre></div>
<ul>
<li>Recuerden que también podemos incluir el promedio por fila</li>
</ul>
<div class="sourceCode" id="cb689"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb689-1"><a href="análisis-de-datos-con-python.html#cb689-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Promedio por fila </span></span>
<span id="cb689-2"><a href="análisis-de-datos-con-python.html#cb689-2" aria-hidden="true" tabindex="-1"></a>mtcars.mean(axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
<ul>
<li>La mediana de una distribución es el valor en el que el 50% de los datos se encuentra por debajo y el 50% por encima.</li>
<li>En esencia, la mediana divide los datos por la mitad.</li>
<li>La mediana también se conoce como el percentil del 50%, ya que el 50% de las observaciones se encuentran por debajo de ella.</li>
<li>Se puede obtener la mediana utilizando la función df.median():</li>
</ul>
<div class="sourceCode" id="cb690"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb690-1"><a href="análisis-de-datos-con-python.html#cb690-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mediana</span></span>
<span id="cb690-2"><a href="análisis-de-datos-con-python.html#cb690-2" aria-hidden="true" tabindex="-1"></a>mediana <span class="op">=</span> mtcars.median()  </span>
<span id="cb690-3"><a href="análisis-de-datos-con-python.html#cb690-3" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> pd.DataFrame(mediana) </span>
<span id="cb690-4"><a href="análisis-de-datos-con-python.html#cb690-4" aria-hidden="true" tabindex="-1"></a>t2 <span class="op">=</span> t2.rename(columns <span class="op">=</span> {<span class="dv">0</span>: <span class="st">&quot;Mediana&quot;</span>})</span>
<span id="cb690-5"><a href="análisis-de-datos-con-python.html#cb690-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb690-6"><a href="análisis-de-datos-con-python.html#cb690-6" aria-hidden="true" tabindex="-1"></a>t2</span>
<span id="cb690-7"><a href="análisis-de-datos-con-python.html#cb690-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb690-8"><a href="análisis-de-datos-con-python.html#cb690-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos nuestra T2</span></span>
<span id="cb690-9"><a href="análisis-de-datos-con-python.html#cb690-9" aria-hidden="true" tabindex="-1"></a>os.chdir(tablas)</span>
<span id="cb690-10"><a href="análisis-de-datos-con-python.html#cb690-10" aria-hidden="true" tabindex="-1"></a>t2.to_excel(<span class="st">&quot;t2.xlsx&quot;</span>, </span>
<span id="cb690-11"><a href="análisis-de-datos-con-python.html#cb690-11" aria-hidden="true" tabindex="-1"></a>            sheet_name<span class="op">=</span><span class="st">&#39;t2&#39;</span>, </span>
<span id="cb690-12"><a href="análisis-de-datos-con-python.html#cb690-12" aria-hidden="true" tabindex="-1"></a>            index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb690-13"><a href="análisis-de-datos-con-python.html#cb690-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb690-14"><a href="análisis-de-datos-con-python.html#cb690-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Si queremos juntar? </span></span>
<span id="cb690-15"><a href="análisis-de-datos-con-python.html#cb690-15" aria-hidden="true" tabindex="-1"></a>t3 <span class="op">=</span> pd.concat([t1, t2], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb690-16"><a href="análisis-de-datos-con-python.html#cb690-16" aria-hidden="true" tabindex="-1"></a>t3</span>
<span id="cb690-17"><a href="análisis-de-datos-con-python.html#cb690-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb690-18"><a href="análisis-de-datos-con-python.html#cb690-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos nuestra T3</span></span>
<span id="cb690-19"><a href="análisis-de-datos-con-python.html#cb690-19" aria-hidden="true" tabindex="-1"></a>os.chdir(tablas)</span>
<span id="cb690-20"><a href="análisis-de-datos-con-python.html#cb690-20" aria-hidden="true" tabindex="-1"></a>t3.to_excel(<span class="st">&quot;t3.xlsx&quot;</span>, </span>
<span id="cb690-21"><a href="análisis-de-datos-con-python.html#cb690-21" aria-hidden="true" tabindex="-1"></a>            sheet_name<span class="op">=</span><span class="st">&#39;t3&#39;</span>, </span>
<span id="cb690-22"><a href="análisis-de-datos-con-python.html#cb690-22" aria-hidden="true" tabindex="-1"></a>            index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb690-23"><a href="análisis-de-datos-con-python.html#cb690-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb690-24"><a href="análisis-de-datos-con-python.html#cb690-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Index = True/False me permite incluir el nombre de las filas.</span></span></code></pre></div>
<ul>
<li><p>Aunque la media y la mediana nos dan una idea del centro de una distribución, no siempre son iguales.</p></li>
<li><p>La mediana siempre nos da un valor que divide los datos en dos mitades, mientras que la media es un promedio numérico, por lo que <strong>los valores extremos</strong> pueden tener un impacto significativo en la media.</p></li>
<li><p>En una distribución simétrica, la media y la mediana serán iguales.</p></li>
</ul>
<div class="sourceCode" id="cb691"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb691-1"><a href="análisis-de-datos-con-python.html#cb691-1" aria-hidden="true" tabindex="-1"></a>norm_data <span class="op">=</span> pd.DataFrame(np.random.normal(size<span class="op">=</span><span class="dv">100000</span>))</span>
<span id="cb691-2"><a href="análisis-de-datos-con-python.html#cb691-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-3"><a href="análisis-de-datos-con-python.html#cb691-3" aria-hidden="true" tabindex="-1"></a>norm_data.plot(kind<span class="op">=</span><span class="st">&quot;density&quot;</span>,</span>
<span id="cb691-4"><a href="análisis-de-datos-con-python.html#cb691-4" aria-hidden="true" tabindex="-1"></a>              figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))<span class="op">;</span></span>
<span id="cb691-5"><a href="análisis-de-datos-con-python.html#cb691-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-6"><a href="análisis-de-datos-con-python.html#cb691-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-7"><a href="análisis-de-datos-con-python.html#cb691-7" aria-hidden="true" tabindex="-1"></a>plt.vlines(norm_data.mean(),     <span class="co"># Media</span></span>
<span id="cb691-8"><a href="análisis-de-datos-con-python.html#cb691-8" aria-hidden="true" tabindex="-1"></a>           ymin<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb691-9"><a href="análisis-de-datos-con-python.html#cb691-9" aria-hidden="true" tabindex="-1"></a>           ymax<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb691-10"><a href="análisis-de-datos-con-python.html#cb691-10" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">5.0</span>)<span class="op">;</span></span>
<span id="cb691-11"><a href="análisis-de-datos-con-python.html#cb691-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-12"><a href="análisis-de-datos-con-python.html#cb691-12" aria-hidden="true" tabindex="-1"></a>plt.vlines(norm_data.median(),   <span class="co"># Mediana</span></span>
<span id="cb691-13"><a href="análisis-de-datos-con-python.html#cb691-13" aria-hidden="true" tabindex="-1"></a>           ymin<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb691-14"><a href="análisis-de-datos-con-python.html#cb691-14" aria-hidden="true" tabindex="-1"></a>           ymax<span class="op">=</span><span class="fl">0.4</span>, </span>
<span id="cb691-15"><a href="análisis-de-datos-con-python.html#cb691-15" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">2.0</span>,</span>
<span id="cb691-16"><a href="análisis-de-datos-con-python.html#cb691-16" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;red&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li>En una distribución simetrica (como la normal) la media y la mediana son iguales</li>
</ul>
<div class="sourceCode" id="cb692"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb692-1"><a href="análisis-de-datos-con-python.html#cb692-1" aria-hidden="true" tabindex="-1"></a>skewed_data <span class="op">=</span> pd.DataFrame(np.random.exponential(size<span class="op">=</span><span class="dv">100000</span>))</span>
<span id="cb692-2"><a href="análisis-de-datos-con-python.html#cb692-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb692-3"><a href="análisis-de-datos-con-python.html#cb692-3" aria-hidden="true" tabindex="-1"></a>skewed_data.plot(kind<span class="op">=</span><span class="st">&quot;density&quot;</span>,</span>
<span id="cb692-4"><a href="análisis-de-datos-con-python.html#cb692-4" aria-hidden="true" tabindex="-1"></a>              figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>),</span>
<span id="cb692-5"><a href="análisis-de-datos-con-python.html#cb692-5" aria-hidden="true" tabindex="-1"></a>              xlim<span class="op">=</span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">5</span>))<span class="op">;</span></span>
<span id="cb692-6"><a href="análisis-de-datos-con-python.html#cb692-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb692-7"><a href="análisis-de-datos-con-python.html#cb692-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb692-8"><a href="análisis-de-datos-con-python.html#cb692-8" aria-hidden="true" tabindex="-1"></a>plt.vlines(skewed_data.mean(),     <span class="co"># Media</span></span>
<span id="cb692-9"><a href="análisis-de-datos-con-python.html#cb692-9" aria-hidden="true" tabindex="-1"></a>           ymin<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb692-10"><a href="análisis-de-datos-con-python.html#cb692-10" aria-hidden="true" tabindex="-1"></a>           ymax<span class="op">=</span><span class="fl">0.8</span>,</span>
<span id="cb692-11"><a href="análisis-de-datos-con-python.html#cb692-11" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">5.0</span>)<span class="op">;</span></span>
<span id="cb692-12"><a href="análisis-de-datos-con-python.html#cb692-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb692-13"><a href="análisis-de-datos-con-python.html#cb692-13" aria-hidden="true" tabindex="-1"></a>plt.vlines(skewed_data.median(),   <span class="co"># Mediana</span></span>
<span id="cb692-14"><a href="análisis-de-datos-con-python.html#cb692-14" aria-hidden="true" tabindex="-1"></a>           ymin<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb692-15"><a href="análisis-de-datos-con-python.html#cb692-15" aria-hidden="true" tabindex="-1"></a>           ymax<span class="op">=</span><span class="fl">0.8</span>, </span>
<span id="cb692-16"><a href="análisis-de-datos-con-python.html#cb692-16" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">2.0</span>,</span>
<span id="cb692-17"><a href="análisis-de-datos-con-python.html#cb692-17" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;red&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li>En una distribución asimétrica, la media y la mediana difieren.</li>
<li>La media también está muy influenciada por los valores atípicos, mientras que la mediana resiste la influencia de los mismos:</li>
</ul>
<div class="sourceCode" id="cb693"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb693-1"><a href="análisis-de-datos-con-python.html#cb693-1" aria-hidden="true" tabindex="-1"></a>norm_data <span class="op">=</span> np.random.normal(size<span class="op">=</span><span class="dv">50</span>)</span>
<span id="cb693-2"><a href="análisis-de-datos-con-python.html#cb693-2" aria-hidden="true" tabindex="-1"></a>outliers <span class="op">=</span> np.random.normal(<span class="dv">15</span>, size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb693-3"><a href="análisis-de-datos-con-python.html#cb693-3" aria-hidden="true" tabindex="-1"></a>combined_data <span class="op">=</span> pd.DataFrame(np.concatenate((norm_data, outliers), axis<span class="op">=</span><span class="dv">0</span>))</span>
<span id="cb693-4"><a href="análisis-de-datos-con-python.html#cb693-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb693-5"><a href="análisis-de-datos-con-python.html#cb693-5" aria-hidden="true" tabindex="-1"></a>combined_data.plot(kind<span class="op">=</span><span class="st">&quot;density&quot;</span>,</span>
<span id="cb693-6"><a href="análisis-de-datos-con-python.html#cb693-6" aria-hidden="true" tabindex="-1"></a>              figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>),</span>
<span id="cb693-7"><a href="análisis-de-datos-con-python.html#cb693-7" aria-hidden="true" tabindex="-1"></a>              xlim<span class="op">=</span>(<span class="op">-</span><span class="dv">5</span>,<span class="dv">20</span>))<span class="op">;</span></span>
<span id="cb693-8"><a href="análisis-de-datos-con-python.html#cb693-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb693-9"><a href="análisis-de-datos-con-python.html#cb693-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb693-10"><a href="análisis-de-datos-con-python.html#cb693-10" aria-hidden="true" tabindex="-1"></a>plt.vlines(combined_data.mean(),     <span class="co"># Media (azul)</span></span>
<span id="cb693-11"><a href="análisis-de-datos-con-python.html#cb693-11" aria-hidden="true" tabindex="-1"></a>           ymin<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb693-12"><a href="análisis-de-datos-con-python.html#cb693-12" aria-hidden="true" tabindex="-1"></a>           ymax<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb693-13"><a href="análisis-de-datos-con-python.html#cb693-13" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">5.0</span>)<span class="op">;</span></span>
<span id="cb693-14"><a href="análisis-de-datos-con-python.html#cb693-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb693-15"><a href="análisis-de-datos-con-python.html#cb693-15" aria-hidden="true" tabindex="-1"></a>plt.vlines(combined_data.median(),   <span class="co"># Mediana (rojo)</span></span>
<span id="cb693-16"><a href="análisis-de-datos-con-python.html#cb693-16" aria-hidden="true" tabindex="-1"></a>           ymin<span class="op">=</span><span class="dv">0</span>, </span>
<span id="cb693-17"><a href="análisis-de-datos-con-python.html#cb693-17" aria-hidden="true" tabindex="-1"></a>           ymax<span class="op">=</span><span class="fl">0.2</span>, </span>
<span id="cb693-18"><a href="análisis-de-datos-con-python.html#cb693-18" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">2.0</span>,</span>
<span id="cb693-19"><a href="análisis-de-datos-con-python.html#cb693-19" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;red&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>Dado que la mediana tiende a resistir <strong>los efectos de la asimetría y los valores atípicos</strong>, se conoce como una estadística “robusta”.</p></li>
<li><p>La mediana suele dar una mejor idea del valor típico en una distribución con asimetrías o valores atípicos significativos.</p></li>
<li><p>Finalmente, la moda de una variable es simplemente el valor que aparece con más frecuencia. A diferencia de la media y la mediana, se puede tomar el modo de una variable categórica y es posible tener múltiples modas.</p></li>
</ul>
<div class="sourceCode" id="cb694"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb694-1"><a href="análisis-de-datos-con-python.html#cb694-1" aria-hidden="true" tabindex="-1"></a>moda <span class="op">=</span> mtcars.mode()</span>
<span id="cb694-2"><a href="análisis-de-datos-con-python.html#cb694-2" aria-hidden="true" tabindex="-1"></a>moda</span></code></pre></div>
<ul>
<li>Las columnas con modas múltiples (valores múltiples con la misma cuenta) devuelven valores múltiples como el modo.</li>
<li>Las columnas sin moda (ningún valor que aparezca más de una vez) devuelven NaN.</li>
</ul>
<div class="sourceCode" id="cb695"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb695-1"><a href="análisis-de-datos-con-python.html#cb695-1" aria-hidden="true" tabindex="-1"></a>moda.dropna(axis <span class="op">=</span> <span class="dv">0</span>, </span>
<span id="cb695-2"><a href="análisis-de-datos-con-python.html#cb695-2" aria-hidden="true" tabindex="-1"></a>            how <span class="op">=</span> <span class="st">&#39;any&#39;</span>, </span>
<span id="cb695-3"><a href="análisis-de-datos-con-python.html#cb695-3" aria-hidden="true" tabindex="-1"></a>            inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb695-4"><a href="análisis-de-datos-con-python.html#cb695-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb695-5"><a href="análisis-de-datos-con-python.html#cb695-5" aria-hidden="true" tabindex="-1"></a>moda</span>
<span id="cb695-6"><a href="análisis-de-datos-con-python.html#cb695-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb695-7"><a href="análisis-de-datos-con-python.html#cb695-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos nuestra T4</span></span>
<span id="cb695-8"><a href="análisis-de-datos-con-python.html#cb695-8" aria-hidden="true" tabindex="-1"></a>os.chdir(tablas)</span>
<span id="cb695-9"><a href="análisis-de-datos-con-python.html#cb695-9" aria-hidden="true" tabindex="-1"></a>moda.to_excel(<span class="st">&quot;t4.xlsx&quot;</span>, </span>
<span id="cb695-10"><a href="análisis-de-datos-con-python.html#cb695-10" aria-hidden="true" tabindex="-1"></a>            sheet_name<span class="op">=</span><span class="st">&#39;t4&#39;</span>, </span>
<span id="cb695-11"><a href="análisis-de-datos-con-python.html#cb695-11" aria-hidden="true" tabindex="-1"></a>            index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb695-12"><a href="análisis-de-datos-con-python.html#cb695-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb695-13"><a href="análisis-de-datos-con-python.html#cb695-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Index = True/False me permite incluir el nombre de las filas.</span></span></code></pre></div>
<ul>
<li>En resumen…</li>
</ul>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
</div>
<div id="medidas-de-dispersión" class="section level4 hasAnchor" number="4.6.1.2">
<h4><span class="header-section-number">4.6.1.2</span> Medidas de dispersión<a href="análisis-de-datos-con-python.html#medidas-de-dispersión" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Las medidas de dispersión son estadísticas que describen cómo varían los datos.</p></li>
<li><p>Mientras que las medidas de centro nos dan una idea del valor típico, las medidas de dispersión nos dan una idea de cuánto tienden a divergir los datos del valor típico.</p></li>
<li><p>Una de las medidas de dispersión más sencillas es el rango.</p></li>
<li><p>El rango es la distancia entre las observaciones máxima y mínima:</p></li>
</ul>
<div class="sourceCode" id="cb696"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb696-1"><a href="análisis-de-datos-con-python.html#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rango</span></span>
<span id="cb696-2"><a href="análisis-de-datos-con-python.html#cb696-2" aria-hidden="true" tabindex="-1"></a>rango <span class="op">=</span> <span class="bu">max</span>(mtcars[<span class="st">&quot;mpg&quot;</span>]) <span class="op">-</span> <span class="bu">min</span>(mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb696-3"><a href="análisis-de-datos-con-python.html#cb696-3" aria-hidden="true" tabindex="-1"></a>rango</span></code></pre></div>
<ul>
<li>Como se ha señalado anteriormente, la mediana representa el percentil 50 de un conjunto de datos.</li>
<li>Se puede utilizar un resumen de varios percentiles para describir la dispersión de una variable.</li>
<li>Podemos extraer el valor mínimo (percentil 0), el primer cuartil (percentil 25), la mediana, el tercer cuartil (percentil 75) y el valor máximo (percentil 100) utilizando el método <em>quantile()</em>:</li>
</ul>
<div class="sourceCode" id="cb697"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb697-1"><a href="análisis-de-datos-con-python.html#cb697-1" aria-hidden="true" tabindex="-1"></a>five_num <span class="op">=</span> [mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="dv">0</span>),   </span>
<span id="cb697-2"><a href="análisis-de-datos-con-python.html#cb697-2" aria-hidden="true" tabindex="-1"></a>            mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="fl">0.25</span>),</span>
<span id="cb697-3"><a href="análisis-de-datos-con-python.html#cb697-3" aria-hidden="true" tabindex="-1"></a>            mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="fl">0.50</span>),</span>
<span id="cb697-4"><a href="análisis-de-datos-con-python.html#cb697-4" aria-hidden="true" tabindex="-1"></a>            mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="fl">0.75</span>),</span>
<span id="cb697-5"><a href="análisis-de-datos-con-python.html#cb697-5" aria-hidden="true" tabindex="-1"></a>            mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="dv">1</span>)]</span>
<span id="cb697-6"><a href="análisis-de-datos-con-python.html#cb697-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb697-7"><a href="análisis-de-datos-con-python.html#cb697-7" aria-hidden="true" tabindex="-1"></a>five_num</span>
<span id="cb697-8"><a href="análisis-de-datos-con-python.html#cb697-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb697-9"><a href="análisis-de-datos-con-python.html#cb697-9" aria-hidden="true" tabindex="-1"></a>t5 <span class="op">=</span> pd.DataFrame(mtcars.describe())</span>
<span id="cb697-10"><a href="análisis-de-datos-con-python.html#cb697-10" aria-hidden="true" tabindex="-1"></a>t5</span>
<span id="cb697-11"><a href="análisis-de-datos-con-python.html#cb697-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb697-12"><a href="análisis-de-datos-con-python.html#cb697-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos nuestra T4</span></span>
<span id="cb697-13"><a href="análisis-de-datos-con-python.html#cb697-13" aria-hidden="true" tabindex="-1"></a>os.chdir(tablas)</span>
<span id="cb697-14"><a href="análisis-de-datos-con-python.html#cb697-14" aria-hidden="true" tabindex="-1"></a>moda.to_excel(<span class="st">&quot;t5.xlsx&quot;</span>, </span>
<span id="cb697-15"><a href="análisis-de-datos-con-python.html#cb697-15" aria-hidden="true" tabindex="-1"></a>            sheet_name<span class="op">=</span><span class="st">&#39;t5&#39;</span>, </span>
<span id="cb697-16"><a href="análisis-de-datos-con-python.html#cb697-16" aria-hidden="true" tabindex="-1"></a>            index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb697-17"><a href="análisis-de-datos-con-python.html#cb697-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb697-18"><a href="análisis-de-datos-con-python.html#cb697-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Index = True/False me permite incluir el nombre de las filas.</span></span></code></pre></div>
<p>El rango intercuartil (IQR) es otra medida común de dispersión. El IQR es la distancia entre el tercer cuartil y el primer cuartil:</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb698-1"><a href="análisis-de-datos-con-python.html#cb698-1" aria-hidden="true" tabindex="-1"></a>IQR <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="fl">0.75</span>) <span class="op">-</span> mtcars[<span class="st">&quot;mpg&quot;</span>].quantile(<span class="fl">0.25</span>)</span>
<span id="cb698-2"><a href="análisis-de-datos-con-python.html#cb698-2" aria-hidden="true" tabindex="-1"></a>IQR</span></code></pre></div>
<p>En un grafico de caja y bigote es posible ver estas medidas de dispersión de forma gráfica:</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb699-1"><a href="análisis-de-datos-con-python.html#cb699-1" aria-hidden="true" tabindex="-1"></a>mtcars.boxplot(column<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb699-2"><a href="análisis-de-datos-con-python.html#cb699-2" aria-hidden="true" tabindex="-1"></a>               return_type<span class="op">=</span><span class="st">&#39;axes&#39;</span>,</span>
<span id="cb699-3"><a href="análisis-de-datos-con-python.html#cb699-3" aria-hidden="true" tabindex="-1"></a>               figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">8</span>))</span>
<span id="cb699-4"><a href="análisis-de-datos-con-python.html#cb699-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb699-5"><a href="análisis-de-datos-con-python.html#cb699-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar texto</span></span>
<span id="cb699-6"><a href="análisis-de-datos-con-python.html#cb699-6" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">0.74</span>, y<span class="op">=</span><span class="fl">22.25</span>, s<span class="op">=</span><span class="st">&quot;3er cuartil&quot;</span>)</span>
<span id="cb699-7"><a href="análisis-de-datos-con-python.html#cb699-7" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">0.8</span>, y<span class="op">=</span><span class="fl">18.75</span>, s<span class="op">=</span><span class="st">&quot;Mediana&quot;</span>)</span>
<span id="cb699-8"><a href="análisis-de-datos-con-python.html#cb699-8" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">0.75</span>, y<span class="op">=</span><span class="fl">15.5</span>, s<span class="op">=</span><span class="st">&quot;Primer cuartil&quot;</span>)</span>
<span id="cb699-9"><a href="análisis-de-datos-con-python.html#cb699-9" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">0.9</span>, y<span class="op">=</span><span class="dv">10</span>, s<span class="op">=</span><span class="st">&quot;Min&quot;</span>)</span>
<span id="cb699-10"><a href="análisis-de-datos-con-python.html#cb699-10" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">0.9</span>, y<span class="op">=</span><span class="fl">33.5</span>, s<span class="op">=</span><span class="st">&quot;Max&quot;</span>)</span>
<span id="cb699-11"><a href="análisis-de-datos-con-python.html#cb699-11" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">0.7</span>, y<span class="op">=</span><span class="fl">19.5</span>, s<span class="op">=</span><span class="st">&quot;IQR&quot;</span>, rotation<span class="op">=</span><span class="dv">360</span>, size<span class="op">=</span><span class="dv">15</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li>La varianza y la desviación estándar son otras dos medidas comunes de la dispersión.</li>
<li>La varianza de una distribución es la media de las desviaciones (diferencias) al cuadrado de la media.</li>
<li>Utilice df.var() para comprobar la varianza:</li>
</ul>
<div class="sourceCode" id="cb700"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb700-1"><a href="análisis-de-datos-con-python.html#cb700-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&quot;mpg&quot;</span>].var()</span></code></pre></div>
<ul>
<li><p>La desviación estandar es la raíz cuadrada de la varianza.</p></li>
<li><p>La desviación estándar puede ser más interpretable que la varianza, ya que la desviación estándar se expresa en términos de las mismas unidades que la variable en cuestión, mientras que la varianza se expresa en términos de unidades al cuadrado.</p></li>
<li><p>Utilice df.std() para comprobar la desviación estándar:</p></li>
</ul>
<div class="sourceCode" id="cb701"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb701-1"><a href="análisis-de-datos-con-python.html#cb701-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&quot;mpg&quot;</span>].std()</span></code></pre></div>
<ul>
<li><p>Dado que tanto la varianza como la desviación estándar se derivan de la media, <strong>son susceptibles a la influencia de la asimetría de los datos y de los valores atípicos</strong>.</p></li>
<li><p>La desviación absoluta de la mediana es una medida alternativa de la dispersión basada en la mediana, que hereda la solidez de la mediana frente a la influencia de la asimetría y los valores atípicos.</p></li>
<li><p>Es la mediana del valor absoluto de las desviaciones de la mediana:</p></li>
</ul>
<div class="sourceCode" id="cb702"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb702-1"><a href="análisis-de-datos-con-python.html#cb702-1" aria-hidden="true" tabindex="-1"></a>abs_median_devs <span class="op">=</span> <span class="bu">abs</span>(mtcars[<span class="st">&quot;mpg&quot;</span>] <span class="op">-</span> mtcars[<span class="st">&quot;mpg&quot;</span>].median())</span>
<span id="cb702-2"><a href="análisis-de-datos-con-python.html#cb702-2" aria-hidden="true" tabindex="-1"></a>abs_median_devs.median()</span></code></pre></div>
</div>
<div id="asimetría-y-curtosis" class="section level4 hasAnchor" number="4.6.1.3">
<h4><span class="header-section-number">4.6.1.3</span> Asimetría y curtosis<a href="análisis-de-datos-con-python.html#asimetría-y-curtosis" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Además de las medidas de centro y dispersión, las estadísticas descriptivas incluyen medidas que dan una idea de la forma de una distribución.</p></li>
<li><p>La simetría mide el sesgo o la asimetría de una distribución, mientras que la curtosis mide la cantidad de datos que se encuentran en las colas de una distribución en comparación con el centro.</p></li>
<li><p>No vamos a entrar en los cálculos exactos que hay detrás de la asimetría y la curtosis, pero son esencialmente estadísticas que llevan la idea de la varianza un paso más allá: mientras que la varianza implica elevar al cuadrado las desviaciones de la media, la asimetría implica elevar al cubo las desviaciones de la media y la curtosis implica elevar las desviaciones de la media a la cuarta potencia.</p></li>
<li><p>Pandas ha incorporado funciones para comprobar la asimetría y la curtosis, df.skew() y df.kurt() respectivamente:</p></li>
</ul>
<div class="sourceCode" id="cb703"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb703-1"><a href="análisis-de-datos-con-python.html#cb703-1" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&quot;mpg&quot;</span>].skew()  <span class="co"># Simetría</span></span>
<span id="cb703-2"><a href="análisis-de-datos-con-python.html#cb703-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb703-3"><a href="análisis-de-datos-con-python.html#cb703-3" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&quot;mpg&quot;</span>].kurt()  <span class="co"># Kurtosis</span></span>
<span id="cb703-4"><a href="análisis-de-datos-con-python.html#cb703-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb703-5"><a href="análisis-de-datos-con-python.html#cb703-5" aria-hidden="true" tabindex="-1"></a>norm_data <span class="op">=</span> np.random.normal(size<span class="op">=</span><span class="dv">100000</span>)</span>
<span id="cb703-6"><a href="análisis-de-datos-con-python.html#cb703-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb703-7"><a href="análisis-de-datos-con-python.html#cb703-7" aria-hidden="true" tabindex="-1"></a>skewed_data <span class="op">=</span> np.concatenate((np.random.normal(size<span class="op">=</span><span class="dv">35000</span>)<span class="op">+</span><span class="dv">2</span>, </span>
<span id="cb703-8"><a href="análisis-de-datos-con-python.html#cb703-8" aria-hidden="true" tabindex="-1"></a>                             np.random.exponential(size<span class="op">=</span><span class="dv">65000</span>)), </span>
<span id="cb703-9"><a href="análisis-de-datos-con-python.html#cb703-9" aria-hidden="true" tabindex="-1"></a>                             axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb703-10"><a href="análisis-de-datos-con-python.html#cb703-10" aria-hidden="true" tabindex="-1"></a>uniform_data <span class="op">=</span> np.random.uniform(<span class="dv">0</span>,<span class="dv">2</span>, size<span class="op">=</span><span class="dv">100000</span>)</span>
<span id="cb703-11"><a href="análisis-de-datos-con-python.html#cb703-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb703-12"><a href="análisis-de-datos-con-python.html#cb703-12" aria-hidden="true" tabindex="-1"></a>peaked_data <span class="op">=</span> np.concatenate((np.random.exponential(size<span class="op">=</span><span class="dv">50000</span>),</span>
<span id="cb703-13"><a href="análisis-de-datos-con-python.html#cb703-13" aria-hidden="true" tabindex="-1"></a>                             np.random.exponential(size<span class="op">=</span><span class="dv">50000</span>)<span class="op">*</span>(<span class="op">-</span><span class="dv">1</span>)),</span>
<span id="cb703-14"><a href="análisis-de-datos-con-python.html#cb703-14" aria-hidden="true" tabindex="-1"></a>                             axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb703-15"><a href="análisis-de-datos-con-python.html#cb703-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb703-16"><a href="análisis-de-datos-con-python.html#cb703-16" aria-hidden="true" tabindex="-1"></a>data_df <span class="op">=</span> pd.DataFrame({<span class="st">&quot;norm&quot;</span>:norm_data,</span>
<span id="cb703-17"><a href="análisis-de-datos-con-python.html#cb703-17" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;skewed&quot;</span>:skewed_data,</span>
<span id="cb703-18"><a href="análisis-de-datos-con-python.html#cb703-18" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;uniform&quot;</span>:uniform_data,</span>
<span id="cb703-19"><a href="análisis-de-datos-con-python.html#cb703-19" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&quot;peaked&quot;</span>:peaked_data})</span>
<span id="cb703-20"><a href="análisis-de-datos-con-python.html#cb703-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb703-21"><a href="análisis-de-datos-con-python.html#cb703-21" aria-hidden="true" tabindex="-1"></a>data_df.plot(kind<span class="op">=</span><span class="st">&quot;density&quot;</span>,</span>
<span id="cb703-22"><a href="análisis-de-datos-con-python.html#cb703-22" aria-hidden="true" tabindex="-1"></a>            figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>),</span>
<span id="cb703-23"><a href="análisis-de-datos-con-python.html#cb703-23" aria-hidden="true" tabindex="-1"></a>            xlim<span class="op">=</span>(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>))<span class="op">;</span></span></code></pre></div>
<p>Ahora vamos a comprobar la asimetría de cada una de las distribuciones. Dado que la simetría se mide con la asimetría, esperaríamos ver una asimetría baja para todas las distribuciones excepto la asimétrica, porque todas las demás son aproximadamente simétricas:</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb704-1"><a href="análisis-de-datos-con-python.html#cb704-1" aria-hidden="true" tabindex="-1"></a>data_df.skew()</span></code></pre></div>
<p>Veamos la curtosis:</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb705-1"><a href="análisis-de-datos-con-python.html#cb705-1" aria-hidden="true" tabindex="-1"></a>data_df.kurt()</span></code></pre></div>
<p>Como podemos ver en el resultado, los datos con distribución normal tienen una curtosis cercana a cero, la distribución plana tiene una curtosis negativa y las dos distribuciones con más datos en las colas frente al centro tienen mayor curtosis.</p>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
</div>
<div id="resumen-sección-1" class="section level4 hasAnchor" number="4.6.1.4">
<h4><span class="header-section-number">4.6.1.4</span> Resumen sección 1<a href="análisis-de-datos-con-python.html#resumen-sección-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Las estadísticas descriptivas le ayudan a explorar las características de sus datos, como el centro, la dispersión y la forma, resumiéndolas con medidas numéricas.</p></li>
<li><p>Los estadísticos descriptivos ayudan a informar sobre la dirección de un análisis y le permiten comunicar sus ideas a otros de forma rápida y sencilla. Además, ciertos valores, como la media y la varianza, se utilizan en todo tipo de pruebas estadísticas y modelos predictivos.</p></li>
<li><p>Es importante hacer siempre una tabla con estos estadisticos al inicio de cualquier ejercicio de análisis de datos.</p></li>
</ul>
</div>
</div>
<div id="la-distribución-normal" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> La distribución normal<a href="análisis-de-datos-con-python.html#la-distribución-normal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>La normal o <a href="https://en.wikipedia.org/wiki/Normal_distribution">distribución gaussiana</a> es una distribución de probabilidad continua caracterizada por una curva simétrica en forma de campana.</p></li>
<li><p>Una distribución normal se define por su centro (media) y su dispersión (desviación estándar). La mayor parte de las observaciones generadas a partir de una distribución normal se sitúan cerca de la media, que se encuentra en el centro exacto de la distribución: como regla general, aproximadamente el 68% de los datos se sitúan dentro de una desviación estándar de la media, el 95% dentro de dos desviaciones estándar y el 99,8% dentro de tres desviaciones estándar.</p></li>
<li><p>La distribución normal es quizá la más importante de toda la estadística. Resulta que muchos fenómenos del mundo real, como las puntuaciones de los tests de inteligencia y las alturas humanas, siguen aproximadamente una distribución normal, por lo que se utiliza a menudo para modelar variables aleatorias. Muchas pruebas estadísticas comunes asumen que las distribuciones son normales.</p></li>
<li><p>El apodo de scipy para la distribución normal es norm. Vamos a investigar la distribución normal:</p></li>
</ul>
<div class="sourceCode" id="cb706"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb706-1"><a href="análisis-de-datos-con-python.html#cb706-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estas caracteristicas matematicas nos permiten saber la posición de ciertos valores</span></span>
<span id="cb706-2"><a href="análisis-de-datos-con-python.html#cb706-2" aria-hidden="true" tabindex="-1"></a>prob_under_minus1 <span class="op">=</span> stats.norm.cdf(x<span class="op">=</span> <span class="op">-</span><span class="dv">1</span>,  </span>
<span id="cb706-3"><a href="análisis-de-datos-con-python.html#cb706-3" aria-hidden="true" tabindex="-1"></a>                                loc <span class="op">=</span> <span class="dv">0</span>,               </span>
<span id="cb706-4"><a href="análisis-de-datos-con-python.html#cb706-4" aria-hidden="true" tabindex="-1"></a>                                scale <span class="op">=</span> <span class="dv">1</span>)     </span>
<span id="cb706-5"><a href="análisis-de-datos-con-python.html#cb706-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb706-6"><a href="análisis-de-datos-con-python.html#cb706-6" aria-hidden="true" tabindex="-1"></a>prob_over_1 <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> stats.norm.cdf(x <span class="op">=</span> <span class="dv">1</span>,  </span>
<span id="cb706-7"><a href="análisis-de-datos-con-python.html#cb706-7" aria-hidden="true" tabindex="-1"></a>                                loc <span class="op">=</span> <span class="dv">0</span>,               </span>
<span id="cb706-8"><a href="análisis-de-datos-con-python.html#cb706-8" aria-hidden="true" tabindex="-1"></a>                                scale<span class="op">=</span> <span class="dv">1</span>) </span>
<span id="cb706-9"><a href="análisis-de-datos-con-python.html#cb706-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb706-10"><a href="análisis-de-datos-con-python.html#cb706-10" aria-hidden="true" tabindex="-1"></a>between_prob <span class="op">=</span> <span class="dv">1</span><span class="op">-</span>(prob_under_minus1 <span class="op">+</span> prob_over_1)</span>
<span id="cb706-11"><a href="análisis-de-datos-con-python.html#cb706-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb706-12"><a href="análisis-de-datos-con-python.html#cb706-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(prob_under_minus1, prob_over_1, between_prob)</span></code></pre></div>
<p>El resultado muesta muestra que:</p>
<ul>
<li><p>Aproximadamente el 16% de los datos generados por una distribución normal con media 0 y desviación estándar 1 está por debajo de -1,</p></li>
<li><p>El 16% está por encima de 1 y el 68% se encuentra entre -1 y 1.</p></li>
<li><p>Lo anterior es coherente con la regla 68, 95, 99,7.</p></li>
<li><p>Grafiquemos la distribución normal e inspeccionemos las áreas que hemos calculado:</p></li>
</ul>
<div class="sourceCode" id="cb707"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb707-1"><a href="análisis-de-datos-con-python.html#cb707-1" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">&quot;figure.figsize&quot;</span>] <span class="op">=</span> (<span class="dv">9</span>,<span class="dv">9</span>)</span>
<span id="cb707-2"><a href="análisis-de-datos-con-python.html#cb707-2" aria-hidden="true" tabindex="-1"></a>                                  </span>
<span id="cb707-3"><a href="análisis-de-datos-con-python.html#cb707-3" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">1</span>,<span class="fl">0.01</span>), </span>
<span id="cb707-4"><a href="análisis-de-datos-con-python.html#cb707-4" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">1</span>,<span class="fl">0.01</span>)) ,</span>
<span id="cb707-5"><a href="análisis-de-datos-con-python.html#cb707-5" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;red&#39;</span>,</span>
<span id="cb707-6"><a href="análisis-de-datos-con-python.html#cb707-6" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb707-7"><a href="análisis-de-datos-con-python.html#cb707-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-8"><a href="análisis-de-datos-con-python.html#cb707-8" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="dv">1</span>,<span class="dv">4</span>,<span class="fl">0.01</span>), </span>
<span id="cb707-9"><a href="análisis-de-datos-con-python.html#cb707-9" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="dv">1</span>,<span class="dv">4</span>,<span class="fl">0.01</span>)) ,</span>
<span id="cb707-10"><a href="análisis-de-datos-con-python.html#cb707-10" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;red&#39;</span>,</span>
<span id="cb707-11"><a href="análisis-de-datos-con-python.html#cb707-11" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb707-12"><a href="análisis-de-datos-con-python.html#cb707-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-13"><a href="análisis-de-datos-con-python.html#cb707-13" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">0.01</span>), </span>
<span id="cb707-14"><a href="análisis-de-datos-con-python.html#cb707-14" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">0.01</span>)) ,</span>
<span id="cb707-15"><a href="análisis-de-datos-con-python.html#cb707-15" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;blue&#39;</span>,</span>
<span id="cb707-16"><a href="análisis-de-datos-con-python.html#cb707-16" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb707-17"><a href="análisis-de-datos-con-python.html#cb707-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb707-18"><a href="análisis-de-datos-con-python.html#cb707-18" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=-</span><span class="fl">1.8</span>, y<span class="op">=</span><span class="fl">0.03</span>, s<span class="op">=</span> <span class="bu">round</span>(prob_under_minus1,<span class="dv">3</span>))</span>
<span id="cb707-19"><a href="análisis-de-datos-con-python.html#cb707-19" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=-</span><span class="fl">0.2</span>, y<span class="op">=</span><span class="fl">0.1</span>, s<span class="op">=</span> <span class="bu">round</span>(between_prob,<span class="dv">3</span>))</span>
<span id="cb707-20"><a href="análisis-de-datos-con-python.html#cb707-20" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">1.4</span>, y<span class="op">=</span><span class="fl">0.03</span>, s<span class="op">=</span> <span class="bu">round</span>(prob_over_1,<span class="dv">3</span>))<span class="op">;</span></span></code></pre></div>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<ul>
<li><p>El gráfico anterior muestra la forma de campana de la distribución normal, el área por debajo y por encima de una desviación estándar y el área dentro de una desviación estándar de la media.</p></li>
<li><p>Encontrar los cuantiles de la distribución normal es una tarea común cuando se realizan pruebas estadísticas. Puede comprobar los cuantiles de la distribución normal con stats.norm.ppf():</p></li>
</ul>
<div class="sourceCode" id="cb708"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb708-1"><a href="análisis-de-datos-con-python.html#cb708-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stats.norm.ppf(q<span class="op">=</span><span class="fl">0.50</span>))</span>
<span id="cb708-2"><a href="análisis-de-datos-con-python.html#cb708-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb708-3"><a href="análisis-de-datos-con-python.html#cb708-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stats.norm.ppf(q<span class="op">=</span><span class="fl">0.975</span>) )</span></code></pre></div>
<ul>
<li>El resultado del cuantil anterior confirma que aproximadamente el 5% de los datos se encuentra a más de 2 desviaciones estándar de la media.</li>
<li>Esto es conocido como el valor z. Básicamente una medida de cuantas desviaciones estandar un punto esta alejado sobre la media.</li>
</ul>
<div id="de-una-muestra-aleatoria-a-la-población" class="section level4 hasAnchor" number="4.6.2.1">
<h4><span class="header-section-number">4.6.2.1</span> De una muestra aleatoria a la población<a href="análisis-de-datos-con-python.html#de-una-muestra-aleatoria-a-la-población" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Hasta ahora, esta guía se ha centrado en las funciones y la sintaxis necesarias para manipular, explorar y describir los datos.</p></li>
<li><p>La limpieza de datos y el análisis exploratorio son a menudo pasos preliminares hacia el objetivo final de extraer información de los datos a través de la inferencia estadística o el modelado predictivo.</p></li>
<li><p>La inferencia estadística es el proceso de análisis de datos de muestra para obtener información sobre la población de la que se recogieron los datos y para investigar las diferencias entre las muestras de datos.</p></li>
<li><p>En el análisis de datos, a menudo estamos interesados en las características de alguna población grande, pero recoger datos de toda la población puede ser inviable.</p></li>
</ul>
</div>
<div id="estimaciones-puntuales" class="section level4 hasAnchor" number="4.6.2.2">
<h4><span class="header-section-number">4.6.2.2</span> Estimaciones puntuales<a href="análisis-de-datos-con-python.html#estimaciones-puntuales" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Las estimaciones puntuales son estimaciones de los parámetros de la población basadas en datos de la muestra.</p></li>
<li><p>Por ejemplo, si quisiéramos saber la edad media de los votantes podríamos realizar una encuesta entre los votantes registrados y utilizar la edad media de los encuestados como una estimación puntual de la edad media de la población en su conjunto. La media de una muestra se conoce como media muestral.</p></li>
<li><p>La media de la muestra no suele ser exactamente igual a la media de la población. Esta diferencia puede deberse a muchos factores, como un diseño deficiente de la encuesta, métodos de muestreo sesgados y la aleatoriedad inherente a la extracción de una muestra de una población.</p></li>
<li><p>Investiguemos las estimaciones puntuales generando una población de datos de edad aleatorios y extrayendo luego una muestra de ella para estimar la media:</p></li>
</ul>
<div class="sourceCode" id="cb709"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb709-1"><a href="análisis-de-datos-con-python.html#cb709-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">10</span>)</span>
<span id="cb709-2"><a href="análisis-de-datos-con-python.html#cb709-2" aria-hidden="true" tabindex="-1"></a>population_ages1 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">35</span>, size<span class="op">=</span><span class="dv">150000</span>)</span>
<span id="cb709-3"><a href="análisis-de-datos-con-python.html#cb709-3" aria-hidden="true" tabindex="-1"></a>population_ages2 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">10</span>, size<span class="op">=</span><span class="dv">100000</span>)</span>
<span id="cb709-4"><a href="análisis-de-datos-con-python.html#cb709-4" aria-hidden="true" tabindex="-1"></a>population_ages <span class="op">=</span> np.concatenate((population_ages1, population_ages2))</span>
<span id="cb709-5"><a href="análisis-de-datos-con-python.html#cb709-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-6"><a href="análisis-de-datos-con-python.html#cb709-6" aria-hidden="true" tabindex="-1"></a>population_ages</span>
<span id="cb709-7"><a href="análisis-de-datos-con-python.html#cb709-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-8"><a href="análisis-de-datos-con-python.html#cb709-8" aria-hidden="true" tabindex="-1"></a>population_ages.mean()</span>
<span id="cb709-9"><a href="análisis-de-datos-con-python.html#cb709-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-10"><a href="análisis-de-datos-con-python.html#cb709-10" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">6</span>)</span>
<span id="cb709-11"><a href="análisis-de-datos-con-python.html#cb709-11" aria-hidden="true" tabindex="-1"></a>sample_ages <span class="op">=</span> np.random.choice(a<span class="op">=</span> population_ages,</span>
<span id="cb709-12"><a href="análisis-de-datos-con-python.html#cb709-12" aria-hidden="true" tabindex="-1"></a>                               size<span class="op">=</span><span class="dv">500</span>)            <span class="co"># Muestra aleatoria</span></span>
<span id="cb709-13"><a href="análisis-de-datos-con-python.html#cb709-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-14"><a href="análisis-de-datos-con-python.html#cb709-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> ( sample_ages.mean() )                         <span class="co"># Media muestral</span></span>
<span id="cb709-15"><a href="análisis-de-datos-con-python.html#cb709-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-16"><a href="análisis-de-datos-con-python.html#cb709-16" aria-hidden="true" tabindex="-1"></a>population_ages.mean() <span class="op">-</span> sample_ages.mean()   <span class="co"># Miremos la diferencia</span></span></code></pre></div>
<ul>
<li><p>Nuestra estimación puntual basada en una muestra aleatoria de 500 individuos subestima la verdadera media de la población en 0,6 años, pero se aproxima.</p></li>
<li><p>Esto ilustra un punto importante: podemos obtener una estimación bastante precisa de una gran población mediante el muestreo e un subconjunto relativamente pequeño de individuos.</p></li>
<li><p>Otra estimación puntual que puede ser de interés es la proporción de la población que pertenece a alguna categoría o subgrupo.</p></li>
<li><p>Por ejemplo, nos gustaría saber la ocupación de cada votante que encuestamos, para tener una idea de la demografía general de la base de votantes. Se puede hacer una estimación puntual de este tipo de proporción tomando una muestra y comprobando después la proporción en la muestra:</p></li>
</ul>
<div class="sourceCode" id="cb710"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb710-1"><a href="análisis-de-datos-con-python.html#cb710-1" aria-hidden="true" tabindex="-1"></a>random.seed(<span class="dv">10</span>)</span>
<span id="cb710-2"><a href="análisis-de-datos-con-python.html#cb710-2" aria-hidden="true" tabindex="-1"></a>population_occ <span class="op">=</span> ([<span class="st">&quot;occ1&quot;</span>]<span class="op">*</span><span class="dv">100000</span>) <span class="op">+</span> ([<span class="st">&quot;occ2&quot;</span>]<span class="op">*</span><span class="dv">50000</span>) <span class="op">+\</span></span>
<span id="cb710-3"><a href="análisis-de-datos-con-python.html#cb710-3" aria-hidden="true" tabindex="-1"></a>                   ([<span class="st">&quot;occ3&quot;</span>]<span class="op">*</span><span class="dv">50000</span>) <span class="op">+</span> ([<span class="st">&quot;occ4&quot;</span>]<span class="op">*</span><span class="dv">25000</span>) <span class="op">+\</span></span>
<span id="cb710-4"><a href="análisis-de-datos-con-python.html#cb710-4" aria-hidden="true" tabindex="-1"></a>                   ([<span class="st">&quot;occ5&quot;</span>]<span class="op">*</span><span class="dv">25000</span>)</span>
<span id="cb710-5"><a href="análisis-de-datos-con-python.html#cb710-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb710-6"><a href="análisis-de-datos-con-python.html#cb710-6" aria-hidden="true" tabindex="-1"></a>demo_sample <span class="op">=</span> random.sample(population_occ, <span class="dv">1000</span>)   <span class="co"># muestra aleatoria</span></span>
<span id="cb710-7"><a href="análisis-de-datos-con-python.html#cb710-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb710-8"><a href="análisis-de-datos-con-python.html#cb710-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> occ <span class="kw">in</span> <span class="bu">set</span>(demo_sample):</span>
<span id="cb710-9"><a href="análisis-de-datos-con-python.html#cb710-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>( occ <span class="op">+</span> <span class="st">&quot; proportion estimate:&quot;</span> )</span>
<span id="cb710-10"><a href="análisis-de-datos-con-python.html#cb710-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>( demo_sample.count(occ)<span class="op">/</span><span class="dv">1000</span> )</span></code></pre></div>
<ul>
<li>Obsérvese que las estimaciones de las proporciones se acercan a las verdaderas proporciones de la población subyacente.</li>
</ul>
</div>
<div id="distribuciones-de-muestreo-y-el-teorema-del-límite-central" class="section level4 hasAnchor" number="4.6.2.3">
<h4><span class="header-section-number">4.6.2.3</span> Distribuciones de muestreo y el teorema del límite central<a href="análisis-de-datos-con-python.html#distribuciones-de-muestreo-y-el-teorema-del-límite-central" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Muchos procedimientos estadísticos asumen que los datos siguen una distribución normal, porque la distribución normal tiene buenas propiedades como la simetría y que la mayoría de los datos se agrupan dentro de unas pocas desviaciones estándar de la media.</p></li>
<li><p>Los datos del mundo real no suelen tener una distribución normal y la distribución de una muestra tiende a reflejar la distribución de la población.</p></li>
<li><p>Esto significa que una muestra tomada de una población con una distribución sesgada también tenderá a ser sesgada. Vamos a investigarlo trazando los datos y la muestra que hemos creado antes y comprobando la inclinación:</p></li>
</ul>
<div class="sourceCode" id="cb711"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb711-1"><a href="análisis-de-datos-con-python.html#cb711-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(population_ages).hist(bins<span class="op">=</span><span class="dv">58</span>,</span>
<span id="cb711-2"><a href="análisis-de-datos-con-python.html#cb711-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="bu">range</span><span class="op">=</span>(<span class="fl">17.5</span>,<span class="fl">75.5</span>),</span>
<span id="cb711-3"><a href="análisis-de-datos-con-python.html#cb711-3" aria-hidden="true" tabindex="-1"></a>                                  figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>))</span>
<span id="cb711-4"><a href="análisis-de-datos-con-python.html#cb711-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb711-5"><a href="análisis-de-datos-con-python.html#cb711-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stats.skew(population_ages))</span></code></pre></div>
<ul>
<li><p>La distribución tiene poca asimetría, pero el gráfico revela que los datos no son claramente normales:</p>
<ul>
<li>en lugar de una curva de campana simétrica, tiene una distribución bimodal con dos picos de alta densidad.</li>
<li>La muestra que extrajimos de esta población debería tener aproximadamente la misma forma y asimetría:</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb712"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb712-1"><a href="análisis-de-datos-con-python.html#cb712-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(sample_ages).hist(bins<span class="op">=</span><span class="dv">58</span>,</span>
<span id="cb712-2"><a href="análisis-de-datos-con-python.html#cb712-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="bu">range</span><span class="op">=</span>(<span class="fl">17.5</span>,<span class="fl">75.5</span>),</span>
<span id="cb712-3"><a href="análisis-de-datos-con-python.html#cb712-3" aria-hidden="true" tabindex="-1"></a>                                  figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>))<span class="op">;</span></span>
<span id="cb712-4"><a href="análisis-de-datos-con-python.html#cb712-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb712-5"><a href="análisis-de-datos-con-python.html#cb712-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stats.skew(sample_ages))</span></code></pre></div>
<ul>
<li><p>La muestra tiene aproximadamente la misma forma que la población subyacente. Esto sugiere que no podemos aplicar las técnicas que suponen una distribución normal a este conjunto de datos, ya que no es normal.</p></li>
<li><p>En realidad, sí podemos, gracias al teorema del límite central.</p></li>
<li><p>El teorema del límite central es uno de los resultados más importantes de la teoría de la probabilidad y sirve de base a muchos métodos de análisis estadístico.</p></li>
<li><p>El teorema afirma que la distribución de muchas medias muestrales, conocida como distribución muestral, se distribuirá normalmente. Esta regla es válida incluso si la propia distribución subyacente no está distribuida normalmente. En consecuencia, podemos tratar la media muestral como si se dibujara una distribución normal.</p></li>
<li><p>Para ilustrarlo, creemos una distribución de muestreo tomando 200 muestras de nuestra población y haciendo luego 200 estimaciones puntuales de la media:</p></li>
</ul>
<div class="sourceCode" id="cb713"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb713-1"><a href="análisis-de-datos-con-python.html#cb713-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">10</span>)</span>
<span id="cb713-2"><a href="análisis-de-datos-con-python.html#cb713-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb713-3"><a href="análisis-de-datos-con-python.html#cb713-3" aria-hidden="true" tabindex="-1"></a>point_estimates <span class="op">=</span> []         <span class="co"># Lista vacía</span></span>
<span id="cb713-4"><a href="análisis-de-datos-con-python.html#cb713-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb713-5"><a href="análisis-de-datos-con-python.html#cb713-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2000</span>):         <span class="co"># Generamos 200 muestras aleatorias </span></span>
<span id="cb713-6"><a href="análisis-de-datos-con-python.html#cb713-6" aria-hidden="true" tabindex="-1"></a>    sample <span class="op">=</span> np.random.choice(a<span class="op">=</span> population_ages, size<span class="op">=</span><span class="dv">500</span>)</span>
<span id="cb713-7"><a href="análisis-de-datos-con-python.html#cb713-7" aria-hidden="true" tabindex="-1"></a>    point_estimates.append(sample.mean())</span>
<span id="cb713-8"><a href="análisis-de-datos-con-python.html#cb713-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb713-9"><a href="análisis-de-datos-con-python.html#cb713-9" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(point_estimates).plot(kind<span class="op">=</span><span class="st">&quot;density&quot;</span>,  <span class="co"># Graficamos la media</span></span>
<span id="cb713-10"><a href="análisis-de-datos-con-python.html#cb713-10" aria-hidden="true" tabindex="-1"></a>                                   figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb713-11"><a href="análisis-de-datos-con-python.html#cb713-11" aria-hidden="true" tabindex="-1"></a>                                   xlim<span class="op">=</span>(<span class="dv">41</span>,<span class="dv">45</span>))<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>La distribución del muestreo parece ser aproximadamente normal, a pesar de la distribución bimodal de la población de la que se extrajeron las muestras.</p></li>
<li><p>Además, la media de la distribución muestral se aproxima a la media real de la población:</p></li>
</ul>
<div class="sourceCode" id="cb714"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb714-1"><a href="análisis-de-datos-con-python.html#cb714-1" aria-hidden="true" tabindex="-1"></a>population_ages.mean() <span class="op">-</span> np.array(point_estimates).mean()</span></code></pre></div>
<p>Cuantas más muestras tomemos, mejor será nuestra estimación del parámetro poblacional. La media muestral converge a la media poblacional.</p>
<div class="sourceCode" id="cb715"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb715-1"><a href="análisis-de-datos-con-python.html#cb715-1" aria-hidden="true" tabindex="-1"></a>population_ages.mean()</span></code></pre></div>
</div>
<div id="intervalos-de-confianza" class="section level4 hasAnchor" number="4.6.2.4">
<h4><span class="header-section-number">4.6.2.4</span> Intervalos de confianza<a href="análisis-de-datos-con-python.html#intervalos-de-confianza" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Una estimación puntual puede dar una idea aproximada de un parámetro de la población, como la media, pero las estimaciones son propensas a errores y puede que no sea factible tomar múltiples muestras para obtener mejores estimaciones.</p></li>
<li><p>Un intervalo de confianza es un rango de valores por encima y por debajo de una estimación puntual que capta el verdadero parámetro de la población con un nivel de confianza predeterminado.</p></li>
<li><p>Por ejemplo, si quiere tener un 95% de posibilidades de capturar el verdadero parámetro de la población con una estimación puntual y un intervalo de confianza correspondiente, establecería su nivel de confianza en el 95%. Los niveles de confianza más altos dan lugar a intervalos de confianza más amplios.</p></li>
<li><p>Calcule un intervalo de confianza tomando una estimación puntual y luego sumando y restando un margen de error para crear un rango. El margen de error se basa en el nivel de confianza deseado, la dispersión de los datos y el tamaño de la muestra. La forma de calcular el margen de error depende de si se conoce la desviación estándar de la población o no.</p></li>
<li><p>El IC resultante nos dice que si repetimos la aleatorización múltiples veces, el 95% de los intervalos de confianza que generemos contendrán el valor real. Un IC de un 95% <strong>no significa</strong> que hay un 95% de probabilidades que el valor real se encuentre en un intervalo de confianza particular.</p></li>
<li><p>Si conoce la desviación estándar de la población, el margen de error es igual a:</p></li>
</ul>
<p><span class="math display">\[z * \frac{\sigma}{\sqrt{n}}\]</span></p>
<ul>
<li><p>Donde σ (sigma) es la desviación estándar de la población, n es el tamaño de la muestra, y z es un número conocido como el valor crítico z.</p></li>
<li><p>El valor z-crítico es el número de desviaciones estándar que habría que alejar de la media de la distribución normal para capturar la proporción de los datos asociada al nivel de confianza deseado. Por ejemplo, sabemos que aproximadamente el 95% de los datos de una distribución normal se encuentra dentro de 2 desviaciones estándar de la media, por lo que podríamos utilizar 2 como valor z-crítico para un intervalo de confianza del 95% (aunque es más exacto obtener los valores z-críticos con stats.norm.ppf().).</p></li>
<li><p>Calculemos un 95% de confianza para nuestra estimación puntual de la media:</p></li>
</ul>
<div class="sourceCode" id="cb716"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb716-1"><a href="análisis-de-datos-con-python.html#cb716-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">10</span>)</span>
<span id="cb716-2"><a href="análisis-de-datos-con-python.html#cb716-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-3"><a href="análisis-de-datos-con-python.html#cb716-3" aria-hidden="true" tabindex="-1"></a>sample_size <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb716-4"><a href="análisis-de-datos-con-python.html#cb716-4" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> np.random.choice(a<span class="op">=</span> population_ages, size <span class="op">=</span> sample_size)</span>
<span id="cb716-5"><a href="análisis-de-datos-con-python.html#cb716-5" aria-hidden="true" tabindex="-1"></a>sample_mean <span class="op">=</span> sample.mean()</span>
<span id="cb716-6"><a href="análisis-de-datos-con-python.html#cb716-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-7"><a href="análisis-de-datos-con-python.html#cb716-7" aria-hidden="true" tabindex="-1"></a>z_critical <span class="op">=</span> stats.norm.ppf(q <span class="op">=</span> <span class="fl">0.975</span>)  <span class="co"># Valor critico*</span></span>
<span id="cb716-8"><a href="análisis-de-datos-con-python.html#cb716-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-9"><a href="análisis-de-datos-con-python.html#cb716-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;z-critical value:&quot;</span>)              <span class="co"># Miramos el valor critico</span></span>
<span id="cb716-10"><a href="análisis-de-datos-con-python.html#cb716-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(z_critical)                        </span>
<span id="cb716-11"><a href="análisis-de-datos-con-python.html#cb716-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-12"><a href="análisis-de-datos-con-python.html#cb716-12" aria-hidden="true" tabindex="-1"></a>pop_stdev <span class="op">=</span> population_ages.std()  <span class="co"># Get the population standard deviation</span></span>
<span id="cb716-13"><a href="análisis-de-datos-con-python.html#cb716-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-14"><a href="análisis-de-datos-con-python.html#cb716-14" aria-hidden="true" tabindex="-1"></a>margin_of_error <span class="op">=</span> z_critical <span class="op">*</span> (pop_stdev<span class="op">/</span>math.sqrt(sample_size))</span>
<span id="cb716-15"><a href="análisis-de-datos-con-python.html#cb716-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-16"><a href="análisis-de-datos-con-python.html#cb716-16" aria-hidden="true" tabindex="-1"></a>confidence_interval <span class="op">=</span> (sample_mean <span class="op">-</span> margin_of_error,</span>
<span id="cb716-17"><a href="análisis-de-datos-con-python.html#cb716-17" aria-hidden="true" tabindex="-1"></a>                       sample_mean <span class="op">+</span> margin_of_error)  </span>
<span id="cb716-18"><a href="análisis-de-datos-con-python.html#cb716-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-19"><a href="análisis-de-datos-con-python.html#cb716-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Confidence interval:&quot;</span>)</span>
<span id="cb716-20"><a href="análisis-de-datos-con-python.html#cb716-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(confidence_interval)</span>
<span id="cb716-21"><a href="análisis-de-datos-con-python.html#cb716-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb716-22"><a href="análisis-de-datos-con-python.html#cb716-22" aria-hidden="true" tabindex="-1"></a>sample_mean</span></code></pre></div>
<ul>
<li><p><strong>Nota</strong>: Utilizamos stats.norm.ppf(q = 0,975) para obtener el valor z-crítico deseado en lugar de q = 0,95 porque la distribución tiene dos colas.</p></li>
<li><p>Observa que el intervalo de confianza que hemos calculado captura la verdadera media poblacional de 43,0023.</p></li>
<li><p>Vamos a crear varios intervalos de confianza y a trazarlos para tener una mejor idea de lo que significa “capturar” el verdadero valor</p></li>
</ul>
<div class="sourceCode" id="cb717"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb717-1"><a href="análisis-de-datos-con-python.html#cb717-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">12</span>)</span>
<span id="cb717-2"><a href="análisis-de-datos-con-python.html#cb717-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-3"><a href="análisis-de-datos-con-python.html#cb717-3" aria-hidden="true" tabindex="-1"></a>sample_size <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb717-4"><a href="análisis-de-datos-con-python.html#cb717-4" aria-hidden="true" tabindex="-1"></a>intervals <span class="op">=</span> []</span>
<span id="cb717-5"><a href="análisis-de-datos-con-python.html#cb717-5" aria-hidden="true" tabindex="-1"></a>sample_means <span class="op">=</span> []</span>
<span id="cb717-6"><a href="análisis-de-datos-con-python.html#cb717-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-7"><a href="análisis-de-datos-con-python.html#cb717-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> sample <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">25</span>):</span>
<span id="cb717-8"><a href="análisis-de-datos-con-python.html#cb717-8" aria-hidden="true" tabindex="-1"></a>    sample <span class="op">=</span> np.random.choice(a<span class="op">=</span> population_ages, size <span class="op">=</span> sample_size)</span>
<span id="cb717-9"><a href="análisis-de-datos-con-python.html#cb717-9" aria-hidden="true" tabindex="-1"></a>    sample_mean <span class="op">=</span> sample.mean()</span>
<span id="cb717-10"><a href="análisis-de-datos-con-python.html#cb717-10" aria-hidden="true" tabindex="-1"></a>    sample_means.append(sample_mean)</span>
<span id="cb717-11"><a href="análisis-de-datos-con-python.html#cb717-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-12"><a href="análisis-de-datos-con-python.html#cb717-12" aria-hidden="true" tabindex="-1"></a>    z_critical <span class="op">=</span> stats.norm.ppf(q <span class="op">=</span> <span class="fl">0.975</span>)  <span class="co"># Get the z-critical value*         </span></span>
<span id="cb717-13"><a href="análisis-de-datos-con-python.html#cb717-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-14"><a href="análisis-de-datos-con-python.html#cb717-14" aria-hidden="true" tabindex="-1"></a>    pop_stdev <span class="op">=</span> population_ages.std()  <span class="co"># Get the population standard deviation</span></span>
<span id="cb717-15"><a href="análisis-de-datos-con-python.html#cb717-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-16"><a href="análisis-de-datos-con-python.html#cb717-16" aria-hidden="true" tabindex="-1"></a>    stats.norm.ppf(q <span class="op">=</span> <span class="fl">0.025</span>)</span>
<span id="cb717-17"><a href="análisis-de-datos-con-python.html#cb717-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-18"><a href="análisis-de-datos-con-python.html#cb717-18" aria-hidden="true" tabindex="-1"></a>    margin_of_error <span class="op">=</span> z_critical <span class="op">*</span> (pop_stdev<span class="op">/</span>math.sqrt(sample_size))</span>
<span id="cb717-19"><a href="análisis-de-datos-con-python.html#cb717-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-20"><a href="análisis-de-datos-con-python.html#cb717-20" aria-hidden="true" tabindex="-1"></a>    confidence_interval <span class="op">=</span> (sample_mean <span class="op">-</span> margin_of_error,</span>
<span id="cb717-21"><a href="análisis-de-datos-con-python.html#cb717-21" aria-hidden="true" tabindex="-1"></a>                           sample_mean <span class="op">+</span> margin_of_error)  </span>
<span id="cb717-22"><a href="análisis-de-datos-con-python.html#cb717-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb717-23"><a href="análisis-de-datos-con-python.html#cb717-23" aria-hidden="true" tabindex="-1"></a>    intervals.append(confidence_interval)</span>
<span id="cb717-24"><a href="análisis-de-datos-con-python.html#cb717-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-25"><a href="análisis-de-datos-con-python.html#cb717-25" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>))</span>
<span id="cb717-26"><a href="análisis-de-datos-con-python.html#cb717-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-27"><a href="análisis-de-datos-con-python.html#cb717-27" aria-hidden="true" tabindex="-1"></a>plt.errorbar(x<span class="op">=</span>np.arange(<span class="fl">0.1</span>, <span class="dv">25</span>, <span class="dv">1</span>), </span>
<span id="cb717-28"><a href="análisis-de-datos-con-python.html#cb717-28" aria-hidden="true" tabindex="-1"></a>             y<span class="op">=</span>sample_means, </span>
<span id="cb717-29"><a href="análisis-de-datos-con-python.html#cb717-29" aria-hidden="true" tabindex="-1"></a>             yerr<span class="op">=</span>[(top<span class="op">-</span>bot)<span class="op">/</span><span class="dv">2</span> <span class="cf">for</span> top,bot <span class="kw">in</span> intervals],</span>
<span id="cb717-30"><a href="análisis-de-datos-con-python.html#cb717-30" aria-hidden="true" tabindex="-1"></a>             fmt<span class="op">=</span><span class="st">&#39;o&#39;</span>)</span>
<span id="cb717-31"><a href="análisis-de-datos-con-python.html#cb717-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb717-32"><a href="análisis-de-datos-con-python.html#cb717-32" aria-hidden="true" tabindex="-1"></a>plt.hlines(xmin<span class="op">=</span><span class="dv">0</span>, xmax<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb717-33"><a href="análisis-de-datos-con-python.html#cb717-33" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="fl">43.0023</span>, </span>
<span id="cb717-34"><a href="análisis-de-datos-con-python.html#cb717-34" aria-hidden="true" tabindex="-1"></a>           linewidth<span class="op">=</span><span class="fl">2.0</span>,</span>
<span id="cb717-35"><a href="análisis-de-datos-con-python.html#cb717-35" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;red&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>Observe que en el gráfico anterior, todos los intervalos de confianza del 95%, excepto uno, se superponen a la línea roja que marca la media real.</p></li>
<li><p>Esto es de esperar: dado que un intervalo de confianza del 95% capta la media real el 95% de las veces, es de esperar que nuestro intervalo no capte la media real el 5% de las veces.</p></li>
<li><p>Si no se conoce la desviación estandar de la población, hay que utilizar la desviación estandar de la muestra para crear intervalos de confianza.</p></li>
<li><p>Dado que la desviación estándar de la muestra puede no coincidir con el parámetro de la población, el intervalo tendrá más error cuando no se conozca la desviación estándar de la población. Para tener en cuenta este error, utilizamos lo que se conoce como valor crítico t en lugar del valor crítico z.</p></li>
<li><p>El valor crítico t se extrae de lo que se conoce como distribución t, una distribución que se asemeja mucho a la distribución normal pero que se hace cada vez más amplia a medida que disminuye el tamaño de la muestra. La distribución t está disponible en scipy.stats con el nombre de “t” para que podamos obtener los valores críticos de t con stats.t.ppf().</p></li>
<li><p>Tomemos una nueva muestra más pequeña y luego creemos un intervalo de confianza sin la desviación estándar de la población, utilizando la distribución t:</p></li>
</ul>
<div class="sourceCode" id="cb718"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb718-1"><a href="análisis-de-datos-con-python.html#cb718-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">10</span>)</span>
<span id="cb718-2"><a href="análisis-de-datos-con-python.html#cb718-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-3"><a href="análisis-de-datos-con-python.html#cb718-3" aria-hidden="true" tabindex="-1"></a>sample_size <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb718-4"><a href="análisis-de-datos-con-python.html#cb718-4" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> np.random.choice(a<span class="op">=</span> population_ages, size <span class="op">=</span> sample_size)</span>
<span id="cb718-5"><a href="análisis-de-datos-con-python.html#cb718-5" aria-hidden="true" tabindex="-1"></a>sample_mean <span class="op">=</span> sample.mean()</span>
<span id="cb718-6"><a href="análisis-de-datos-con-python.html#cb718-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-7"><a href="análisis-de-datos-con-python.html#cb718-7" aria-hidden="true" tabindex="-1"></a>t_critical <span class="op">=</span> stats.t.ppf(q <span class="op">=</span> <span class="fl">0.975</span>, df<span class="op">=</span><span class="dv">24</span>)  <span class="co"># Valor t*</span></span>
<span id="cb718-8"><a href="análisis-de-datos-con-python.html#cb718-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-9"><a href="análisis-de-datos-con-python.html#cb718-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;t-critical value:&quot;</span>)                  <span class="co"># Chequear valor t</span></span>
<span id="cb718-10"><a href="análisis-de-datos-con-python.html#cb718-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(t_critical)                        </span>
<span id="cb718-11"><a href="análisis-de-datos-con-python.html#cb718-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-12"><a href="análisis-de-datos-con-python.html#cb718-12" aria-hidden="true" tabindex="-1"></a>sample_stdev <span class="op">=</span> sample.std(ddof<span class="op">=</span><span class="dv">1</span>)    <span class="co"># Obtenemos desv estandar muestral</span></span>
<span id="cb718-13"><a href="análisis-de-datos-con-python.html#cb718-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-14"><a href="análisis-de-datos-con-python.html#cb718-14" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> sample_stdev<span class="op">/</span>math.sqrt(sample_size)  <span class="co"># estimamos </span></span>
<span id="cb718-15"><a href="análisis-de-datos-con-python.html#cb718-15" aria-hidden="true" tabindex="-1"></a>margin_of_error <span class="op">=</span> t_critical <span class="op">*</span> sigma</span>
<span id="cb718-16"><a href="análisis-de-datos-con-python.html#cb718-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-17"><a href="análisis-de-datos-con-python.html#cb718-17" aria-hidden="true" tabindex="-1"></a>confidence_interval <span class="op">=</span> (sample_mean <span class="op">-</span> margin_of_error,</span>
<span id="cb718-18"><a href="análisis-de-datos-con-python.html#cb718-18" aria-hidden="true" tabindex="-1"></a>                       sample_mean <span class="op">+</span> margin_of_error)  </span>
<span id="cb718-19"><a href="análisis-de-datos-con-python.html#cb718-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb718-20"><a href="análisis-de-datos-con-python.html#cb718-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Confidence interval:&quot;</span>)</span>
<span id="cb718-21"><a href="análisis-de-datos-con-python.html#cb718-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(confidence_interval)</span></code></pre></div>
<ul>
<li><p><strong>Nota</strong>: cuando se utiliza la distribución t, hay que proporcionar los grados de libertad (df). Para este tipo de prueba, los grados de libertad son iguales al tamaño de la muestra menos 1. Si el tamaño de la muestra es grande, la distribución t se aproxima a la distribución normal.</p></li>
<li><p>Observe que el valor crítico de t es mayor que el valor crítico de z que utilizamos para el intervalo de confianza del 95%. Esto permite que el intervalo de confianza arroje una red más grande para compensar la variabilidad causada por el uso de la desviación estándar de la muestra en lugar de la desviación estándar de la población. El resultado final es un intervalo de confianza mucho más amplio (un intervalo con un mayor margen de error).</p></li>
<li><p>Si tiene una muestra grande, el valor crítico t se acercará al valor crítico z, por lo que hay poca diferencia entre utilizar la distribución normal frente a la distribución t:</p></li>
</ul>
<div class="sourceCode" id="cb719"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb719-1"><a href="análisis-de-datos-con-python.html#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequeamos la diferencia entre valores criticos con un tamaño muestral de 1000</span></span>
<span id="cb719-2"><a href="análisis-de-datos-con-python.html#cb719-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb719-3"><a href="análisis-de-datos-con-python.html#cb719-3" aria-hidden="true" tabindex="-1"></a>stats.t.ppf(q<span class="op">=</span><span class="fl">0.975</span>, df<span class="op">=</span> <span class="dv">999</span>) <span class="op">-</span> stats.norm.ppf(<span class="fl">0.975</span>)</span>
<span id="cb719-4"><a href="análisis-de-datos-con-python.html#cb719-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb719-5"><a href="análisis-de-datos-con-python.html#cb719-5" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot;En lugar de calcular un intervalo de confianza para una estimación puntual de la media a mano, puede calcularlo utilizando la función de Python stats.t.interval():</span></span></code></pre></div>
<div class="sourceCode" id="cb720"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb720-1"><a href="análisis-de-datos-con-python.html#cb720-1" aria-hidden="true" tabindex="-1"></a>stats.t.interval(alpha <span class="op">=</span> <span class="fl">0.95</span>,              <span class="co"># Nivel de confianza</span></span>
<span id="cb720-2"><a href="análisis-de-datos-con-python.html#cb720-2" aria-hidden="true" tabindex="-1"></a>                 df<span class="op">=</span> <span class="dv">24</span>,                    <span class="co"># Grados de libertad</span></span>
<span id="cb720-3"><a href="análisis-de-datos-con-python.html#cb720-3" aria-hidden="true" tabindex="-1"></a>                 loc <span class="op">=</span> sample_mean,         <span class="co"># Media muestral</span></span>
<span id="cb720-4"><a href="análisis-de-datos-con-python.html#cb720-4" aria-hidden="true" tabindex="-1"></a>                 scale <span class="op">=</span> sigma)             <span class="co"># Desviación estandar muestral</span></span></code></pre></div>
<p>También podemos hacer un intervalo de confianza para una estimación puntual de una proporción poblacional. En este caso, el margen de error es igual a</p>
<p><span class="math display">\[z * \sqrt{\frac{p(1-p)}{n}}\]</span></p>
<p>Donde z es el valor crítico de z para nuestro nivel de confianza, p es la estimación puntual de la proporción poblacional y n es el tamaño de la muestra. Calculemos un intervalo de confianza del 95% para los de ocupación 3 según la proporción de la muestra que hemos calculado antes (0,192):</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb721-1"><a href="análisis-de-datos-con-python.html#cb721-1" aria-hidden="true" tabindex="-1"></a>z_critical <span class="op">=</span> stats.norm.ppf(<span class="fl">0.975</span>)      <span class="co"># Valor critico</span></span>
<span id="cb721-2"><a href="análisis-de-datos-con-python.html#cb721-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb721-3"><a href="análisis-de-datos-con-python.html#cb721-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> <span class="fl">0.192</span>                               <span class="co"># Estimación puntual de la proporción</span></span>
<span id="cb721-4"><a href="análisis-de-datos-con-python.html#cb721-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb721-5"><a href="análisis-de-datos-con-python.html#cb721-5" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">1000</span>                                <span class="co"># Tamaño muestral</span></span>
<span id="cb721-6"><a href="análisis-de-datos-con-python.html#cb721-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb721-7"><a href="análisis-de-datos-con-python.html#cb721-7" aria-hidden="true" tabindex="-1"></a>margin_of_error <span class="op">=</span> z_critical <span class="op">*</span> math.sqrt((p<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>p))<span class="op">/</span>n)</span>
<span id="cb721-8"><a href="análisis-de-datos-con-python.html#cb721-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb721-9"><a href="análisis-de-datos-con-python.html#cb721-9" aria-hidden="true" tabindex="-1"></a>confidence_interval <span class="op">=</span> (p <span class="op">-</span> margin_of_error,  <span class="co"># Intervalo de confianza</span></span>
<span id="cb721-10"><a href="análisis-de-datos-con-python.html#cb721-10" aria-hidden="true" tabindex="-1"></a>                       p <span class="op">+</span> margin_of_error) </span>
<span id="cb721-11"><a href="análisis-de-datos-con-python.html#cb721-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb721-12"><a href="análisis-de-datos-con-python.html#cb721-12" aria-hidden="true" tabindex="-1"></a>confidence_interval</span></code></pre></div>
<ul>
<li><p>El resultado muestra que el intervalo de confianza capturó el verdadero parámetro poblacional de 0,2.</p></li>
<li><p>De forma similar a nuestras estimaciones puntuales de la media de la población, podemos utilizar la función scipy stats.distribution.interval() para calcular un intervalo de confianza para una proporción de la población para nosotros.</p></li>
<li><p>En este caso estamos trabajando con valores z-críticos por lo que queremos trabajar con la distribución normal en lugar de la distribución t:</p></li>
</ul>
<div class="sourceCode" id="cb722"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb722-1"><a href="análisis-de-datos-con-python.html#cb722-1" aria-hidden="true" tabindex="-1"></a>stats.norm.interval(alpha <span class="op">=</span> <span class="fl">0.95</span>,    <span class="co"># Nivel de confianza           </span></span>
<span id="cb722-2"><a href="análisis-de-datos-con-python.html#cb722-2" aria-hidden="true" tabindex="-1"></a>                   loc <span class="op">=</span>  <span class="fl">0.192</span>,     <span class="co"># Estimación puntual de la proporción</span></span>
<span id="cb722-3"><a href="análisis-de-datos-con-python.html#cb722-3" aria-hidden="true" tabindex="-1"></a>                   scale <span class="op">=</span> math.sqrt((p<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>p))<span class="op">/</span>n))  <span class="co"># Escalando</span></span></code></pre></div>
<ul>
<li><p>En resumen…</p></li>
<li><p>La estimación de los parámetros de la población a través del muestreo es una forma de inferencia sencilla, pero potente.</p></li>
<li><p>Las estimaciones puntuales combinadas con los márgenes de error nos permiten crear intervalos de confianza que capturan el verdadero parámetro de la población con una alta probabilidad.</p></li>
<li><p>La próxima vez ampliaremos los conceptos de esta lección aprendiendo sobre las pruebas de hipótesis estadísticas.</p></li>
</ul>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.6.1:</b></p>
<ul>
<li><p>Escriba una función que le permita calcular los intervalos de confianza de la media muestral. El input debe ser una columna de una data.frame.</p></li>
<li><p>Utilice la función que acaba de generar junto con un iterador que le permita generar este intervalo de confianza para todas las columnas de una base de datos cualquiera. Pruebe su iterador con la base de datos mtcars.</p></li>
</ul>
</div>
<div class="sourceCode" id="cb723"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb723-1"><a href="análisis-de-datos-con-python.html#cb723-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mean_confidence_interval(data, confidence<span class="op">=</span><span class="fl">0.05</span>):</span>
<span id="cb723-2"><a href="análisis-de-datos-con-python.html#cb723-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb723-3"><a href="análisis-de-datos-con-python.html#cb723-3" aria-hidden="true" tabindex="-1"></a>    mean <span class="op">=</span> data.mean()</span>
<span id="cb723-4"><a href="análisis-de-datos-con-python.html#cb723-4" aria-hidden="true" tabindex="-1"></a>    sd <span class="op">=</span> data.std()</span>
<span id="cb723-5"><a href="análisis-de-datos-con-python.html#cb723-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(data)</span>
<span id="cb723-6"><a href="análisis-de-datos-con-python.html#cb723-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb723-7"><a href="análisis-de-datos-con-python.html#cb723-7" aria-hidden="true" tabindex="-1"></a>    tcritico <span class="op">=</span> stats.t.ppf(q <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> confidence<span class="op">/</span><span class="dv">2</span>), df<span class="op">=</span> n<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb723-8"><a href="análisis-de-datos-con-python.html#cb723-8" aria-hidden="true" tabindex="-1"></a>    se <span class="op">=</span>  sd<span class="op">/</span>np.sqrt(n)</span>
<span id="cb723-9"><a href="análisis-de-datos-con-python.html#cb723-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb723-10"><a href="análisis-de-datos-con-python.html#cb723-10" aria-hidden="true" tabindex="-1"></a>    lcv <span class="op">=</span> mean <span class="op">-</span> tcritico <span class="op">*</span> se</span>
<span id="cb723-11"><a href="análisis-de-datos-con-python.html#cb723-11" aria-hidden="true" tabindex="-1"></a>    ucv <span class="op">=</span> mean <span class="op">+</span> tcritico <span class="op">*</span> se</span>
<span id="cb723-12"><a href="análisis-de-datos-con-python.html#cb723-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb723-13"><a href="análisis-de-datos-con-python.html#cb723-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> mean, lcv, ucv</span>
<span id="cb723-14"><a href="análisis-de-datos-con-python.html#cb723-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-15"><a href="análisis-de-datos-con-python.html#cb723-15" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(mean_confidence_interval(mtcars[<span class="st">&quot;mpg&quot;</span>], <span class="fl">0.05</span>))</span>
<span id="cb723-16"><a href="análisis-de-datos-con-python.html#cb723-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-17"><a href="análisis-de-datos-con-python.html#cb723-17" aria-hidden="true" tabindex="-1"></a>mtcars.columns</span>
<span id="cb723-18"><a href="análisis-de-datos-con-python.html#cb723-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-19"><a href="análisis-de-datos-con-python.html#cb723-19" aria-hidden="true" tabindex="-1"></a>lista <span class="op">=</span> []</span>
<span id="cb723-20"><a href="análisis-de-datos-con-python.html#cb723-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb723-21"><a href="análisis-de-datos-con-python.html#cb723-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> mtcars.columns:</span>
<span id="cb723-22"><a href="análisis-de-datos-con-python.html#cb723-22" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> mean_confidence_interval(mtcars[col], <span class="fl">0.05</span>)</span>
<span id="cb723-23"><a href="análisis-de-datos-con-python.html#cb723-23" aria-hidden="true" tabindex="-1"></a>    a_list <span class="op">=</span> <span class="bu">list</span>(a)</span>
<span id="cb723-24"><a href="análisis-de-datos-con-python.html#cb723-24" aria-hidden="true" tabindex="-1"></a>    lista.append(a_list)</span>
<span id="cb723-25"><a href="análisis-de-datos-con-python.html#cb723-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-26"><a href="análisis-de-datos-con-python.html#cb723-26" aria-hidden="true" tabindex="-1"></a>lista</span>
<span id="cb723-27"><a href="análisis-de-datos-con-python.html#cb723-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-28"><a href="análisis-de-datos-con-python.html#cb723-28" aria-hidden="true" tabindex="-1"></a>ic <span class="op">=</span> pd.DataFrame(lista, index<span class="op">=</span>mtcars.columns)</span>
<span id="cb723-29"><a href="análisis-de-datos-con-python.html#cb723-29" aria-hidden="true" tabindex="-1"></a>ic</span>
<span id="cb723-30"><a href="análisis-de-datos-con-python.html#cb723-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-31"><a href="análisis-de-datos-con-python.html#cb723-31" aria-hidden="true" tabindex="-1"></a>ic <span class="op">=</span> ic.rename(columns <span class="op">=</span> {<span class="dv">0</span>: <span class="st">&quot;Promedio&quot;</span>, <span class="dv">1</span>: <span class="st">&quot;LIC&quot;</span>, <span class="dv">2</span> : <span class="st">&quot;UIC&quot;</span>})</span>
<span id="cb723-32"><a href="análisis-de-datos-con-python.html#cb723-32" aria-hidden="true" tabindex="-1"></a>ic</span></code></pre></div>
</div>
</div>
<div id="test-de-hipotesis" class="section level3 hasAnchor" number="4.6.3">
<h3><span class="header-section-number">4.6.3</span> Test de hipotesis<a href="análisis-de-datos-con-python.html#test-de-hipotesis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Las estimaciones puntuales y los intervalos de confianza son herramientas básicas de inferencia que sirven de base para otra técnica de inferencia: las pruebas de hipótesis estadísticas.</p></li>
<li><p>La prueba de hipótesis estadística es un marco para determinar si los datos observados se desvían de lo esperado. La biblioteca scipy.stats de Python contiene una serie de funciones que facilitan la realización de pruebas de hipótesis.</p></li>
</ul>
<div id="aspectos-básicos" class="section level4 hasAnchor" number="4.6.3.1">
<h4><span class="header-section-number">4.6.3.1</span> Aspectos básicos<a href="análisis-de-datos-con-python.html#aspectos-básicos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Las pruebas de hipótesis estadísticas se basan en una afirmación llamada hipótesis nula que supone que no hay nada interesante entre las variables que se están probando (lo que no quiero que ocurra).</p></li>
<li><p>La forma exacta de la hipótesis nula varía de un tipo de prueba a otro: si se está probando si los grupos difieren, la hipótesis nula afirma que los grupos son iguales. Por ejemplo, si quieres comprobar si la edad media de los votantes de tu comuna difiere de la media nacional, la hipótesis nula sería que no hay diferencia entre las edades medias.</p></li>
<li><p>El propósito de una prueba de hipótesis es determinar si es probable que la hipótesis nula sea cierta dados los datos de la muestra. Si hay pocas pruebas en contra de la hipótesis nula teniendo en cuenta los datos, se acepta la hipótesis nula. Si la hipótesis nula es improbable teniendo en cuenta los datos, puede rechazar la hipótesis nula a favor de la hipótesis alternativa.</p></li>
<li><p>La forma exacta de la hipótesis alternativa dependerá de la prueba específica que se realice. Siguiendo con el ejemplo anterior, la hipótesis alternativa sería que la edad media de los votantes de su estado difiere de hecho de la media nacional.</p></li>
<li><p>Una vez que tenga la hipótesis nula y la alternativa en la mano, elija un nivel de significancia (a menudo denotado por la letra griega α.).</p></li>
<li><p>El nivel de significacia es un umbral de probabilidad que determina cuándo se rechaza la hipótesis nula.</p></li>
<li><p>Tras realizar una prueba, si la probabilidad de obtener un resultado tan extremo como el que se observa debido al azar es inferior al nivel, se rechaza la <em>hipótesis nula a favor de la alternativa. Esta probabilidad de ver un resultado tan extremo o más extremo que el observado</em> se conoce como valor p.</p></li>
<li><p>La prueba T es una prueba estadística utilizada para determinar si una muestra de datos numéricos difiere significativamente de la población o si dos muestras difieren entre sí.</p></li>
</ul>
</div>
<div id="test---t-en-una-muestra" class="section level4 hasAnchor" number="4.6.3.2">
<h4><span class="header-section-number">4.6.3.2</span> Test - T en una muestra<a href="análisis-de-datos-con-python.html#test---t-en-una-muestra" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Una prueba t de una muestra comprueba si la media de una muestra difiere de la media de la población.</li>
<li>Creemos algunos datos de edad ficticia para la población de votantes de todo el país y una muestra de votantes de santiago.</li>
<li>Comprobemos si la media de edad de los votantes de santiago difiere de la de la población:</li>
</ul>
<div class="sourceCode" id="cb724"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb724-1"><a href="análisis-de-datos-con-python.html#cb724-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">6</span>)</span>
<span id="cb724-2"><a href="análisis-de-datos-con-python.html#cb724-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb724-3"><a href="análisis-de-datos-con-python.html#cb724-3" aria-hidden="true" tabindex="-1"></a>population_ages1 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">35</span>, size<span class="op">=</span><span class="dv">150000</span>)</span>
<span id="cb724-4"><a href="análisis-de-datos-con-python.html#cb724-4" aria-hidden="true" tabindex="-1"></a>population_ages2 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">10</span>, size<span class="op">=</span><span class="dv">100000</span>)</span>
<span id="cb724-5"><a href="análisis-de-datos-con-python.html#cb724-5" aria-hidden="true" tabindex="-1"></a>population_ages <span class="op">=</span> np.concatenate((population_ages1, population_ages2))</span>
<span id="cb724-6"><a href="análisis-de-datos-con-python.html#cb724-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb724-7"><a href="análisis-de-datos-con-python.html#cb724-7" aria-hidden="true" tabindex="-1"></a>santiago_ages1 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">30</span>, size<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb724-8"><a href="análisis-de-datos-con-python.html#cb724-8" aria-hidden="true" tabindex="-1"></a>santiago_ages2 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">10</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb724-9"><a href="análisis-de-datos-con-python.html#cb724-9" aria-hidden="true" tabindex="-1"></a>santiago_ages <span class="op">=</span> np.concatenate((santiago_ages1, santiago_ages2))</span>
<span id="cb724-10"><a href="análisis-de-datos-con-python.html#cb724-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb724-11"><a href="análisis-de-datos-con-python.html#cb724-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( population_ages.mean() )</span>
<span id="cb724-12"><a href="análisis-de-datos-con-python.html#cb724-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( santiago_ages.mean() )</span></code></pre></div>
<ul>
<li><p>Observa que hemos utilizado una combinación de distribuciones ligeramente diferente para generar los datos de la muestra de Santiago, por lo que sabemos que las dos medias son diferentes.</p></li>
<li><p>Realicemos una prueba t con un nivel de confianza del 95% y veamos si rechaza correctamente la hipótesis nula de que la muestra procede de la misma distribución que la población.</p></li>
<li><p>Para realizar una prueba t de una muestra, podemos la función stats.ttest_1samp():</p></li>
</ul>
<div class="sourceCode" id="cb725"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb725-1"><a href="análisis-de-datos-con-python.html#cb725-1" aria-hidden="true" tabindex="-1"></a>stats.ttest_1samp(a <span class="op">=</span> santiago_ages,               <span class="co"># Datos muestrales</span></span>
<span id="cb725-2"><a href="análisis-de-datos-con-python.html#cb725-2" aria-hidden="true" tabindex="-1"></a>                 popmean <span class="op">=</span> population_ages.mean())  <span class="co"># Media poblacional</span></span></code></pre></div>
<ul>
<li>El resultado de la prueba muestra que el estadístico de prueba “t” es igual a -2,574.</li>
<li>Este estadístico de prueba nos indica cuánto se desvía la media de la muestra de la hipótesis nula.</li>
<li><strong>Si el estadístico t se encuentra fuera de los cuantiles de la distribución t correspondientes a nuestro nivel de confianza y grados de libertad, rechazamos la hipótesis nula</strong>.</li>
<li>Podemos comprobar los cuantiles con stats.t.ppf():</li>
</ul>
<div class="sourceCode" id="cb726"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb726-1"><a href="análisis-de-datos-con-python.html#cb726-1" aria-hidden="true" tabindex="-1"></a>stats.t.ppf(q<span class="op">=</span><span class="fl">0.025</span>,  <span class="co"># Cuantile para chequear</span></span>
<span id="cb726-2"><a href="análisis-de-datos-con-python.html#cb726-2" aria-hidden="true" tabindex="-1"></a>            df<span class="op">=</span><span class="dv">49</span>)  <span class="co"># Grados de libertad</span></span>
<span id="cb726-3"><a href="análisis-de-datos-con-python.html#cb726-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-4"><a href="análisis-de-datos-con-python.html#cb726-4" aria-hidden="true" tabindex="-1"></a>stats.t.ppf(q<span class="op">=</span><span class="fl">0.975</span>,  <span class="co">#  # Cuantile para chequear</span></span>
<span id="cb726-5"><a href="análisis-de-datos-con-python.html#cb726-5" aria-hidden="true" tabindex="-1"></a>            df<span class="op">=</span><span class="dv">49</span>)  <span class="co"># Grados de libertad</span></span></code></pre></div>
<p>Podemos calcular las probabilidades de ver un resultado tan extremo como el que observamos (conocido como valor p) pasando el estadístico t como cuantil a la función stats.t.cdf():</p>
<div class="sourceCode" id="cb727"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb727-1"><a href="análisis-de-datos-con-python.html#cb727-1" aria-hidden="true" tabindex="-1"></a>stats.t.cdf(x <span class="op">=</span> <span class="op">-</span><span class="fl">2.5742</span>,      <span class="co"># Estadistico T</span></span>
<span id="cb727-2"><a href="análisis-de-datos-con-python.html#cb727-2" aria-hidden="true" tabindex="-1"></a>               df<span class="op">=</span> <span class="dv">49</span>) <span class="op">*</span> <span class="dv">2</span>   <span class="co"># Por dos (dos colas)</span></span></code></pre></div>
<p><strong>Nota</strong>: La hipótesis alternativa que estamos comprobando es si la media de la muestra difiere (no es igual) a la media de la población. Dado que la muestra puede diferir en dirección positiva o negativa, multiplicamos el valor por dos.</p>
<ul>
<li><p>Observe que este valor es el mismo que el valor p que aparece en el resultado de la prueba t original.</p></li>
<li><p>Un valor p de 0,01311 significa que esperaríamos ver datos tan extremos como nuestra muestra debido al azar alrededor del 1,3% de las veces si la hipótesis nula fuera cierta.</p></li>
<li><p>En este caso, el valor p es inferior a nuestro nivel de significacia α (igual a 1-conf.nivel o 0,05), por lo que deberíamos rechazar la hipótesis nula.</p></li>
<li><p>Veamos que ocurre con los intervalos de confianza:</p></li>
</ul>
<div class="sourceCode" id="cb728"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb728-1"><a href="análisis-de-datos-con-python.html#cb728-1" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> santiago_ages.std()<span class="op">/</span>math.sqrt(<span class="dv">50</span>)  <span class="co"># Desv. est. muestral</span></span>
<span id="cb728-2"><a href="análisis-de-datos-con-python.html#cb728-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb728-3"><a href="análisis-de-datos-con-python.html#cb728-3" aria-hidden="true" tabindex="-1"></a>stats.t.interval(<span class="fl">0.95</span>,                        <span class="co"># Intervalo de confianza</span></span>
<span id="cb728-4"><a href="análisis-de-datos-con-python.html#cb728-4" aria-hidden="true" tabindex="-1"></a>                 df <span class="op">=</span> <span class="dv">49</span>,                     <span class="co"># Grados libertad</span></span>
<span id="cb728-5"><a href="análisis-de-datos-con-python.html#cb728-5" aria-hidden="true" tabindex="-1"></a>                 loc <span class="op">=</span> santiago_ages.mean(), <span class="co">#  Media muestral</span></span>
<span id="cb728-6"><a href="análisis-de-datos-con-python.html#cb728-6" aria-hidden="true" tabindex="-1"></a>                 scale<span class="op">=</span> sigma)                <span class="co"># Desviacion estandar muestral</span></span></code></pre></div>
<p>Por otra parte, dado que hay un 1,3% de posibilidades de ver un resultado tan extremo debido al azar, no es significativo al nivel de confianza del 99%. Esto significa que si construyéramos un intervalo de confianza del 99%, capturaría la media de la población:</p>
<div class="sourceCode" id="cb729"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb729-1"><a href="análisis-de-datos-con-python.html#cb729-1" aria-hidden="true" tabindex="-1"></a>stats.t.interval(alpha <span class="op">=</span> <span class="fl">0.99</span>,                <span class="co"># Intervalo de confianza</span></span>
<span id="cb729-2"><a href="análisis-de-datos-con-python.html#cb729-2" aria-hidden="true" tabindex="-1"></a>                 df <span class="op">=</span> <span class="dv">49</span>,                     <span class="co"># Grados libertad</span></span>
<span id="cb729-3"><a href="análisis-de-datos-con-python.html#cb729-3" aria-hidden="true" tabindex="-1"></a>                 loc <span class="op">=</span> santiago_ages.mean(), <span class="co"># Media muestra</span></span>
<span id="cb729-4"><a href="análisis-de-datos-con-python.html#cb729-4" aria-hidden="true" tabindex="-1"></a>                 scale<span class="op">=</span> sigma)                <span class="co"># Desviacion estandar muestral</span></span></code></pre></div>
<ul>
<li><p>Con un nivel de confianza más alto, construimos un intervalo de confianza más amplio y aumentamos las probabilidades de que capte la verdadera media, con lo que es menos probable que rechacemos la hipótesis nula.</p></li>
<li><p>En este caso, el valor p de 0,013 es mayor que nuestro nivel de significación de 0,01 y no rechazamos la hipótesis nula.</p></li>
</ul>
</div>
<div id="test-t-en-dos-muestras" class="section level4 hasAnchor" number="4.6.3.3">
<h4><span class="header-section-number">4.6.3.3</span> Test T en dos muestras<a href="análisis-de-datos-con-python.html#test-t-en-dos-muestras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Una prueba t de dos muestras investiga si las medias de dos muestras de datos independientes difieren entre sí.</p></li>
<li><p>En una prueba de dos muestras, la hipótesis nula es que las medias de ambos grupos son iguales. A diferencia de la prueba de una muestra, en la que se compara con un parámetro poblacional conocido, la prueba de dos muestras sólo incluye las medias de las muestras.</p></li>
<li><p>Puede realizar una prueba t de dos muestras pasando con la función stats.ttest_ind().</p></li>
<li><p>Vamos a generar una muestra de datos de la edad de los votantes de Valparaiso y a probarla contra la muestra que hicimos antes:</p></li>
</ul>
<div class="sourceCode" id="cb730"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb730-1"><a href="análisis-de-datos-con-python.html#cb730-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">12</span>)</span>
<span id="cb730-2"><a href="análisis-de-datos-con-python.html#cb730-2" aria-hidden="true" tabindex="-1"></a>valparaiso_ages1 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">33</span>, size<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb730-3"><a href="análisis-de-datos-con-python.html#cb730-3" aria-hidden="true" tabindex="-1"></a>valparaiso_ages2 <span class="op">=</span> stats.poisson.rvs(loc<span class="op">=</span><span class="dv">18</span>, mu<span class="op">=</span><span class="dv">13</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb730-4"><a href="análisis-de-datos-con-python.html#cb730-4" aria-hidden="true" tabindex="-1"></a>valparaiso_ages <span class="op">=</span> np.concatenate((valparaiso_ages1, valparaiso_ages2))</span>
<span id="cb730-5"><a href="análisis-de-datos-con-python.html#cb730-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb730-6"><a href="análisis-de-datos-con-python.html#cb730-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(valparaiso_ages.mean() )</span>
<span id="cb730-7"><a href="análisis-de-datos-con-python.html#cb730-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb730-8"><a href="análisis-de-datos-con-python.html#cb730-8" aria-hidden="true" tabindex="-1"></a>stats.ttest_ind(a<span class="op">=</span> santiago_ages,</span>
<span id="cb730-9"><a href="análisis-de-datos-con-python.html#cb730-9" aria-hidden="true" tabindex="-1"></a>                b<span class="op">=</span> valparaiso_ages,</span>
<span id="cb730-10"><a href="análisis-de-datos-con-python.html#cb730-10" aria-hidden="true" tabindex="-1"></a>                equal_var<span class="op">=</span><span class="va">False</span>)    <span class="co"># asumimos que tienen igual varianza?</span></span></code></pre></div>
<ul>
<li><p>La prueba arroja un valor p de 0,0907, lo que significa que hay un 9% de posibilidades de que veamos los datos de la muestra tan separados si los dos grupos analizados son realmente idénticos.</p></li>
<li><p>Si utilizáramos un nivel de confianza del 95%, no podríamos rechazar la hipótesis nula, ya que el valor p es mayor que el nivel de significancia correspondiente del 5%.</p></li>
</ul>
</div>
<div id="t-test-pareados" class="section level4 hasAnchor" number="4.6.3.4">
<h4><span class="header-section-number">4.6.3.4</span> T-Test pareados<a href="análisis-de-datos-con-python.html#t-test-pareados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>La prueba t básica de dos muestras está diseñada para probar las diferencias entre grupos independientes.</p></li>
<li><p>En algunos casos, puede interesarle probar las diferencias entre muestras del mismo grupo en diferentes momentos. Por ejemplo, un hospital podría querer probar si un medicamento para perder peso funciona comprobando los pesos de los pacientes del mismo grupo antes y después del tratamiento.</p></li>
<li><p>Una prueba t pareada permite comprobar si las medias de las muestras del mismo grupo difieren.</p></li>
<li><p>Podemos realizar una prueba t emparejada utilizando la función scipy stats.ttest_rel(). Generemos algunos datos de peso de pacientes ficticios y hagamos una prueba t pareada:</p></li>
</ul>
<div class="sourceCode" id="cb731"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb731-1"><a href="análisis-de-datos-con-python.html#cb731-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">11</span>)</span>
<span id="cb731-2"><a href="análisis-de-datos-con-python.html#cb731-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb731-3"><a href="análisis-de-datos-con-python.html#cb731-3" aria-hidden="true" tabindex="-1"></a>before<span class="op">=</span> stats.norm.rvs(scale<span class="op">=</span><span class="dv">30</span>, loc<span class="op">=</span><span class="dv">250</span>, size<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb731-4"><a href="análisis-de-datos-con-python.html#cb731-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb731-5"><a href="análisis-de-datos-con-python.html#cb731-5" aria-hidden="true" tabindex="-1"></a>after <span class="op">=</span> before <span class="op">+</span> stats.norm.rvs(scale<span class="op">=</span><span class="dv">5</span>, loc<span class="op">=-</span><span class="fl">1.25</span>, size<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb731-6"><a href="análisis-de-datos-con-python.html#cb731-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb731-7"><a href="análisis-de-datos-con-python.html#cb731-7" aria-hidden="true" tabindex="-1"></a>weight_df <span class="op">=</span> pd.DataFrame({<span class="st">&quot;weight_before&quot;</span>:before,</span>
<span id="cb731-8"><a href="análisis-de-datos-con-python.html#cb731-8" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;weight_after&quot;</span>:after,</span>
<span id="cb731-9"><a href="análisis-de-datos-con-python.html#cb731-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;weight_change&quot;</span>:after<span class="op">-</span>before})</span>
<span id="cb731-10"><a href="análisis-de-datos-con-python.html#cb731-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb731-11"><a href="análisis-de-datos-con-python.html#cb731-11" aria-hidden="true" tabindex="-1"></a>weight_df.describe()             <span class="co"># Chequeamos</span></span></code></pre></div>
<p>El resumen muestra que los pacientes perdieron alrededor de 1,23 libras de media después del tratamiento. Realicemos una prueba t pareada para ver si esta diferencia es significativa con un nivel de confianza del 95%:</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb732-1"><a href="análisis-de-datos-con-python.html#cb732-1" aria-hidden="true" tabindex="-1"></a>stats.ttest_rel(a <span class="op">=</span> before,</span>
<span id="cb732-2"><a href="análisis-de-datos-con-python.html#cb732-2" aria-hidden="true" tabindex="-1"></a>                b <span class="op">=</span> after)</span></code></pre></div>
<ul>
<li>Rechazamos la hipotesis nula de que ambos promedios son iguales.</li>
</ul>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.6.2: </b></p>
<ul>
<li>Tome los siguientes valores de colesterol de los pacientes antes y despues de una dieta</li>
</ul>
<p>test_results_before_diet=[224, 235, 223, 253, 253, 224, 244, 225, 259, 220, 242, 240, 239, 229, 276, 254, 237, 227]</p>
<p>test_results_after_diet=[198, 195, 213, 190, 246, 206, 225, 199, 214, 210, 188, 205, 200, 220, 190, 199, 191, 218]</p>
<ul>
<li>Realice un test de hipotesis pareado que le permita chequear si los niveles de colesterol han bajado posterior a la dieta utilizando un nivel de significancia del 0.05%. Asuma que efectivamente los datos se distribuyen normalmente.</li>
</ul>
</div>
<div class="sourceCode" id="cb733"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb733-1"><a href="análisis-de-datos-con-python.html#cb733-1" aria-hidden="true" tabindex="-1"></a>test_results_before_diet<span class="op">=</span>[<span class="dv">224</span>, <span class="dv">235</span>, <span class="dv">223</span>, <span class="dv">253</span>, <span class="dv">253</span>, <span class="dv">224</span>, <span class="dv">244</span>, <span class="dv">225</span>, <span class="dv">259</span>, <span class="dv">220</span>, <span class="dv">242</span>, <span class="dv">240</span>, <span class="dv">239</span>, <span class="dv">229</span>, <span class="dv">276</span>, <span class="dv">254</span>, <span class="dv">237</span>, <span class="dv">227</span>]</span>
<span id="cb733-2"><a href="análisis-de-datos-con-python.html#cb733-2" aria-hidden="true" tabindex="-1"></a>test_results_after_diet<span class="op">=</span>[<span class="dv">198</span>, <span class="dv">195</span>, <span class="dv">213</span>, <span class="dv">190</span>, <span class="dv">246</span>, <span class="dv">206</span>, <span class="dv">225</span>, <span class="dv">199</span>, <span class="dv">214</span>, <span class="dv">210</span>, <span class="dv">188</span>, <span class="dv">205</span>, <span class="dv">200</span>, <span class="dv">220</span>, <span class="dv">190</span>, <span class="dv">199</span>, <span class="dv">191</span>, <span class="dv">218</span>]</span>
<span id="cb733-3"><a href="análisis-de-datos-con-python.html#cb733-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb733-4"><a href="análisis-de-datos-con-python.html#cb733-4" aria-hidden="true" tabindex="-1"></a>test_stat, p_value_paired <span class="op">=</span> stats.ttest_rel(test_results_before_diet,test_results_after_diet)</span>
<span id="cb733-5"><a href="análisis-de-datos-con-python.html#cb733-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;p value:</span><span class="sc">%.6f</span><span class="st">&quot;</span> <span class="op">%</span> p_value_paired , <span class="st">&quot;one tailed p value:</span><span class="sc">%.6f</span><span class="st">&quot;</span> <span class="op">%</span>(p_value_paired<span class="op">/</span><span class="dv">2</span>))</span>
<span id="cb733-6"><a href="análisis-de-datos-con-python.html#cb733-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb733-7"><a href="análisis-de-datos-con-python.html#cb733-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p_value_paired <span class="op">&lt;</span><span class="fl">0.05</span>:</span>
<span id="cb733-8"><a href="análisis-de-datos-con-python.html#cb733-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Reject null hypothesis&quot;</span>)</span>
<span id="cb733-9"><a href="análisis-de-datos-con-python.html#cb733-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb733-10"><a href="análisis-de-datos-con-python.html#cb733-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Fail to reject null hypothesis&quot;</span>)</span></code></pre></div>
</div>
<div id="error-tipo-i-y-tipo-ii" class="section level4 hasAnchor" number="4.6.3.5">
<h4><span class="header-section-number">4.6.3.5</span> Error tipo I y tipo II<a href="análisis-de-datos-con-python.html#error-tipo-i-y-tipo-ii" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>El resultado de una prueba de hipótesis estadística y la correspondiente decisión de rechazar o aceptar la hipótesis nula no son infalibles.</p></li>
<li><p>Una prueba proporciona pruebas a favor o en contra de la hipótesis nula y luego se decide si se acepta o se rechaza en función de esas pruebas, pero éstas pueden carecer de la fuerza necesaria para llegar a la conclusión correcta. Las conclusiones incorrectas obtenidas a partir de las pruebas de hipótesis se clasifican en una de las dos categorías siguientes: error de tipo I y error de tipo II.</p></li>
<li><p>El error de tipo I describe una situación en la que <strong>se rechaza la hipótesis nula cuando en realidad es verdadera</strong>. Este tipo de error también se conoce como “falso positivo” o “falso acierto”. La tasa de error de tipo 1 es igual al nivel de significación α, por lo que establecer un nivel de confianza más alto (y, por tanto, un alfa más bajo) reduce las posibilidades de obtener un falso positivo.</p></li>
<li><p>El error de tipo II describe una situación en la que <strong>no se rechaza la hipótesis nula cuando en realidad es falsa</strong>. El error de tipo II también se conoce como “falso negativo” o “fallo”. Cuanto más alto sea el nivel de confianza, más probabilidades habrá de cometer un error de tipo II.</p></li>
</ul>
<div class="figure">
<img src="attachment:image.png" alt="" />
<p class="caption">image.png</p>
</div>
<ul>
<li><p>H0: No esta embarazada</p></li>
<li><p>H1: Esta embarazada</p></li>
<li><p>ETI: Rechazar la nula (rechazo “no estar embarazada”) cuando es verdadera (“no esta embarazado”).</p></li>
<li><p>ETII: No rechazar la nula (“digo: no esta embarazada”), cuando es falsa (“esta embaradaza”).</p></li>
<li><p>Investiguemos estos errores con un gráfico:</p></li>
</ul>
<div class="sourceCode" id="cb734"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb734-1"><a href="análisis-de-datos-con-python.html#cb734-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">10</span>))</span>
<span id="cb734-2"><a href="análisis-de-datos-con-python.html#cb734-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-3"><a href="análisis-de-datos-con-python.html#cb734-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-4"><a href="análisis-de-datos-con-python.html#cb734-4" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">2</span>,<span class="fl">0.01</span>), </span>
<span id="cb734-5"><a href="análisis-de-datos-con-python.html#cb734-5" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">2</span>,<span class="fl">0.01</span>)) ,</span>
<span id="cb734-6"><a href="análisis-de-datos-con-python.html#cb734-6" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;red&#39;</span>,</span>
<span id="cb734-7"><a href="análisis-de-datos-con-python.html#cb734-7" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb734-8"><a href="análisis-de-datos-con-python.html#cb734-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-9"><a href="análisis-de-datos-con-python.html#cb734-9" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>,<span class="fl">0.01</span>), </span>
<span id="cb734-10"><a href="análisis-de-datos-con-python.html#cb734-10" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>,<span class="fl">0.01</span>)) ,</span>
<span id="cb734-11"><a href="análisis-de-datos-con-python.html#cb734-11" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;grey&#39;</span>,</span>
<span id="cb734-12"><a href="análisis-de-datos-con-python.html#cb734-12" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb734-13"><a href="análisis-de-datos-con-python.html#cb734-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-14"><a href="análisis-de-datos-con-python.html#cb734-14" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="dv">2</span>,<span class="dv">4</span>,<span class="fl">0.01</span>), </span>
<span id="cb734-15"><a href="análisis-de-datos-con-python.html#cb734-15" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="dv">2</span>,<span class="dv">4</span>,<span class="fl">0.01</span>)) ,</span>
<span id="cb734-16"><a href="análisis-de-datos-con-python.html#cb734-16" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;red&#39;</span>,</span>
<span id="cb734-17"><a href="análisis-de-datos-con-python.html#cb734-17" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb734-18"><a href="análisis-de-datos-con-python.html#cb734-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-19"><a href="análisis-de-datos-con-python.html#cb734-19" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">2</span>,<span class="fl">0.01</span>), </span>
<span id="cb734-20"><a href="análisis-de-datos-con-python.html#cb734-20" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="op">-</span><span class="dv">4</span>,<span class="op">-</span><span class="dv">2</span>,<span class="fl">0.01</span>),loc<span class="op">=</span><span class="dv">3</span>, scale<span class="op">=</span><span class="dv">2</span>) ,</span>
<span id="cb734-21"><a href="análisis-de-datos-con-python.html#cb734-21" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;grey&#39;</span>,</span>
<span id="cb734-22"><a href="análisis-de-datos-con-python.html#cb734-22" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb734-23"><a href="análisis-de-datos-con-python.html#cb734-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-24"><a href="análisis-de-datos-con-python.html#cb734-24" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>,<span class="fl">0.01</span>), </span>
<span id="cb734-25"><a href="análisis-de-datos-con-python.html#cb734-25" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="op">-</span><span class="dv">2</span>,<span class="dv">2</span>,<span class="fl">0.01</span>),loc<span class="op">=</span><span class="dv">3</span>, scale<span class="op">=</span><span class="dv">2</span>) ,</span>
<span id="cb734-26"><a href="análisis-de-datos-con-python.html#cb734-26" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;blue&#39;</span>,</span>
<span id="cb734-27"><a href="análisis-de-datos-con-python.html#cb734-27" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb734-28"><a href="análisis-de-datos-con-python.html#cb734-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-29"><a href="análisis-de-datos-con-python.html#cb734-29" aria-hidden="true" tabindex="-1"></a>plt.fill_between(x<span class="op">=</span>np.arange(<span class="dv">2</span>,<span class="dv">10</span>,<span class="fl">0.01</span>), </span>
<span id="cb734-30"><a href="análisis-de-datos-con-python.html#cb734-30" aria-hidden="true" tabindex="-1"></a>                 y1<span class="op">=</span> stats.norm.pdf(np.arange(<span class="dv">2</span>,<span class="dv">10</span>,<span class="fl">0.01</span>),loc<span class="op">=</span><span class="dv">3</span>, scale<span class="op">=</span><span class="dv">2</span>),</span>
<span id="cb734-31"><a href="análisis-de-datos-con-python.html#cb734-31" aria-hidden="true" tabindex="-1"></a>                 facecolor<span class="op">=</span><span class="st">&#39;grey&#39;</span>,</span>
<span id="cb734-32"><a href="análisis-de-datos-con-python.html#cb734-32" aria-hidden="true" tabindex="-1"></a>                 alpha<span class="op">=</span><span class="fl">0.35</span>)</span>
<span id="cb734-33"><a href="análisis-de-datos-con-python.html#cb734-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb734-34"><a href="análisis-de-datos-con-python.html#cb734-34" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=-</span><span class="fl">0.8</span>, y<span class="op">=</span><span class="fl">0.15</span>, s<span class="op">=</span> <span class="st">&quot;Null Hypothesis&quot;</span>)</span>
<span id="cb734-35"><a href="análisis-de-datos-con-python.html#cb734-35" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">2.5</span>, y<span class="op">=</span><span class="fl">0.13</span>, s<span class="op">=</span> <span class="st">&quot;Alternative&quot;</span>)</span>
<span id="cb734-36"><a href="análisis-de-datos-con-python.html#cb734-36" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="fl">2.1</span>, y<span class="op">=</span><span class="fl">0.01</span>, s<span class="op">=</span> <span class="st">&quot;Type 1 Error&quot;</span>)</span>
<span id="cb734-37"><a href="análisis-de-datos-con-python.html#cb734-37" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=-</span><span class="fl">3.2</span>, y<span class="op">=</span><span class="fl">0.01</span>, s<span class="op">=</span> <span class="st">&quot;Type 1 Error&quot;</span>)</span>
<span id="cb734-38"><a href="análisis-de-datos-con-python.html#cb734-38" aria-hidden="true" tabindex="-1"></a>plt.text(x<span class="op">=</span><span class="dv">0</span>, y<span class="op">=</span><span class="fl">0.02</span>, s<span class="op">=</span> <span class="st">&quot;Type 2 Error&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>En el gráfico anterior, las áreas rojas indican los errores de tipo I que se producen cuando la hipótesis alternativa no es diferente de la nula para una prueba de dos caras con un nivel de confianza del 95%.</p></li>
<li><p>El área azul representa los errores de tipo II que se producen cuando la hipótesis alternativa es diferente de la nula, como muestra la distribución de la derecha.</p></li>
<li><p>Tenga en cuenta que la tasa de error de tipo II es el área bajo la distribución alternativa dentro de los cuantiles determinados por la distribución nula y el nivel de confianza.</p></li>
<li><p>Podemos calcular la tasa de error de tipo II para las distribuciones anteriores de la siguiente manera:</p></li>
</ul>
<div class="sourceCode" id="cb735"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb735-1"><a href="análisis-de-datos-con-python.html#cb735-1" aria-hidden="true" tabindex="-1"></a>lower_quantile <span class="op">=</span> stats.norm.ppf(<span class="fl">0.025</span>)  <span class="co"># Lower cutoff value</span></span>
<span id="cb735-2"><a href="análisis-de-datos-con-python.html#cb735-2" aria-hidden="true" tabindex="-1"></a>upper_quantile <span class="op">=</span> stats.norm.ppf(<span class="fl">0.975</span>)  <span class="co"># Upper cutoff value</span></span>
<span id="cb735-3"><a href="análisis-de-datos-con-python.html#cb735-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb735-4"><a href="análisis-de-datos-con-python.html#cb735-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Area bajo la alternativa,</span></span>
<span id="cb735-5"><a href="análisis-de-datos-con-python.html#cb735-5" aria-hidden="true" tabindex="-1"></a>low <span class="op">=</span> stats.norm.cdf(lower_quantile,    </span>
<span id="cb735-6"><a href="análisis-de-datos-con-python.html#cb735-6" aria-hidden="true" tabindex="-1"></a>                     loc<span class="op">=</span><span class="dv">3</span>,             </span>
<span id="cb735-7"><a href="análisis-de-datos-con-python.html#cb735-7" aria-hidden="true" tabindex="-1"></a>                     scale<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb735-8"><a href="análisis-de-datos-con-python.html#cb735-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb735-9"><a href="análisis-de-datos-con-python.html#cb735-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Area under alternative, to the left the upper cutoff value</span></span>
<span id="cb735-10"><a href="análisis-de-datos-con-python.html#cb735-10" aria-hidden="true" tabindex="-1"></a>high <span class="op">=</span> stats.norm.cdf(upper_quantile, </span>
<span id="cb735-11"><a href="análisis-de-datos-con-python.html#cb735-11" aria-hidden="true" tabindex="-1"></a>                      loc<span class="op">=</span><span class="dv">3</span>, </span>
<span id="cb735-12"><a href="análisis-de-datos-con-python.html#cb735-12" aria-hidden="true" tabindex="-1"></a>                      scale<span class="op">=</span><span class="dv">2</span>)          </span>
<span id="cb735-13"><a href="análisis-de-datos-con-python.html#cb735-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb735-14"><a href="análisis-de-datos-con-python.html#cb735-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Area under the alternative, between the cutoffs (Type II error)</span></span>
<span id="cb735-15"><a href="análisis-de-datos-con-python.html#cb735-15" aria-hidden="true" tabindex="-1"></a>high<span class="op">-</span>low</span></code></pre></div>
<ul>
<li>Con las distribuciones normales anteriores, no rechazaríamos la hipótesis nula en un 30% de las ocasiones porque las distribuciones están lo suficientemente cerca como para tener un solapamiento significativo.</li>
</ul>
</div>
<div id="poder-estadístico" class="section level4 hasAnchor" number="4.6.3.6">
<h4><span class="header-section-number">4.6.3.6</span> Poder estadístico<a href="análisis-de-datos-con-python.html#poder-estadístico" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>La <a href="https://en.wikipedia.org/wiki/Power_(statistics)">potencia</a> de una prueba estadística es la probabilidad de que la prueba rechace la hipótesis nula cuando la alternativa es realmente diferente de la nula.</p></li>
<li><p>En otras palabras, la potencia es la probabilidad de que la prueba detecte que hay algo interesante cuando realmente <em>hay</em> algo interesante. La potencia es igual a uno menos la tasa de error de tipo II. La potencia de una prueba estadística está influida por</p></li>
</ul>
<ol style="list-style-type: decimal">
<li>El nivel de significancia elegido para la prueba.</li>
<li>El tamaño de la muestra.</li>
<li>El tamaño del efecto de la prueba.</li>
</ol>
<ul>
<li><p>A la hora de elegir un nivel de significación para una prueba, existe un equilibrio entre el error de tipo I y el de tipo II. Un nivel de significación bajo, como 0,01, hace que sea poco probable que una prueba tenga errores de tipo I (falsos positivos), pero es más probable que tenga errores de tipo II (falsos negativos) que una prueba con un valor mayor del nivel de significancia α. Una convención común es que una prueba estadística debe tener una potencia de al menos 0,8.</p></li>
<li><p>Un mayor tamaño de la muestra reduce la incertidumbre de la estimación puntual, haciendo que la distribución de la muestra se estreche, lo que da lugar a menores tasas de error de tipo II y a una mayor potencia.</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/Effect_size">Tamaño del efecto</a> es un término general que describe una medida numérica del tamaño de algún fenómeno. Hay muchas medidas diferentes del tamaño del efecto que surgen en diferentes contextos. En el contexto de la prueba T, un tamaño del efecto simple es la diferencia entre las medias de las muestras. Este número puede estandarizarse dividiéndolo por la desviación estándar de la población o la desviación estándar conjunta de las muestras. Esto pone el tamaño del efecto en términos de desviaciones estándar, por lo que un tamaño del efecto estandarizado de 0,5 se interpretaría como que la media de una muestra está a 0,5 desviaciones estándar de otra (en general, 0,5 se considera un tamaño del efecto “grande”).</p></li>
<li><p>Dado que la potencia estadística, el nivel de significación, el tamaño del efecto y el tamaño de la muestra están relacionados, es posible calcular cualquiera de ellos para valores dados de los otros tres. Esto puede ser una parte importante del proceso de diseño de una prueba de hipótesis y del análisis de los resultados. Por ejemplo, si quiere realizar una prueba con un nivel de significancia determinado (digamos el estándar 0,05) y una potencia (digamos el estándar 0,8) y está interesado en un tamaño del efecto determinado (digamos 0,5 para la diferencia estandarizada entre las medias de la muestra), podría utilizar esa información para determinar el tamaño de la muestra que necesita.</p></li>
<li><p>En python, la biblioteca statsmodels contiene funciones para resolver cualquier parámetro de la potencia de las pruebas T. Utilice statsmodels.stats.power.tt_solve_power para pruebas t de una muestra y statsmodels.stats.power.tt_ind_solve_power para una prueba t de dos muestras.</p></li>
<li><p>Comprobemos el tamaño de la muestra que debemos utilizar dados los valores de los parámetros estándar anteriores para una prueba t de una muestra:</p></li>
</ul>
<div class="sourceCode" id="cb736"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb736-1"><a href="análisis-de-datos-con-python.html#cb736-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.power <span class="im">import</span> tt_solve_power</span>
<span id="cb736-2"><a href="análisis-de-datos-con-python.html#cb736-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb736-3"><a href="análisis-de-datos-con-python.html#cb736-3" aria-hidden="true" tabindex="-1"></a>tt_solve_power(effect_size <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span id="cb736-4"><a href="análisis-de-datos-con-python.html#cb736-4" aria-hidden="true" tabindex="-1"></a>               alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span id="cb736-5"><a href="análisis-de-datos-con-python.html#cb736-5" aria-hidden="true" tabindex="-1"></a>               power <span class="op">=</span> <span class="fl">0.8</span>)</span></code></pre></div>
<p>En este caso, querríamos un tamaño de muestra de al menos 34 para hacer un estudio con la potencia y el nivel de significación deseados capaz de detectar un tamaño de efecto grande.</p>
</div>
</div>
<div id="ejemplo-1-resumen-exploratorio-de-datos" class="section level3 hasAnchor" number="4.6.4">
<h3><span class="header-section-number">4.6.4</span> Ejemplo 1: resumen exploratorio de datos<a href="análisis-de-datos-con-python.html#ejemplo-1-resumen-exploratorio-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Como sacar la primera impresión de tus datos</li>
<li>No olvidar: <a href="http://www.danielmsullivan.com/pages/tutorial_stata_to_python.html" class="uri">http://www.danielmsullivan.com/pages/tutorial_stata_to_python.html</a></li>
</ul>
<div class="sourceCode" id="cb737"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb737-1"><a href="análisis-de-datos-con-python.html#cb737-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basics</span></span>
<span id="cb737-2"><a href="análisis-de-datos-con-python.html#cb737-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb737-3"><a href="análisis-de-datos-con-python.html#cb737-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb737-4"><a href="análisis-de-datos-con-python.html#cb737-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb737-5"><a href="análisis-de-datos-con-python.html#cb737-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizations</span></span>
<span id="cb737-6"><a href="análisis-de-datos-con-python.html#cb737-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb737-7"><a href="análisis-de-datos-con-python.html#cb737-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div>
<div id="datos" class="section level4 hasAnchor" number="4.6.4.1">
<h4><span class="header-section-number">4.6.4.1</span> Datos<a href="análisis-de-datos-con-python.html#datos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb738"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb738-1"><a href="análisis-de-datos-con-python.html#cb738-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the data</span></span>
<span id="cb738-2"><a href="análisis-de-datos-con-python.html#cb738-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> sns.load_dataset(<span class="st">&#39;tips&#39;</span>)</span>
<span id="cb738-3"><a href="análisis-de-datos-con-python.html#cb738-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb738-4"><a href="análisis-de-datos-con-python.html#cb738-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View first 5 rows</span></span>
<span id="cb738-5"><a href="análisis-de-datos-con-python.html#cb738-5" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb738-6"><a href="análisis-de-datos-con-python.html#cb738-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb738-7"><a href="análisis-de-datos-con-python.html#cb738-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Miramos tipos de datos</span></span>
<span id="cb738-8"><a href="análisis-de-datos-con-python.html#cb738-8" aria-hidden="true" tabindex="-1"></a>df.info()</span>
<span id="cb738-9"><a href="análisis-de-datos-con-python.html#cb738-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb738-10"><a href="análisis-de-datos-con-python.html#cb738-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Tamaño</span></span>
<span id="cb738-11"><a href="análisis-de-datos-con-python.html#cb738-11" aria-hidden="true" tabindex="-1"></a>df.shape</span>
<span id="cb738-12"><a href="análisis-de-datos-con-python.html#cb738-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb738-13"><a href="análisis-de-datos-con-python.html#cb738-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Tipos de datos</span></span>
<span id="cb738-14"><a href="análisis-de-datos-con-python.html#cb738-14" aria-hidden="true" tabindex="-1"></a>df.dtypes</span></code></pre></div>
</div>
<div id="missing-values-3" class="section level4 hasAnchor" number="4.6.4.2">
<h4><span class="header-section-number">4.6.4.2</span> Missing Values<a href="análisis-de-datos-con-python.html#missing-values-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb739"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb739-1"><a href="análisis-de-datos-con-python.html#cb739-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contamos missing values por variable</span></span>
<span id="cb739-2"><a href="análisis-de-datos-con-python.html#cb739-2" aria-hidden="true" tabindex="-1"></a>missing_values <span class="op">=</span> df.isnull().<span class="bu">sum</span>()</span>
<span id="cb739-3"><a href="análisis-de-datos-con-python.html#cb739-3" aria-hidden="true" tabindex="-1"></a>missing_values</span>
<span id="cb739-4"><a href="análisis-de-datos-con-python.html#cb739-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-5"><a href="análisis-de-datos-con-python.html#cb739-5" aria-hidden="true" tabindex="-1"></a>missing_values_df <span class="op">=</span> pd.DataFrame(missing_values)</span>
<span id="cb739-6"><a href="análisis-de-datos-con-python.html#cb739-6" aria-hidden="true" tabindex="-1"></a>missing_values_df.rename(columns <span class="op">=</span> {<span class="dv">0</span> : <span class="st">&quot;Cantidad&quot;</span>})</span>
<span id="cb739-7"><a href="análisis-de-datos-con-python.html#cb739-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-8"><a href="análisis-de-datos-con-python.html#cb739-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardamos nuestra T6</span></span>
<span id="cb739-9"><a href="análisis-de-datos-con-python.html#cb739-9" aria-hidden="true" tabindex="-1"></a>missing_values_df.to_excel(<span class="st">&quot;t6.xlsx&quot;</span>, sheet_name<span class="op">=</span><span class="st">&#39;t6&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb739-10"><a href="análisis-de-datos-con-python.html#cb739-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-11"><a href="análisis-de-datos-con-python.html#cb739-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Insertamos NA para ejemplificar</span></span>
<span id="cb739-12"><a href="análisis-de-datos-con-python.html#cb739-12" aria-hidden="true" tabindex="-1"></a>dfna <span class="op">=</span> pd.DataFrame([[<span class="dv">10</span>, <span class="fl">1.2</span>, <span class="st">&#39;Female&#39;</span>, np.nan, <span class="st">&#39;?&#39;</span>, <span class="st">&#39;Dinner&#39;</span>, <span class="dv">2</span>]]<span class="op">*</span><span class="dv">4</span>, columns<span class="op">=</span>df.columns)</span>
<span id="cb739-13"><a href="análisis-de-datos-con-python.html#cb739-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-14"><a href="análisis-de-datos-con-python.html#cb739-14" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> df.append(dfna).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb739-15"><a href="análisis-de-datos-con-python.html#cb739-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-16"><a href="análisis-de-datos-con-python.html#cb739-16" aria-hidden="true" tabindex="-1"></a><span class="co"># tail of the df2, where NAs and nulls were inserted</span></span>
<span id="cb739-17"><a href="análisis-de-datos-con-python.html#cb739-17" aria-hidden="true" tabindex="-1"></a>df2.tail()</span>
<span id="cb739-18"><a href="análisis-de-datos-con-python.html#cb739-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-19"><a href="análisis-de-datos-con-python.html#cb739-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Heatmap to see missing values</span></span>
<span id="cb739-20"><a href="análisis-de-datos-con-python.html#cb739-20" aria-hidden="true" tabindex="-1"></a>sns.heatmap(df2.isnull(), cbar<span class="op">=</span><span class="va">False</span>)<span class="op">;</span></span>
<span id="cb739-21"><a href="análisis-de-datos-con-python.html#cb739-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-22"><a href="análisis-de-datos-con-python.html#cb739-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequiamos por otros posibles valores nilos - [?.,:*]  solpom columnas de texto </span></span>
<span id="cb739-23"><a href="análisis-de-datos-con-python.html#cb739-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> df2.select_dtypes(exclude<span class="op">=</span><span class="st">&#39;number&#39;</span>).columns:</span>
<span id="cb739-24"><a href="análisis-de-datos-con-python.html#cb739-24" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>df2[col]<span class="sc">.</span><span class="bu">str</span><span class="sc">.</span>contains(<span class="st">&#39;[?.,:*]&#39;</span>)<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss"> possible null(?.,:*) values&quot;</span>)</span>
<span id="cb739-25"><a href="análisis-de-datos-con-python.html#cb739-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-26"><a href="análisis-de-datos-con-python.html#cb739-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Remplazamos ? </span></span>
<span id="cb739-27"><a href="análisis-de-datos-con-python.html#cb739-27" aria-hidden="true" tabindex="-1"></a>df2.replace({<span class="st">&#39;?&#39;</span>:np.nan}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb739-28"><a href="análisis-de-datos-con-python.html#cb739-28" aria-hidden="true" tabindex="-1"></a>df2.tail(<span class="dv">2</span>)</span>
<span id="cb739-29"><a href="análisis-de-datos-con-python.html#cb739-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-30"><a href="análisis-de-datos-con-python.html#cb739-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, vamos a los calores más comunes </span></span>
<span id="cb739-31"><a href="análisis-de-datos-con-python.html#cb739-31" aria-hidden="true" tabindex="-1"></a>most_common_smoker <span class="op">=</span> df.smoker.value_counts().index[<span class="dv">0</span>]</span>
<span id="cb739-32"><a href="análisis-de-datos-con-python.html#cb739-32" aria-hidden="true" tabindex="-1"></a>most_common_day <span class="op">=</span> df.day.value_counts().index[<span class="dv">0</span>]</span>
<span id="cb739-33"><a href="análisis-de-datos-con-python.html#cb739-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-34"><a href="análisis-de-datos-con-python.html#cb739-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill NA Values with the most common value</span></span>
<span id="cb739-35"><a href="análisis-de-datos-con-python.html#cb739-35" aria-hidden="true" tabindex="-1"></a>df2.fillna(value<span class="op">=</span>{<span class="st">&#39;smoker&#39;</span>:most_common_smoker, <span class="st">&#39;day&#39;</span>:most_common_day})</span>
<span id="cb739-36"><a href="análisis-de-datos-con-python.html#cb739-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-37"><a href="análisis-de-datos-con-python.html#cb739-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop NA values</span></span>
<span id="cb739-38"><a href="análisis-de-datos-con-python.html#cb739-38" aria-hidden="true" tabindex="-1"></a>df2.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb739-39"><a href="análisis-de-datos-con-python.html#cb739-39" aria-hidden="true" tabindex="-1"></a>df2</span>
<span id="cb739-40"><a href="análisis-de-datos-con-python.html#cb739-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb739-41"><a href="análisis-de-datos-con-python.html#cb739-41" aria-hidden="true" tabindex="-1"></a>df2.describe()</span></code></pre></div>
</div>
<div id="análisis-univariado" class="section level4 hasAnchor" number="4.6.4.3">
<h4><span class="header-section-number">4.6.4.3</span> Análisis univariado<a href="análisis-de-datos-con-python.html#análisis-univariado" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb740"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb740-1"><a href="análisis-de-datos-con-python.html#cb740-1" aria-hidden="true" tabindex="-1"></a>df.info()</span></code></pre></div>
<p>Bien, ahora sabemos que <em>factura_total, punta y tamaño</em> son variables numéricas, por lo que podemos analizar de la misma manera, con un boxplot o histograma.</p>
<div class="sourceCode" id="cb741"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb741-1"><a href="análisis-de-datos-con-python.html#cb741-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafico caja y bigote</span></span>
<span id="cb741-2"><a href="análisis-de-datos-con-python.html#cb741-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-3"><a href="análisis-de-datos-con-python.html#cb741-3" aria-hidden="true" tabindex="-1"></a>fig, g <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">9</span>))</span>
<span id="cb741-4"><a href="análisis-de-datos-con-python.html#cb741-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-5"><a href="análisis-de-datos-con-python.html#cb741-5" aria-hidden="true" tabindex="-1"></a>g1 <span class="op">=</span> sns.boxplot(data<span class="op">=</span>df, </span>
<span id="cb741-6"><a href="análisis-de-datos-con-python.html#cb741-6" aria-hidden="true" tabindex="-1"></a>                 y<span class="op">=</span><span class="st">&#39;total_bill&#39;</span>, </span>
<span id="cb741-7"><a href="análisis-de-datos-con-python.html#cb741-7" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">&#39;royalblue&#39;</span>, </span>
<span id="cb741-8"><a href="análisis-de-datos-con-python.html#cb741-8" aria-hidden="true" tabindex="-1"></a>                 ax<span class="op">=</span>g[<span class="dv">0</span>])</span>
<span id="cb741-9"><a href="análisis-de-datos-con-python.html#cb741-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-10"><a href="análisis-de-datos-con-python.html#cb741-10" aria-hidden="true" tabindex="-1"></a>g1.set_title(<span class="st">&#39;Boxplot of Total_Bill&#39;</span>, size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb741-11"><a href="análisis-de-datos-con-python.html#cb741-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-12"><a href="análisis-de-datos-con-python.html#cb741-12" aria-hidden="true" tabindex="-1"></a>g2 <span class="op">=</span> sns.boxplot(data<span class="op">=</span>df, </span>
<span id="cb741-13"><a href="análisis-de-datos-con-python.html#cb741-13" aria-hidden="true" tabindex="-1"></a>                 y<span class="op">=</span><span class="st">&#39;tip&#39;</span>, </span>
<span id="cb741-14"><a href="análisis-de-datos-con-python.html#cb741-14" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">&#39;coral&#39;</span>, </span>
<span id="cb741-15"><a href="análisis-de-datos-con-python.html#cb741-15" aria-hidden="true" tabindex="-1"></a>                 ax<span class="op">=</span>g[<span class="dv">1</span>])</span>
<span id="cb741-16"><a href="análisis-de-datos-con-python.html#cb741-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-17"><a href="análisis-de-datos-con-python.html#cb741-17" aria-hidden="true" tabindex="-1"></a>g2.set_title(<span class="st">&#39;Boxplot of Tip&#39;</span>, </span>
<span id="cb741-18"><a href="análisis-de-datos-con-python.html#cb741-18" aria-hidden="true" tabindex="-1"></a>             size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb741-19"><a href="análisis-de-datos-con-python.html#cb741-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-20"><a href="análisis-de-datos-con-python.html#cb741-20" aria-hidden="true" tabindex="-1"></a>g3 <span class="op">=</span> sns.boxplot(data<span class="op">=</span>df, </span>
<span id="cb741-21"><a href="análisis-de-datos-con-python.html#cb741-21" aria-hidden="true" tabindex="-1"></a>                 y<span class="op">=</span><span class="st">&#39;size&#39;</span>, </span>
<span id="cb741-22"><a href="análisis-de-datos-con-python.html#cb741-22" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">&#39;gold&#39;</span>, </span>
<span id="cb741-23"><a href="análisis-de-datos-con-python.html#cb741-23" aria-hidden="true" tabindex="-1"></a>                 ax<span class="op">=</span>g[<span class="dv">2</span>])</span>
<span id="cb741-24"><a href="análisis-de-datos-con-python.html#cb741-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb741-25"><a href="análisis-de-datos-con-python.html#cb741-25" aria-hidden="true" tabindex="-1"></a>g3.set_title(<span class="st">&#39;Boxplot of Size&#39;</span>, size<span class="op">=</span><span class="dv">15</span>)<span class="op">;</span></span></code></pre></div>
<p>Los valores atípicos se confirman y tiran de la media hacia arriba. Ver los <em>bigotes</em> más largos para total_bill y propina.</p>
<ul>
<li>Para las variables categóricas, podemos trazar barras con recuentos.</li>
</ul>
<div class="sourceCode" id="cb742"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb742-1"><a href="análisis-de-datos-con-python.html#cb742-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Countplots of categorical variables</span></span>
<span id="cb742-2"><a href="análisis-de-datos-con-python.html#cb742-2" aria-hidden="true" tabindex="-1"></a>fig, g <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">28</span>,<span class="dv">9</span>))</span>
<span id="cb742-3"><a href="análisis-de-datos-con-python.html#cb742-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb742-4"><a href="análisis-de-datos-con-python.html#cb742-4" aria-hidden="true" tabindex="-1"></a>g1 <span class="op">=</span> sns.countplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">&#39;sex&#39;</span>, color<span class="op">=</span><span class="st">&#39;royalblue&#39;</span>, ax<span class="op">=</span>g[<span class="dv">0</span>])</span>
<span id="cb742-5"><a href="análisis-de-datos-con-python.html#cb742-5" aria-hidden="true" tabindex="-1"></a>g1.set_title(<span class="st">&#39;Countplot of Sex&#39;</span>, size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb742-6"><a href="análisis-de-datos-con-python.html#cb742-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb742-7"><a href="análisis-de-datos-con-python.html#cb742-7" aria-hidden="true" tabindex="-1"></a>g2 <span class="op">=</span> sns.countplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">&#39;day&#39;</span>, color<span class="op">=</span><span class="st">&#39;coral&#39;</span>, ax<span class="op">=</span>g[<span class="dv">1</span>])</span>
<span id="cb742-8"><a href="análisis-de-datos-con-python.html#cb742-8" aria-hidden="true" tabindex="-1"></a>g2.set_title(<span class="st">&#39;Countplot of Day&#39;</span>, size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb742-9"><a href="análisis-de-datos-con-python.html#cb742-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb742-10"><a href="análisis-de-datos-con-python.html#cb742-10" aria-hidden="true" tabindex="-1"></a>g3 <span class="op">=</span> sns.countplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">&#39;time&#39;</span>, color<span class="op">=</span><span class="st">&#39;gold&#39;</span>, ax<span class="op">=</span>g[<span class="dv">2</span>])</span>
<span id="cb742-11"><a href="análisis-de-datos-con-python.html#cb742-11" aria-hidden="true" tabindex="-1"></a>g3.set_title(<span class="st">&#39;Countplot of Time&#39;</span>, size<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb742-12"><a href="análisis-de-datos-con-python.html#cb742-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb742-13"><a href="análisis-de-datos-con-python.html#cb742-13" aria-hidden="true" tabindex="-1"></a>g4 <span class="op">=</span> sns.countplot(data<span class="op">=</span>df, x<span class="op">=</span><span class="st">&#39;smoker&#39;</span>, color<span class="op">=</span><span class="st">&#39;gold&#39;</span>, ax<span class="op">=</span>g[<span class="dv">3</span>])</span>
<span id="cb742-14"><a href="análisis-de-datos-con-python.html#cb742-14" aria-hidden="true" tabindex="-1"></a>g4.set_title(<span class="st">&#39;Countplot of Smoker&#39;</span>, size<span class="op">=</span><span class="dv">15</span>)<span class="op">;</span></span></code></pre></div>
</div>
<div id="correlaciones" class="section level4 hasAnchor" number="4.6.4.4">
<h4><span class="header-section-number">4.6.4.4</span> Correlaciones<a href="análisis-de-datos-con-python.html#correlaciones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>La correlación es la medida estadística de la relación lineal entre dos variables numéricas.</p></li>
<li><p>Así que, como vamos a hacer un análisis multivariante, creo que es interesante calcular las correlaciones, porque esto puede orientar tus esfuerzos.</p></li>
<li><p>En caso de que tengas muchas variables, será mejor comprobar principalmente (si no sólo) las que tengan correlaciones más altas.</p></li>
</ul>
<div class="sourceCode" id="cb743"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb743-1"><a href="análisis-de-datos-con-python.html#cb743-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats</span>
<span id="cb743-2"><a href="análisis-de-datos-con-python.html#cb743-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb743-3"><a href="análisis-de-datos-con-python.html#cb743-3" aria-hidden="true" tabindex="-1"></a>stats.shapiro(mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb743-4"><a href="análisis-de-datos-con-python.html#cb743-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb743-5"><a href="análisis-de-datos-con-python.html#cb743-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Test para evaluar normalidad </span></span>
<span id="cb743-6"><a href="análisis-de-datos-con-python.html#cb743-6" aria-hidden="true" tabindex="-1"></a><span class="co"># H0: normal</span></span>
<span id="cb743-7"><a href="análisis-de-datos-con-python.html#cb743-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb743-8"><a href="análisis-de-datos-con-python.html#cb743-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para testear normalidad con un alpha de 0.05 </span></span>
<span id="cb743-9"><a href="análisis-de-datos-con-python.html#cb743-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb743-10"><a href="análisis-de-datos-con-python.html#cb743-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_normality(data):</span>
<span id="cb743-11"><a href="análisis-de-datos-con-python.html#cb743-11" aria-hidden="true" tabindex="-1"></a>  stat, p <span class="op">=</span> stats.shapiro(data)</span>
<span id="cb743-12"><a href="análisis-de-datos-con-python.html#cb743-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> p <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb743-13"><a href="análisis-de-datos-con-python.html#cb743-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&#39;p-Value: </span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">. Not normaly distributed.&#39;</span>)</span>
<span id="cb743-14"><a href="análisis-de-datos-con-python.html#cb743-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span>:</span>
<span id="cb743-15"><a href="análisis-de-datos-con-python.html#cb743-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&#39;p-Value: </span><span class="sc">{</span>p<span class="sc">}</span><span class="ss">. Normaly distributed.&#39;</span>)</span>
<span id="cb743-16"><a href="análisis-de-datos-con-python.html#cb743-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb743-17"><a href="análisis-de-datos-con-python.html#cb743-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Tests</span></span>
<span id="cb743-18"><a href="análisis-de-datos-con-python.html#cb743-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb743-19"><a href="análisis-de-datos-con-python.html#cb743-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> df.select_dtypes(include<span class="op">=</span>[<span class="st">&#39;int&#39;</span>, <span class="st">&#39;float&#39;</span>]).columns:</span>
<span id="cb743-20"><a href="análisis-de-datos-con-python.html#cb743-20" aria-hidden="true" tabindex="-1"></a>  test_normality(df[col])</span></code></pre></div>
<p>La prueba estándar es <em>Pearson</em>, pero si los datos no son normales, el método <em>Spearman</em> es más adecuado.</p>
<div class="sourceCode" id="cb744"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb744-1"><a href="análisis-de-datos-con-python.html#cb744-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data not normal, use Spearman</span></span>
<span id="cb744-2"><a href="análisis-de-datos-con-python.html#cb744-2" aria-hidden="true" tabindex="-1"></a>correlation_calc <span class="op">=</span> df.corr(method<span class="op">=</span><span class="st">&#39;spearman&#39;</span>)</span>
<span id="cb744-3"><a href="análisis-de-datos-con-python.html#cb744-3" aria-hidden="true" tabindex="-1"></a>sns.heatmap( correlation_calc , annot<span class="op">=</span><span class="va">True</span>, cmap<span class="op">=</span><span class="st">&#39;RdBu&#39;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>Si aplicamos el método de Pearson, los resultados no son tan diferentes. Esto tiene dos razones principales: 1. la muestra es pequeña; 2. lo que probablemente afecta más a la distribución son los valores atípicos.</p></li>
<li><p>En el gráfico anterior, vemos que la factura total está más relacionada con la propina que con el tamaño de la fiesta.</p></li>
</ul>
</div>
</div>
<div id="ejemplo-2-datos-con-precios-de-casas" class="section level3 hasAnchor" number="4.6.5">
<h3><span class="header-section-number">4.6.5</span> Ejemplo 2: datos con precios de casas<a href="análisis-de-datos-con-python.html#ejemplo-2-datos-con-precios-de-casas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb745"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb745-1"><a href="análisis-de-datos-con-python.html#cb745-1" aria-hidden="true" tabindex="-1"></a>main</span>
<span id="cb745-2"><a href="análisis-de-datos-con-python.html#cb745-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-3"><a href="análisis-de-datos-con-python.html#cb745-3" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb745-4"><a href="análisis-de-datos-con-python.html#cb745-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-5"><a href="análisis-de-datos-con-python.html#cb745-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">MELBOURNE_HOUSE_PRICES_LESS.csv&quot;</span>)</span>
<span id="cb745-6"><a href="análisis-de-datos-con-python.html#cb745-6" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb745-7"><a href="análisis-de-datos-con-python.html#cb745-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-8"><a href="análisis-de-datos-con-python.html#cb745-8" aria-hidden="true" tabindex="-1"></a>df.info()</span>
<span id="cb745-9"><a href="análisis-de-datos-con-python.html#cb745-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-10"><a href="análisis-de-datos-con-python.html#cb745-10" aria-hidden="true" tabindex="-1"></a>average <span class="op">=</span> df[<span class="st">&#39;Price&#39;</span>].mean()</span>
<span id="cb745-11"><a href="análisis-de-datos-con-python.html#cb745-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(average)</span>
<span id="cb745-12"><a href="análisis-de-datos-con-python.html#cb745-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-13"><a href="análisis-de-datos-con-python.html#cb745-13" aria-hidden="true" tabindex="-1"></a>med <span class="op">=</span> df[<span class="st">&#39;Price&#39;</span>].median()</span>
<span id="cb745-14"><a href="análisis-de-datos-con-python.html#cb745-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(med)</span>
<span id="cb745-15"><a href="análisis-de-datos-con-python.html#cb745-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-16"><a href="análisis-de-datos-con-python.html#cb745-16" aria-hidden="true" tabindex="-1"></a>standard_deviation <span class="op">=</span> df[<span class="st">&#39;Price&#39;</span>].std()</span>
<span id="cb745-17"><a href="análisis-de-datos-con-python.html#cb745-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(standard_deviation)</span>
<span id="cb745-18"><a href="análisis-de-datos-con-python.html#cb745-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-19"><a href="análisis-de-datos-con-python.html#cb745-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Commented out IPython magic to ensure Python compatibility.</span></span>
<span id="cb745-20"><a href="análisis-de-datos-con-python.html#cb745-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb745-21"><a href="análisis-de-datos-con-python.html#cb745-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb745-22"><a href="análisis-de-datos-con-python.html#cb745-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-23"><a href="análisis-de-datos-con-python.html#cb745-23" aria-hidden="true" tabindex="-1"></a><span class="co"># %matplotlib inline</span></span>
<span id="cb745-24"><a href="análisis-de-datos-con-python.html#cb745-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-25"><a href="análisis-de-datos-con-python.html#cb745-25" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">&quot;whitegrid&quot;</span>)</span>
<span id="cb745-26"><a href="análisis-de-datos-con-python.html#cb745-26" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">8</span>))</span>
<span id="cb745-27"><a href="análisis-de-datos-con-python.html#cb745-27" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.boxplot(x<span class="op">=</span><span class="st">&#39;Price&#39;</span>, data<span class="op">=</span>df, orient<span class="op">=</span><span class="st">&quot;v&quot;</span>)</span>
<span id="cb745-28"><a href="análisis-de-datos-con-python.html#cb745-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-29"><a href="análisis-de-datos-con-python.html#cb745-29" aria-hidden="true" tabindex="-1"></a>os.chdir(figuras)</span>
<span id="cb745-30"><a href="análisis-de-datos-con-python.html#cb745-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-31"><a href="análisis-de-datos-con-python.html#cb745-31" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="dv">10</span>))</span>
<span id="cb745-32"><a href="análisis-de-datos-con-python.html#cb745-32" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.boxplot(x<span class="op">=</span><span class="st">&#39;Type&#39;</span>, y<span class="op">=</span><span class="st">&#39;Price&#39;</span>, data<span class="op">=</span>df, orient<span class="op">=</span><span class="st">&quot;v&quot;</span>)</span>
<span id="cb745-33"><a href="análisis-de-datos-con-python.html#cb745-33" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">&quot;f1.pdf&quot;</span>)</span>
<span id="cb745-34"><a href="análisis-de-datos-con-python.html#cb745-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-35"><a href="análisis-de-datos-con-python.html#cb745-35" aria-hidden="true" tabindex="-1"></a>filter_data <span class="op">=</span> df.dropna(subset<span class="op">=</span>[<span class="st">&#39;Price&#39;</span>])</span>
<span id="cb745-36"><a href="análisis-de-datos-con-python.html#cb745-36" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">8</span>))</span>
<span id="cb745-37"><a href="análisis-de-datos-con-python.html#cb745-37" aria-hidden="true" tabindex="-1"></a>sns.distplot(filter_data[<span class="st">&#39;Price&#39;</span>], kde<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb745-38"><a href="análisis-de-datos-con-python.html#cb745-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-39"><a href="análisis-de-datos-con-python.html#cb745-39" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;Type&#39;</span>].unique()</span>
<span id="cb745-40"><a href="análisis-de-datos-con-python.html#cb745-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-41"><a href="análisis-de-datos-con-python.html#cb745-41" aria-hidden="true" tabindex="-1"></a>type_counts <span class="op">=</span> df[<span class="st">&#39;Type&#39;</span>].value_counts()</span>
<span id="cb745-42"><a href="análisis-de-datos-con-python.html#cb745-42" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame(</span>
<span id="cb745-43"><a href="análisis-de-datos-con-python.html#cb745-43" aria-hidden="true" tabindex="-1"></a>                    {<span class="st">&#39;house_type&#39;</span>: type_counts}, </span>
<span id="cb745-44"><a href="análisis-de-datos-con-python.html#cb745-44" aria-hidden="true" tabindex="-1"></a>                   index <span class="op">=</span> [<span class="st">&#39;t&#39;</span>, <span class="st">&#39;h&#39;</span>, <span class="st">&#39;u&#39;</span>]</span>
<span id="cb745-45"><a href="análisis-de-datos-con-python.html#cb745-45" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb745-46"><a href="análisis-de-datos-con-python.html#cb745-46" aria-hidden="true" tabindex="-1"></a>df2.plot.pie(y<span class="op">=</span><span class="st">&#39;house_type&#39;</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>), autopct<span class="op">=</span><span class="st">&#39;</span><span class="sc">%1.1f%%</span><span class="st">&#39;</span>)</span>
<span id="cb745-47"><a href="análisis-de-datos-con-python.html#cb745-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb745-48"><a href="análisis-de-datos-con-python.html#cb745-48" aria-hidden="true" tabindex="-1"></a>sns.<span class="bu">set</span>(style<span class="op">=</span><span class="st">&#39;darkgrid&#39;</span>)</span>
<span id="cb745-49"><a href="análisis-de-datos-con-python.html#cb745-49" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">10</span>))</span>
<span id="cb745-50"><a href="análisis-de-datos-con-python.html#cb745-50" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> sns.countplot(x<span class="op">=</span><span class="st">&#39;Regionname&#39;</span>, data<span class="op">=</span>df)</span></code></pre></div>
</div>
<div id="ejemplo-3" class="section level3 hasAnchor" number="4.6.6">
<h3><span class="header-section-number">4.6.6</span> Ejemplo 3<a href="análisis-de-datos-con-python.html#ejemplo-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb746"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb746-1"><a href="análisis-de-datos-con-python.html#cb746-1" aria-hidden="true" tabindex="-1"></a>os.chdir(datos)</span>
<span id="cb746-2"><a href="análisis-de-datos-con-python.html#cb746-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;house_prices.csv&quot;</span>)</span>
<span id="cb746-3"><a href="análisis-de-datos-con-python.html#cb746-3" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb746-4"><a href="análisis-de-datos-con-python.html#cb746-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-5"><a href="análisis-de-datos-con-python.html#cb746-5" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb746-6"><a href="análisis-de-datos-con-python.html#cb746-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-7"><a href="análisis-de-datos-con-python.html#cb746-7" aria-hidden="true" tabindex="-1"></a>df.shape</span>
<span id="cb746-8"><a href="análisis-de-datos-con-python.html#cb746-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-9"><a href="análisis-de-datos-con-python.html#cb746-9" aria-hidden="true" tabindex="-1"></a>df.info()</span>
<span id="cb746-10"><a href="análisis-de-datos-con-python.html#cb746-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-11"><a href="análisis-de-datos-con-python.html#cb746-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma básico exploratorio</span></span>
<span id="cb746-12"><a href="análisis-de-datos-con-python.html#cb746-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-13"><a href="análisis-de-datos-con-python.html#cb746-13" aria-hidden="true" tabindex="-1"></a>saleprice <span class="op">=</span> df[<span class="st">&#39;SalePrice&#39;</span>]</span>
<span id="cb746-14"><a href="análisis-de-datos-con-python.html#cb746-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-15"><a href="análisis-de-datos-con-python.html#cb746-15" aria-hidden="true" tabindex="-1"></a>mean<span class="op">=</span>saleprice.mean()</span>
<span id="cb746-16"><a href="análisis-de-datos-con-python.html#cb746-16" aria-hidden="true" tabindex="-1"></a>median<span class="op">=</span>saleprice.median()</span>
<span id="cb746-17"><a href="análisis-de-datos-con-python.html#cb746-17" aria-hidden="true" tabindex="-1"></a>mode<span class="op">=</span>saleprice.mode()</span>
<span id="cb746-18"><a href="análisis-de-datos-con-python.html#cb746-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-19"><a href="análisis-de-datos-con-python.html#cb746-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> (<span class="st">&#39;Mean: &#39;</span>,mean,<span class="st">&#39;</span><span class="ch">\n</span><span class="st">Median: &#39;</span>,median,<span class="st">&#39;</span><span class="ch">\n</span><span class="st">Mode: &#39;</span>,mode[<span class="dv">0</span>])</span>
<span id="cb746-20"><a href="análisis-de-datos-con-python.html#cb746-20" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))</span>
<span id="cb746-21"><a href="análisis-de-datos-con-python.html#cb746-21" aria-hidden="true" tabindex="-1"></a>plt.hist(saleprice,bins<span class="op">=</span><span class="dv">100</span>,color<span class="op">=</span><span class="st">&#39;grey&#39;</span>)</span>
<span id="cb746-22"><a href="análisis-de-datos-con-python.html#cb746-22" aria-hidden="true" tabindex="-1"></a>plt.axvline(mean,color<span class="op">=</span><span class="st">&#39;red&#39;</span>,label<span class="op">=</span><span class="st">&#39;Mean&#39;</span>)</span>
<span id="cb746-23"><a href="análisis-de-datos-con-python.html#cb746-23" aria-hidden="true" tabindex="-1"></a>plt.axvline(median,color<span class="op">=</span><span class="st">&#39;yellow&#39;</span>,label<span class="op">=</span><span class="st">&#39;Median&#39;</span>)</span>
<span id="cb746-24"><a href="análisis-de-datos-con-python.html#cb746-24" aria-hidden="true" tabindex="-1"></a>plt.axvline(mode[<span class="dv">0</span>],color<span class="op">=</span><span class="st">&#39;green&#39;</span>,label<span class="op">=</span><span class="st">&#39;Mode&#39;</span>)</span>
<span id="cb746-25"><a href="análisis-de-datos-con-python.html#cb746-25" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;SalePrice&#39;</span>)</span>
<span id="cb746-26"><a href="análisis-de-datos-con-python.html#cb746-26" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Frequency&#39;</span>)</span>
<span id="cb746-27"><a href="análisis-de-datos-con-python.html#cb746-27" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb746-28"><a href="análisis-de-datos-con-python.html#cb746-28" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb746-29"><a href="análisis-de-datos-con-python.html#cb746-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-30"><a href="análisis-de-datos-con-python.html#cb746-30" aria-hidden="true" tabindex="-1"></a>saleprice.cumsum().head()</span></code></pre></div>
<ul>
<li>Dispersión</li>
</ul>
<div class="sourceCode" id="cb747"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb747-1"><a href="análisis-de-datos-con-python.html#cb747-1" aria-hidden="true" tabindex="-1"></a>saleprice.<span class="bu">min</span>()</span>
<span id="cb747-2"><a href="análisis-de-datos-con-python.html#cb747-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-3"><a href="análisis-de-datos-con-python.html#cb747-3" aria-hidden="true" tabindex="-1"></a>saleprice.<span class="bu">max</span>()</span>
<span id="cb747-4"><a href="análisis-de-datos-con-python.html#cb747-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-5"><a href="análisis-de-datos-con-python.html#cb747-5" aria-hidden="true" tabindex="-1"></a>saleprice.<span class="bu">max</span>()<span class="op">-</span>saleprice.<span class="bu">min</span>()</span>
<span id="cb747-6"><a href="análisis-de-datos-con-python.html#cb747-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-7"><a href="análisis-de-datos-con-python.html#cb747-7" aria-hidden="true" tabindex="-1"></a><span class="co">#varianza</span></span>
<span id="cb747-8"><a href="análisis-de-datos-con-python.html#cb747-8" aria-hidden="true" tabindex="-1"></a>saleprice.var()</span>
<span id="cb747-9"><a href="análisis-de-datos-con-python.html#cb747-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-10"><a href="análisis-de-datos-con-python.html#cb747-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb747-11"><a href="análisis-de-datos-con-python.html#cb747-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-12"><a href="análisis-de-datos-con-python.html#cb747-12" aria-hidden="true" tabindex="-1"></a>std <span class="op">=</span> sqrt(saleprice.var())</span>
<span id="cb747-13"><a href="análisis-de-datos-con-python.html#cb747-13" aria-hidden="true" tabindex="-1"></a>std</span>
<span id="cb747-14"><a href="análisis-de-datos-con-python.html#cb747-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-15"><a href="análisis-de-datos-con-python.html#cb747-15" aria-hidden="true" tabindex="-1"></a>saleprice.skew()</span>
<span id="cb747-16"><a href="análisis-de-datos-con-python.html#cb747-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-17"><a href="análisis-de-datos-con-python.html#cb747-17" aria-hidden="true" tabindex="-1"></a>saleprice.kurt()</span>
<span id="cb747-18"><a href="análisis-de-datos-con-python.html#cb747-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-19"><a href="análisis-de-datos-con-python.html#cb747-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Pasamos a numpy para ocupar funciones de numpy</span></span>
<span id="cb747-20"><a href="análisis-de-datos-con-python.html#cb747-20" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> np.array(df[<span class="st">&#39;SalePrice&#39;</span>])</span>
<span id="cb747-21"><a href="análisis-de-datos-con-python.html#cb747-21" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> <span class="bu">sorted</span>(h)</span>
<span id="cb747-22"><a href="análisis-de-datos-con-python.html#cb747-22" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb747-23"><a href="análisis-de-datos-con-python.html#cb747-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Generamos una distribución normal con la misma media y sd</span></span>
<span id="cb747-24"><a href="análisis-de-datos-con-python.html#cb747-24" aria-hidden="true" tabindex="-1"></a>fit <span class="op">=</span> stats.norm.pdf(h, np.mean(h), np.std(h)) </span>
<span id="cb747-25"><a href="análisis-de-datos-con-python.html#cb747-25" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb747-26"><a href="análisis-de-datos-con-python.html#cb747-26" aria-hidden="true" tabindex="-1"></a><span class="co">#plot both series on the histogram</span></span>
<span id="cb747-27"><a href="análisis-de-datos-con-python.html#cb747-27" aria-hidden="true" tabindex="-1"></a>plt.plot(h, fit,<span class="st">&#39;-&#39;</span>,linewidth <span class="op">=</span> <span class="dv">4</span>,label<span class="op">=</span><span class="st">&quot;Normal distribution with same mean and var&quot;</span>)</span>
<span id="cb747-28"><a href="análisis-de-datos-con-python.html#cb747-28" aria-hidden="true" tabindex="-1"></a>plt.hist(h, bins <span class="op">=</span> <span class="dv">100</span>,label<span class="op">=</span><span class="st">&quot;Actual distribution&quot;</span>, density <span class="op">=</span> <span class="va">True</span>)    </span>
<span id="cb747-29"><a href="análisis-de-datos-con-python.html#cb747-29" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb747-30"><a href="análisis-de-datos-con-python.html#cb747-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb747-31"><a href="análisis-de-datos-con-python.html#cb747-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-32"><a href="análisis-de-datos-con-python.html#cb747-32" aria-hidden="true" tabindex="-1"></a>fit</span>
<span id="cb747-33"><a href="análisis-de-datos-con-python.html#cb747-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-34"><a href="análisis-de-datos-con-python.html#cb747-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequeamos correlaciones </span></span>
<span id="cb747-35"><a href="análisis-de-datos-con-python.html#cb747-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-36"><a href="análisis-de-datos-con-python.html#cb747-36" aria-hidden="true" tabindex="-1"></a>corelation<span class="op">=</span>df[[<span class="st">&#39;LotArea&#39;</span>,<span class="st">&#39;GrLivArea&#39;</span>,<span class="st">&#39;GarageArea&#39;</span>,<span class="st">&#39;SalePrice&#39;</span>]].corr()</span>
<span id="cb747-37"><a href="análisis-de-datos-con-python.html#cb747-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span> (corelation)</span>
<span id="cb747-38"><a href="análisis-de-datos-con-python.html#cb747-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-39"><a href="análisis-de-datos-con-python.html#cb747-39" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corelation)</span>
<span id="cb747-40"><a href="análisis-de-datos-con-python.html#cb747-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-41"><a href="análisis-de-datos-con-python.html#cb747-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequeamos covarianza</span></span>
<span id="cb747-42"><a href="análisis-de-datos-con-python.html#cb747-42" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&#39;LotArea&#39;</span>,<span class="st">&#39;GrLivArea&#39;</span>,<span class="st">&#39;GarageArea&#39;</span>,<span class="st">&#39;SalePrice&#39;</span>]].cov().head()</span>
<span id="cb747-43"><a href="análisis-de-datos-con-python.html#cb747-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-44"><a href="análisis-de-datos-con-python.html#cb747-44" aria-hidden="true" tabindex="-1"></a><span class="co"># #50 percentile i.e median</span></span>
<span id="cb747-45"><a href="análisis-de-datos-con-python.html#cb747-45" aria-hidden="true" tabindex="-1"></a><span class="co"># np.percentile(df[&#39;salary&#39;], 50)</span></span>
<span id="cb747-46"><a href="análisis-de-datos-con-python.html#cb747-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-47"><a href="análisis-de-datos-con-python.html#cb747-47" aria-hidden="true" tabindex="-1"></a>saleprice.quantile(<span class="fl">0.5</span>)</span>
<span id="cb747-48"><a href="análisis-de-datos-con-python.html#cb747-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-49"><a href="análisis-de-datos-con-python.html#cb747-49" aria-hidden="true" tabindex="-1"></a><span class="co"># q75 = np.percentile(df[&#39;salary&#39;], 75)</span></span>
<span id="cb747-50"><a href="análisis-de-datos-con-python.html#cb747-50" aria-hidden="true" tabindex="-1"></a><span class="co"># q75</span></span>
<span id="cb747-51"><a href="análisis-de-datos-con-python.html#cb747-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-52"><a href="análisis-de-datos-con-python.html#cb747-52" aria-hidden="true" tabindex="-1"></a>q3 <span class="op">=</span> saleprice.quantile(<span class="fl">0.75</span>)</span>
<span id="cb747-53"><a href="análisis-de-datos-con-python.html#cb747-53" aria-hidden="true" tabindex="-1"></a>q3</span>
<span id="cb747-54"><a href="análisis-de-datos-con-python.html#cb747-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-55"><a href="análisis-de-datos-con-python.html#cb747-55" aria-hidden="true" tabindex="-1"></a><span class="co">#25th percentile</span></span>
<span id="cb747-56"><a href="análisis-de-datos-con-python.html#cb747-56" aria-hidden="true" tabindex="-1"></a><span class="co"># q25 = np.percentile(df[&#39;salary&#39;], 25)</span></span>
<span id="cb747-57"><a href="análisis-de-datos-con-python.html#cb747-57" aria-hidden="true" tabindex="-1"></a>q1 <span class="op">=</span> saleprice.quantile(<span class="fl">0.25</span>)</span>
<span id="cb747-58"><a href="análisis-de-datos-con-python.html#cb747-58" aria-hidden="true" tabindex="-1"></a>q1</span>
<span id="cb747-59"><a href="análisis-de-datos-con-python.html#cb747-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-60"><a href="análisis-de-datos-con-python.html#cb747-60" aria-hidden="true" tabindex="-1"></a><span class="co">#interquartile range</span></span>
<span id="cb747-61"><a href="análisis-de-datos-con-python.html#cb747-61" aria-hidden="true" tabindex="-1"></a>IQR <span class="op">=</span> q3  <span class="op">-</span> q1</span>
<span id="cb747-62"><a href="análisis-de-datos-con-python.html#cb747-62" aria-hidden="true" tabindex="-1"></a>IQR</span>
<span id="cb747-63"><a href="análisis-de-datos-con-python.html#cb747-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb747-64"><a href="análisis-de-datos-con-python.html#cb747-64" aria-hidden="true" tabindex="-1"></a>plt.boxplot(saleprice)</span>
<span id="cb747-65"><a href="análisis-de-datos-con-python.html#cb747-65" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</div>
<div id="ejemplo-4" class="section level3 hasAnchor" number="4.6.7">
<h3><span class="header-section-number">4.6.7</span> Ejemplo 4<a href="análisis-de-datos-con-python.html#ejemplo-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb748"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb748-1"><a href="análisis-de-datos-con-python.html#cb748-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&#39;insurance.csv&#39;</span>)</span>
<span id="cb748-2"><a href="análisis-de-datos-con-python.html#cb748-2" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb748-3"><a href="análisis-de-datos-con-python.html#cb748-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-4"><a href="análisis-de-datos-con-python.html#cb748-4" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb748-5"><a href="análisis-de-datos-con-python.html#cb748-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-6"><a href="análisis-de-datos-con-python.html#cb748-6" aria-hidden="true" tabindex="-1"></a>df.info()</span>
<span id="cb748-7"><a href="análisis-de-datos-con-python.html#cb748-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-8"><a href="análisis-de-datos-con-python.html#cb748-8" aria-hidden="true" tabindex="-1"></a>df.shape</span>
<span id="cb748-9"><a href="análisis-de-datos-con-python.html#cb748-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-10"><a href="análisis-de-datos-con-python.html#cb748-10" aria-hidden="true" tabindex="-1"></a>df.columns</span>
<span id="cb748-11"><a href="análisis-de-datos-con-python.html#cb748-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-12"><a href="análisis-de-datos-con-python.html#cb748-12" aria-hidden="true" tabindex="-1"></a>df.describe()</span>
<span id="cb748-13"><a href="análisis-de-datos-con-python.html#cb748-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-14"><a href="análisis-de-datos-con-python.html#cb748-14" aria-hidden="true" tabindex="-1"></a>df.describe(include<span class="op">=</span><span class="st">&#39;O&#39;</span>)</span>
<span id="cb748-15"><a href="análisis-de-datos-con-python.html#cb748-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-16"><a href="análisis-de-datos-con-python.html#cb748-16" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(df.sex.unique())</span>
<span id="cb748-17"><a href="análisis-de-datos-con-python.html#cb748-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-18"><a href="análisis-de-datos-con-python.html#cb748-18" aria-hidden="true" tabindex="-1"></a>df.isnull().<span class="bu">sum</span>()</span>
<span id="cb748-19"><a href="análisis-de-datos-con-python.html#cb748-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-20"><a href="análisis-de-datos-con-python.html#cb748-20" aria-hidden="true" tabindex="-1"></a>df[df.duplicated(keep<span class="op">=</span><span class="st">&#39;first&#39;</span>)]</span>
<span id="cb748-21"><a href="análisis-de-datos-con-python.html#cb748-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-22"><a href="análisis-de-datos-con-python.html#cb748-22" aria-hidden="true" tabindex="-1"></a>df.drop_duplicates(keep<span class="op">=</span><span class="st">&#39;first&#39;</span>,inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb748-23"><a href="análisis-de-datos-con-python.html#cb748-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-24"><a href="análisis-de-datos-con-python.html#cb748-24" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-25"><a href="análisis-de-datos-con-python.html#cb748-25" aria-hidden="true" tabindex="-1"></a>sns.distplot(df.expenses,color<span class="op">=</span><span class="st">&#39;r&#39;</span>)</span>
<span id="cb748-26"><a href="análisis-de-datos-con-python.html#cb748-26" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Expenses Distribution&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-27"><a href="análisis-de-datos-con-python.html#cb748-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Expenses&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-28"><a href="análisis-de-datos-con-python.html#cb748-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Density&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-29"><a href="análisis-de-datos-con-python.html#cb748-29" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-30"><a href="análisis-de-datos-con-python.html#cb748-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-31"><a href="análisis-de-datos-con-python.html#cb748-31" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-32"><a href="análisis-de-datos-con-python.html#cb748-32" aria-hidden="true" tabindex="-1"></a>sns.histplot(df.age)</span>
<span id="cb748-33"><a href="análisis-de-datos-con-python.html#cb748-33" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Age Distribution&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-34"><a href="análisis-de-datos-con-python.html#cb748-34" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Age&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-35"><a href="análisis-de-datos-con-python.html#cb748-35" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-36"><a href="análisis-de-datos-con-python.html#cb748-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-37"><a href="análisis-de-datos-con-python.html#cb748-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-38"><a href="análisis-de-datos-con-python.html#cb748-38" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-39"><a href="análisis-de-datos-con-python.html#cb748-39" aria-hidden="true" tabindex="-1"></a>plt.hist(df.bmi,color<span class="op">=</span><span class="st">&#39;y&#39;</span>)</span>
<span id="cb748-40"><a href="análisis-de-datos-con-python.html#cb748-40" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;BMI Distribution&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-41"><a href="análisis-de-datos-con-python.html#cb748-41" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-42"><a href="análisis-de-datos-con-python.html#cb748-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-43"><a href="análisis-de-datos-con-python.html#cb748-43" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-44"><a href="análisis-de-datos-con-python.html#cb748-44" aria-hidden="true" tabindex="-1"></a>sns.boxplot(df.expenses)</span>
<span id="cb748-45"><a href="análisis-de-datos-con-python.html#cb748-45" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Distribution Charges&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-46"><a href="análisis-de-datos-con-python.html#cb748-46" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-47"><a href="análisis-de-datos-con-python.html#cb748-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-48"><a href="análisis-de-datos-con-python.html#cb748-48" aria-hidden="true" tabindex="-1"></a>Q1 <span class="op">=</span> df[<span class="st">&#39;expenses&#39;</span>].quantile(<span class="fl">0.25</span>)</span>
<span id="cb748-49"><a href="análisis-de-datos-con-python.html#cb748-49" aria-hidden="true" tabindex="-1"></a>Q3 <span class="op">=</span> df[<span class="st">&#39;expenses&#39;</span>].quantile(<span class="fl">0.75</span>)</span>
<span id="cb748-50"><a href="análisis-de-datos-con-python.html#cb748-50" aria-hidden="true" tabindex="-1"></a>IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb748-51"><a href="análisis-de-datos-con-python.html#cb748-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(IQR)</span>
<span id="cb748-52"><a href="análisis-de-datos-con-python.html#cb748-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-53"><a href="análisis-de-datos-con-python.html#cb748-53" aria-hidden="true" tabindex="-1"></a>df[(df[<span class="st">&#39;expenses&#39;</span>]<span class="op">&lt;</span> Q1<span class="op">-</span><span class="fl">1.5</span><span class="op">*</span> IQR) <span class="op">|</span> (df[<span class="st">&#39;expenses&#39;</span>]<span class="op">&gt;</span> Q3<span class="op">+</span><span class="fl">1.5</span><span class="op">*</span> IQR)]</span>
<span id="cb748-54"><a href="análisis-de-datos-con-python.html#cb748-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-55"><a href="análisis-de-datos-con-python.html#cb748-55" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-56"><a href="análisis-de-datos-con-python.html#cb748-56" aria-hidden="true" tabindex="-1"></a>sns.countplot(x <span class="op">=</span> <span class="st">&#39;sex&#39;</span>, data <span class="op">=</span> df)</span>
<span id="cb748-57"><a href="análisis-de-datos-con-python.html#cb748-57" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Total Number of Male and Female&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-58"><a href="análisis-de-datos-con-python.html#cb748-58" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Sex&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-59"><a href="análisis-de-datos-con-python.html#cb748-59" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-60"><a href="análisis-de-datos-con-python.html#cb748-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-61"><a href="análisis-de-datos-con-python.html#cb748-61" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-62"><a href="análisis-de-datos-con-python.html#cb748-62" aria-hidden="true" tabindex="-1"></a>sns.countplot(df.children)</span>
<span id="cb748-63"><a href="análisis-de-datos-con-python.html#cb748-63" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Children Distribution&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-64"><a href="análisis-de-datos-con-python.html#cb748-64" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Children&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-65"><a href="análisis-de-datos-con-python.html#cb748-65" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-66"><a href="análisis-de-datos-con-python.html#cb748-66" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-67"><a href="análisis-de-datos-con-python.html#cb748-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-68"><a href="análisis-de-datos-con-python.html#cb748-68" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-69"><a href="análisis-de-datos-con-python.html#cb748-69" aria-hidden="true" tabindex="-1"></a>sns.countplot(df.smoker)</span>
<span id="cb748-70"><a href="análisis-de-datos-con-python.html#cb748-70" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Smoker Distribution&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-71"><a href="análisis-de-datos-con-python.html#cb748-71" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Smoker&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-72"><a href="análisis-de-datos-con-python.html#cb748-72" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-73"><a href="análisis-de-datos-con-python.html#cb748-73" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-74"><a href="análisis-de-datos-con-python.html#cb748-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-75"><a href="análisis-de-datos-con-python.html#cb748-75" aria-hidden="true" tabindex="-1"></a>df.smoker.value_counts()</span>
<span id="cb748-76"><a href="análisis-de-datos-con-python.html#cb748-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-77"><a href="análisis-de-datos-con-python.html#cb748-77" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-78"><a href="análisis-de-datos-con-python.html#cb748-78" aria-hidden="true" tabindex="-1"></a>sns.countplot(df.region,palette<span class="op">=</span><span class="st">&#39;Blues&#39;</span>)</span>
<span id="cb748-79"><a href="análisis-de-datos-con-python.html#cb748-79" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Region Distribution&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-80"><a href="análisis-de-datos-con-python.html#cb748-80" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Region&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-81"><a href="análisis-de-datos-con-python.html#cb748-81" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Count&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-82"><a href="análisis-de-datos-con-python.html#cb748-82" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-83"><a href="análisis-de-datos-con-python.html#cb748-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-84"><a href="análisis-de-datos-con-python.html#cb748-84" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-85"><a href="análisis-de-datos-con-python.html#cb748-85" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x<span class="op">=</span><span class="st">&#39;age&#39;</span>,y<span class="op">=</span><span class="st">&#39;expenses&#39;</span>,color<span class="op">=</span><span class="st">&#39;r&#39;</span>,data<span class="op">=</span>df)</span>
<span id="cb748-86"><a href="análisis-de-datos-con-python.html#cb748-86" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Age vs Charges&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb748-87"><a href="análisis-de-datos-con-python.html#cb748-87" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Age&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-88"><a href="análisis-de-datos-con-python.html#cb748-88" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Charges&#39;</span>,size<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb748-89"><a href="análisis-de-datos-con-python.html#cb748-89" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb748-90"><a href="análisis-de-datos-con-python.html#cb748-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-91"><a href="análisis-de-datos-con-python.html#cb748-91" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Correlation between age and charges is : </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(<span class="bu">round</span>(df.corr()[<span class="st">&#39;age&#39;</span>][<span class="st">&#39;expenses&#39;</span>],<span class="dv">3</span>)))</span>
<span id="cb748-92"><a href="análisis-de-datos-con-python.html#cb748-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-93"><a href="análisis-de-datos-con-python.html#cb748-93" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-94"><a href="análisis-de-datos-con-python.html#cb748-94" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">&#39;darkgrid&#39;</span>)</span>
<span id="cb748-95"><a href="análisis-de-datos-con-python.html#cb748-95" aria-hidden="true" tabindex="-1"></a>sns.boxplot(x<span class="op">=</span><span class="st">&#39;smoker&#39;</span>,y<span class="op">=</span><span class="st">&#39;expenses&#39;</span>,data<span class="op">=</span>df)</span>
<span id="cb748-96"><a href="análisis-de-datos-con-python.html#cb748-96" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Smoker vs Expenses&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)<span class="op">;</span></span>
<span id="cb748-97"><a href="análisis-de-datos-con-python.html#cb748-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-98"><a href="análisis-de-datos-con-python.html#cb748-98" aria-hidden="true" tabindex="-1"></a>sns.pairplot(df, </span>
<span id="cb748-99"><a href="análisis-de-datos-con-python.html#cb748-99" aria-hidden="true" tabindex="-1"></a>                 markers<span class="op">=</span><span class="st">&quot;+&quot;</span>,</span>
<span id="cb748-100"><a href="análisis-de-datos-con-python.html#cb748-100" aria-hidden="true" tabindex="-1"></a>                 diag_kind<span class="op">=</span><span class="st">&quot;kde&quot;</span>,</span>
<span id="cb748-101"><a href="análisis-de-datos-con-python.html#cb748-101" aria-hidden="true" tabindex="-1"></a>                 kind<span class="op">=</span><span class="st">&#39;reg&#39;</span>,</span>
<span id="cb748-102"><a href="análisis-de-datos-con-python.html#cb748-102" aria-hidden="true" tabindex="-1"></a>                 plot_kws<span class="op">=</span>{<span class="st">&#39;line_kws&#39;</span>:{<span class="st">&#39;color&#39;</span>:<span class="st">&#39;#aec6cf&#39;</span>}, </span>
<span id="cb748-103"><a href="análisis-de-datos-con-python.html#cb748-103" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&#39;scatter_kws&#39;</span>: {<span class="st">&#39;alpha&#39;</span>: <span class="fl">0.7</span>, </span>
<span id="cb748-104"><a href="análisis-de-datos-con-python.html#cb748-104" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">&#39;color&#39;</span>: <span class="st">&#39;red&#39;</span>}},</span>
<span id="cb748-105"><a href="análisis-de-datos-con-python.html#cb748-105" aria-hidden="true" tabindex="-1"></a>                 corner<span class="op">=</span><span class="va">True</span>)<span class="op">;</span></span>
<span id="cb748-106"><a href="análisis-de-datos-con-python.html#cb748-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-107"><a href="análisis-de-datos-con-python.html#cb748-107" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">6</span>))</span>
<span id="cb748-108"><a href="análisis-de-datos-con-python.html#cb748-108" aria-hidden="true" tabindex="-1"></a>sns.heatmap(df.corr(),annot<span class="op">=</span><span class="va">True</span>,square<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb748-109"><a href="análisis-de-datos-con-python.html#cb748-109" aria-hidden="true" tabindex="-1"></a>            cmap<span class="op">=</span><span class="st">&#39;RdBu&#39;</span>,</span>
<span id="cb748-110"><a href="análisis-de-datos-con-python.html#cb748-110" aria-hidden="true" tabindex="-1"></a>            vmax<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb748-111"><a href="análisis-de-datos-con-python.html#cb748-111" aria-hidden="true" tabindex="-1"></a>            vmin<span class="op">=-</span><span class="dv">1</span>)</span>
<span id="cb748-112"><a href="análisis-de-datos-con-python.html#cb748-112" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Correlations Between Variables&#39;</span>,size<span class="op">=</span><span class="dv">18</span>)<span class="op">;</span></span>
<span id="cb748-113"><a href="análisis-de-datos-con-python.html#cb748-113" aria-hidden="true" tabindex="-1"></a>plt.xticks(size<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb748-114"><a href="análisis-de-datos-con-python.html#cb748-114" aria-hidden="true" tabindex="-1"></a>plt.yticks(size<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb748-115"><a href="análisis-de-datos-con-python.html#cb748-115" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
</div>
<div id="ejemplo-5-desigualdad-de-ingreso-usando-gapminder" class="section level3 hasAnchor" number="4.6.8">
<h3><span class="header-section-number">4.6.8</span> Ejemplo 5 : Desigualdad de ingreso usando Gapminder<a href="análisis-de-datos-con-python.html#ejemplo-5-desigualdad-de-ingreso-usando-gapminder" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<strong>Table of Contents</strong>
<ul>
<li>
<a href="#intro">Introducción</a>
</li>
<li>
<a href="#wrangling">Data Wrangling</a>
</li>
<li>
<a href="#eda">Exploratory Data Analysis</a>
</li>
<li>
<a href="#conclusions">Conclusions</a>
</li>
</ul>
<p><a id='intro'></a></p>
<div id="introducción-1" class="section level4 hasAnchor" number="4.6.8.1">
<h4><span class="header-section-number">4.6.8.1</span> Introducción<a href="análisis-de-datos-con-python.html#introducción-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Este análisis se centra en la desigualdad de ingresos medida por el <em>Índice de Gini</em> y su asociación con métricas económicas como el PIB per cápita, las inversiones como % del PIB y los ingresos fiscales como % del PIB. También se incluye una métrica política, el índice de democracia de la EIU.</p>
<p>Esta investigación puede considerarse un punto de partida para cuestiones complejas como</p>
<ol style="list-style-type: decimal">
<li>¿Está asociado un mayor ingreso fiscal como % del PIB con una menor desigualdad de ingresos?</li>
<li>¿Se asocia un mayor índice de democracia de la EIU con una menor desigualdad de ingresos?</li>
<li>¿Se asocia un mayor PIB per cápita con una menor desigualdad de ingresos?</li>
<li>¿Se asocian las inversiones más altas como porcentaje del PIB con una menor desigualdad de ingresos?</li>
</ol>
<p>Este análisis utiliza el conjunto de datos gapminder de la Fundación Gapminder. La Fundación Gapminder es una empresa sin ánimo de lucro registrada en Estocolmo, Suecia, que promueve el desarrollo global sostenible y la consecución de los Objetivos de Desarrollo del Milenio de las Naciones Unidas mediante un mayor uso y comprensión de las estadísticas y otra información sobre el desarrollo social, económico y medioambiental a nivel local, nacional y global.</p>
<p>*El <a href="https://en.wikipedia.org/wiki/Gini_coefficient">Índice de Gini</a> es una medida de dispersión estadística que pretende representar la distribución de la renta o la riqueza de los residentes de una nación, y es la medida de desigualdad más utilizada. Fue desarrollado por el estadístico y sociólogo italiano Corrado Gini y publicado en su documento de 1912 Variabilidad y Mutabilidad.</p>
<div class="sourceCode" id="cb749"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb749-1"><a href="análisis-de-datos-con-python.html#cb749-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb749-2"><a href="análisis-de-datos-con-python.html#cb749-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb749-3"><a href="análisis-de-datos-con-python.html#cb749-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb749-4"><a href="análisis-de-datos-con-python.html#cb749-4" aria-hidden="true" tabindex="-1"></a><span class="co">#import plotly </span></span>
<span id="cb749-5"><a href="análisis-de-datos-con-python.html#cb749-5" aria-hidden="true" tabindex="-1"></a><span class="co">#import plotly.express as px</span></span>
<span id="cb749-6"><a href="análisis-de-datos-con-python.html#cb749-6" aria-hidden="true" tabindex="-1"></a><span class="co">#%matplotlib inline</span></span>
<span id="cb749-7"><a href="análisis-de-datos-con-python.html#cb749-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb749-8"><a href="análisis-de-datos-con-python.html#cb749-8" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">&#39;display.max_rows&#39;</span>, <span class="dv">10</span>)</span>
<span id="cb749-9"><a href="análisis-de-datos-con-python.html#cb749-9" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_columns <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb749-10"><a href="análisis-de-datos-con-python.html#cb749-10" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">&quot;display.precision&quot;</span>, <span class="dv">2</span>)</span></code></pre></div>
<p><a id='wrangling'></a></p>
</div>
<div id="data-wrangling" class="section level4 hasAnchor" number="4.6.8.2">
<h4><span class="header-section-number">4.6.8.2</span> Data Wrangling<a href="análisis-de-datos-con-python.html#data-wrangling" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>En esta sección del informe se han cargado los datos, se ha comprobado su limpieza y se han comunicado los resultados.
##### Propiedades generales</p>
<p>El conjunto de datos contiene datos de los siguientes conjuntos de datos de GapMinder:</p>
<ol style="list-style-type: decimal">
<li>Índice de democracia de la EIU:</li>
</ol>
<p>“Este índice de democracia utiliza los datos de Economist Inteligence Unit para expresar la calidad de las democracias como un número entre 0 y 100. Se basa en 60 aspectos diferentes de las sociedades que son relevantes para la democracia: sufragio universal para todos los adultos, participación de los votantes, percepción de la protección de los derechos humanos y libertad para formar organizaciones y partidos.
El índice de democracia se calcula a partir de los 60 indicadores, divididos en cinco”“subíndices”“, que son</p>
<ol style="list-style-type: decimal">
<li>Índice de pluralismo electoral;</li>
<li>Índice de gobierno;</li>
<li>Índice de participación políticam;</li>
<li>Índice de cultura política;</li>
<li>Índice de libertad civil.</li>
</ol>
<p>Los subíndices se basan en la suma de las puntuaciones de aproximadamente 12 indicadores por subíndice, convertidos en una puntuación entre 0 y 100.
(The Economist publica el índice con una escala de 0 a 10, pero Gapminder lo ha convertido en 0 a 100 para facilitar su comunicación en forma de porcentaje)“.
<a href="https://docs.google.com/spreadsheets/d/1d0noZrwAWxNBTDSfDgG06_aLGWUz4R6fgDhRaUZbDzE/edit#gid=935776888" class="uri">https://docs.google.com/spreadsheets/d/1d0noZrwAWxNBTDSfDgG06_aLGWUz4R6fgDhRaUZbDzE/edit#gid=935776888</a></p>
<ol start="2" style="list-style-type: decimal">
<li><p>Ingresos: PIB per cápita, dólares constantes de la PPA:
El PIB per cápita mide el valor de todo lo producido en un país durante un año, dividido por el número de personas. La unidad está en dólares internacionales, a precios fijos de 2011. Los datos se ajustan para tener en cuenta la inflación y las diferencias en el coste de la vida entre los países, los llamados dólares PPA. El final de la serie temporal, entre 1990 y 2016, utiliza los últimos datos del PIB per cápita del Banco Mundial, procedentes de sus Indicadores de Desarrollo Mundial. Para retroceder en el tiempo antes de que la serie del Banco Mundial comience en 1990, hemos utilizado varias fuentes, como Angus Maddison.
<a href="https://www.gapminder.org/data/documentation/gd001/" class="uri">https://www.gapminder.org/data/documentation/gd001/</a></p></li>
<li><p>Inversiones (% del PIB)
La formación de capital es un término utilizado para describir la acumulación neta de capital durante un período contable para un país determinado. El término se refiere a las adiciones de bienes de capital, como equipos, herramientas, activos de transporte y electricidad. Los países necesitan bienes de capital para sustituir los más antiguos que se utilizan para producir bienes y servicios. Si un país no puede sustituir los bienes de capital cuando llegan al final de su vida útil, la producción disminuye. En general, cuanto mayor sea la formación de capital de una economía, más rápido podrá crecer su renta agregada.</p></li>
<li><p>Ingresos fiscales (% del PIB)
Se refiere a las transferencias obligatorias al gobierno central para fines públicos. No incluye la seguridad social.
<a href="https://data.worldbank.org/indicator/GC.TAX.TOTL.GD.ZS" class="uri">https://data.worldbank.org/indicator/GC.TAX.TOTL.GD.ZS</a></p></li>
</ol>
<div id="initial-analysis-of-the-datasets" class="section level5 hasAnchor" number="4.6.8.2.1">
<h5><span class="header-section-number">4.6.8.2.1</span> Initial Analysis of the Datasets<a href="análisis-de-datos-con-python.html#initial-analysis-of-the-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><strong>Ingresos fiscales en porcentaje del PIB</strong></p>
<p>A continuación se presentan los resultados de un primer análisis:</p>
<p>Los archivos csv para este análisis se descargaron del sitio web de GapMinder. Pueden encontrarse aquí:</p>
<p><a href="https://github.com/psterk1/data_analytics/tree/master/intro/final_project" class="uri">https://github.com/psterk1/data_analytics/tree/master/intro/final_project</a></p>
<p>El primer archivo es ‘tax_revenue_percent_of_gdp.csv’</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb750-1"><a href="análisis-de-datos-con-python.html#cb750-1" aria-hidden="true" tabindex="-1"></a>tax <span class="op">=</span> pd.read_csv(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">tax_revenue_percent_of_gdp.csv&quot;</span>)</span>
<span id="cb750-2"><a href="análisis-de-datos-con-python.html#cb750-2" aria-hidden="true" tabindex="-1"></a>tax</span>
<span id="cb750-3"><a href="análisis-de-datos-con-python.html#cb750-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb750-4"><a href="análisis-de-datos-con-python.html#cb750-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of rows: &quot;</span>, tax.shape[<span class="dv">0</span>])</span>
<span id="cb750-5"><a href="análisis-de-datos-con-python.html#cb750-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of columns: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(tax.shape[<span class="dv">1</span>]))</span>
<span id="cb750-6"><a href="análisis-de-datos-con-python.html#cb750-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of duplicates: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(tax.duplicated().<span class="bu">sum</span>()))</span>
<span id="cb750-7"><a href="análisis-de-datos-con-python.html#cb750-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;datatypes:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb750-8"><a href="análisis-de-datos-con-python.html#cb750-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tax.dtypes)</span>
<span id="cb750-9"><a href="análisis-de-datos-con-python.html#cb750-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Sample:&quot;</span>)</span>
<span id="cb750-10"><a href="análisis-de-datos-con-python.html#cb750-10" aria-hidden="true" tabindex="-1"></a>tax.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Un primer análisis reveló que aproximadamente la mitad de los años con &gt; 0,50 valores perdidos. Véase más abajo:</p>
<p>Debido a los resultados que se presentan a continuación, los años con el menor porcentaje de valores nulos se encontraban en el rango de 10 años de 2006 a 2016. En consecuencia, se seleccionó este intervalo anual para el resto de los conjuntos de datos</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb751-1"><a href="análisis-de-datos-con-python.html#cb751-1" aria-hidden="true" tabindex="-1"></a>tax_null <span class="op">=</span> tax.isnull().<span class="bu">sum</span>()<span class="op">/</span>tax.shape[<span class="dv">0</span>]</span>
<span id="cb751-2"><a href="análisis-de-datos-con-python.html#cb751-2" aria-hidden="true" tabindex="-1"></a>tax_null.to_frame().transpose()</span></code></pre></div>
<p><strong>Renta por persona - PIB per cápita</strong></p>
<p>A continuación se presentan los resultados de un primer análisis:</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb752-1"><a href="análisis-de-datos-con-python.html#cb752-1" aria-hidden="true" tabindex="-1"></a>income <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">income_per_person_gdppercapita_ppp_inflation_adjusted.csv&#39;</span>)</span>
<span id="cb752-2"><a href="análisis-de-datos-con-python.html#cb752-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-3"><a href="análisis-de-datos-con-python.html#cb752-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of rows: &quot;</span>, income.shape[<span class="dv">0</span>])</span>
<span id="cb752-4"><a href="análisis-de-datos-con-python.html#cb752-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of columns: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(income.shape[<span class="dv">1</span>]))</span>
<span id="cb752-5"><a href="análisis-de-datos-con-python.html#cb752-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of duplicates: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(income.duplicated().<span class="bu">sum</span>()))</span>
<span id="cb752-6"><a href="análisis-de-datos-con-python.html#cb752-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;datatypes:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb752-7"><a href="análisis-de-datos-con-python.html#cb752-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(income.dtypes)</span>
<span id="cb752-8"><a href="análisis-de-datos-con-python.html#cb752-8" aria-hidden="true" tabindex="-1"></a>income.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Los resultados siguientes muestran que no hay nulos.</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb753-1"><a href="análisis-de-datos-con-python.html#cb753-1" aria-hidden="true" tabindex="-1"></a>income_null <span class="op">=</span> income.isnull().<span class="bu">sum</span>()<span class="op">/</span>income.shape[<span class="dv">0</span>]</span>
<span id="cb753-2"><a href="análisis-de-datos-con-python.html#cb753-2" aria-hidden="true" tabindex="-1"></a>income_null.to_frame().transpose()</span></code></pre></div>
<p><strong>Inversión Porcentaje del PIB</strong></p>
<p>A continuación se presentan los resultados de un primer análisis:</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb754-1"><a href="análisis-de-datos-con-python.html#cb754-1" aria-hidden="true" tabindex="-1"></a>invest <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">investments_percent_of_gdp.csv&#39;</span>)</span>
<span id="cb754-2"><a href="análisis-de-datos-con-python.html#cb754-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb754-3"><a href="análisis-de-datos-con-python.html#cb754-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of rows: &quot;</span>, invest.shape[<span class="dv">0</span>])</span>
<span id="cb754-4"><a href="análisis-de-datos-con-python.html#cb754-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of columns: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(invest.shape[<span class="dv">1</span>]))</span>
<span id="cb754-5"><a href="análisis-de-datos-con-python.html#cb754-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of duplicates: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(invest.duplicated().<span class="bu">sum</span>()))</span>
<span id="cb754-6"><a href="análisis-de-datos-con-python.html#cb754-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;datatypes:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb754-7"><a href="análisis-de-datos-con-python.html#cb754-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(invest.dtypes)</span>
<span id="cb754-8"><a href="análisis-de-datos-con-python.html#cb754-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Sample:&quot;</span>)</span>
<span id="cb754-9"><a href="análisis-de-datos-con-python.html#cb754-9" aria-hidden="true" tabindex="-1"></a>invest.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Los resultados que aparecen a continuación muestran que los años con el menor porcentaje de valores nulos se encontraban en el intervalo de 10 años comprendido entre 2006 y 2016. En consecuencia, se seleccionó este intervalo anual para el resto de los conjuntos de datos.</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb755-1"><a href="análisis-de-datos-con-python.html#cb755-1" aria-hidden="true" tabindex="-1"></a>invest_null <span class="op">=</span> invest.isnull().<span class="bu">sum</span>()<span class="op">/</span>invest.shape[<span class="dv">0</span>]</span>
<span id="cb755-2"><a href="análisis-de-datos-con-python.html#cb755-2" aria-hidden="true" tabindex="-1"></a>invest_null.to_frame().transpose()</span></code></pre></div>
<p><strong>Índice de Democracia de la EIU</strong></p>
<p>A continuación se presentan los resultados del análisis inicial:</p>
<div class="sourceCode" id="cb756"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb756-1"><a href="análisis-de-datos-con-python.html#cb756-1" aria-hidden="true" tabindex="-1"></a>demo <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">demox_eiu.csv&#39;</span>)</span>
<span id="cb756-2"><a href="análisis-de-datos-con-python.html#cb756-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb756-3"><a href="análisis-de-datos-con-python.html#cb756-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of rows: &quot;</span>, demo.shape[<span class="dv">0</span>])</span>
<span id="cb756-4"><a href="análisis-de-datos-con-python.html#cb756-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of columns: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(demo.shape[<span class="dv">1</span>]))</span>
<span id="cb756-5"><a href="análisis-de-datos-con-python.html#cb756-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of duplicates: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(demo.duplicated().<span class="bu">sum</span>()))</span>
<span id="cb756-6"><a href="análisis-de-datos-con-python.html#cb756-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;datatypes:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb756-7"><a href="análisis-de-datos-con-python.html#cb756-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(demo.dtypes)</span>
<span id="cb756-8"><a href="análisis-de-datos-con-python.html#cb756-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Sample:&quot;</span>)</span>
<span id="cb756-9"><a href="análisis-de-datos-con-python.html#cb756-9" aria-hidden="true" tabindex="-1"></a>demo.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Los resultados que aparecen a continuación muestran que no hay nulos en el conjunto de datos.</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb757-1"><a href="análisis-de-datos-con-python.html#cb757-1" aria-hidden="true" tabindex="-1"></a>demo_null <span class="op">=</span> demo.isnull().<span class="bu">sum</span>()<span class="op">/</span>demo.shape[<span class="dv">0</span>]</span>
<span id="cb757-2"><a href="análisis-de-datos-con-python.html#cb757-2" aria-hidden="true" tabindex="-1"></a>demo_null.to_frame().transpose()</span></code></pre></div>
<p><strong>Conjunto de datos de Gini</strong></p>
<p>A continuación se muestran los resultados del análisis inicial:</p>
<div class="sourceCode" id="cb758"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb758-1"><a href="análisis-de-datos-con-python.html#cb758-1" aria-hidden="true" tabindex="-1"></a>gini <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">gini.csv&#39;</span>)</span>
<span id="cb758-2"><a href="análisis-de-datos-con-python.html#cb758-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb758-3"><a href="análisis-de-datos-con-python.html#cb758-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of rows: &quot;</span>, gini.shape[<span class="dv">0</span>])</span>
<span id="cb758-4"><a href="análisis-de-datos-con-python.html#cb758-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of columns: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(gini.shape[<span class="dv">1</span>]))</span>
<span id="cb758-5"><a href="análisis-de-datos-con-python.html#cb758-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of duplicates: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(gini.duplicated().<span class="bu">sum</span>()))</span>
<span id="cb758-6"><a href="análisis-de-datos-con-python.html#cb758-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;datatypes:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb758-7"><a href="análisis-de-datos-con-python.html#cb758-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gini.dtypes)</span>
<span id="cb758-8"><a href="análisis-de-datos-con-python.html#cb758-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Sample:&quot;</span>)</span>
<span id="cb758-9"><a href="análisis-de-datos-con-python.html#cb758-9" aria-hidden="true" tabindex="-1"></a>gini.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Los resultados que aparecen a continuación muestran que no hay nulos en el conjunto de datos.</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb759-1"><a href="análisis-de-datos-con-python.html#cb759-1" aria-hidden="true" tabindex="-1"></a>gini_null <span class="op">=</span> gini.isnull().<span class="bu">sum</span>()<span class="op">/</span>gini.shape[<span class="dv">0</span>]</span>
<span id="cb759-2"><a href="análisis-de-datos-con-python.html#cb759-2" aria-hidden="true" tabindex="-1"></a>gini_null.to_frame().transpose()</span></code></pre></div>
</div>
<div id="conclusiones-y-próximos-pasos" class="section level5 hasAnchor" number="4.6.8.2.2">
<h5><span class="header-section-number">4.6.8.2.2</span> Conclusiones y próximos pasos<a href="análisis-de-datos-con-python.html#conclusiones-y-próximos-pasos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A continuación se exponen las conclusiones del análisis inicial:</p>
<ol style="list-style-type: decimal">
<li>Dado que el Índice de Democracia de la EIU solo tiene datos para los años 2006 - 2018, se seleccionará un rango de años similar para los otros conjuntos de datos.</li>
<li>El porcentaje de nulos en los ingresos fiscales como porcentaje del PIB fue menor entre los años 2006 y 2016. La mayoría de los valores fueron nulos para 2017. Como resultado de esto, más el resultado en 1. anterior, el período de años 2006 - 2016 será seleccionado para este conjunto de datos.</li>
</ol>
<p>Próximos pasos</p>
<ol style="list-style-type: decimal">
<li>Los conjuntos de datos anteriores tendrán la columna del país más los años 2006 - 2016.</li>
<li><ol start="2" style="list-style-type: decimal">
<li>Los conjuntos de datos serán pivotados para tener el continente, el país, el año y los conjuntos de datos anteriores. A continuación se muestra un ejemplo de cómo será el conjunto de datos combinado final:</li>
</ol></li>
</ol>
<table>
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="5%" />
<col width="11%" />
<col width="22%" />
<col width="15%" />
<col width="11%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th>continent</th>
<th>country</th>
<th>year</th>
<th>demox_eiu</th>
<th>income_per_person</th>
<th>invest_%_gdp</th>
<th>tax_%_gdp</th>
<th>gini_index</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Asia</td>
<td>Afghanistan</td>
<td>2006</td>
<td>30.6</td>
<td>1120</td>
<td>23.40</td>
<td>6.88</td>
<td>36.8</td>
</tr>
<tr class="even">
<td>Asia</td>
<td>Afghanistan</td>
<td>2007</td>
<td>30.4</td>
<td>1250</td>
<td>19.90</td>
<td>5.23</td>
<td>36.8</td>
</tr>
<tr class="odd">
<td>Asia</td>
<td>Afghanistan</td>
<td>2008</td>
<td>30.2</td>
<td>1270</td>
<td>18.90</td>
<td>6.04</td>
<td>36.8</td>
</tr>
</tbody>
</table>
</div>
<div id="reorganizamos-los-datos" class="section level5 hasAnchor" number="4.6.8.2.3">
<h5><span class="header-section-number">4.6.8.2.3</span> Reorganizamos los datos<a href="análisis-de-datos-con-python.html#reorganizamos-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>EIU Democracy Index</p>
<div class="sourceCode" id="cb760"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb760-1"><a href="análisis-de-datos-con-python.html#cb760-1" aria-hidden="true" tabindex="-1"></a>demo_last_10 <span class="op">=</span> demo.iloc[:, :<span class="op">-</span><span class="dv">2</span>]</span>
<span id="cb760-2"><a href="análisis-de-datos-con-python.html#cb760-2" aria-hidden="true" tabindex="-1"></a>demo_last_10.head(<span class="dv">3</span>)</span>
<span id="cb760-3"><a href="análisis-de-datos-con-python.html#cb760-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb760-4"><a href="análisis-de-datos-con-python.html#cb760-4" aria-hidden="true" tabindex="-1"></a>demo_last_10 <span class="op">=</span> demo_last_10.melt(id_vars<span class="op">=</span>[<span class="st">&#39;country&#39;</span>], var_name<span class="op">=</span><span class="st">&#39;year&#39;</span>, value_name<span class="op">=</span><span class="st">&#39;demox_eiu&#39;</span>)</span>
<span id="cb760-5"><a href="análisis-de-datos-con-python.html#cb760-5" aria-hidden="true" tabindex="-1"></a>demo_last_10.sort_values([<span class="st">&#39;country&#39;</span>,<span class="st">&#39;year&#39;</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb760-6"><a href="análisis-de-datos-con-python.html#cb760-6" aria-hidden="true" tabindex="-1"></a>demo_last_10.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Income Per Person (GDP per Capita)</p>
<div class="sourceCode" id="cb761"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb761-1"><a href="análisis-de-datos-con-python.html#cb761-1" aria-hidden="true" tabindex="-1"></a>income_last_10 <span class="op">=</span> income.iloc[:, np.r_[:<span class="dv">1</span>, <span class="dv">207</span>:<span class="dv">218</span>]]</span>
<span id="cb761-2"><a href="análisis-de-datos-con-python.html#cb761-2" aria-hidden="true" tabindex="-1"></a>income_last_10</span>
<span id="cb761-3"><a href="análisis-de-datos-con-python.html#cb761-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb761-4"><a href="análisis-de-datos-con-python.html#cb761-4" aria-hidden="true" tabindex="-1"></a>income_last_10 <span class="op">=</span> income_last_10.melt(id_vars<span class="op">=</span>[<span class="st">&#39;country&#39;</span>], var_name<span class="op">=</span><span class="st">&#39;year&#39;</span>, value_name<span class="op">=</span><span class="st">&#39;income_per_person&#39;</span>)</span>
<span id="cb761-5"><a href="análisis-de-datos-con-python.html#cb761-5" aria-hidden="true" tabindex="-1"></a>income_last_10.sort_values([<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb761-6"><a href="análisis-de-datos-con-python.html#cb761-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb761-7"><a href="análisis-de-datos-con-python.html#cb761-7" aria-hidden="true" tabindex="-1"></a>income_last_10.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Investment Percent of GDP</p>
<div class="sourceCode" id="cb762"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb762-1"><a href="análisis-de-datos-con-python.html#cb762-1" aria-hidden="true" tabindex="-1"></a>invest_last_10 <span class="op">=</span> invest.iloc[:, np.r_[:<span class="dv">1</span>, <span class="dv">47</span>:<span class="dv">58</span>]]</span>
<span id="cb762-2"><a href="análisis-de-datos-con-python.html#cb762-2" aria-hidden="true" tabindex="-1"></a>invest_last_10 <span class="op">=</span> invest_last_10.melt(id_vars<span class="op">=</span>[<span class="st">&#39;country&#39;</span>], var_name<span class="op">=</span><span class="st">&#39;year&#39;</span>, value_name<span class="op">=</span><span class="st">&#39;invest_%_gdp&#39;</span>)</span>
<span id="cb762-3"><a href="análisis-de-datos-con-python.html#cb762-3" aria-hidden="true" tabindex="-1"></a>invest_last_10.sort_values([<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb762-4"><a href="análisis-de-datos-con-python.html#cb762-4" aria-hidden="true" tabindex="-1"></a>invest_last_10.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Tax Revenue Percent of GDP</p>
<div class="sourceCode" id="cb763"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb763-1"><a href="análisis-de-datos-con-python.html#cb763-1" aria-hidden="true" tabindex="-1"></a>tax_last_10 <span class="op">=</span> tax.iloc[:, np.r_[:<span class="dv">1</span>, <span class="dv">35</span>:<span class="dv">46</span>]]</span>
<span id="cb763-2"><a href="análisis-de-datos-con-python.html#cb763-2" aria-hidden="true" tabindex="-1"></a>tax_last_10 <span class="op">=</span> tax_last_10.melt(id_vars<span class="op">=</span>[<span class="st">&#39;country&#39;</span>], var_name<span class="op">=</span><span class="st">&#39;year&#39;</span>, value_name<span class="op">=</span><span class="st">&#39;tax_%_gdp&#39;</span>)</span>
<span id="cb763-3"><a href="análisis-de-datos-con-python.html#cb763-3" aria-hidden="true" tabindex="-1"></a>tax_last_10.sort_values([<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb763-4"><a href="análisis-de-datos-con-python.html#cb763-4" aria-hidden="true" tabindex="-1"></a>tax_last_10.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Gini Index</p>
<div class="sourceCode" id="cb764"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb764-1"><a href="análisis-de-datos-con-python.html#cb764-1" aria-hidden="true" tabindex="-1"></a>gini_last_10 <span class="op">=</span> gini.iloc[:, np.r_[:<span class="dv">1</span>, <span class="dv">207</span>:<span class="dv">218</span>]]</span>
<span id="cb764-2"><a href="análisis-de-datos-con-python.html#cb764-2" aria-hidden="true" tabindex="-1"></a>gini_last_10 <span class="op">=</span> gini_last_10.melt(id_vars<span class="op">=</span>[<span class="st">&#39;country&#39;</span>], var_name<span class="op">=</span><span class="st">&#39;year&#39;</span>, value_name<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>)</span>
<span id="cb764-3"><a href="análisis-de-datos-con-python.html#cb764-3" aria-hidden="true" tabindex="-1"></a>gini_last_10.sort_values(by<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb764-4"><a href="análisis-de-datos-con-python.html#cb764-4" aria-hidden="true" tabindex="-1"></a>gini_last_10.head(<span class="dv">3</span>)</span></code></pre></div>
<p>Juntamos las bases de datos</p>
<div class="sourceCode" id="cb765"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb765-1"><a href="análisis-de-datos-con-python.html#cb765-1" aria-hidden="true" tabindex="-1"></a>combined <span class="op">=</span> demo_last_10.merge(income_last_10, left_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], right_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>])</span>
<span id="cb765-2"><a href="análisis-de-datos-con-python.html#cb765-2" aria-hidden="true" tabindex="-1"></a>combined <span class="op">=</span> combined.merge(invest_last_10, left_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], right_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>])</span>
<span id="cb765-3"><a href="análisis-de-datos-con-python.html#cb765-3" aria-hidden="true" tabindex="-1"></a>combined <span class="op">=</span> combined.merge(tax_last_10, left_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], right_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>])</span>
<span id="cb765-4"><a href="análisis-de-datos-con-python.html#cb765-4" aria-hidden="true" tabindex="-1"></a>combined <span class="op">=</span> combined.merge(gini_last_10, left_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>], right_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>])</span>
<span id="cb765-5"><a href="análisis-de-datos-con-python.html#cb765-5" aria-hidden="true" tabindex="-1"></a>combined</span>
<span id="cb765-6"><a href="análisis-de-datos-con-python.html#cb765-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb765-7"><a href="análisis-de-datos-con-python.html#cb765-7" aria-hidden="true" tabindex="-1"></a>cont <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">continent_country.csv&#39;</span>)</span>
<span id="cb765-8"><a href="análisis-de-datos-con-python.html#cb765-8" aria-hidden="true" tabindex="-1"></a>cont</span></code></pre></div>
<p>Juntamos continente con país. En este paso, emparejamos cada país con su continente. Esto permitirá el análisis a nivel de continente para la detección de tendencias más amplias.</p>
<div class="sourceCode" id="cb766"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb766-1"><a href="análisis-de-datos-con-python.html#cb766-1" aria-hidden="true" tabindex="-1"></a>combined_final <span class="op">=</span> cont.merge(combined, left_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>], right_on<span class="op">=</span>[<span class="st">&#39;country&#39;</span>])</span>
<span id="cb766-2"><a href="análisis-de-datos-con-python.html#cb766-2" aria-hidden="true" tabindex="-1"></a>combined_final</span></code></pre></div>
</div>
<div id="limpieza-de-datos" class="section level5 hasAnchor" number="4.6.8.2.4">
<h5><span class="header-section-number">4.6.8.2.4</span> Limpieza de datos<a href="análisis-de-datos-con-python.html#limpieza-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A continuación se detallan las medidas adoptadas para garantizar la calidad del conjunto de datos:</p>
<p>Missing Values: A continuación se muestra un resumen de los valores que faltan (nulos) en el conjunto de datos:</p>
<div class="sourceCode" id="cb767"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb767-1"><a href="análisis-de-datos-con-python.html#cb767-1" aria-hidden="true" tabindex="-1"></a>combined_final.isna().<span class="bu">sum</span>()</span></code></pre></div>
<p>Una opción para tratar los valores “tax_%_gdp” que faltan sería sustituirlos por la media del país. Sin embargo, algunos de los países tienen todos nulos y otros tienen la mayoría de nulos para esta columna.</p>
<p>Una segunda opción es eliminar las filas con nulos. En aras de la simplicidad, utilizaremos esta opción.</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb768-1"><a href="análisis-de-datos-con-python.html#cb768-1" aria-hidden="true" tabindex="-1"></a>combined_final.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb768-2"><a href="análisis-de-datos-con-python.html#cb768-2" aria-hidden="true" tabindex="-1"></a>combined_final.isna().<span class="bu">sum</span>()</span></code></pre></div>
<p>Duplicates. No hay duplicados en el conjunto de datos:</p>
<div class="sourceCode" id="cb769"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb769-1"><a href="análisis-de-datos-con-python.html#cb769-1" aria-hidden="true" tabindex="-1"></a>combined_final.duplicated().<span class="bu">sum</span>()</span></code></pre></div>
</div>
<div id="estadísticas-descriptivas" class="section level5 hasAnchor" number="4.6.8.2.5">
<h5><span class="header-section-number">4.6.8.2.5</span> Estadísticas descriptivas<a href="análisis-de-datos-con-python.html#estadísticas-descriptivas" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>A continuación se presentan las estadísticas descriptivas del conjunto de datos. Un examen de los valores indica que los valores mínimo, máximo y medio parecen razonables.</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb770-1"><a href="análisis-de-datos-con-python.html#cb770-1" aria-hidden="true" tabindex="-1"></a>combined_final.describe()</span></code></pre></div>
</div>
<div id="resumen-1" class="section level5 hasAnchor" number="4.6.8.2.6">
<h5><span class="header-section-number">4.6.8.2.6</span> Resumen<a href="análisis-de-datos-con-python.html#resumen-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Dado que los resultados del análisis inicial indican que el conjunto de datos está limpio, no es necesario realizar más pasos de limpieza.</p>
<div class="sourceCode" id="cb771"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb771-1"><a href="análisis-de-datos-con-python.html#cb771-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of rows: &quot;</span>, combined_final.shape[<span class="dv">0</span>])</span>
<span id="cb771-2"><a href="análisis-de-datos-con-python.html#cb771-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;number of columns: </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(combined_final.shape[<span class="dv">1</span>]))</span>
<span id="cb771-3"><a href="análisis-de-datos-con-python.html#cb771-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;datatypes:</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb771-4"><a href="análisis-de-datos-con-python.html#cb771-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(combined_final.dtypes)</span>
<span id="cb771-5"><a href="análisis-de-datos-con-python.html#cb771-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb771-6"><a href="análisis-de-datos-con-python.html#cb771-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Estos son los continentes incluidos en el conjunto de datos. Todos los valores parecen razonables.</span></span>
<span id="cb771-7"><a href="análisis-de-datos-con-python.html#cb771-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb771-8"><a href="análisis-de-datos-con-python.html#cb771-8" aria-hidden="true" tabindex="-1"></a>combined_final.continent.unique()</span>
<span id="cb771-9"><a href="análisis-de-datos-con-python.html#cb771-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb771-10"><a href="análisis-de-datos-con-python.html#cb771-10" aria-hidden="true" tabindex="-1"></a>combined_final.country.unique()</span></code></pre></div>
</div>
<div id="guardar-el-conjunto-de-datos-limpiado" class="section level5 hasAnchor" number="4.6.8.2.7">
<h5><span class="header-section-number">4.6.8.2.7</span> Guardar el conjunto de datos limpiado<a href="análisis-de-datos-con-python.html#guardar-el-conjunto-de-datos-limpiado" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb772"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb772-1"><a href="análisis-de-datos-con-python.html#cb772-1" aria-hidden="true" tabindex="-1"></a>combined_final.to_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">combined_final_last_10_years.csv&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb772-2"><a href="análisis-de-datos-con-python.html#cb772-2" aria-hidden="true" tabindex="-1"></a>combined_final.to_excel(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">combined_final_last_10_years.xlsx&#39;</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre></div>
<p><a id='eda'></a></p>
</div>
</div>
<div id="análisis-exploratorio" class="section level4 hasAnchor" number="4.6.8.3">
<h4><span class="header-section-number">4.6.8.3</span> Análisis exploratorio<a href="análisis-de-datos-con-python.html#análisis-exploratorio" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Pregunta de investigación 1 - ¿La desigualdad de ingresos está empeorando o mejorando en los últimos 10 años?</strong></p>
<p>Mejor significa que el índice de Gini está bajando.</p>
<p>Media global de Gini por año:</p>
<div class="sourceCode" id="cb773"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb773-1"><a href="análisis-de-datos-con-python.html#cb773-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;year&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb773-2"><a href="análisis-de-datos-con-python.html#cb773-2" aria-hidden="true" tabindex="-1"></a>gini <span class="op">=</span> combined_final[columns]</span>
<span id="cb773-3"><a href="análisis-de-datos-con-python.html#cb773-3" aria-hidden="true" tabindex="-1"></a>gini</span>
<span id="cb773-4"><a href="análisis-de-datos-con-python.html#cb773-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb773-5"><a href="análisis-de-datos-con-python.html#cb773-5" aria-hidden="true" tabindex="-1"></a>gini_annual_average <span class="op">=</span> gini.groupby(<span class="st">&#39;year&#39;</span>)[<span class="st">&#39;gini_index&#39;</span>].mean()</span>
<span id="cb773-6"><a href="análisis-de-datos-con-python.html#cb773-6" aria-hidden="true" tabindex="-1"></a>gini_annual_average</span></code></pre></div>
<p>As the plot below shows, the mean global gini index has been going down over the last 10 years, meaning global income inequality is improving.</p>
<div class="sourceCode" id="cb774"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb774-1"><a href="análisis-de-datos-con-python.html#cb774-1" aria-hidden="true" tabindex="-1"></a>plt.plot(gini_annual_average.index, gini_annual_average)</span>
<span id="cb774-2"><a href="análisis-de-datos-con-python.html#cb774-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Mean Global Gini Index by Year&#39;</span>)</span>
<span id="cb774-3"><a href="análisis-de-datos-con-python.html#cb774-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Year&#39;</span>)</span>
<span id="cb774-4"><a href="análisis-de-datos-con-python.html#cb774-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Mean Global Gini Index&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>Índice de Gini global medio por continente:</p>
<div class="sourceCode" id="cb775"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb775-1"><a href="análisis-de-datos-con-python.html#cb775-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;year&#39;</span>, <span class="st">&#39;continent&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb775-2"><a href="análisis-de-datos-con-python.html#cb775-2" aria-hidden="true" tabindex="-1"></a>gini <span class="op">=</span> combined_final[columns]</span>
<span id="cb775-3"><a href="análisis-de-datos-con-python.html#cb775-3" aria-hidden="true" tabindex="-1"></a>gini</span>
<span id="cb775-4"><a href="análisis-de-datos-con-python.html#cb775-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb775-5"><a href="análisis-de-datos-con-python.html#cb775-5" aria-hidden="true" tabindex="-1"></a>gini_cont_average <span class="op">=</span> gini.groupby([<span class="st">&#39;year&#39;</span>, <span class="st">&#39;continent&#39;</span>])[<span class="st">&#39;gini_index&#39;</span>].mean()</span>
<span id="cb775-6"><a href="análisis-de-datos-con-python.html#cb775-6" aria-hidden="true" tabindex="-1"></a>gini_cont_average</span></code></pre></div>
<p>El gráfico siguiente revela que, por continentes, todos disminuyeron o se mantuvieron prácticamente estables, excepto África.</p>
<div class="sourceCode" id="cb776"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb776-1"><a href="análisis-de-datos-con-python.html#cb776-1" aria-hidden="true" tabindex="-1"></a>gini_cont_average.unstack(level<span class="op">=</span><span class="dv">1</span>).plot(kind<span class="op">=</span><span class="st">&#39;line&#39;</span>, subplots<span class="op">=</span><span class="va">False</span>, <span class="op">\</span></span>
<span id="cb776-2"><a href="análisis-de-datos-con-python.html#cb776-2" aria-hidden="true" tabindex="-1"></a>                                        title<span class="op">=</span><span class="st">&#39;Mean Global Gini Index by Continent by Year&#39;</span>).<span class="op">\</span></span>
<span id="cb776-3"><a href="análisis-de-datos-con-python.html#cb776-3" aria-hidden="true" tabindex="-1"></a>                                        set_ylabel(<span class="st">&quot;Gini Index&quot;</span>)<span class="op">;</span></span>
<span id="cb776-4"><a href="análisis-de-datos-con-python.html#cb776-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb776-5"><a href="análisis-de-datos-con-python.html#cb776-5" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;year&#39;</span>, <span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb776-6"><a href="análisis-de-datos-con-python.html#cb776-6" aria-hidden="true" tabindex="-1"></a>gini <span class="op">=</span> combined_final[columns]</span>
<span id="cb776-7"><a href="análisis-de-datos-con-python.html#cb776-7" aria-hidden="true" tabindex="-1"></a>gini</span></code></pre></div>
<p><strong>Pregunta de investigación 2 - ¿Qué 10 países tienen la menor y la mayor desigualdad de ingresos?</strong></p>
<p>La más baja. En general, la mayoría de los países con menor desigualdad de ingresos se encuentran en Europa.</p>
<div class="sourceCode" id="cb777"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb777-1"><a href="análisis-de-datos-con-python.html#cb777-1" aria-hidden="true" tabindex="-1"></a>gini.groupby([<span class="st">&#39;country&#39;</span>, <span class="st">&#39;continent&#39;</span>])[<span class="st">&#39;gini_index&#39;</span>].mean().to_frame().sort_values(by<span class="op">=</span>[<span class="st">&#39;gini_index&#39;</span>]).head(<span class="dv">10</span>)</span></code></pre></div>
<p>Más alto: En general, la mayoría de los países con menor desigualdad de ingresos están en África y en América.</p>
<div class="sourceCode" id="cb778"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb778-1"><a href="análisis-de-datos-con-python.html#cb778-1" aria-hidden="true" tabindex="-1"></a>gini.groupby([<span class="st">&#39;country&#39;</span>, <span class="st">&#39;continent&#39;</span>])[<span class="st">&#39;gini_index&#39;</span>].mean().to_frame().sort_values(by<span class="op">=</span>[<span class="st">&#39;gini_index&#39;</span>], ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">10</span>)</span></code></pre></div>
<p><strong>Pregunta de investigación 3 - ¿Se asocia una mayor recaudación fiscal como % del PIB con una menor desigualdad de ingresos?</strong></p>
<p>La hipótesis es que los países con mayores ingresos fiscales en % del PIB están asociados a una menor desigualdad de ingresos. La hipótesis es que los mayores ingresos fiscales se distribuyen a los estratos económicos más bajos en forma de prestaciones sociales. Veamos qué muestran los datos.</p>
<div class="sourceCode" id="cb779"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb779-1"><a href="análisis-de-datos-con-python.html#cb779-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>, <span class="st">&#39;tax_%_gdp&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb779-2"><a href="análisis-de-datos-con-python.html#cb779-2" aria-hidden="true" tabindex="-1"></a>tax <span class="op">=</span> combined_final[columns]</span>
<span id="cb779-3"><a href="análisis-de-datos-con-python.html#cb779-3" aria-hidden="true" tabindex="-1"></a>tax</span></code></pre></div>
<p>Es difícil ver una tendencia en el gráfico de dispersión de abajo:</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb780-1"><a href="análisis-de-datos-con-python.html#cb780-1" aria-hidden="true" tabindex="-1"></a>tax.plot(x<span class="op">=</span><span class="st">&#39;tax_%_gdp&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, title<span class="op">=</span><span class="st">&#39;Mean Global Gini Index by Tax </span><span class="sc">% o</span><span class="st">f GDP&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>Si se observa el logaritmo de ambos valores, se observa que la correlación entre las dos variables es esencialmente plana: no hay pruebas convincentes de que un mayor porcentaje de impuestos sobre el PIB conduzca a una menor desigualdad de ingresos.</p>
<div class="sourceCode" id="cb781"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb781-1"><a href="análisis-de-datos-con-python.html#cb781-1" aria-hidden="true" tabindex="-1"></a>tax_plot <span class="op">=</span> tax.plot(x<span class="op">=</span><span class="st">&#39;tax_%_gdp&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, loglog<span class="op">=</span><span class="va">True</span>, <span class="op">\</span></span>
<span id="cb781-2"><a href="análisis-de-datos-con-python.html#cb781-2" aria-hidden="true" tabindex="-1"></a>                    title<span class="op">=</span><span class="st">&#39;log Mean Global Gini Index by log Tax </span><span class="sc">% o</span><span class="st">f GDP&#39;</span>)</span>
<span id="cb781-3"><a href="análisis-de-datos-con-python.html#cb781-3" aria-hidden="true" tabindex="-1"></a>tax_plot.set_xlabel(<span class="st">&#39;log(tax </span><span class="sc">% g</span><span class="st">dp)&#39;</span>)</span>
<span id="cb781-4"><a href="análisis-de-datos-con-python.html#cb781-4" aria-hidden="true" tabindex="-1"></a>tax_plot.set_ylabel(<span class="st">&#39;log(gini index)&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>La correlación de Pearson es ligeramente negativa: -0,08:</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb782-1"><a href="análisis-de-datos-con-python.html#cb782-1" aria-hidden="true" tabindex="-1"></a>tax_log <span class="op">=</span> np.log(tax[<span class="st">&#39;tax_%_gdp&#39;</span>]).to_frame()</span>
<span id="cb782-2"><a href="análisis-de-datos-con-python.html#cb782-2" aria-hidden="true" tabindex="-1"></a>tax_log[<span class="st">&#39;log_gini_index&#39;</span>] <span class="op">=</span> np.log(tax[<span class="st">&#39;gini_index&#39;</span>])</span>
<span id="cb782-3"><a href="análisis-de-datos-con-python.html#cb782-3" aria-hidden="true" tabindex="-1"></a>tax_log.corr()</span></code></pre></div>
<p><strong>Pregunta de investigación 4 - ¿Se asocia una mayor renta por persona -PIB per cápita- con una menor desigualdad de ingresos?</strong></p>
<p>La hipótesis es que una mayor renta por persona indica que una mayor parte del PIB del país se distribuye de forma equitativa entre su población.</p>
<div class="sourceCode" id="cb783"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb783-1"><a href="análisis-de-datos-con-python.html#cb783-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>, <span class="st">&#39;income_per_person&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb783-2"><a href="análisis-de-datos-con-python.html#cb783-2" aria-hidden="true" tabindex="-1"></a>income <span class="op">=</span> combined_final[columns]</span>
<span id="cb783-3"><a href="análisis-de-datos-con-python.html#cb783-3" aria-hidden="true" tabindex="-1"></a>income</span>
<span id="cb783-4"><a href="análisis-de-datos-con-python.html#cb783-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb783-5"><a href="análisis-de-datos-con-python.html#cb783-5" aria-hidden="true" tabindex="-1"></a>income.plot(x<span class="op">=</span><span class="st">&#39;income_per_person&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, title<span class="op">=</span><span class="st">&#39;Mean Gini Index by Income Per Person&#39;</span>)<span class="op">;</span></span>
<span id="cb783-6"><a href="análisis-de-datos-con-python.html#cb783-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb783-7"><a href="análisis-de-datos-con-python.html#cb783-7" aria-hidden="true" tabindex="-1"></a>income_plot <span class="op">=</span> income.plot(x<span class="op">=</span><span class="st">&#39;income_per_person&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, loglog<span class="op">=</span><span class="va">True</span>, <span class="op">\</span></span>
<span id="cb783-8"><a href="análisis-de-datos-con-python.html#cb783-8" aria-hidden="true" tabindex="-1"></a>                    title<span class="op">=</span><span class="st">&#39;log Mean Gini Index by Income Per Person&#39;</span>)</span>
<span id="cb783-9"><a href="análisis-de-datos-con-python.html#cb783-9" aria-hidden="true" tabindex="-1"></a>income_plot.set_xlabel(<span class="st">&#39;log(income_per_person)&#39;</span>)</span>
<span id="cb783-10"><a href="análisis-de-datos-con-python.html#cb783-10" aria-hidden="true" tabindex="-1"></a>income_plot.set_ylabel(<span class="st">&#39;log(gini index)&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>En este caso, el coeficiente de correlación de Persona es -0,34, lo que indica que existe una débil correlación entre log(renta_por_persona) y log(índice_gini):</p>
<div class="sourceCode" id="cb784"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb784-1"><a href="análisis-de-datos-con-python.html#cb784-1" aria-hidden="true" tabindex="-1"></a>income_log <span class="op">=</span> np.log(income[<span class="st">&#39;income_per_person&#39;</span>]).to_frame()</span>
<span id="cb784-2"><a href="análisis-de-datos-con-python.html#cb784-2" aria-hidden="true" tabindex="-1"></a>income_log[<span class="st">&#39;log_gini_index&#39;</span>] <span class="op">=</span> np.log(tax[<span class="st">&#39;gini_index&#39;</span>])</span>
<span id="cb784-3"><a href="análisis-de-datos-con-python.html#cb784-3" aria-hidden="true" tabindex="-1"></a>income_log.corr()</span></code></pre></div>
<p><strong>Pregunta de investigación 5 - ¿Se asocia una mayor inversión como porcentaje del PIB con una menor desigualdad de ingresos?</strong></p>
<p>La hipótesis es que una mayor inversión como porcentaje del PIB indica que una mayor parte del PIB del país se invierte en mejoras de capital, lo que distribuye los beneficios de los ingresos entre un amplio segmento de la población, lo que conduce a una mayor igualdad entre su población.</p>
<div class="sourceCode" id="cb785"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb785-1"><a href="análisis-de-datos-con-python.html#cb785-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>, <span class="st">&#39;invest_%_gdp&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb785-2"><a href="análisis-de-datos-con-python.html#cb785-2" aria-hidden="true" tabindex="-1"></a>invest <span class="op">=</span> combined_final[columns]</span>
<span id="cb785-3"><a href="análisis-de-datos-con-python.html#cb785-3" aria-hidden="true" tabindex="-1"></a>invest</span>
<span id="cb785-4"><a href="análisis-de-datos-con-python.html#cb785-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb785-5"><a href="análisis-de-datos-con-python.html#cb785-5" aria-hidden="true" tabindex="-1"></a>invest <span class="op">=</span> invest[invest[<span class="st">&#39;invest_%_gdp&#39;</span>] <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb785-6"><a href="análisis-de-datos-con-python.html#cb785-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb785-7"><a href="análisis-de-datos-con-python.html#cb785-7" aria-hidden="true" tabindex="-1"></a>invest.plot(x<span class="op">=</span><span class="st">&#39;invest_%_gdp&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, title<span class="op">=</span><span class="st">&#39;Mean Gini Index by Investment </span><span class="sc">% G</span><span class="st">DP&#39;</span>)<span class="op">;</span></span>
<span id="cb785-8"><a href="análisis-de-datos-con-python.html#cb785-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb785-9"><a href="análisis-de-datos-con-python.html#cb785-9" aria-hidden="true" tabindex="-1"></a>invest_plot <span class="op">=</span> invest.plot(x<span class="op">=</span><span class="st">&#39;invest_%_gdp&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, loglog<span class="op">=</span><span class="va">True</span>, <span class="op">\</span></span>
<span id="cb785-10"><a href="análisis-de-datos-con-python.html#cb785-10" aria-hidden="true" tabindex="-1"></a>                    title<span class="op">=</span><span class="st">&#39;log Mean Global Gini Index by log Invest </span><span class="sc">% o</span><span class="st">f GDP&#39;</span>)</span>
<span id="cb785-11"><a href="análisis-de-datos-con-python.html#cb785-11" aria-hidden="true" tabindex="-1"></a>invest_plot.set_xlabel(<span class="st">&#39;log(invest </span><span class="sc">% g</span><span class="st">dp)&#39;</span>)</span>
<span id="cb785-12"><a href="análisis-de-datos-con-python.html#cb785-12" aria-hidden="true" tabindex="-1"></a>invest_plot.set_ylabel(<span class="st">&#39;log(gini index)&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>El coeficiente de Pearson de -0,03 indica que no hay correlación entre estas dos variables.</p>
<div class="sourceCode" id="cb786"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb786-1"><a href="análisis-de-datos-con-python.html#cb786-1" aria-hidden="true" tabindex="-1"></a>invest_log <span class="op">=</span> np.log(invest[<span class="st">&#39;invest_%_gdp&#39;</span>]).to_frame()</span>
<span id="cb786-2"><a href="análisis-de-datos-con-python.html#cb786-2" aria-hidden="true" tabindex="-1"></a>invest_log[<span class="st">&#39;log_gini_index&#39;</span>] <span class="op">=</span> np.log(tax[<span class="st">&#39;gini_index&#39;</span>])</span>
<span id="cb786-3"><a href="análisis-de-datos-con-python.html#cb786-3" aria-hidden="true" tabindex="-1"></a>invest_log.corr()</span></code></pre></div>
<p><strong>Pregunta de investigación 6 - ¿Un mayor Índice de Democracia de la EIU está asociado a una menor desigualdad de ingresos?</strong></p>
<p>La hipótesis es que los países con un mayor Índice de Democracia de la EIU atienden las necesidades de un segmento más amplio de la población, lo que conduce a una menor desigualdad de ingresos.</p>
<div class="sourceCode" id="cb787"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb787-1"><a href="análisis-de-datos-con-python.html#cb787-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> [<span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>, <span class="st">&#39;year&#39;</span>, <span class="st">&#39;demox_eiu&#39;</span>, <span class="st">&#39;gini_index&#39;</span>]</span>
<span id="cb787-2"><a href="análisis-de-datos-con-python.html#cb787-2" aria-hidden="true" tabindex="-1"></a>demo <span class="op">=</span> combined_final[columns]</span>
<span id="cb787-3"><a href="análisis-de-datos-con-python.html#cb787-3" aria-hidden="true" tabindex="-1"></a>demo</span>
<span id="cb787-4"><a href="análisis-de-datos-con-python.html#cb787-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb787-5"><a href="análisis-de-datos-con-python.html#cb787-5" aria-hidden="true" tabindex="-1"></a>demo.plot(x<span class="op">=</span><span class="st">&#39;demox_eiu&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, title<span class="op">=</span><span class="st">&#39;Mean Gini Index by EIU Democracy Index&#39;</span>)<span class="op">;</span></span>
<span id="cb787-6"><a href="análisis-de-datos-con-python.html#cb787-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb787-7"><a href="análisis-de-datos-con-python.html#cb787-7" aria-hidden="true" tabindex="-1"></a>demo_plot <span class="op">=</span> demo.plot(x<span class="op">=</span><span class="st">&#39;demox_eiu&#39;</span>, y<span class="op">=</span><span class="st">&#39;gini_index&#39;</span>, kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, loglog<span class="op">=</span><span class="va">True</span>, <span class="op">\</span></span>
<span id="cb787-8"><a href="análisis-de-datos-con-python.html#cb787-8" aria-hidden="true" tabindex="-1"></a>                    title<span class="op">=</span><span class="st">&#39;log Mean Global Gini Index by log EIU Democracy Index&#39;</span>)</span>
<span id="cb787-9"><a href="análisis-de-datos-con-python.html#cb787-9" aria-hidden="true" tabindex="-1"></a>demo_plot.set_xlabel(<span class="st">&#39;log(demox_eiu)&#39;</span>)</span>
<span id="cb787-10"><a href="análisis-de-datos-con-python.html#cb787-10" aria-hidden="true" tabindex="-1"></a>demo_plot.set_ylabel(<span class="st">&#39;log(gini index)&#39;</span>)<span class="op">;</span></span></code></pre></div>
<p>En este caso, el coeficiente de correlación de Person es -0,2, lo que indica que existe una débil correlación entre log(demox_eiu) y log(gini_index):</p>
<div class="sourceCode" id="cb788"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb788-1"><a href="análisis-de-datos-con-python.html#cb788-1" aria-hidden="true" tabindex="-1"></a>demo_log <span class="op">=</span> np.log(demo[<span class="st">&#39;demox_eiu&#39;</span>]).to_frame()</span>
<span id="cb788-2"><a href="análisis-de-datos-con-python.html#cb788-2" aria-hidden="true" tabindex="-1"></a>demo_log[<span class="st">&#39;log_gini_index&#39;</span>] <span class="op">=</span> np.log(tax[<span class="st">&#39;gini_index&#39;</span>])</span>
<span id="cb788-3"><a href="análisis-de-datos-con-python.html#cb788-3" aria-hidden="true" tabindex="-1"></a>demo_log.corr()</span></code></pre></div>
<p><a id='conclusions'></a></p>
</div>
<div id="conclusiones" class="section level4 hasAnchor" number="4.6.8.4">
<h4><span class="header-section-number">4.6.8.4</span> Conclusiones<a href="análisis-de-datos-con-python.html#conclusiones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Las conclusiones de este análisis son las siguientes:</p>
<p><strong>Pregunta de investigación 1:</strong> ¿Ha empeorado o mejorado la desigualdad de ingresos en los últimos 10 años?</p>
<p>Respuesta:</p>
<p>Sí, está mejorando, pasando del 38,7 al 37,3</p>
<p>En cuanto a los continentes, todos han disminuido o se han mantenido estables, excepto África.</p>
<p><strong>Pregunta de investigación 2:</strong> ¿Qué 10 países tienen la menor y la mayor desigualdad de ingresos?</p>
<p>Respuesta:</p>
<p>La más baja: Eslovenia, Ucrania, República Checa, Noruega, República Eslovaca, Dinamarca, Kazajstán, Finlandia, Bielorrusia, República Kirguisa</p>
<p>La más alta: Colombia, Lesoto, Honduras, Bolivia, República Centroafricana, Zambia, Surinam, Namibia, Botsuana, Sudáfrica</p>
<p><strong>Pregunta de investigación 3:</strong> ¿Se asocia una mayor recaudación fiscal como porcentaje del PIB con una menor desigualdad de ingresos?</p>
<p>Respuesta: No</p>
<p><strong>Pregunta de investigación 4:</strong> - ¿Se asocia una mayor renta por persona - PIB per cápita con una menor desigualdad de ingresos?</p>
<p>Respuesta: No, pero sí una débil correlación negativa.</p>
<p>*<strong>Pregunta de investigación 5:</strong> - ¿Se asocia una mayor inversión como porcentaje del PIB con una menor desigualdad de ingresos?</p>
<p>Respuesta: No</p>
<p>*<strong>Pregunta de investigación 6:</strong> - ¿Se asocia un mayor índice de democracia de la EIU con una menor desigualdad de ingresos?</p>
<p>Respuesta: No, pero sí una débil correlación negativa.</p>
<p>Los resultados anteriores sugieren que hay otros factores que impulsan la reducción general de la desigualdad de ingresos. Deberían realizarse más análisis de los factores adicionales.</p>
<ul>
<li>Firm Level Innovation and CEO Compensation
<ul>
<li>Utilizando los datos de panel sobre las patentes de Estados Unidos de 1992 a 2006 y los datos sobre el valor de las opciones sobre acciones concedidas a los directores ejecutivos (CEO) de las empresas estadounidenses emparejadas, este estudio tiene como objetivo investigar la relación entre el valor de las opciones sobre acciones concedidas a los CEO y la actividad de innovación a nivel de empresa, medida por el número de patentes concedidas cada año.</li>
<li>Este estudio tiene como objetivo proporcionar evidencia empírica para la teoría de Manso(2011), que predice que el esquema de incentivos óptimos presenta una tolerancia sustancial al fracaso temprano la recompensa por el éxito a largo plazo y el compromiso con un plan de compensación a largo plazo para directores generales por parte del consejo de administración</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb789"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb789-1"><a href="análisis-de-datos-con-python.html#cb789-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Commented out IPython magic to ensure Python compatibility.</span></span>
<span id="cb789-2"><a href="análisis-de-datos-con-python.html#cb789-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb789-3"><a href="análisis-de-datos-con-python.html#cb789-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb789-4"><a href="análisis-de-datos-con-python.html#cb789-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb789-5"><a href="análisis-de-datos-con-python.html#cb789-5" aria-hidden="true" tabindex="-1"></a><span class="co">#import qeds</span></span>
<span id="cb789-6"><a href="análisis-de-datos-con-python.html#cb789-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb789-7"><a href="análisis-de-datos-con-python.html#cb789-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb789-8"><a href="análisis-de-datos-con-python.html#cb789-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb789-9"><a href="análisis-de-datos-con-python.html#cb789-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb789-10"><a href="análisis-de-datos-con-python.html#cb789-10" aria-hidden="true" tabindex="-1"></a><span class="co"># %matplotlib inline</span></span></code></pre></div>
<p>Data Cleaning: Los datos primarios de este estudio proceden de la <a href="https://sites.google.com/site/patentdataproject/Home/downloads">base de datos de patentes de la Oficina Nacional de Investigación Económica (NBER)</a> y de la base de datos de compensación de ejecutivos de Wharton Research Data Service (WRDS) Compustat.</p>
<p>Datos de la patente: Los datos de patentes <code>patsic06_mar09_ip.csv</code> contienen información sobre el año de solicitud y de concesión, la clase de patente estadounidense, junto con todos los IPC originales de la patente, el número de cesionario original y todos los números pdpass que resultan de la división de patentes de propiedad conjunta, la estandarización de nombres, etc.</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb790-1"><a href="análisis-de-datos-con-python.html#cb790-1" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb790-2"><a href="análisis-de-datos-con-python.html#cb790-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb790-3"><a href="análisis-de-datos-con-python.html#cb790-3" aria-hidden="true" tabindex="-1"></a>pats <span class="op">=</span> pd.read_stata(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">pat76_06_ipc.dta&quot;</span>)</span>
<span id="cb790-4"><a href="análisis-de-datos-con-python.html#cb790-4" aria-hidden="true" tabindex="-1"></a>pats.head()</span></code></pre></div>
<p>Descripción de la variable</p>
<ul>
<li>Datos de patentes</li>
</ul>
<p><code>appyear</code> registra el año de presentación y solicitud de la patente; <code>gyear</code> es el año de concesión de la patente. Cada patente concedida tiene un número de patente único como <code>patent</code>. Los datos <code>cat</code>, <code>icl_class</code>, <code>icl_maingroup</code>, <code>nclass</code>, <code>subcat</code>, <code>subclass</code> son la clase de patente o la clase de tecnología de cada patente, que son menos relevantes en mi estudio</p>
<ul>
<li>Identificador del cesionario. El <code>assignee</code> es el número que se asigna a una empresa al solicitar o conceder una patente, creado originalmente por la Oficina de Patentes de los Estados Unidos (U.S.P.O). El <code>pdpass</code> es también un número único de cesionario y se utiliza para cotejar los datos con los de Compustat. Un <code>pdpass</code> puede ser asignado por varios números de <code>asignatario</code>.</li>
</ul>
<p>Tratamiento del cesionario no emparejado</p>
<ul>
<li>Hay patentes que no coinciden con el cesionario mediante el algoritmo de coincidencia de nombres desarrollado por la base de datos de patentes NBER, estas observaciones se muestran como <code>cesionario = 0</code> o <code>pdpass = NaN</code>. Estas observaciones se eliminan automáticamente
““”</li>
</ul>
<div class="sourceCode" id="cb791"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb791-1"><a href="análisis-de-datos-con-python.html#cb791-1" aria-hidden="true" tabindex="-1"></a><span class="co"># observations with pdpass not missing </span></span>
<span id="cb791-2"><a href="análisis-de-datos-con-python.html#cb791-2" aria-hidden="true" tabindex="-1"></a>pats <span class="op">=</span> pats[pats[<span class="st">&#39;pdpass&#39;</span>].notnull()]</span>
<span id="cb791-3"><a href="análisis-de-datos-con-python.html#cb791-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb791-4"><a href="análisis-de-datos-con-python.html#cb791-4" aria-hidden="true" tabindex="-1"></a><span class="co"># count number of unique patent numbers to have patent count for a assignee in a year</span></span>
<span id="cb791-5"><a href="análisis-de-datos-con-python.html#cb791-5" aria-hidden="true" tabindex="-1"></a>pat_yc1 <span class="op">=</span> pats.groupby([<span class="st">&quot;pdpass&quot;</span>,<span class="st">&quot;gyear&quot;</span>])[<span class="st">&quot;patent&quot;</span>].nunique().to_frame().reset_index()<span class="op">\</span></span>
<span id="cb791-6"><a href="análisis-de-datos-con-python.html#cb791-6" aria-hidden="true" tabindex="-1"></a>.rename(columns<span class="op">=</span>{<span class="st">&quot;patent&quot;</span>:<span class="st">&quot;patent_count&quot;</span>})</span>
<span id="cb791-7"><a href="análisis-de-datos-con-python.html#cb791-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb791-8"><a href="análisis-de-datos-con-python.html#cb791-8" aria-hidden="true" tabindex="-1"></a>pat_yc1.head()</span>
<span id="cb791-9"><a href="análisis-de-datos-con-python.html#cb791-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb791-10"><a href="análisis-de-datos-con-python.html#cb791-10" aria-hidden="true" tabindex="-1"></a>pat_yc1.info()</span></code></pre></div>
<p>Añadir <code>gvkey</code></p>
<ul>
<li><p>La <code>gvkey</code> es el identificador de empresas del Wharton Rearch Data Service (WRDS)</p></li>
<li><p>El archivo <code>dynasscsv.csv</code> mantiene un registro de todos los cambios dinámicos en la propiedad de las patentes. Los cambios en la titularidad de las patentes pueden deberse a la fusión y adquisición de empresas, o a la venta de patentes. En este estudio, sólo me centro en el cesionario original (como <code>pdpco1</code> y <code>gvkey1</code>) de la patente y no tengo en cuenta ningún cambio dinámico en la propiedad de la patente. Esto se debe a que estoy más interesado en la relación entre la patente y la compensación a través de la decisión de los ejecutivos sobre el propio proyecto de investigación de la empresa y el proceso de exploración de nuevas ideas, no a través de la compra de patentes o la adquisición de patentes de otras empresas, ya que la compra de patentes es una decisión con recompensas conocidas</p></li>
</ul>
<div class="sourceCode" id="cb792"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb792-1"><a href="análisis-de-datos-con-python.html#cb792-1" aria-hidden="true" tabindex="-1"></a>dynass <span class="op">=</span> pd.read_stata(<span class="st">&quot;datos</span><span class="ch">\\</span><span class="st">dynass.dta&quot;</span>)</span>
<span id="cb792-2"><a href="análisis-de-datos-con-python.html#cb792-2" aria-hidden="true" tabindex="-1"></a>dynass <span class="op">=</span> dynass[[<span class="st">&quot;pdpass&quot;</span>,<span class="st">&quot;pdpco1&quot;</span>,<span class="st">&quot;gvkey1&quot;</span>]] </span>
<span id="cb792-3"><a href="análisis-de-datos-con-python.html#cb792-3" aria-hidden="true" tabindex="-1"></a>dynass <span class="op">=</span> dynass.rename(columns <span class="op">=</span> {<span class="st">&quot;pdpco1&quot;</span>:<span class="st">&quot;pdpco&quot;</span>, <span class="st">&quot;gvkey1&quot;</span>:<span class="st">&quot;gvkey&quot;</span>})</span>
<span id="cb792-4"><a href="análisis-de-datos-con-python.html#cb792-4" aria-hidden="true" tabindex="-1"></a>dynass <span class="op">=</span> dynass.astype({<span class="st">&quot;pdpass&quot;</span>: <span class="bu">float</span>})</span>
<span id="cb792-5"><a href="análisis-de-datos-con-python.html#cb792-5" aria-hidden="true" tabindex="-1"></a>dynass.head()</span></code></pre></div>
<p>En muchos casos, <code>pdpass</code> es igual a <code>gvkey</code> para una empresa. Mi objetivo es que la “clave de acceso” sea el identificador único de las empresas, por lo que elimino cualquier “paso de acceso” que no coincida con una “clave de acceso” y realizo la fusión interna. Además, nos gustaría investigar cualquier cambio en el recuento de patentes después de que los ejecutivos hayan concedido alguna opción de compra de acciones; dado que el rango de datos para la opción de compra de acciones de los ejecutivos es de 1992 a 2006, sólo nos centraríamos en el subconjunto del recuento de patentes que es posterior a 1992</p>
<div class="sourceCode" id="cb793"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb793-1"><a href="análisis-de-datos-con-python.html#cb793-1" aria-hidden="true" tabindex="-1"></a>pgvkey <span class="op">=</span> pd.merge(pat_yc1, dynass, on<span class="op">=</span><span class="st">&quot;pdpass&quot;</span>,how<span class="op">=</span><span class="st">&quot;inner&quot;</span>)</span>
<span id="cb793-2"><a href="análisis-de-datos-con-python.html#cb793-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb793-3"><a href="análisis-de-datos-con-python.html#cb793-3" aria-hidden="true" tabindex="-1"></a><span class="co"># align with executive compensation data (1992 onwards)</span></span>
<span id="cb793-4"><a href="análisis-de-datos-con-python.html#cb793-4" aria-hidden="true" tabindex="-1"></a>pgvkey1 <span class="op">=</span> pgvkey.loc[pgvkey[<span class="st">&quot;gyear&quot;</span>]<span class="op">&gt;=</span><span class="dv">1992</span>]</span>
<span id="cb793-5"><a href="análisis-de-datos-con-python.html#cb793-5" aria-hidden="true" tabindex="-1"></a>pgvkey1.head()</span></code></pre></div>
<p>Tratamiento del recuento de patentes del año que falta</p>
<ul>
<li>Para cada empresa (identificada por gvkey), la razón del valor que falta en el recuento de patentes puede ser 1) que haya patentes concedidas en ese año, pero que no coincidan con el pdpass y, por tanto, no con la empresa en la base de datos de patentes del NBER; 2) que simplemente no haya ninguna patente concedida en ese año. En consecuencia, la regla general para tratar el valor faltante del recuento de patentes cada año es simplemente sustituirlo por 0 en este estudio</li>
</ul>
<div class="sourceCode" id="cb794"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb794-1"><a href="análisis-de-datos-con-python.html#cb794-1" aria-hidden="true" tabindex="-1"></a>pgvkey2 <span class="op">=</span> pgvkey1[[<span class="st">&quot;gvkey&quot;</span>,<span class="st">&quot;gyear&quot;</span>,<span class="st">&quot;patent_count&quot;</span>]]</span>
<span id="cb794-2"><a href="análisis-de-datos-con-python.html#cb794-2" aria-hidden="true" tabindex="-1"></a>pgvkey3 <span class="op">=</span> pgvkey2.pivot_table(index<span class="op">=</span><span class="st">&quot;gvkey&quot;</span>, columns <span class="op">=</span><span class="st">&quot;gyear&quot;</span>, values<span class="op">=</span><span class="st">&quot;patent_count&quot;</span>,</span>
<span id="cb794-3"><a href="análisis-de-datos-con-python.html#cb794-3" aria-hidden="true" tabindex="-1"></a>                             aggfunc<span class="op">=</span> <span class="st">&quot;sum&quot;</span>)</span>
<span id="cb794-4"><a href="análisis-de-datos-con-python.html#cb794-4" aria-hidden="true" tabindex="-1"></a>pgvkey3.head()</span>
<span id="cb794-5"><a href="análisis-de-datos-con-python.html#cb794-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-6"><a href="análisis-de-datos-con-python.html#cb794-6" aria-hidden="true" tabindex="-1"></a>pgvkey3 <span class="op">=</span> pgvkey3.stack(<span class="st">&quot;gyear&quot;</span>,dropna<span class="op">=</span><span class="va">False</span>).to_frame().reset_index()<span class="op">\</span></span>
<span id="cb794-7"><a href="análisis-de-datos-con-python.html#cb794-7" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">&#39;patent_count&#39;</span>})</span>
<span id="cb794-8"><a href="análisis-de-datos-con-python.html#cb794-8" aria-hidden="true" tabindex="-1"></a>pgvkey3.head()</span>
<span id="cb794-9"><a href="análisis-de-datos-con-python.html#cb794-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-10"><a href="análisis-de-datos-con-python.html#cb794-10" aria-hidden="true" tabindex="-1"></a>pgvkey3[<span class="st">&quot;patent_count&quot;</span>] <span class="op">=</span> pgvkey3[<span class="st">&quot;patent_count&quot;</span>].fillna(<span class="dv">0</span>)</span>
<span id="cb794-11"><a href="análisis-de-datos-con-python.html#cb794-11" aria-hidden="true" tabindex="-1"></a>pgvkey3.head()</span>
<span id="cb794-12"><a href="análisis-de-datos-con-python.html#cb794-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-13"><a href="análisis-de-datos-con-python.html#cb794-13" aria-hidden="true" tabindex="-1"></a>pgvkey3.info()</span>
<span id="cb794-14"><a href="análisis-de-datos-con-python.html#cb794-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-15"><a href="análisis-de-datos-con-python.html#cb794-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb794-16"><a href="análisis-de-datos-con-python.html#cb794-16" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb794-17"><a href="análisis-de-datos-con-python.html#cb794-17" aria-hidden="true" tabindex="-1"></a><span class="co">#import geopandas as gpd</span></span>
<span id="cb794-18"><a href="análisis-de-datos-con-python.html#cb794-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb794-19"><a href="análisis-de-datos-con-python.html#cb794-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb794-20"><a href="análisis-de-datos-con-python.html#cb794-20" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> pearsonr</span>
<span id="cb794-21"><a href="análisis-de-datos-con-python.html#cb794-21" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> LeaveOneOut</span>
<span id="cb794-22"><a href="análisis-de-datos-con-python.html#cb794-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb794-23"><a href="análisis-de-datos-con-python.html#cb794-23" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sklearn.metrics <span class="im">as</span> sklm</span>
<span id="cb794-24"><a href="análisis-de-datos-con-python.html#cb794-24" aria-hidden="true" tabindex="-1"></a>pd.options.mode.chained_assignment <span class="op">=</span> <span class="va">None</span></span>
<span id="cb794-25"><a href="análisis-de-datos-con-python.html#cb794-25" aria-hidden="true" tabindex="-1"></a>pd.options.display.float_format <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{:.4f}</span><span class="st">&#39;</span>.<span class="bu">format</span></span>
<span id="cb794-26"><a href="análisis-de-datos-con-python.html#cb794-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-27"><a href="análisis-de-datos-con-python.html#cb794-27" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">&#39;datos</span><span class="ch">\\</span><span class="st">final_demographics_data.csv&#39;</span>)</span></code></pre></div>
<p>Preprocessing</p>
<div class="sourceCode" id="cb795"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb795-1"><a href="análisis-de-datos-con-python.html#cb795-1" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;log GDP per worker&#39;</span>] <span class="op">=</span> np.log(data[<span class="st">&#39;GDP (constant 2010 US$)&#39;</span>]<span class="op">/</span>data[<span class="st">&#39;Labor force, total&#39;</span>])</span>
<span id="cb795-2"><a href="análisis-de-datos-con-python.html#cb795-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Urban population (%)&#39;</span>] <span class="op">=</span> (data[<span class="st">&#39;Urban population&#39;</span>]<span class="op">/</span>data[<span class="st">&#39;Population, total&#39;</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb795-3"><a href="análisis-de-datos-con-python.html#cb795-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;log population&#39;</span>] <span class="op">=</span> np.log(data[<span class="st">&#39;Population, total&#39;</span>])</span>
<span id="cb795-4"><a href="análisis-de-datos-con-python.html#cb795-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[data[<span class="st">&#39;log GDP per worker&#39;</span>].notna()]</span>
<span id="cb795-5"><a href="análisis-de-datos-con-python.html#cb795-5" aria-hidden="true" tabindex="-1"></a>gdp_per_worker <span class="op">=</span> data[<span class="st">&#39;GDP (constant 2010 US$)&#39;</span>]<span class="op">/</span>data[<span class="st">&#39;Labor force, total&#39;</span>]</span>
<span id="cb795-6"><a href="análisis-de-datos-con-python.html#cb795-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb795-7"><a href="análisis-de-datos-con-python.html#cb795-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>,<span class="dv">15</span>))</span>
<span id="cb795-8"><a href="análisis-de-datos-con-python.html#cb795-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Heatmap of Missing Values&#39;</span>)</span>
<span id="cb795-9"><a href="análisis-de-datos-con-python.html#cb795-9" aria-hidden="true" tabindex="-1"></a>sns.heatmap(data.isna())</span>
<span id="cb795-10"><a href="análisis-de-datos-con-python.html#cb795-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p>Sólo consideré las características con menos de 10 valores perdidos. Rellené el resto de los valores que faltaban con los últimos datos disponibles en <a href="https://data.worldbank.org/" class="uri">https://data.worldbank.org/</a>. Los valores de Canadá y Etiopía para la característica “Crédito nacional al sector privado por parte de los bancos (% del PIB)” son, con mucho, los más antiguos. Son de 2008.</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb796-1"><a href="análisis-de-datos-con-python.html#cb796-1" aria-hidden="true" tabindex="-1"></a><span class="co"># only considerng features with less than 10 missing values and a sensible relationship with the producitivity</span></span>
<span id="cb796-2"><a href="análisis-de-datos-con-python.html#cb796-2" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> [<span class="st">&#39;country&#39;</span>, <span class="st">&#39;log GDP per worker&#39;</span>, <span class="st">&#39;Urban population (%)&#39;</span>, <span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>, </span>
<span id="cb796-3"><a href="análisis-de-datos-con-python.html#cb796-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>, <span class="st">&#39;Age dependency ratio, old (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, </span>
<span id="cb796-4"><a href="análisis-de-datos-con-python.html#cb796-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Age dependency ratio, young (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, <span class="st">&#39;Unemployment, total (</span><span class="sc">% o</span><span class="st">f total labor force) (modeled ILO estimate)&#39;</span>, </span>
<span id="cb796-5"><a href="análisis-de-datos-con-python.html#cb796-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>] </span>
<span id="cb796-6"><a href="análisis-de-datos-con-python.html#cb796-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb796-7"><a href="análisis-de-datos-con-python.html#cb796-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Filling nan with last available data from https://data.worldbank.org/</span></span>
<span id="cb796-8"><a href="análisis-de-datos-con-python.html#cb796-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb796-9"><a href="análisis-de-datos-con-python.html#cb796-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Domestic credit to private sector by banks (% of GDP) </span></span>
<span id="cb796-10"><a href="análisis-de-datos-con-python.html#cb796-10" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Argentina&#39;</span>] <span class="op">=</span> <span class="fl">15.4</span> <span class="co"># 2017</span></span>
<span id="cb796-11"><a href="análisis-de-datos-con-python.html#cb796-11" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Ethiopia&#39;</span>] <span class="op">=</span> <span class="fl">17.6</span> <span class="co"># 2008</span></span>
<span id="cb796-12"><a href="análisis-de-datos-con-python.html#cb796-12" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Canada&#39;</span>] <span class="op">=</span> <span class="fl">124.1</span> <span class="co"># 2008</span></span>
<span id="cb796-13"><a href="análisis-de-datos-con-python.html#cb796-13" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Iraq&#39;</span>] <span class="op">=</span> <span class="fl">9.2</span> <span class="co"># 2018</span></span>
<span id="cb796-14"><a href="análisis-de-datos-con-python.html#cb796-14" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Saudi Arabia&#39;</span>] <span class="op">=</span> <span class="fl">54.0</span> <span class="co"># 2018</span></span>
<span id="cb796-15"><a href="análisis-de-datos-con-python.html#cb796-15" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Switzerland&#39;</span>] <span class="op">=</span> <span class="fl">168.5</span> <span class="co"># 2016</span></span>
<span id="cb796-16"><a href="análisis-de-datos-con-python.html#cb796-16" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Viet Nam&#39;</span>] <span class="op">=</span> <span class="fl">137.9</span> <span class="co">#2019</span></span>
<span id="cb796-17"><a href="análisis-de-datos-con-python.html#cb796-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb796-18"><a href="análisis-de-datos-con-python.html#cb796-18" aria-hidden="true" tabindex="-1"></a><span class="co"># fixed broadband</span></span>
<span id="cb796-19"><a href="análisis-de-datos-con-python.html#cb796-19" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Peru&#39;</span>] <span class="op">=</span> <span class="fl">7.93</span> <span class="co"># 2018</span></span>
<span id="cb796-20"><a href="análisis-de-datos-con-python.html#cb796-20" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Philippines&#39;</span>] <span class="op">=</span> <span class="fl">5.48</span> <span class="co"># 2019</span></span>
<span id="cb796-21"><a href="análisis-de-datos-con-python.html#cb796-21" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Ethiopia&#39;</span>] <span class="op">=</span> <span class="fl">0.06</span> <span class="co"># 2017</span></span>
<span id="cb796-22"><a href="análisis-de-datos-con-python.html#cb796-22" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Nepal&#39;</span>] <span class="op">=</span> <span class="fl">2.82</span> <span class="co"># 2018</span></span>
<span id="cb796-23"><a href="análisis-de-datos-con-python.html#cb796-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb796-24"><a href="análisis-de-datos-con-python.html#cb796-24" aria-hidden="true" tabindex="-1"></a><span class="co"># final consumption</span></span>
<span id="cb796-25"><a href="análisis-de-datos-con-python.html#cb796-25" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;China&#39;</span>] <span class="op">=</span> <span class="fl">56.0</span> <span class="co"># 2019</span></span>
<span id="cb796-26"><a href="análisis-de-datos-con-python.html#cb796-26" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Ghana&#39;</span>] <span class="op">=</span> <span class="fl">77.6</span> <span class="co"># 2019</span></span>
<span id="cb796-27"><a href="análisis-de-datos-con-python.html#cb796-27" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Iraq&#39;</span>] <span class="op">=</span> <span class="fl">65.4</span> <span class="co"># 2019</span></span>
<span id="cb796-28"><a href="análisis-de-datos-con-python.html#cb796-28" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Kazakhstan&#39;</span>] <span class="op">=</span> <span class="fl">61.4</span> <span class="co"># 2019</span></span>
<span id="cb796-29"><a href="análisis-de-datos-con-python.html#cb796-29" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Kenya&#39;</span>] <span class="op">=</span> <span class="fl">95.5</span> <span class="co"># 2019</span></span>
<span id="cb796-30"><a href="análisis-de-datos-con-python.html#cb796-30" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;Tunisia&#39;</span>] <span class="op">=</span> <span class="fl">92.9</span> <span class="co"># 2019</span></span>
<span id="cb796-31"><a href="análisis-de-datos-con-python.html#cb796-31" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>].iloc[data[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> <span class="st">&#39;United States of America&#39;</span>] <span class="op">=</span> <span class="fl">81.8</span> <span class="co"># 2020</span></span>
<span id="cb796-32"><a href="análisis-de-datos-con-python.html#cb796-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb796-33"><a href="análisis-de-datos-con-python.html#cb796-33" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data[features]</span>
<span id="cb796-34"><a href="análisis-de-datos-con-python.html#cb796-34" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.dropna()</span>
<span id="cb796-35"><a href="análisis-de-datos-con-python.html#cb796-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb796-36"><a href="análisis-de-datos-con-python.html#cb796-36" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<p>Pib por trabajador: El PIB per cápita es una medida útil cuando queremos evaluar la riqueza de un país. Sin embargo, yo quería identificar predictores de la productividad de un país. Una medida mejor sería en este caso el PIB por trabajador, ya que sólo tiene en cuenta a la población activa. La medida ideal sería el PIB por horas trabajadas, pero este conjunto de datos no incluye la información necesaria para construir esta característica y el PIB por trabajador también es ya suficiente.</p>
<div class="sourceCode" id="cb797"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb797-1"><a href="análisis-de-datos-con-python.html#cb797-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb797-2"><a href="análisis-de-datos-con-python.html#cb797-2" aria-hidden="true" tabindex="-1"></a>sns.histplot(gdp_per_worker, ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb797-3"><a href="análisis-de-datos-con-python.html#cb797-3" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">&#39;GDP per worker&#39;</span>)</span>
<span id="cb797-4"><a href="análisis-de-datos-con-python.html#cb797-4" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;log GDP per worker&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb797-5"><a href="análisis-de-datos-con-python.html#cb797-5" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">&#39;Log GDP per worker&#39;</span>)</span>
<span id="cb797-6"><a href="análisis-de-datos-con-python.html#cb797-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p>Urban Population: La característica “Población urbana (%)” describe qué porcentaje de la población vive en las ciudades.</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb798-1"><a href="análisis-de-datos-con-python.html#cb798-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb798-2"><a href="análisis-de-datos-con-python.html#cb798-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Urban population (%)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb798-3"><a href="análisis-de-datos-con-python.html#cb798-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Urban population (%)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb798-4"><a href="análisis-de-datos-con-python.html#cb798-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb798-5"><a href="análisis-de-datos-con-python.html#cb798-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb798-6"><a href="análisis-de-datos-con-python.html#cb798-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Urban population (%)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Domestic credit to private sector by banks (% of GDP): Esta característica describe la cantidad de recursos financieros proporcionados al sector privado por los bancos en relación con el PIB.</p>
<div class="sourceCode" id="cb799"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb799-1"><a href="análisis-de-datos-con-python.html#cb799-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb799-2"><a href="análisis-de-datos-con-python.html#cb799-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb799-3"><a href="análisis-de-datos-con-python.html#cb799-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb799-4"><a href="análisis-de-datos-con-python.html#cb799-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb799-5"><a href="análisis-de-datos-con-python.html#cb799-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb799-6"><a href="análisis-de-datos-con-python.html#cb799-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Fixed broadband subscriptions (per 100 people): Suscripciones para el acceso de alta velocidad a la Internet pública.</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb800-1"><a href="análisis-de-datos-con-python.html#cb800-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb800-2"><a href="análisis-de-datos-con-python.html#cb800-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb800-3"><a href="análisis-de-datos-con-python.html#cb800-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb800-4"><a href="análisis-de-datos-con-python.html#cb800-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb800-5"><a href="análisis-de-datos-con-python.html#cb800-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb800-6"><a href="análisis-de-datos-con-python.html#cb800-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Age dependency ratio, old (% of working-age population): Número de personas mayores de 64 años en relación con el número de personas entre 15 y 64 años.</p>
<div class="sourceCode" id="cb801"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb801-1"><a href="análisis-de-datos-con-python.html#cb801-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb801-2"><a href="análisis-de-datos-con-python.html#cb801-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Age dependency ratio, old (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb801-3"><a href="análisis-de-datos-con-python.html#cb801-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Age dependency ratio, old (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb801-4"><a href="análisis-de-datos-con-python.html#cb801-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb801-5"><a href="análisis-de-datos-con-python.html#cb801-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb801-6"><a href="análisis-de-datos-con-python.html#cb801-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Age dependency ratio, old (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Age dependency ratio, young (% of working-age population): Number of people who are younger than 15 in relation to the number of people between 15 and 64.</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb802-1"><a href="análisis-de-datos-con-python.html#cb802-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb802-2"><a href="análisis-de-datos-con-python.html#cb802-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Age dependency ratio, young (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb802-3"><a href="análisis-de-datos-con-python.html#cb802-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Age dependency ratio, young (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb802-4"><a href="análisis-de-datos-con-python.html#cb802-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb802-5"><a href="análisis-de-datos-con-python.html#cb802-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb802-6"><a href="análisis-de-datos-con-python.html#cb802-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Age dependency ratio, young (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Unemployment, total (% of total labor force) (modeled ILO estimate): Unemployment estimate modeled by the Iternational Labor Organization.</p>
<div class="sourceCode" id="cb803"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb803-1"><a href="análisis-de-datos-con-python.html#cb803-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb803-2"><a href="análisis-de-datos-con-python.html#cb803-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Unemployment, total (</span><span class="sc">% o</span><span class="st">f total labor force) (modeled ILO estimate)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb803-3"><a href="análisis-de-datos-con-python.html#cb803-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Unemployment, total (</span><span class="sc">% o</span><span class="st">f total labor force) (modeled ILO estimate)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb803-4"><a href="análisis-de-datos-con-python.html#cb803-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb803-5"><a href="análisis-de-datos-con-python.html#cb803-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb803-6"><a href="análisis-de-datos-con-python.html#cb803-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Unemployment, total (</span><span class="sc">% o</span><span class="st">f total labor force) (modeled ILO estimate)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Final consumption expenditure (% of GDP): Final household and government consumption expenditure relative to the GDP.</p>
<div class="sourceCode" id="cb804"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb804-1"><a href="análisis-de-datos-con-python.html#cb804-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">14</span>,<span class="dv">6</span>))</span>
<span id="cb804-2"><a href="análisis-de-datos-con-python.html#cb804-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(ax<span class="op">=</span>ax1, x<span class="op">=</span><span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>, y<span class="op">=</span><span class="st">&#39;log GDP per worker&#39;</span>, data<span class="op">=</span>data, color <span class="op">=</span> <span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb804-3"><a href="análisis-de-datos-con-python.html#cb804-3" aria-hidden="true" tabindex="-1"></a>sns.histplot(data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>], ax<span class="op">=</span>ax2, color<span class="op">=</span><span class="st">&#39;salmon&#39;</span>)</span>
<span id="cb804-4"><a href="análisis-de-datos-con-python.html#cb804-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb804-5"><a href="análisis-de-datos-con-python.html#cb804-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb804-6"><a href="análisis-de-datos-con-python.html#cb804-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Pearson-r and P-Value: &#39;</span> <span class="op">+</span> <span class="bu">str</span>(pearsonr(data[<span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>], data[<span class="st">&#39;log GDP per worker&#39;</span>])))</span></code></pre></div>
<p>Análisis de regresión (intro)</p>
<div class="sourceCode" id="cb805"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb805-1"><a href="análisis-de-datos-con-python.html#cb805-1" aria-hidden="true" tabindex="-1"></a>data.corr().style.background_gradient(cmap<span class="op">=</span><span class="st">&#39;coolwarm&#39;</span>)</span></code></pre></div>
<p>Existe una fuerte correlación entre “Tasa de dependencia de la edad, ancianos (% de la población en edad de trabajar)” y “Abonados a la banda ancha fija (por cada 100 personas)”, ya que el coeficiente de correlación de Pearson es de 0,897830. Esto puede causar problemas a la hora de interpretar el modelo de regresión. Intento resolver este problema construyendo tres modelos. El primero tendrá en cuenta todas las características, para el segundo modelo dejaré fuera la “Tasa de dependencia de la edad, ancianos (% de la población en edad de trabajar)” y el tercer modelo no incluirá las “Suscripciones a la banda ancha fija (por cada 100 personas)”.</p>
<div class="sourceCode" id="cb806"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb806-1"><a href="análisis-de-datos-con-python.html#cb806-1" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> data.drop([<span class="st">&#39;country&#39;</span>], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb806-2"><a href="análisis-de-datos-con-python.html#cb806-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> X.pop(<span class="st">&#39;log GDP per worker&#39;</span>)</span>
<span id="cb806-3"><a href="análisis-de-datos-con-python.html#cb806-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb806-4"><a href="análisis-de-datos-con-python.html#cb806-4" aria-hidden="true" tabindex="-1"></a><span class="co"># columns for model 2</span></span>
<span id="cb806-5"><a href="análisis-de-datos-con-python.html#cb806-5" aria-hidden="true" tabindex="-1"></a>model2_l <span class="op">=</span> [<span class="st">&#39;const&#39;</span>,<span class="st">&#39;Urban population (%)&#39;</span>, <span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>, </span>
<span id="cb806-6"><a href="análisis-de-datos-con-python.html#cb806-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Fixed broadband subscriptions (per 100 people)&#39;</span>, <span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>,</span>
<span id="cb806-7"><a href="análisis-de-datos-con-python.html#cb806-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Age dependency ratio, young (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, <span class="st">&#39;Unemployment, total (</span><span class="sc">% o</span><span class="st">f total labor force) (modeled ILO estimate)&#39;</span>]</span>
<span id="cb806-8"><a href="análisis-de-datos-con-python.html#cb806-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb806-9"><a href="análisis-de-datos-con-python.html#cb806-9" aria-hidden="true" tabindex="-1"></a><span class="co"># columns for model 3</span></span>
<span id="cb806-10"><a href="análisis-de-datos-con-python.html#cb806-10" aria-hidden="true" tabindex="-1"></a>model3_l <span class="op">=</span> [<span class="st">&#39;const&#39;</span>, <span class="st">&#39;Urban population (%)&#39;</span>, <span class="st">&#39;Domestic credit to private sector by banks (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>, </span>
<span id="cb806-11"><a href="análisis-de-datos-con-python.html#cb806-11" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;Age dependency ratio, old (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, <span class="st">&#39;Final consumption expenditure (</span><span class="sc">% o</span><span class="st">f GDP)&#39;</span>,</span>
<span id="cb806-12"><a href="análisis-de-datos-con-python.html#cb806-12" aria-hidden="true" tabindex="-1"></a>          <span class="st">&#39;Age dependency ratio, young (</span><span class="sc">% o</span><span class="st">f working-age population)&#39;</span>, <span class="st">&#39;Unemployment, total (</span><span class="sc">% o</span><span class="st">f total labor force) (modeled ILO estimate)&#39;</span>]</span>
<span id="cb806-13"><a href="análisis-de-datos-con-python.html#cb806-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb806-14"><a href="análisis-de-datos-con-python.html#cb806-14" aria-hidden="true" tabindex="-1"></a>X_lin <span class="op">=</span> sm.tools.add_constant(X)</span>
<span id="cb806-15"><a href="análisis-de-datos-con-python.html#cb806-15" aria-hidden="true" tabindex="-1"></a>model1 <span class="op">=</span> sm.OLS(y, X_lin.astype(<span class="st">&#39;float&#39;</span>)).fit()</span>
<span id="cb806-16"><a href="análisis-de-datos-con-python.html#cb806-16" aria-hidden="true" tabindex="-1"></a>model2 <span class="op">=</span> sm.OLS(y, X_lin[model2_l].astype(<span class="st">&#39;float&#39;</span>)).fit()</span>
<span id="cb806-17"><a href="análisis-de-datos-con-python.html#cb806-17" aria-hidden="true" tabindex="-1"></a>model3 <span class="op">=</span> sm.OLS(y, X_lin[model3_l].astype(<span class="st">&#39;float&#39;</span>)).fit()</span>
<span id="cb806-18"><a href="análisis-de-datos-con-python.html#cb806-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb806-19"><a href="análisis-de-datos-con-python.html#cb806-19" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> return_results(model, model_list):</span>
<span id="cb806-20"><a href="análisis-de-datos-con-python.html#cb806-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [model.pvalues[i] <span class="cf">for</span> i <span class="kw">in</span> model_list]</span>
<span id="cb806-21"><a href="análisis-de-datos-con-python.html#cb806-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb806-22"><a href="análisis-de-datos-con-python.html#cb806-22" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> pd.DataFrame(index<span class="op">=</span>X_lin.columns)</span>
<span id="cb806-23"><a href="análisis-de-datos-con-python.html#cb806-23" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;Model 1 Coeff.&#39;</span>] <span class="op">=</span> pd.Series(model1.params)</span>
<span id="cb806-24"><a href="análisis-de-datos-con-python.html#cb806-24" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;Model 1 P-Values&#39;</span>] <span class="op">=</span> pd.Series(return_results(model1, X_lin.columns), index <span class="op">=</span> X_lin.columns)</span>
<span id="cb806-25"><a href="análisis-de-datos-con-python.html#cb806-25" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;Model 2 Coeff.&#39;</span>] <span class="op">=</span> pd.Series(model2.params)</span>
<span id="cb806-26"><a href="análisis-de-datos-con-python.html#cb806-26" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;Model 2 P-Values&#39;</span>] <span class="op">=</span> pd.Series(return_results(model2, model2_l), index <span class="op">=</span> model2_l)</span>
<span id="cb806-27"><a href="análisis-de-datos-con-python.html#cb806-27" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;Model 3 Coeff.&#39;</span>] <span class="op">=</span> pd.Series(model3.params)</span>
<span id="cb806-28"><a href="análisis-de-datos-con-python.html#cb806-28" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;Model 3 P-Values&#39;</span>] <span class="op">=</span> pd.Series(return_results(model3, model3_l), index <span class="op">=</span> model3_l)</span>
<span id="cb806-29"><a href="análisis-de-datos-con-python.html#cb806-29" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> results.fillna(<span class="st">&#39;---&#39;</span>)</span>
<span id="cb806-30"><a href="análisis-de-datos-con-python.html#cb806-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb806-31"><a href="análisis-de-datos-con-python.html#cb806-31" aria-hidden="true" tabindex="-1"></a>results</span></code></pre></div>
<p>El coeficiente de “Población urbana (%)” es positivo y el efecto es significativo en los tres modelos. El efecto de “Crédito interno al sector privado por parte de los bancos (% del PIB)” no es significativo en ninguno de los modelos. “Abonados a la banda ancha fija (por cada 100 personas)” sólo se incluyó en los modelos 1 y 2 y el efecto es positivo y significativo en ambos. “Tasa de dependencia de la edad, mayores (% de la población en edad de trabajar)” tiene un efecto positivo y significativo en el modelo 1 y el modelo 3, mientras que “Tasa de dependencia de la edad, jóvenes (% de la población en edad de trabajar)” no tiene un efecto significativo en ningún modelo. Lo mismo puede decirse de “Desempleo, total (% de la población activa total) (estimación modelada de la OIT)”. Sin embargo, el “Gasto en consumo final (% del PIB)” muestra un efecto negativo y altamente significativo en todos los modelos. La falta de significación de algunas de las variables puede deberse a la multicolinealidad, especialmente en lo que respecta a “Dependencia de la edad, jóvenes”.</p>
<p>Por último, examinaremos la eficacia de cada modelo para predecir el PIB por trabajador de un país. El pequeño tamaño de la muestra no es ideal para construir un modelo de predicción, pero permite la validación cruzada “Leave-one-out”, que llevaría mucho tiempo en el caso de grandes conjuntos de datos.</p>
<div class="sourceCode" id="cb807"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb807-1"><a href="análisis-de-datos-con-python.html#cb807-1" aria-hidden="true" tabindex="-1"></a>loo <span class="op">=</span> LeaveOneOut()</span>
<span id="cb807-2"><a href="análisis-de-datos-con-python.html#cb807-2" aria-hidden="true" tabindex="-1"></a>m1_score <span class="op">=</span> []</span>
<span id="cb807-3"><a href="análisis-de-datos-con-python.html#cb807-3" aria-hidden="true" tabindex="-1"></a>m2_score <span class="op">=</span> []</span>
<span id="cb807-4"><a href="análisis-de-datos-con-python.html#cb807-4" aria-hidden="true" tabindex="-1"></a>m3_score <span class="op">=</span> []</span>
<span id="cb807-5"><a href="análisis-de-datos-con-python.html#cb807-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> train_index, test_index <span class="kw">in</span> loo.split(X_lin, gdp_per_worker[X_lin.index]):</span>
<span id="cb807-6"><a href="análisis-de-datos-con-python.html#cb807-6" aria-hidden="true" tabindex="-1"></a>    X_train, X_test <span class="op">=</span> X_lin.iloc[train_index], X_lin.iloc[test_index]</span>
<span id="cb807-7"><a href="análisis-de-datos-con-python.html#cb807-7" aria-hidden="true" tabindex="-1"></a>    y_train, y_test <span class="op">=</span> gdp_per_worker.iloc[train_index], gdp_per_worker.iloc[test_index]</span>
<span id="cb807-8"><a href="análisis-de-datos-con-python.html#cb807-8" aria-hidden="true" tabindex="-1"></a>    model1 <span class="op">=</span> sm.OLS(<span class="bu">list</span>(y_train), X_train.astype(<span class="st">&#39;float&#39;</span>)).fit()</span>
<span id="cb807-9"><a href="análisis-de-datos-con-python.html#cb807-9" aria-hidden="true" tabindex="-1"></a>    model2 <span class="op">=</span> sm.OLS(<span class="bu">list</span>(y_train), X_train[model2_l].astype(<span class="st">&#39;float&#39;</span>)).fit()</span>
<span id="cb807-10"><a href="análisis-de-datos-con-python.html#cb807-10" aria-hidden="true" tabindex="-1"></a>    model3 <span class="op">=</span> sm.OLS(<span class="bu">list</span>(y_train), X_train[model3_l].astype(<span class="st">&#39;float&#39;</span>)).fit()</span>
<span id="cb807-11"><a href="análisis-de-datos-con-python.html#cb807-11" aria-hidden="true" tabindex="-1"></a>    m1_score.append(np.sqrt(sklm.mean_squared_error(y_test, model1.predict(X_test.astype(<span class="st">&#39;float&#39;</span>)))))</span>
<span id="cb807-12"><a href="análisis-de-datos-con-python.html#cb807-12" aria-hidden="true" tabindex="-1"></a>    m2_score.append(np.sqrt(sklm.mean_squared_error(y_test, model2.predict(X_test[model2_l].astype(<span class="st">&#39;float&#39;</span>)))))</span>
<span id="cb807-13"><a href="análisis-de-datos-con-python.html#cb807-13" aria-hidden="true" tabindex="-1"></a>    m3_score.append(np.sqrt(sklm.mean_squared_error(y_test, model3.predict(X_test[model3_l].astype(<span class="st">&#39;float&#39;</span>)))))</span>
<span id="cb807-14"><a href="análisis-de-datos-con-python.html#cb807-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb807-15"><a href="análisis-de-datos-con-python.html#cb807-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;GDP per worker std.:        &#39;</span> <span class="op">+</span> <span class="bu">str</span>(np.std(gdp_per_worker[X_lin.index])))</span>
<span id="cb807-16"><a href="análisis-de-datos-con-python.html#cb807-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Model 1 LOOCV Error (RMSE): &#39;</span> <span class="op">+</span> <span class="bu">str</span>(np.mean(m1_score)))</span>
<span id="cb807-17"><a href="análisis-de-datos-con-python.html#cb807-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Model 2 LOOCV Error (RMSE): &#39;</span> <span class="op">+</span> <span class="bu">str</span>(np.mean(m2_score)))</span>
<span id="cb807-18"><a href="análisis-de-datos-con-python.html#cb807-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Model 3 LOOCV Error (RMSE): &#39;</span> <span class="op">+</span> <span class="bu">str</span>(np.mean(m3_score)))</span></code></pre></div>
</div>
</div>
</div>
<div id="análisis-de-datos-parte-ii" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Análisis de datos (Parte II)<a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-ii" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="optimización-con-scipy" class="section level3 hasAnchor" number="4.7.1">
<h3><span class="header-section-number">4.7.1</span> Optimización con Scipy<a href="análisis-de-datos-con-python.html#optimización-con-scipy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb808"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb808-1"><a href="análisis-de-datos-con-python.html#cb808-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb808-2"><a href="análisis-de-datos-con-python.html#cb808-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> linalg</span>
<span id="cb808-3"><a href="análisis-de-datos-con-python.html#cb808-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-4"><a href="análisis-de-datos-con-python.html#cb808-4" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb808-5"><a href="análisis-de-datos-con-python.html#cb808-5" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">3</span>, <span class="dv">4</span>]])</span>
<span id="cb808-6"><a href="análisis-de-datos-con-python.html#cb808-6" aria-hidden="true" tabindex="-1"></a>linalg.</span>
<span id="cb808-7"><a href="análisis-de-datos-con-python.html#cb808-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-8"><a href="análisis-de-datos-con-python.html#cb808-8" aria-hidden="true" tabindex="-1"></a>arr</span>
<span id="cb808-9"><a href="análisis-de-datos-con-python.html#cb808-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-10"><a href="análisis-de-datos-con-python.html#cb808-10" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([[<span class="dv">3</span>, <span class="dv">2</span>],</span>
<span id="cb808-11"><a href="análisis-de-datos-con-python.html#cb808-11" aria-hidden="true" tabindex="-1"></a>                [<span class="dv">6</span>, <span class="dv">4</span>]])</span>
<span id="cb808-12"><a href="análisis-de-datos-con-python.html#cb808-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-13"><a href="análisis-de-datos-con-python.html#cb808-13" aria-hidden="true" tabindex="-1"></a>linalg.det(arr)</span>
<span id="cb808-14"><a href="análisis-de-datos-con-python.html#cb808-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-15"><a href="análisis-de-datos-con-python.html#cb808-15" aria-hidden="true" tabindex="-1"></a><span class="co">#2. Inversa de una matriz</span></span>
<span id="cb808-16"><a href="análisis-de-datos-con-python.html#cb808-16" aria-hidden="true" tabindex="-1"></a>linalg.inv(arr)</span>
<span id="cb808-17"><a href="análisis-de-datos-con-python.html#cb808-17" aria-hidden="true" tabindex="-1"></a><span class="co"># calcular la inversa de una matriz singular (su determinante es cero) generará un error</span></span>
<span id="cb808-18"><a href="análisis-de-datos-con-python.html#cb808-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-19"><a href="análisis-de-datos-con-python.html#cb808-19" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb808-20"><a href="análisis-de-datos-con-python.html#cb808-20" aria-hidden="true" tabindex="-1"></a>               [<span class="dv">3</span>, <span class="dv">4</span>]])</span>
<span id="cb808-21"><a href="análisis-de-datos-con-python.html#cb808-21" aria-hidden="true" tabindex="-1"></a>linalg.inv(arr)</span>
<span id="cb808-22"><a href="análisis-de-datos-con-python.html#cb808-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-23"><a href="análisis-de-datos-con-python.html#cb808-23" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> optimize</span>
<span id="cb808-24"><a href="análisis-de-datos-con-python.html#cb808-24" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb808-25"><a href="análisis-de-datos-con-python.html#cb808-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-26"><a href="análisis-de-datos-con-python.html#cb808-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb808-27"><a href="análisis-de-datos-con-python.html#cb808-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">10</span><span class="op">*</span>np.sin(x)</span>
<span id="cb808-28"><a href="análisis-de-datos-con-python.html#cb808-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb808-29"><a href="análisis-de-datos-con-python.html#cb808-29" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="op">-</span><span class="dv">10</span>, <span class="dv">10</span>, <span class="fl">0.1</span>)</span>
<span id="cb808-30"><a href="análisis-de-datos-con-python.html#cb808-30" aria-hidden="true" tabindex="-1"></a>plt.plot(x, f(x)) </span>
<span id="cb808-31"><a href="análisis-de-datos-con-python.html#cb808-31" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<ul>
<li><p>Mínimo global: corresponde al valor mínimo en el dominio de la función.</p></li>
<li><p>Mínimo local: corresponde al valor mínimo en una región particular de la curva.</p></li>
<li><p>En el ejemplo tenemos un mínimo local y un mínimo global.</p></li>
<li><p>Mediante un algoritmo de scipy podemos encontrar estos valores, por ejemplo podemos usar la función fmin_bfgs (método BFGS) para encontrar el mínimo.</p></li>
</ul>
<div class="sourceCode" id="cb809"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb809-1"><a href="análisis-de-datos-con-python.html#cb809-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Usamos el código optmize, la función fmin_bfgs</span></span>
<span id="cb809-2"><a href="análisis-de-datos-con-python.html#cb809-2" aria-hidden="true" tabindex="-1"></a><span class="co"># La sintaxis es fmin_bfgs(función a optimizar, valor inicial)</span></span>
<span id="cb809-3"><a href="análisis-de-datos-con-python.html#cb809-3" aria-hidden="true" tabindex="-1"></a>opt <span class="op">=</span> optimize.fmin_bfgs(f, <span class="dv">0</span>)</span>
<span id="cb809-4"><a href="análisis-de-datos-con-python.html#cb809-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(opt)</span>
<span id="cb809-5"><a href="análisis-de-datos-con-python.html#cb809-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb809-6"><a href="análisis-de-datos-con-python.html#cb809-6" aria-hidden="true" tabindex="-1"></a><span class="co">#El resultado nos entrega: </span></span>
<span id="cb809-7"><a href="análisis-de-datos-con-python.html#cb809-7" aria-hidden="true" tabindex="-1"></a><span class="co">#1) Valor de la función evaluada en el punto mínimo</span></span>
<span id="cb809-8"><a href="análisis-de-datos-con-python.html#cb809-8" aria-hidden="true" tabindex="-1"></a><span class="co">#2) Número de iteraciones que se demoró en encontrar el mínimo</span></span>
<span id="cb809-9"><a href="análisis-de-datos-con-python.html#cb809-9" aria-hidden="true" tabindex="-1"></a><span class="co">#3) Número de evaluaciones de la función</span></span>
<span id="cb809-10"><a href="análisis-de-datos-con-python.html#cb809-10" aria-hidden="true" tabindex="-1"></a><span class="co">#4) Número de evaluaciones del gradiente</span></span>
<span id="cb809-11"><a href="análisis-de-datos-con-python.html#cb809-11" aria-hidden="true" tabindex="-1"></a><span class="co">#5) Parámetro que minimiza la función</span></span></code></pre></div>
<ul>
<li>Por la naturaleza del método podemos quedar en el mínimo local si no partimos del “lado correcto”</li>
</ul>
<div class="sourceCode" id="cb810"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb810-1"><a href="análisis-de-datos-con-python.html#cb810-1" aria-hidden="true" tabindex="-1"></a>optimize.fmin_bfgs(f, <span class="dv">3</span>)</span></code></pre></div>
<ul>
<li>Podemos encontrar un mínimo local (dentro de un intervalo), usando fminbound</li>
</ul>
<div class="sourceCode" id="cb811"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb811-1"><a href="análisis-de-datos-con-python.html#cb811-1" aria-hidden="true" tabindex="-1"></a>xmin_local <span class="op">=</span> optimize.fminbound(f, <span class="dv">0</span>, <span class="dv">10</span>)    </span>
<span id="cb811-2"><a href="análisis-de-datos-con-python.html#cb811-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(xmin_local)</span>
<span id="cb811-3"><a href="análisis-de-datos-con-python.html#cb811-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb811-4"><a href="análisis-de-datos-con-python.html#cb811-4" aria-hidden="true" tabindex="-1"></a>root <span class="op">=</span> optimize.fsolve(f, <span class="dv">1</span>)  <span class="co"># our initial guess is 1</span></span>
<span id="cb811-5"><a href="análisis-de-datos-con-python.html#cb811-5" aria-hidden="true" tabindex="-1"></a>root</span></code></pre></div>
<ul>
<li>Si la función tiene más de una raíz, tenemos que cambiar el valor inicial para partir de un punto que nos lleve a la segunda (tercera…) solución</li>
</ul>
<div class="sourceCode" id="cb812"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb812-1"><a href="análisis-de-datos-con-python.html#cb812-1" aria-hidden="true" tabindex="-1"></a>root2 <span class="op">=</span> optimize.fsolve(f, <span class="op">-</span><span class="fl">2.5</span>)</span>
<span id="cb812-2"><a href="análisis-de-datos-con-python.html#cb812-2" aria-hidden="true" tabindex="-1"></a>root2</span>
<span id="cb812-3"><a href="análisis-de-datos-con-python.html#cb812-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb812-4"><a href="análisis-de-datos-con-python.html#cb812-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb812-5"><a href="análisis-de-datos-con-python.html#cb812-5" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(<span class="dv">111</span>)</span>
<span id="cb812-6"><a href="análisis-de-datos-con-python.html#cb812-6" aria-hidden="true" tabindex="-1"></a>ax.plot(x, f(x), <span class="st">&#39;b-&#39;</span>, label<span class="op">=</span><span class="st">&quot;f(x)&quot;</span>)</span>
<span id="cb812-7"><a href="análisis-de-datos-con-python.html#cb812-7" aria-hidden="true" tabindex="-1"></a>xmins <span class="op">=</span> np.array([xmin_global[<span class="dv">0</span>], xmin_local])</span>
<span id="cb812-8"><a href="análisis-de-datos-con-python.html#cb812-8" aria-hidden="true" tabindex="-1"></a>ax.plot(xmins, f(xmins), <span class="st">&#39;go&#39;</span>, label<span class="op">=</span><span class="st">&quot;Minima&quot;</span>)</span>
<span id="cb812-9"><a href="análisis-de-datos-con-python.html#cb812-9" aria-hidden="true" tabindex="-1"></a>roots <span class="op">=</span> np.array([root, root2])</span>
<span id="cb812-10"><a href="análisis-de-datos-con-python.html#cb812-10" aria-hidden="true" tabindex="-1"></a>ax.plot(roots, f(roots), <span class="st">&#39;kv&#39;</span>, label<span class="op">=</span><span class="st">&quot;Roots&quot;</span>)</span>
<span id="cb812-11"><a href="análisis-de-datos-con-python.html#cb812-11" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb812-12"><a href="análisis-de-datos-con-python.html#cb812-12" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">&#39;x&#39;</span>)</span>
<span id="cb812-13"><a href="análisis-de-datos-con-python.html#cb812-13" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">&#39;f(x)&#39;</span>)</span></code></pre></div>
<ul>
<li>Supongamos que f tiene un poco de ruido</li>
</ul>
<div class="sourceCode" id="cb813"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb813-1"><a href="análisis-de-datos-con-python.html#cb813-1" aria-hidden="true" tabindex="-1"></a>xdata <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">10</span>, <span class="dv">10</span>, num<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb813-2"><a href="análisis-de-datos-con-python.html#cb813-2" aria-hidden="true" tabindex="-1"></a>ydata <span class="op">=</span> f(xdata) <span class="op">+</span> np.random.randn(xdata.size)</span>
<span id="cb813-3"><a href="análisis-de-datos-con-python.html#cb813-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb813-4"><a href="análisis-de-datos-con-python.html#cb813-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb813-5"><a href="análisis-de-datos-con-python.html#cb813-5" aria-hidden="true" tabindex="-1"></a>plt.plot(x, f(x), <span class="st">&#39;b-&#39;</span>, label<span class="op">=</span><span class="st">&quot;f(x)&quot;</span>)</span>
<span id="cb813-6"><a href="análisis-de-datos-con-python.html#cb813-6" aria-hidden="true" tabindex="-1"></a>plt.plot(xdata, ydata, color<span class="op">=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p>La forma funcional original es <span class="math inline">\(f(x)=x2+10∗sin(x)\)</span></p>
<p>Entonces podemos generalizar mediante</p>
<p><span class="math display">\[f(x,a,b)=a∗x^2+b∗sin(x)\]</span></p>
<p>Mediante curve_fit() podemos encontrar los valores de a y b.</p>
<div class="sourceCode" id="cb814"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb814-1"><a href="análisis-de-datos-con-python.html#cb814-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2(x,a ,b):</span>
<span id="cb814-2"><a href="análisis-de-datos-con-python.html#cb814-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">*</span>x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> b<span class="op">**</span>np.sin(x)</span>
<span id="cb814-3"><a href="análisis-de-datos-con-python.html#cb814-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-4"><a href="análisis-de-datos-con-python.html#cb814-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Valor inicial</span></span>
<span id="cb814-5"><a href="análisis-de-datos-con-python.html#cb814-5" aria-hidden="true" tabindex="-1"></a>guess <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">2</span>]</span>
<span id="cb814-6"><a href="análisis-de-datos-con-python.html#cb814-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-7"><a href="análisis-de-datos-con-python.html#cb814-7" aria-hidden="true" tabindex="-1"></a><span class="co"># curve_fit(f, xdata, ydata, valor inicial)</span></span>
<span id="cb814-8"><a href="análisis-de-datos-con-python.html#cb814-8" aria-hidden="true" tabindex="-1"></a>params, params_covariance <span class="op">=</span> optimize.curve_fit(f2, xdata, ydata, guess)</span>
<span id="cb814-9"><a href="análisis-de-datos-con-python.html#cb814-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-10"><a href="análisis-de-datos-con-python.html#cb814-10" aria-hidden="true" tabindex="-1"></a><span class="co"># retorna: </span></span>
<span id="cb814-11"><a href="análisis-de-datos-con-python.html#cb814-11" aria-hidden="true" tabindex="-1"></a><span class="co">#1) Valores óptimos que minimizan f(xdata) - ydata</span></span>
<span id="cb814-12"><a href="análisis-de-datos-con-python.html#cb814-12" aria-hidden="true" tabindex="-1"></a><span class="co">#2) Covarianza estimada de valores óptimos</span></span>
<span id="cb814-13"><a href="análisis-de-datos-con-python.html#cb814-13" aria-hidden="true" tabindex="-1"></a>params</span>
<span id="cb814-14"><a href="análisis-de-datos-con-python.html#cb814-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-15"><a href="análisis-de-datos-con-python.html#cb814-15" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb814-16"><a href="análisis-de-datos-con-python.html#cb814-16" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(<span class="dv">111</span>)</span>
<span id="cb814-17"><a href="análisis-de-datos-con-python.html#cb814-17" aria-hidden="true" tabindex="-1"></a>ax.plot(x, f(x), <span class="st">&#39;b-&#39;</span>, label<span class="op">=</span><span class="st">&quot;f(x)&quot;</span>)</span>
<span id="cb814-18"><a href="análisis-de-datos-con-python.html#cb814-18" aria-hidden="true" tabindex="-1"></a>ax.plot(x, f2(x, <span class="op">*</span>params), <span class="st">&#39;r--&#39;</span>, label<span class="op">=</span><span class="st">&quot;Curve fit result&quot;</span>)</span>
<span id="cb814-19"><a href="análisis-de-datos-con-python.html#cb814-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb814-20"><a href="análisis-de-datos-con-python.html#cb814-20" aria-hidden="true" tabindex="-1"></a>xmins <span class="op">=</span> np.array([xmin_global[<span class="dv">0</span>], xmin_local])</span>
<span id="cb814-21"><a href="análisis-de-datos-con-python.html#cb814-21" aria-hidden="true" tabindex="-1"></a>ax.plot(xmins, f(xmins), <span class="st">&#39;go&#39;</span>, label<span class="op">=</span><span class="st">&quot;Minima&quot;</span>)</span>
<span id="cb814-22"><a href="análisis-de-datos-con-python.html#cb814-22" aria-hidden="true" tabindex="-1"></a>roots <span class="op">=</span> np.array([root, root2])</span>
<span id="cb814-23"><a href="análisis-de-datos-con-python.html#cb814-23" aria-hidden="true" tabindex="-1"></a>ax.plot(roots, f(roots), <span class="st">&#39;kv&#39;</span>, label<span class="op">=</span><span class="st">&quot;Roots&quot;</span>)</span>
<span id="cb814-24"><a href="análisis-de-datos-con-python.html#cb814-24" aria-hidden="true" tabindex="-1"></a>ax.legend()</span>
<span id="cb814-25"><a href="análisis-de-datos-con-python.html#cb814-25" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">&#39;x&#39;</span>)</span>
<span id="cb814-26"><a href="análisis-de-datos-con-python.html#cb814-26" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">&#39;f(x)&#39;</span>)</span></code></pre></div>
<div id="aplicación-de-predicción" class="section level4 hasAnchor" number="4.7.1.1">
<h4><span class="header-section-number">4.7.1.1</span> Aplicación de predicción<a href="análisis-de-datos-con-python.html#aplicación-de-predicción" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb815"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb815-1"><a href="análisis-de-datos-con-python.html#cb815-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">2</span>],    </span>
<span id="cb815-2"><a href="análisis-de-datos-con-python.html#cb815-2" aria-hidden="true" tabindex="-1"></a>     [<span class="dv">3</span>, <span class="dv">4</span>]]</span>
<span id="cb815-3"><a href="análisis-de-datos-con-python.html#cb815-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-4"><a href="análisis-de-datos-con-python.html#cb815-4" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> [[<span class="dv">11</span>, <span class="dv">12</span>],</span>
<span id="cb815-5"><a href="análisis-de-datos-con-python.html#cb815-5" aria-hidden="true" tabindex="-1"></a>     [<span class="dv">13</span>, <span class="dv">14</span>]]</span>
<span id="cb815-6"><a href="análisis-de-datos-con-python.html#cb815-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-7"><a href="análisis-de-datos-con-python.html#cb815-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(A)</span>
<span id="cb815-8"><a href="análisis-de-datos-con-python.html#cb815-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-9"><a href="análisis-de-datos-con-python.html#cb815-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(B)</span>
<span id="cb815-10"><a href="análisis-de-datos-con-python.html#cb815-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-11"><a href="análisis-de-datos-con-python.html#cb815-11" aria-hidden="true" tabindex="-1"></a>A_np <span class="op">=</span> np.array(A)</span>
<span id="cb815-12"><a href="análisis-de-datos-con-python.html#cb815-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-13"><a href="análisis-de-datos-con-python.html#cb815-13" aria-hidden="true" tabindex="-1"></a>B_np <span class="op">=</span> np.array(B)</span>
<span id="cb815-14"><a href="análisis-de-datos-con-python.html#cb815-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-15"><a href="análisis-de-datos-con-python.html#cb815-15" aria-hidden="true" tabindex="-1"></a>A_np <span class="op">*</span> B_np</span>
<span id="cb815-16"><a href="análisis-de-datos-con-python.html#cb815-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-17"><a href="análisis-de-datos-con-python.html#cb815-17" aria-hidden="true" tabindex="-1"></a>A_np<span class="op">@</span>B_np</span>
<span id="cb815-18"><a href="análisis-de-datos-con-python.html#cb815-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb815-19"><a href="análisis-de-datos-con-python.html#cb815-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb815-20"><a href="análisis-de-datos-con-python.html#cb815-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb815-21"><a href="análisis-de-datos-con-python.html#cb815-21" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">0</span>)</span></code></pre></div>
<p><span class="math inline">\(y_i = 0.5 + x_i - 0.1x^2 + \epsilon_i\)</span></p>
<div class="sourceCode" id="cb816"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb816-1"><a href="análisis-de-datos-con-python.html#cb816-1" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">2000</span></span>
<span id="cb816-2"><a href="análisis-de-datos-con-python.html#cb816-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.normal(<span class="dv">5</span>,<span class="dv">2</span>,T)  <span class="co">## media, sd, largo de serie</span></span>
<span id="cb816-3"><a href="análisis-de-datos-con-python.html#cb816-3" aria-hidden="true" tabindex="-1"></a>ϵ <span class="op">=</span> np.random.normal(<span class="dv">0</span>,<span class="dv">1</span>,T)</span>
<span id="cb816-4"><a href="análisis-de-datos-con-python.html#cb816-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="fl">0.5</span> <span class="op">+</span> x <span class="op">-</span> <span class="fl">0.1</span><span class="op">*</span>x<span class="op">**</span><span class="dv">2</span><span class="op">+</span>ϵ</span>
<span id="cb816-5"><a href="análisis-de-datos-con-python.html#cb816-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb816-6"><a href="análisis-de-datos-con-python.html#cb816-6" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb816-7"><a href="análisis-de-datos-con-python.html#cb816-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb816-8"><a href="análisis-de-datos-con-python.html#cb816-8" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb816-9"><a href="análisis-de-datos-con-python.html#cb816-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;x&#39;</span>)</span>
<span id="cb816-10"><a href="análisis-de-datos-con-python.html#cb816-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;y&#39;</span>)</span></code></pre></div>
</div>
<div id="polonomio-de-orden-1" class="section level4 hasAnchor" number="4.7.1.2">
<h4><span class="header-section-number">4.7.1.2</span> Polonomio de orden 1<a href="análisis-de-datos-con-python.html#polonomio-de-orden-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb817"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb817-1"><a href="análisis-de-datos-con-python.html#cb817-1" aria-hidden="true" tabindex="-1"></a>X_1 <span class="op">=</span> np.column_stack([np.ones_like(x),x])</span>
<span id="cb817-2"><a href="análisis-de-datos-con-python.html#cb817-2" aria-hidden="true" tabindex="-1"></a>X_1[<span class="dv">0</span>:<span class="dv">3</span>,:]</span></code></pre></div>
<p>np.linalg.lstq -&gt; Return the least-squares solution to a linear matrix equation.
<a href="https://numpy.org/doc/stable/reference/generated/numpy.linalg.lstsq.html" class="uri">https://numpy.org/doc/stable/reference/generated/numpy.linalg.lstsq.html</a></p>
<div class="sourceCode" id="cb818"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb818-1"><a href="análisis-de-datos-con-python.html#cb818-1" aria-hidden="true" tabindex="-1"></a>β_1 <span class="op">=</span> np.linalg.lstsq(X_1,y,rcond<span class="op">=</span><span class="va">None</span>)[<span class="dv">0</span>]</span>
<span id="cb818-2"><a href="análisis-de-datos-con-python.html#cb818-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(β_1)</span>
<span id="cb818-3"><a href="análisis-de-datos-con-python.html#cb818-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb818-4"><a href="análisis-de-datos-con-python.html#cb818-4" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb818-5"><a href="análisis-de-datos-con-python.html#cb818-5" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,X_1<span class="op">@</span>β_1,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</span></code></pre></div>
</div>
<div id="polinomio-de-orden-2" class="section level4 hasAnchor" number="4.7.1.3">
<h4><span class="header-section-number">4.7.1.3</span> Polinomio de orden 2<a href="análisis-de-datos-con-python.html#polinomio-de-orden-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb819"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb819-1"><a href="análisis-de-datos-con-python.html#cb819-1" aria-hidden="true" tabindex="-1"></a>X_2 <span class="op">=</span> np.column_stack([np.ones_like(x),x,x<span class="op">**</span><span class="dv">2</span>])</span>
<span id="cb819-2"><a href="análisis-de-datos-con-python.html#cb819-2" aria-hidden="true" tabindex="-1"></a>X_2[<span class="dv">0</span>:<span class="dv">3</span>,:]</span>
<span id="cb819-3"><a href="análisis-de-datos-con-python.html#cb819-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb819-4"><a href="análisis-de-datos-con-python.html#cb819-4" aria-hidden="true" tabindex="-1"></a>β_2 <span class="op">=</span> np.linalg.lstsq(X_2,y,rcond<span class="op">=</span><span class="va">None</span>)[<span class="dv">0</span>]</span>
<span id="cb819-5"><a href="análisis-de-datos-con-python.html#cb819-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(β_2)</span>
<span id="cb819-6"><a href="análisis-de-datos-con-python.html#cb819-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb819-7"><a href="análisis-de-datos-con-python.html#cb819-7" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb819-8"><a href="análisis-de-datos-con-python.html#cb819-8" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,X_2<span class="op">@</span>β_2,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;black&#39;</span>)</span>
<span id="cb819-9"><a href="análisis-de-datos-con-python.html#cb819-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb819-10"><a href="análisis-de-datos-con-python.html#cb819-10" aria-hidden="true" tabindex="-1"></a>K <span class="op">=</span><span class="dv">10</span></span>
<span id="cb819-11"><a href="análisis-de-datos-con-python.html#cb819-11" aria-hidden="true" tabindex="-1"></a>X_K <span class="op">=</span> np.column_stack([x<span class="op">**</span>k <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(K<span class="op">+</span><span class="dv">1</span>)])</span>
<span id="cb819-12"><a href="análisis-de-datos-con-python.html#cb819-12" aria-hidden="true" tabindex="-1"></a><span class="co">#X_K[0:3,:]</span></span>
<span id="cb819-13"><a href="análisis-de-datos-con-python.html#cb819-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb819-14"><a href="análisis-de-datos-con-python.html#cb819-14" aria-hidden="true" tabindex="-1"></a>β_K <span class="op">=</span> np.linalg.lstsq(X_K,y,rcond<span class="op">=</span><span class="va">None</span>)[<span class="dv">0</span>]</span>
<span id="cb819-15"><a href="análisis-de-datos-con-python.html#cb819-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(β_K)</span>
<span id="cb819-16"><a href="análisis-de-datos-con-python.html#cb819-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb819-17"><a href="análisis-de-datos-con-python.html#cb819-17" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,y,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb819-18"><a href="análisis-de-datos-con-python.html#cb819-18" aria-hidden="true" tabindex="-1"></a>plt.scatter(x,X_K<span class="op">@</span>β_K,s<span class="op">=</span><span class="dv">5</span>,color<span class="op">=</span><span class="st">&#39;orange&#39;</span>)</span>
<span id="cb819-19"><a href="análisis-de-datos-con-python.html#cb819-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb819-20"><a href="análisis-de-datos-con-python.html#cb819-20" aria-hidden="true" tabindex="-1"></a>ECM_1 <span class="op">=</span> np.mean((y<span class="op">-</span>X_1<span class="op">@</span>β_1)<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb819-21"><a href="análisis-de-datos-con-python.html#cb819-21" aria-hidden="true" tabindex="-1"></a>ECM_2 <span class="op">=</span> np.mean((y<span class="op">-</span>X_2<span class="op">@</span>β_2)<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb819-22"><a href="análisis-de-datos-con-python.html#cb819-22" aria-hidden="true" tabindex="-1"></a>ECM_K <span class="op">=</span> np.mean((y<span class="op">-</span>X_K<span class="op">@</span>β_K)<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb819-23"><a href="análisis-de-datos-con-python.html#cb819-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ECM_1,ECM_2,ECM_K)</span></code></pre></div>
</div>
</div>
<div id="modelo-de-regresión-lineal" class="section level3 hasAnchor" number="4.7.2">
<h3><span class="header-section-number">4.7.2</span> Modelo de regresión lineal<a href="análisis-de-datos-con-python.html#modelo-de-regresión-lineal" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="introducción-2" class="section level4 hasAnchor" number="4.7.2.1">
<h4><span class="header-section-number">4.7.2.1</span> Introducción<a href="análisis-de-datos-con-python.html#introducción-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb820"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb820-1"><a href="análisis-de-datos-con-python.html#cb820-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb820-2"><a href="análisis-de-datos-con-python.html#cb820-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb820-3"><a href="análisis-de-datos-con-python.html#cb820-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb820-4"><a href="análisis-de-datos-con-python.html#cb820-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb820-5"><a href="análisis-de-datos-con-python.html#cb820-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb820-6"><a href="análisis-de-datos-con-python.html#cb820-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats</span>
<span id="cb820-7"><a href="análisis-de-datos-con-python.html#cb820-7" aria-hidden="true" tabindex="-1"></a>matplotlib.style.use(<span class="st">&#39;ggplot&#39;</span>)</span>
<span id="cb820-8"><a href="análisis-de-datos-con-python.html#cb820-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb820-9"><a href="análisis-de-datos-con-python.html#cb820-9" aria-hidden="true" tabindex="-1"></a>mtcars.head()</span>
<span id="cb820-10"><a href="análisis-de-datos-con-python.html#cb820-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb820-11"><a href="análisis-de-datos-con-python.html#cb820-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Load mtcars data set</span></span>
<span id="cb820-12"><a href="análisis-de-datos-con-python.html#cb820-12" aria-hidden="true" tabindex="-1"></a>mtcars <span class="op">=</span> pd.read_csv(<span class="st">&quot;mtcars.csv&quot;</span>)</span>
<span id="cb820-13"><a href="análisis-de-datos-con-python.html#cb820-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb820-14"><a href="análisis-de-datos-con-python.html#cb820-14" aria-hidden="true" tabindex="-1"></a>mtcars.plot(kind<span class="op">=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb820-15"><a href="análisis-de-datos-con-python.html#cb820-15" aria-hidden="true" tabindex="-1"></a>           x<span class="op">=</span><span class="st">&quot;wt&quot;</span>,</span>
<span id="cb820-16"><a href="análisis-de-datos-con-python.html#cb820-16" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb820-17"><a href="análisis-de-datos-con-python.html#cb820-17" aria-hidden="true" tabindex="-1"></a>           figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb820-18"><a href="análisis-de-datos-con-python.html#cb820-18" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;black&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li>La biblioteca scikit-learn de Python contiene una amplia gama de funciones para el modelado predictivo. Vamos a cargar su función de entrenamiento de regresión lineal y a ajustar una línea a los datos de mtcars:</li>
</ul>
<div class="sourceCode" id="cb821"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb821-1"><a href="análisis-de-datos-con-python.html#cb821-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> linear_model</span>
<span id="cb821-2"><a href="análisis-de-datos-con-python.html#cb821-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb821-3"><a href="análisis-de-datos-con-python.html#cb821-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo inicial</span></span>
<span id="cb821-4"><a href="análisis-de-datos-con-python.html#cb821-4" aria-hidden="true" tabindex="-1"></a>regression_model <span class="op">=</span> linear_model.LinearRegression()</span>
<span id="cb821-5"><a href="análisis-de-datos-con-python.html#cb821-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb821-6"><a href="análisis-de-datos-con-python.html#cb821-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Entrenar al modelo</span></span>
<span id="cb821-7"><a href="análisis-de-datos-con-python.html#cb821-7" aria-hidden="true" tabindex="-1"></a>regression_model.fit(X <span class="op">=</span> pd.DataFrame(mtcars[<span class="st">&quot;wt&quot;</span>]), </span>
<span id="cb821-8"><a href="análisis-de-datos-con-python.html#cb821-8" aria-hidden="true" tabindex="-1"></a>                     y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb821-9"><a href="análisis-de-datos-con-python.html#cb821-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb821-10"><a href="análisis-de-datos-con-python.html#cb821-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequear coeficientes</span></span>
<span id="cb821-11"><a href="análisis-de-datos-con-python.html#cb821-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(regression_model.intercept_)</span>
<span id="cb821-12"><a href="análisis-de-datos-con-python.html#cb821-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb821-13"><a href="análisis-de-datos-con-python.html#cb821-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(regression_model.coef_)</span></code></pre></div>
<p>Podemos tener una idea de la parte de la varianza de la variable de respuesta que explica el modelo utilizando la función model.score():</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb822-1"><a href="análisis-de-datos-con-python.html#cb822-1" aria-hidden="true" tabindex="-1"></a>regression_model.score(X <span class="op">=</span> pd.DataFrame(mtcars[<span class="st">&quot;wt&quot;</span>]), </span>
<span id="cb822-2"><a href="análisis-de-datos-con-python.html#cb822-2" aria-hidden="true" tabindex="-1"></a>                       y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span></code></pre></div>
<ul>
<li><p>El resultado de la función de puntuación para la regresión lineal es el “R-cuadrado”, un valor que va de 0 a 1 y que describe la proporción de la varianza de la variable de respuesta que explica el modelo. En este caso, el peso del coche explica aproximadamente el 75% de la varianza en mpg.</p></li>
<li><p>La medida R-cuadrado se basa en los residuos: las diferencias entre lo que el modelo predice para cada punto de datos y el valor real de cada punto de datos. Podemos extraer los residuos del modelo haciendo una predicción con el modelo sobre los datos y luego restando el valor real de cada predicción:</p></li>
</ul>
<div class="sourceCode" id="cb823"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb823-1"><a href="análisis-de-datos-con-python.html#cb823-1" aria-hidden="true" tabindex="-1"></a>train_prediction <span class="op">=</span> regression_model.predict(X <span class="op">=</span> pd.DataFrame(mtcars[<span class="st">&quot;wt&quot;</span>]))</span>
<span id="cb823-2"><a href="análisis-de-datos-con-python.html#cb823-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb823-3"><a href="análisis-de-datos-con-python.html#cb823-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Actual - prediction = residuals</span></span>
<span id="cb823-4"><a href="análisis-de-datos-con-python.html#cb823-4" aria-hidden="true" tabindex="-1"></a>residuals <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>] <span class="op">-</span> train_prediction</span>
<span id="cb823-5"><a href="análisis-de-datos-con-python.html#cb823-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb823-6"><a href="análisis-de-datos-con-python.html#cb823-6" aria-hidden="true" tabindex="-1"></a>residuals.describe()</span>
<span id="cb823-7"><a href="análisis-de-datos-con-python.html#cb823-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb823-8"><a href="análisis-de-datos-con-python.html#cb823-8" aria-hidden="true" tabindex="-1"></a>SSResiduals <span class="op">=</span> (residuals<span class="op">**</span><span class="dv">2</span>).<span class="bu">sum</span>()</span>
<span id="cb823-9"><a href="análisis-de-datos-con-python.html#cb823-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb823-10"><a href="análisis-de-datos-con-python.html#cb823-10" aria-hidden="true" tabindex="-1"></a>SSTotal <span class="op">=</span> ((mtcars[<span class="st">&quot;mpg&quot;</span>] <span class="op">-</span> mtcars[<span class="st">&quot;mpg&quot;</span>].mean())<span class="op">**</span><span class="dv">2</span>).<span class="bu">sum</span>()</span>
<span id="cb823-11"><a href="análisis-de-datos-con-python.html#cb823-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb823-12"><a href="análisis-de-datos-con-python.html#cb823-12" aria-hidden="true" tabindex="-1"></a><span class="co"># R-squared</span></span>
<span id="cb823-13"><a href="análisis-de-datos-con-python.html#cb823-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="op">-</span> (SSResiduals<span class="op">/</span>SSTotal)</span></code></pre></div>
<p>Ahora que tenemos un modelo lineal, vamos a trazar la línea a la que se ajusta en nuestro gráfico de dispersión para tener una idea de lo bien que se ajusta a los datos:</p>
<div class="sourceCode" id="cb824"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb824-1"><a href="análisis-de-datos-con-python.html#cb824-1" aria-hidden="true" tabindex="-1"></a>mtcars.plot(kind<span class="op">=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb824-2"><a href="análisis-de-datos-con-python.html#cb824-2" aria-hidden="true" tabindex="-1"></a>           x<span class="op">=</span><span class="st">&quot;wt&quot;</span>,</span>
<span id="cb824-3"><a href="análisis-de-datos-con-python.html#cb824-3" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb824-4"><a href="análisis-de-datos-con-python.html#cb824-4" aria-hidden="true" tabindex="-1"></a>           figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb824-5"><a href="análisis-de-datos-con-python.html#cb824-5" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb824-6"><a href="análisis-de-datos-con-python.html#cb824-6" aria-hidden="true" tabindex="-1"></a>           xlim <span class="op">=</span> (<span class="dv">0</span>,<span class="dv">7</span>))</span>
<span id="cb824-7"><a href="análisis-de-datos-con-python.html#cb824-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb824-8"><a href="análisis-de-datos-con-python.html#cb824-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficamos</span></span>
<span id="cb824-9"><a href="análisis-de-datos-con-python.html#cb824-9" aria-hidden="true" tabindex="-1"></a>plt.plot(mtcars[<span class="st">&quot;wt&quot;</span>],      <span class="co"># Variables explicativas</span></span>
<span id="cb824-10"><a href="análisis-de-datos-con-python.html#cb824-10" aria-hidden="true" tabindex="-1"></a>         train_prediction,  <span class="co"># Variables predichas</span></span>
<span id="cb824-11"><a href="análisis-de-datos-con-python.html#cb824-11" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>La línea de regresión parece un ajuste razonable y se ajusta a nuestra intuición: a medida que aumenta el peso del coche, cabe esperar que el consumo de combustible disminuya.</p>
<p>Los valores atípicos pueden tener una gran influencia en los modelos de regresión lineal: como la regresión consiste en minimizar los residuos al cuadrado, los residuos grandes tienen una influencia desproporcionada en el modelo. Trazar el resultado nos ayuda a detectar los valores atípicos influyentes. En este caso no parece haber ningún valor atípico influyente. Añadamos un valor atípico -un coche superpesado de bajo consumo- y tracemos un nuevo modelo de regresión:</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb825-1"><a href="análisis-de-datos-con-python.html#cb825-1" aria-hidden="true" tabindex="-1"></a>mtcars_subset <span class="op">=</span> mtcars[[<span class="st">&quot;mpg&quot;</span>,<span class="st">&quot;wt&quot;</span>]]</span>
<span id="cb825-2"><a href="análisis-de-datos-con-python.html#cb825-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-3"><a href="análisis-de-datos-con-python.html#cb825-3" aria-hidden="true" tabindex="-1"></a>super_car <span class="op">=</span> pd.DataFrame({<span class="st">&quot;mpg&quot;</span>:<span class="dv">50</span>,<span class="st">&quot;wt&quot;</span>:<span class="dv">10</span>}, index<span class="op">=</span>[<span class="st">&quot;super&quot;</span>])</span>
<span id="cb825-4"><a href="análisis-de-datos-con-python.html#cb825-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-5"><a href="análisis-de-datos-con-python.html#cb825-5" aria-hidden="true" tabindex="-1"></a>new_cars <span class="op">=</span> mtcars_subset.append(super_car)</span>
<span id="cb825-6"><a href="análisis-de-datos-con-python.html#cb825-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-7"><a href="análisis-de-datos-con-python.html#cb825-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize model</span></span>
<span id="cb825-8"><a href="análisis-de-datos-con-python.html#cb825-8" aria-hidden="true" tabindex="-1"></a>regression_model <span class="op">=</span> linear_model.LinearRegression()</span>
<span id="cb825-9"><a href="análisis-de-datos-con-python.html#cb825-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-10"><a href="análisis-de-datos-con-python.html#cb825-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model using the new_cars data</span></span>
<span id="cb825-11"><a href="análisis-de-datos-con-python.html#cb825-11" aria-hidden="true" tabindex="-1"></a>regression_model.fit(X <span class="op">=</span> pd.DataFrame(new_cars[<span class="st">&quot;wt&quot;</span>]), </span>
<span id="cb825-12"><a href="análisis-de-datos-con-python.html#cb825-12" aria-hidden="true" tabindex="-1"></a>                     y <span class="op">=</span> new_cars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb825-13"><a href="análisis-de-datos-con-python.html#cb825-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-14"><a href="análisis-de-datos-con-python.html#cb825-14" aria-hidden="true" tabindex="-1"></a>train_prediction2 <span class="op">=</span> regression_model.predict(X <span class="op">=</span> pd.DataFrame(new_cars[<span class="st">&quot;wt&quot;</span>]))</span>
<span id="cb825-15"><a href="análisis-de-datos-con-python.html#cb825-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-16"><a href="análisis-de-datos-con-python.html#cb825-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the new model</span></span>
<span id="cb825-17"><a href="análisis-de-datos-con-python.html#cb825-17" aria-hidden="true" tabindex="-1"></a>new_cars.plot(kind<span class="op">=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb825-18"><a href="análisis-de-datos-con-python.html#cb825-18" aria-hidden="true" tabindex="-1"></a>           x<span class="op">=</span><span class="st">&quot;wt&quot;</span>,</span>
<span id="cb825-19"><a href="análisis-de-datos-con-python.html#cb825-19" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb825-20"><a href="análisis-de-datos-con-python.html#cb825-20" aria-hidden="true" tabindex="-1"></a>           figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb825-21"><a href="análisis-de-datos-con-python.html#cb825-21" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;black&quot;</span>, xlim<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">11</span>), ylim<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">52</span>))</span>
<span id="cb825-22"><a href="análisis-de-datos-con-python.html#cb825-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-23"><a href="análisis-de-datos-con-python.html#cb825-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot regression line</span></span>
<span id="cb825-24"><a href="análisis-de-datos-con-python.html#cb825-24" aria-hidden="true" tabindex="-1"></a>plt.plot(new_cars[<span class="st">&quot;wt&quot;</span>],     <span class="co"># Explanatory variable</span></span>
<span id="cb825-25"><a href="análisis-de-datos-con-python.html#cb825-25" aria-hidden="true" tabindex="-1"></a>         train_prediction2,  <span class="co"># Predicted values</span></span>
<span id="cb825-26"><a href="análisis-de-datos-con-python.html#cb825-26" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>Aunque se trata de un caso extremo y artificial, el gráfico anterior ilustra la influencia que puede tener un solo valor atípico en un modelo de regresión lineal.</p></li>
<li><p>En un modelo de regresión lineal que se comporte bien, nos gustaría que los residuos se distribuyeran de forma aproximadamente normal. Es decir, nos gustaría que el error se distribuyera de forma más o menos uniforme por encima y por debajo de la línea de regresión.</p></li>
<li><p>Podemos investigar la normalidad de los residuos con un gráfico Q-Q (cuantil-cuantil). Haga un qqplot pasando los residuos a la función stats.probplot() en la biblioteca scipy.stats:</p></li>
</ul>
<div class="sourceCode" id="cb826"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb826-1"><a href="análisis-de-datos-con-python.html#cb826-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>))</span>
<span id="cb826-2"><a href="análisis-de-datos-con-python.html#cb826-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb826-3"><a href="análisis-de-datos-con-python.html#cb826-3" aria-hidden="true" tabindex="-1"></a>stats.probplot(residuals, dist<span class="op">=</span><span class="st">&quot;norm&quot;</span>, plot<span class="op">=</span>plt)<span class="op">;</span></span></code></pre></div>
<ul>
<li><p>Cuando los residuos se distribuyen normalmente, tienden a situarse a lo largo de la línea recta en el gráfico Q-Q. En este caso, los residuos parecen seguir un patrón ligeramente no lineal: los residuos se inclinan un poco lejos de la línea de normalidad en cada extremo. Esto es una indicación de que una simple línea recta podría no ser suficiente para describir completamente la relación entre el peso y el mpg.</p></li>
<li><p>Después de hacer las predicciones del modelo, es útil tener algún tipo de métrica para evaluar lo bien que funcionó el modelo. El R-cuadrado ajustado es una medida útil, pero sólo se aplica al modelo de regresión en sí: nos gustaría tener alguna métrica de evaluación universal que nos permita comparar el rendimiento de diferentes tipos de modelos.</p></li>
<li><p>El error medio cuadrático (RMSE) es una métrica de evaluación común para las predicciones con números reales. El error medio cuadrático es la raíz cuadrada de la media del error cuadrático (residuos). Si recuerda, escribimos una función para calcular el RMSE en la lección 12:</p></li>
</ul>
<div class="sourceCode" id="cb827"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb827-1"><a href="análisis-de-datos-con-python.html#cb827-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> rmse(predicted, targets):</span>
<span id="cb827-2"><a href="análisis-de-datos-con-python.html#cb827-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb827-3"><a href="análisis-de-datos-con-python.html#cb827-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Computes root mean squared error of two numpy ndarrays</span></span>
<span id="cb827-4"><a href="análisis-de-datos-con-python.html#cb827-4" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb827-5"><a href="análisis-de-datos-con-python.html#cb827-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb827-6"><a href="análisis-de-datos-con-python.html#cb827-6" aria-hidden="true" tabindex="-1"></a><span class="co">        predicted: an ndarray of predictions</span></span>
<span id="cb827-7"><a href="análisis-de-datos-con-python.html#cb827-7" aria-hidden="true" tabindex="-1"></a><span class="co">        targets: an ndarray of target values</span></span>
<span id="cb827-8"><a href="análisis-de-datos-con-python.html#cb827-8" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb827-9"><a href="análisis-de-datos-con-python.html#cb827-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb827-10"><a href="análisis-de-datos-con-python.html#cb827-10" aria-hidden="true" tabindex="-1"></a><span class="co">        The root mean squared error as a float</span></span>
<span id="cb827-11"><a href="análisis-de-datos-con-python.html#cb827-11" aria-hidden="true" tabindex="-1"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb827-12"><a href="análisis-de-datos-con-python.html#cb827-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (np.sqrt(np.mean((targets<span class="op">-</span>predicted)<span class="op">**</span><span class="dv">2</span>)))</span>
<span id="cb827-13"><a href="análisis-de-datos-con-python.html#cb827-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb827-14"><a href="análisis-de-datos-con-python.html#cb827-14" aria-hidden="true" tabindex="-1"></a>rmse(train_prediction2, new_cars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb827-15"><a href="análisis-de-datos-con-python.html#cb827-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb827-16"><a href="análisis-de-datos-con-python.html#cb827-16" aria-hidden="true" tabindex="-1"></a>rmse(train_prediction, mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb827-17"><a href="análisis-de-datos-con-python.html#cb827-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb827-18"><a href="análisis-de-datos-con-python.html#cb827-18" aria-hidden="true" tabindex="-1"></a>rmse(train_prediction2, new_cars[<span class="st">&quot;mpg&quot;</span>])</span></code></pre></div>
<p>En lugar de definir su propia función RMSE, puede utilizar la función de error cuadrático medio de la biblioteca scikit-learn y tomar la raíz cuadrada del resultado:</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb828-1"><a href="análisis-de-datos-con-python.html#cb828-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error</span>
<span id="cb828-2"><a href="análisis-de-datos-con-python.html#cb828-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb828-3"><a href="análisis-de-datos-con-python.html#cb828-3" aria-hidden="true" tabindex="-1"></a>RMSE <span class="op">=</span> mean_squared_error(train_prediction, mtcars[<span class="st">&quot;mpg&quot;</span>])<span class="op">**</span><span class="fl">0.5</span></span>
<span id="cb828-4"><a href="análisis-de-datos-con-python.html#cb828-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb828-5"><a href="análisis-de-datos-con-python.html#cb828-5" aria-hidden="true" tabindex="-1"></a>RMSE</span></code></pre></div>
</div>
<div id="agregando-polinomios" class="section level4 hasAnchor" number="4.7.2.2">
<h4><span class="header-section-number">4.7.2.2</span> Agregando polinomios<a href="análisis-de-datos-con-python.html#agregando-polinomios" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb829"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb829-1"><a href="análisis-de-datos-con-python.html#cb829-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Iniciamos el modelo</span></span>
<span id="cb829-2"><a href="análisis-de-datos-con-python.html#cb829-2" aria-hidden="true" tabindex="-1"></a>poly_model <span class="op">=</span> linear_model.LinearRegression()</span>
<span id="cb829-3"><a href="análisis-de-datos-con-python.html#cb829-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb829-4"><a href="análisis-de-datos-con-python.html#cb829-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data frmame</span></span>
<span id="cb829-5"><a href="análisis-de-datos-con-python.html#cb829-5" aria-hidden="true" tabindex="-1"></a>predictors <span class="op">=</span> pd.DataFrame([mtcars[<span class="st">&quot;wt&quot;</span>],           <span class="co"># Include weight</span></span>
<span id="cb829-6"><a href="análisis-de-datos-con-python.html#cb829-6" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">2</span>]).T     <span class="co"># Include weight squared</span></span>
<span id="cb829-7"><a href="análisis-de-datos-con-python.html#cb829-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb829-8"><a href="análisis-de-datos-con-python.html#cb829-8" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;Entrenar&quot; el modelo</span></span>
<span id="cb829-9"><a href="análisis-de-datos-con-python.html#cb829-9" aria-hidden="true" tabindex="-1"></a>poly_model.fit(X <span class="op">=</span> predictors, </span>
<span id="cb829-10"><a href="análisis-de-datos-con-python.html#cb829-10" aria-hidden="true" tabindex="-1"></a>               y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb829-11"><a href="análisis-de-datos-con-python.html#cb829-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb829-12"><a href="análisis-de-datos-con-python.html#cb829-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Chequear</span></span>
<span id="cb829-13"><a href="análisis-de-datos-con-python.html#cb829-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Model intercept&quot;</span>)</span>
<span id="cb829-14"><a href="análisis-de-datos-con-python.html#cb829-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poly_model.intercept_)</span>
<span id="cb829-15"><a href="análisis-de-datos-con-python.html#cb829-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb829-16"><a href="análisis-de-datos-con-python.html#cb829-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Model Coefficients&quot;</span>)</span>
<span id="cb829-17"><a href="análisis-de-datos-con-python.html#cb829-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poly_model.coef_)</span>
<span id="cb829-18"><a href="análisis-de-datos-con-python.html#cb829-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb829-19"><a href="análisis-de-datos-con-python.html#cb829-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb829-20"><a href="análisis-de-datos-con-python.html#cb829-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Model Accuracy:&quot;</span>)</span>
<span id="cb829-21"><a href="análisis-de-datos-con-python.html#cb829-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poly_model.score(X <span class="op">=</span> predictors, </span>
<span id="cb829-22"><a href="análisis-de-datos-con-python.html#cb829-22" aria-hidden="true" tabindex="-1"></a>                 y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>]))</span></code></pre></div>
<p>Vamos a trazar la línea curva definida por el nuevo modelo para ver si el ajuste es mejor que el anterior. Para empezar, vamos a crear una función que toma una matriz de valores x, coeficientes del modelo y un término de intercepción y devuelve los valores x y los valores y ajustados correspondientes a esos valores x.</p>
<div class="sourceCode" id="cb830"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb830-1"><a href="análisis-de-datos-con-python.html#cb830-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the curve from 1.5 to 5.5</span></span>
<span id="cb830-2"><a href="análisis-de-datos-con-python.html#cb830-2" aria-hidden="true" tabindex="-1"></a>poly_line_range <span class="op">=</span> np.arange(<span class="fl">1.5</span>, <span class="fl">5.5</span>, <span class="fl">0.1</span>)</span>
<span id="cb830-3"><a href="análisis-de-datos-con-python.html#cb830-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb830-4"><a href="análisis-de-datos-con-python.html#cb830-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get first and second order predictors from range</span></span>
<span id="cb830-5"><a href="análisis-de-datos-con-python.html#cb830-5" aria-hidden="true" tabindex="-1"></a>poly_predictors <span class="op">=</span> pd.DataFrame([poly_line_range,</span>
<span id="cb830-6"><a href="análisis-de-datos-con-python.html#cb830-6" aria-hidden="true" tabindex="-1"></a>                               poly_line_range<span class="op">**</span><span class="dv">2</span>]).T</span>
<span id="cb830-7"><a href="análisis-de-datos-con-python.html#cb830-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb830-8"><a href="análisis-de-datos-con-python.html#cb830-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get corresponding y values from the model</span></span>
<span id="cb830-9"><a href="análisis-de-datos-con-python.html#cb830-9" aria-hidden="true" tabindex="-1"></a>y_values <span class="op">=</span> poly_model.predict(X <span class="op">=</span> poly_predictors)</span>
<span id="cb830-10"><a href="análisis-de-datos-con-python.html#cb830-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb830-11"><a href="análisis-de-datos-con-python.html#cb830-11" aria-hidden="true" tabindex="-1"></a>mtcars.plot(kind<span class="op">=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb830-12"><a href="análisis-de-datos-con-python.html#cb830-12" aria-hidden="true" tabindex="-1"></a>           x<span class="op">=</span><span class="st">&quot;wt&quot;</span>,</span>
<span id="cb830-13"><a href="análisis-de-datos-con-python.html#cb830-13" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb830-14"><a href="análisis-de-datos-con-python.html#cb830-14" aria-hidden="true" tabindex="-1"></a>           figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb830-15"><a href="análisis-de-datos-con-python.html#cb830-15" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb830-16"><a href="análisis-de-datos-con-python.html#cb830-16" aria-hidden="true" tabindex="-1"></a>           xlim <span class="op">=</span> (<span class="dv">0</span>,<span class="dv">7</span>))</span>
<span id="cb830-17"><a href="análisis-de-datos-con-python.html#cb830-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb830-18"><a href="análisis-de-datos-con-python.html#cb830-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot curve line</span></span>
<span id="cb830-19"><a href="análisis-de-datos-con-python.html#cb830-19" aria-hidden="true" tabindex="-1"></a>plt.plot(poly_line_range,   <span class="co"># X-axis range</span></span>
<span id="cb830-20"><a href="análisis-de-datos-con-python.html#cb830-20" aria-hidden="true" tabindex="-1"></a>         y_values,          <span class="co"># Predicted values</span></span>
<span id="cb830-21"><a href="análisis-de-datos-con-python.html#cb830-21" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>La función cuadrática parece ajustarse a los datos un poco mejor que la lineal. Investiguemos más a fondo utilizando el nuevo modelo para hacer predicciones sobre los datos originales y comprobemos el error medio cuadrático:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb831-1"><a href="análisis-de-datos-con-python.html#cb831-1" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> poly_model.predict(X<span class="op">=</span>predictors)</span>
<span id="cb831-2"><a href="análisis-de-datos-con-python.html#cb831-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb831-3"><a href="análisis-de-datos-con-python.html#cb831-3" aria-hidden="true" tabindex="-1"></a>rmse(preds , mtcars[<span class="st">&quot;mpg&quot;</span>])</span></code></pre></div>
<p>Como el RMSE del modelo cuadrático es menor que el anterior y el R-cuadrado ajustado es mayor, probablemente sea un modelo mejor. Sin embargo, tenemos que tener cuidado con el sobreajuste de los datos de entrenamiento (“overfitting”).</p>
<ul>
<li><p>La sobreadaptación describe una situación en la que nuestro modelo se ajusta demasiado a los datos que utilizamos para crearlo (datos de entrenamiento), lo que provoca una mala generalización a los nuevos datos.</p></li>
<li><p>Por eso, generalmente no queremos utilizar los datos de entrenamiento para evaluar un modelo: nos da una evaluación sesgada, normalmente demasiado optimista. Uno de los puntos fuertes de la regresión lineal de primer y segundo orden es que son tan simples que es poco probable que sobreajusten los datos. Cuanto más complejo sea el modelo que creemos y más libertad tenga para ajustarse a los datos de entrenamiento, mayor será el riesgo de sobreajuste.</p></li>
<li><p>Por ejemplo, podríamos seguir incluyendo más términos polinómicos en nuestro modelo de regresión para ajustarnos más a los datos de entrenamiento y conseguir puntuaciones de RMSE más bajas con respecto al conjunto de entrenamiento, pero es casi seguro que esto no se generalizaría bien a los nuevos datos. Ilustremos este punto ajustando un modelo de 10º orden a los datos de mtcars:</p></li>
</ul>
<div class="sourceCode" id="cb832"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb832-1"><a href="análisis-de-datos-con-python.html#cb832-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize model</span></span>
<span id="cb832-2"><a href="análisis-de-datos-con-python.html#cb832-2" aria-hidden="true" tabindex="-1"></a>poly_model <span class="op">=</span> linear_model.LinearRegression()</span>
<span id="cb832-3"><a href="análisis-de-datos-con-python.html#cb832-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb832-4"><a href="análisis-de-datos-con-python.html#cb832-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a DataFrame of predictor variables</span></span>
<span id="cb832-5"><a href="análisis-de-datos-con-python.html#cb832-5" aria-hidden="true" tabindex="-1"></a>predictors <span class="op">=</span> pd.DataFrame([mtcars[<span class="st">&quot;wt&quot;</span>],           </span>
<span id="cb832-6"><a href="análisis-de-datos-con-python.html#cb832-6" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">2</span>,</span>
<span id="cb832-7"><a href="análisis-de-datos-con-python.html#cb832-7" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">3</span>,</span>
<span id="cb832-8"><a href="análisis-de-datos-con-python.html#cb832-8" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">4</span>,</span>
<span id="cb832-9"><a href="análisis-de-datos-con-python.html#cb832-9" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">5</span>,</span>
<span id="cb832-10"><a href="análisis-de-datos-con-python.html#cb832-10" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">6</span>,</span>
<span id="cb832-11"><a href="análisis-de-datos-con-python.html#cb832-11" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">7</span>,</span>
<span id="cb832-12"><a href="análisis-de-datos-con-python.html#cb832-12" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">8</span>,</span>
<span id="cb832-13"><a href="análisis-de-datos-con-python.html#cb832-13" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">9</span>,</span>
<span id="cb832-14"><a href="análisis-de-datos-con-python.html#cb832-14" aria-hidden="true" tabindex="-1"></a>                           mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">10</span>]).T     </span>
<span id="cb832-15"><a href="análisis-de-datos-con-python.html#cb832-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb832-16"><a href="análisis-de-datos-con-python.html#cb832-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model using the new_cars data</span></span>
<span id="cb832-17"><a href="análisis-de-datos-con-python.html#cb832-17" aria-hidden="true" tabindex="-1"></a>poly_model.fit(X <span class="op">=</span> predictors, </span>
<span id="cb832-18"><a href="análisis-de-datos-con-python.html#cb832-18" aria-hidden="true" tabindex="-1"></a>               y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb832-19"><a href="análisis-de-datos-con-python.html#cb832-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb832-20"><a href="análisis-de-datos-con-python.html#cb832-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model y-intercept</span></span>
<span id="cb832-21"><a href="análisis-de-datos-con-python.html#cb832-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Model intercept&quot;</span>)</span>
<span id="cb832-22"><a href="análisis-de-datos-con-python.html#cb832-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poly_model.intercept_)</span>
<span id="cb832-23"><a href="análisis-de-datos-con-python.html#cb832-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb832-24"><a href="análisis-de-datos-con-python.html#cb832-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model coefficients (scaling factor given to &quot;wt&quot;)</span></span>
<span id="cb832-25"><a href="análisis-de-datos-con-python.html#cb832-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Model Coefficients&quot;</span>)</span>
<span id="cb832-26"><a href="análisis-de-datos-con-python.html#cb832-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poly_model.coef_)</span>
<span id="cb832-27"><a href="análisis-de-datos-con-python.html#cb832-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb832-28"><a href="análisis-de-datos-con-python.html#cb832-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Check R-squared</span></span>
<span id="cb832-29"><a href="análisis-de-datos-con-python.html#cb832-29" aria-hidden="true" tabindex="-1"></a>poly_model.score(X <span class="op">=</span> predictors, </span>
<span id="cb832-30"><a href="análisis-de-datos-con-python.html#cb832-30" aria-hidden="true" tabindex="-1"></a>                 y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span></code></pre></div>
<ul>
<li>Obsérvese que la puntuación R-cuadrado ha aumentado sustancialmente con respecto a nuestro modelo cuadrático. Vamos a trazar la línea de mejor ajuste para investigar lo que hace el modelo:</li>
</ul>
<div class="sourceCode" id="cb833"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb833-1"><a href="análisis-de-datos-con-python.html#cb833-1" aria-hidden="true" tabindex="-1"></a>p_range <span class="op">=</span> np.arange(<span class="fl">1.5</span>, <span class="fl">5.45</span>, <span class="fl">0.01</span>)</span>
<span id="cb833-2"><a href="análisis-de-datos-con-python.html#cb833-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb833-3"><a href="análisis-de-datos-con-python.html#cb833-3" aria-hidden="true" tabindex="-1"></a>poly_predictors <span class="op">=</span> pd.DataFrame([p_range, p_range<span class="op">**</span><span class="dv">2</span>, p_range<span class="op">**</span><span class="dv">3</span>,</span>
<span id="cb833-4"><a href="análisis-de-datos-con-python.html#cb833-4" aria-hidden="true" tabindex="-1"></a>                              p_range<span class="op">**</span><span class="dv">4</span>, p_range<span class="op">**</span><span class="dv">5</span>, p_range<span class="op">**</span><span class="dv">6</span>, p_range<span class="op">**</span><span class="dv">7</span>, </span>
<span id="cb833-5"><a href="análisis-de-datos-con-python.html#cb833-5" aria-hidden="true" tabindex="-1"></a>                              p_range<span class="op">**</span><span class="dv">8</span>, p_range<span class="op">**</span><span class="dv">9</span>, p_range<span class="op">**</span><span class="dv">10</span>]).T  </span>
<span id="cb833-6"><a href="análisis-de-datos-con-python.html#cb833-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb833-7"><a href="análisis-de-datos-con-python.html#cb833-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get corresponding y values from the model</span></span>
<span id="cb833-8"><a href="análisis-de-datos-con-python.html#cb833-8" aria-hidden="true" tabindex="-1"></a>y_values <span class="op">=</span> poly_model.predict(X <span class="op">=</span> poly_predictors)</span>
<span id="cb833-9"><a href="análisis-de-datos-con-python.html#cb833-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb833-10"><a href="análisis-de-datos-con-python.html#cb833-10" aria-hidden="true" tabindex="-1"></a>mtcars.plot(kind<span class="op">=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb833-11"><a href="análisis-de-datos-con-python.html#cb833-11" aria-hidden="true" tabindex="-1"></a>           x<span class="op">=</span><span class="st">&quot;wt&quot;</span>,</span>
<span id="cb833-12"><a href="análisis-de-datos-con-python.html#cb833-12" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb833-13"><a href="análisis-de-datos-con-python.html#cb833-13" aria-hidden="true" tabindex="-1"></a>           figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb833-14"><a href="análisis-de-datos-con-python.html#cb833-14" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;black&quot;</span>,</span>
<span id="cb833-15"><a href="análisis-de-datos-con-python.html#cb833-15" aria-hidden="true" tabindex="-1"></a>           xlim <span class="op">=</span> (<span class="dv">0</span>,<span class="dv">7</span>))</span>
<span id="cb833-16"><a href="análisis-de-datos-con-python.html#cb833-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb833-17"><a href="análisis-de-datos-con-python.html#cb833-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot curve line</span></span>
<span id="cb833-18"><a href="análisis-de-datos-con-python.html#cb833-18" aria-hidden="true" tabindex="-1"></a>plt.plot(p_range,   <span class="co"># X-axis range</span></span>
<span id="cb833-19"><a href="análisis-de-datos-con-python.html#cb833-19" aria-hidden="true" tabindex="-1"></a>         y_values,          <span class="co"># Predicted values</span></span>
<span id="cb833-20"><a href="análisis-de-datos-con-python.html#cb833-20" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">&quot;blue&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>Observe cómo el modelo polinómico de 10º orden se curva de forma salvaje en algunos lugares para ajustarse a los datos de entrenamiento. Aunque este modelo se ajusta mejor a los datos de entrenamiento, es casi seguro que no se generalizará bien a los nuevos datos, ya que conduce a predicciones absurdas, como que un coche tiene menos de 0 mpg si pesa 5.000 libras.</p>
</div>
<div id="agregar-más-variables" class="section level4 hasAnchor" number="4.7.2.3">
<h4><span class="header-section-number">4.7.2.3</span> Agregar más variables<a href="análisis-de-datos-con-python.html#agregar-más-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Cuando se enfrenta a una tarea de modelado predictivo, a menudo tendrá varias variables en sus datos que pueden ayudar a explicar la variación en la variable de respuesta. Puede incluir más variables explicativas en un modelo de regresión lineal incluyendo más columnas en el marco de datos que pasa a la función de entrenamiento del modelo. Hagamos un nuevo modelo que añada la variable de potencia a nuestro modelo original:.</p>
<div class="sourceCode" id="cb834"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb834-1"><a href="análisis-de-datos-con-python.html#cb834-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize model</span></span>
<span id="cb834-2"><a href="análisis-de-datos-con-python.html#cb834-2" aria-hidden="true" tabindex="-1"></a>multi_reg_model <span class="op">=</span> linear_model.LinearRegression()</span>
<span id="cb834-3"><a href="análisis-de-datos-con-python.html#cb834-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb834-4"><a href="análisis-de-datos-con-python.html#cb834-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model using the mtcars data</span></span>
<span id="cb834-5"><a href="análisis-de-datos-con-python.html#cb834-5" aria-hidden="true" tabindex="-1"></a>multi_reg_model.fit(X <span class="op">=</span> mtcars.loc[:,[<span class="st">&quot;wt&quot;</span>,<span class="st">&quot;hp&quot;</span>]], </span>
<span id="cb834-6"><a href="análisis-de-datos-con-python.html#cb834-6" aria-hidden="true" tabindex="-1"></a>                     y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb834-7"><a href="análisis-de-datos-con-python.html#cb834-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb834-8"><a href="análisis-de-datos-con-python.html#cb834-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model y-intercept</span></span>
<span id="cb834-9"><a href="análisis-de-datos-con-python.html#cb834-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(multi_reg_model.intercept_)</span>
<span id="cb834-10"><a href="análisis-de-datos-con-python.html#cb834-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb834-11"><a href="análisis-de-datos-con-python.html#cb834-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model coefficients (scaling factor given to &quot;wt&quot;)</span></span>
<span id="cb834-12"><a href="análisis-de-datos-con-python.html#cb834-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(multi_reg_model.coef_)</span>
<span id="cb834-13"><a href="análisis-de-datos-con-python.html#cb834-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb834-14"><a href="análisis-de-datos-con-python.html#cb834-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check R-squared</span></span>
<span id="cb834-15"><a href="análisis-de-datos-con-python.html#cb834-15" aria-hidden="true" tabindex="-1"></a>multi_reg_model.score(X <span class="op">=</span> mtcars.loc[:,[<span class="st">&quot;wt&quot;</span>,<span class="st">&quot;hp&quot;</span>]], </span>
<span id="cb834-16"><a href="análisis-de-datos-con-python.html#cb834-16" aria-hidden="true" tabindex="-1"></a>                      y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span></code></pre></div>
<p>La mejora de la puntuación R-cuadrado sugiere que la potencia tiene una relación lineal con el mpg. Vamos a investigar con un gráfico:</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb835-1"><a href="análisis-de-datos-con-python.html#cb835-1" aria-hidden="true" tabindex="-1"></a>mtcars.plot(kind<span class="op">=</span><span class="st">&quot;scatter&quot;</span>,</span>
<span id="cb835-2"><a href="análisis-de-datos-con-python.html#cb835-2" aria-hidden="true" tabindex="-1"></a>           x<span class="op">=</span><span class="st">&quot;hp&quot;</span>,</span>
<span id="cb835-3"><a href="análisis-de-datos-con-python.html#cb835-3" aria-hidden="true" tabindex="-1"></a>           y<span class="op">=</span><span class="st">&quot;mpg&quot;</span>,</span>
<span id="cb835-4"><a href="análisis-de-datos-con-python.html#cb835-4" aria-hidden="true" tabindex="-1"></a>           figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>),</span>
<span id="cb835-5"><a href="análisis-de-datos-con-python.html#cb835-5" aria-hidden="true" tabindex="-1"></a>           color<span class="op">=</span><span class="st">&quot;black&quot;</span>)<span class="op">;</span></span></code></pre></div>
<p>Aunque las millas por galón tienden a disminuir con los caballos, la relación parece más curvada que lineal, por lo que añadir términos polinómicos a nuestro modelo de regresión múltiple podría producir un mejor ajuste:</p>
<div class="sourceCode" id="cb836"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb836-1"><a href="análisis-de-datos-con-python.html#cb836-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize model</span></span>
<span id="cb836-2"><a href="análisis-de-datos-con-python.html#cb836-2" aria-hidden="true" tabindex="-1"></a>multi_reg_model <span class="op">=</span> linear_model.LinearRegression()</span>
<span id="cb836-3"><a href="análisis-de-datos-con-python.html#cb836-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb836-4"><a href="análisis-de-datos-con-python.html#cb836-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Include squared terms</span></span>
<span id="cb836-5"><a href="análisis-de-datos-con-python.html#cb836-5" aria-hidden="true" tabindex="-1"></a>poly_predictors <span class="op">=</span> pd.DataFrame([mtcars[<span class="st">&quot;wt&quot;</span>],</span>
<span id="cb836-6"><a href="análisis-de-datos-con-python.html#cb836-6" aria-hidden="true" tabindex="-1"></a>                                mtcars[<span class="st">&quot;hp&quot;</span>],</span>
<span id="cb836-7"><a href="análisis-de-datos-con-python.html#cb836-7" aria-hidden="true" tabindex="-1"></a>                                mtcars[<span class="st">&quot;wt&quot;</span>]<span class="op">**</span><span class="dv">2</span>,</span>
<span id="cb836-8"><a href="análisis-de-datos-con-python.html#cb836-8" aria-hidden="true" tabindex="-1"></a>                                mtcars[<span class="st">&quot;hp&quot;</span>]<span class="op">**</span><span class="dv">2</span>]).T</span>
<span id="cb836-9"><a href="análisis-de-datos-con-python.html#cb836-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb836-10"><a href="análisis-de-datos-con-python.html#cb836-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model using the mtcars data</span></span>
<span id="cb836-11"><a href="análisis-de-datos-con-python.html#cb836-11" aria-hidden="true" tabindex="-1"></a>multi_reg_model.fit(X <span class="op">=</span> poly_predictors, </span>
<span id="cb836-12"><a href="análisis-de-datos-con-python.html#cb836-12" aria-hidden="true" tabindex="-1"></a>                    y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>])</span>
<span id="cb836-13"><a href="análisis-de-datos-con-python.html#cb836-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb836-14"><a href="análisis-de-datos-con-python.html#cb836-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Check R-squared</span></span>
<span id="cb836-15"><a href="análisis-de-datos-con-python.html#cb836-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;R-Squared&quot;</span>)</span>
<span id="cb836-16"><a href="análisis-de-datos-con-python.html#cb836-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>( multi_reg_model.score(X <span class="op">=</span> poly_predictors , </span>
<span id="cb836-17"><a href="análisis-de-datos-con-python.html#cb836-17" aria-hidden="true" tabindex="-1"></a>                      y <span class="op">=</span> mtcars[<span class="st">&quot;mpg&quot;</span>]) )</span>
<span id="cb836-18"><a href="análisis-de-datos-con-python.html#cb836-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb836-19"><a href="análisis-de-datos-con-python.html#cb836-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Check RMSE</span></span>
<span id="cb836-20"><a href="análisis-de-datos-con-python.html#cb836-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;RMSE&quot;</span>)</span>
<span id="cb836-21"><a href="análisis-de-datos-con-python.html#cb836-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rmse(multi_reg_model.predict(poly_predictors),mtcars[<span class="st">&quot;mpg&quot;</span>]))</span></code></pre></div>
<p>El nuevo R-cuadrado y el menor RMSE sugieren que éste es un modelo mejor que cualquiera de los que hicimos anteriormente y no nos preocuparía demasiado el sobreajuste, ya que sólo incluye 2 variables y 2 términos al cuadrado. Hay que tener en cuenta que cuando se trabaja con modelos multidimensionales, resulta difícil visualizar los resultados, por lo que se depende en gran medida de los resultados numéricos.</p>
<p>Podríamos seguir añadiendo más variables explicativas para intentar mejorar el modelo. Añadir variables que tienen poca relación con la respuesta o incluir variables demasiado relacionadas entre sí puede perjudicar los resultados cuando se utiliza la regresión lineal. También debe tener cuidado con las variables numéricas que toman pocos valores únicos, ya que pueden actuar más como variables categóricas que numéricas.</p>
</div>
<div id="desde-una-perspectiva-económetrica" class="section level4 hasAnchor" number="4.7.2.4">
<h4><span class="header-section-number">4.7.2.4</span> Desde una perspectiva económetrica<a href="análisis-de-datos-con-python.html#desde-una-perspectiva-económetrica" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb837"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb837-1"><a href="análisis-de-datos-con-python.html#cb837-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb837-2"><a href="análisis-de-datos-con-python.html#cb837-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb837-3"><a href="análisis-de-datos-con-python.html#cb837-3" aria-hidden="true" tabindex="-1"></a><span class="co">#import plotnine as p</span></span>
<span id="cb837-4"><a href="análisis-de-datos-con-python.html#cb837-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-5"><a href="análisis-de-datos-con-python.html#cb837-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ssl</span>
<span id="cb837-6"><a href="análisis-de-datos-con-python.html#cb837-6" aria-hidden="true" tabindex="-1"></a>ssl._create_default_https_context <span class="op">=</span> ssl._create_unverified_context</span>
<span id="cb837-7"><a href="análisis-de-datos-con-python.html#cb837-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-8"><a href="análisis-de-datos-con-python.html#cb837-8" aria-hidden="true" tabindex="-1"></a><span class="co"># read data</span></span>
<span id="cb837-9"><a href="análisis-de-datos-con-python.html#cb837-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_data(<span class="bu">file</span>):</span>
<span id="cb837-10"><a href="análisis-de-datos-con-python.html#cb837-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.read_csv(<span class="st">&quot;https://raw.github.com/scunning1975/mixtape/master/&quot;</span> <span class="op">+</span> <span class="bu">file</span>)</span>
<span id="cb837-11"><a href="análisis-de-datos-con-python.html#cb837-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-12"><a href="análisis-de-datos-con-python.html#cb837-12" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">1</span>)</span>
<span id="cb837-13"><a href="análisis-de-datos-con-python.html#cb837-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-14"><a href="análisis-de-datos-con-python.html#cb837-14" aria-hidden="true" tabindex="-1"></a>tb <span class="op">=</span> pd.DataFrame({</span>
<span id="cb837-15"><a href="análisis-de-datos-con-python.html#cb837-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;x&#39;</span>: np.random.normal(size<span class="op">=</span><span class="dv">10000</span>),</span>
<span id="cb837-16"><a href="análisis-de-datos-con-python.html#cb837-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;u&#39;</span>: np.random.normal(size<span class="op">=</span><span class="dv">10000</span>)})</span>
<span id="cb837-17"><a href="análisis-de-datos-con-python.html#cb837-17" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;y&#39;</span>] <span class="op">=</span> <span class="fl">5.5</span><span class="op">*</span>tb[<span class="st">&#39;x&#39;</span>].values <span class="op">+</span> <span class="dv">12</span><span class="op">*</span>tb[<span class="st">&#39;u&#39;</span>].values</span>
<span id="cb837-18"><a href="análisis-de-datos-con-python.html#cb837-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-19"><a href="análisis-de-datos-con-python.html#cb837-19" aria-hidden="true" tabindex="-1"></a>tb</span>
<span id="cb837-20"><a href="análisis-de-datos-con-python.html#cb837-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-21"><a href="análisis-de-datos-con-python.html#cb837-21" aria-hidden="true" tabindex="-1"></a>reg_tb <span class="op">=</span> sm.OLS.from_formula(<span class="st">&#39;y ~ x&#39;</span>, </span>
<span id="cb837-22"><a href="análisis-de-datos-con-python.html#cb837-22" aria-hidden="true" tabindex="-1"></a>                             data<span class="op">=</span>tb).fit()</span>
<span id="cb837-23"><a href="análisis-de-datos-con-python.html#cb837-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-24"><a href="análisis-de-datos-con-python.html#cb837-24" aria-hidden="true" tabindex="-1"></a>reg_tb</span>
<span id="cb837-25"><a href="análisis-de-datos-con-python.html#cb837-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-26"><a href="análisis-de-datos-con-python.html#cb837-26" aria-hidden="true" tabindex="-1"></a>reg_tb.summary()</span>
<span id="cb837-27"><a href="análisis-de-datos-con-python.html#cb837-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-28"><a href="análisis-de-datos-con-python.html#cb837-28" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;yhat1&#39;</span>] <span class="op">=</span> reg_tb.predict(tb)</span>
<span id="cb837-29"><a href="análisis-de-datos-con-python.html#cb837-29" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;yhat2&#39;</span>] <span class="op">=</span> <span class="fl">0.1114</span> <span class="op">+</span> <span class="fl">5.6887</span><span class="op">*</span>tb[<span class="st">&#39;x&#39;</span>]</span>
<span id="cb837-30"><a href="análisis-de-datos-con-python.html#cb837-30" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;uhat1&#39;</span>] <span class="op">=</span> reg_tb.resid</span>
<span id="cb837-31"><a href="análisis-de-datos-con-python.html#cb837-31" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;uhat2&#39;</span>] <span class="op">=</span> tb[<span class="st">&#39;y&#39;</span>] <span class="op">-</span> tb[<span class="st">&#39;yhat2&#39;</span>]</span>
<span id="cb837-32"><a href="análisis-de-datos-con-python.html#cb837-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-33"><a href="análisis-de-datos-con-python.html#cb837-33" aria-hidden="true" tabindex="-1"></a>tb.describe()</span>
<span id="cb837-34"><a href="análisis-de-datos-con-python.html#cb837-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-35"><a href="análisis-de-datos-con-python.html#cb837-35" aria-hidden="true" tabindex="-1"></a>tb <span class="op">=</span> pd.DataFrame({</span>
<span id="cb837-36"><a href="análisis-de-datos-con-python.html#cb837-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;x&#39;</span>: <span class="dv">9</span><span class="op">*</span>np.random.normal(size<span class="op">=</span><span class="dv">10</span>),</span>
<span id="cb837-37"><a href="análisis-de-datos-con-python.html#cb837-37" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;u&#39;</span>: <span class="dv">36</span><span class="op">*</span>np.random.normal(size<span class="op">=</span><span class="dv">10</span>)})</span>
<span id="cb837-38"><a href="análisis-de-datos-con-python.html#cb837-38" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;y&#39;</span>] <span class="op">=</span> <span class="dv">3</span><span class="op">*</span>tb[<span class="st">&#39;x&#39;</span>].values <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>tb[<span class="st">&#39;u&#39;</span>].values</span>
<span id="cb837-39"><a href="análisis-de-datos-con-python.html#cb837-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-40"><a href="análisis-de-datos-con-python.html#cb837-40" aria-hidden="true" tabindex="-1"></a>reg_tb <span class="op">=</span> sm.OLS.from_formula(<span class="st">&#39;y ~ x&#39;</span>, data<span class="op">=</span>tb).fit()</span>
<span id="cb837-41"><a href="análisis-de-datos-con-python.html#cb837-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-42"><a href="análisis-de-datos-con-python.html#cb837-42" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;yhat1&#39;</span>] <span class="op">=</span> reg_tb.predict(tb)</span>
<span id="cb837-43"><a href="análisis-de-datos-con-python.html#cb837-43" aria-hidden="true" tabindex="-1"></a>tb[<span class="st">&#39;uhat1&#39;</span>] <span class="op">=</span> reg_tb.resid</span>
<span id="cb837-44"><a href="análisis-de-datos-con-python.html#cb837-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb837-45"><a href="análisis-de-datos-con-python.html#cb837-45" aria-hidden="true" tabindex="-1"></a>tb.describe()</span></code></pre></div>
</div>
<div id="ejemplo-estimacion-de-regresion-lineal" class="section level4 hasAnchor" number="4.7.2.5">
<h4><span class="header-section-number">4.7.2.5</span> Ejemplo: estimacion de regresion lineal<a href="análisis-de-datos-con-python.html#ejemplo-estimacion-de-regresion-lineal" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb838"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb838-1"><a href="análisis-de-datos-con-python.html#cb838-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb838-2"><a href="análisis-de-datos-con-python.html#cb838-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb838-3"><a href="análisis-de-datos-con-python.html#cb838-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb838-4"><a href="análisis-de-datos-con-python.html#cb838-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-5"><a href="análisis-de-datos-con-python.html#cb838-5" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">&#39;real_estate.csv&#39;</span>)</span>
<span id="cb838-6"><a href="análisis-de-datos-con-python.html#cb838-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-7"><a href="análisis-de-datos-con-python.html#cb838-7" aria-hidden="true" tabindex="-1"></a>data.head(<span class="dv">5</span>)</span>
<span id="cb838-8"><a href="análisis-de-datos-con-python.html#cb838-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-9"><a href="análisis-de-datos-con-python.html#cb838-9" aria-hidden="true" tabindex="-1"></a>data.shape</span>
<span id="cb838-10"><a href="análisis-de-datos-con-python.html#cb838-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-11"><a href="análisis-de-datos-con-python.html#cb838-11" aria-hidden="true" tabindex="-1"></a>data.describe()</span>
<span id="cb838-12"><a href="análisis-de-datos-con-python.html#cb838-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-13"><a href="análisis-de-datos-con-python.html#cb838-13" aria-hidden="true" tabindex="-1"></a>data.precio.describe()</span>
<span id="cb838-14"><a href="análisis-de-datos-con-python.html#cb838-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-15"><a href="análisis-de-datos-con-python.html#cb838-15" aria-hidden="true" tabindex="-1"></a>data.hist(figsize<span class="op">=</span>(<span class="dv">6</span>,<span class="dv">6</span>))</span>
<span id="cb838-16"><a href="análisis-de-datos-con-python.html#cb838-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-17"><a href="análisis-de-datos-con-python.html#cb838-17" aria-hidden="true" tabindex="-1"></a>data.superficie.hist()</span>
<span id="cb838-18"><a href="análisis-de-datos-con-python.html#cb838-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-19"><a href="análisis-de-datos-con-python.html#cb838-19" aria-hidden="true" tabindex="-1"></a>data.plot(kind <span class="op">=</span> <span class="st">&#39;kde&#39;</span>,</span>
<span id="cb838-20"><a href="análisis-de-datos-con-python.html#cb838-20" aria-hidden="true" tabindex="-1"></a>          subplots<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb838-21"><a href="análisis-de-datos-con-python.html#cb838-21" aria-hidden="true" tabindex="-1"></a>          layout <span class="op">=</span> (<span class="dv">2</span>,<span class="dv">2</span>),</span>
<span id="cb838-22"><a href="análisis-de-datos-con-python.html#cb838-22" aria-hidden="true" tabindex="-1"></a>          sharex<span class="op">=</span><span class="va">False</span>,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">8</span>))</span>
<span id="cb838-23"><a href="análisis-de-datos-con-python.html#cb838-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-24"><a href="análisis-de-datos-con-python.html#cb838-24" aria-hidden="true" tabindex="-1"></a>data.plot(kind<span class="op">=</span><span class="st">&#39;box&#39;</span>,subplots<span class="op">=</span><span class="va">True</span>,layout<span class="op">=</span>(<span class="dv">2</span>,<span class="dv">2</span>),sharex<span class="op">=</span><span class="va">False</span>,sharey<span class="op">=</span><span class="va">False</span>,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">8</span>))</span>
<span id="cb838-25"><a href="análisis-de-datos-con-python.html#cb838-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-26"><a href="análisis-de-datos-con-python.html#cb838-26" aria-hidden="true" tabindex="-1"></a>plt.scatter(data.superficie,data.precio,s<span class="op">=</span><span class="dv">10</span>,color<span class="op">=</span><span class="st">&#39;purple&#39;</span>)</span>
<span id="cb838-27"><a href="análisis-de-datos-con-python.html#cb838-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;superficie&#39;</span>)</span>
<span id="cb838-28"><a href="análisis-de-datos-con-python.html#cb838-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;precio&#39;</span>)</span>
<span id="cb838-29"><a href="análisis-de-datos-con-python.html#cb838-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-30"><a href="análisis-de-datos-con-python.html#cb838-30" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.plotting <span class="im">import</span> scatter_matrix</span>
<span id="cb838-31"><a href="análisis-de-datos-con-python.html#cb838-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb838-32"><a href="análisis-de-datos-con-python.html#cb838-32" aria-hidden="true" tabindex="-1"></a>scatter_matrix(data,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">10</span>))</span></code></pre></div>
</div>
</div>
<div id="una-simulación-de-montecarlo" class="section level3 hasAnchor" number="4.7.3">
<h3><span class="header-section-number">4.7.3</span> Una simulación de montecarlo<a href="análisis-de-datos-con-python.html#una-simulación-de-montecarlo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="math display">\[y = 3 + 2x + u
\]</span></p>
<p><span class="math display">\[x ∼ N(0,9)\]</span></p>
<p><span class="math display">\[u ∼ N(0,36)\]</span></p>
<div class="sourceCode" id="cb839"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb839-1"><a href="análisis-de-datos-con-python.html#cb839-1" aria-hidden="true" tabindex="-1"></a>coefs <span class="op">=</span> np.zeros(<span class="dv">1000</span>)</span>
<span id="cb839-2"><a href="análisis-de-datos-con-python.html#cb839-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-3"><a href="análisis-de-datos-con-python.html#cb839-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb839-4"><a href="análisis-de-datos-con-python.html#cb839-4" aria-hidden="true" tabindex="-1"></a>    tb <span class="op">=</span> pd.DataFrame({</span>
<span id="cb839-5"><a href="análisis-de-datos-con-python.html#cb839-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;x&#39;</span>: <span class="dv">9</span><span class="op">*</span>np.random.normal(size<span class="op">=</span><span class="dv">10000</span>),</span>
<span id="cb839-6"><a href="análisis-de-datos-con-python.html#cb839-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;u&#39;</span>: <span class="dv">36</span><span class="op">*</span>np.random.normal(size<span class="op">=</span><span class="dv">10000</span>)})</span>
<span id="cb839-7"><a href="análisis-de-datos-con-python.html#cb839-7" aria-hidden="true" tabindex="-1"></a>    tb[<span class="st">&#39;y&#39;</span>] <span class="op">=</span> <span class="dv">3</span> <span class="op">+</span> <span class="dv">2</span><span class="op">*</span>tb[<span class="st">&#39;x&#39;</span>].values <span class="op">+</span> tb[<span class="st">&#39;u&#39;</span>].values</span>
<span id="cb839-8"><a href="análisis-de-datos-con-python.html#cb839-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-9"><a href="análisis-de-datos-con-python.html#cb839-9" aria-hidden="true" tabindex="-1"></a>    reg_tb <span class="op">=</span> sm.OLS.from_formula(<span class="st">&#39;y ~ x&#39;</span>, data<span class="op">=</span>tb).fit()</span>
<span id="cb839-10"><a href="análisis-de-datos-con-python.html#cb839-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-11"><a href="análisis-de-datos-con-python.html#cb839-11" aria-hidden="true" tabindex="-1"></a>    coefs[i] <span class="op">=</span> reg_tb.params[<span class="st">&#39;x&#39;</span>]</span>
<span id="cb839-12"><a href="análisis-de-datos-con-python.html#cb839-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-13"><a href="análisis-de-datos-con-python.html#cb839-13" aria-hidden="true" tabindex="-1"></a>plt.hist(coefs, bins <span class="op">=</span> <span class="dv">100</span>)</span>
<span id="cb839-14"><a href="análisis-de-datos-con-python.html#cb839-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb839-15"><a href="análisis-de-datos-con-python.html#cb839-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-16"><a href="análisis-de-datos-con-python.html#cb839-16" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(coefs)</span>
<span id="cb839-17"><a href="análisis-de-datos-con-python.html#cb839-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-18"><a href="análisis-de-datos-con-python.html#cb839-18" aria-hidden="true" tabindex="-1"></a>coefs.mean()</span>
<span id="cb839-19"><a href="análisis-de-datos-con-python.html#cb839-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb839-20"><a href="análisis-de-datos-con-python.html#cb839-20" aria-hidden="true" tabindex="-1"></a>coefs.std()</span></code></pre></div>
<div id="ejemplo-1-tirar-dados" class="section level4 hasAnchor" number="4.7.3.1">
<h4><span class="header-section-number">4.7.3.1</span> Ejemplo 1: Tirar dados<a href="análisis-de-datos-con-python.html#ejemplo-1-tirar-dados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb840"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb840-1"><a href="análisis-de-datos-con-python.html#cb840-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importing Packages</span></span>
<span id="cb840-2"><a href="análisis-de-datos-con-python.html#cb840-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb840-3"><a href="análisis-de-datos-con-python.html#cb840-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span></code></pre></div>
<ul>
<li><p>En este juego, la casa tiene más oportunidades de ganar (30 resultados frente a los 6 del jugador), lo que significa que la casa tiene bastante ventaja.</p></li>
<li><p>Digamos que nuestro jugador comienza con un saldo de 1.000 dólares y está dispuesto a perderlo todo, por lo que apuesta 1 dólar en cada tirada (lo que significa que se lanzan ambos dados) y decide jugar 1.000 tiradas.</p></li>
<li><p>Como la casa es tan generosa, ofrece pagar 4 veces la apuesta del jugador cuando éste gana. Por ejemplo, si el jugador gana la primera tirada, su saldo aumenta en 4 dólares, y termina la ronda con un saldo de 1.004 dólares.</p></li>
<li><p>Si milagrosamente se produce una racha de 1.000 tiradas ganadas, podría irse a casa con 5.000 dólares. Si perdieran todas las rondas, podrían irse a casa sin nada. No es una mala relación riesgo-recompensa… o quizás sí.</p></li>
</ul>
<div class="sourceCode" id="cb841"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb841-1"><a href="análisis-de-datos-con-python.html#cb841-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating Roll Dice Function</span></span>
<span id="cb841-2"><a href="análisis-de-datos-con-python.html#cb841-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> roll_dice():</span>
<span id="cb841-3"><a href="análisis-de-datos-con-python.html#cb841-3" aria-hidden="true" tabindex="-1"></a>    die_1 <span class="op">=</span> random.randint(<span class="dv">1</span>, <span class="dv">6</span>)</span>
<span id="cb841-4"><a href="análisis-de-datos-con-python.html#cb841-4" aria-hidden="true" tabindex="-1"></a>    die_2 <span class="op">=</span> random.randint(<span class="dv">1</span>, <span class="dv">6</span>)</span>
<span id="cb841-5"><a href="análisis-de-datos-con-python.html#cb841-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-6"><a href="análisis-de-datos-con-python.html#cb841-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Determining if the dice are the same number</span></span>
<span id="cb841-7"><a href="análisis-de-datos-con-python.html#cb841-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> die_1 <span class="op">==</span> die_2:</span>
<span id="cb841-8"><a href="análisis-de-datos-con-python.html#cb841-8" aria-hidden="true" tabindex="-1"></a>        same_num <span class="op">=</span> <span class="va">True</span></span>
<span id="cb841-9"><a href="análisis-de-datos-con-python.html#cb841-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb841-10"><a href="análisis-de-datos-con-python.html#cb841-10" aria-hidden="true" tabindex="-1"></a>        same_num <span class="op">=</span> <span class="va">False</span></span>
<span id="cb841-11"><a href="análisis-de-datos-con-python.html#cb841-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> same_num</span>
<span id="cb841-12"><a href="análisis-de-datos-con-python.html#cb841-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-13"><a href="análisis-de-datos-con-python.html#cb841-13" aria-hidden="true" tabindex="-1"></a>roll_dice()</span>
<span id="cb841-14"><a href="análisis-de-datos-con-python.html#cb841-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-15"><a href="análisis-de-datos-con-python.html#cb841-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Inputs</span></span>
<span id="cb841-16"><a href="análisis-de-datos-con-python.html#cb841-16" aria-hidden="true" tabindex="-1"></a>num_simulations <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb841-17"><a href="análisis-de-datos-con-python.html#cb841-17" aria-hidden="true" tabindex="-1"></a>max_num_rolls <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb841-18"><a href="análisis-de-datos-con-python.html#cb841-18" aria-hidden="true" tabindex="-1"></a>bet <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb841-19"><a href="análisis-de-datos-con-python.html#cb841-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-20"><a href="análisis-de-datos-con-python.html#cb841-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Tracking</span></span>
<span id="cb841-21"><a href="análisis-de-datos-con-python.html#cb841-21" aria-hidden="true" tabindex="-1"></a>win_probability <span class="op">=</span> []</span>
<span id="cb841-22"><a href="análisis-de-datos-con-python.html#cb841-22" aria-hidden="true" tabindex="-1"></a>end_balance <span class="op">=</span> []</span>
<span id="cb841-23"><a href="análisis-de-datos-con-python.html#cb841-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-24"><a href="análisis-de-datos-con-python.html#cb841-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating Figure for Simulation Balances</span></span>
<span id="cb841-25"><a href="análisis-de-datos-con-python.html#cb841-25" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb841-26"><a href="análisis-de-datos-con-python.html#cb841-26" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Monte Carlo Dice Game [&quot;</span> <span class="op">+</span> <span class="bu">str</span>(num_simulations) <span class="op">+</span> <span class="st">&quot;simulations]&quot;</span>)</span>
<span id="cb841-27"><a href="análisis-de-datos-con-python.html#cb841-27" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Roll Number&quot;</span>)</span>
<span id="cb841-28"><a href="análisis-de-datos-con-python.html#cb841-28" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;Balance [$]&quot;</span>)</span>
<span id="cb841-29"><a href="análisis-de-datos-con-python.html#cb841-29" aria-hidden="true" tabindex="-1"></a>plt.xlim([<span class="dv">0</span>, max_num_rolls])</span>
<span id="cb841-30"><a href="análisis-de-datos-con-python.html#cb841-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-31"><a href="análisis-de-datos-con-python.html#cb841-31" aria-hidden="true" tabindex="-1"></a><span class="co"># For loop to run for the number of simulations desired</span></span>
<span id="cb841-32"><a href="análisis-de-datos-con-python.html#cb841-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_simulations):</span>
<span id="cb841-33"><a href="análisis-de-datos-con-python.html#cb841-33" aria-hidden="true" tabindex="-1"></a>    balance <span class="op">=</span> [<span class="dv">1000</span>]</span>
<span id="cb841-34"><a href="análisis-de-datos-con-python.html#cb841-34" aria-hidden="true" tabindex="-1"></a>    num_rolls <span class="op">=</span> [<span class="dv">0</span>]</span>
<span id="cb841-35"><a href="análisis-de-datos-con-python.html#cb841-35" aria-hidden="true" tabindex="-1"></a>    num_wins <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb841-36"><a href="análisis-de-datos-con-python.html#cb841-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Run until the player has rolled 1,000 times</span></span>
<span id="cb841-37"><a href="análisis-de-datos-con-python.html#cb841-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> num_rolls[<span class="op">-</span><span class="dv">1</span>] <span class="op">&lt;</span> max_num_rolls:</span>
<span id="cb841-38"><a href="análisis-de-datos-con-python.html#cb841-38" aria-hidden="true" tabindex="-1"></a>        same <span class="op">=</span> roll_dice()</span>
<span id="cb841-39"><a href="análisis-de-datos-con-python.html#cb841-39" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Result if the dice are the same number</span></span>
<span id="cb841-40"><a href="análisis-de-datos-con-python.html#cb841-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> same:</span>
<span id="cb841-41"><a href="análisis-de-datos-con-python.html#cb841-41" aria-hidden="true" tabindex="-1"></a>            balance.append(balance[<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> <span class="dv">4</span> <span class="op">*</span> bet)</span>
<span id="cb841-42"><a href="análisis-de-datos-con-python.html#cb841-42" aria-hidden="true" tabindex="-1"></a>            num_wins <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb841-43"><a href="análisis-de-datos-con-python.html#cb841-43" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Result if the dice are different numbers</span></span>
<span id="cb841-44"><a href="análisis-de-datos-con-python.html#cb841-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb841-45"><a href="análisis-de-datos-con-python.html#cb841-45" aria-hidden="true" tabindex="-1"></a>            balance.append(balance[<span class="op">-</span><span class="dv">1</span>] <span class="op">-</span> bet)</span>
<span id="cb841-46"><a href="análisis-de-datos-con-python.html#cb841-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-47"><a href="análisis-de-datos-con-python.html#cb841-47" aria-hidden="true" tabindex="-1"></a>        num_rolls.append(num_rolls[<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb841-48"><a href="análisis-de-datos-con-python.html#cb841-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Store tracking variables and add line to figure</span></span>
<span id="cb841-49"><a href="análisis-de-datos-con-python.html#cb841-49" aria-hidden="true" tabindex="-1"></a>    win_probability.append(num_wins<span class="op">/</span>num_rolls[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb841-50"><a href="análisis-de-datos-con-python.html#cb841-50" aria-hidden="true" tabindex="-1"></a>    end_balance.append(balance[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb841-51"><a href="análisis-de-datos-con-python.html#cb841-51" aria-hidden="true" tabindex="-1"></a>    plt.plot(num_rolls, balance)</span>
<span id="cb841-52"><a href="análisis-de-datos-con-python.html#cb841-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-53"><a href="análisis-de-datos-con-python.html#cb841-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Showing the plot after the simulations are finished</span></span>
<span id="cb841-54"><a href="análisis-de-datos-con-python.html#cb841-54" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb841-55"><a href="análisis-de-datos-con-python.html#cb841-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb841-56"><a href="análisis-de-datos-con-python.html#cb841-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Averaging win probability and end balance</span></span>
<span id="cb841-57"><a href="análisis-de-datos-con-python.html#cb841-57" aria-hidden="true" tabindex="-1"></a>overall_win_probability <span class="op">=</span> <span class="bu">sum</span>(win_probability)<span class="op">/</span><span class="bu">len</span>(win_probability)</span>
<span id="cb841-58"><a href="análisis-de-datos-con-python.html#cb841-58" aria-hidden="true" tabindex="-1"></a>overall_end_balance <span class="op">=</span> <span class="bu">sum</span>(end_balance)<span class="op">/</span><span class="bu">len</span>(end_balance)</span>
<span id="cb841-59"><a href="análisis-de-datos-con-python.html#cb841-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the averages</span></span>
<span id="cb841-60"><a href="análisis-de-datos-con-python.html#cb841-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Average win probability after &quot;</span> <span class="op">+</span> <span class="bu">str</span>(num_simulations) <span class="op">+</span> <span class="st">&quot;runs: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(overall_win_probability))</span>
<span id="cb841-61"><a href="análisis-de-datos-con-python.html#cb841-61" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Average ending balance after &quot;</span> <span class="op">+</span> <span class="bu">str</span>(num_simulations) <span class="op">+</span> <span class="st">&quot;runs: $&quot;</span> <span class="op">+</span> <span class="bu">str</span>(overall_end_balance))</span></code></pre></div>
</div>
<div id="ejemplo-2-modelo" class="section level4 hasAnchor" number="4.7.3.2">
<h4><span class="header-section-number">4.7.3.2</span> Ejemplo 2: Modelo<a href="análisis-de-datos-con-python.html#ejemplo-2-modelo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb842"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb842-1"><a href="análisis-de-datos-con-python.html#cb842-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb842-2"><a href="análisis-de-datos-con-python.html#cb842-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb842-3"><a href="análisis-de-datos-con-python.html#cb842-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> plt </span>
<span id="cb842-4"><a href="análisis-de-datos-con-python.html#cb842-4" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">2021</span>)</span>
<span id="cb842-5"><a href="análisis-de-datos-con-python.html#cb842-5" aria-hidden="true" tabindex="-1"></a>mu <span class="op">=</span> <span class="dv">0</span> </span>
<span id="cb842-6"><a href="análisis-de-datos-con-python.html#cb842-6" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="dv">1</span> </span>
<span id="cb842-7"><a href="análisis-de-datos-con-python.html#cb842-7" aria-hidden="true" tabindex="-1"></a>n <span class="op">=</span> <span class="dv">100</span> </span>
<span id="cb842-8"><a href="análisis-de-datos-con-python.html#cb842-8" aria-hidden="true" tabindex="-1"></a><span class="co"># assumed population parameters</span></span>
<span id="cb842-9"><a href="análisis-de-datos-con-python.html#cb842-9" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> np.repeat(<span class="fl">0.5</span>, n)</span>
<span id="cb842-10"><a href="análisis-de-datos-con-python.html#cb842-10" aria-hidden="true" tabindex="-1"></a>beta <span class="op">=</span> <span class="fl">1.5</span></span>
<span id="cb842-11"><a href="análisis-de-datos-con-python.html#cb842-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb842-12"><a href="análisis-de-datos-con-python.html#cb842-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> MC_estimation_slope(M):</span>
<span id="cb842-13"><a href="análisis-de-datos-con-python.html#cb842-13" aria-hidden="true" tabindex="-1"></a>    MC_betas <span class="op">=</span> []</span>
<span id="cb842-14"><a href="análisis-de-datos-con-python.html#cb842-14" aria-hidden="true" tabindex="-1"></a>    MC_samples <span class="op">=</span> {}</span>
<span id="cb842-15"><a href="análisis-de-datos-con-python.html#cb842-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb842-16"><a href="análisis-de-datos-con-python.html#cb842-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(M):</span>
<span id="cb842-17"><a href="análisis-de-datos-con-python.html#cb842-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># randomly sampling from normal distribution as error terms</span></span>
<span id="cb842-18"><a href="análisis-de-datos-con-python.html#cb842-18" aria-hidden="true" tabindex="-1"></a>        e <span class="op">=</span> np.random.normal(mu, sigma, n)</span>
<span id="cb842-19"><a href="análisis-de-datos-con-python.html#cb842-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># generating independent variable by making sure the variance in X is larger than the variance in error terms</span></span>
<span id="cb842-20"><a href="análisis-de-datos-con-python.html#cb842-20" aria-hidden="true" tabindex="-1"></a>        X <span class="op">=</span> <span class="dv">9</span> <span class="op">*</span> np.random.normal(mu, sigma, n)</span>
<span id="cb842-21"><a href="análisis-de-datos-con-python.html#cb842-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># population distribution using the assumd parameter values alpha/beta</span></span>
<span id="cb842-22"><a href="análisis-de-datos-con-python.html#cb842-22" aria-hidden="true" tabindex="-1"></a>        Y <span class="op">=</span> (alpha <span class="op">+</span> beta <span class="op">*</span> X <span class="op">+</span> e)</span>
<span id="cb842-23"><a href="análisis-de-datos-con-python.html#cb842-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb842-24"><a href="análisis-de-datos-con-python.html#cb842-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># running OLS regression for getting slope parameters</span></span>
<span id="cb842-25"><a href="análisis-de-datos-con-python.html#cb842-25" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> sm.OLS(Y.reshape((<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)), X.reshape((<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)))</span>
<span id="cb842-26"><a href="análisis-de-datos-con-python.html#cb842-26" aria-hidden="true" tabindex="-1"></a>        ols_result <span class="op">=</span> model.fit()</span>
<span id="cb842-27"><a href="análisis-de-datos-con-python.html#cb842-27" aria-hidden="true" tabindex="-1"></a>        coeff <span class="op">=</span> ols_result.params</span>
<span id="cb842-28"><a href="análisis-de-datos-con-python.html#cb842-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb842-29"><a href="análisis-de-datos-con-python.html#cb842-29" aria-hidden="true" tabindex="-1"></a>        MC_samples[i] <span class="op">=</span> Y</span>
<span id="cb842-30"><a href="análisis-de-datos-con-python.html#cb842-30" aria-hidden="true" tabindex="-1"></a>        MC_betas.append(coeff)</span>
<span id="cb842-31"><a href="análisis-de-datos-con-python.html#cb842-31" aria-hidden="true" tabindex="-1"></a>    MC_beta_hats <span class="op">=</span> np.array(MC_betas).flatten()</span>
<span id="cb842-32"><a href="análisis-de-datos-con-python.html#cb842-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(MC_samples, MC_beta_hats)</span>
<span id="cb842-33"><a href="análisis-de-datos-con-python.html#cb842-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb842-34"><a href="análisis-de-datos-con-python.html#cb842-34" aria-hidden="true" tabindex="-1"></a>MC_samples, MC_beta_hats <span class="op">=</span> MC_estimation_slope(M <span class="op">=</span> <span class="dv">10000</span>)</span>
<span id="cb842-35"><a href="análisis-de-datos-con-python.html#cb842-35" aria-hidden="true" tabindex="-1"></a>beta_hat_MC <span class="op">=</span> np.mean(MC_beta_hats)</span>
<span id="cb842-36"><a href="análisis-de-datos-con-python.html#cb842-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb842-37"><a href="análisis-de-datos-con-python.html#cb842-37" aria-hidden="true" tabindex="-1"></a>MC_samples, MC_beta_hats</span>
<span id="cb842-38"><a href="análisis-de-datos-con-python.html#cb842-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb842-39"><a href="análisis-de-datos-con-python.html#cb842-39" aria-hidden="true" tabindex="-1"></a>plt.hist(MC_beta_hats)</span>
<span id="cb842-40"><a href="análisis-de-datos-con-python.html#cb842-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb842-41"><a href="análisis-de-datos-con-python.html#cb842-41" aria-hidden="true" tabindex="-1"></a>beta_hat_MC</span></code></pre></div>
</div>
</div>
<div id="bootstraping" class="section level3 hasAnchor" number="4.7.4">
<h3><span class="header-section-number">4.7.4</span> Bootstraping<a href="análisis-de-datos-con-python.html#bootstraping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb843"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb843-1"><a href="análisis-de-datos-con-python.html#cb843-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import necessary libraries</span></span>
<span id="cb843-2"><a href="análisis-de-datos-con-python.html#cb843-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb843-3"><a href="análisis-de-datos-con-python.html#cb843-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb843-4"><a href="análisis-de-datos-con-python.html#cb843-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb843-5"><a href="análisis-de-datos-con-python.html#cb843-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb843-6"><a href="análisis-de-datos-con-python.html#cb843-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre></div>
<ul>
<li>Data</li>
</ul>
<div class="sourceCode" id="cb844"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb844-1"><a href="análisis-de-datos-con-python.html#cb844-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the iris dataset</span></span>
<span id="cb844-2"><a href="análisis-de-datos-con-python.html#cb844-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">&#39;weight-height.csv&#39;</span>)</span>
<span id="cb844-3"><a href="análisis-de-datos-con-python.html#cb844-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb844-4"><a href="análisis-de-datos-con-python.html#cb844-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Looking at information</span></span>
<span id="cb844-5"><a href="análisis-de-datos-con-python.html#cb844-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Info:&quot;</span>)</span>
<span id="cb844-6"><a href="análisis-de-datos-con-python.html#cb844-6" aria-hidden="true" tabindex="-1"></a>display(data.info())</span>
<span id="cb844-7"><a href="análisis-de-datos-con-python.html#cb844-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb844-8"><a href="análisis-de-datos-con-python.html#cb844-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary Statistics</span></span>
<span id="cb844-9"><a href="análisis-de-datos-con-python.html#cb844-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Summary Statistics:&quot;</span>)</span>
<span id="cb844-10"><a href="análisis-de-datos-con-python.html#cb844-10" aria-hidden="true" tabindex="-1"></a>display(data.describe())</span>
<span id="cb844-11"><a href="análisis-de-datos-con-python.html#cb844-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb844-12"><a href="análisis-de-datos-con-python.html#cb844-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Display first 5 rows</span></span>
<span id="cb844-13"><a href="análisis-de-datos-con-python.html#cb844-13" aria-hidden="true" tabindex="-1"></a>display(data.head())</span></code></pre></div>
<ul>
<li>Convertimos datos en centimetros</li>
</ul>
<div class="sourceCode" id="cb845"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb845-1"><a href="análisis-de-datos-con-python.html#cb845-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert inches to centimeters</span></span>
<span id="cb845-2"><a href="análisis-de-datos-con-python.html#cb845-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">&quot;Height(cm)&quot;</span>] <span class="op">=</span> data[<span class="st">&quot;Height&quot;</span>]<span class="op">*</span><span class="fl">2.54</span></span>
<span id="cb845-3"><a href="análisis-de-datos-con-python.html#cb845-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb845-4"><a href="análisis-de-datos-con-python.html#cb845-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get summary statistics of Heights in centimeters</span></span>
<span id="cb845-5"><a href="análisis-de-datos-con-python.html#cb845-5" aria-hidden="true" tabindex="-1"></a>display(data[<span class="st">&#39;Height(cm)&#39;</span>].describe())</span></code></pre></div>
<p>Como podemos ver, la altura máxima y mínima del conjunto de datos son 137,8 cm y 200,6 cm respectivamente</p>
<p>Tome 500 alturas seleccionadas al azar</p>
<div class="sourceCode" id="cb846"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb846-1"><a href="análisis-de-datos-con-python.html#cb846-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraemos 500 random</span></span>
<span id="cb846-2"><a href="análisis-de-datos-con-python.html#cb846-2" aria-hidden="true" tabindex="-1"></a>heights <span class="op">=</span> data[<span class="st">&#39;Height(cm)&#39;</span>].sample(<span class="dv">500</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb846-3"><a href="análisis-de-datos-con-python.html#cb846-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb846-4"><a href="análisis-de-datos-con-python.html#cb846-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Eastadisticas</span></span>
<span id="cb846-5"><a href="análisis-de-datos-con-python.html#cb846-5" aria-hidden="true" tabindex="-1"></a>display(heights.describe())</span></code></pre></div>
<ul>
<li>Si los datos se distribuyen normalmente, ¿qué pasaría? Para ver esto, vamos a trazar la función de distribución acumulativa con la media y la desviación estándar de nuestros datos empíricos.</li>
</ul>
<div class="sourceCode" id="cb847"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb847-1"><a href="análisis-de-datos-con-python.html#cb847-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenga la desviación estándar y la media</span></span>
<span id="cb847-2"><a href="análisis-de-datos-con-python.html#cb847-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb847-3"><a href="análisis-de-datos-con-python.html#cb847-3" aria-hidden="true" tabindex="-1"></a>heights_std <span class="op">=</span> np.std(heights)</span>
<span id="cb847-4"><a href="análisis-de-datos-con-python.html#cb847-4" aria-hidden="true" tabindex="-1"></a>heights_mean <span class="op">=</span> np.mean(heights)</span>
<span id="cb847-5"><a href="análisis-de-datos-con-python.html#cb847-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb847-6"><a href="análisis-de-datos-con-python.html#cb847-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Normal CDF</span></span>
<span id="cb847-7"><a href="análisis-de-datos-con-python.html#cb847-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_normal_CDF(data,mean,std,label,title):</span>
<span id="cb847-8"><a href="análisis-de-datos-con-python.html#cb847-8" aria-hidden="true" tabindex="-1"></a>    sns.<span class="bu">set</span>()</span>
<span id="cb847-9"><a href="análisis-de-datos-con-python.html#cb847-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CDF of the data</span></span>
<span id="cb847-10"><a href="análisis-de-datos-con-python.html#cb847-10" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.linspace(<span class="bu">min</span>(data),<span class="bu">max</span>(data),<span class="bu">len</span>(data))</span>
<span id="cb847-11"><a href="análisis-de-datos-con-python.html#cb847-11" aria-hidden="true" tabindex="-1"></a>    cdf <span class="op">=</span> stats.norm.cdf(x,mean,std)</span>
<span id="cb847-12"><a href="análisis-de-datos-con-python.html#cb847-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb847-13"><a href="análisis-de-datos-con-python.html#cb847-13" aria-hidden="true" tabindex="-1"></a>    plt.plot(x,cdf)</span>
<span id="cb847-14"><a href="análisis-de-datos-con-python.html#cb847-14" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(label)</span>
<span id="cb847-15"><a href="análisis-de-datos-con-python.html#cb847-15" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(<span class="st">&#39;percentage&#39;</span>)</span>
<span id="cb847-16"><a href="análisis-de-datos-con-python.html#cb847-16" aria-hidden="true" tabindex="-1"></a>    plt.title(title)</span>
<span id="cb847-17"><a href="análisis-de-datos-con-python.html#cb847-17" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb847-18"><a href="análisis-de-datos-con-python.html#cb847-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x,cdf</span>
<span id="cb847-19"><a href="análisis-de-datos-con-python.html#cb847-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb847-20"><a href="análisis-de-datos-con-python.html#cb847-20" aria-hidden="true" tabindex="-1"></a><span class="co"># CDF of Versicolor</span></span>
<span id="cb847-21"><a href="análisis-de-datos-con-python.html#cb847-21" aria-hidden="true" tabindex="-1"></a>x_cdf, y_cdf <span class="op">=</span> plot_normal_CDF(heights, heights_mean, heights_std, <span class="st">&quot;Height (cm)&quot;</span>,<span class="st">&quot;CDF&quot;</span>)</span></code></pre></div>
<p>Además de la FCD, trace la función de distribución acumulativa empírica y la función de densidad de probabilidad.</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb848-1"><a href="análisis-de-datos-con-python.html#cb848-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to get x, y for of ecdf</span></span>
<span id="cb848-2"><a href="análisis-de-datos-con-python.html#cb848-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_ecdf(data):</span>
<span id="cb848-3"><a href="análisis-de-datos-con-python.html#cb848-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-4"><a href="análisis-de-datos-con-python.html#cb848-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get lenght of the data into n</span></span>
<span id="cb848-5"><a href="análisis-de-datos-con-python.html#cb848-5" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(data)</span>
<span id="cb848-6"><a href="análisis-de-datos-con-python.html#cb848-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-7"><a href="análisis-de-datos-con-python.html#cb848-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We need to sort the data</span></span>
<span id="cb848-8"><a href="análisis-de-datos-con-python.html#cb848-8" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.sort(data)</span>
<span id="cb848-9"><a href="análisis-de-datos-con-python.html#cb848-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-10"><a href="análisis-de-datos-con-python.html#cb848-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the function will show us cumulative percentages of corresponding data points</span></span>
<span id="cb848-11"><a href="análisis-de-datos-con-python.html#cb848-11" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> np.arange(<span class="dv">1</span>,n<span class="op">+</span><span class="dv">1</span>)<span class="op">/</span>n</span>
<span id="cb848-12"><a href="análisis-de-datos-con-python.html#cb848-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-13"><a href="análisis-de-datos-con-python.html#cb848-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x,y</span>
<span id="cb848-14"><a href="análisis-de-datos-con-python.html#cb848-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb848-15"><a href="análisis-de-datos-con-python.html#cb848-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function to plot ecdf</span></span>
<span id="cb848-16"><a href="análisis-de-datos-con-python.html#cb848-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_ecdf(data,labelx,labely,title,color):</span>
<span id="cb848-17"><a href="análisis-de-datos-con-python.html#cb848-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;Plot ecdf&quot;&quot;&quot;</span></span>
<span id="cb848-18"><a href="análisis-de-datos-con-python.html#cb848-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Call get_ecdf function and assign the returning values</span></span>
<span id="cb848-19"><a href="análisis-de-datos-con-python.html#cb848-19" aria-hidden="true" tabindex="-1"></a>    x, y <span class="op">=</span> get_ecdf(data)</span>
<span id="cb848-20"><a href="análisis-de-datos-con-python.html#cb848-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-21"><a href="análisis-de-datos-con-python.html#cb848-21" aria-hidden="true" tabindex="-1"></a>    plt.plot(x,y,marker<span class="op">=</span><span class="st">&#39;.&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;none&#39;</span>,c<span class="op">=</span>color)</span>
<span id="cb848-22"><a href="análisis-de-datos-con-python.html#cb848-22" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(labelx)</span>
<span id="cb848-23"><a href="análisis-de-datos-con-python.html#cb848-23" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(labely)</span>
<span id="cb848-24"><a href="análisis-de-datos-con-python.html#cb848-24" aria-hidden="true" tabindex="-1"></a>    plt.title(title)</span>
<span id="cb848-25"><a href="análisis-de-datos-con-python.html#cb848-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb848-26"><a href="análisis-de-datos-con-python.html#cb848-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a function overlay ECDF on CDF</span></span>
<span id="cb848-27"><a href="análisis-de-datos-con-python.html#cb848-27" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_overlay_ecdf(data,labelx,labely,title,color,x_cdf, y_cdf):</span>
<span id="cb848-28"><a href="análisis-de-datos-con-python.html#cb848-28" aria-hidden="true" tabindex="-1"></a>    x, y <span class="op">=</span> get_ecdf(data)</span>
<span id="cb848-29"><a href="análisis-de-datos-con-python.html#cb848-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-30"><a href="análisis-de-datos-con-python.html#cb848-30" aria-hidden="true" tabindex="-1"></a>    plt.plot(x,y,marker<span class="op">=</span><span class="st">&#39;.&#39;</span>,linestyle<span class="op">=</span><span class="st">&#39;none&#39;</span>,c<span class="op">=</span>color,alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb848-31"><a href="análisis-de-datos-con-python.html#cb848-31" aria-hidden="true" tabindex="-1"></a>    plt.plot(x_cdf, y_cdf)</span>
<span id="cb848-32"><a href="análisis-de-datos-con-python.html#cb848-32" aria-hidden="true" tabindex="-1"></a>    plt.xlabel(labelx)</span>
<span id="cb848-33"><a href="análisis-de-datos-con-python.html#cb848-33" aria-hidden="true" tabindex="-1"></a>    plt.ylabel(labely)</span>
<span id="cb848-34"><a href="análisis-de-datos-con-python.html#cb848-34" aria-hidden="true" tabindex="-1"></a>    plt.title(title)</span>
<span id="cb848-35"><a href="análisis-de-datos-con-python.html#cb848-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb848-36"><a href="análisis-de-datos-con-python.html#cb848-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting Empirical CDF</span></span>
<span id="cb848-37"><a href="análisis-de-datos-con-python.html#cb848-37" aria-hidden="true" tabindex="-1"></a>plot_ecdf(heights,<span class="st">&quot;Height (cm)&quot;</span>,<span class="st">&quot;percentage&quot;</span>,<span class="st">&quot;Empirical CDF&quot;</span>,<span class="st">&quot;r&quot;</span>)</span>
<span id="cb848-38"><a href="análisis-de-datos-con-python.html#cb848-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb848-39"><a href="análisis-de-datos-con-python.html#cb848-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb848-40"><a href="análisis-de-datos-con-python.html#cb848-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlap Empirical CDF on CDF</span></span>
<span id="cb848-41"><a href="análisis-de-datos-con-python.html#cb848-41" aria-hidden="true" tabindex="-1"></a>plot_overlay_ecdf(heights,<span class="st">&quot;Height (cm)&quot;</span>,<span class="st">&quot;percentage&quot;</span>,<span class="st">&quot;Empirical CDF on CDF&quot;</span>,<span class="st">&quot;y&quot;</span>,x_cdf, y_cdf)</span>
<span id="cb848-42"><a href="análisis-de-datos-con-python.html#cb848-42" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb848-43"><a href="análisis-de-datos-con-python.html#cb848-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb848-44"><a href="análisis-de-datos-con-python.html#cb848-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting PDF</span></span>
<span id="cb848-45"><a href="análisis-de-datos-con-python.html#cb848-45" aria-hidden="true" tabindex="-1"></a>sns.distplot(heights,hist<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb848-46"><a href="análisis-de-datos-con-python.html#cb848-46" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Petal length(cm)&quot;</span>)</span>
<span id="cb848-47"><a href="análisis-de-datos-con-python.html#cb848-47" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;PDF&quot;</span>)</span>
<span id="cb848-48"><a href="análisis-de-datos-con-python.html#cb848-48" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Probability Density Function&quot;</span>)</span>
<span id="cb848-49"><a href="análisis-de-datos-con-python.html#cb848-49" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p>Si hubieramos hecho el mismo experimento muchas veces hubiesemos obtenido lo mismo?</p>
<div class="sourceCode" id="cb849"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb849-1"><a href="análisis-de-datos-con-python.html#cb849-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot our original sample ecdf</span></span>
<span id="cb849-2"><a href="análisis-de-datos-con-python.html#cb849-2" aria-hidden="true" tabindex="-1"></a>plot_ecdf(heights,<span class="st">&quot;Height (cm)&quot;</span>,<span class="st">&quot;percentage&quot;</span>,<span class="st">&quot;ECDF&#39;s of bootstrap samples&quot;</span>,<span class="st">&quot;y&quot;</span>)</span>
<span id="cb849-3"><a href="análisis-de-datos-con-python.html#cb849-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb849-4"><a href="análisis-de-datos-con-python.html#cb849-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb849-5"><a href="análisis-de-datos-con-python.html#cb849-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb849-6"><a href="análisis-de-datos-con-python.html#cb849-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate a bootstrap sample</span></span>
<span id="cb849-7"><a href="análisis-de-datos-con-python.html#cb849-7" aria-hidden="true" tabindex="-1"></a>    bs_sample_heights <span class="op">=</span> np.random.choice(heights,size<span class="op">=</span><span class="bu">len</span>(heights))</span>
<span id="cb849-8"><a href="análisis-de-datos-con-python.html#cb849-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb849-9"><a href="análisis-de-datos-con-python.html#cb849-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Plot ecdf for bootstrap sample</span></span>
<span id="cb849-10"><a href="análisis-de-datos-con-python.html#cb849-10" aria-hidden="true" tabindex="-1"></a>    x, y <span class="op">=</span> get_ecdf(bs_sample_heights)</span>
<span id="cb849-11"><a href="análisis-de-datos-con-python.html#cb849-11" aria-hidden="true" tabindex="-1"></a>    plt.scatter(x, y,s<span class="op">=</span><span class="dv">1</span>,c<span class="op">=</span><span class="st">&#39;b&#39;</span>,alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb849-12"><a href="análisis-de-datos-con-python.html#cb849-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb849-13"><a href="análisis-de-datos-con-python.html#cb849-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<ul>
<li>Necesitaremos una función que genere muestras bootstrap y extraiga réplicas bootstrap de esas muestras tanto como queramos. La función tomará tres parámetros data, func y size. El parámetro ‘func’ corresponde a los estadísticos de resumen que querremos utilizar al crear una réplica bootstrap. El parámetro ‘size’ nos indicará cuántas réplicas necesitamos.</li>
</ul>
<div class="sourceCode" id="cb850"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb850-1"><a href="análisis-de-datos-con-python.html#cb850-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> draw_bs_replicates(data,func,size):</span>
<span id="cb850-2"><a href="análisis-de-datos-con-python.html#cb850-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;creates a bootstrap sample, computes replicates and returns replicates array&quot;&quot;&quot;</span></span>
<span id="cb850-3"><a href="análisis-de-datos-con-python.html#cb850-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create an empty array to store replicates</span></span>
<span id="cb850-4"><a href="análisis-de-datos-con-python.html#cb850-4" aria-hidden="true" tabindex="-1"></a>    bs_replicates <span class="op">=</span> np.empty(size)</span>
<span id="cb850-5"><a href="análisis-de-datos-con-python.html#cb850-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb850-6"><a href="análisis-de-datos-con-python.html#cb850-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create bootstrap replicates as much as size</span></span>
<span id="cb850-7"><a href="análisis-de-datos-con-python.html#cb850-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(size):</span>
<span id="cb850-8"><a href="análisis-de-datos-con-python.html#cb850-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create a bootstrap sample</span></span>
<span id="cb850-9"><a href="análisis-de-datos-con-python.html#cb850-9" aria-hidden="true" tabindex="-1"></a>        bs_sample <span class="op">=</span> np.random.choice(data,size<span class="op">=</span><span class="bu">len</span>(data))</span>
<span id="cb850-10"><a href="análisis-de-datos-con-python.html#cb850-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Get bootstrap replicate and append to bs_replicates</span></span>
<span id="cb850-11"><a href="análisis-de-datos-con-python.html#cb850-11" aria-hidden="true" tabindex="-1"></a>        bs_replicates[i] <span class="op">=</span> func(bs_sample)</span>
<span id="cb850-12"><a href="análisis-de-datos-con-python.html#cb850-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb850-13"><a href="análisis-de-datos-con-python.html#cb850-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bs_replicates</span></code></pre></div>
<p>Ahora utilizaremos nuestra función para obtener 10.000 réplicas bootstrap. Después veremos cómo son su PDF y su ECDF.</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb851-1"><a href="análisis-de-datos-con-python.html#cb851-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Draw 10000 bootstrap replicates</span></span>
<span id="cb851-2"><a href="análisis-de-datos-con-python.html#cb851-2" aria-hidden="true" tabindex="-1"></a>bs_replicates_heights <span class="op">=</span> draw_bs_replicates(heights,np.mean,<span class="dv">15000</span>)</span>
<span id="cb851-3"><a href="análisis-de-datos-con-python.html#cb851-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb851-4"><a href="análisis-de-datos-con-python.html#cb851-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot probability density function</span></span>
<span id="cb851-5"><a href="análisis-de-datos-con-python.html#cb851-5" aria-hidden="true" tabindex="-1"></a>plt.hist(bs_replicates_heights,bins<span class="op">=</span><span class="dv">30</span>,density<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb851-6"><a href="análisis-de-datos-con-python.html#cb851-6" aria-hidden="true" tabindex="-1"></a>plt.axvline(x<span class="op">=</span>np.percentile(bs_replicates_heights,[<span class="fl">2.5</span>]), ymin<span class="op">=</span><span class="dv">0</span>, ymax<span class="op">=</span><span class="dv">1</span>,label<span class="op">=</span><span class="st">&#39;2.5th percentile&#39;</span>,c<span class="op">=</span><span class="st">&#39;y&#39;</span>)</span>
<span id="cb851-7"><a href="análisis-de-datos-con-python.html#cb851-7" aria-hidden="true" tabindex="-1"></a>plt.axvline(x<span class="op">=</span>np.percentile(bs_replicates_heights,[<span class="fl">97.5</span>]), ymin<span class="op">=</span><span class="dv">0</span>, ymax<span class="op">=</span><span class="dv">1</span>,label<span class="op">=</span><span class="st">&#39;97.5th percentile&#39;</span>,c<span class="op">=</span><span class="st">&#39;r&#39;</span>)</span>
<span id="cb851-8"><a href="análisis-de-datos-con-python.html#cb851-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Height(cm)&quot;</span>)</span>
<span id="cb851-9"><a href="análisis-de-datos-con-python.html#cb851-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;PDF&quot;</span>)</span>
<span id="cb851-10"><a href="análisis-de-datos-con-python.html#cb851-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;Probability Density Function&quot;</span>)</span>
<span id="cb851-11"><a href="análisis-de-datos-con-python.html#cb851-11" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb851-12"><a href="análisis-de-datos-con-python.html#cb851-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb851-13"><a href="análisis-de-datos-con-python.html#cb851-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb851-14"><a href="análisis-de-datos-con-python.html#cb851-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the ECDF of replicates</span></span>
<span id="cb851-15"><a href="análisis-de-datos-con-python.html#cb851-15" aria-hidden="true" tabindex="-1"></a>xsbs_ecdf, ysbs_ecdf <span class="op">=</span> get_ecdf(bs_replicates_heights)</span>
<span id="cb851-16"><a href="análisis-de-datos-con-python.html#cb851-16" aria-hidden="true" tabindex="-1"></a>plt.scatter(xsbs_ecdf, ysbs_ecdf,s<span class="op">=</span><span class="dv">5</span>,c<span class="op">=</span><span class="st">&#39;b&#39;</span>,alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb851-17"><a href="análisis-de-datos-con-python.html#cb851-17" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;Height(cm)&quot;</span>)</span>
<span id="cb851-18"><a href="análisis-de-datos-con-python.html#cb851-18" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;ECDF&quot;</span>)</span>
<span id="cb851-19"><a href="análisis-de-datos-con-python.html#cb851-19" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;ECDF of Bootstrap Replicates&quot;</span>)</span>
<span id="cb851-20"><a href="análisis-de-datos-con-python.html#cb851-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<ul>
<li>Comparemos la media empírica y la media de nuestras réplicas</li>
</ul>
<div class="sourceCode" id="cb852"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb852-1"><a href="análisis-de-datos-con-python.html#cb852-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Empirical mean: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(heights_mean))</span>
<span id="cb852-2"><a href="análisis-de-datos-con-python.html#cb852-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb852-3"><a href="análisis-de-datos-con-python.html#cb852-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the mean of bootstrap replicates</span></span>
<span id="cb852-4"><a href="análisis-de-datos-con-python.html#cb852-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Bootstrap replicates mean: &quot;</span> <span class="op">+</span> <span class="bu">str</span>(np.mean(bs_replicates_heights)))</span></code></pre></div>
<ul>
<li><p>Intervalo de confianza?</p></li>
<li><p>Medias muy iguales</p></li>
<li><p>Ecnontremos el intervalo de confianza</p></li>
<li><p>Necesitamos conocer el area entre los cuantiles</p></li>
</ul>
<div class="sourceCode" id="cb853"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb853-1"><a href="análisis-de-datos-con-python.html#cb853-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the corresponding values of 2.5th and 97.5th percentiles</span></span>
<span id="cb853-2"><a href="análisis-de-datos-con-python.html#cb853-2" aria-hidden="true" tabindex="-1"></a>conf_interval <span class="op">=</span> np.percentile(bs_replicates_heights,[<span class="fl">2.5</span>,<span class="fl">97.5</span>])</span>
<span id="cb853-3"><a href="análisis-de-datos-con-python.html#cb853-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb853-4"><a href="análisis-de-datos-con-python.html#cb853-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the interval</span></span>
<span id="cb853-5"><a href="análisis-de-datos-con-python.html#cb853-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;The confidence interval: &quot;</span>,conf_interval)</span></code></pre></div>
<ul>
<li>Encontramos un intervalo de confianza entre 167,2cm y 162,5cm.</li>
<li>Podemos decir que si elegimos a alguien al azar, su altura estará entre este intervalo con un %95 de probabilidad.</li>
</ul>
</div>
<div id="regresión-logistica" class="section level3 hasAnchor" number="4.7.5">
<h3><span class="header-section-number">4.7.5</span> Regresión Logistica<a href="análisis-de-datos-con-python.html#regresión-logistica" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb854"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb854-1"><a href="análisis-de-datos-con-python.html#cb854-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb854-2"><a href="análisis-de-datos-con-python.html#cb854-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb854-3"><a href="análisis-de-datos-con-python.html#cb854-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb854-4"><a href="análisis-de-datos-con-python.html#cb854-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb854-5"><a href="análisis-de-datos-con-python.html#cb854-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats</span>
<span id="cb854-6"><a href="análisis-de-datos-con-python.html#cb854-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb854-7"><a href="análisis-de-datos-con-python.html#cb854-7" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">9</span>,<span class="dv">9</span>))</span>
<span id="cb854-8"><a href="análisis-de-datos-con-python.html#cb854-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb854-9"><a href="análisis-de-datos-con-python.html#cb854-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sigmoid(t):                          <span class="co"># Define the sigmoid function</span></span>
<span id="cb854-10"><a href="análisis-de-datos-con-python.html#cb854-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span> np.e<span class="op">**</span>(<span class="op">-</span>t)))    </span>
<span id="cb854-11"><a href="análisis-de-datos-con-python.html#cb854-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb854-12"><a href="análisis-de-datos-con-python.html#cb854-12" aria-hidden="true" tabindex="-1"></a>plot_range <span class="op">=</span> np.arange(<span class="op">-</span><span class="dv">6</span>, <span class="dv">6</span>, <span class="fl">0.1</span>)       </span>
<span id="cb854-13"><a href="análisis-de-datos-con-python.html#cb854-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb854-14"><a href="análisis-de-datos-con-python.html#cb854-14" aria-hidden="true" tabindex="-1"></a>y_values <span class="op">=</span> sigmoid(plot_range)</span>
<span id="cb854-15"><a href="análisis-de-datos-con-python.html#cb854-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb854-16"><a href="análisis-de-datos-con-python.html#cb854-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot curve</span></span>
<span id="cb854-17"><a href="análisis-de-datos-con-python.html#cb854-17" aria-hidden="true" tabindex="-1"></a>plt.plot(plot_range,   <span class="co"># X-axis range</span></span>
<span id="cb854-18"><a href="análisis-de-datos-con-python.html#cb854-18" aria-hidden="true" tabindex="-1"></a>         y_values,          <span class="co"># Predicted values</span></span>
<span id="cb854-19"><a href="análisis-de-datos-con-python.html#cb854-19" aria-hidden="true" tabindex="-1"></a>         color<span class="op">=</span><span class="st">&quot;red&quot;</span>)<span class="op">;</span></span></code></pre></div>
<ul>
<li>La función sigmoide está limitada por debajo por 0 y por encima por 1.</li>
<li>En la regresión logística, el resultado se interpreta como una probabilidad: la probabilidad de que una observación pertenezca a la segunda de las dos categorías modeladas. Cuando la combinación lineal de variables produce números positivos, la probabilidad resultante es mayor que 0,5 y cuando produce números negativos, la probabilidad es menor que 0,5.</li>
</ul>
<p>No profundizaremos en los detalles de cómo funciona la regresión logística, sino que nos centraremos en cómo utilizarla en Python. Lo más importante es saber que la reg&lt;resión logística produce probabilidades que podemos utilizar para clasificar las observaciones.</p>
<div id="titanic" class="section level4 hasAnchor" number="4.7.5.1">
<h4><span class="header-section-number">4.7.5.1</span> Titanic<a href="análisis-de-datos-con-python.html#titanic" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Para el resto de la lección trabajaremos con los datos de entrenamiento de supervivencia del Titanic de Kaggle que vimos en la lección 14. Empezaremos cargando los datos y realizando algunas de las mismas tareas de preprocesamiento que hicimos en la lección 14:</p>
<div class="sourceCode" id="cb855"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb855-1"><a href="análisis-de-datos-con-python.html#cb855-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb855-2"><a href="análisis-de-datos-con-python.html#cb855-2" aria-hidden="true" tabindex="-1"></a>os.chdir(<span class="st">&quot;datos&quot;</span>)</span>
<span id="cb855-3"><a href="análisis-de-datos-con-python.html#cb855-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-4"><a href="análisis-de-datos-con-python.html#cb855-4" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="op">=</span> pd.read_csv(<span class="st">&quot;train.csv&quot;</span>)    <span class="co"># Read the data</span></span>
<span id="cb855-5"><a href="análisis-de-datos-con-python.html#cb855-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-6"><a href="análisis-de-datos-con-python.html#cb855-6" aria-hidden="true" tabindex="-1"></a>char_cabin <span class="op">=</span> titanic_train[<span class="st">&quot;Cabin&quot;</span>].astype(<span class="bu">str</span>)     <span class="co"># Convert cabin to str</span></span>
<span id="cb855-7"><a href="análisis-de-datos-con-python.html#cb855-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-8"><a href="análisis-de-datos-con-python.html#cb855-8" aria-hidden="true" tabindex="-1"></a>new_Cabin <span class="op">=</span> np.array([cabin[<span class="dv">0</span>] <span class="cf">for</span> cabin <span class="kw">in</span> char_cabin]) <span class="co"># Take first letter</span></span>
<span id="cb855-9"><a href="análisis-de-datos-con-python.html#cb855-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-10"><a href="análisis-de-datos-con-python.html#cb855-10" aria-hidden="true" tabindex="-1"></a>titanic_train[<span class="st">&quot;Cabin&quot;</span>] <span class="op">=</span> pd.Categorical(new_Cabin)  <span class="co"># Save the new cabin var</span></span>
<span id="cb855-11"><a href="análisis-de-datos-con-python.html#cb855-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-12"><a href="análisis-de-datos-con-python.html#cb855-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Impute median Age for NA Age values</span></span>
<span id="cb855-13"><a href="análisis-de-datos-con-python.html#cb855-13" aria-hidden="true" tabindex="-1"></a>new_age_var <span class="op">=</span> np.where(titanic_train[<span class="st">&quot;Age&quot;</span>].isnull(), <span class="co"># Logical check</span></span>
<span id="cb855-14"><a href="análisis-de-datos-con-python.html#cb855-14" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">28</span>,                       <span class="co"># Value if check is true</span></span>
<span id="cb855-15"><a href="análisis-de-datos-con-python.html#cb855-15" aria-hidden="true" tabindex="-1"></a>                       titanic_train[<span class="st">&quot;Age&quot;</span>])     <span class="co"># Value if check is false</span></span>
<span id="cb855-16"><a href="análisis-de-datos-con-python.html#cb855-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-17"><a href="análisis-de-datos-con-python.html#cb855-17" aria-hidden="true" tabindex="-1"></a>titanic_train[<span class="st">&quot;Age&quot;</span>] <span class="op">=</span> new_age_var </span>
<span id="cb855-18"><a href="análisis-de-datos-con-python.html#cb855-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-19"><a href="análisis-de-datos-con-python.html#cb855-19" aria-hidden="true" tabindex="-1"></a>new_fare_var <span class="op">=</span> np.where(titanic_train[<span class="st">&quot;Fare&quot;</span>].isnull(), <span class="co"># Logical check</span></span>
<span id="cb855-20"><a href="análisis-de-datos-con-python.html#cb855-20" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">50</span>,                         <span class="co"># Value if check is true</span></span>
<span id="cb855-21"><a href="análisis-de-datos-con-python.html#cb855-21" aria-hidden="true" tabindex="-1"></a>                       titanic_train[<span class="st">&quot;Fare&quot;</span>])     <span class="co"># Value if check is false</span></span>
<span id="cb855-22"><a href="análisis-de-datos-con-python.html#cb855-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb855-23"><a href="análisis-de-datos-con-python.html#cb855-23" aria-hidden="true" tabindex="-1"></a>titanic_train[<span class="st">&quot;Fare&quot;</span>] <span class="op">=</span> new_fare_var</span></code></pre></div>
<ul>
<li><p>Ahora estamos listos para utilizar un modelo de regresión logística para predecir la supervivencia. La biblioteca scikit-learn tiene una función de regresión logística en la subcarpeta learn model.</p></li>
<li><p>Hagamos un modelo de regresión logística que sólo utilice la variable Sexo como predictor.</p></li>
<li><p>Antes de crear un modelo con la variable sexo, necesitamos convertirla a un número real porque las funciones de aprendizaje automático de sklearn sólo tratan con números reales.</p></li>
<li><p>Podemos convertir una variable categórica como en un número utilizando la función de preprocesamiento de sklearn LabelEncoder():</p></li>
</ul>
<div class="sourceCode" id="cb856"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb856-1"><a href="análisis-de-datos-con-python.html#cb856-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> linear_model</span>
<span id="cb856-2"><a href="análisis-de-datos-con-python.html#cb856-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> preprocessing</span>
<span id="cb856-3"><a href="análisis-de-datos-con-python.html#cb856-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb856-4"><a href="análisis-de-datos-con-python.html#cb856-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize label encoder</span></span>
<span id="cb856-5"><a href="análisis-de-datos-con-python.html#cb856-5" aria-hidden="true" tabindex="-1"></a>label_encoder <span class="op">=</span> preprocessing.LabelEncoder()</span>
<span id="cb856-6"><a href="análisis-de-datos-con-python.html#cb856-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb856-7"><a href="análisis-de-datos-con-python.html#cb856-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Sex variable to numeric</span></span>
<span id="cb856-8"><a href="análisis-de-datos-con-python.html#cb856-8" aria-hidden="true" tabindex="-1"></a>encoded_sex <span class="op">=</span> label_encoder.fit_transform(titanic_train[<span class="st">&quot;Sex&quot;</span>])</span>
<span id="cb856-9"><a href="análisis-de-datos-con-python.html#cb856-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb856-10"><a href="análisis-de-datos-con-python.html#cb856-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize logistic regression model</span></span>
<span id="cb856-11"><a href="análisis-de-datos-con-python.html#cb856-11" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> linear_model.LogisticRegression(solver <span class="op">=</span> <span class="st">&#39;lbfgs&#39;</span>)</span>
<span id="cb856-12"><a href="análisis-de-datos-con-python.html#cb856-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb856-13"><a href="análisis-de-datos-con-python.html#cb856-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb856-14"><a href="análisis-de-datos-con-python.html#cb856-14" aria-hidden="true" tabindex="-1"></a>log_model.fit(X <span class="op">=</span> pd.DataFrame(encoded_sex), </span>
<span id="cb856-15"><a href="análisis-de-datos-con-python.html#cb856-15" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> titanic_train[<span class="st">&quot;Survived&quot;</span>])</span>
<span id="cb856-16"><a href="análisis-de-datos-con-python.html#cb856-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb856-17"><a href="análisis-de-datos-con-python.html#cb856-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model intercept</span></span>
<span id="cb856-18"><a href="análisis-de-datos-con-python.html#cb856-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.intercept_)</span>
<span id="cb856-19"><a href="análisis-de-datos-con-python.html#cb856-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb856-20"><a href="análisis-de-datos-con-python.html#cb856-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model coefficients</span></span>
<span id="cb856-21"><a href="análisis-de-datos-con-python.html#cb856-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.coef_)</span></code></pre></div>
<p>Los coeficientes del modelo de regresión logística son similares a los resultados de la regresión lineal. Podemos ver que el modelo produjo un valor de intercepción positivo y un peso de -2,421 en el género. Utilicemos el modelo para hacer predicciones en el conjunto de pruebas:</p>
<div class="sourceCode" id="cb857"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb857-1"><a href="análisis-de-datos-con-python.html#cb857-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions</span></span>
<span id="cb857-2"><a href="análisis-de-datos-con-python.html#cb857-2" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> log_model.predict_proba(X<span class="op">=</span> pd.DataFrame(encoded_sex))</span>
<span id="cb857-3"><a href="análisis-de-datos-con-python.html#cb857-3" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> pd.DataFrame(preds)</span>
<span id="cb857-4"><a href="análisis-de-datos-con-python.html#cb857-4" aria-hidden="true" tabindex="-1"></a>preds.columns <span class="op">=</span> [<span class="st">&quot;Death_prob&quot;</span>, <span class="st">&quot;Survival_prob&quot;</span>]</span>
<span id="cb857-5"><a href="análisis-de-datos-con-python.html#cb857-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb857-6"><a href="análisis-de-datos-con-python.html#cb857-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate table of predictions vs Sex</span></span>
<span id="cb857-7"><a href="análisis-de-datos-con-python.html#cb857-7" aria-hidden="true" tabindex="-1"></a>pd.crosstab(titanic_train[<span class="st">&quot;Sex&quot;</span>], preds.loc[:, <span class="st">&quot;Survival_prob&quot;</span>])</span></code></pre></div>
<p><em>Nota: Utilice model.predict_proba() para obtener las probabilidades de clase predichas. Utilice model.predict() para obtener las clases predichas.</em></p>
<p>La tabla muestra que el modelo predijo una probabilidad de supervivencia de aproximadamente el 19% para los hombres y el 73% para las mujeres. Si utilizamos este modelo simple para predecir la supervivencia, acabaríamos prediciendo que todas las mujeres sobrevivieron y que todos los hombres murieron. Hagamos un modelo más complicado que incluya algunas variables más del conjunto de entrenamiento del titán:</p>
<div class="sourceCode" id="cb858"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb858-1"><a href="análisis-de-datos-con-python.html#cb858-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert more variables to numeric</span></span>
<span id="cb858-2"><a href="análisis-de-datos-con-python.html#cb858-2" aria-hidden="true" tabindex="-1"></a>encoded_class <span class="op">=</span> label_encoder.fit_transform(titanic_train[<span class="st">&quot;Pclass&quot;</span>])</span>
<span id="cb858-3"><a href="análisis-de-datos-con-python.html#cb858-3" aria-hidden="true" tabindex="-1"></a>encoded_cabin <span class="op">=</span> label_encoder.fit_transform(titanic_train[<span class="st">&quot;Cabin&quot;</span>])</span>
<span id="cb858-4"><a href="análisis-de-datos-con-python.html#cb858-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-5"><a href="análisis-de-datos-con-python.html#cb858-5" aria-hidden="true" tabindex="-1"></a>train_features <span class="op">=</span> pd.DataFrame([encoded_class,</span>
<span id="cb858-6"><a href="análisis-de-datos-con-python.html#cb858-6" aria-hidden="true" tabindex="-1"></a>                              encoded_cabin,</span>
<span id="cb858-7"><a href="análisis-de-datos-con-python.html#cb858-7" aria-hidden="true" tabindex="-1"></a>                              encoded_sex,</span>
<span id="cb858-8"><a href="análisis-de-datos-con-python.html#cb858-8" aria-hidden="true" tabindex="-1"></a>                              titanic_train[<span class="st">&quot;Age&quot;</span>]]).T</span>
<span id="cb858-9"><a href="análisis-de-datos-con-python.html#cb858-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-10"><a href="análisis-de-datos-con-python.html#cb858-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize logistic regression model</span></span>
<span id="cb858-11"><a href="análisis-de-datos-con-python.html#cb858-11" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> linear_model.LogisticRegression(solver <span class="op">=</span> <span class="st">&#39;lbfgs&#39;</span>)</span>
<span id="cb858-12"><a href="análisis-de-datos-con-python.html#cb858-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-13"><a href="análisis-de-datos-con-python.html#cb858-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb858-14"><a href="análisis-de-datos-con-python.html#cb858-14" aria-hidden="true" tabindex="-1"></a>log_model.fit(X <span class="op">=</span> train_features ,</span>
<span id="cb858-15"><a href="análisis-de-datos-con-python.html#cb858-15" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> titanic_train[<span class="st">&quot;Survived&quot;</span>])</span>
<span id="cb858-16"><a href="análisis-de-datos-con-python.html#cb858-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-17"><a href="análisis-de-datos-con-python.html#cb858-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model intercept</span></span>
<span id="cb858-18"><a href="análisis-de-datos-con-python.html#cb858-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.intercept_)</span>
<span id="cb858-19"><a href="análisis-de-datos-con-python.html#cb858-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb858-20"><a href="análisis-de-datos-con-python.html#cb858-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model coefficients</span></span>
<span id="cb858-21"><a href="análisis-de-datos-con-python.html#cb858-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.coef_)</span></code></pre></div>
<p>A continuación, vamos a hacer predicciones de clase utilizando este modelo y luego compararemos las predicciones con los valores reales:</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb859-1"><a href="análisis-de-datos-con-python.html#cb859-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions</span></span>
<span id="cb859-2"><a href="análisis-de-datos-con-python.html#cb859-2" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> log_model.predict(X<span class="op">=</span> train_features)</span>
<span id="cb859-3"><a href="análisis-de-datos-con-python.html#cb859-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb859-4"><a href="análisis-de-datos-con-python.html#cb859-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate table of predictions vs actual</span></span>
<span id="cb859-5"><a href="análisis-de-datos-con-python.html#cb859-5" aria-hidden="true" tabindex="-1"></a>pd.crosstab(preds,titanic_train[<span class="st">&quot;Survived&quot;</span>])</span></code></pre></div>
<p>La tabla anterior muestra las clases que nuestro modelo predijo frente a los valores reales de la variable Supervivencia. Esta tabla de valores predichos frente a los reales se conoce como matriz de confusión.</p>
</div>
</div>
<div id="matching" class="section level3 hasAnchor" number="4.7.6">
<h3><span class="header-section-number">4.7.6</span> Matching<a href="análisis-de-datos-con-python.html#matching" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To compare results, let’s first look at the treatment effect identified by a true experiment.</p>
<div class="sourceCode" id="cb860"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb860-1"><a href="análisis-de-datos-con-python.html#cb860-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb860-2"><a href="análisis-de-datos-con-python.html#cb860-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb860-3"><a href="análisis-de-datos-con-python.html#cb860-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb860-4"><a href="análisis-de-datos-con-python.html#cb860-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb860-5"><a href="análisis-de-datos-con-python.html#cb860-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb860-6"><a href="análisis-de-datos-con-python.html#cb860-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ssl</span>
<span id="cb860-7"><a href="análisis-de-datos-con-python.html#cb860-7" aria-hidden="true" tabindex="-1"></a>ssl._create_default_https_context <span class="op">=</span> ssl._create_unverified_context</span>
<span id="cb860-8"><a href="análisis-de-datos-con-python.html#cb860-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb860-9"><a href="análisis-de-datos-con-python.html#cb860-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_data(<span class="bu">file</span>):</span>
<span id="cb860-10"><a href="análisis-de-datos-con-python.html#cb860-10" aria-hidden="true" tabindex="-1"></a>    full_path <span class="op">=</span> <span class="st">&quot;https://raw.github.com/scunning1975/mixtape/master/&quot;</span> <span class="op">+</span> <span class="bu">file</span></span>
<span id="cb860-11"><a href="análisis-de-datos-con-python.html#cb860-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb860-12"><a href="análisis-de-datos-con-python.html#cb860-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.read_stata(full_path)</span></code></pre></div>
<ul>
<li>Before using the propensity score methods for estimating treatment effects, let’s calculate the average treatment effect from the actual experiment.</li>
</ul>
<div class="sourceCode" id="cb861"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb861-1"><a href="análisis-de-datos-con-python.html#cb861-1" aria-hidden="true" tabindex="-1"></a>nsw_dw <span class="op">=</span> read_data(<span class="st">&#39;nsw_mixtape.dta&#39;</span>)</span>
<span id="cb861-2"><a href="análisis-de-datos-con-python.html#cb861-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb861-3"><a href="análisis-de-datos-con-python.html#cb861-3" aria-hidden="true" tabindex="-1"></a>mean1 <span class="op">=</span> nsw_dw[nsw_dw.treat<span class="op">==</span><span class="dv">1</span>].re78.mean()</span>
<span id="cb861-4"><a href="análisis-de-datos-con-python.html#cb861-4" aria-hidden="true" tabindex="-1"></a>mean0 <span class="op">=</span> nsw_dw[nsw_dw.treat<span class="op">==</span><span class="dv">0</span>].re78.mean()</span>
<span id="cb861-5"><a href="análisis-de-datos-con-python.html#cb861-5" aria-hidden="true" tabindex="-1"></a>ate <span class="op">=</span> np.unique(mean1 <span class="op">-</span> mean0)[<span class="dv">0</span>]</span>
<span id="cb861-6"><a href="análisis-de-datos-con-python.html#cb861-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;The experimental ATE estimate is </span><span class="sc">{:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(ate))</span></code></pre></div>
<p>Using the code above, we calculate that the NSW job-training program caused real earnings in 1978 to increase by $1,794.343.</p>
<p>A continuación vamos a ver varios ejemplos en los que estimamos el efecto medio del tratamiento o algunas de sus variantes, como el efecto medio del tratamiento en el grupo tratado o el efecto medio del tratamiento en el grupo no tratado. Pero aquí, en lugar de utilizar el grupo de control experimental del experimento aleatorio original, utilizaremos el grupo de control no experimental de la Current Population Survey. Es muy importante subrayar que, mientras que el grupo de tratamiento es un grupo experimental, el grupo de control consiste ahora en una muestra aleatoria de estadounidenses de ese periodo de tiempo. Por lo tanto, el grupo de control sufre un sesgo de selección extremo, ya que la mayoría de los estadounidenses no funcionarían como contrafactuales para el grupo de trabajadores en apuros que se seleccionó en el programa NSW. A continuación, añadiremos los datos de la CPS a los datos experimentales y estimaremos la puntuación de propensión utilizando logit para ser coherentes con Dehejia y Wahba (2002).</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb862-1"><a href="análisis-de-datos-con-python.html#cb862-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for logit </span></span>
<span id="cb862-2"><a href="análisis-de-datos-con-python.html#cb862-2" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol <span class="op">=</span> read_data(<span class="st">&#39;cps_mixtape.dta&#39;</span>)</span>
<span id="cb862-3"><a href="análisis-de-datos-con-python.html#cb862-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-4"><a href="análisis-de-datos-con-python.html#cb862-4" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol <span class="op">=</span> pd.concat((nsw_dw_cpscontrol, nsw_dw))</span>
<span id="cb862-5"><a href="análisis-de-datos-con-python.html#cb862-5" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[[<span class="st">&#39;u74&#39;</span>, <span class="st">&#39;u75&#39;</span>]] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb862-6"><a href="análisis-de-datos-con-python.html#cb862-6" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol.loc[nsw_dw_cpscontrol.re74<span class="op">==</span><span class="dv">0</span>, <span class="st">&#39;u74&#39;</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb862-7"><a href="análisis-de-datos-con-python.html#cb862-7" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol.loc[nsw_dw_cpscontrol.re75<span class="op">==</span><span class="dv">0</span>, <span class="st">&#39;u75&#39;</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb862-8"><a href="análisis-de-datos-con-python.html#cb862-8" aria-hidden="true" tabindex="-1"></a><span class="co"># estimating propensity score</span></span>
<span id="cb862-9"><a href="análisis-de-datos-con-python.html#cb862-9" aria-hidden="true" tabindex="-1"></a>logit_nsw <span class="op">=</span> smf.glm(formula<span class="op">=</span><span class="st">&quot;&quot;&quot;treat ~ age + age**2 + age**3 + educ + educ**2 + </span></span>
<span id="cb862-10"><a href="análisis-de-datos-con-python.html#cb862-10" aria-hidden="true" tabindex="-1"></a><span class="st">                    marr + nodegree + black + hisp + re74 + re75 + u74 + u75 + educ*re74&quot;&quot;&quot;</span>, </span>
<span id="cb862-11"><a href="análisis-de-datos-con-python.html#cb862-11" aria-hidden="true" tabindex="-1"></a>                    family<span class="op">=</span>sm.families.Binomial(),</span>
<span id="cb862-12"><a href="análisis-de-datos-con-python.html#cb862-12" aria-hidden="true" tabindex="-1"></a>                   data<span class="op">=</span>nsw_dw_cpscontrol).fit()</span>
<span id="cb862-13"><a href="análisis-de-datos-con-python.html#cb862-13" aria-hidden="true" tabindex="-1"></a>                  </span>
<span id="cb862-14"><a href="análisis-de-datos-con-python.html#cb862-14" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;pscore&#39;</span>] <span class="op">=</span> logit_nsw.predict(nsw_dw_cpscontrol)</span>
<span id="cb862-15"><a href="análisis-de-datos-con-python.html#cb862-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-16"><a href="análisis-de-datos-con-python.html#cb862-16" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol</span>
<span id="cb862-17"><a href="análisis-de-datos-con-python.html#cb862-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-18"><a href="análisis-de-datos-con-python.html#cb862-18" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol.groupby(<span class="st">&#39;treat&#39;</span>)[<span class="st">&#39;pscore&#39;</span>].mean()</span>
<span id="cb862-19"><a href="análisis-de-datos-con-python.html#cb862-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-20"><a href="análisis-de-datos-con-python.html#cb862-20" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&quot;pscore&quot;</span>][nsw_dw_cpscontrol[<span class="st">&quot;treat&quot;</span>] <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb862-21"><a href="análisis-de-datos-con-python.html#cb862-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-22"><a href="análisis-de-datos-con-python.html#cb862-22" aria-hidden="true" tabindex="-1"></a><span class="co"># histogram</span></span>
<span id="cb862-23"><a href="análisis-de-datos-con-python.html#cb862-23" aria-hidden="true" tabindex="-1"></a>plt.hist(nsw_dw_cpscontrol[<span class="st">&quot;pscore&quot;</span>][nsw_dw_cpscontrol[<span class="st">&quot;treat&quot;</span>] <span class="op">==</span> <span class="dv">1</span>])</span>
<span id="cb862-24"><a href="análisis-de-datos-con-python.html#cb862-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb862-25"><a href="análisis-de-datos-con-python.html#cb862-25" aria-hidden="true" tabindex="-1"></a>plt.hist(nsw_dw_cpscontrol[<span class="st">&quot;pscore&quot;</span>][nsw_dw_cpscontrol[<span class="st">&quot;treat&quot;</span>] <span class="op">==</span> <span class="dv">0</span>])</span></code></pre></div>
<p>Recordemos lo que hace la ponderación probabilística inversa. Está ponderando las unidades de tratamiento y control según
la puntuación p, lo que hace que las unidades con valores muy pequeños de la puntuación de propensión se disparen y se vuelvan inusualmente influyentes en el cálculo del TCA.</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb863-1"><a href="análisis-de-datos-con-python.html#cb863-1" aria-hidden="true" tabindex="-1"></a><span class="co"># continuation</span></span>
<span id="cb863-2"><a href="análisis-de-datos-con-python.html#cb863-2" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> nsw_dw_cpscontrol.shape[<span class="dv">0</span>]</span>
<span id="cb863-3"><a href="análisis-de-datos-con-python.html#cb863-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-4"><a href="análisis-de-datos-con-python.html#cb863-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual with non-normalized weights using all data</span></span>
<span id="cb863-5"><a href="análisis-de-datos-con-python.html#cb863-5" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol <span class="op">=</span> nsw_dw_cpscontrol </span>
<span id="cb863-6"><a href="análisis-de-datos-con-python.html#cb863-6" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;d1&#39;</span>] <span class="op">=</span> nsw_dw_cpscontrol.treat<span class="op">/</span>nsw_dw_cpscontrol.pscore</span>
<span id="cb863-7"><a href="análisis-de-datos-con-python.html#cb863-7" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;d0&#39;</span>] <span class="op">=</span> (<span class="dv">1</span><span class="op">-</span>nsw_dw_cpscontrol.treat)<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>nsw_dw_cpscontrol.pscore)</span>
<span id="cb863-8"><a href="análisis-de-datos-con-python.html#cb863-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-9"><a href="análisis-de-datos-con-python.html#cb863-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-10"><a href="análisis-de-datos-con-python.html#cb863-10" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> nsw_dw_cpscontrol.d1.<span class="bu">sum</span>()</span>
<span id="cb863-11"><a href="análisis-de-datos-con-python.html#cb863-11" aria-hidden="true" tabindex="-1"></a>s0 <span class="op">=</span> nsw_dw_cpscontrol.d0.<span class="bu">sum</span>()</span>
<span id="cb863-12"><a href="análisis-de-datos-con-python.html#cb863-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-13"><a href="análisis-de-datos-con-python.html#cb863-13" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;y1&#39;</span>] <span class="op">=</span> nsw_dw_cpscontrol.treat <span class="op">*</span> nsw_dw_cpscontrol.re78 <span class="op">/</span> nsw_dw_cpscontrol.pscore</span>
<span id="cb863-14"><a href="análisis-de-datos-con-python.html#cb863-14" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;y0&#39;</span>] <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_cpscontrol.treat) <span class="op">*</span> nsw_dw_cpscontrol.re78 <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_cpscontrol.pscore)</span>
<span id="cb863-15"><a href="análisis-de-datos-con-python.html#cb863-15" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;ht&#39;</span>] <span class="op">=</span> nsw_dw_cpscontrol[<span class="st">&#39;y1&#39;</span>] <span class="op">-</span> nsw_dw_cpscontrol[<span class="st">&#39;y0&#39;</span>]</span>
<span id="cb863-16"><a href="análisis-de-datos-con-python.html#cb863-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-17"><a href="análisis-de-datos-con-python.html#cb863-17" aria-hidden="true" tabindex="-1"></a>te_1 <span class="op">=</span> nsw_dw_cpscontrol.ht.mean()</span>
<span id="cb863-18"><a href="análisis-de-datos-con-python.html#cb863-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-19"><a href="análisis-de-datos-con-python.html#cb863-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Treatment Effect (non-normalized, all data): </span><span class="sc">{:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(te_1))</span>
<span id="cb863-20"><a href="análisis-de-datos-con-python.html#cb863-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-21"><a href="análisis-de-datos-con-python.html#cb863-21" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;y1&#39;</span>] <span class="op">=</span> nsw_dw_cpscontrol.treat <span class="op">*</span> nsw_dw_cpscontrol.re78 <span class="op">/</span> nsw_dw_cpscontrol.pscore</span>
<span id="cb863-22"><a href="análisis-de-datos-con-python.html#cb863-22" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;y1&#39;</span>] <span class="op">/=</span> s1<span class="op">/</span>N</span>
<span id="cb863-23"><a href="análisis-de-datos-con-python.html#cb863-23" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;y0&#39;</span>] <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_cpscontrol.treat) <span class="op">*</span> nsw_dw_cpscontrol.re78 <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_cpscontrol.pscore)</span>
<span id="cb863-24"><a href="análisis-de-datos-con-python.html#cb863-24" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;y0&#39;</span>] <span class="op">/=</span> s0<span class="op">/</span>N</span>
<span id="cb863-25"><a href="análisis-de-datos-con-python.html#cb863-25" aria-hidden="true" tabindex="-1"></a>nsw_dw_cpscontrol[<span class="st">&#39;ht&#39;</span>] <span class="op">=</span> nsw_dw_cpscontrol[<span class="st">&#39;y1&#39;</span>] <span class="op">-</span> nsw_dw_cpscontrol[<span class="st">&#39;y0&#39;</span>]</span>
<span id="cb863-26"><a href="análisis-de-datos-con-python.html#cb863-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-27"><a href="análisis-de-datos-con-python.html#cb863-27" aria-hidden="true" tabindex="-1"></a>te_2 <span class="op">=</span> nsw_dw_cpscontrol.ht.mean()</span>
<span id="cb863-28"><a href="análisis-de-datos-con-python.html#cb863-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-29"><a href="análisis-de-datos-con-python.html#cb863-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Treatment Effect (normalized, all data): </span><span class="sc">{:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(te_2))</span>
<span id="cb863-30"><a href="análisis-de-datos-con-python.html#cb863-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-31"><a href="análisis-de-datos-con-python.html#cb863-31" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed <span class="op">=</span> nsw_dw_cpscontrol.drop([<span class="st">&#39;d1&#39;</span>, <span class="st">&#39;d0&#39;</span>, <span class="st">&#39;y1&#39;</span>, <span class="st">&#39;y0&#39;</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb863-32"><a href="análisis-de-datos-con-python.html#cb863-32" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed <span class="op">=</span> nsw_dw_trimmed[nsw_dw_trimmed.pscore.between(<span class="fl">.1</span>, <span class="fl">.9</span>)]</span>
<span id="cb863-33"><a href="análisis-de-datos-con-python.html#cb863-33" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> nsw_dw_trimmed.shape[<span class="dv">0</span>]</span>
<span id="cb863-34"><a href="análisis-de-datos-con-python.html#cb863-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-35"><a href="análisis-de-datos-con-python.html#cb863-35" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;y1&#39;</span>] <span class="op">=</span> nsw_dw_trimmed.treat <span class="op">*</span> nsw_dw_trimmed.re78 <span class="op">/</span> nsw_dw_trimmed.pscore</span>
<span id="cb863-36"><a href="análisis-de-datos-con-python.html#cb863-36" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;y0&#39;</span>] <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_trimmed.treat) <span class="op">*</span> nsw_dw_trimmed.re78 <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_trimmed.pscore)</span>
<span id="cb863-37"><a href="análisis-de-datos-con-python.html#cb863-37" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;ht&#39;</span>] <span class="op">=</span> nsw_dw_trimmed[<span class="st">&#39;y1&#39;</span>] <span class="op">-</span> nsw_dw_trimmed[<span class="st">&#39;y0&#39;</span>]</span>
<span id="cb863-38"><a href="análisis-de-datos-con-python.html#cb863-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-39"><a href="análisis-de-datos-con-python.html#cb863-39" aria-hidden="true" tabindex="-1"></a>te_3 <span class="op">=</span> nsw_dw_trimmed.ht.mean()</span>
<span id="cb863-40"><a href="análisis-de-datos-con-python.html#cb863-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-41"><a href="análisis-de-datos-con-python.html#cb863-41" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Treatment Effect (non-normalized, trimmed data): </span><span class="sc">{:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(te_3))</span>
<span id="cb863-42"><a href="análisis-de-datos-con-python.html#cb863-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-43"><a href="análisis-de-datos-con-python.html#cb863-43" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;y1&#39;</span>] <span class="op">=</span> nsw_dw_trimmed.treat <span class="op">*</span> nsw_dw_trimmed.re78 <span class="op">/</span> nsw_dw_trimmed.pscore</span>
<span id="cb863-44"><a href="análisis-de-datos-con-python.html#cb863-44" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;y1&#39;</span>] <span class="op">/=</span> s1<span class="op">/</span>N</span>
<span id="cb863-45"><a href="análisis-de-datos-con-python.html#cb863-45" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;y0&#39;</span>] <span class="op">=</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_trimmed.treat) <span class="op">*</span> nsw_dw_trimmed.re78 <span class="op">/</span> (<span class="dv">1</span> <span class="op">-</span> nsw_dw_trimmed.pscore)</span>
<span id="cb863-46"><a href="análisis-de-datos-con-python.html#cb863-46" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;y0&#39;</span>] <span class="op">/=</span> s0<span class="op">/</span>N</span>
<span id="cb863-47"><a href="análisis-de-datos-con-python.html#cb863-47" aria-hidden="true" tabindex="-1"></a>nsw_dw_trimmed[<span class="st">&#39;ht&#39;</span>] <span class="op">=</span> nsw_dw_trimmed[<span class="st">&#39;y1&#39;</span>] <span class="op">-</span> nsw_dw_trimmed[<span class="st">&#39;y0&#39;</span>]</span>
<span id="cb863-48"><a href="análisis-de-datos-con-python.html#cb863-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-49"><a href="análisis-de-datos-con-python.html#cb863-49" aria-hidden="true" tabindex="-1"></a>te_4 <span class="op">=</span> nsw_dw_trimmed.ht.mean()</span>
<span id="cb863-50"><a href="análisis-de-datos-con-python.html#cb863-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb863-51"><a href="análisis-de-datos-con-python.html#cb863-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Treatment Effect (normalized, trimmed data): </span><span class="sc">{:.2f}</span><span class="st">&quot;</span>.<span class="bu">format</span>(te_4))</span></code></pre></div>
</div>
</div>
<div id="análisis-de-datos-parte-iii" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Análisis de Datos (Parte III)<a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-iii" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="bootstraping-en-el-contexto-de-mco" class="section level3 hasAnchor" number="4.8.1">
<h3><span class="header-section-number">4.8.1</span> Bootstraping en el contexto de MCO<a href="análisis-de-datos-con-python.html#bootstraping-en-el-contexto-de-mco" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb864"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb864-1"><a href="análisis-de-datos-con-python.html#cb864-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb864-2"><a href="análisis-de-datos-con-python.html#cb864-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb864-3"><a href="análisis-de-datos-con-python.html#cb864-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb864-4"><a href="análisis-de-datos-con-python.html#cb864-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> sm</span>
<span id="cb864-5"><a href="análisis-de-datos-con-python.html#cb864-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb864-6"><a href="análisis-de-datos-con-python.html#cb864-6" aria-hidden="true" tabindex="-1"></a><span class="co"># synthetic sample data</span></span>
<span id="cb864-7"><a href="análisis-de-datos-con-python.html#cb864-7" aria-hidden="true" tabindex="-1"></a>n_points <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb864-8"><a href="análisis-de-datos-con-python.html#cb864-8" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, n_points)</span>
<span id="cb864-9"><a href="análisis-de-datos-con-python.html#cb864-9" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> x <span class="op">+</span> (np.random.rand(<span class="bu">len</span>(x)) <span class="op">*</span> <span class="dv">5</span>)</span>
<span id="cb864-10"><a href="análisis-de-datos-con-python.html#cb864-10" aria-hidden="true" tabindex="-1"></a>data_df <span class="op">=</span> pd.DataFrame({<span class="st">&quot;x&quot;</span>: x, <span class="st">&quot;y&quot;</span>: y})</span>
<span id="cb864-11"><a href="análisis-de-datos-con-python.html#cb864-11" aria-hidden="true" tabindex="-1"></a>ols_model <span class="op">=</span> sm.ols(formula <span class="op">=</span> <span class="st">&quot;y ~ x&quot;</span>, data<span class="op">=</span>data_df)</span>
<span id="cb864-12"><a href="análisis-de-datos-con-python.html#cb864-12" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> ols_model.fit()</span>
<span id="cb864-13"><a href="análisis-de-datos-con-python.html#cb864-13" aria-hidden="true" tabindex="-1"></a><span class="co"># coefficients</span></span>
<span id="cb864-14"><a href="análisis-de-datos-con-python.html#cb864-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;Intercept, x-Slope : </span><span class="sc">{}</span><span class="st">&quot;</span>.<span class="bu">format</span>(results.params))</span>
<span id="cb864-15"><a href="análisis-de-datos-con-python.html#cb864-15" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> ols_model.fit().predict(data_df[<span class="st">&quot;x&quot;</span>])</span>
<span id="cb864-16"><a href="análisis-de-datos-con-python.html#cb864-16" aria-hidden="true" tabindex="-1"></a><span class="co"># plot results</span></span>
<span id="cb864-17"><a href="análisis-de-datos-con-python.html#cb864-17" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y)</span>
<span id="cb864-18"><a href="análisis-de-datos-con-python.html#cb864-18" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y_pred, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb864-19"><a href="análisis-de-datos-con-python.html#cb864-19" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb864-20"><a href="análisis-de-datos-con-python.html#cb864-20" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;x&quot;</span>)</span>
<span id="cb864-21"><a href="análisis-de-datos-con-python.html#cb864-21" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;y&quot;</span>)</span>
<span id="cb864-22"><a href="análisis-de-datos-con-python.html#cb864-22" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;x vs y&quot;</span>)</span>
<span id="cb864-23"><a href="análisis-de-datos-con-python.html#cb864-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb864-24"><a href="análisis-de-datos-con-python.html#cb864-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb864-25"><a href="análisis-de-datos-con-python.html#cb864-25" aria-hidden="true" tabindex="-1"></a><span class="co"># resample with replacement each row</span></span>
<span id="cb864-26"><a href="análisis-de-datos-con-python.html#cb864-26" aria-hidden="true" tabindex="-1"></a>boot_slopes <span class="op">=</span> []</span>
<span id="cb864-27"><a href="análisis-de-datos-con-python.html#cb864-27" aria-hidden="true" tabindex="-1"></a>boot_interc <span class="op">=</span> []</span>
<span id="cb864-28"><a href="análisis-de-datos-con-python.html#cb864-28" aria-hidden="true" tabindex="-1"></a>n_boots <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb864-29"><a href="análisis-de-datos-con-python.html#cb864-29" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb864-30"><a href="análisis-de-datos-con-python.html#cb864-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb864-31"><a href="análisis-de-datos-con-python.html#cb864-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(n_boots):</span>
<span id="cb864-32"><a href="análisis-de-datos-con-python.html#cb864-32" aria-hidden="true" tabindex="-1"></a> <span class="co"># sample the rows, same size, with replacement</span></span>
<span id="cb864-33"><a href="análisis-de-datos-con-python.html#cb864-33" aria-hidden="true" tabindex="-1"></a> sample_df <span class="op">=</span> data_df.sample(n<span class="op">=</span>n_points, replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb864-34"><a href="análisis-de-datos-con-python.html#cb864-34" aria-hidden="true" tabindex="-1"></a> <span class="co"># fit a linear regression</span></span>
<span id="cb864-35"><a href="análisis-de-datos-con-python.html#cb864-35" aria-hidden="true" tabindex="-1"></a> ols_model_temp <span class="op">=</span> sm.ols(formula <span class="op">=</span> <span class="st">&quot;y ~ x&quot;</span>, data<span class="op">=</span>sample_df)</span>
<span id="cb864-36"><a href="análisis-de-datos-con-python.html#cb864-36" aria-hidden="true" tabindex="-1"></a> results_temp <span class="op">=</span> ols_model_temp.fit()</span>
<span id="cb864-37"><a href="análisis-de-datos-con-python.html#cb864-37" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb864-38"><a href="análisis-de-datos-con-python.html#cb864-38" aria-hidden="true" tabindex="-1"></a> <span class="co"># append coefficients</span></span>
<span id="cb864-39"><a href="análisis-de-datos-con-python.html#cb864-39" aria-hidden="true" tabindex="-1"></a> boot_interc.append(results_temp.params[<span class="dv">0</span>])</span>
<span id="cb864-40"><a href="análisis-de-datos-con-python.html#cb864-40" aria-hidden="true" tabindex="-1"></a> boot_slopes.append(results_temp.params[<span class="dv">1</span>])</span>
<span id="cb864-41"><a href="análisis-de-datos-con-python.html#cb864-41" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb864-42"><a href="análisis-de-datos-con-python.html#cb864-42" aria-hidden="true" tabindex="-1"></a> <span class="co"># plot a greyed out line</span></span>
<span id="cb864-43"><a href="análisis-de-datos-con-python.html#cb864-43" aria-hidden="true" tabindex="-1"></a> y_pred_temp <span class="op">=</span> ols_model_temp.fit().predict(sample_df[<span class="st">&quot;x&quot;</span>])</span>
<span id="cb864-44"><a href="análisis-de-datos-con-python.html#cb864-44" aria-hidden="true" tabindex="-1"></a> plt.plot(sample_df[<span class="st">&quot;x&quot;</span>], y_pred_temp, color<span class="op">=</span><span class="st">&quot;grey&quot;</span>, alpha<span class="op">=</span><span class="fl">0.2</span>)</span>
<span id="cb864-45"><a href="análisis-de-datos-con-python.html#cb864-45" aria-hidden="true" tabindex="-1"></a><span class="co"># add data points</span></span>
<span id="cb864-46"><a href="análisis-de-datos-con-python.html#cb864-46" aria-hidden="true" tabindex="-1"></a>plt.scatter(x, y)</span>
<span id="cb864-47"><a href="análisis-de-datos-con-python.html#cb864-47" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y_pred, linewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb864-48"><a href="análisis-de-datos-con-python.html#cb864-48" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb864-49"><a href="análisis-de-datos-con-python.html#cb864-49" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&quot;x&quot;</span>)</span>
<span id="cb864-50"><a href="análisis-de-datos-con-python.html#cb864-50" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&quot;y&quot;</span>)</span>
<span id="cb864-51"><a href="análisis-de-datos-con-python.html#cb864-51" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&quot;x vs y&quot;</span>)</span>
<span id="cb864-52"><a href="análisis-de-datos-con-python.html#cb864-52" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb864-53"><a href="análisis-de-datos-con-python.html#cb864-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb864-54"><a href="análisis-de-datos-con-python.html#cb864-54" aria-hidden="true" tabindex="-1"></a>sns.distplot(boot_slopes)</span>
<span id="cb864-55"><a href="análisis-de-datos-con-python.html#cb864-55" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb864-56"><a href="análisis-de-datos-con-python.html#cb864-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb864-57"><a href="análisis-de-datos-con-python.html#cb864-57" aria-hidden="true" tabindex="-1"></a>sns.distplot(boot_interc)</span>
<span id="cb864-58"><a href="análisis-de-datos-con-python.html#cb864-58" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<ul>
<li><p>Los datos anteriores pintan una bonita imagen del bootstrapping paramétrico.</p></li>
<li><p>Sin embargo, si por casualidad, y esto es lo más probable, tuviéramos datos dispersos, podría existir la posibilidad de que nuestra selección aleatoria de puntos se encontrara totalmente en una zona y no en otra - recordemos la mención de que el valor atípico puede ser muestreado varias veces a pesar de ser un único punto atípico.</p></li>
<li><p>Para luchar contra esto, podemos aplicar un tipo diferente de bootstrapping, llamado “bootstrapping no paramétrico”, por el que aplicamos el bootstrapping en los residuos, y no en el propio parámetro.</p></li>
<li><p>En resumen…</p></li>
<li><p>Bootstrap y la simulación de Montecarlo de una estadística: ambos se basan en la repetición del muestreo y en el examen directo de los resultados.</p></li>
<li><p>Sin embargo, una gran diferencia entre los métodos es que el bootstrap utiliza la muestra inicial original como población de la que se vuelve a tomar la muestra, mientras que la simulación de Montecarlo se basa en establecer un proceso de generación de datos (con valores conocidos de los parámetros).</p></li>
<li><p>Mientras que Monte Carlo se utiliza para probar los estimadores de la unidad, los métodos de bootstrap pueden utilizarse para estimar la variabilidad de un estadístico y la forma de su distribución muestral.</p></li>
</ul>
<div class="sourceCode" id="cb865"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb865-1"><a href="análisis-de-datos-con-python.html#cb865-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb865-2"><a href="análisis-de-datos-con-python.html#cb865-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb865-3"><a href="análisis-de-datos-con-python.html#cb865-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb865-4"><a href="análisis-de-datos-con-python.html#cb865-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb865-5"><a href="análisis-de-datos-con-python.html#cb865-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> stats</span></code></pre></div>
<ul>
<li><p>La función sigmoide está limitada por debajo por 0 y por encima por 1.</p></li>
<li><p>En la regresión logística, el resultado se interpreta como una probabilidad: la probabilidad de que una observación pertenezca a la segunda de las dos categorías modeladas. Cuando la combinación lineal de variables produce números positivos, la probabilidad resultante es mayor que 0,5 y cuando produce números negativos, la probabilidad es menor que 0,5.</p></li>
</ul>
<p>No profundizaremos en los detalles de cómo funciona la regresión logística, sino que nos centraremos en cómo utilizarla en Python. Lo más importante es saber que la reg&lt;resión logística produce probabilidades que podemos utilizar para clasificar las observaciones.</p>
</div>
<div id="logit-probabilidad-de-sobrevivir-al-hundimiento-del-titanic" class="section level3 hasAnchor" number="4.8.2">
<h3><span class="header-section-number">4.8.2</span> Logit: Probabilidad de sobrevivir al hundimiento del Titanic<a href="análisis-de-datos-con-python.html#logit-probabilidad-de-sobrevivir-al-hundimiento-del-titanic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb866"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb866-1"><a href="análisis-de-datos-con-python.html#cb866-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb866-2"><a href="análisis-de-datos-con-python.html#cb866-2" aria-hidden="true" tabindex="-1"></a>os.chdir(<span class="st">&quot;datos&quot;</span>)</span>
<span id="cb866-3"><a href="análisis-de-datos-con-python.html#cb866-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-4"><a href="análisis-de-datos-con-python.html#cb866-4" aria-hidden="true" tabindex="-1"></a>titanic_train <span class="op">=</span> pd.read_csv(<span class="st">&quot;train.csv&quot;</span>)    <span class="co"># Read the data</span></span>
<span id="cb866-5"><a href="análisis-de-datos-con-python.html#cb866-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-6"><a href="análisis-de-datos-con-python.html#cb866-6" aria-hidden="true" tabindex="-1"></a>char_cabin <span class="op">=</span> titanic_train[<span class="st">&quot;Cabin&quot;</span>].astype(<span class="bu">str</span>)     <span class="co"># Convert cabin to str</span></span>
<span id="cb866-7"><a href="análisis-de-datos-con-python.html#cb866-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-8"><a href="análisis-de-datos-con-python.html#cb866-8" aria-hidden="true" tabindex="-1"></a>new_Cabin <span class="op">=</span> np.array([cabin[<span class="dv">0</span>] <span class="cf">for</span> cabin <span class="kw">in</span> char_cabin]) <span class="co"># Take first letter</span></span>
<span id="cb866-9"><a href="análisis-de-datos-con-python.html#cb866-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-10"><a href="análisis-de-datos-con-python.html#cb866-10" aria-hidden="true" tabindex="-1"></a>titanic_train[<span class="st">&quot;Cabin&quot;</span>] <span class="op">=</span> pd.Categorical(new_Cabin)  <span class="co"># Save the new cabin var</span></span>
<span id="cb866-11"><a href="análisis-de-datos-con-python.html#cb866-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-12"><a href="análisis-de-datos-con-python.html#cb866-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Impute median Age for NA Age values</span></span>
<span id="cb866-13"><a href="análisis-de-datos-con-python.html#cb866-13" aria-hidden="true" tabindex="-1"></a>new_age_var <span class="op">=</span> np.where(titanic_train[<span class="st">&quot;Age&quot;</span>].isnull(), <span class="co"># Logical check</span></span>
<span id="cb866-14"><a href="análisis-de-datos-con-python.html#cb866-14" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">28</span>,                       <span class="co"># Value if check is true</span></span>
<span id="cb866-15"><a href="análisis-de-datos-con-python.html#cb866-15" aria-hidden="true" tabindex="-1"></a>                       titanic_train[<span class="st">&quot;Age&quot;</span>])     <span class="co"># Value if check is false</span></span>
<span id="cb866-16"><a href="análisis-de-datos-con-python.html#cb866-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-17"><a href="análisis-de-datos-con-python.html#cb866-17" aria-hidden="true" tabindex="-1"></a>titanic_train[<span class="st">&quot;Age&quot;</span>] <span class="op">=</span> new_age_var </span>
<span id="cb866-18"><a href="análisis-de-datos-con-python.html#cb866-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-19"><a href="análisis-de-datos-con-python.html#cb866-19" aria-hidden="true" tabindex="-1"></a>new_fare_var <span class="op">=</span> np.where(titanic_train[<span class="st">&quot;Fare&quot;</span>].isnull(), <span class="co"># Logical check</span></span>
<span id="cb866-20"><a href="análisis-de-datos-con-python.html#cb866-20" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">50</span>,                         <span class="co"># Value if check is true</span></span>
<span id="cb866-21"><a href="análisis-de-datos-con-python.html#cb866-21" aria-hidden="true" tabindex="-1"></a>                       titanic_train[<span class="st">&quot;Fare&quot;</span>])     <span class="co"># Value if check is false</span></span>
<span id="cb866-22"><a href="análisis-de-datos-con-python.html#cb866-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-23"><a href="análisis-de-datos-con-python.html#cb866-23" aria-hidden="true" tabindex="-1"></a>titanic_train[<span class="st">&quot;Fare&quot;</span>] <span class="op">=</span> new_fare_var</span>
<span id="cb866-24"><a href="análisis-de-datos-con-python.html#cb866-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb866-25"><a href="análisis-de-datos-con-python.html#cb866-25" aria-hidden="true" tabindex="-1"></a>titanic_train</span></code></pre></div>
<ul>
<li><p>Ahora estamos listos para utilizar un modelo de regresión logística para predecir la supervivencia.</p></li>
<li><p>La biblioteca scikit-learn tiene una función de regresión logística en la subcarpeta linear model.</p></li>
<li><p>Hagamos un modelo de regresión logística que sólo utilice la variable Sexo como predictor.</p></li>
<li><p>Antes de crear un modelo con la variable sexo, necesitamos convertirla a un número real porque las funciones de aprendizaje automático de sklearn sólo tratan con números reales.</p></li>
<li><p>Podemos convertir una variable categórica como en un número utilizando la función de preprocesamiento de sklearn LabelEncoder():</p></li>
</ul>
<div class="sourceCode" id="cb867"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb867-1"><a href="análisis-de-datos-con-python.html#cb867-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> linear_model</span>
<span id="cb867-2"><a href="análisis-de-datos-con-python.html#cb867-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> preprocessing</span>
<span id="cb867-3"><a href="análisis-de-datos-con-python.html#cb867-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb867-4"><a href="análisis-de-datos-con-python.html#cb867-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize label encoder</span></span>
<span id="cb867-5"><a href="análisis-de-datos-con-python.html#cb867-5" aria-hidden="true" tabindex="-1"></a>label_encoder <span class="op">=</span> preprocessing.LabelEncoder()</span>
<span id="cb867-6"><a href="análisis-de-datos-con-python.html#cb867-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb867-7"><a href="análisis-de-datos-con-python.html#cb867-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Sex variable to numeric</span></span>
<span id="cb867-8"><a href="análisis-de-datos-con-python.html#cb867-8" aria-hidden="true" tabindex="-1"></a>encoded_sex <span class="op">=</span> label_encoder.fit_transform(titanic_train[<span class="st">&quot;Sex&quot;</span>])</span>
<span id="cb867-9"><a href="análisis-de-datos-con-python.html#cb867-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb867-10"><a href="análisis-de-datos-con-python.html#cb867-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize logistic regression model</span></span>
<span id="cb867-11"><a href="análisis-de-datos-con-python.html#cb867-11" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> linear_model.LogisticRegression(solver <span class="op">=</span> <span class="st">&#39;lbfgs&#39;</span>)</span>
<span id="cb867-12"><a href="análisis-de-datos-con-python.html#cb867-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb867-13"><a href="análisis-de-datos-con-python.html#cb867-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb867-14"><a href="análisis-de-datos-con-python.html#cb867-14" aria-hidden="true" tabindex="-1"></a>log_model.fit(X <span class="op">=</span> pd.DataFrame(encoded_sex), </span>
<span id="cb867-15"><a href="análisis-de-datos-con-python.html#cb867-15" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> titanic_train[<span class="st">&quot;Survived&quot;</span>])</span>
<span id="cb867-16"><a href="análisis-de-datos-con-python.html#cb867-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb867-17"><a href="análisis-de-datos-con-python.html#cb867-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model intercept</span></span>
<span id="cb867-18"><a href="análisis-de-datos-con-python.html#cb867-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.intercept_)</span>
<span id="cb867-19"><a href="análisis-de-datos-con-python.html#cb867-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb867-20"><a href="análisis-de-datos-con-python.html#cb867-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model coefficients</span></span>
<span id="cb867-21"><a href="análisis-de-datos-con-python.html#cb867-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.coef_)</span></code></pre></div>
<p>Los coeficientes del modelo de regresión logística son similares a los resultados de la regresión lineal. Podemos ver que el modelo produjo un valor de intercepción positivo y un peso de -2,421 en el género. Utilicemos el modelo para hacer predicciones en el conjunto de pruebas:</p>
<div class="sourceCode" id="cb868"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb868-1"><a href="análisis-de-datos-con-python.html#cb868-1" aria-hidden="true" tabindex="-1"></a>encoded_sex</span>
<span id="cb868-2"><a href="análisis-de-datos-con-python.html#cb868-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb868-3"><a href="análisis-de-datos-con-python.html#cb868-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions</span></span>
<span id="cb868-4"><a href="análisis-de-datos-con-python.html#cb868-4" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> log_model.predict_proba(X<span class="op">=</span> pd.DataFrame(encoded_sex))</span>
<span id="cb868-5"><a href="análisis-de-datos-con-python.html#cb868-5" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> pd.DataFrame(preds)</span>
<span id="cb868-6"><a href="análisis-de-datos-con-python.html#cb868-6" aria-hidden="true" tabindex="-1"></a>preds.columns <span class="op">=</span> [<span class="st">&quot;Death_prob&quot;</span>, <span class="st">&quot;Survival_prob&quot;</span>]</span>
<span id="cb868-7"><a href="análisis-de-datos-con-python.html#cb868-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb868-8"><a href="análisis-de-datos-con-python.html#cb868-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate table of predictions vs Sex</span></span>
<span id="cb868-9"><a href="análisis-de-datos-con-python.html#cb868-9" aria-hidden="true" tabindex="-1"></a>pd.crosstab(titanic_train[<span class="st">&quot;Sex&quot;</span>], preds.loc[:, <span class="st">&quot;Survival_prob&quot;</span>])</span>
<span id="cb868-10"><a href="análisis-de-datos-con-python.html#cb868-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb868-11"><a href="análisis-de-datos-con-python.html#cb868-11" aria-hidden="true" tabindex="-1"></a>preds</span></code></pre></div>
<p><em>Nota: Utilice model.predict_proba() para obtener las probabilidades de clase predichas. Utilice model.predict() para obtener las clases predichas.</em></p>
<p>La tabla muestra que el modelo predijo una probabilidad de supervivencia de aproximadamente el 19% para los hombres y el 73% para las mujeres. Si utilizamos este modelo simple para predecir la supervivencia, acabaríamos prediciendo que todas las mujeres sobrevivieron y que todos los hombres murieron. Hagamos un modelo más complicado que incluya algunas variables más del conjunto de entrenamiento del titán:</p>
<div class="sourceCode" id="cb869"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb869-1"><a href="análisis-de-datos-con-python.html#cb869-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert more variables to numeric</span></span>
<span id="cb869-2"><a href="análisis-de-datos-con-python.html#cb869-2" aria-hidden="true" tabindex="-1"></a>encoded_class <span class="op">=</span> label_encoder.fit_transform(titanic_train[<span class="st">&quot;Pclass&quot;</span>])</span>
<span id="cb869-3"><a href="análisis-de-datos-con-python.html#cb869-3" aria-hidden="true" tabindex="-1"></a>encoded_cabin <span class="op">=</span> label_encoder.fit_transform(titanic_train[<span class="st">&quot;Cabin&quot;</span>])</span>
<span id="cb869-4"><a href="análisis-de-datos-con-python.html#cb869-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb869-5"><a href="análisis-de-datos-con-python.html#cb869-5" aria-hidden="true" tabindex="-1"></a>train_features <span class="op">=</span> pd.DataFrame([encoded_class,</span>
<span id="cb869-6"><a href="análisis-de-datos-con-python.html#cb869-6" aria-hidden="true" tabindex="-1"></a>                              encoded_cabin,</span>
<span id="cb869-7"><a href="análisis-de-datos-con-python.html#cb869-7" aria-hidden="true" tabindex="-1"></a>                              encoded_sex,</span>
<span id="cb869-8"><a href="análisis-de-datos-con-python.html#cb869-8" aria-hidden="true" tabindex="-1"></a>                              titanic_train[<span class="st">&quot;Age&quot;</span>]]).T</span>
<span id="cb869-9"><a href="análisis-de-datos-con-python.html#cb869-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb869-10"><a href="análisis-de-datos-con-python.html#cb869-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize logistic regression model</span></span>
<span id="cb869-11"><a href="análisis-de-datos-con-python.html#cb869-11" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> linear_model.LogisticRegression(solver <span class="op">=</span> <span class="st">&#39;lbfgs&#39;</span>)</span>
<span id="cb869-12"><a href="análisis-de-datos-con-python.html#cb869-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb869-13"><a href="análisis-de-datos-con-python.html#cb869-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb869-14"><a href="análisis-de-datos-con-python.html#cb869-14" aria-hidden="true" tabindex="-1"></a>log_model.fit(X <span class="op">=</span> train_features ,</span>
<span id="cb869-15"><a href="análisis-de-datos-con-python.html#cb869-15" aria-hidden="true" tabindex="-1"></a>              y <span class="op">=</span> titanic_train[<span class="st">&quot;Survived&quot;</span>])</span>
<span id="cb869-16"><a href="análisis-de-datos-con-python.html#cb869-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb869-17"><a href="análisis-de-datos-con-python.html#cb869-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model intercept</span></span>
<span id="cb869-18"><a href="análisis-de-datos-con-python.html#cb869-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.intercept_)</span>
<span id="cb869-19"><a href="análisis-de-datos-con-python.html#cb869-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb869-20"><a href="análisis-de-datos-con-python.html#cb869-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Check trained model coefficients</span></span>
<span id="cb869-21"><a href="análisis-de-datos-con-python.html#cb869-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(log_model.coef_)</span></code></pre></div>
<p>A continuación, vamos a hacer predicciones de clase utilizando este modelo y luego compararemos las predicciones con los valores reales:</p>
<div class="sourceCode" id="cb870"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb870-1"><a href="análisis-de-datos-con-python.html#cb870-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions</span></span>
<span id="cb870-2"><a href="análisis-de-datos-con-python.html#cb870-2" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> log_model.predict(X<span class="op">=</span> train_features)</span>
<span id="cb870-3"><a href="análisis-de-datos-con-python.html#cb870-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb870-4"><a href="análisis-de-datos-con-python.html#cb870-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate table of predictions vs actual</span></span>
<span id="cb870-5"><a href="análisis-de-datos-con-python.html#cb870-5" aria-hidden="true" tabindex="-1"></a>pd.crosstab(preds,titanic_train[<span class="st">&quot;Survived&quot;</span>])</span></code></pre></div>
<p>La tabla anterior muestra las clases que nuestro modelo predijo frente a los valores reales de la variable Supervivencia. Esta tabla de valores predichos frente a los reales se conoce como matriz de confusión.</p>
</div>
<div id="gmm" class="section level3 hasAnchor" number="4.8.3">
<h3><span class="header-section-number">4.8.3</span> GMM<a href="análisis-de-datos-con-python.html#gmm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>El método generalizado de momentos (GMM) es un método para construir estimadores, análogo al de máxima verosimilitud (ML). El GMM utiliza suposiciones sobre momentos específicos de las variables aleatorias en lugar de suposiciones sobre toda la distribución, lo que hace que el GMM sea más robusto que el ML, a costa de cierta eficiencia. Los supuestos se denominan condiciones de momento.</li>
</ul>
<div class="sourceCode" id="cb871"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb871-1"><a href="análisis-de-datos-con-python.html#cb871-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GMM</span></span>
<span id="cb871-2"><a href="análisis-de-datos-con-python.html#cb871-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb871-3"><a href="análisis-de-datos-con-python.html#cb871-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> hstack, ones, array, mat, tile, reshape, squeeze, eye, asmatrix</span>
<span id="cb871-4"><a href="análisis-de-datos-con-python.html#cb871-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy.linalg <span class="im">import</span> inv</span>
<span id="cb871-5"><a href="análisis-de-datos-con-python.html#cb871-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas <span class="im">import</span> read_csv, Series </span>
<span id="cb871-6"><a href="análisis-de-datos-con-python.html#cb871-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.linalg <span class="im">import</span> kron</span>
<span id="cb871-7"><a href="análisis-de-datos-con-python.html#cb871-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> fmin_bfgs</span>
<span id="cb871-8"><a href="análisis-de-datos-con-python.html#cb871-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb871-9"><a href="análisis-de-datos-con-python.html#cb871-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span></code></pre></div>
<ul>
<li>A continuación se utiliza una función invocable para producir la salida iteración por iteración cuando se utiliza el optimizador no lineal.</li>
</ul>
<div class="sourceCode" id="cb872"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb872-1"><a href="análisis-de-datos-con-python.html#cb872-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gmm_objective(params, pRets, fRets, Winv, out<span class="op">=</span><span class="va">False</span>):</span>
<span id="cb872-2"><a href="análisis-de-datos-con-python.html#cb872-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> lastValue, functionCount</span>
<span id="cb872-3"><a href="análisis-de-datos-con-python.html#cb872-3" aria-hidden="true" tabindex="-1"></a>    T,N <span class="op">=</span> pRets.shape</span>
<span id="cb872-4"><a href="análisis-de-datos-con-python.html#cb872-4" aria-hidden="true" tabindex="-1"></a>    T,K <span class="op">=</span> fRets.shape</span>
<span id="cb872-5"><a href="análisis-de-datos-con-python.html#cb872-5" aria-hidden="true" tabindex="-1"></a>    beta <span class="op">=</span> squeeze(array(params[:(N<span class="op">*</span>K)]))</span>
<span id="cb872-6"><a href="análisis-de-datos-con-python.html#cb872-6" aria-hidden="true" tabindex="-1"></a>    lam <span class="op">=</span> squeeze(array(params[(N<span class="op">*</span>K):]))</span>
<span id="cb872-7"><a href="análisis-de-datos-con-python.html#cb872-7" aria-hidden="true" tabindex="-1"></a>    beta <span class="op">=</span> reshape(beta,(N,K))</span>
<span id="cb872-8"><a href="análisis-de-datos-con-python.html#cb872-8" aria-hidden="true" tabindex="-1"></a>    lam <span class="op">=</span> reshape(lam,(K,<span class="dv">1</span>))</span>
<span id="cb872-9"><a href="análisis-de-datos-con-python.html#cb872-9" aria-hidden="true" tabindex="-1"></a>    betalam <span class="op">=</span> beta <span class="op">@</span> lam</span>
<span id="cb872-10"><a href="análisis-de-datos-con-python.html#cb872-10" aria-hidden="true" tabindex="-1"></a>    expectedRet <span class="op">=</span> fRets <span class="op">@</span> beta.T</span>
<span id="cb872-11"><a href="análisis-de-datos-con-python.html#cb872-11" aria-hidden="true" tabindex="-1"></a>    e <span class="op">=</span> pRets <span class="op">-</span> expectedRet</span>
<span id="cb872-12"><a href="análisis-de-datos-con-python.html#cb872-12" aria-hidden="true" tabindex="-1"></a>    instr <span class="op">=</span> tile(fRets,N)</span>
<span id="cb872-13"><a href="análisis-de-datos-con-python.html#cb872-13" aria-hidden="true" tabindex="-1"></a>    moments1  <span class="op">=</span> kron(e,ones((<span class="dv">1</span>,K)))</span>
<span id="cb872-14"><a href="análisis-de-datos-con-python.html#cb872-14" aria-hidden="true" tabindex="-1"></a>    moments1 <span class="op">=</span> moments1 <span class="op">*</span> instr</span>
<span id="cb872-15"><a href="análisis-de-datos-con-python.html#cb872-15" aria-hidden="true" tabindex="-1"></a>    moments2 <span class="op">=</span> pRets <span class="op">-</span> betalam.T</span>
<span id="cb872-16"><a href="análisis-de-datos-con-python.html#cb872-16" aria-hidden="true" tabindex="-1"></a>    moments <span class="op">=</span> hstack((moments1,moments2))</span>
<span id="cb872-17"><a href="análisis-de-datos-con-python.html#cb872-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb872-18"><a href="análisis-de-datos-con-python.html#cb872-18" aria-hidden="true" tabindex="-1"></a>    avgMoment <span class="op">=</span> moments.mean(axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb872-19"><a href="análisis-de-datos-con-python.html#cb872-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb872-20"><a href="análisis-de-datos-con-python.html#cb872-20" aria-hidden="true" tabindex="-1"></a>    J <span class="op">=</span> T <span class="op">*</span> mat(avgMoment) <span class="op">*</span> mat(Winv) <span class="op">*</span> mat(avgMoment).T</span>
<span id="cb872-21"><a href="análisis-de-datos-con-python.html#cb872-21" aria-hidden="true" tabindex="-1"></a>    J <span class="op">=</span> J[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb872-22"><a href="análisis-de-datos-con-python.html#cb872-22" aria-hidden="true" tabindex="-1"></a>    lastValue <span class="op">=</span> J</span>
<span id="cb872-23"><a href="análisis-de-datos-con-python.html#cb872-23" aria-hidden="true" tabindex="-1"></a>    functionCount <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb872-24"><a href="análisis-de-datos-con-python.html#cb872-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> out:</span>
<span id="cb872-25"><a href="análisis-de-datos-con-python.html#cb872-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> J</span>
<span id="cb872-26"><a href="análisis-de-datos-con-python.html#cb872-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb872-27"><a href="análisis-de-datos-con-python.html#cb872-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> J, moments</span></code></pre></div>
<ul>
<li>Se define la matriz G, que es la derivada de los momentos del GMM con respecto a los parámetros.</li>
</ul>
<div class="sourceCode" id="cb873"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb873-1"><a href="análisis-de-datos-con-python.html#cb873-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gmm_G(params, pRets, fRets):</span>
<span id="cb873-2"><a href="análisis-de-datos-con-python.html#cb873-2" aria-hidden="true" tabindex="-1"></a>    T,N <span class="op">=</span> pRets.shape</span>
<span id="cb873-3"><a href="análisis-de-datos-con-python.html#cb873-3" aria-hidden="true" tabindex="-1"></a>    T,K <span class="op">=</span> fRets.shape</span>
<span id="cb873-4"><a href="análisis-de-datos-con-python.html#cb873-4" aria-hidden="true" tabindex="-1"></a>    beta <span class="op">=</span> squeeze(array(params[:(N<span class="op">*</span>K)]))</span>
<span id="cb873-5"><a href="análisis-de-datos-con-python.html#cb873-5" aria-hidden="true" tabindex="-1"></a>    lam <span class="op">=</span> squeeze(array(params[(N<span class="op">*</span>K):]))</span>
<span id="cb873-6"><a href="análisis-de-datos-con-python.html#cb873-6" aria-hidden="true" tabindex="-1"></a>    beta <span class="op">=</span> reshape(beta,(N,K))</span>
<span id="cb873-7"><a href="análisis-de-datos-con-python.html#cb873-7" aria-hidden="true" tabindex="-1"></a>    lam <span class="op">=</span> reshape(lam,(K,<span class="dv">1</span>))</span>
<span id="cb873-8"><a href="análisis-de-datos-con-python.html#cb873-8" aria-hidden="true" tabindex="-1"></a>    G <span class="op">=</span> np.zeros((N<span class="op">*</span>K<span class="op">+</span>K,N<span class="op">*</span>K<span class="op">+</span>N))</span>
<span id="cb873-9"><a href="análisis-de-datos-con-python.html#cb873-9" aria-hidden="true" tabindex="-1"></a>    ffp <span class="op">=</span> (fRets.T <span class="op">@</span> fRets) <span class="op">/</span> T</span>
<span id="cb873-10"><a href="análisis-de-datos-con-python.html#cb873-10" aria-hidden="true" tabindex="-1"></a>    G[:(N<span class="op">*</span>K),:(N<span class="op">*</span>K)]<span class="op">=</span>kron(eye(N),ffp)</span>
<span id="cb873-11"><a href="análisis-de-datos-con-python.html#cb873-11" aria-hidden="true" tabindex="-1"></a>    G[:(N<span class="op">*</span>K),(N<span class="op">*</span>K):] <span class="op">=</span> kron(eye(N),<span class="op">-</span>lam)</span>
<span id="cb873-12"><a href="análisis-de-datos-con-python.html#cb873-12" aria-hidden="true" tabindex="-1"></a>    G[(N<span class="op">*</span>K):,(N<span class="op">*</span>K):] <span class="op">=</span> <span class="op">-</span>beta.T</span>
<span id="cb873-13"><a href="análisis-de-datos-con-python.html#cb873-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb873-14"><a href="análisis-de-datos-con-python.html#cb873-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> G</span></code></pre></div>
<ul>
<li>A continuación, se importan los datos y se selecciona un subconjunto de las carteras de prueba para que la estimación sea más rápida.</li>
</ul>
<div class="sourceCode" id="cb874"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb874-1"><a href="análisis-de-datos-con-python.html#cb874-1" aria-hidden="true" tabindex="-1"></a>os.chdir(<span class="st">&quot;datos&quot;</span>)</span>
<span id="cb874-2"><a href="análisis-de-datos-con-python.html#cb874-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb874-3"><a href="análisis-de-datos-con-python.html#cb874-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> read_csv(<span class="st">&#39;FamaFrench.csv&#39;</span>)</span>
<span id="cb874-4"><a href="análisis-de-datos-con-python.html#cb874-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb874-5"><a href="análisis-de-datos-con-python.html#cb874-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Split using both named colums and ix for larger blocks</span></span>
<span id="cb874-6"><a href="análisis-de-datos-con-python.html#cb874-6" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> data[<span class="st">&#39;date&#39;</span>].values</span>
<span id="cb874-7"><a href="análisis-de-datos-con-python.html#cb874-7" aria-hidden="true" tabindex="-1"></a>factors <span class="op">=</span> data[[<span class="st">&#39;VWMe&#39;</span>,<span class="st">&#39;SMB&#39;</span>,<span class="st">&#39;HML&#39;</span>]].values</span>
<span id="cb874-8"><a href="análisis-de-datos-con-python.html#cb874-8" aria-hidden="true" tabindex="-1"></a>riskfree <span class="op">=</span> data[<span class="st">&#39;RF&#39;</span>].values</span>
<span id="cb874-9"><a href="análisis-de-datos-con-python.html#cb874-9" aria-hidden="true" tabindex="-1"></a>portfolios <span class="op">=</span> data.iloc[:,<span class="dv">5</span>:].values</span>
<span id="cb874-10"><a href="análisis-de-datos-con-python.html#cb874-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb874-11"><a href="análisis-de-datos-con-python.html#cb874-11" aria-hidden="true" tabindex="-1"></a>T,N <span class="op">=</span> portfolios.shape</span>
<span id="cb874-12"><a href="análisis-de-datos-con-python.html#cb874-12" aria-hidden="true" tabindex="-1"></a>portfolios <span class="op">=</span> portfolios[:,np.arange(<span class="dv">0</span>,N,<span class="dv">2</span>)]</span>
<span id="cb874-13"><a href="análisis-de-datos-con-python.html#cb874-13" aria-hidden="true" tabindex="-1"></a>T,N <span class="op">=</span> portfolios.shape</span>
<span id="cb874-14"><a href="análisis-de-datos-con-python.html#cb874-14" aria-hidden="true" tabindex="-1"></a>excessRet <span class="op">=</span> portfolios <span class="op">-</span> np.reshape(riskfree,(T,<span class="dv">1</span>))</span>
<span id="cb874-15"><a href="análisis-de-datos-con-python.html#cb874-15" aria-hidden="true" tabindex="-1"></a>K <span class="op">=</span> np.size(factors,<span class="dv">1</span>)</span>
<span id="cb874-16"><a href="análisis-de-datos-con-python.html#cb874-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb874-17"><a href="análisis-de-datos-con-python.html#cb874-17" aria-hidden="true" tabindex="-1"></a>portfolios.shape</span>
<span id="cb874-18"><a href="análisis-de-datos-con-python.html#cb874-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb874-19"><a href="análisis-de-datos-con-python.html#cb874-19" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<ul>
<li>Los valores iniciales de las cargas de los factores y las primas de riesgo se estiman mediante MCO y medias simples.</li>
</ul>
<div class="sourceCode" id="cb875"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb875-1"><a href="análisis-de-datos-con-python.html#cb875-1" aria-hidden="true" tabindex="-1"></a>betas <span class="op">=</span> []</span>
<span id="cb875-2"><a href="análisis-de-datos-con-python.html#cb875-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb875-3"><a href="análisis-de-datos-con-python.html#cb875-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb875-4"><a href="análisis-de-datos-con-python.html#cb875-4" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> sm.OLS(excessRet[:,i],sm.add_constant(factors)).fit()</span>
<span id="cb875-5"><a href="análisis-de-datos-con-python.html#cb875-5" aria-hidden="true" tabindex="-1"></a>    betas.append(res.params[<span class="dv">1</span>:])</span>
<span id="cb875-6"><a href="análisis-de-datos-con-python.html#cb875-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb875-7"><a href="análisis-de-datos-con-python.html#cb875-7" aria-hidden="true" tabindex="-1"></a>avgReturn <span class="op">=</span> excessRet.mean(axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb875-8"><a href="análisis-de-datos-con-python.html#cb875-8" aria-hidden="true" tabindex="-1"></a>avgReturn.shape <span class="op">=</span> N,<span class="dv">1</span></span>
<span id="cb875-9"><a href="análisis-de-datos-con-python.html#cb875-9" aria-hidden="true" tabindex="-1"></a>betas <span class="op">=</span> array(betas)</span>
<span id="cb875-10"><a href="análisis-de-datos-con-python.html#cb875-10" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> sm.OLS(avgReturn, betas).fit()</span>
<span id="cb875-11"><a href="análisis-de-datos-con-python.html#cb875-11" aria-hidden="true" tabindex="-1"></a>riskPremia <span class="op">=</span> res.params</span>
<span id="cb875-12"><a href="análisis-de-datos-con-python.html#cb875-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb875-13"><a href="análisis-de-datos-con-python.html#cb875-13" aria-hidden="true" tabindex="-1"></a>riskPremia</span></code></pre></div>
<ul>
<li>Los valores de partida se calculan las estimaciones del primer paso se encuentran utilizando el optimizador no lineal.</li>
<li>La matriz de ponderación inicial es sólo la matriz de identificación.</li>
</ul>
<div class="sourceCode" id="cb876"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb876-1"><a href="análisis-de-datos-con-python.html#cb876-1" aria-hidden="true" tabindex="-1"></a>riskPremia.shape <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb876-2"><a href="análisis-de-datos-con-python.html#cb876-2" aria-hidden="true" tabindex="-1"></a>startingVals <span class="op">=</span> np.concatenate((betas.flatten(),riskPremia))</span>
<span id="cb876-3"><a href="análisis-de-datos-con-python.html#cb876-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-4"><a href="análisis-de-datos-con-python.html#cb876-4" aria-hidden="true" tabindex="-1"></a>Winv <span class="op">=</span> np.eye(N<span class="op">*</span>(K<span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb876-5"><a href="análisis-de-datos-con-python.html#cb876-5" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> (excessRet, factors, Winv)</span>
<span id="cb876-6"><a href="análisis-de-datos-con-python.html#cb876-6" aria-hidden="true" tabindex="-1"></a>iteration <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb876-7"><a href="análisis-de-datos-con-python.html#cb876-7" aria-hidden="true" tabindex="-1"></a>functionCount <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb876-8"><a href="análisis-de-datos-con-python.html#cb876-8" aria-hidden="true" tabindex="-1"></a>step1opt <span class="op">=</span> fmin_bfgs(gmm_objective, startingVals, args<span class="op">=</span>args)</span>
<span id="cb876-9"><a href="análisis-de-datos-con-python.html#cb876-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-10"><a href="análisis-de-datos-con-python.html#cb876-10" aria-hidden="true" tabindex="-1"></a>step1opt</span>
<span id="cb876-11"><a href="análisis-de-datos-con-python.html#cb876-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-12"><a href="análisis-de-datos-con-python.html#cb876-12" aria-hidden="true" tabindex="-1"></a>premia <span class="op">=</span> step1opt[<span class="op">-</span><span class="dv">3</span>:]</span>
<span id="cb876-13"><a href="análisis-de-datos-con-python.html#cb876-13" aria-hidden="true" tabindex="-1"></a>premia</span>
<span id="cb876-14"><a href="análisis-de-datos-con-python.html#cb876-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-15"><a href="análisis-de-datos-con-python.html#cb876-15" aria-hidden="true" tabindex="-1"></a>premia <span class="op">=</span> step1opt[<span class="op">-</span><span class="dv">3</span>:]</span>
<span id="cb876-16"><a href="análisis-de-datos-con-python.html#cb876-16" aria-hidden="true" tabindex="-1"></a>premia <span class="op">=</span> Series(premia,index<span class="op">=</span>[<span class="st">&#39;VWMe&#39;</span>, <span class="st">&#39;SMB&#39;</span>, <span class="st">&#39;HML&#39;</span>])</span>
<span id="cb876-17"><a href="análisis-de-datos-con-python.html#cb876-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Annualized Risk Premia (First step)&#39;</span>)</span>
<span id="cb876-18"><a href="análisis-de-datos-con-python.html#cb876-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">12</span> <span class="op">*</span> premia)</span>
<span id="cb876-19"><a href="análisis-de-datos-con-python.html#cb876-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-20"><a href="análisis-de-datos-con-python.html#cb876-20" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> gmm_objective(step1opt, excessRet, factors, Winv, out<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb876-21"><a href="análisis-de-datos-con-python.html#cb876-21" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> np.cov(out[<span class="dv">1</span>].T)</span>
<span id="cb876-22"><a href="análisis-de-datos-con-python.html#cb876-22" aria-hidden="true" tabindex="-1"></a>Winv2 <span class="op">=</span> inv(S)</span>
<span id="cb876-23"><a href="análisis-de-datos-con-python.html#cb876-23" aria-hidden="true" tabindex="-1"></a>args <span class="op">=</span> (excessRet, factors, Winv2)</span>
<span id="cb876-24"><a href="análisis-de-datos-con-python.html#cb876-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-25"><a href="análisis-de-datos-con-python.html#cb876-25" aria-hidden="true" tabindex="-1"></a>iteration <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb876-26"><a href="análisis-de-datos-con-python.html#cb876-26" aria-hidden="true" tabindex="-1"></a>functionCount <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb876-27"><a href="análisis-de-datos-con-python.html#cb876-27" aria-hidden="true" tabindex="-1"></a>step2opt <span class="op">=</span> fmin_bfgs(gmm_objective, step1opt, args<span class="op">=</span>args)</span></code></pre></div>
<ul>
<li>Por último, se calcula el VCV de las estimaciones de los parámetros.</li>
</ul>
<div class="sourceCode" id="cb877"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb877-1"><a href="análisis-de-datos-con-python.html#cb877-1" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> gmm_objective(step2opt, excessRet, factors, Winv2, out<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb877-2"><a href="análisis-de-datos-con-python.html#cb877-2" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> gmm_G(step2opt, excessRet, factors)</span>
<span id="cb877-3"><a href="análisis-de-datos-con-python.html#cb877-3" aria-hidden="true" tabindex="-1"></a>S <span class="op">=</span> np.cov(out[<span class="dv">1</span>].T)</span>
<span id="cb877-4"><a href="análisis-de-datos-con-python.html#cb877-4" aria-hidden="true" tabindex="-1"></a>vcv <span class="op">=</span> inv(G <span class="op">@</span> inv(S) <span class="op">@</span> G.T)<span class="op">/</span>T</span></code></pre></div>
<ul>
<li>Premio al riesgo con sus test - t</li>
</ul>
<div class="sourceCode" id="cb878"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb878-1"><a href="análisis-de-datos-con-python.html#cb878-1" aria-hidden="true" tabindex="-1"></a>premia <span class="op">=</span> step2opt[<span class="op">-</span><span class="dv">3</span>:]</span>
<span id="cb878-2"><a href="análisis-de-datos-con-python.html#cb878-2" aria-hidden="true" tabindex="-1"></a>premia <span class="op">=</span> Series(premia,index<span class="op">=</span>[<span class="st">&#39;VWMe&#39;</span>, <span class="st">&#39;SMB&#39;</span>, <span class="st">&#39;HML&#39;</span>])</span>
<span id="cb878-3"><a href="análisis-de-datos-con-python.html#cb878-3" aria-hidden="true" tabindex="-1"></a>premia_vcv <span class="op">=</span> vcv[<span class="op">-</span><span class="dv">3</span>:,<span class="op">-</span><span class="dv">3</span>:]</span>
<span id="cb878-4"><a href="análisis-de-datos-con-python.html#cb878-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Annualized Risk Premia&#39;</span>)</span>
<span id="cb878-5"><a href="análisis-de-datos-con-python.html#cb878-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">12</span> <span class="op">*</span> premia)</span>
<span id="cb878-6"><a href="análisis-de-datos-con-python.html#cb878-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb878-7"><a href="análisis-de-datos-con-python.html#cb878-7" aria-hidden="true" tabindex="-1"></a>premia_stderr <span class="op">=</span> np.diag(premia_vcv)</span>
<span id="cb878-8"><a href="análisis-de-datos-con-python.html#cb878-8" aria-hidden="true" tabindex="-1"></a>premia_stderr <span class="op">=</span> Series(premia_stderr,index<span class="op">=</span>[<span class="st">&#39;VWMe&#39;</span>, <span class="st">&#39;SMB&#39;</span>, <span class="st">&#39;HML&#39;</span>])</span>
<span id="cb878-9"><a href="análisis-de-datos-con-python.html#cb878-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;T-stats&#39;</span>)</span>
<span id="cb878-10"><a href="análisis-de-datos-con-python.html#cb878-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(premia <span class="op">/</span> premia_stderr)</span></code></pre></div>
</div>
<div id="diferencias-en-diferencias" class="section level3 hasAnchor" number="4.8.4">
<h3><span class="header-section-number">4.8.4</span> Diferencias en Diferencias<a href="análisis-de-datos-con-python.html#diferencias-en-diferencias" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Pregunta clave</strong>: ¿cómo saber si el aumento o disminución de algún fenomeno que observamos no es una tendencia natural? En otras palabras, ¿cómo se puede saber el contrafactual <span class="math inline">\(Y_0\)</span> de lo que habría sucedido si no se hubiera pasado algo?</p></li>
<li><p>Una técnica para responder a este tipo de preguntas es la Diferencia en Diferencia. La diferencia en la diferencia se utiliza habitualmente para evaluar el efecto de las macrointervenciones, como el efecto de la inmigración en el desempleo, el efecto de los cambios en la ley de armas en los índices de delincuencia o simplemente la diferencia en el compromiso de los usuarios debido a una campaña de marketing.</p></li>
<li><p>En todos estos casos, se tiene un periodo antes y después de la intervención y se desea desentrañar el impacto de la intervención de una tendencia general. Como ejemplo motivador, veamos una pregunta similar a la que tuve que responder.</p></li>
<li><p>Vamos a ver un ejemplo del impacto de una publicidad. En este ejemplo se colocaron Vamos a colocar 3 vallas en la ciudad de Porto Alegre, la capital del estado de Rio Grande do Sul. Queremos ver si eso aumentaba los depósitos en nuestra cuenta de ahorros. Como nota para los que no estén muy familiarizados con la geografía brasileña, Rio Grande do Sul forma parte del sur del país, una de las regiones más desarrolladas.</p></li>
<li><p>Teniendo esto en cuenta, decidimos también mirar los datos de otra capital del sur. Colocamos la valla publicitaria en Porto Alegre durante todo el mes de junio. Los datos que tenemos son los siguientes:</p></li>
</ul>
<div class="sourceCode" id="cb879"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb879-1"><a href="análisis-de-datos-con-python.html#cb879-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Commented out IPython magic to ensure Python compatibility.</span></span>
<span id="cb879-2"><a href="análisis-de-datos-con-python.html#cb879-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb879-3"><a href="análisis-de-datos-con-python.html#cb879-3" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">&#39;ignore&#39;</span>)</span>
<span id="cb879-4"><a href="análisis-de-datos-con-python.html#cb879-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb879-5"><a href="análisis-de-datos-con-python.html#cb879-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb879-6"><a href="análisis-de-datos-con-python.html#cb879-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb879-7"><a href="análisis-de-datos-con-python.html#cb879-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> style</span>
<span id="cb879-8"><a href="análisis-de-datos-con-python.html#cb879-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib <span class="im">import</span> pyplot <span class="im">as</span> plt</span>
<span id="cb879-9"><a href="análisis-de-datos-con-python.html#cb879-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb879-10"><a href="análisis-de-datos-con-python.html#cb879-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb879-11"><a href="análisis-de-datos-con-python.html#cb879-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb879-12"><a href="análisis-de-datos-con-python.html#cb879-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb879-13"><a href="análisis-de-datos-con-python.html#cb879-13" aria-hidden="true" tabindex="-1"></a><span class="co"># %matplotlib inline</span></span>
<span id="cb879-14"><a href="análisis-de-datos-con-python.html#cb879-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb879-15"><a href="análisis-de-datos-con-python.html#cb879-15" aria-hidden="true" tabindex="-1"></a>style.use(<span class="st">&quot;fivethirtyeight&quot;</span>)</span>
<span id="cb879-16"><a href="análisis-de-datos-con-python.html#cb879-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb879-17"><a href="análisis-de-datos-con-python.html#cb879-17" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">&quot;billboard_impact.csv&quot;</span>)</span>
<span id="cb879-18"><a href="análisis-de-datos-con-python.html#cb879-18" aria-hidden="true" tabindex="-1"></a>data.head()</span></code></pre></div>
<p>Recordemos que los depósitos son nuestra variable de resultado, la que deseamos aumentar con las vallas publicitarias. POA es un indicador ficticio de la ciudad de Porto Alegre. Cuando es cero, significa que las muestras son de Florianópolis. Jul es una variable ficticia para el mes de julio, o para el período posterior a la intervención. Cuando es cero, se refiere a las muestras de mayo, el período anterior a la intervención.</p>
<div id="estimador-did" class="section level4 hasAnchor" number="4.8.4.1">
<h4><span class="header-section-number">4.8.4.1</span> Estimador DID<a href="análisis-de-datos-con-python.html#estimador-did" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Para evitar la confusión entre Tiempo y Tratamiento, a partir de ahora, utilizaré D para denotar el tratamiento y T para denotar el tiempo. Sea <span class="math inline">\(Y_D(T)\)</span> el resultado potencial del tratamiento D en el período T. En un mundo ideal en el que tenemos la capacidad de observar el contrafactual, estimaríamos el efecto del tratamiento de una intervención de la siguiente manera:</p>
<p>$
= E[Y_1(1) - Y_0(1)|D=1]
$</p>
<p>El efecto causal es el resultado en el periodo posterior a la intervención en el caso de un tratamiento menos el resultado también en el periodo posterior a la intervención, pero en el caso de no tratamiento. Por supuesto, no podemos medir esto porque <span class="math inline">\(Y_0(1)\)</span> es contrafactual.</p>
<p>Una forma de evitarlo es comparar el antes y el después.</p>
<p>$
= E[Y(1)|D=1] - E[Y(0)|D=1]
$</p>
<p>En nuestro ejemplo, compararíamos los depósitos medios de POA antes y después de la colocación del cartel publicitario.</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb880-1"><a href="análisis-de-datos-con-python.html#cb880-1" aria-hidden="true" tabindex="-1"></a>poa_before <span class="op">=</span> data.query(<span class="st">&quot;poa==1 &amp; jul==0&quot;</span>)[<span class="st">&quot;deposits&quot;</span>].mean()</span>
<span id="cb880-2"><a href="análisis-de-datos-con-python.html#cb880-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb880-3"><a href="análisis-de-datos-con-python.html#cb880-3" aria-hidden="true" tabindex="-1"></a>poa_after <span class="op">=</span> data.query(<span class="st">&quot;poa==1 &amp; jul==1&quot;</span>)[<span class="st">&quot;deposits&quot;</span>].mean()</span>
<span id="cb880-4"><a href="análisis-de-datos-con-python.html#cb880-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb880-5"><a href="análisis-de-datos-con-python.html#cb880-5" aria-hidden="true" tabindex="-1"></a>poa_after <span class="op">-</span> poa_before</span></code></pre></div>
<p>Este estimador nos dice que debemos esperar que los depósitos aumenten 41,04 R después de la intervención. ¿Pero podemos confiar en esto?</p>
<p>Obsérvese que <span class="math inline">\(E[Y(0)|D=1]=E[Y_0(0)|D=1]\)</span>, es decir, el resultado observado para la unidad tratada <strong>antes de la intervención</strong> es igual al resultado contrafactual para la unidad tratada también antes de la intervención. Como estamos utilizando esto para estimar el resultado contrafactual <strong>después de la intervención</strong> <span class="math inline">\(E[Y_0(1)|D=1]\)</span>, esta estimación anterior supone que <span class="math inline">\(E[Y_0(1)|D=1] = E[Y_0(0)|D=1]\)</span>.</p>
<p>Está diciendo que en el caso de que no haya intervención, el resultado en el último período sería el mismo que el resultado del período inicial. Obviamente, esto sería falso si la variable de resultado sigue algún tipo de tendencia. Por ejemplo, si los depósitos están subiendo en POA, <span class="math inline">\(E[Y_0(1)|D=1] &gt; E[Y_0(0)|D=1]\)</span>, es decir, el resultado del último período sería mayor que el del período inicial incluso en ausencia de la intervención. Con un argumento similar, si la tendencia de Y es descendente, <span class="math inline">\(E[Y_0(1)|D=1] &lt; E[Y_0(0)|D=1]\)</span>. Esto es para mostrar que esto del antes y el después no es un gran estimador.</p>
<p>Otra idea es comparar el grupo tratado con un grupo no tratado que no recibió la intervención:</p>
<p>$
= E[Y(1)|D=1] - E[Y(1)|D=0]
$</p>
<p>En nuestro ejemplo, sería comparar los depósitos de POA con los de Florianópolis en el período posterior a la intervención.</p>
<div class="sourceCode" id="cb881"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb881-1"><a href="análisis-de-datos-con-python.html#cb881-1" aria-hidden="true" tabindex="-1"></a>fl_after <span class="op">=</span> data.query(<span class="st">&quot;poa==0 &amp; jul==1&quot;</span>)[<span class="st">&quot;deposits&quot;</span>].mean()</span>
<span id="cb881-2"><a href="análisis-de-datos-con-python.html#cb881-2" aria-hidden="true" tabindex="-1"></a>poa_after <span class="op">-</span> fl_after</span></code></pre></div>
<p>Este estimador nos dice que la campaña es perjudicial y que los clientes disminuirán los depósitos en R$ 119,10.</p>
<p>Observe que <span class="math inline">\(E[Y(1)|D=0]=E[Y_0(1)|D=0]\)</span>. Y como estamos utilizando <span class="math inline">\(E[Y(1)|D=0]\)</span> para estimar el contrafactual para los tratados después de la intervención, estamos asumiendo que podemos reemplazar el contrafactual faltante así: <span class="math inline">\(E[Y_0(1)|D=0] = E[Y_0(1)|D=1]\)</span>. Pero nótese que esto sólo sería cierto si ambos grupos tienen un nivel de base muy similar. Por ejemplo, si Florianópolis tiene muchos más depósitos que Porto Alegre, esto no sería cierto porque <span class="math inline">\(E[Y_0(1)|D=0] &gt; E[Y_0(1)|D=1]\)</span>. Por otro lado, si el nivel de depósitos es menor en Florianópolis, tendríamos <span class="math inline">\(E[Y_0(1)|D=0] &lt; E[Y_0(1)|D=1]\)</span>.</p>
<p>De nuevo, esto no es una gran idea. Para resolver esto, podemos utilizar tanto la comparación espacial como la temporal. Esta es la idea del enfoque de la diferencia en la diferencia. Funciona sustituyendo el contrafactual que falta de la siguiente manera:</p>
<p>$
E[Y_0(1)|D=1] = E[Y_1(0)|D=1] + (E[Y_0(1)|D=0] - E[Y_0(0)|D=0])
$</p>
<p>Lo que esto hace es tomar la unidad tratada <strong>antes de la intervención</strong> y añadirle un componente de tendencia, que se estima utilizando el control <span class="math inline">\(E[Y_0(1)|D=0] - E[Y_0(0)|D=0]\)</span>. En palabras, está diciendo que el tratado <strong>después de la intervención</strong>, si no hubiera sido tratado, se parecería al <strong>tratado antes del tratamiento</strong> más un factor de crecimiento que es el mismo que el del control.</p>
<p>Es importante observar que esto supo ne que las tendencias del tratamiento y del control son las mismas:</p>
<p>$
E[Y_0(1) - Y_0(0)|D=1] = E[Y_0(1) - Y_0(0)|D=0]
$</p>
<p>donde el lado izquierdo es la tendencia contrafactual. Ahora, podemos reemplazar el contrafactual estimado en la definición del efecto del tratamiento <span class="math inline">\(E[Y_1(1)|D=1] - E[Y_0(1)|D=1]\)</span></p>
<p>$
= E[Y(1)|D=1] - (E[Y(0)|D=1] + (E[Y(1)|D=0] - E[Y(0)|D=0])
$</p>
<p>Si reordenamos los términos, obtenemos el estimador clásico Diff-in-Diff.</p>
<p>$
= (E[Y(1)|D=1] - E[Y(1)|D=0]) - (E[Y(0)|D=1] - E[Y(0)|D=0])
$</p>
<p>Recibe ese nombre porque obtiene la diferencia entre el tratamiento y el control después y antes del tratamiento.</p>
<p>Esto es lo que se ve en el código.</p>
<div class="sourceCode" id="cb882"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb882-1"><a href="análisis-de-datos-con-python.html#cb882-1" aria-hidden="true" tabindex="-1"></a>fl_before <span class="op">=</span> data.query(<span class="st">&quot;poa==0 &amp; jul==0&quot;</span>)[<span class="st">&quot;deposits&quot;</span>].mean()</span>
<span id="cb882-2"><a href="análisis-de-datos-con-python.html#cb882-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb882-3"><a href="análisis-de-datos-con-python.html#cb882-3" aria-hidden="true" tabindex="-1"></a>diff_in_diff <span class="op">=</span> (poa_after<span class="op">-</span>poa_before)<span class="op">-</span>(fl_after<span class="op">-</span>fl_before)</span>
<span id="cb882-4"><a href="análisis-de-datos-con-python.html#cb882-4" aria-hidden="true" tabindex="-1"></a>diff_in_diff</span></code></pre></div>
<p>Diff-in-Diff nos dice que deberíamos esperar que los depósitos aumenten en 6,52 R$ por cliente. Obsérvese que el supuesto que hace diff-in-diff es mucho más plausible que los otros 2 estimadores. Simplemente asume que el patrón de crecimiento entre las 2 ciudades es el mismo. Pero no requiere que tengan el mismo nivel de base ni que la tendencia sea cero.</p>
<p>Para visualizar lo que hace diff-in-diff, podemos proyectar la tendencia de crecimiento de la ciudad no tratada a la tratada para ver el contrafactual, es decir, el número de depósitos que deberíamos esperar si no hubiera intervención.</p>
<div class="sourceCode" id="cb883"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb883-1"><a href="análisis-de-datos-con-python.html#cb883-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))</span>
<span id="cb883-2"><a href="análisis-de-datos-con-python.html#cb883-2" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jul&quot;</span>], [fl_before, fl_after], label<span class="op">=</span><span class="st">&quot;FL&quot;</span>, lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb883-3"><a href="análisis-de-datos-con-python.html#cb883-3" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jul&quot;</span>], [poa_before, poa_after], label<span class="op">=</span><span class="st">&quot;POA&quot;</span>, lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb883-4"><a href="análisis-de-datos-con-python.html#cb883-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb883-5"><a href="análisis-de-datos-con-python.html#cb883-5" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jul&quot;</span>], [poa_before, poa_before<span class="op">+</span>(fl_after<span class="op">-</span>fl_before)],</span>
<span id="cb883-6"><a href="análisis-de-datos-con-python.html#cb883-6" aria-hidden="true" tabindex="-1"></a>         label<span class="op">=</span><span class="st">&quot;Counterfactual&quot;</span>, lw<span class="op">=</span><span class="dv">2</span>, color<span class="op">=</span><span class="st">&quot;C2&quot;</span>, ls<span class="op">=</span><span class="st">&quot;-.&quot;</span>)</span>
<span id="cb883-7"><a href="análisis-de-datos-con-python.html#cb883-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb883-8"><a href="análisis-de-datos-con-python.html#cb883-8" aria-hidden="true" tabindex="-1"></a>plt.legend()<span class="op">;</span></span></code></pre></div>
<p>¿Ves esa pequeña diferencia entre las líneas discontinuas rojas y amarillas? Si te concentras bien, puedes ver el pequeño efecto del tratamiento en Porto Alegre.</p>
<p>Ahora bien, lo que se puede preguntar es “¿hasta qué punto puedo confiar en este estimador? Tengo derecho a que me informen de los errores estándar”. Lo cual tiene sentido, ya que los estimadores sin ellos parecen tontos. Para ello, utilizaremos un ingenioso truco que utiliza la regresión. En concreto, estimaremos el siguiente modelo lineal</p>
<p>$
Y_i = _0 + _1 POA_i + _2 Jul_i + _3 POA_i*Jul_i + e_i
$</p>
<p>Obsérvese que <span class="math inline">\(\beta_0\)</span> es la línea de base del control. En nuestro caso, es el nivel de depósitos en Florianópolis en el mes de mayo. Si activamos la variable ficticia de la ciudad tratada, obtenemos <span class="math inline">\(\beta_1\)</span>. Así, <span class="math inline">\(\beta_0 + \beta_1\)</span> es la línea de base de Porto Alegre en mayo, antes de la intervención, y <span class="math inline">\(\beta_1\)</span> es el aumento de la línea de base de Porto Alegre sobre Florianópolis. Si desactivamos la variable ficticia del POA y activamos la de julio, obtenemos <span class="math inline">\(\beta_0 + \beta_2\)</span>, que es el nivel de Florianópolis en julio, después del período de intervención. <span class="math inline">\(\beta_2\)</span> es entonces la tendencia del control, ya que lo añadimos a la línea de base para obtener el nivel del control en el periodo posterior a la intervención. Recapitulando, <span class="math inline">\(\beta_1\)</span> es el incremento que obtenemos al pasar del control al tratamiento, <span class="math inline">\(\beta_2\)</span> es el incremento que obtenemos al pasar del periodo anterior al periodo posterior a la intervención. Por último, si activamos ambas variables ficticias, obtenemos <span class="math inline">\(\beta_3\)</span>. <span class="math inline">\(\beta_0 + \beta_1 + \beta_2 + \beta_3\)</span> es el nivel en Porto Alegre después de la intervención. Así que <span class="math inline">\(\beta_3\)</span> es el impacto incremental cuando se pasa de mayo a julio y de Florianópolis a POA. En otras palabras, es el estimador de la diferencia en la diferencia.</p>
<p>Si no me cree, compruébelo usted mismo. Deberías obtener exactamente el mismo número que obtuvimos arriba. Y también observe cómo obtenemos nuestros tan deseados errores estándar.</p>
<div class="sourceCode" id="cb884"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb884-1"><a href="análisis-de-datos-con-python.html#cb884-1" aria-hidden="true" tabindex="-1"></a>smf.ols(<span class="st">&#39;deposits ~ poa*jul&#39;</span>, data<span class="op">=</span>data).fit().summary().tables[<span class="dv">1</span>]</span></code></pre></div>
</div>
</div>
<div id="plotly" class="section level3 hasAnchor" number="4.8.5">
<h3><span class="header-section-number">4.8.5</span> Plotly<a href="análisis-de-datos-con-python.html#plotly" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="introducción-tablas-y-gráficos-interactivos" class="section level4 hasAnchor" number="4.8.5.1">
<h4><span class="header-section-number">4.8.5.1</span> Introducción: tablas y gráficos interactivos<a href="análisis-de-datos-con-python.html#introducción-tablas-y-gráficos-interactivos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><code>plotly</code> es una librería de python gráficos interactivos, en el ámbito estadístico, financiero, geográfico, científico.</p></li>
<li><p>Es muy útil para hacer gráficos que puedan interactuar con el usuario/a</p></li>
</ul>
<div class="sourceCode" id="cb885"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb885-1"><a href="análisis-de-datos-con-python.html#cb885-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb885-2"><a href="análisis-de-datos-con-python.html#cb885-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>go.Bar(y<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>]))</span>
<span id="cb885-3"><a href="análisis-de-datos-con-python.html#cb885-3" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
<ul>
<li>También podemos hacer tablas interactivas</li>
</ul>
<div class="sourceCode" id="cb886"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb886-1"><a href="análisis-de-datos-con-python.html#cb886-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb886-2"><a href="análisis-de-datos-con-python.html#cb886-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-3"><a href="análisis-de-datos-con-python.html#cb886-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Valores a mostrar </span></span>
<span id="cb886-4"><a href="análisis-de-datos-con-python.html#cb886-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-5"><a href="análisis-de-datos-con-python.html#cb886-5" aria-hidden="true" tabindex="-1"></a>encabezado <span class="op">=</span> [<span class="st">&#39;A Scores&#39;</span>, <span class="st">&#39;B Scores&#39;</span>]</span>
<span id="cb886-6"><a href="análisis-de-datos-con-python.html#cb886-6" aria-hidden="true" tabindex="-1"></a>valores <span class="op">=</span> [[<span class="dv">100</span>, <span class="dv">90</span>, <span class="dv">80</span>, <span class="dv">90</span>], [<span class="dv">95</span>, <span class="dv">85</span>, <span class="dv">75</span>, <span class="dv">95</span>]]</span>
<span id="cb886-7"><a href="análisis-de-datos-con-python.html#cb886-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-8"><a href="análisis-de-datos-con-python.html#cb886-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear figura</span></span>
<span id="cb886-9"><a href="análisis-de-datos-con-python.html#cb886-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. llamar librería y función: go.Figure()</span></span>
<span id="cb886-10"><a href="análisis-de-datos-con-python.html#cb886-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Definir datos: data=[]</span></span>
<span id="cb886-11"><a href="análisis-de-datos-con-python.html#cb886-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Usar go.Table() para definir encabezado (header) y valores(cells)</span></span>
<span id="cb886-12"><a href="análisis-de-datos-con-python.html#cb886-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Guardamos el resultado en una variable -&gt; alpicamos fig.show()</span></span>
<span id="cb886-13"><a href="análisis-de-datos-con-python.html#cb886-13" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>[go.Table(header<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>encabezado),</span>
<span id="cb886-14"><a href="análisis-de-datos-con-python.html#cb886-14" aria-hidden="true" tabindex="-1"></a>                               cells<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>valores))</span>
<span id="cb886-15"><a href="análisis-de-datos-con-python.html#cb886-15" aria-hidden="true" tabindex="-1"></a>                     ])</span>
<span id="cb886-16"><a href="análisis-de-datos-con-python.html#cb886-16" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb886-17"><a href="análisis-de-datos-con-python.html#cb886-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-18"><a href="análisis-de-datos-con-python.html#cb886-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacer modificaciones </span></span>
<span id="cb886-19"><a href="análisis-de-datos-con-python.html#cb886-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-20"><a href="análisis-de-datos-con-python.html#cb886-20" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>[go.Table(</span>
<span id="cb886-21"><a href="análisis-de-datos-con-python.html#cb886-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Encabezado</span></span>
<span id="cb886-22"><a href="análisis-de-datos-con-python.html#cb886-22" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>encabezado,</span>
<span id="cb886-23"><a href="análisis-de-datos-con-python.html#cb886-23" aria-hidden="true" tabindex="-1"></a>                line_color<span class="op">=</span><span class="st">&#39;red&#39;</span>, <span class="co">#Color borde: cambiar rojo</span></span>
<span id="cb886-24"><a href="análisis-de-datos-con-python.html#cb886-24" aria-hidden="true" tabindex="-1"></a>                fill_color<span class="op">=</span><span class="st">&#39;lightskyblue&#39;</span>, <span class="co">#Color fondo</span></span>
<span id="cb886-25"><a href="análisis-de-datos-con-python.html#cb886-25" aria-hidden="true" tabindex="-1"></a>                align<span class="op">=</span><span class="st">&#39;left&#39;</span>), <span class="co">#Alineación</span></span>
<span id="cb886-26"><a href="análisis-de-datos-con-python.html#cb886-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Valores</span></span>
<span id="cb886-27"><a href="análisis-de-datos-con-python.html#cb886-27" aria-hidden="true" tabindex="-1"></a>    cells<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>valores,</span>
<span id="cb886-28"><a href="análisis-de-datos-con-python.html#cb886-28" aria-hidden="true" tabindex="-1"></a>               line_color<span class="op">=</span><span class="st">&#39;darkslategray&#39;</span>,<span class="co">#Color borde</span></span>
<span id="cb886-29"><a href="análisis-de-datos-con-python.html#cb886-29" aria-hidden="true" tabindex="-1"></a>               fill_color<span class="op">=</span><span class="st">&#39;lightcyan&#39;</span>, <span class="co">#Color rojo</span></span>
<span id="cb886-30"><a href="análisis-de-datos-con-python.html#cb886-30" aria-hidden="true" tabindex="-1"></a>               align<span class="op">=</span><span class="st">&#39;left&#39;</span>)) <span class="co">#Alineación</span></span>
<span id="cb886-31"><a href="análisis-de-datos-con-python.html#cb886-31" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb886-32"><a href="análisis-de-datos-con-python.html#cb886-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-33"><a href="análisis-de-datos-con-python.html#cb886-33" aria-hidden="true" tabindex="-1"></a><span class="co">#Una vez creado el fig podemos editar su tamaño</span></span>
<span id="cb886-34"><a href="análisis-de-datos-con-python.html#cb886-34" aria-hidden="true" tabindex="-1"></a>fig.update_layout(width<span class="op">=</span><span class="dv">300</span>, height<span class="op">=</span><span class="dv">300</span>)</span>
<span id="cb886-35"><a href="análisis-de-datos-con-python.html#cb886-35" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb886-36"><a href="análisis-de-datos-con-python.html#cb886-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb886-37"><a href="análisis-de-datos-con-python.html#cb886-37" aria-hidden="true" tabindex="-1"></a><span class="co">&quot;&quot;&quot;+ Para modificar el formato de los datos, ejemplo número de decimales, podemos usar format</span></span></code></pre></div>
<div class="sourceCode" id="cb887"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb887-1"><a href="análisis-de-datos-con-python.html#cb887-1" aria-hidden="true" tabindex="-1"></a>encabezado <span class="op">=</span> [<span class="st">&#39;A Scores&#39;</span>, <span class="st">&#39;B Scores&#39;</span>, <span class="st">&#39;C Scores&#39;</span>]</span>
<span id="cb887-2"><a href="análisis-de-datos-con-python.html#cb887-2" aria-hidden="true" tabindex="-1"></a>valores <span class="op">=</span> [[<span class="dv">100</span>, <span class="dv">90</span>, <span class="dv">80</span>, <span class="dv">90</span>], [<span class="dv">95</span>, <span class="dv">85</span>, <span class="dv">75</span>, <span class="dv">95</span>], [<span class="fl">95.12345</span>, <span class="fl">85.12345</span>, <span class="fl">75.12345</span>, <span class="fl">95.12345</span>]]</span>
<span id="cb887-3"><a href="análisis-de-datos-con-python.html#cb887-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb887-4"><a href="análisis-de-datos-con-python.html#cb887-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>[go.Table(</span>
<span id="cb887-5"><a href="análisis-de-datos-con-python.html#cb887-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Encabezado</span></span>
<span id="cb887-6"><a href="análisis-de-datos-con-python.html#cb887-6" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>encabezado,</span>
<span id="cb887-7"><a href="análisis-de-datos-con-python.html#cb887-7" aria-hidden="true" tabindex="-1"></a>                line_color<span class="op">=</span><span class="st">&#39;darkslategray&#39;</span>, <span class="co">#Color borde: cambiar rojo</span></span>
<span id="cb887-8"><a href="análisis-de-datos-con-python.html#cb887-8" aria-hidden="true" tabindex="-1"></a>                fill_color<span class="op">=</span><span class="st">&#39;lightskyblue&#39;</span>, <span class="co">#Color fondo</span></span>
<span id="cb887-9"><a href="análisis-de-datos-con-python.html#cb887-9" aria-hidden="true" tabindex="-1"></a>                align<span class="op">=</span><span class="st">&#39;left&#39;</span>), <span class="co">#Alineación</span></span>
<span id="cb887-10"><a href="análisis-de-datos-con-python.html#cb887-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Valores</span></span>
<span id="cb887-11"><a href="análisis-de-datos-con-python.html#cb887-11" aria-hidden="true" tabindex="-1"></a>    cells<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>valores,</span>
<span id="cb887-12"><a href="análisis-de-datos-con-python.html#cb887-12" aria-hidden="true" tabindex="-1"></a>               line_color<span class="op">=</span><span class="st">&#39;darkslategray&#39;</span>,<span class="co">#Color borde</span></span>
<span id="cb887-13"><a href="análisis-de-datos-con-python.html#cb887-13" aria-hidden="true" tabindex="-1"></a>               fill_color<span class="op">=</span><span class="st">&#39;lightcyan&#39;</span>, <span class="co">#Color rojo</span></span>
<span id="cb887-14"><a href="análisis-de-datos-con-python.html#cb887-14" aria-hidden="true" tabindex="-1"></a>               align<span class="op">=</span><span class="st">&#39;left&#39;</span>, <span class="co">#Alineación</span></span>
<span id="cb887-15"><a href="análisis-de-datos-con-python.html#cb887-15" aria-hidden="true" tabindex="-1"></a>               <span class="bu">format</span> <span class="op">=</span> [<span class="va">None</span>, <span class="st">&quot;.1f&quot;</span>, <span class="st">&quot;.2f&quot;</span>])) <span class="co">#Formato: en una lista va según el número de columnas</span></span>
<span id="cb887-16"><a href="análisis-de-datos-con-python.html#cb887-16" aria-hidden="true" tabindex="-1"></a>                ])</span>
<span id="cb887-17"><a href="análisis-de-datos-con-python.html#cb887-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb887-18"><a href="análisis-de-datos-con-python.html#cb887-18" aria-hidden="true" tabindex="-1"></a><span class="co">#Una vez creado el fig podemos editar su tamaño</span></span>
<span id="cb887-19"><a href="análisis-de-datos-con-python.html#cb887-19" aria-hidden="true" tabindex="-1"></a>fig.update_layout(width<span class="op">=</span><span class="dv">400</span>, height<span class="op">=</span><span class="dv">300</span>)</span>
<span id="cb887-20"><a href="análisis-de-datos-con-python.html#cb887-20" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="graficos-de-lineas" class="section level4 hasAnchor" number="4.8.5.2">
<h4><span class="header-section-number">4.8.5.2</span> Graficos de lineas<a href="análisis-de-datos-con-python.html#graficos-de-lineas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Para este ejemplo vamos a usar la librería plotly.express. Dentro de esta tenemos el DataFrame gapminder datos de expectativa de vida, población, PIB por país.</li>
</ul>
<div class="sourceCode" id="cb888"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb888-1"><a href="análisis-de-datos-con-python.html#cb888-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Importamos la librería</span></span>
<span id="cb888-2"><a href="análisis-de-datos-con-python.html#cb888-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb888-3"><a href="análisis-de-datos-con-python.html#cb888-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb888-4"><a href="análisis-de-datos-con-python.html#cb888-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Usamos un subconjunto de los datos, seleccionamos América</span></span>
<span id="cb888-5"><a href="análisis-de-datos-con-python.html#cb888-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder().query(<span class="st">&quot;continent==&#39;Americas&#39;&quot;</span>)</span>
<span id="cb888-6"><a href="análisis-de-datos-con-python.html#cb888-6" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb888-7"><a href="análisis-de-datos-con-python.html#cb888-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb888-8"><a href="análisis-de-datos-con-python.html#cb888-8" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df, x<span class="op">=</span><span class="st">&quot;year&quot;</span>, </span>
<span id="cb888-9"><a href="análisis-de-datos-con-python.html#cb888-9" aria-hidden="true" tabindex="-1"></a>              y<span class="op">=</span><span class="st">&quot;lifeExp&quot;</span>, </span>
<span id="cb888-10"><a href="análisis-de-datos-con-python.html#cb888-10" aria-hidden="true" tabindex="-1"></a>              color<span class="op">=</span><span class="st">&#39;country&#39;</span>)</span>
<span id="cb888-11"><a href="análisis-de-datos-con-python.html#cb888-11" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb888-12"><a href="análisis-de-datos-con-python.html#cb888-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb888-13"><a href="análisis-de-datos-con-python.html#cb888-13" aria-hidden="true" tabindex="-1"></a>df_sur <span class="op">=</span> df[(df.country<span class="op">==</span><span class="st">&quot;Argentina&quot;</span> )<span class="op">|</span> (df.country<span class="op">==</span><span class="st">&quot;Chile&quot;</span>) <span class="op">|</span> (df.country<span class="op">==</span><span class="st">&quot;Uruguay&quot;</span>)]</span>
<span id="cb888-14"><a href="análisis-de-datos-con-python.html#cb888-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.line(df_sur, x<span class="op">=</span><span class="st">&quot;year&quot;</span>, y<span class="op">=</span><span class="st">&quot;gdpPercap&quot;</span>, color<span class="op">=</span><span class="st">&#39;country&#39;</span>)</span>
<span id="cb888-15"><a href="análisis-de-datos-con-python.html#cb888-15" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
<p>Usamos plotly.express cuando hacemos un ejercicio sencillo. Para comenzar a ejemplos más genéricos o en algunos casos, más complejos, vamos a usar go.Scatter</p>
<p>Como primer ejemplo, vamos a usar una función de los DataFrame llamada pivot_table que nos va a permitir modificar nuestra serie del tipo [Fecha, PIB, Pais] a [Fecha, PIB, Argentina, Chile, Uruguay]</p>
<div class="sourceCode" id="cb889"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb889-1"><a href="análisis-de-datos-con-python.html#cb889-1" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb889-2"><a href="análisis-de-datos-con-python.html#cb889-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-3"><a href="análisis-de-datos-con-python.html#cb889-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb889-4"><a href="análisis-de-datos-con-python.html#cb889-4" aria-hidden="true" tabindex="-1"></a>df_sur2 <span class="op">=</span> pd.pivot_table(df_sur, </span>
<span id="cb889-5"><a href="análisis-de-datos-con-python.html#cb889-5" aria-hidden="true" tabindex="-1"></a>                         values<span class="op">=</span>[<span class="st">&quot;gdpPercap&quot;</span>], </span>
<span id="cb889-6"><a href="análisis-de-datos-con-python.html#cb889-6" aria-hidden="true" tabindex="-1"></a>                         index<span class="op">=</span>[<span class="st">&quot;year&quot;</span>], </span>
<span id="cb889-7"><a href="análisis-de-datos-con-python.html#cb889-7" aria-hidden="true" tabindex="-1"></a>                         columns<span class="op">=</span><span class="st">&quot;country&quot;</span> )</span>
<span id="cb889-8"><a href="análisis-de-datos-con-python.html#cb889-8" aria-hidden="true" tabindex="-1"></a>df_sur2.head()</span>
<span id="cb889-9"><a href="análisis-de-datos-con-python.html#cb889-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-10"><a href="análisis-de-datos-con-python.html#cb889-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Importamos la librería</span></span>
<span id="cb889-11"><a href="análisis-de-datos-con-python.html#cb889-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb889-12"><a href="análisis-de-datos-con-python.html#cb889-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-13"><a href="análisis-de-datos-con-python.html#cb889-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos figura</span></span>
<span id="cb889-14"><a href="análisis-de-datos-con-python.html#cb889-14" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb889-15"><a href="análisis-de-datos-con-python.html#cb889-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Primer plot</span></span>
<span id="cb889-16"><a href="análisis-de-datos-con-python.html#cb889-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-17"><a href="análisis-de-datos-con-python.html#cb889-17" aria-hidden="true" tabindex="-1"></a><span class="co">#go.Scatter(x=variable_x, y=variable_y)</span></span>
<span id="cb889-18"><a href="análisis-de-datos-con-python.html#cb889-18" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(x<span class="op">=</span>df_sur2.index, y<span class="op">=</span>df_sur2.gdpPercap.Argentina,</span>
<span id="cb889-19"><a href="análisis-de-datos-con-python.html#cb889-19" aria-hidden="true" tabindex="-1"></a>                    mode<span class="op">=</span><span class="st">&#39;lines&#39;</span>,</span>
<span id="cb889-20"><a href="análisis-de-datos-con-python.html#cb889-20" aria-hidden="true" tabindex="-1"></a>                    name<span class="op">=</span><span class="st">&#39;Argentina&#39;</span>))</span>
<span id="cb889-21"><a href="análisis-de-datos-con-python.html#cb889-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-22"><a href="análisis-de-datos-con-python.html#cb889-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Segundo plot</span></span>
<span id="cb889-23"><a href="análisis-de-datos-con-python.html#cb889-23" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(x<span class="op">=</span>df_sur2.index, y<span class="op">=</span>df_sur2.gdpPercap.Chile,</span>
<span id="cb889-24"><a href="análisis-de-datos-con-python.html#cb889-24" aria-hidden="true" tabindex="-1"></a>                    mode<span class="op">=</span><span class="st">&#39;lines+markers&#39;</span>,</span>
<span id="cb889-25"><a href="análisis-de-datos-con-python.html#cb889-25" aria-hidden="true" tabindex="-1"></a>                    name<span class="op">=</span><span class="st">&#39;Chile&#39;</span>))</span>
<span id="cb889-26"><a href="análisis-de-datos-con-python.html#cb889-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-27"><a href="análisis-de-datos-con-python.html#cb889-27" aria-hidden="true" tabindex="-1"></a><span class="co"># #Tercer plot</span></span>
<span id="cb889-28"><a href="análisis-de-datos-con-python.html#cb889-28" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(x<span class="op">=</span>df_sur2.index, y<span class="op">=</span>df_sur2.gdpPercap.Uruguay,</span>
<span id="cb889-29"><a href="análisis-de-datos-con-python.html#cb889-29" aria-hidden="true" tabindex="-1"></a>                    mode<span class="op">=</span><span class="st">&#39;markers&#39;</span>, name<span class="op">=</span><span class="st">&#39;Uruguay&#39;</span>))</span>
<span id="cb889-30"><a href="análisis-de-datos-con-python.html#cb889-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb889-31"><a href="análisis-de-datos-con-python.html#cb889-31" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="grafico-de-puntos" class="section level4 hasAnchor" number="4.8.5.3">
<h4><span class="header-section-number">4.8.5.3</span> Grafico de puntos<a href="análisis-de-datos-con-python.html#grafico-de-puntos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb890"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb890-1"><a href="análisis-de-datos-con-python.html#cb890-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Definimos el tipo gráfico</span></span>
<span id="cb890-2"><a href="análisis-de-datos-con-python.html#cb890-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter(df_sur, x<span class="op">=</span><span class="st">&quot;gdpPercap&quot;</span>, y<span class="op">=</span><span class="st">&quot;lifeExp&quot;</span>, color <span class="op">=</span> <span class="st">&quot;country&quot;</span>)</span>
<span id="cb890-3"><a href="análisis-de-datos-con-python.html#cb890-3" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
<ul>
<li>Podemos agregar una tercera dimensión, representada en el tamaño de la burbuja. Para esto usamos el argumento size y podemos transformlo en un gráfico de burbujas.</li>
</ul>
<div class="sourceCode" id="cb891"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb891-1"><a href="análisis-de-datos-con-python.html#cb891-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Definimos el tipo gráfico</span></span>
<span id="cb891-2"><a href="análisis-de-datos-con-python.html#cb891-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter(df_sur, x<span class="op">=</span><span class="st">&quot;gdpPercap&quot;</span>, y<span class="op">=</span><span class="st">&quot;lifeExp&quot;</span>, color <span class="op">=</span> <span class="st">&quot;country&quot;</span>, size<span class="op">=</span><span class="st">&quot;pop&quot;</span>)</span>
<span id="cb891-3"><a href="análisis-de-datos-con-python.html#cb891-3" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
<ul>
<li>Otro ejemplo es agregar una escala de colores para resaltar una categoría</li>
</ul>
<div class="sourceCode" id="cb892"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb892-1"><a href="análisis-de-datos-con-python.html#cb892-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb892-2"><a href="análisis-de-datos-con-python.html#cb892-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb892-3"><a href="análisis-de-datos-con-python.html#cb892-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-4"><a href="análisis-de-datos-con-python.html#cb892-4" aria-hidden="true" tabindex="-1"></a>df_chile <span class="op">=</span> df[(df.country<span class="op">==</span><span class="st">&quot;Chile&quot;</span>)]</span>
<span id="cb892-5"><a href="análisis-de-datos-con-python.html#cb892-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-6"><a href="análisis-de-datos-con-python.html#cb892-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>go.Scatter(</span>
<span id="cb892-7"><a href="análisis-de-datos-con-python.html#cb892-7" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> df_chile.gdpPercap,</span>
<span id="cb892-8"><a href="análisis-de-datos-con-python.html#cb892-8" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> df_chile.lifeExp,</span>
<span id="cb892-9"><a href="análisis-de-datos-con-python.html#cb892-9" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span><span class="st">&#39;markers&#39;</span>,</span>
<span id="cb892-10"><a href="análisis-de-datos-con-python.html#cb892-10" aria-hidden="true" tabindex="-1"></a>    marker<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb892-11"><a href="análisis-de-datos-con-python.html#cb892-11" aria-hidden="true" tabindex="-1"></a>        size<span class="op">=</span><span class="dv">16</span>,</span>
<span id="cb892-12"><a href="análisis-de-datos-con-python.html#cb892-12" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span>df_chile.lifeExp, <span class="co">#set color equal to a variable</span></span>
<span id="cb892-13"><a href="análisis-de-datos-con-python.html#cb892-13" aria-hidden="true" tabindex="-1"></a>        colorscale<span class="op">=</span><span class="st">&#39;Viridis&#39;</span>, <span class="co"># one of plotly colorscales</span></span>
<span id="cb892-14"><a href="análisis-de-datos-con-python.html#cb892-14" aria-hidden="true" tabindex="-1"></a>        showscale<span class="op">=</span><span class="va">True</span></span>
<span id="cb892-15"><a href="análisis-de-datos-con-python.html#cb892-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb892-16"><a href="análisis-de-datos-con-python.html#cb892-16" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb892-17"><a href="análisis-de-datos-con-python.html#cb892-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-18"><a href="análisis-de-datos-con-python.html#cb892-18" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb892-19"><a href="análisis-de-datos-con-python.html#cb892-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-20"><a href="análisis-de-datos-con-python.html#cb892-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb892-21"><a href="análisis-de-datos-con-python.html#cb892-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-22"><a href="análisis-de-datos-con-python.html#cb892-22" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder().query(<span class="st">&quot;year==2007 and continent==&#39;Americas&#39;&quot;</span>)</span>
<span id="cb892-23"><a href="análisis-de-datos-con-python.html#cb892-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-24"><a href="análisis-de-datos-con-python.html#cb892-24" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter(df, x<span class="op">=</span><span class="st">&quot;gdpPercap&quot;</span>, </span>
<span id="cb892-25"><a href="análisis-de-datos-con-python.html#cb892-25" aria-hidden="true" tabindex="-1"></a>                 y<span class="op">=</span><span class="st">&quot;lifeExp&quot;</span>, </span>
<span id="cb892-26"><a href="análisis-de-datos-con-python.html#cb892-26" aria-hidden="true" tabindex="-1"></a>                 text<span class="op">=</span><span class="st">&quot;country&quot;</span>, </span>
<span id="cb892-27"><a href="análisis-de-datos-con-python.html#cb892-27" aria-hidden="true" tabindex="-1"></a>                 log_x<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb892-28"><a href="análisis-de-datos-con-python.html#cb892-28" aria-hidden="true" tabindex="-1"></a>                 size_max<span class="op">=</span><span class="dv">60</span>)</span>
<span id="cb892-29"><a href="análisis-de-datos-con-python.html#cb892-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-30"><a href="análisis-de-datos-con-python.html#cb892-30" aria-hidden="true" tabindex="-1"></a>fig.update_traces(textposition<span class="op">=</span><span class="st">&#39;top center&#39;</span>)</span>
<span id="cb892-31"><a href="análisis-de-datos-con-python.html#cb892-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-32"><a href="análisis-de-datos-con-python.html#cb892-32" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb892-33"><a href="análisis-de-datos-con-python.html#cb892-33" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">800</span>,</span>
<span id="cb892-34"><a href="análisis-de-datos-con-python.html#cb892-34" aria-hidden="true" tabindex="-1"></a>    title_text<span class="op">=</span><span class="st">&#39;GDP and Life Expectancy (Americas, 2007)&#39;</span></span>
<span id="cb892-35"><a href="análisis-de-datos-con-python.html#cb892-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb892-36"><a href="análisis-de-datos-con-python.html#cb892-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb892-37"><a href="análisis-de-datos-con-python.html#cb892-37" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="grafico-de-barras" class="section level4 hasAnchor" number="4.8.5.4">
<h4><span class="header-section-number">4.8.5.4</span> Grafico de barras<a href="análisis-de-datos-con-python.html#grafico-de-barras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb893"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb893-1"><a href="análisis-de-datos-con-python.html#cb893-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(df_chile, x<span class="op">=</span><span class="st">&#39;year&#39;</span>, y<span class="op">=</span><span class="st">&#39;pop&#39;</span>)</span>
<span id="cb893-2"><a href="análisis-de-datos-con-python.html#cb893-2" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb893-3"><a href="análisis-de-datos-con-python.html#cb893-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb893-4"><a href="análisis-de-datos-con-python.html#cb893-4" aria-hidden="true" tabindex="-1"></a>df_total <span class="op">=</span> px.data.gapminder()</span>
<span id="cb893-5"><a href="análisis-de-datos-con-python.html#cb893-5" aria-hidden="true" tabindex="-1"></a>df_2007 <span class="op">=</span> df_total[df_total.year<span class="op">==</span><span class="dv">2007</span>]</span>
<span id="cb893-6"><a href="análisis-de-datos-con-python.html#cb893-6" aria-hidden="true" tabindex="-1"></a>df_2007.head()</span>
<span id="cb893-7"><a href="análisis-de-datos-con-python.html#cb893-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb893-8"><a href="análisis-de-datos-con-python.html#cb893-8" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(df_2007, </span>
<span id="cb893-9"><a href="análisis-de-datos-con-python.html#cb893-9" aria-hidden="true" tabindex="-1"></a>             x<span class="op">=</span><span class="st">&quot;continent&quot;</span>, </span>
<span id="cb893-10"><a href="análisis-de-datos-con-python.html#cb893-10" aria-hidden="true" tabindex="-1"></a>             y<span class="op">=</span><span class="st">&quot;pop&quot;</span>, </span>
<span id="cb893-11"><a href="análisis-de-datos-con-python.html#cb893-11" aria-hidden="true" tabindex="-1"></a>             title<span class="op">=</span><span class="st">&quot;Wide-Form Input&quot;</span>)</span>
<span id="cb893-12"><a href="análisis-de-datos-con-python.html#cb893-12" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="grafico-de-torta" class="section level4 hasAnchor" number="4.8.5.5">
<h4><span class="header-section-number">4.8.5.5</span> Grafico de torta<a href="análisis-de-datos-con-python.html#grafico-de-torta" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb894"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb894-1"><a href="análisis-de-datos-con-python.html#cb894-1" aria-hidden="true" tabindex="-1"></a>df.loc[df[<span class="st">&#39;pop&#39;</span>] <span class="op">&lt;</span> <span class="fl">8.e6</span>, <span class="st">&#39;country&#39;</span>] <span class="op">=</span> <span class="st">&#39;Other countries&#39;</span> <span class="co"># Represent only large countries</span></span>
<span id="cb894-2"><a href="análisis-de-datos-con-python.html#cb894-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.pie(df, values<span class="op">=</span><span class="st">&#39;pop&#39;</span>, </span>
<span id="cb894-3"><a href="análisis-de-datos-con-python.html#cb894-3" aria-hidden="true" tabindex="-1"></a>             names<span class="op">=</span><span class="st">&#39;country&#39;</span>, </span>
<span id="cb894-4"><a href="análisis-de-datos-con-python.html#cb894-4" aria-hidden="true" tabindex="-1"></a>             title<span class="op">=</span><span class="st">&#39;Población en América&#39;</span>)</span>
<span id="cb894-5"><a href="análisis-de-datos-con-python.html#cb894-5" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="animación" class="section level4 hasAnchor" number="4.8.5.6">
<h4><span class="header-section-number">4.8.5.6</span> Animación<a href="análisis-de-datos-con-python.html#animación" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb895"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb895-1"><a href="análisis-de-datos-con-python.html#cb895-1" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb895-2"><a href="análisis-de-datos-con-python.html#cb895-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb895-3"><a href="análisis-de-datos-con-python.html#cb895-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb895-4"><a href="análisis-de-datos-con-python.html#cb895-4" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder()</span>
<span id="cb895-5"><a href="análisis-de-datos-con-python.html#cb895-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb895-6"><a href="análisis-de-datos-con-python.html#cb895-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter(df, x<span class="op">=</span><span class="st">&quot;gdpPercap&quot;</span>, y<span class="op">=</span><span class="st">&quot;lifeExp&quot;</span>, </span>
<span id="cb895-7"><a href="análisis-de-datos-con-python.html#cb895-7" aria-hidden="true" tabindex="-1"></a>                 animation_frame<span class="op">=</span><span class="st">&quot;year&quot;</span>, </span>
<span id="cb895-8"><a href="análisis-de-datos-con-python.html#cb895-8" aria-hidden="true" tabindex="-1"></a>                 animation_group<span class="op">=</span><span class="st">&quot;country&quot;</span>,</span>
<span id="cb895-9"><a href="análisis-de-datos-con-python.html#cb895-9" aria-hidden="true" tabindex="-1"></a>                 size<span class="op">=</span><span class="st">&quot;pop&quot;</span>, </span>
<span id="cb895-10"><a href="análisis-de-datos-con-python.html#cb895-10" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span><span class="st">&quot;continent&quot;</span>, </span>
<span id="cb895-11"><a href="análisis-de-datos-con-python.html#cb895-11" aria-hidden="true" tabindex="-1"></a>                 hover_name<span class="op">=</span><span class="st">&quot;country&quot;</span>, </span>
<span id="cb895-12"><a href="análisis-de-datos-con-python.html#cb895-12" aria-hidden="true" tabindex="-1"></a>                 facet_col<span class="op">=</span><span class="st">&quot;continent&quot;</span>,</span>
<span id="cb895-13"><a href="análisis-de-datos-con-python.html#cb895-13" aria-hidden="true" tabindex="-1"></a>                 log_x<span class="op">=</span><span class="va">True</span>, size_max<span class="op">=</span><span class="dv">45</span>, </span>
<span id="cb895-14"><a href="análisis-de-datos-con-python.html#cb895-14" aria-hidden="true" tabindex="-1"></a>                 range_x<span class="op">=</span>[<span class="dv">100</span>,<span class="dv">100000</span>], </span>
<span id="cb895-15"><a href="análisis-de-datos-con-python.html#cb895-15" aria-hidden="true" tabindex="-1"></a>                 range_y<span class="op">=</span>[<span class="dv">25</span>,<span class="dv">90</span>]</span>
<span id="cb895-16"><a href="análisis-de-datos-con-python.html#cb895-16" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb895-17"><a href="análisis-de-datos-con-python.html#cb895-17" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb895-18"><a href="análisis-de-datos-con-python.html#cb895-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb895-19"><a href="análisis-de-datos-con-python.html#cb895-19" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(df, x<span class="op">=</span><span class="st">&quot;continent&quot;</span>, y<span class="op">=</span><span class="st">&quot;pop&quot;</span>, </span>
<span id="cb895-20"><a href="análisis-de-datos-con-python.html#cb895-20" aria-hidden="true" tabindex="-1"></a>             color<span class="op">=</span><span class="st">&quot;continent&quot;</span>,</span>
<span id="cb895-21"><a href="análisis-de-datos-con-python.html#cb895-21" aria-hidden="true" tabindex="-1"></a>             animation_frame<span class="op">=</span><span class="st">&quot;year&quot;</span>, </span>
<span id="cb895-22"><a href="análisis-de-datos-con-python.html#cb895-22" aria-hidden="true" tabindex="-1"></a>             animation_group<span class="op">=</span><span class="st">&quot;country&quot;</span>, </span>
<span id="cb895-23"><a href="análisis-de-datos-con-python.html#cb895-23" aria-hidden="true" tabindex="-1"></a>             range_y<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">4000000000</span>])</span>
<span id="cb895-24"><a href="análisis-de-datos-con-python.html#cb895-24" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="mapas-de-calor" class="section level4 hasAnchor" number="4.8.5.7">
<h4><span class="header-section-number">4.8.5.7</span> Mapas de calor<a href="análisis-de-datos-con-python.html#mapas-de-calor" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb896"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb896-1"><a href="análisis-de-datos-con-python.html#cb896-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder().query(<span class="st">&quot;continent==&#39;Americas&#39;&quot;</span>)</span>
<span id="cb896-2"><a href="análisis-de-datos-con-python.html#cb896-2" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb896-3"><a href="análisis-de-datos-con-python.html#cb896-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb896-4"><a href="análisis-de-datos-con-python.html#cb896-4" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>go.Heatmap(</span>
<span id="cb896-5"><a href="análisis-de-datos-con-python.html#cb896-5" aria-hidden="true" tabindex="-1"></a>        z<span class="op">=</span>df.lifeExp,</span>
<span id="cb896-6"><a href="análisis-de-datos-con-python.html#cb896-6" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>df.year,</span>
<span id="cb896-7"><a href="análisis-de-datos-con-python.html#cb896-7" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>df.country,</span>
<span id="cb896-8"><a href="análisis-de-datos-con-python.html#cb896-8" aria-hidden="true" tabindex="-1"></a>        colorscale<span class="op">=</span><span class="st">&#39;Viridis&#39;</span></span>
<span id="cb896-9"><a href="análisis-de-datos-con-python.html#cb896-9" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb896-10"><a href="análisis-de-datos-con-python.html#cb896-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb896-11"><a href="análisis-de-datos-con-python.html#cb896-11" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb896-12"><a href="análisis-de-datos-con-python.html#cb896-12" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">&#39;Expectativa de vida&#39;</span>,</span>
<span id="cb896-13"><a href="análisis-de-datos-con-python.html#cb896-13" aria-hidden="true" tabindex="-1"></a>    xaxis_nticks<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb896-14"><a href="análisis-de-datos-con-python.html#cb896-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb896-15"><a href="análisis-de-datos-con-python.html#cb896-15" aria-hidden="true" tabindex="-1"></a>fig.update_layout(width<span class="op">=</span><span class="dv">750</span>, height<span class="op">=</span><span class="dv">750</span>)</span>
<span id="cb896-16"><a href="análisis-de-datos-con-python.html#cb896-16" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="sunburst-charts" class="section level4 hasAnchor" number="4.8.5.8">
<h4><span class="header-section-number">4.8.5.8</span> Sunburst charts<a href="análisis-de-datos-con-python.html#sunburst-charts" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb897"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb897-1"><a href="análisis-de-datos-con-python.html#cb897-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb897-2"><a href="análisis-de-datos-con-python.html#cb897-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb897-3"><a href="análisis-de-datos-con-python.html#cb897-3" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder().query(<span class="st">&quot;year == 2007&quot;</span>)</span>
<span id="cb897-4"><a href="análisis-de-datos-con-python.html#cb897-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb897-5"><a href="análisis-de-datos-con-python.html#cb897-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb897-6"><a href="análisis-de-datos-con-python.html#cb897-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.sunburst(df, path<span class="op">=</span>[<span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>], values<span class="op">=</span><span class="st">&#39;pop&#39;</span>, color<span class="op">=</span><span class="st">&#39;lifeExp&#39;</span>,</span>
<span id="cb897-7"><a href="análisis-de-datos-con-python.html#cb897-7" aria-hidden="true" tabindex="-1"></a>                  hover_data<span class="op">=</span>[<span class="st">&#39;iso_alpha&#39;</span>])</span>
<span id="cb897-8"><a href="análisis-de-datos-con-python.html#cb897-8" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="treemap" class="section level4 hasAnchor" number="4.8.5.9">
<h4><span class="header-section-number">4.8.5.9</span> Treemap<a href="análisis-de-datos-con-python.html#treemap" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb898"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb898-1"><a href="análisis-de-datos-con-python.html#cb898-1" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb898-2"><a href="análisis-de-datos-con-python.html#cb898-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb898-3"><a href="análisis-de-datos-con-python.html#cb898-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb898-4"><a href="análisis-de-datos-con-python.html#cb898-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb898-5"><a href="análisis-de-datos-con-python.html#cb898-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder().query(<span class="st">&quot;year == 2007&quot;</span>)</span>
<span id="cb898-6"><a href="análisis-de-datos-con-python.html#cb898-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb898-7"><a href="análisis-de-datos-con-python.html#cb898-7" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.treemap(df, path<span class="op">=</span>[px.Constant(<span class="st">&#39;world&#39;</span>), <span class="st">&#39;continent&#39;</span>, <span class="st">&#39;country&#39;</span>], values<span class="op">=</span><span class="st">&#39;pop&#39;</span>,  </span>
<span id="cb898-8"><a href="análisis-de-datos-con-python.html#cb898-8" aria-hidden="true" tabindex="-1"></a>                  hover_data<span class="op">=</span>[<span class="st">&#39;iso_alpha&#39;</span>])</span>
<span id="cb898-9"><a href="análisis-de-datos-con-python.html#cb898-9" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="histograma-2" class="section level4 hasAnchor" number="4.8.5.10">
<h4><span class="header-section-number">4.8.5.10</span> Histograma<a href="análisis-de-datos-con-python.html#histograma-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb899"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb899-1"><a href="análisis-de-datos-con-python.html#cb899-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb899-2"><a href="análisis-de-datos-con-python.html#cb899-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.tips()</span>
<span id="cb899-3"><a href="análisis-de-datos-con-python.html#cb899-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.histogram(df, x<span class="op">=</span><span class="st">&quot;total_bill&quot;</span>, y<span class="op">=</span><span class="st">&quot;tip&quot;</span>, color<span class="op">=</span><span class="st">&quot;sex&quot;</span>, marginal<span class="op">=</span><span class="st">&quot;rug&quot;</span>, hover_data<span class="op">=</span>df.columns)</span>
<span id="cb899-4"><a href="análisis-de-datos-con-python.html#cb899-4" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="caja-y-bigote" class="section level4 hasAnchor" number="4.8.5.11">
<h4><span class="header-section-number">4.8.5.11</span> Caja y bigote<a href="análisis-de-datos-con-python.html#caja-y-bigote" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb900"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb900-1"><a href="análisis-de-datos-con-python.html#cb900-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb900-2"><a href="análisis-de-datos-con-python.html#cb900-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.tips()</span>
<span id="cb900-3"><a href="análisis-de-datos-con-python.html#cb900-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.box(df, x<span class="op">=</span><span class="st">&quot;day&quot;</span>, y<span class="op">=</span><span class="st">&quot;total_bill&quot;</span>, color<span class="op">=</span><span class="st">&quot;smoker&quot;</span>, notched<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb900-4"><a href="análisis-de-datos-con-python.html#cb900-4" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="mapas" class="section level4 hasAnchor" number="4.8.5.12">
<h4><span class="header-section-number">4.8.5.12</span> Mapas<a href="análisis-de-datos-con-python.html#mapas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Un mapa Choropleth es un mapa compuesto por polígonos de colores.</li>
<li>Se utiliza para representar las variaciones espaciales de una
cantidad.</li>
<li>Vamos a utilizar la función px.choropleth_mapbox</li>
<li>Los principales parámetros de una mapa son:
<ul>
<li>GeoJson- formatted: información geometrica donde cada caracteristica tiene un id o identificador que es posible mapear</li>
<li>Lista de valores indexados al ID.</li>
</ul></li>
<li>Vamos a cargar un archivo GeoJSON que contiene información geometrica
para los condados en Estados Unidos.</li>
</ul>
<div class="sourceCode" id="cb901"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb901-1"><a href="análisis-de-datos-con-python.html#cb901-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb901-2"><a href="análisis-de-datos-con-python.html#cb901-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb901-3"><a href="análisis-de-datos-con-python.html#cb901-3" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> urlopen(<span class="st">&#39;https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json&#39;</span>) <span class="im">as</span> response:</span>
<span id="cb901-4"><a href="análisis-de-datos-con-python.html#cb901-4" aria-hidden="true" tabindex="-1"></a>    counties <span class="op">=</span> json.load(response)</span>
<span id="cb901-5"><a href="análisis-de-datos-con-python.html#cb901-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-6"><a href="análisis-de-datos-con-python.html#cb901-6" aria-hidden="true" tabindex="-1"></a>counties[<span class="st">&quot;features&quot;</span>][<span class="dv">0</span>]</span>
<span id="cb901-7"><a href="análisis-de-datos-con-python.html#cb901-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-8"><a href="análisis-de-datos-con-python.html#cb901-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb901-9"><a href="análisis-de-datos-con-python.html#cb901-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&quot;https://raw.githubusercontent.com/plotly/datasets/master/fips-unemp-16.csv&quot;</span>,</span>
<span id="cb901-10"><a href="análisis-de-datos-con-python.html#cb901-10" aria-hidden="true" tabindex="-1"></a>                   dtype<span class="op">=</span>{<span class="st">&quot;fips&quot;</span>: <span class="bu">str</span>})</span>
<span id="cb901-11"><a href="análisis-de-datos-con-python.html#cb901-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-12"><a href="análisis-de-datos-con-python.html#cb901-12" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb901-13"><a href="análisis-de-datos-con-python.html#cb901-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-14"><a href="análisis-de-datos-con-python.html#cb901-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb901-15"><a href="análisis-de-datos-con-python.html#cb901-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-16"><a href="análisis-de-datos-con-python.html#cb901-16" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.choropleth_mapbox(df, geojson<span class="op">=</span>counties, locations<span class="op">=</span><span class="st">&#39;fips&#39;</span>, color<span class="op">=</span><span class="st">&#39;unemp&#39;</span>,</span>
<span id="cb901-17"><a href="análisis-de-datos-con-python.html#cb901-17" aria-hidden="true" tabindex="-1"></a>                           color_continuous_scale<span class="op">=</span><span class="st">&quot;Viridis&quot;</span>,</span>
<span id="cb901-18"><a href="análisis-de-datos-con-python.html#cb901-18" aria-hidden="true" tabindex="-1"></a>                           range_color<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">12</span>),</span>
<span id="cb901-19"><a href="análisis-de-datos-con-python.html#cb901-19" aria-hidden="true" tabindex="-1"></a>                           mapbox_style<span class="op">=</span><span class="st">&quot;carto-positron&quot;</span>,</span>
<span id="cb901-20"><a href="análisis-de-datos-con-python.html#cb901-20" aria-hidden="true" tabindex="-1"></a>                           zoom<span class="op">=</span><span class="dv">3</span>, center <span class="op">=</span> {<span class="st">&quot;lat&quot;</span>: <span class="fl">37.0902</span>, <span class="st">&quot;lon&quot;</span>: <span class="op">-</span><span class="fl">95.7129</span>},</span>
<span id="cb901-21"><a href="análisis-de-datos-con-python.html#cb901-21" aria-hidden="true" tabindex="-1"></a>                           opacity<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb901-22"><a href="análisis-de-datos-con-python.html#cb901-22" aria-hidden="true" tabindex="-1"></a>                           labels<span class="op">=</span>{<span class="st">&#39;unemp&#39;</span>:<span class="st">&#39;unemployment rate&#39;</span>}</span>
<span id="cb901-23"><a href="análisis-de-datos-con-python.html#cb901-23" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb901-24"><a href="análisis-de-datos-con-python.html#cb901-24" aria-hidden="true" tabindex="-1"></a>fig.update_layout(margin<span class="op">=</span>{<span class="st">&quot;r&quot;</span>:<span class="dv">0</span>,<span class="st">&quot;t&quot;</span>:<span class="dv">0</span>,<span class="st">&quot;l&quot;</span>:<span class="dv">0</span>,<span class="st">&quot;b&quot;</span>:<span class="dv">0</span>})</span>
<span id="cb901-25"><a href="análisis-de-datos-con-python.html#cb901-25" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="mapas-de-puntos" class="section level4 hasAnchor" number="4.8.5.13">
<h4><span class="header-section-number">4.8.5.13</span> Mapas de puntos<a href="análisis-de-datos-con-python.html#mapas-de-puntos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb902"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb902-1"><a href="análisis-de-datos-con-python.html#cb902-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb902-2"><a href="análisis-de-datos-con-python.html#cb902-2" aria-hidden="true" tabindex="-1"></a>us_cities <span class="op">=</span> pd.read_csv(<span class="st">&quot;https://raw.githubusercontent.com/plotly/datasets/master/us-cities-top-1k.csv&quot;</span>)</span>
<span id="cb902-3"><a href="análisis-de-datos-con-python.html#cb902-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-4"><a href="análisis-de-datos-con-python.html#cb902-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb902-5"><a href="análisis-de-datos-con-python.html#cb902-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb902-6"><a href="análisis-de-datos-con-python.html#cb902-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_mapbox(us_cities, lat<span class="op">=</span><span class="st">&quot;lat&quot;</span>, lon<span class="op">=</span><span class="st">&quot;lon&quot;</span>, hover_name<span class="op">=</span><span class="st">&quot;City&quot;</span>, hover_data<span class="op">=</span>[<span class="st">&quot;State&quot;</span>, <span class="st">&quot;Population&quot;</span>],</span>
<span id="cb902-7"><a href="análisis-de-datos-con-python.html#cb902-7" aria-hidden="true" tabindex="-1"></a>                        color_discrete_sequence<span class="op">=</span>[<span class="st">&quot;fuchsia&quot;</span>], zoom<span class="op">=</span><span class="dv">3</span>, height<span class="op">=</span><span class="dv">300</span>)</span>
<span id="cb902-8"><a href="análisis-de-datos-con-python.html#cb902-8" aria-hidden="true" tabindex="-1"></a>fig.update_layout(mapbox_style<span class="op">=</span><span class="st">&quot;open-street-map&quot;</span>)</span>
<span id="cb902-9"><a href="análisis-de-datos-con-python.html#cb902-9" aria-hidden="true" tabindex="-1"></a>fig.update_layout(margin<span class="op">=</span>{<span class="st">&quot;r&quot;</span>:<span class="dv">0</span>,<span class="st">&quot;t&quot;</span>:<span class="dv">0</span>,<span class="st">&quot;l&quot;</span>:<span class="dv">0</span>,<span class="st">&quot;b&quot;</span>:<span class="dv">0</span>})</span>
<span id="cb902-10"><a href="análisis-de-datos-con-python.html#cb902-10" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
<div id="mapas-de-burbujas" class="section level4 hasAnchor" number="4.8.5.14">
<h4><span class="header-section-number">4.8.5.14</span> Mapas de burbujas<a href="análisis-de-datos-con-python.html#mapas-de-burbujas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb903"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb903-1"><a href="análisis-de-datos-con-python.html#cb903-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder().query(<span class="st">&quot;year==2007&quot;</span>)</span>
<span id="cb903-2"><a href="análisis-de-datos-con-python.html#cb903-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_geo(df, locations<span class="op">=</span><span class="st">&quot;iso_alpha&quot;</span>, color<span class="op">=</span><span class="st">&quot;continent&quot;</span>,</span>
<span id="cb903-3"><a href="análisis-de-datos-con-python.html#cb903-3" aria-hidden="true" tabindex="-1"></a>                     hover_name<span class="op">=</span><span class="st">&quot;country&quot;</span>, size<span class="op">=</span><span class="st">&quot;pop&quot;</span>,</span>
<span id="cb903-4"><a href="análisis-de-datos-con-python.html#cb903-4" aria-hidden="true" tabindex="-1"></a>                     projection<span class="op">=</span><span class="st">&quot;natural earth&quot;</span>)</span>
<span id="cb903-5"><a href="análisis-de-datos-con-python.html#cb903-5" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb903-6"><a href="análisis-de-datos-con-python.html#cb903-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-7"><a href="análisis-de-datos-con-python.html#cb903-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb903-8"><a href="análisis-de-datos-con-python.html#cb903-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> px.data.gapminder()</span>
<span id="cb903-9"><a href="análisis-de-datos-con-python.html#cb903-9" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_geo(df, locations<span class="op">=</span><span class="st">&quot;iso_alpha&quot;</span>, color<span class="op">=</span><span class="st">&quot;continent&quot;</span>,</span>
<span id="cb903-10"><a href="análisis-de-datos-con-python.html#cb903-10" aria-hidden="true" tabindex="-1"></a>                     hover_name<span class="op">=</span><span class="st">&quot;country&quot;</span>, size<span class="op">=</span><span class="st">&quot;pop&quot;</span>,</span>
<span id="cb903-11"><a href="análisis-de-datos-con-python.html#cb903-11" aria-hidden="true" tabindex="-1"></a>                     animation_frame<span class="op">=</span><span class="st">&quot;year&quot;</span>,</span>
<span id="cb903-12"><a href="análisis-de-datos-con-python.html#cb903-12" aria-hidden="true" tabindex="-1"></a>                     projection<span class="op">=</span><span class="st">&quot;natural earth&quot;</span>)</span>
<span id="cb903-13"><a href="análisis-de-datos-con-python.html#cb903-13" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb903-14"><a href="análisis-de-datos-con-python.html#cb903-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-15"><a href="análisis-de-datos-con-python.html#cb903-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb903-16"><a href="análisis-de-datos-con-python.html#cb903-16" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">&#39;https://raw.githubusercontent.com/plotly/datasets/master/2014_us_cities.csv&#39;</span>)</span>
<span id="cb903-17"><a href="análisis-de-datos-con-python.html#cb903-17" aria-hidden="true" tabindex="-1"></a>df.head()</span>
<span id="cb903-18"><a href="análisis-de-datos-con-python.html#cb903-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-19"><a href="análisis-de-datos-con-python.html#cb903-19" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;text&#39;</span>] <span class="op">=</span> df[<span class="st">&#39;name&#39;</span>] <span class="op">+</span> <span class="st">&#39;&lt;br&gt;Population &#39;</span> <span class="op">+</span> (df[<span class="st">&#39;pop&#39;</span>]<span class="op">/</span><span class="fl">1e6</span>).astype(<span class="bu">str</span>)<span class="op">+</span><span class="st">&#39; million&#39;</span></span>
<span id="cb903-20"><a href="análisis-de-datos-con-python.html#cb903-20" aria-hidden="true" tabindex="-1"></a>limits <span class="op">=</span> [(<span class="dv">0</span>,<span class="dv">2</span>),(<span class="dv">3</span>,<span class="dv">10</span>),(<span class="dv">11</span>,<span class="dv">20</span>),(<span class="dv">21</span>,<span class="dv">50</span>),(<span class="dv">50</span>,<span class="dv">3000</span>)]</span>
<span id="cb903-21"><a href="análisis-de-datos-con-python.html#cb903-21" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> [<span class="st">&quot;royalblue&quot;</span>,<span class="st">&quot;crimson&quot;</span>,<span class="st">&quot;lightseagreen&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;lightgrey&quot;</span>]</span>
<span id="cb903-22"><a href="análisis-de-datos-con-python.html#cb903-22" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> []</span>
<span id="cb903-23"><a href="análisis-de-datos-con-python.html#cb903-23" aria-hidden="true" tabindex="-1"></a>scale <span class="op">=</span> <span class="dv">5000</span></span>
<span id="cb903-24"><a href="análisis-de-datos-con-python.html#cb903-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-25"><a href="análisis-de-datos-con-python.html#cb903-25" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb903-26"><a href="análisis-de-datos-con-python.html#cb903-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-27"><a href="análisis-de-datos-con-python.html#cb903-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(limits)):</span>
<span id="cb903-28"><a href="análisis-de-datos-con-python.html#cb903-28" aria-hidden="true" tabindex="-1"></a>    lim <span class="op">=</span> limits[i]</span>
<span id="cb903-29"><a href="análisis-de-datos-con-python.html#cb903-29" aria-hidden="true" tabindex="-1"></a>    df_sub <span class="op">=</span> df[lim[<span class="dv">0</span>]:lim[<span class="dv">1</span>]]</span>
<span id="cb903-30"><a href="análisis-de-datos-con-python.html#cb903-30" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(go.Scattergeo(</span>
<span id="cb903-31"><a href="análisis-de-datos-con-python.html#cb903-31" aria-hidden="true" tabindex="-1"></a>        locationmode <span class="op">=</span> <span class="st">&#39;USA-states&#39;</span>,</span>
<span id="cb903-32"><a href="análisis-de-datos-con-python.html#cb903-32" aria-hidden="true" tabindex="-1"></a>        lon <span class="op">=</span> df_sub[<span class="st">&#39;lon&#39;</span>],</span>
<span id="cb903-33"><a href="análisis-de-datos-con-python.html#cb903-33" aria-hidden="true" tabindex="-1"></a>        lat <span class="op">=</span> df_sub[<span class="st">&#39;lat&#39;</span>],</span>
<span id="cb903-34"><a href="análisis-de-datos-con-python.html#cb903-34" aria-hidden="true" tabindex="-1"></a>        text <span class="op">=</span> df_sub[<span class="st">&#39;text&#39;</span>],</span>
<span id="cb903-35"><a href="análisis-de-datos-con-python.html#cb903-35" aria-hidden="true" tabindex="-1"></a>        marker <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb903-36"><a href="análisis-de-datos-con-python.html#cb903-36" aria-hidden="true" tabindex="-1"></a>            size <span class="op">=</span> df_sub[<span class="st">&#39;pop&#39;</span>]<span class="op">/</span>scale,</span>
<span id="cb903-37"><a href="análisis-de-datos-con-python.html#cb903-37" aria-hidden="true" tabindex="-1"></a>            color <span class="op">=</span> colors[i],</span>
<span id="cb903-38"><a href="análisis-de-datos-con-python.html#cb903-38" aria-hidden="true" tabindex="-1"></a>            line_color<span class="op">=</span><span class="st">&#39;rgb(40,40,40)&#39;</span>,</span>
<span id="cb903-39"><a href="análisis-de-datos-con-python.html#cb903-39" aria-hidden="true" tabindex="-1"></a>            line_width<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb903-40"><a href="análisis-de-datos-con-python.html#cb903-40" aria-hidden="true" tabindex="-1"></a>            sizemode <span class="op">=</span> <span class="st">&#39;area&#39;</span></span>
<span id="cb903-41"><a href="análisis-de-datos-con-python.html#cb903-41" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb903-42"><a href="análisis-de-datos-con-python.html#cb903-42" aria-hidden="true" tabindex="-1"></a>        name <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{0}</span><span class="st"> - </span><span class="sc">{1}</span><span class="st">&#39;</span>.<span class="bu">format</span>(lim[<span class="dv">0</span>],lim[<span class="dv">1</span>])))</span>
<span id="cb903-43"><a href="análisis-de-datos-con-python.html#cb903-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-44"><a href="análisis-de-datos-con-python.html#cb903-44" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb903-45"><a href="análisis-de-datos-con-python.html#cb903-45" aria-hidden="true" tabindex="-1"></a>        title_text <span class="op">=</span> <span class="st">&#39;2014 US city populations&lt;br&gt;(Click legend to toggle traces)&#39;</span>,</span>
<span id="cb903-46"><a href="análisis-de-datos-con-python.html#cb903-46" aria-hidden="true" tabindex="-1"></a>        showlegend <span class="op">=</span> <span class="va">True</span>,</span>
<span id="cb903-47"><a href="análisis-de-datos-con-python.html#cb903-47" aria-hidden="true" tabindex="-1"></a>        geo <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb903-48"><a href="análisis-de-datos-con-python.html#cb903-48" aria-hidden="true" tabindex="-1"></a>            scope <span class="op">=</span> <span class="st">&#39;usa&#39;</span>,</span>
<span id="cb903-49"><a href="análisis-de-datos-con-python.html#cb903-49" aria-hidden="true" tabindex="-1"></a>            landcolor <span class="op">=</span> <span class="st">&#39;rgb(217, 217, 217)&#39;</span>,</span>
<span id="cb903-50"><a href="análisis-de-datos-con-python.html#cb903-50" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb903-51"><a href="análisis-de-datos-con-python.html#cb903-51" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb903-52"><a href="análisis-de-datos-con-python.html#cb903-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb903-53"><a href="análisis-de-datos-con-python.html#cb903-53" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code></pre></div>
</div>
</div>
<div id="automatización-1" class="section level3 hasAnchor" number="4.8.6">
<h3><span class="header-section-number">4.8.6</span> Automatización<a href="análisis-de-datos-con-python.html#automatización-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb904"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb904-1"><a href="análisis-de-datos-con-python.html#cb904-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb904-2"><a href="análisis-de-datos-con-python.html#cb904-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openpyxl</span>
<span id="cb904-3"><a href="análisis-de-datos-con-python.html#cb904-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openpyxl <span class="im">import</span> load_workbook</span>
<span id="cb904-4"><a href="análisis-de-datos-con-python.html#cb904-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openpyxl.styles <span class="im">import</span> Font</span>
<span id="cb904-5"><a href="análisis-de-datos-con-python.html#cb904-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openpyxl.chart <span class="im">import</span> BarChart, Reference</span>
<span id="cb904-6"><a href="análisis-de-datos-con-python.html#cb904-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> string</span></code></pre></div>
<div id="tablas-ancha" class="section level4 hasAnchor" number="4.8.6.1">
<h4><span class="header-section-number">4.8.6.1</span> Tablas ancha<a href="análisis-de-datos-con-python.html#tablas-ancha" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb905"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb905-1"><a href="análisis-de-datos-con-python.html#cb905-1" aria-hidden="true" tabindex="-1"></a>excel_file <span class="op">=</span> pd.read_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">supermarket_sales.xlsx&#39;</span>)</span>
<span id="cb905-2"><a href="análisis-de-datos-con-python.html#cb905-2" aria-hidden="true" tabindex="-1"></a>excel_file[[<span class="st">&#39;Gender&#39;</span>, <span class="st">&#39;Product line&#39;</span>, <span class="st">&#39;Total&#39;</span>]]</span>
<span id="cb905-3"><a href="análisis-de-datos-con-python.html#cb905-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb905-4"><a href="análisis-de-datos-con-python.html#cb905-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Confeccionamos tabla</span></span>
<span id="cb905-5"><a href="análisis-de-datos-con-python.html#cb905-5" aria-hidden="true" tabindex="-1"></a>report_table <span class="op">=</span> excel_file.pivot_table(index<span class="op">=</span><span class="st">&#39;Gender&#39;</span>,</span>
<span id="cb905-6"><a href="análisis-de-datos-con-python.html#cb905-6" aria-hidden="true" tabindex="-1"></a>                                      columns<span class="op">=</span><span class="st">&#39;Product line&#39;</span>,</span>
<span id="cb905-7"><a href="análisis-de-datos-con-python.html#cb905-7" aria-hidden="true" tabindex="-1"></a>                                      values<span class="op">=</span><span class="st">&#39;Total&#39;</span>,</span>
<span id="cb905-8"><a href="análisis-de-datos-con-python.html#cb905-8" aria-hidden="true" tabindex="-1"></a>                                      aggfunc<span class="op">=</span><span class="st">&#39;sum&#39;</span>).<span class="bu">round</span>(<span class="dv">0</span>)</span>
<span id="cb905-9"><a href="análisis-de-datos-con-python.html#cb905-9" aria-hidden="true" tabindex="-1"></a>report_table</span>
<span id="cb905-10"><a href="análisis-de-datos-con-python.html#cb905-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb905-11"><a href="análisis-de-datos-con-python.html#cb905-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportamos tabla</span></span>
<span id="cb905-12"><a href="análisis-de-datos-con-python.html#cb905-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb905-13"><a href="análisis-de-datos-con-python.html#cb905-13" aria-hidden="true" tabindex="-1"></a>report_table.to_excel(<span class="st">&#39;report_2021.xlsx&#39;</span>,</span>
<span id="cb905-14"><a href="análisis-de-datos-con-python.html#cb905-14" aria-hidden="true" tabindex="-1"></a>                      sheet_name<span class="op">=</span><span class="st">&#39;Report&#39;</span>,</span>
<span id="cb905-15"><a href="análisis-de-datos-con-python.html#cb905-15" aria-hidden="true" tabindex="-1"></a>                      startrow<span class="op">=</span><span class="dv">4</span>)</span></code></pre></div>
</div>
<div id="hacer-el-reporte-con-openpyxl" class="section level4 hasAnchor" number="4.8.6.2">
<h4><span class="header-section-number">4.8.6.2</span> Hacer el reporte con Openpyxl<a href="análisis-de-datos-con-python.html#hacer-el-reporte-con-openpyxl" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Crear filas y columnas de referencia:</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb906-1"><a href="análisis-de-datos-con-python.html#cb906-1" aria-hidden="true" tabindex="-1"></a>wb <span class="op">=</span> load_workbook(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span>
<span id="cb906-2"><a href="análisis-de-datos-con-python.html#cb906-2" aria-hidden="true" tabindex="-1"></a>sheet <span class="op">=</span> wb[<span class="st">&#39;Report&#39;</span>]</span>
<span id="cb906-3"><a href="análisis-de-datos-con-python.html#cb906-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb906-4"><a href="análisis-de-datos-con-python.html#cb906-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Celdas de referencia </span></span>
<span id="cb906-5"><a href="análisis-de-datos-con-python.html#cb906-5" aria-hidden="true" tabindex="-1"></a>min_column <span class="op">=</span> wb.active.min_column</span>
<span id="cb906-6"><a href="análisis-de-datos-con-python.html#cb906-6" aria-hidden="true" tabindex="-1"></a>max_column <span class="op">=</span> wb.active.max_column</span>
<span id="cb906-7"><a href="análisis-de-datos-con-python.html#cb906-7" aria-hidden="true" tabindex="-1"></a>min_row <span class="op">=</span> wb.active.min_row</span>
<span id="cb906-8"><a href="análisis-de-datos-con-python.html#cb906-8" aria-hidden="true" tabindex="-1"></a>max_row <span class="op">=</span> wb.active.max_row</span>
<span id="cb906-9"><a href="análisis-de-datos-con-python.html#cb906-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb906-10"><a href="análisis-de-datos-con-python.html#cb906-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&#39;Min Columns: </span><span class="sc">{</span>min_column<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb906-11"><a href="análisis-de-datos-con-python.html#cb906-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&#39;Max Columns: </span><span class="sc">{</span>max_column<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb906-12"><a href="análisis-de-datos-con-python.html#cb906-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&#39;Min Rows: </span><span class="sc">{</span>min_row<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb906-13"><a href="análisis-de-datos-con-python.html#cb906-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&#39;Max Rows: </span><span class="sc">{</span>max_row<span class="sc">}</span><span class="ss">&#39;</span>)</span></code></pre></div>
<p>Añadir graficos:</p>
<div class="sourceCode" id="cb907"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb907-1"><a href="análisis-de-datos-con-python.html#cb907-1" aria-hidden="true" tabindex="-1"></a>wb <span class="op">=</span> load_workbook(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span>
<span id="cb907-2"><a href="análisis-de-datos-con-python.html#cb907-2" aria-hidden="true" tabindex="-1"></a>sheet <span class="op">=</span> wb[<span class="st">&#39;Report&#39;</span>]</span>
<span id="cb907-3"><a href="análisis-de-datos-con-python.html#cb907-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-4"><a href="análisis-de-datos-con-python.html#cb907-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Grafico de barras </span></span>
<span id="cb907-5"><a href="análisis-de-datos-con-python.html#cb907-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-6"><a href="análisis-de-datos-con-python.html#cb907-6" aria-hidden="true" tabindex="-1"></a>barchart <span class="op">=</span> BarChart()</span>
<span id="cb907-7"><a href="análisis-de-datos-con-python.html#cb907-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-8"><a href="análisis-de-datos-con-python.html#cb907-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Localizar datos y categorias </span></span>
<span id="cb907-9"><a href="análisis-de-datos-con-python.html#cb907-9" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> Reference(sheet,</span>
<span id="cb907-10"><a href="análisis-de-datos-con-python.html#cb907-10" aria-hidden="true" tabindex="-1"></a>                 min_col<span class="op">=</span>min_column<span class="op">+</span><span class="dv">1</span>,</span>
<span id="cb907-11"><a href="análisis-de-datos-con-python.html#cb907-11" aria-hidden="true" tabindex="-1"></a>                 max_col<span class="op">=</span>max_column,</span>
<span id="cb907-12"><a href="análisis-de-datos-con-python.html#cb907-12" aria-hidden="true" tabindex="-1"></a>                 min_row<span class="op">=</span>min_row,</span>
<span id="cb907-13"><a href="análisis-de-datos-con-python.html#cb907-13" aria-hidden="true" tabindex="-1"></a>                 max_row<span class="op">=</span>max_row)</span>
<span id="cb907-14"><a href="análisis-de-datos-con-python.html#cb907-14" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> Reference(sheet,</span>
<span id="cb907-15"><a href="análisis-de-datos-con-python.html#cb907-15" aria-hidden="true" tabindex="-1"></a>                       min_col<span class="op">=</span>min_column,</span>
<span id="cb907-16"><a href="análisis-de-datos-con-python.html#cb907-16" aria-hidden="true" tabindex="-1"></a>                       max_col<span class="op">=</span>min_column,</span>
<span id="cb907-17"><a href="análisis-de-datos-con-python.html#cb907-17" aria-hidden="true" tabindex="-1"></a>                       min_row<span class="op">=</span>min_row<span class="op">+</span><span class="dv">1</span>,</span>
<span id="cb907-18"><a href="análisis-de-datos-con-python.html#cb907-18" aria-hidden="true" tabindex="-1"></a>                       max_row<span class="op">=</span>max_row) </span>
<span id="cb907-19"><a href="análisis-de-datos-con-python.html#cb907-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar datos y categorias</span></span>
<span id="cb907-20"><a href="análisis-de-datos-con-python.html#cb907-20" aria-hidden="true" tabindex="-1"></a>barchart.add_data(data, titles_from_data<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb907-21"><a href="análisis-de-datos-con-python.html#cb907-21" aria-hidden="true" tabindex="-1"></a>barchart.set_categories(categories)</span>
<span id="cb907-22"><a href="análisis-de-datos-con-python.html#cb907-22" aria-hidden="true" tabindex="-1"></a><span class="co">#location chart</span></span>
<span id="cb907-23"><a href="análisis-de-datos-con-python.html#cb907-23" aria-hidden="true" tabindex="-1"></a>sheet.add_chart(barchart, <span class="st">&quot;B12&quot;</span>)</span>
<span id="cb907-24"><a href="análisis-de-datos-con-python.html#cb907-24" aria-hidden="true" tabindex="-1"></a>barchart.title <span class="op">=</span> <span class="st">&#39;Sales by Product line&#39;</span></span>
<span id="cb907-25"><a href="análisis-de-datos-con-python.html#cb907-25" aria-hidden="true" tabindex="-1"></a>barchart.style <span class="op">=</span> <span class="dv">5</span> <span class="co">#choose the chart style</span></span>
<span id="cb907-26"><a href="análisis-de-datos-con-python.html#cb907-26" aria-hidden="true" tabindex="-1"></a>wb.save(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span></code></pre></div>
<p>Aplicar formulas manualmente:</p>
<div class="sourceCode" id="cb908"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb908-1"><a href="análisis-de-datos-con-python.html#cb908-1" aria-hidden="true" tabindex="-1"></a>wb <span class="op">=</span> load_workbook(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span>
<span id="cb908-2"><a href="análisis-de-datos-con-python.html#cb908-2" aria-hidden="true" tabindex="-1"></a>sheet <span class="op">=</span> wb[<span class="st">&#39;Report&#39;</span>]</span>
<span id="cb908-3"><a href="análisis-de-datos-con-python.html#cb908-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb908-4"><a href="análisis-de-datos-con-python.html#cb908-4" aria-hidden="true" tabindex="-1"></a>sheet[<span class="st">&#39;B7&#39;</span>] <span class="op">=</span> <span class="st">&#39;=SUM(B5:B6)&#39;</span></span>
<span id="cb908-5"><a href="análisis-de-datos-con-python.html#cb908-5" aria-hidden="true" tabindex="-1"></a>sheet[<span class="st">&#39;B7&#39;</span>].style <span class="op">=</span> <span class="st">&#39;Currency&#39;</span></span>
<span id="cb908-6"><a href="análisis-de-datos-con-python.html#cb908-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb908-7"><a href="análisis-de-datos-con-python.html#cb908-7" aria-hidden="true" tabindex="-1"></a>wb.save(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span></code></pre></div>
<p>Aplicar formulas con celdas de referencias:</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb909-1"><a href="análisis-de-datos-con-python.html#cb909-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> string</span>
<span id="cb909-2"><a href="análisis-de-datos-con-python.html#cb909-2" aria-hidden="true" tabindex="-1"></a>alphabet <span class="op">=</span> <span class="bu">list</span>(string.ascii_uppercase)</span>
<span id="cb909-3"><a href="análisis-de-datos-con-python.html#cb909-3" aria-hidden="true" tabindex="-1"></a>excel_alphabet <span class="op">=</span> alphabet[<span class="dv">0</span>:max_column] <span class="co">#note: Python lists start on 0 -&gt; A=0, B=1, C=2. #note2 the [a:b] takes b-a elements</span></span>
<span id="cb909-4"><a href="análisis-de-datos-con-python.html#cb909-4" aria-hidden="true" tabindex="-1"></a>excel_alphabet</span>
<span id="cb909-5"><a href="análisis-de-datos-con-python.html#cb909-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-6"><a href="análisis-de-datos-con-python.html#cb909-6" aria-hidden="true" tabindex="-1"></a>wb <span class="op">=</span> load_workbook(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span>
<span id="cb909-7"><a href="análisis-de-datos-con-python.html#cb909-7" aria-hidden="true" tabindex="-1"></a>sheet <span class="op">=</span> wb[<span class="st">&#39;Report&#39;</span>]</span>
<span id="cb909-8"><a href="análisis-de-datos-con-python.html#cb909-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-9"><a href="análisis-de-datos-con-python.html#cb909-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Suma en columnas B - G: </span></span>
<span id="cb909-10"><a href="análisis-de-datos-con-python.html#cb909-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> excel_alphabet:</span>
<span id="cb909-11"><a href="análisis-de-datos-con-python.html#cb909-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i<span class="op">!=</span><span class="st">&#39;A&#39;</span>:</span>
<span id="cb909-12"><a href="análisis-de-datos-con-python.html#cb909-12" aria-hidden="true" tabindex="-1"></a>        sheet[<span class="ss">f&#39;</span><span class="sc">{</span>i<span class="sc">}{</span>max_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&#39;</span>] <span class="op">=</span> <span class="ss">f&#39;=SUM(</span><span class="sc">{</span>i<span class="sc">}{</span>min_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:</span><span class="sc">{</span>i<span class="sc">}{</span>max_row<span class="sc">}</span><span class="ss">)&#39;</span></span>
<span id="cb909-13"><a href="análisis-de-datos-con-python.html#cb909-13" aria-hidden="true" tabindex="-1"></a>        sheet[<span class="ss">f&#39;</span><span class="sc">{</span>i<span class="sc">}{</span>max_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&#39;</span>].style <span class="op">=</span> <span class="st">&#39;Currency&#39;</span></span>
<span id="cb909-14"><a href="análisis-de-datos-con-python.html#cb909-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-15"><a href="análisis-de-datos-con-python.html#cb909-15" aria-hidden="true" tabindex="-1"></a><span class="co"># adding total label</span></span>
<span id="cb909-16"><a href="análisis-de-datos-con-python.html#cb909-16" aria-hidden="true" tabindex="-1"></a>sheet[<span class="ss">f&#39;</span><span class="sc">{</span>excel_alphabet[<span class="dv">0</span>]<span class="sc">}{</span>max_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&#39;</span>] <span class="op">=</span> <span class="st">&#39;Total&#39;</span></span>
<span id="cb909-17"><a href="análisis-de-datos-con-python.html#cb909-17" aria-hidden="true" tabindex="-1"></a>wb.save(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span>
<span id="cb909-18"><a href="análisis-de-datos-con-python.html#cb909-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-19"><a href="análisis-de-datos-con-python.html#cb909-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatear la tabla</span></span>
<span id="cb909-20"><a href="análisis-de-datos-con-python.html#cb909-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-21"><a href="análisis-de-datos-con-python.html#cb909-21" aria-hidden="true" tabindex="-1"></a>wb <span class="op">=</span> load_workbook(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span>
<span id="cb909-22"><a href="análisis-de-datos-con-python.html#cb909-22" aria-hidden="true" tabindex="-1"></a>sheet <span class="op">=</span> wb[<span class="st">&#39;Report&#39;</span>]</span>
<span id="cb909-23"><a href="análisis-de-datos-con-python.html#cb909-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-24"><a href="análisis-de-datos-con-python.html#cb909-24" aria-hidden="true" tabindex="-1"></a>sheet[<span class="st">&#39;A1&#39;</span>] <span class="op">=</span> <span class="st">&#39;Sales Report&#39;</span></span>
<span id="cb909-25"><a href="análisis-de-datos-con-python.html#cb909-25" aria-hidden="true" tabindex="-1"></a>sheet[<span class="st">&#39;A2&#39;</span>] <span class="op">=</span> <span class="st">&#39;2021&#39;</span></span>
<span id="cb909-26"><a href="análisis-de-datos-con-python.html#cb909-26" aria-hidden="true" tabindex="-1"></a>sheet[<span class="st">&#39;A1&#39;</span>].font <span class="op">=</span> Font(<span class="st">&#39;Arial&#39;</span>, bold<span class="op">=</span><span class="va">True</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb909-27"><a href="análisis-de-datos-con-python.html#cb909-27" aria-hidden="true" tabindex="-1"></a>sheet[<span class="st">&#39;A2&#39;</span>].font <span class="op">=</span> Font(<span class="st">&#39;Arial&#39;</span>, bold<span class="op">=</span><span class="va">True</span>, size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb909-28"><a href="análisis-de-datos-con-python.html#cb909-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb909-29"><a href="análisis-de-datos-con-python.html#cb909-29" aria-hidden="true" tabindex="-1"></a>wb.save(<span class="st">&#39;report_2021.xlsx&#39;</span>)</span></code></pre></div>
</div>
<div id="automatizar-el-reporte-con-python" class="section level4 hasAnchor" number="4.8.6.3">
<h4><span class="header-section-number">4.8.6.3</span> Automatizar el reporte con Python<a href="análisis-de-datos-con-python.html#automatizar-el-reporte-con-python" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb910"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb910-1"><a href="análisis-de-datos-con-python.html#cb910-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb910-2"><a href="análisis-de-datos-con-python.html#cb910-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openpyxl</span>
<span id="cb910-3"><a href="análisis-de-datos-con-python.html#cb910-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openpyxl <span class="im">import</span> load_workbook</span>
<span id="cb910-4"><a href="análisis-de-datos-con-python.html#cb910-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openpyxl.styles <span class="im">import</span> Font</span>
<span id="cb910-5"><a href="análisis-de-datos-con-python.html#cb910-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openpyxl.chart <span class="im">import</span> BarChart, Reference</span>
<span id="cb910-6"><a href="análisis-de-datos-con-python.html#cb910-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> string</span>
<span id="cb910-7"><a href="análisis-de-datos-con-python.html#cb910-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb910-8"><a href="análisis-de-datos-con-python.html#cb910-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> automate_excel(file_name):</span>
<span id="cb910-9"><a href="análisis-de-datos-con-python.html#cb910-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;The file name should have the following structure: sales_month.xlsx&quot;&quot;&quot;</span></span>
<span id="cb910-10"><a href="análisis-de-datos-con-python.html#cb910-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># read excel file</span></span>
<span id="cb910-11"><a href="análisis-de-datos-con-python.html#cb910-11" aria-hidden="true" tabindex="-1"></a>    excel_file <span class="op">=</span> pd.read_excel(file_name)</span>
<span id="cb910-12"><a href="análisis-de-datos-con-python.html#cb910-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># make pivot table</span></span>
<span id="cb910-13"><a href="análisis-de-datos-con-python.html#cb910-13" aria-hidden="true" tabindex="-1"></a>    report_table <span class="op">=</span> excel_file.pivot_table(index<span class="op">=</span><span class="st">&#39;Gender&#39;</span>, columns<span class="op">=</span><span class="st">&#39;Product line&#39;</span>, values<span class="op">=</span><span class="st">&#39;Total&#39;</span>, aggfunc<span class="op">=</span><span class="st">&#39;sum&#39;</span>).<span class="bu">round</span>(<span class="dv">0</span>)</span>
<span id="cb910-14"><a href="análisis-de-datos-con-python.html#cb910-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># splitting the month and extension from the file name</span></span>
<span id="cb910-15"><a href="análisis-de-datos-con-python.html#cb910-15" aria-hidden="true" tabindex="-1"></a>    month_and_extension <span class="op">=</span> file_name.split(<span class="st">&#39;_&#39;</span>)[<span class="dv">1</span>]</span>
<span id="cb910-16"><a href="análisis-de-datos-con-python.html#cb910-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># send the report table to excel file</span></span>
<span id="cb910-17"><a href="análisis-de-datos-con-python.html#cb910-17" aria-hidden="true" tabindex="-1"></a>    report_table.to_excel(<span class="ss">f&#39;report_</span><span class="sc">{</span>month_and_extension<span class="sc">}</span><span class="ss">&#39;</span>, sheet_name<span class="op">=</span><span class="st">&#39;Report&#39;</span>, startrow<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb910-18"><a href="análisis-de-datos-con-python.html#cb910-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># loading workbook and selecting sheet</span></span>
<span id="cb910-19"><a href="análisis-de-datos-con-python.html#cb910-19" aria-hidden="true" tabindex="-1"></a>    wb <span class="op">=</span> load_workbook(<span class="ss">f&#39;report_</span><span class="sc">{</span>month_and_extension<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb910-20"><a href="análisis-de-datos-con-python.html#cb910-20" aria-hidden="true" tabindex="-1"></a>    sheet <span class="op">=</span> wb[<span class="st">&#39;Report&#39;</span>]</span>
<span id="cb910-21"><a href="análisis-de-datos-con-python.html#cb910-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># cell references (original spreadsheet)</span></span>
<span id="cb910-22"><a href="análisis-de-datos-con-python.html#cb910-22" aria-hidden="true" tabindex="-1"></a>    min_column <span class="op">=</span> wb.active.min_column</span>
<span id="cb910-23"><a href="análisis-de-datos-con-python.html#cb910-23" aria-hidden="true" tabindex="-1"></a>    max_column <span class="op">=</span> wb.active.max_column</span>
<span id="cb910-24"><a href="análisis-de-datos-con-python.html#cb910-24" aria-hidden="true" tabindex="-1"></a>    min_row <span class="op">=</span> wb.active.min_row</span>
<span id="cb910-25"><a href="análisis-de-datos-con-python.html#cb910-25" aria-hidden="true" tabindex="-1"></a>    max_row <span class="op">=</span> wb.active.max_row</span>
<span id="cb910-26"><a href="análisis-de-datos-con-python.html#cb910-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># adding a chart</span></span>
<span id="cb910-27"><a href="análisis-de-datos-con-python.html#cb910-27" aria-hidden="true" tabindex="-1"></a>    barchart <span class="op">=</span> BarChart()</span>
<span id="cb910-28"><a href="análisis-de-datos-con-python.html#cb910-28" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> Reference(sheet, min_col<span class="op">=</span>min_column<span class="op">+</span><span class="dv">1</span>, max_col<span class="op">=</span>max_column, min_row<span class="op">=</span>min_row, max_row<span class="op">=</span>max_row) <span class="co">#including headers</span></span>
<span id="cb910-29"><a href="análisis-de-datos-con-python.html#cb910-29" aria-hidden="true" tabindex="-1"></a>    categories <span class="op">=</span> Reference(sheet, min_col<span class="op">=</span>min_column, max_col<span class="op">=</span>min_column, min_row<span class="op">=</span>min_row<span class="op">+</span><span class="dv">1</span>, max_row<span class="op">=</span>max_row) <span class="co">#not including headers</span></span>
<span id="cb910-30"><a href="análisis-de-datos-con-python.html#cb910-30" aria-hidden="true" tabindex="-1"></a>    barchart.add_data(data, titles_from_data<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb910-31"><a href="análisis-de-datos-con-python.html#cb910-31" aria-hidden="true" tabindex="-1"></a>    barchart.set_categories(categories)</span>
<span id="cb910-32"><a href="análisis-de-datos-con-python.html#cb910-32" aria-hidden="true" tabindex="-1"></a>    sheet.add_chart(barchart, <span class="st">&quot;B12&quot;</span>) <span class="co">#location chart</span></span>
<span id="cb910-33"><a href="análisis-de-datos-con-python.html#cb910-33" aria-hidden="true" tabindex="-1"></a>    barchart.title <span class="op">=</span> <span class="st">&#39;Sales by Product line&#39;</span></span>
<span id="cb910-34"><a href="análisis-de-datos-con-python.html#cb910-34" aria-hidden="true" tabindex="-1"></a>    barchart.style <span class="op">=</span> <span class="dv">2</span> <span class="co">#choose the chart style</span></span>
<span id="cb910-35"><a href="análisis-de-datos-con-python.html#cb910-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># applying formulas</span></span>
<span id="cb910-36"><a href="análisis-de-datos-con-python.html#cb910-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># first create alphabet list as references for cells</span></span>
<span id="cb910-37"><a href="análisis-de-datos-con-python.html#cb910-37" aria-hidden="true" tabindex="-1"></a>    alphabet <span class="op">=</span> <span class="bu">list</span>(string.ascii_uppercase)</span>
<span id="cb910-38"><a href="análisis-de-datos-con-python.html#cb910-38" aria-hidden="true" tabindex="-1"></a>    excel_alphabet <span class="op">=</span> alphabet[<span class="dv">0</span>:max_column] <span class="co">#note: Python lists start on 0 -&gt; A=0, B=1, C=2. #note2 the [a:b] takes b-a elements</span></span>
<span id="cb910-39"><a href="análisis-de-datos-con-python.html#cb910-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># sum in columns B-G</span></span>
<span id="cb910-40"><a href="análisis-de-datos-con-python.html#cb910-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> excel_alphabet:</span>
<span id="cb910-41"><a href="análisis-de-datos-con-python.html#cb910-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i<span class="op">!=</span><span class="st">&#39;A&#39;</span>:</span>
<span id="cb910-42"><a href="análisis-de-datos-con-python.html#cb910-42" aria-hidden="true" tabindex="-1"></a>            sheet[<span class="ss">f&#39;</span><span class="sc">{</span>i<span class="sc">}{</span>max_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&#39;</span>] <span class="op">=</span> <span class="ss">f&#39;=SUM(</span><span class="sc">{</span>i<span class="sc">}{</span>min_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">:</span><span class="sc">{</span>i<span class="sc">}{</span>max_row<span class="sc">}</span><span class="ss">)&#39;</span></span>
<span id="cb910-43"><a href="análisis-de-datos-con-python.html#cb910-43" aria-hidden="true" tabindex="-1"></a>            sheet[<span class="ss">f&#39;</span><span class="sc">{</span>i<span class="sc">}{</span>max_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&#39;</span>].style <span class="op">=</span> <span class="st">&#39;Currency&#39;</span></span>
<span id="cb910-44"><a href="análisis-de-datos-con-python.html#cb910-44" aria-hidden="true" tabindex="-1"></a>    sheet[<span class="ss">f&#39;</span><span class="sc">{</span>excel_alphabet[<span class="dv">0</span>]<span class="sc">}{</span>max_row<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">&#39;</span>] <span class="op">=</span> <span class="st">&#39;Total&#39;</span></span>
<span id="cb910-45"><a href="análisis-de-datos-con-python.html#cb910-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># getting month name</span></span>
<span id="cb910-46"><a href="análisis-de-datos-con-python.html#cb910-46" aria-hidden="true" tabindex="-1"></a>    month_name <span class="op">=</span> month_and_extension.split(<span class="st">&#39;.&#39;</span>)[<span class="dv">0</span>]</span>
<span id="cb910-47"><a href="análisis-de-datos-con-python.html#cb910-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># formatting the report</span></span>
<span id="cb910-48"><a href="análisis-de-datos-con-python.html#cb910-48" aria-hidden="true" tabindex="-1"></a>    sheet[<span class="st">&#39;A1&#39;</span>] <span class="op">=</span> <span class="st">&#39;Sales Report&#39;</span></span>
<span id="cb910-49"><a href="análisis-de-datos-con-python.html#cb910-49" aria-hidden="true" tabindex="-1"></a>    sheet[<span class="st">&#39;A2&#39;</span>] <span class="op">=</span> month_name.title()</span>
<span id="cb910-50"><a href="análisis-de-datos-con-python.html#cb910-50" aria-hidden="true" tabindex="-1"></a>    sheet[<span class="st">&#39;A1&#39;</span>].font <span class="op">=</span> Font(<span class="st">&#39;Arial&#39;</span>, bold<span class="op">=</span><span class="va">True</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb910-51"><a href="análisis-de-datos-con-python.html#cb910-51" aria-hidden="true" tabindex="-1"></a>    sheet[<span class="st">&#39;A2&#39;</span>].font <span class="op">=</span> Font(<span class="st">&#39;Arial&#39;</span>, bold<span class="op">=</span><span class="va">True</span>, size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb910-52"><a href="análisis-de-datos-con-python.html#cb910-52" aria-hidden="true" tabindex="-1"></a>    wb.save(<span class="ss">f&#39;report_</span><span class="sc">{</span>month_and_extension<span class="sc">}</span><span class="ss">&#39;</span>)</span>
<span id="cb910-53"><a href="análisis-de-datos-con-python.html#cb910-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span>
<span id="cb910-54"><a href="análisis-de-datos-con-python.html#cb910-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb910-55"><a href="análisis-de-datos-con-python.html#cb910-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar la función a un archivo</span></span>
<span id="cb910-56"><a href="análisis-de-datos-con-python.html#cb910-56" aria-hidden="true" tabindex="-1"></a>automate_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_2021.xlsx&#39;</span>)</span>
<span id="cb910-57"><a href="análisis-de-datos-con-python.html#cb910-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb910-58"><a href="análisis-de-datos-con-python.html#cb910-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar la función a múltiples archivos </span></span>
<span id="cb910-59"><a href="análisis-de-datos-con-python.html#cb910-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb910-60"><a href="análisis-de-datos-con-python.html#cb910-60" aria-hidden="true" tabindex="-1"></a><span class="co"># cada uno por separado</span></span>
<span id="cb910-61"><a href="análisis-de-datos-con-python.html#cb910-61" aria-hidden="true" tabindex="-1"></a>automate_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_january.xlsx&#39;</span>)</span>
<span id="cb910-62"><a href="análisis-de-datos-con-python.html#cb910-62" aria-hidden="true" tabindex="-1"></a>automate_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_february.xlsx&#39;</span>)</span>
<span id="cb910-63"><a href="análisis-de-datos-con-python.html#cb910-63" aria-hidden="true" tabindex="-1"></a>automate_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_march.xlsx&#39;</span>)</span>
<span id="cb910-64"><a href="análisis-de-datos-con-python.html#cb910-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb910-65"><a href="análisis-de-datos-con-python.html#cb910-65" aria-hidden="true" tabindex="-1"></a><span class="co"># option 2: todos juntos </span></span>
<span id="cb910-66"><a href="análisis-de-datos-con-python.html#cb910-66" aria-hidden="true" tabindex="-1"></a>excel_file_1 <span class="op">=</span> pd.read_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_january.xlsx&#39;</span>)</span>
<span id="cb910-67"><a href="análisis-de-datos-con-python.html#cb910-67" aria-hidden="true" tabindex="-1"></a>excel_file_2 <span class="op">=</span> pd.read_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_february.xlsx&#39;</span>)</span>
<span id="cb910-68"><a href="análisis-de-datos-con-python.html#cb910-68" aria-hidden="true" tabindex="-1"></a>excel_file_3 <span class="op">=</span> pd.read_excel(<span class="st">&#39;datasets</span><span class="ch">\\</span><span class="st">sales_march.xlsx&#39;</span>)</span>
<span id="cb910-69"><a href="análisis-de-datos-con-python.html#cb910-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb910-70"><a href="análisis-de-datos-con-python.html#cb910-70" aria-hidden="true" tabindex="-1"></a>new_file <span class="op">=</span> pd.concat([excel_file_1,</span>
<span id="cb910-71"><a href="análisis-de-datos-con-python.html#cb910-71" aria-hidden="true" tabindex="-1"></a>                      excel_file_2,</span>
<span id="cb910-72"><a href="análisis-de-datos-con-python.html#cb910-72" aria-hidden="true" tabindex="-1"></a>                      excel_file_3], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb910-73"><a href="análisis-de-datos-con-python.html#cb910-73" aria-hidden="true" tabindex="-1"></a>new_file.to_excel(<span class="st">&#39;sales_2021.xlsx&#39;</span>)</span>
<span id="cb910-74"><a href="análisis-de-datos-con-python.html#cb910-74" aria-hidden="true" tabindex="-1"></a>automate_excel(<span class="st">&#39;sales_2021.xlsx&#39;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="web-scraping-en-python" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> Web Scraping en Python<a href="análisis-de-datos-con-python.html#web-scraping-en-python" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introducción-3" class="section level3 hasAnchor" number="4.9.1">
<h3><span class="header-section-number">4.9.1</span> Introducción<a href="análisis-de-datos-con-python.html#introducción-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Web scrapping o escrapeo de datos es un conjunto de herramientas que permiten obtener datos que esten disponibles en sitios web.</p></li>
<li><p>Estos datos pueden estar estructurados (datos enfocados en el analisis de datos) o no estructurados (datos previos a un formato de analisis de datos).</p></li>
<li><p>Vamos a ver algunos conceptos básicos, solo con el fin de que los conozcan, y luego vamos a ver varios ejemplos.</p></li>
</ul>
<div id="html" class="section level4 hasAnchor" number="4.9.1.1">
<h4><span class="header-section-number">4.9.1.1</span> HTML<a href="análisis-de-datos-con-python.html#html" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Hypertext Markup Language</p>
<ul>
<li>Es el lenguaje utilizado para diseñar sitios web.</li>
<li>Contiene varias etiquetas que almacenan todo tipo de información contenido en una página web.</li>
<li>Cada etiqueta tiene un rol especifico. Para ver detalles: w3schools.com/tags/default.asp</li>
<li>Esta organizada jerarquicamente (parecen ramas de arboles). Es importante entender este concepto</li>
<li>Recuerden que nuestro objetivo es entender esta estructura para poder extraer la información.</li>
</ul></li>
</ul>
</div>
<div id="estructura" class="section level4 hasAnchor" number="4.9.1.2">
<h4><span class="header-section-number">4.9.1.2</span> Estructura<a href="análisis-de-datos-con-python.html#estructura" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="figure">
<img src="attachment:a2b63850-b0d1-4236-8276-b443b9497008.png" alt="" />
<p class="caption">image.png</p>
</div>
<ul>
<li>html: inicio/fin archivo html</li>
<li>body: cuerpo</li>
<li>div: secciones</li>
<li>p: parrafos.</li>
</ul>
<div class="figure">
<img src="attachment:29d7db3a-9bec-439c-bd49-aa0508d0d511.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="figure">
<img src="attachment:ed681524-c03b-4144-a695-d5a872b27233.png" alt="" />
<p class="caption">image.png</p>
</div>
<div class="sourceCode" id="cb911"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb911-1"><a href="análisis-de-datos-con-python.html#cb911-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un HTML</span></span>
<span id="cb911-2"><a href="análisis-de-datos-con-python.html#cb911-2" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">&#39;&#39;&#39;</span></span>
<span id="cb911-3"><a href="análisis-de-datos-con-python.html#cb911-3" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb911-4"><a href="análisis-de-datos-con-python.html#cb911-4" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;head&gt;</span></span>
<span id="cb911-5"><a href="análisis-de-datos-con-python.html#cb911-5" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;title&gt;Intro HTML&lt;/title&gt;</span></span>
<span id="cb911-6"><a href="análisis-de-datos-con-python.html#cb911-6" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;/head&gt;</span></span>
<span id="cb911-7"><a href="análisis-de-datos-con-python.html#cb911-7" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;body&gt;</span></span>
<span id="cb911-8"><a href="análisis-de-datos-con-python.html#cb911-8" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;p&gt;Chao Chao!&lt;/p&gt;</span></span>
<span id="cb911-9"><a href="análisis-de-datos-con-python.html#cb911-9" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;p&gt;Hola Hola!&lt;/p&gt;</span></span>
<span id="cb911-10"><a href="análisis-de-datos-con-python.html#cb911-10" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;/body&gt;</span></span>
<span id="cb911-11"><a href="análisis-de-datos-con-python.html#cb911-11" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb911-12"><a href="análisis-de-datos-con-python.html#cb911-12" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb911-13"><a href="análisis-de-datos-con-python.html#cb911-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb911-14"><a href="análisis-de-datos-con-python.html#cb911-14" aria-hidden="true" tabindex="-1"></a>html</span></code></pre></div>
</div>
<div id="css-selectors" class="section level4 hasAnchor" number="4.9.1.3">
<h4><span class="header-section-number">4.9.1.3</span> CSS selectors<a href="análisis-de-datos-con-python.html#css-selectors" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Cascading Style Sheets</li>
<li>Al igual que HTML sirve para generar sitios web.</li>
<li>En CSS hay algunos selectores adicionales, tres principales: class, id y tag.</li>
<li>Estos atributos son subconjuntos de información especifica contenida en cada sección</li>
</ul>
<div class="sourceCode" id="cb912"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb912-1"><a href="análisis-de-datos-con-python.html#cb912-1" aria-hidden="true" tabindex="-1"></a><span class="co"># HTML/CSS con atributos</span></span>
<span id="cb912-2"><a href="análisis-de-datos-con-python.html#cb912-2" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">&#39;&#39;&#39;</span></span>
<span id="cb912-3"><a href="análisis-de-datos-con-python.html#cb912-3" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb912-4"><a href="análisis-de-datos-con-python.html#cb912-4" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;body&gt;</span></span>
<span id="cb912-5"><a href="análisis-de-datos-con-python.html#cb912-5" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;div class=&quot;class1&quot; id=&quot;div1&quot;&gt;</span></span>
<span id="cb912-6"><a href="análisis-de-datos-con-python.html#cb912-6" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;p class=&quot;class2&quot;&gt;atributos&lt;/p&gt;</span></span>
<span id="cb912-7"><a href="análisis-de-datos-con-python.html#cb912-7" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/div&gt;</span></span>
<span id="cb912-8"><a href="análisis-de-datos-con-python.html#cb912-8" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;div class=&quot;holaholabola&quot;&gt;</span></span>
<span id="cb912-9"><a href="análisis-de-datos-con-python.html#cb912-9" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;p class=&quot;class2&quot;&gt;holaholahola!&lt;/p&gt;</span></span>
<span id="cb912-10"><a href="análisis-de-datos-con-python.html#cb912-10" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/div&gt;</span></span>
<span id="cb912-11"><a href="análisis-de-datos-con-python.html#cb912-11" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;/body&gt;</span></span>
<span id="cb912-12"><a href="análisis-de-datos-con-python.html#cb912-12" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb912-13"><a href="análisis-de-datos-con-python.html#cb912-13" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;&#39;</span></span></code></pre></div>
</div>
<div id="xpath" class="section level4 hasAnchor" number="4.9.1.4">
<h4><span class="header-section-number">4.9.1.4</span> XPATH<a href="análisis-de-datos-con-python.html#xpath" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Es un lenguaje que permite construir expresiones que recorren y procesan un documento.</li>
<li>Es parecido a la idea de expresiones regulares al trabajar con texto.-</li>
<li>Tiene en cuenta la estructura jerarquica.</li>
</ul>
<div class="sourceCode" id="cb913"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb913-1"><a href="análisis-de-datos-con-python.html#cb913-1" aria-hidden="true" tabindex="-1"></a>xpath <span class="op">=</span> <span class="st">&quot;/html/body/div[2]&quot;</span></span></code></pre></div>
<p><img src="attachment:2ae64331-d781-45fa-9c2b-0a0278ea8b33.png" alt="image.png" /><img src="attachment:072ebcac-326a-40d0-8aac-9c59fe30d4f8.png" alt="image.png" /></p>
<ul>
<li>/: sirve para moverse de una generación a otra</li>
<li>etiqueta: indica donde buscar</li>
<li></li>
<li>Con doble // llamo a todas las generaciones</li>
</ul>
<div class="figure">
<img src="attachment:60365afb-3e32-4682-8187-78eadc64d00d.png" alt="" />
<p class="caption">image.png</p>
</div>
<ul>
<li>Más detalles en: <a href="https://www.geeksforgeeks.org/introduction-to-xpath/" class="uri">https://www.geeksforgeeks.org/introduction-to-xpath/</a></li>
</ul>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.9.1:</b> Para el siguiente html escriba el xpath que le permita ir a la frase “aprendo python haciendo”</p>
</div>
<div class="sourceCode" id="cb914"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb914-1"><a href="análisis-de-datos-con-python.html#cb914-1" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> <span class="st">&#39;&#39;&#39;</span></span>
<span id="cb914-2"><a href="análisis-de-datos-con-python.html#cb914-2" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;html&gt;</span></span>
<span id="cb914-3"><a href="análisis-de-datos-con-python.html#cb914-3" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;body&gt;</span></span>
<span id="cb914-4"><a href="análisis-de-datos-con-python.html#cb914-4" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;div&gt;</span></span>
<span id="cb914-5"><a href="análisis-de-datos-con-python.html#cb914-5" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;p&gt;Me gusta el chocolate&lt;/p&gt;</span></span>
<span id="cb914-6"><a href="análisis-de-datos-con-python.html#cb914-6" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;p&gt;Aquí no&lt;/p&gt;</span></span>
<span id="cb914-7"><a href="análisis-de-datos-con-python.html#cb914-7" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/div&gt;</span></span>
<span id="cb914-8"><a href="análisis-de-datos-con-python.html#cb914-8" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;div&gt;</span></span>
<span id="cb914-9"><a href="análisis-de-datos-con-python.html#cb914-9" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;p&gt;Aprendo python haciendo&lt;/p&gt;</span></span>
<span id="cb914-10"><a href="análisis-de-datos-con-python.html#cb914-10" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/div&gt;</span></span>
<span id="cb914-11"><a href="análisis-de-datos-con-python.html#cb914-11" aria-hidden="true" tabindex="-1"></a><span class="st">  &lt;/body&gt;</span></span>
<span id="cb914-12"><a href="análisis-de-datos-con-python.html#cb914-12" aria-hidden="true" tabindex="-1"></a><span class="st">&lt;/html&gt;</span></span>
<span id="cb914-13"><a href="análisis-de-datos-con-python.html#cb914-13" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;&#39;&#39;</span></span>
<span id="cb914-14"><a href="análisis-de-datos-con-python.html#cb914-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb914-15"><a href="análisis-de-datos-con-python.html#cb914-15" aria-hidden="true" tabindex="-1"></a>xpath <span class="op">=</span> <span class="st">&#39;/html/body/div[2]/p[1]&#39;</span></span></code></pre></div>
</div>
</div>
<div id="muchos-ejemplos-practicos-de-web---scraping" class="section level3 hasAnchor" number="4.9.2">
<h3><span class="header-section-number">4.9.2</span> Muchos ejemplos practicos de Web - scraping<a href="análisis-de-datos-con-python.html#muchos-ejemplos-practicos-de-web---scraping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Todos los conceptos anteriores son muy útiles cuando se trabajan con sitios web complejos. Es probable que si profundizan en el uso de web-scraping los vayan a necesitar. Sin embargo, en la practica vamos a utilziar programas auxiliares que nos permiten conocer las rutas</p></li>
<li><p>Ahora, vamos a mirar como utilizar la siguiente extensión: <a href="https://selectorgadget.com/" class="uri">https://selectorgadget.com/</a></p></li>
<li><p>WS va a utilizar los selectores de CSS y algunas librerías para obtener información guardada jerarquicamente en algún sitio web.</p></li>
<li><p>Imaginemos queremos obtener información de los precios de productos en Amazon, los pasos que necesitamos son:</p>
<ul>
<li>Primero, vamos a hacer una conexión con la página web desde el código de Python.</li>
<li>Una vez conectada, vamos a acceder a la información neta de la págica utilizando alguna librearía.</li>
<li>Vamos a rastrear los selectores que contienen la información que deseamos obtener (en este caso el precio)</li>
<li>Una vez reconocido, utilizaremos distintas funciones para extraer la información.</li>
<li>Una ves onbtenida la información la ordenamos con funciones que ya conocemos (ej. utilizando Pandas).</li>
</ul></li>
<li><p>Vamos a revisar tres librerías: (i) Beatiful Soap; (ii) Selenium.</p></li>
<li><p>Van avanzando en nivel de dificultad.</p></li>
</ul>
<div id="beautiful-soap" class="section level4 hasAnchor" number="4.9.2.1">
<h4><span class="header-section-number">4.9.2.1</span> Beautiful Soap<a href="análisis-de-datos-con-python.html#beautiful-soap" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>Beautiful Soup es un paquete de python que se utiliza para analizar documentos HTML y XML.</li>
<li>Es una de las bibliotecas más simples y amigables de python.</li>
<li>Beautiful soup crea un árbol de análisis para diferentes páginas analizadas que se utilizan para extraer datos de la fuente (HTML).</li>
</ul>
<p>Sintaxis Básica:</p>
<div class="sourceCode" id="cb915"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb915-1"><a href="análisis-de-datos-con-python.html#cb915-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb915-2"><a href="análisis-de-datos-con-python.html#cb915-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests           <span class="co">##A Python HTTP library</span></span>
<span id="cb915-3"><a href="análisis-de-datos-con-python.html#cb915-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb915-4"><a href="análisis-de-datos-con-python.html#cb915-4" aria-hidden="true" tabindex="-1"></a><span class="co">#url = &#39;WEBSITE_URL&#39; (link)</span></span>
<span id="cb915-5"><a href="análisis-de-datos-con-python.html#cb915-5" aria-hidden="true" tabindex="-1"></a><span class="co">#res = requests.get(url)  ## HTTP Requests</span></span>
<span id="cb915-6"><a href="análisis-de-datos-con-python.html#cb915-6" aria-hidden="true" tabindex="-1"></a><span class="co">#print(res)            ## if o/p is &lt;200&gt; then connection established</span></span>
<span id="cb915-7"><a href="análisis-de-datos-con-python.html#cb915-7" aria-hidden="true" tabindex="-1"></a><span class="co">#soup = BeautifulSoup(res.text,&#39;html.parser&#39;)</span></span>
<span id="cb915-8"><a href="análisis-de-datos-con-python.html#cb915-8" aria-hidden="true" tabindex="-1"></a><span class="co">#print(soup)          ## source code</span></span></code></pre></div>
<ul>
<li><code>html.parser</code> se utiliza para analizar documentos HTML.</li>
<li><code>soup</code> es un nombre de variable general que se utiliza para la definición del código fuente.</li>
</ul>
<div class="sourceCode" id="cb916"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb916-1"><a href="análisis-de-datos-con-python.html#cb916-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find, Find All y Select</span></span></code></pre></div>
<p><code>Find</code> es una función incorporada en la biblioteca que se utiliza para obtener el contenido de la fuente. Encuentra la primera ocurrencia del elemento o selector. find se utiliza principalmente para extraer encabezados, títulos, nombres de productos, etc. de la página web. Ejemplos.</p>
<div class="sourceCode" id="cb917"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb917-1"><a href="análisis-de-datos-con-python.html#cb917-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna el título</span></span>
<span id="cb917-2"><a href="análisis-de-datos-con-python.html#cb917-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.find(<span class="st">&#39;title&#39;</span>).text)</span>
<span id="cb917-3"><a href="análisis-de-datos-con-python.html#cb917-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb917-4"><a href="análisis-de-datos-con-python.html#cb917-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna el texto del primer encabezado  </span></span>
<span id="cb917-5"><a href="análisis-de-datos-con-python.html#cb917-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.find(<span class="st">&#39;h1&#39;</span>).text)</span>
<span id="cb917-6"><a href="análisis-de-datos-con-python.html#cb917-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb917-7"><a href="análisis-de-datos-con-python.html#cb917-7" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna el contenido de la primera etiqueta div con los atributos tags</span></span>
<span id="cb917-8"><a href="análisis-de-datos-con-python.html#cb917-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.find(<span class="st">&#39;div&#39;</span>, {<span class="st">&#39;class&#39;</span>: <span class="st">&#39;tags&#39;</span>}))</span>
<span id="cb917-9"><a href="análisis-de-datos-con-python.html#cb917-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb917-10"><a href="análisis-de-datos-con-python.html#cb917-10" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna el texto de etiqueta &quot;a&quot;, pero con atributo &quot;tag&quot;. </span></span>
<span id="cb917-11"><a href="análisis-de-datos-con-python.html#cb917-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.find(<span class="st">&#39;a&#39;</span>,{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;tag&#39;</span>}).text)</span></code></pre></div>
<ul>
<li><code>Find_all</code> encuentra todas las ocurrencias del elemento o selector.</li>
<li>Se utiliza principalmente para rastrear los datos de las tablas, reseñas de productos, detalles y productos listados en una página web.</li>
<li>Devuelve la salida en forma de lista.</li>
</ul>
<div class="sourceCode" id="cb918"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb918-1"><a href="análisis-de-datos-con-python.html#cb918-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna todos los div con el atributo/clase product name </span></span>
<span id="cb918-2"><a href="análisis-de-datos-con-python.html#cb918-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb918-3"><a href="análisis-de-datos-con-python.html#cb918-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.find_all(<span class="st">&#39;div&#39;</span>, {<span class="st">&#39;class&#39;</span>: <span class="st">&#39;productname&#39;</span>}))</span>
<span id="cb918-4"><a href="análisis-de-datos-con-python.html#cb918-4" aria-hidden="true" tabindex="-1"></a>productnames <span class="op">=</span> soup.find_all(<span class="st">&#39;div&#39;</span>, {<span class="st">&#39;class&#39;</span>: <span class="st">&#39;productname&#39;</span>})</span>
<span id="cb918-5"><a href="análisis-de-datos-con-python.html#cb918-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb918-6"><a href="análisis-de-datos-con-python.html#cb918-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name <span class="kw">in</span> productnames:</span>
<span id="cb918-7"><a href="análisis-de-datos-con-python.html#cb918-7" aria-hidden="true" tabindex="-1"></a>   <span class="bu">print</span>(name.text)</span></code></pre></div>
<ul>
<li>Select es una de las funciones más potente.</li>
<li>Selecciona el elemento o selector directamente en forma de lista.</li>
<li>Utiliza selectores CSS y selectores de etiquetas.</li>
<li>También devuelve la salida en forma de lista.</li>
</ul>
<div class="sourceCode" id="cb919"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb919-1"><a href="análisis-de-datos-con-python.html#cb919-1" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna todas las etiquetas con la clase &quot;productname&quot; en una lista </span></span>
<span id="cb919-2"><a href="análisis-de-datos-con-python.html#cb919-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb919-3"><a href="análisis-de-datos-con-python.html#cb919-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print(soup.select(.productname))</span></span>
<span id="cb919-4"><a href="análisis-de-datos-con-python.html#cb919-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb919-5"><a href="análisis-de-datos-con-python.html#cb919-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Retorna el primer div con el id product en formato texto </span></span>
<span id="cb919-6"><a href="análisis-de-datos-con-python.html#cb919-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb919-7"><a href="análisis-de-datos-con-python.html#cb919-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.select(div <span class="co">#productkey)[0].get_text())</span></span></code></pre></div>
</div>
<div id="ejemplo-1-scraping-para-wikipedia---conociendo-villasana-de-mena" class="section level4 hasAnchor" number="4.9.2.2">
<h4><span class="header-section-number">4.9.2.2</span> Ejemplo 1: Scraping para Wikipedia - conociendo Villasana de Mena<a href="análisis-de-datos-con-python.html#ejemplo-1-scraping-para-wikipedia---conociendo-villasana-de-mena" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb920"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb920-1"><a href="análisis-de-datos-con-python.html#cb920-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos librerías </span></span>
<span id="cb920-2"><a href="análisis-de-datos-con-python.html#cb920-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-3"><a href="análisis-de-datos-con-python.html#cb920-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb920-4"><a href="análisis-de-datos-con-python.html#cb920-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb920-5"><a href="análisis-de-datos-con-python.html#cb920-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-6"><a href="análisis-de-datos-con-python.html#cb920-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Establecemos conexión</span></span>
<span id="cb920-7"><a href="análisis-de-datos-con-python.html#cb920-7" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> requests.get(<span class="st">&#39;https://es.wikipedia.org/wiki/Villasana_de_Mena&#39;</span>)</span>
<span id="cb920-8"><a href="análisis-de-datos-con-python.html#cb920-8" aria-hidden="true" tabindex="-1"></a>res</span>
<span id="cb920-9"><a href="análisis-de-datos-con-python.html#cb920-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-10"><a href="análisis-de-datos-con-python.html#cb920-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos la codificación de la página web</span></span>
<span id="cb920-11"><a href="análisis-de-datos-con-python.html#cb920-11" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(res.text,<span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb920-12"><a href="análisis-de-datos-con-python.html#cb920-12" aria-hidden="true" tabindex="-1"></a><span class="co">#print(soup)</span></span>
<span id="cb920-13"><a href="análisis-de-datos-con-python.html#cb920-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-14"><a href="análisis-de-datos-con-python.html#cb920-14" aria-hidden="true" tabindex="-1"></a>nombre <span class="op">=</span> soup.select(<span class="st">&quot;#firstHeading&quot;</span>)[<span class="dv">0</span>].getText().strip()</span>
<span id="cb920-15"><a href="análisis-de-datos-con-python.html#cb920-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nombre)</span>
<span id="cb920-16"><a href="análisis-de-datos-con-python.html#cb920-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-17"><a href="análisis-de-datos-con-python.html#cb920-17" aria-hidden="true" tabindex="-1"></a>primerparrafo <span class="op">=</span> soup.select(<span class="st">&#39;.ambox-content+ p&#39;</span>)[<span class="dv">0</span>].get_text().strip()</span>
<span id="cb920-18"><a href="análisis-de-datos-con-python.html#cb920-18" aria-hidden="true" tabindex="-1"></a>primerparrafo</span>
<span id="cb920-19"><a href="análisis-de-datos-con-python.html#cb920-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-20"><a href="análisis-de-datos-con-python.html#cb920-20" aria-hidden="true" tabindex="-1"></a>todoslosparrafos <span class="op">=</span> [soup.select(<span class="st">&#39;p&#39;</span>)[i].get_text().strip() <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="bu">len</span>(soup.select(<span class="st">&#39;p&#39;</span>)))]</span>
<span id="cb920-21"><a href="análisis-de-datos-con-python.html#cb920-21" aria-hidden="true" tabindex="-1"></a>todoslosparrafos</span>
<span id="cb920-22"><a href="análisis-de-datos-con-python.html#cb920-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-23"><a href="análisis-de-datos-con-python.html#cb920-23" aria-hidden="true" tabindex="-1"></a>mapa <span class="op">=</span> soup.select(<span class="st">&quot;tr:nth-child(5) img&quot;</span>)[<span class="dv">0</span>]</span>
<span id="cb920-24"><a href="análisis-de-datos-con-python.html#cb920-24" aria-hidden="true" tabindex="-1"></a>mapa</span>
<span id="cb920-25"><a href="análisis-de-datos-con-python.html#cb920-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-26"><a href="análisis-de-datos-con-python.html#cb920-26" aria-hidden="true" tabindex="-1"></a>image_url <span class="op">=</span> mapa.attrs[<span class="st">&quot;src&quot;</span>]</span>
<span id="cb920-27"><a href="análisis-de-datos-con-python.html#cb920-27" aria-hidden="true" tabindex="-1"></a>image_url</span>
<span id="cb920-28"><a href="análisis-de-datos-con-python.html#cb920-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-29"><a href="análisis-de-datos-con-python.html#cb920-29" aria-hidden="true" tabindex="-1"></a>url_base <span class="op">=</span> <span class="st">&quot;https:&quot;</span></span>
<span id="cb920-30"><a href="análisis-de-datos-con-python.html#cb920-30" aria-hidden="true" tabindex="-1"></a>image_url <span class="op">=</span> mapa.attrs[<span class="st">&quot;src&quot;</span>]</span>
<span id="cb920-31"><a href="análisis-de-datos-con-python.html#cb920-31" aria-hidden="true" tabindex="-1"></a>url_final <span class="op">=</span> url_base <span class="op">+</span> image_url </span>
<span id="cb920-32"><a href="análisis-de-datos-con-python.html#cb920-32" aria-hidden="true" tabindex="-1"></a>url_final</span>
<span id="cb920-33"><a href="análisis-de-datos-con-python.html#cb920-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-34"><a href="análisis-de-datos-con-python.html#cb920-34" aria-hidden="true" tabindex="-1"></a>img_data <span class="op">=</span> requests.get(url_final).content</span>
<span id="cb920-35"><a href="análisis-de-datos-con-python.html#cb920-35" aria-hidden="true" tabindex="-1"></a><span class="co">#img_data</span></span>
<span id="cb920-36"><a href="análisis-de-datos-con-python.html#cb920-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-37"><a href="análisis-de-datos-con-python.html#cb920-37" aria-hidden="true" tabindex="-1"></a>img_data <span class="op">=</span> requests.get(url_final).content</span>
<span id="cb920-38"><a href="análisis-de-datos-con-python.html#cb920-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-39"><a href="análisis-de-datos-con-python.html#cb920-39" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;m1.jpg&#39;</span>, <span class="st">&#39;wb&#39;</span>) <span class="im">as</span> handler:</span>
<span id="cb920-40"><a href="análisis-de-datos-con-python.html#cb920-40" aria-hidden="true" tabindex="-1"></a>    handler.write(img_data)</span>
<span id="cb920-41"><a href="análisis-de-datos-con-python.html#cb920-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-42"><a href="análisis-de-datos-con-python.html#cb920-42" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb920-43"><a href="análisis-de-datos-con-python.html#cb920-43" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.image <span class="im">as</span> mpimg</span>
<span id="cb920-44"><a href="análisis-de-datos-con-python.html#cb920-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-45"><a href="análisis-de-datos-con-python.html#cb920-45" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> mpimg.imread(<span class="st">&#39;m1.jpg&#39;</span>)</span>
<span id="cb920-46"><a href="análisis-de-datos-con-python.html#cb920-46" aria-hidden="true" tabindex="-1"></a>imgplot <span class="op">=</span> plt.imshow(img)</span>
<span id="cb920-47"><a href="análisis-de-datos-con-python.html#cb920-47" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb920-48"><a href="análisis-de-datos-con-python.html#cb920-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-49"><a href="análisis-de-datos-con-python.html#cb920-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Importemos todas las imagenes en un iterador</span></span>
<span id="cb920-50"><a href="análisis-de-datos-con-python.html#cb920-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-51"><a href="análisis-de-datos-con-python.html#cb920-51" aria-hidden="true" tabindex="-1"></a>imagenes <span class="op">=</span> [soup.select(<span class="st">&quot;td :nth-child(1) .image img&quot;</span>)[i] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(soup.select(<span class="st">&quot;td :nth-child(1) .image img&quot;</span>)))]</span>
<span id="cb920-52"><a href="análisis-de-datos-con-python.html#cb920-52" aria-hidden="true" tabindex="-1"></a>imagenes</span>
<span id="cb920-53"><a href="análisis-de-datos-con-python.html#cb920-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-54"><a href="análisis-de-datos-con-python.html#cb920-54" aria-hidden="true" tabindex="-1"></a>url_1 <span class="op">=</span> <span class="st">&quot;https:&quot;</span> <span class="op">+</span> imagenes[<span class="dv">0</span>].attrs[<span class="st">&quot;src&quot;</span>]</span>
<span id="cb920-55"><a href="análisis-de-datos-con-python.html#cb920-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-56"><a href="análisis-de-datos-con-python.html#cb920-56" aria-hidden="true" tabindex="-1"></a>url_2<span class="op">=</span> <span class="st">&quot;https:&quot;</span> <span class="op">+</span> imagenes[<span class="dv">1</span>].attrs[<span class="st">&quot;src&quot;</span>]</span>
<span id="cb920-57"><a href="análisis-de-datos-con-python.html#cb920-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-58"><a href="análisis-de-datos-con-python.html#cb920-58" aria-hidden="true" tabindex="-1"></a>url_3 <span class="op">=</span> <span class="st">&quot;https:&quot;</span> <span class="op">+</span>imagenes[<span class="dv">2</span>].attrs[<span class="st">&quot;src&quot;</span>]</span>
<span id="cb920-59"><a href="análisis-de-datos-con-python.html#cb920-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-60"><a href="análisis-de-datos-con-python.html#cb920-60" aria-hidden="true" tabindex="-1"></a>urls <span class="op">=</span> [url_1, url_2, url_3]</span>
<span id="cb920-61"><a href="análisis-de-datos-con-python.html#cb920-61" aria-hidden="true" tabindex="-1"></a>urls</span>
<span id="cb920-62"><a href="análisis-de-datos-con-python.html#cb920-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-63"><a href="análisis-de-datos-con-python.html#cb920-63" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">3</span>): </span>
<span id="cb920-64"><a href="análisis-de-datos-con-python.html#cb920-64" aria-hidden="true" tabindex="-1"></a>    img_data <span class="op">=</span> requests.get(urls[i]).content</span>
<span id="cb920-65"><a href="análisis-de-datos-con-python.html#cb920-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;imagen&quot;</span> <span class="op">+</span> <span class="bu">str</span>(i) <span class="op">+</span> <span class="st">&quot;.jpg&quot;</span>, <span class="st">&quot;wb&quot;</span>) <span class="im">as</span> handler:</span>
<span id="cb920-66"><a href="análisis-de-datos-con-python.html#cb920-66" aria-hidden="true" tabindex="-1"></a>        handler.write(img_data)</span></code></pre></div>
</div>
<div id="ejemplo-2-datos-de-libros" class="section level4 hasAnchor" number="4.9.2.3">
<h4><span class="header-section-number">4.9.2.3</span> Ejemplo 2: Datos de libros<a href="análisis-de-datos-con-python.html#ejemplo-2-datos-de-libros" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb921"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb921-1"><a href="análisis-de-datos-con-python.html#cb921-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importing the libraries</span></span>
<span id="cb921-2"><a href="análisis-de-datos-con-python.html#cb921-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb921-3"><a href="análisis-de-datos-con-python.html#cb921-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb921-4"><a href="análisis-de-datos-con-python.html#cb921-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb921-5"><a href="análisis-de-datos-con-python.html#cb921-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-6"><a href="análisis-de-datos-con-python.html#cb921-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Request</span></span>
<span id="cb921-7"><a href="análisis-de-datos-con-python.html#cb921-7" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(<span class="st">&#39;http://books.toscrape.com/&#39;</span>)</span>
<span id="cb921-8"><a href="análisis-de-datos-con-python.html#cb921-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-9"><a href="análisis-de-datos-con-python.html#cb921-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos los datos</span></span>
<span id="cb921-10"><a href="análisis-de-datos-con-python.html#cb921-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(r.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb921-11"><a href="análisis-de-datos-con-python.html#cb921-11" aria-hidden="true" tabindex="-1"></a><span class="co">#print(soup)</span></span>
<span id="cb921-12"><a href="análisis-de-datos-con-python.html#cb921-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-13"><a href="análisis-de-datos-con-python.html#cb921-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Generamos una variable que tenga toda la info con el atributo produc_pod</span></span>
<span id="cb921-14"><a href="análisis-de-datos-con-python.html#cb921-14" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> soup.find_all(attrs<span class="op">=</span>{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;product_pod&#39;</span>})</span>
<span id="cb921-15"><a href="análisis-de-datos-con-python.html#cb921-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-16"><a href="análisis-de-datos-con-python.html#cb921-16" aria-hidden="true" tabindex="-1"></a><span class="co"># let&#39;s check how many results we got</span></span>
<span id="cb921-17"><a href="análisis-de-datos-con-python.html#cb921-17" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(results)</span>
<span id="cb921-18"><a href="análisis-de-datos-con-python.html#cb921-18" aria-hidden="true" tabindex="-1"></a><span class="co">#print(results)</span></span>
<span id="cb921-19"><a href="análisis-de-datos-con-python.html#cb921-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-20"><a href="análisis-de-datos-con-python.html#cb921-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploremos el primer libro</span></span>
<span id="cb921-21"><a href="análisis-de-datos-con-python.html#cb921-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-22"><a href="análisis-de-datos-con-python.html#cb921-22" aria-hidden="true" tabindex="-1"></a>first_book <span class="op">=</span> results[<span class="dv">0</span>]</span>
<span id="cb921-23"><a href="análisis-de-datos-con-python.html#cb921-23" aria-hidden="true" tabindex="-1"></a>first_book</span>
<span id="cb921-24"><a href="análisis-de-datos-con-python.html#cb921-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-25"><a href="análisis-de-datos-con-python.html#cb921-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos el titulo</span></span>
<span id="cb921-26"><a href="análisis-de-datos-con-python.html#cb921-26" aria-hidden="true" tabindex="-1"></a>first_book.h3.a.get(<span class="st">&#39;title&#39;</span>)</span>
<span id="cb921-27"><a href="análisis-de-datos-con-python.html#cb921-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-28"><a href="análisis-de-datos-con-python.html#cb921-28" aria-hidden="true" tabindex="-1"></a><span class="co"># su precio</span></span>
<span id="cb921-29"><a href="análisis-de-datos-con-python.html#cb921-29" aria-hidden="true" tabindex="-1"></a>first_book.find(<span class="st">&#39;p&#39;</span>, class_<span class="op">=</span><span class="st">&quot;price_color&quot;</span>).text[<span class="dv">2</span>:] <span class="co"># selecting from the 3rd charcater on to get just the price number</span></span>
<span id="cb921-30"><a href="análisis-de-datos-con-python.html#cb921-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-31"><a href="análisis-de-datos-con-python.html#cb921-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora hagamoslos para todos los libros </span></span>
<span id="cb921-32"><a href="análisis-de-datos-con-python.html#cb921-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-33"><a href="análisis-de-datos-con-python.html#cb921-33" aria-hidden="true" tabindex="-1"></a>names<span class="op">=</span> []</span>
<span id="cb921-34"><a href="análisis-de-datos-con-python.html#cb921-34" aria-hidden="true" tabindex="-1"></a>prices<span class="op">=</span> []</span>
<span id="cb921-35"><a href="análisis-de-datos-con-python.html#cb921-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-36"><a href="análisis-de-datos-con-python.html#cb921-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Rango de páginmas para trabajar </span></span>
<span id="cb921-37"><a href="análisis-de-datos-con-python.html#cb921-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-38"><a href="análisis-de-datos-con-python.html#cb921-38" aria-hidden="true" tabindex="-1"></a>pages <span class="op">=</span> [<span class="bu">str</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">51</span>)]</span>
<span id="cb921-39"><a href="análisis-de-datos-con-python.html#cb921-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-40"><a href="análisis-de-datos-con-python.html#cb921-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> page <span class="kw">in</span> pages:</span>
<span id="cb921-41"><a href="análisis-de-datos-con-python.html#cb921-41" aria-hidden="true" tabindex="-1"></a>  response <span class="op">=</span> requests.get(<span class="st">&#39;http://books.toscrape.com/catalogue/page-&#39;</span> <span class="op">+</span> page <span class="op">+</span> <span class="st">&#39;.html&#39;</span>)</span>
<span id="cb921-42"><a href="análisis-de-datos-con-python.html#cb921-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-43"><a href="análisis-de-datos-con-python.html#cb921-43" aria-hidden="true" tabindex="-1"></a>  page_html <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb921-44"><a href="análisis-de-datos-con-python.html#cb921-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-45"><a href="análisis-de-datos-con-python.html#cb921-45" aria-hidden="true" tabindex="-1"></a>  book_containers <span class="op">=</span> page_html.find_all(attrs<span class="op">=</span>{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;product_pod&#39;</span>})</span>
<span id="cb921-46"><a href="análisis-de-datos-con-python.html#cb921-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-47"><a href="análisis-de-datos-con-python.html#cb921-47" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> book <span class="kw">in</span> book_containers:</span>
<span id="cb921-48"><a href="análisis-de-datos-con-python.html#cb921-48" aria-hidden="true" tabindex="-1"></a>    names.append(book.h3.a.get(<span class="st">&#39;title&#39;</span>))</span>
<span id="cb921-49"><a href="análisis-de-datos-con-python.html#cb921-49" aria-hidden="true" tabindex="-1"></a>    prices.append(book.find(<span class="st">&#39;p&#39;</span>, class_<span class="op">=</span><span class="st">&quot;price_color&quot;</span>).text[<span class="dv">2</span>:])</span>
<span id="cb921-50"><a href="análisis-de-datos-con-python.html#cb921-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-51"><a href="análisis-de-datos-con-python.html#cb921-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a crear una base de datos con todos los libros </span></span>
<span id="cb921-52"><a href="análisis-de-datos-con-python.html#cb921-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-53"><a href="análisis-de-datos-con-python.html#cb921-53" aria-hidden="true" tabindex="-1"></a>books_df <span class="op">=</span> pd.DataFrame(<span class="bu">list</span>(<span class="bu">zip</span>(names, prices)), columns<span class="op">=</span>[<span class="st">&#39;titles&#39;</span>,<span class="st">&#39;prices (£)&#39;</span>])</span>
<span id="cb921-54"><a href="análisis-de-datos-con-python.html#cb921-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-55"><a href="análisis-de-datos-con-python.html#cb921-55" aria-hidden="true" tabindex="-1"></a>books_df</span>
<span id="cb921-56"><a href="análisis-de-datos-con-python.html#cb921-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-57"><a href="análisis-de-datos-con-python.html#cb921-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora hagamoslos para todos los links</span></span>
<span id="cb921-58"><a href="análisis-de-datos-con-python.html#cb921-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-59"><a href="análisis-de-datos-con-python.html#cb921-59" aria-hidden="true" tabindex="-1"></a>links <span class="op">=</span> []</span>
<span id="cb921-60"><a href="análisis-de-datos-con-python.html#cb921-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-61"><a href="análisis-de-datos-con-python.html#cb921-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Rango de páginmas para trabajar </span></span>
<span id="cb921-62"><a href="análisis-de-datos-con-python.html#cb921-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-63"><a href="análisis-de-datos-con-python.html#cb921-63" aria-hidden="true" tabindex="-1"></a>pages <span class="op">=</span> [<span class="bu">str</span>(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">51</span>)]</span>
<span id="cb921-64"><a href="análisis-de-datos-con-python.html#cb921-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-65"><a href="análisis-de-datos-con-python.html#cb921-65" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> page <span class="kw">in</span> pages:</span>
<span id="cb921-66"><a href="análisis-de-datos-con-python.html#cb921-66" aria-hidden="true" tabindex="-1"></a>  response <span class="op">=</span> requests.get(<span class="st">&#39;http://books.toscrape.com/catalogue/page-&#39;</span> <span class="op">+</span> page <span class="op">+</span> <span class="st">&#39;.html&#39;</span>)</span>
<span id="cb921-67"><a href="análisis-de-datos-con-python.html#cb921-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-68"><a href="análisis-de-datos-con-python.html#cb921-68" aria-hidden="true" tabindex="-1"></a>  page_html <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb921-69"><a href="análisis-de-datos-con-python.html#cb921-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-70"><a href="análisis-de-datos-con-python.html#cb921-70" aria-hidden="true" tabindex="-1"></a>  book_containers <span class="op">=</span> page_html.find_all(attrs<span class="op">=</span>{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;product_pod&#39;</span>})</span>
<span id="cb921-71"><a href="análisis-de-datos-con-python.html#cb921-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-72"><a href="análisis-de-datos-con-python.html#cb921-72" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> book <span class="kw">in</span> book_containers:</span>
<span id="cb921-73"><a href="análisis-de-datos-con-python.html#cb921-73" aria-hidden="true" tabindex="-1"></a>    links.append(book.h3.a.get(<span class="st">&quot;href&quot;</span>))</span>
<span id="cb921-74"><a href="análisis-de-datos-con-python.html#cb921-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-75"><a href="análisis-de-datos-con-python.html#cb921-75" aria-hidden="true" tabindex="-1"></a>links[<span class="dv">100</span>]</span>
<span id="cb921-76"><a href="análisis-de-datos-con-python.html#cb921-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-77"><a href="análisis-de-datos-con-python.html#cb921-77" aria-hidden="true" tabindex="-1"></a>enlace_final <span class="op">=</span> []</span>
<span id="cb921-78"><a href="análisis-de-datos-con-python.html#cb921-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-79"><a href="análisis-de-datos-con-python.html#cb921-79" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="bu">len</span>(links)):</span>
<span id="cb921-80"><a href="análisis-de-datos-con-python.html#cb921-80" aria-hidden="true" tabindex="-1"></a>    enlace_final.append(<span class="st">&quot;http://books.toscrape.com/catalogue/&quot;</span> <span class="op">+</span> links[i])</span>
<span id="cb921-81"><a href="análisis-de-datos-con-python.html#cb921-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-82"><a href="análisis-de-datos-con-python.html#cb921-82" aria-hidden="true" tabindex="-1"></a><span class="co">#print(enlace_final)</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 4.9.2: </b> Arme un código que le permita extraer todas las portadas. Utilice la lista enlace_final que acaba de crear</p>
</div>
<div class="sourceCode" id="cb922"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb922-1"><a href="análisis-de-datos-con-python.html#cb922-1" aria-hidden="true" tabindex="-1"></a>enlace_final[<span class="dv">0</span>]</span>
<span id="cb922-2"><a href="análisis-de-datos-con-python.html#cb922-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-3"><a href="análisis-de-datos-con-python.html#cb922-3" aria-hidden="true" tabindex="-1"></a>portadas <span class="op">=</span> []</span>
<span id="cb922-4"><a href="análisis-de-datos-con-python.html#cb922-4" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(enlace_final[<span class="dv">0</span>])</span>
<span id="cb922-5"><a href="análisis-de-datos-con-python.html#cb922-5" aria-hidden="true" tabindex="-1"></a>page_html <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)    </span>
<span id="cb922-6"><a href="análisis-de-datos-con-python.html#cb922-6" aria-hidden="true" tabindex="-1"></a>book_containers <span class="op">=</span> page_html.find_all(<span class="st">&quot;img&quot;</span>)</span>
<span id="cb922-7"><a href="análisis-de-datos-con-python.html#cb922-7" aria-hidden="true" tabindex="-1"></a>book_containers[<span class="dv">0</span>].get(<span class="st">&quot;src&quot;</span>)</span>
<span id="cb922-8"><a href="análisis-de-datos-con-python.html#cb922-8" aria-hidden="true" tabindex="-1"></a>enlace_book <span class="op">=</span> <span class="st">&quot;http://books.toscrape.com/&quot;</span> <span class="op">+</span> book_containers[<span class="dv">0</span>].get(<span class="st">&quot;src&quot;</span>)</span>
<span id="cb922-9"><a href="análisis-de-datos-con-python.html#cb922-9" aria-hidden="true" tabindex="-1"></a>enlace_book</span>
<span id="cb922-10"><a href="análisis-de-datos-con-python.html#cb922-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-11"><a href="análisis-de-datos-con-python.html#cb922-11" aria-hidden="true" tabindex="-1"></a><span class="co">#enlace_final</span></span>
<span id="cb922-12"><a href="análisis-de-datos-con-python.html#cb922-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-13"><a href="análisis-de-datos-con-python.html#cb922-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora hagamoslos para todos las portadas </span></span>
<span id="cb922-14"><a href="análisis-de-datos-con-python.html#cb922-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-15"><a href="análisis-de-datos-con-python.html#cb922-15" aria-hidden="true" tabindex="-1"></a>portadas <span class="op">=</span> []</span>
<span id="cb922-16"><a href="análisis-de-datos-con-python.html#cb922-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-17"><a href="análisis-de-datos-con-python.html#cb922-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Rango a trabajar </span></span>
<span id="cb922-18"><a href="análisis-de-datos-con-python.html#cb922-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-19"><a href="análisis-de-datos-con-python.html#cb922-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">100</span>):</span>
<span id="cb922-20"><a href="análisis-de-datos-con-python.html#cb922-20" aria-hidden="true" tabindex="-1"></a>  response <span class="op">=</span> requests.get(enlace_final[i])</span>
<span id="cb922-21"><a href="análisis-de-datos-con-python.html#cb922-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-22"><a href="análisis-de-datos-con-python.html#cb922-22" aria-hidden="true" tabindex="-1"></a>  page_html <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb922-23"><a href="análisis-de-datos-con-python.html#cb922-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-24"><a href="análisis-de-datos-con-python.html#cb922-24" aria-hidden="true" tabindex="-1"></a>  book_containers <span class="op">=</span> page_html.find_all(<span class="st">&quot;img&quot;</span>)</span>
<span id="cb922-25"><a href="análisis-de-datos-con-python.html#cb922-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-26"><a href="análisis-de-datos-con-python.html#cb922-26" aria-hidden="true" tabindex="-1"></a>  enlace_book <span class="op">=</span> <span class="st">&quot;http://books.toscrape.com/&quot;</span> <span class="op">+</span> book_containers[<span class="dv">0</span>].get(<span class="st">&quot;src&quot;</span>)</span>
<span id="cb922-27"><a href="análisis-de-datos-con-python.html#cb922-27" aria-hidden="true" tabindex="-1"></a>  portadas.append(enlace_book)</span>
<span id="cb922-28"><a href="análisis-de-datos-con-python.html#cb922-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-29"><a href="análisis-de-datos-con-python.html#cb922-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportemos </span></span>
<span id="cb922-30"><a href="análisis-de-datos-con-python.html#cb922-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb922-31"><a href="análisis-de-datos-con-python.html#cb922-31" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">10</span>): </span>
<span id="cb922-32"><a href="análisis-de-datos-con-python.html#cb922-32" aria-hidden="true" tabindex="-1"></a>    img_data <span class="op">=</span> requests.get(portadas[i]).content</span>
<span id="cb922-33"><a href="análisis-de-datos-con-python.html#cb922-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&quot;imagen&quot;</span> <span class="op">+</span> <span class="bu">str</span>(i) <span class="op">+</span> <span class="st">&quot;.jpg&quot;</span>, <span class="st">&quot;wb&quot;</span>) <span class="im">as</span> handler:</span>
<span id="cb922-34"><a href="análisis-de-datos-con-python.html#cb922-34" aria-hidden="true" tabindex="-1"></a>        handler.write(img_data)</span></code></pre></div>
</div>
<div id="ejemplo-3-datos-de-supermercado" class="section level4 hasAnchor" number="4.9.2.4">
<h4><span class="header-section-number">4.9.2.4</span> Ejemplo 3: Datos de supermercado<a href="análisis-de-datos-con-python.html#ejemplo-3-datos-de-supermercado" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Vamos a operar en dos pasos para que vean una forma alternativa de hacer un scrapping</p></li>
<li><p>Vamos a scrapiar la página de frutas del lider # importing the libraries
from bs4 import BeautifulSoup
import requests
import pandas as pd</p></li>
</ul>
<div class="sourceCode" id="cb923"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb923-1"><a href="análisis-de-datos-con-python.html#cb923-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importing the libraries</span></span>
<span id="cb923-2"><a href="análisis-de-datos-con-python.html#cb923-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb923-3"><a href="análisis-de-datos-con-python.html#cb923-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb923-4"><a href="análisis-de-datos-con-python.html#cb923-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb923-5"><a href="análisis-de-datos-con-python.html#cb923-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-6"><a href="análisis-de-datos-con-python.html#cb923-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Request</span></span>
<span id="cb923-7"><a href="análisis-de-datos-con-python.html#cb923-7" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(<span class="st">&#39;https://www.lider.cl/supermercado/category/Frutas-y-Verduras/Frutas/_/N-1hd567c&#39;</span>)</span>
<span id="cb923-8"><a href="análisis-de-datos-con-python.html#cb923-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-9"><a href="análisis-de-datos-con-python.html#cb923-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos los datos</span></span>
<span id="cb923-10"><a href="análisis-de-datos-con-python.html#cb923-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(r.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb923-11"><a href="análisis-de-datos-con-python.html#cb923-11" aria-hidden="true" tabindex="-1"></a><span class="co">#print(soup)</span></span>
<span id="cb923-12"><a href="análisis-de-datos-con-python.html#cb923-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-13"><a href="análisis-de-datos-con-python.html#cb923-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Generamos una variable que tenga toda la info con el atributo produc_pod</span></span>
<span id="cb923-14"><a href="análisis-de-datos-con-python.html#cb923-14" aria-hidden="true" tabindex="-1"></a>contenedor <span class="op">=</span> soup.find_all(attrs<span class="op">=</span>{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;product-image&#39;</span>})</span>
<span id="cb923-15"><a href="análisis-de-datos-con-python.html#cb923-15" aria-hidden="true" tabindex="-1"></a>pproducto <span class="op">=</span> contenedor[<span class="dv">0</span>]</span>
<span id="cb923-16"><a href="análisis-de-datos-con-python.html#cb923-16" aria-hidden="true" tabindex="-1"></a>pproducto</span>
<span id="cb923-17"><a href="análisis-de-datos-con-python.html#cb923-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-18"><a href="análisis-de-datos-con-python.html#cb923-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos el nombre del producto </span></span>
<span id="cb923-19"><a href="análisis-de-datos-con-python.html#cb923-19" aria-hidden="true" tabindex="-1"></a>nombre <span class="op">=</span> pproducto.find(<span class="st">&#39;img&#39;</span>).get(<span class="st">&quot;alt&quot;</span>)</span>
<span id="cb923-20"><a href="análisis-de-datos-con-python.html#cb923-20" aria-hidden="true" tabindex="-1"></a>nombre</span>
<span id="cb923-21"><a href="análisis-de-datos-con-python.html#cb923-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-22"><a href="análisis-de-datos-con-python.html#cb923-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a obtener los links</span></span>
<span id="cb923-23"><a href="análisis-de-datos-con-python.html#cb923-23" aria-hidden="true" tabindex="-1"></a>enlace <span class="op">=</span> <span class="st">&quot;https://www.lider.cl&quot;</span> <span class="op">+</span> pproducto.find(<span class="st">&#39;a&#39;</span>, class_<span class="op">=</span><span class="st">&quot;product-link&quot;</span>).get(<span class="st">&quot;href&quot;</span>)</span>
<span id="cb923-24"><a href="análisis-de-datos-con-python.html#cb923-24" aria-hidden="true" tabindex="-1"></a>enlace</span>
<span id="cb923-25"><a href="análisis-de-datos-con-python.html#cb923-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-26"><a href="análisis-de-datos-con-python.html#cb923-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora para todos los productos de la pagina </span></span>
<span id="cb923-27"><a href="análisis-de-datos-con-python.html#cb923-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-28"><a href="análisis-de-datos-con-python.html#cb923-28" aria-hidden="true" tabindex="-1"></a>nombre <span class="op">=</span> []</span>
<span id="cb923-29"><a href="análisis-de-datos-con-python.html#cb923-29" aria-hidden="true" tabindex="-1"></a>enlaces <span class="op">=</span> []</span>
<span id="cb923-30"><a href="análisis-de-datos-con-python.html#cb923-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-31"><a href="análisis-de-datos-con-python.html#cb923-31" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(<span class="st">&quot;https://www.lider.cl/supermercado/category/Frutas-y-Verduras/Frutas/_/N-1hd567c&quot;</span>)</span>
<span id="cb923-32"><a href="análisis-de-datos-con-python.html#cb923-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-33"><a href="análisis-de-datos-con-python.html#cb923-33" aria-hidden="true" tabindex="-1"></a>page_html <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb923-34"><a href="análisis-de-datos-con-python.html#cb923-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-35"><a href="análisis-de-datos-con-python.html#cb923-35" aria-hidden="true" tabindex="-1"></a>product_containers <span class="op">=</span> page_html.find_all(attrs<span class="op">=</span>{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;product-image&#39;</span>})</span>
<span id="cb923-36"><a href="análisis-de-datos-con-python.html#cb923-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-37"><a href="análisis-de-datos-con-python.html#cb923-37" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> product <span class="kw">in</span> product_containers:</span>
<span id="cb923-38"><a href="análisis-de-datos-con-python.html#cb923-38" aria-hidden="true" tabindex="-1"></a>    nombre.append(product.find(<span class="st">&#39;img&#39;</span>).get(<span class="st">&quot;alt&quot;</span>))</span>
<span id="cb923-39"><a href="análisis-de-datos-con-python.html#cb923-39" aria-hidden="true" tabindex="-1"></a>    enlaces.append(<span class="st">&quot;https://www.lider.cl&quot;</span> <span class="op">+</span> product.find(<span class="st">&#39;a&#39;</span>, class_<span class="op">=</span><span class="st">&quot;product-link&quot;</span>).get(<span class="st">&quot;href&quot;</span>))</span>
<span id="cb923-40"><a href="análisis-de-datos-con-python.html#cb923-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-41"><a href="análisis-de-datos-con-python.html#cb923-41" aria-hidden="true" tabindex="-1"></a>nombre</span>
<span id="cb923-42"><a href="análisis-de-datos-con-python.html#cb923-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-43"><a href="análisis-de-datos-con-python.html#cb923-43" aria-hidden="true" tabindex="-1"></a>enlaces</span>
<span id="cb923-44"><a href="análisis-de-datos-con-python.html#cb923-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-45"><a href="análisis-de-datos-con-python.html#cb923-45" aria-hidden="true" tabindex="-1"></a>productos_df <span class="op">=</span> pd.DataFrame(<span class="bu">list</span>(<span class="bu">zip</span>(nombre, enlaces)), columns<span class="op">=</span>[<span class="st">&#39;Nombre Producto&#39;</span>,<span class="st">&#39;enlace&#39;</span>])</span>
<span id="cb923-46"><a href="análisis-de-datos-con-python.html#cb923-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb923-47"><a href="análisis-de-datos-con-python.html#cb923-47" aria-hidden="true" tabindex="-1"></a>productos_df.head()</span></code></pre></div>
<ul>
<li>Ahora vamos a operar en el segundo paso. Para cada enlace vamos a crear una base de datos con la información que contiene.</li>
<li>En este caso vamos a iterar sobre los enlaces de los productos</li>
</ul>
<div class="sourceCode" id="cb924"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb924-1"><a href="análisis-de-datos-con-python.html#cb924-1" aria-hidden="true" tabindex="-1"></a><span class="co">#enlaces</span></span>
<span id="cb924-2"><a href="análisis-de-datos-con-python.html#cb924-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-3"><a href="análisis-de-datos-con-python.html#cb924-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre producto </span></span>
<span id="cb924-4"><a href="análisis-de-datos-con-python.html#cb924-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-5"><a href="análisis-de-datos-con-python.html#cb924-5" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(<span class="st">&quot;https://www.lider.cl/supermercado/product/Palta-Palta-Hass-Malla/4545&quot;</span>)</span>
<span id="cb924-6"><a href="análisis-de-datos-con-python.html#cb924-6" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb924-7"><a href="análisis-de-datos-con-python.html#cb924-7" aria-hidden="true" tabindex="-1"></a>contenedor <span class="op">=</span> soup.find_all(attrs<span class="op">=</span>{<span class="st">&#39;class&#39;</span>:<span class="st">&#39;product-info&#39;</span>})</span>
<span id="cb924-8"><a href="análisis-de-datos-con-python.html#cb924-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-9"><a href="análisis-de-datos-con-python.html#cb924-9" aria-hidden="true" tabindex="-1"></a>contenedor</span>
<span id="cb924-10"><a href="análisis-de-datos-con-python.html#cb924-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-11"><a href="análisis-de-datos-con-python.html#cb924-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre del producto</span></span>
<span id="cb924-12"><a href="análisis-de-datos-con-python.html#cb924-12" aria-hidden="true" tabindex="-1"></a>nombre <span class="op">=</span> soup.find(<span class="st">&quot;span&quot;</span>, class_<span class="op">=</span><span class="st">&quot;product-descript&quot;</span>).get_text().strip()</span>
<span id="cb924-13"><a href="análisis-de-datos-con-python.html#cb924-13" aria-hidden="true" tabindex="-1"></a>nombre</span>
<span id="cb924-14"><a href="análisis-de-datos-con-python.html#cb924-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-15"><a href="análisis-de-datos-con-python.html#cb924-15" aria-hidden="true" tabindex="-1"></a>precio <span class="op">=</span> soup.find(<span class="st">&quot;p&quot;</span>, class_<span class="op">=</span><span class="st">&quot;price&quot;</span>).get_text().strip()</span>
<span id="cb924-16"><a href="análisis-de-datos-con-python.html#cb924-16" aria-hidden="true" tabindex="-1"></a>precio</span>
<span id="cb924-17"><a href="análisis-de-datos-con-python.html#cb924-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-18"><a href="análisis-de-datos-con-python.html#cb924-18" aria-hidden="true" tabindex="-1"></a>puntos <span class="op">=</span> soup.find(class_<span class="op">=</span><span class="st">&quot;miclub&quot;</span>).get_text().strip().replace(<span class="st">u&#39;</span><span class="ch">\xa0</span><span class="st">&#39;</span>, <span class="st">u&#39; &#39;</span>)</span>
<span id="cb924-19"><a href="análisis-de-datos-con-python.html#cb924-19" aria-hidden="true" tabindex="-1"></a>puntos</span>
<span id="cb924-20"><a href="análisis-de-datos-con-python.html#cb924-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-21"><a href="análisis-de-datos-con-python.html#cb924-21" aria-hidden="true" tabindex="-1"></a><span class="co">#enlaces</span></span>
<span id="cb924-22"><a href="análisis-de-datos-con-python.html#cb924-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-23"><a href="análisis-de-datos-con-python.html#cb924-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora escalemos...</span></span>
<span id="cb924-24"><a href="análisis-de-datos-con-python.html#cb924-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-25"><a href="análisis-de-datos-con-python.html#cb924-25" aria-hidden="true" tabindex="-1"></a>nombres <span class="op">=</span> []</span>
<span id="cb924-26"><a href="análisis-de-datos-con-python.html#cb924-26" aria-hidden="true" tabindex="-1"></a>precios <span class="op">=</span> []</span>
<span id="cb924-27"><a href="análisis-de-datos-con-python.html#cb924-27" aria-hidden="true" tabindex="-1"></a>puntos <span class="op">=</span>  []</span>
<span id="cb924-28"><a href="análisis-de-datos-con-python.html#cb924-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-29"><a href="análisis-de-datos-con-python.html#cb924-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">10</span>):</span>
<span id="cb924-30"><a href="análisis-de-datos-con-python.html#cb924-30" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(enlaces[i])</span>
<span id="cb924-31"><a href="análisis-de-datos-con-python.html#cb924-31" aria-hidden="true" tabindex="-1"></a>    soup <span class="op">=</span> BeautifulSoup(response.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb924-32"><a href="análisis-de-datos-con-python.html#cb924-32" aria-hidden="true" tabindex="-1"></a>    nombres.append(soup.find(<span class="st">&quot;span&quot;</span>, class_<span class="op">=</span><span class="st">&quot;product-descript&quot;</span>).get_text().strip())</span>
<span id="cb924-33"><a href="análisis-de-datos-con-python.html#cb924-33" aria-hidden="true" tabindex="-1"></a>    precios.append(soup.find(<span class="st">&quot;p&quot;</span>, class_<span class="op">=</span><span class="st">&quot;price&quot;</span>).get_text().strip())</span>
<span id="cb924-34"><a href="análisis-de-datos-con-python.html#cb924-34" aria-hidden="true" tabindex="-1"></a>    puntos.append(soup.find(class_<span class="op">=</span><span class="st">&quot;miclub&quot;</span>).get_text().strip().replace(<span class="st">u&#39;</span><span class="ch">\xa0</span><span class="st">&#39;</span>, <span class="st">u&#39; &#39;</span>))</span>
<span id="cb924-35"><a href="análisis-de-datos-con-python.html#cb924-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-36"><a href="análisis-de-datos-con-python.html#cb924-36" aria-hidden="true" tabindex="-1"></a>puntos</span>
<span id="cb924-37"><a href="análisis-de-datos-con-python.html#cb924-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-38"><a href="análisis-de-datos-con-python.html#cb924-38" aria-hidden="true" tabindex="-1"></a>productos_final_df <span class="op">=</span> pd.DataFrame(<span class="bu">list</span>(<span class="bu">zip</span>(nombres, precios, puntos)), columns<span class="op">=</span>[<span class="st">&#39;Nombre Producto&#39;</span>,<span class="st">&#39;Precio&#39;</span>, <span class="st">&quot;Puntos&quot;</span>])</span>
<span id="cb924-39"><a href="análisis-de-datos-con-python.html#cb924-39" aria-hidden="true" tabindex="-1"></a>productos_final_df</span>
<span id="cb924-40"><a href="análisis-de-datos-con-python.html#cb924-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-41"><a href="análisis-de-datos-con-python.html#cb924-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacemos un merge </span></span>
<span id="cb924-42"><a href="análisis-de-datos-con-python.html#cb924-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-43"><a href="análisis-de-datos-con-python.html#cb924-43" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> productos_df.merge(productos_final_df, </span>
<span id="cb924-44"><a href="análisis-de-datos-con-python.html#cb924-44" aria-hidden="true" tabindex="-1"></a>          on <span class="op">=</span> <span class="st">&quot;Nombre Producto&quot;</span>)</span>
<span id="cb924-45"><a href="análisis-de-datos-con-python.html#cb924-45" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
</div>
<div id="ejemplo-4-datos-de-transparencia" class="section level4 hasAnchor" number="4.9.2.5">
<h4><span class="header-section-number">4.9.2.5</span> Ejemplo 4: Datos de transparencia<a href="análisis-de-datos-con-python.html#ejemplo-4-datos-de-transparencia" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb925"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb925-1"><a href="análisis-de-datos-con-python.html#cb925-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importing the libraries</span></span>
<span id="cb925-2"><a href="análisis-de-datos-con-python.html#cb925-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb925-3"><a href="análisis-de-datos-con-python.html#cb925-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb925-4"><a href="análisis-de-datos-con-python.html#cb925-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb925-5"><a href="análisis-de-datos-con-python.html#cb925-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-6"><a href="análisis-de-datos-con-python.html#cb925-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Request</span></span>
<span id="cb925-7"><a href="análisis-de-datos-con-python.html#cb925-7" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> requests.get(<span class="st">&#39;http://transparencia.mineduc.cl/2018/dotacion/enero/per_planta.html&#39;</span>)</span>
<span id="cb925-8"><a href="análisis-de-datos-con-python.html#cb925-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-9"><a href="análisis-de-datos-con-python.html#cb925-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenemos los datos</span></span>
<span id="cb925-10"><a href="análisis-de-datos-con-python.html#cb925-10" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(r.text, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb925-11"><a href="análisis-de-datos-con-python.html#cb925-11" aria-hidden="true" tabindex="-1"></a><span class="co">#print(soup)</span></span>
<span id="cb925-12"><a href="análisis-de-datos-con-python.html#cb925-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-13"><a href="análisis-de-datos-con-python.html#cb925-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;Classes of each table:&#39;</span>)</span>
<span id="cb925-14"><a href="análisis-de-datos-con-python.html#cb925-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> table <span class="kw">in</span> soup.find_all(<span class="st">&#39;table&#39;</span>):</span>
<span id="cb925-15"><a href="análisis-de-datos-con-python.html#cb925-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(table.get(<span class="st">&#39;class&#39;</span>))</span>
<span id="cb925-16"><a href="análisis-de-datos-con-python.html#cb925-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating list with all tables</span></span>
<span id="cb925-17"><a href="análisis-de-datos-con-python.html#cb925-17" aria-hidden="true" tabindex="-1"></a>tables <span class="op">=</span> soup.find_all(<span class="st">&#39;table&#39;</span>)</span>
<span id="cb925-18"><a href="análisis-de-datos-con-python.html#cb925-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-19"><a href="análisis-de-datos-con-python.html#cb925-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos dataset</span></span>
<span id="cb925-20"><a href="análisis-de-datos-con-python.html#cb925-20" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(columns<span class="op">=</span>[<span class="st">&#39;Estamento&#39;</span>, <span class="st">&#39;Profesion&#39;</span>, <span class="st">&#39;Region&#39;</span>,<span class="st">&#39;Sueldo&#39;</span>])</span>
<span id="cb925-21"><a href="análisis-de-datos-con-python.html#cb925-21" aria-hidden="true" tabindex="-1"></a>df</span>
<span id="cb925-22"><a href="análisis-de-datos-con-python.html#cb925-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-23"><a href="análisis-de-datos-con-python.html#cb925-23" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb925-24"><a href="análisis-de-datos-con-python.html#cb925-24" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">&quot;ignore&quot;</span>)</span>
<span id="cb925-25"><a href="análisis-de-datos-con-python.html#cb925-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-26"><a href="análisis-de-datos-con-python.html#cb925-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> table.tbody.find_all(<span class="st">&#39;tr&#39;</span>):    </span>
<span id="cb925-27"><a href="análisis-de-datos-con-python.html#cb925-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb925-28"><a href="análisis-de-datos-con-python.html#cb925-28" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> row.find_all(<span class="st">&#39;td&#39;</span>)</span>
<span id="cb925-29"><a href="análisis-de-datos-con-python.html#cb925-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb925-30"><a href="análisis-de-datos-con-python.html#cb925-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(columns <span class="op">!=</span> []):</span>
<span id="cb925-31"><a href="análisis-de-datos-con-python.html#cb925-31" aria-hidden="true" tabindex="-1"></a>        estamento<span class="op">=</span> columns[<span class="dv">0</span>].text.strip()</span>
<span id="cb925-32"><a href="análisis-de-datos-con-python.html#cb925-32" aria-hidden="true" tabindex="-1"></a>        calif <span class="op">=</span> columns[<span class="dv">5</span>].text.strip()</span>
<span id="cb925-33"><a href="análisis-de-datos-con-python.html#cb925-33" aria-hidden="true" tabindex="-1"></a>        region <span class="op">=</span> columns[<span class="dv">7</span>].text.strip()</span>
<span id="cb925-34"><a href="análisis-de-datos-con-python.html#cb925-34" aria-hidden="true" tabindex="-1"></a>        plata <span class="op">=</span> columns[<span class="dv">10</span>].text.strip()</span>
<span id="cb925-35"><a href="análisis-de-datos-con-python.html#cb925-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb925-36"><a href="análisis-de-datos-con-python.html#cb925-36" aria-hidden="true" tabindex="-1"></a>        df <span class="op">=</span> df.append({<span class="st">&#39;Estamento&#39;</span>: estamento,  <span class="st">&#39;Profesion&#39;</span>: calif, <span class="st">&#39;Region&#39;</span>: region, <span class="st">&#39;Sueldo&#39;</span>: plata}, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb925-37"><a href="análisis-de-datos-con-python.html#cb925-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb925-38"><a href="análisis-de-datos-con-python.html#cb925-38" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
</div>
</div>
<div id="selenium" class="section level3 hasAnchor" number="4.9.3">
<h3><span class="header-section-number">4.9.3</span> Selenium<a href="análisis-de-datos-con-python.html#selenium" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Nos permite hacer web-scraping más sofisticados. Por ejemplo, si deseo hacer un click en algo.</li>
<li>Veremos en detalle un ejemplo que muestra la utilidad de Selenium para automatizar procesos de extracción de datos</li>
</ul>
<div id="ejemplo-1-obteniendo-información-de-tripadvisor" class="section level4 hasAnchor" number="4.9.3.1">
<h4><span class="header-section-number">4.9.3.1</span> Ejemplo 1: Obteniendo información de TripAdvisor<a href="análisis-de-datos-con-python.html#ejemplo-1-obteniendo-información-de-tripadvisor" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb926"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb926-1"><a href="análisis-de-datos-con-python.html#cb926-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb926-2"><a href="análisis-de-datos-con-python.html#cb926-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb926-3"><a href="análisis-de-datos-con-python.html#cb926-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb926-4"><a href="análisis-de-datos-con-python.html#cb926-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb926-5"><a href="análisis-de-datos-con-python.html#cb926-5" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">&quot;ignore&quot;</span>)</span>
<span id="cb926-6"><a href="análisis-de-datos-con-python.html#cb926-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-7"><a href="análisis-de-datos-con-python.html#cb926-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo: obtener los reviews desde Trip Advisor </span></span>
<span id="cb926-8"><a href="análisis-de-datos-con-python.html#cb926-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-9"><a href="análisis-de-datos-con-python.html#cb926-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos librearía principal</span></span>
<span id="cb926-10"><a href="análisis-de-datos-con-python.html#cb926-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb926-11"><a href="análisis-de-datos-con-python.html#cb926-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.common.by <span class="im">import</span> By</span>
<span id="cb926-12"><a href="análisis-de-datos-con-python.html#cb926-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.support.ui <span class="im">import</span> WebDriverWait </span>
<span id="cb926-13"><a href="análisis-de-datos-con-python.html#cb926-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.support <span class="im">import</span> expected_conditions <span class="im">as</span> EC</span>
<span id="cb926-14"><a href="análisis-de-datos-con-python.html#cb926-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-15"><a href="análisis-de-datos-con-python.html#cb926-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Definimos link que vamos a mirar </span></span>
<span id="cb926-16"><a href="análisis-de-datos-con-python.html#cb926-16" aria-hidden="true" tabindex="-1"></a>URL <span class="op">=</span> <span class="st">&quot;https://www.tripadvisor.com/Restaurant_Review-g190328-d8867662-Reviews-Storie_Sapori_La_Valletta-Valletta_Island_of_Malta.html&quot;</span></span>
<span id="cb926-17"><a href="análisis-de-datos-con-python.html#cb926-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-18"><a href="análisis-de-datos-con-python.html#cb926-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Abrimos el navegador que vamos a utilizar </span></span>
<span id="cb926-19"><a href="análisis-de-datos-con-python.html#cb926-19" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb926-20"><a href="análisis-de-datos-con-python.html#cb926-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Abrimos la página web que vamos a utilizar </span></span>
<span id="cb926-21"><a href="análisis-de-datos-con-python.html#cb926-21" aria-hidden="true" tabindex="-1"></a>driver.get(URL)</span>
<span id="cb926-22"><a href="análisis-de-datos-con-python.html#cb926-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-23"><a href="análisis-de-datos-con-python.html#cb926-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacemos que la página web espere 10 segundos, la idea es que pueda cargar el cookie</span></span>
<span id="cb926-24"><a href="análisis-de-datos-con-python.html#cb926-24" aria-hidden="true" tabindex="-1"></a>wait <span class="op">=</span> WebDriverWait(driver, <span class="dv">10</span>)</span>
<span id="cb926-25"><a href="análisis-de-datos-con-python.html#cb926-25" aria-hidden="true" tabindex="-1"></a>wait.until(EC.element_to_be_clickable((By.XPATH, <span class="st">&quot;//button[text()=&#39;I Accept&#39;]&quot;</span>))).click()</span>
<span id="cb926-26"><a href="análisis-de-datos-con-python.html#cb926-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-27"><a href="análisis-de-datos-con-python.html#cb926-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a abrir un archivo csv </span></span>
<span id="cb926-28"><a href="análisis-de-datos-con-python.html#cb926-28" aria-hidden="true" tabindex="-1"></a>csvFile <span class="op">=</span> <span class="bu">open</span>(<span class="st">&quot;reviews.csv&quot;</span>, </span>
<span id="cb926-29"><a href="análisis-de-datos-con-python.html#cb926-29" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;w&quot;</span>, </span>
<span id="cb926-30"><a href="análisis-de-datos-con-python.html#cb926-30" aria-hidden="true" tabindex="-1"></a>               newline<span class="op">=</span><span class="st">&#39;&#39;</span>, </span>
<span id="cb926-31"><a href="análisis-de-datos-con-python.html#cb926-31" aria-hidden="true" tabindex="-1"></a>               encoding<span class="op">=</span><span class="st">&quot;utf-8&quot;</span>)</span>
<span id="cb926-32"><a href="análisis-de-datos-con-python.html#cb926-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-33"><a href="análisis-de-datos-con-python.html#cb926-33" aria-hidden="true" tabindex="-1"></a>csvWriter <span class="op">=</span> csv.writer(csvFile)</span>
<span id="cb926-34"><a href="análisis-de-datos-con-python.html#cb926-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-35"><a href="análisis-de-datos-con-python.html#cb926-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a incluir las columnas para las cuales queremos obtener información </span></span>
<span id="cb926-36"><a href="análisis-de-datos-con-python.html#cb926-36" aria-hidden="true" tabindex="-1"></a>csvWriter.writerow([<span class="st">&#39;Score&#39;</span>,<span class="st">&#39;Date&#39;</span>,<span class="st">&#39;Title&#39;</span>,<span class="st">&#39;Review&#39;</span>])</span>
<span id="cb926-37"><a href="análisis-de-datos-con-python.html#cb926-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-38"><a href="análisis-de-datos-con-python.html#cb926-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, tengo que ir a las recomendaciones y apretar en &quot;more reviews&quot; para </span></span>
<span id="cb926-39"><a href="análisis-de-datos-con-python.html#cb926-39" aria-hidden="true" tabindex="-1"></a><span class="co"># cargar todas las revisiones</span></span>
<span id="cb926-40"><a href="análisis-de-datos-con-python.html#cb926-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-41"><a href="análisis-de-datos-con-python.html#cb926-41" aria-hidden="true" tabindex="-1"></a>driver.find_element_by_xpath(<span class="st">&#39;//*[@id=&quot;taplc_location_reviews_list_resp_rr_resp_0&quot;]/div/div[17]&#39;</span>).click()</span>
<span id="cb926-42"><a href="análisis-de-datos-con-python.html#cb926-42" aria-hidden="true" tabindex="-1"></a>time.sleep(<span class="dv">5</span>) <span class="co"># Wait for reviews to load</span></span>
<span id="cb926-43"><a href="análisis-de-datos-con-python.html#cb926-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-44"><a href="análisis-de-datos-con-python.html#cb926-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a revisar paso a paso como logramos esto</span></span>
<span id="cb926-45"><a href="análisis-de-datos-con-python.html#cb926-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-46"><a href="análisis-de-datos-con-python.html#cb926-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora vamos a buscar los elementos contenidos en las reviews</span></span>
<span id="cb926-47"><a href="análisis-de-datos-con-python.html#cb926-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-48"><a href="análisis-de-datos-con-python.html#cb926-48" aria-hidden="true" tabindex="-1"></a>reviews <span class="op">=</span> driver.find_elements_by_xpath(<span class="st">&quot;//div[@class=&#39;ui_column is-9&#39;]&quot;</span>)</span>
<span id="cb926-49"><a href="análisis-de-datos-con-python.html#cb926-49" aria-hidden="true" tabindex="-1"></a>num_page_items <span class="op">=</span> <span class="bu">min</span>(<span class="bu">len</span>(reviews), <span class="dv">10</span>)</span>
<span id="cb926-50"><a href="análisis-de-datos-con-python.html#cb926-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-51"><a href="análisis-de-datos-con-python.html#cb926-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Vemos la cantidad de reviews de esta pagina</span></span>
<span id="cb926-52"><a href="análisis-de-datos-con-python.html#cb926-52" aria-hidden="true" tabindex="-1"></a>num_page_items</span>
<span id="cb926-53"><a href="análisis-de-datos-con-python.html#cb926-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-54"><a href="análisis-de-datos-con-python.html#cb926-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Iteramos sobre la cantidad de reviews. Para cada review vamos a ir obteniendo la información</span></span>
<span id="cb926-55"><a href="análisis-de-datos-con-python.html#cb926-55" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_page_items):</span>
<span id="cb926-56"><a href="análisis-de-datos-con-python.html#cb926-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Obtenemos el puntaje, la fecha, el titulo y la review</span></span>
<span id="cb926-57"><a href="análisis-de-datos-con-python.html#cb926-57" aria-hidden="true" tabindex="-1"></a>    score_class <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//span[contains(@class, &#39;ui_bubble_rating bubble_&#39;)]&quot;</span>).get_attribute(<span class="st">&quot;class&quot;</span>)</span>
<span id="cb926-58"><a href="análisis-de-datos-con-python.html#cb926-58" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> score_class.split(<span class="st">&quot;_&quot;</span>)[<span class="dv">3</span>]</span>
<span id="cb926-59"><a href="análisis-de-datos-con-python.html#cb926-59" aria-hidden="true" tabindex="-1"></a>    date <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//span[@class=&#39;ratingDate&#39;]&quot;</span>).get_attribute(<span class="st">&quot;title&quot;</span>)</span>
<span id="cb926-60"><a href="análisis-de-datos-con-python.html#cb926-60" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//span[@class=&#39;noQuotes&#39;]&quot;</span>).text</span>
<span id="cb926-61"><a href="análisis-de-datos-con-python.html#cb926-61" aria-hidden="true" tabindex="-1"></a>    review <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//p[@class=&#39;partial_entry&#39;]&quot;</span>).text.replace(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb926-62"><a href="análisis-de-datos-con-python.html#cb926-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Escribimos sobre el CSV</span></span>
<span id="cb926-63"><a href="análisis-de-datos-con-python.html#cb926-63" aria-hidden="true" tabindex="-1"></a>    csvWriter.writerow((score, date, title, review))</span>
<span id="cb926-64"><a href="análisis-de-datos-con-python.html#cb926-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-65"><a href="análisis-de-datos-con-python.html#cb926-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Cerramos CSV</span></span>
<span id="cb926-66"><a href="análisis-de-datos-con-python.html#cb926-66" aria-hidden="true" tabindex="-1"></a>csvFile.close()</span>
<span id="cb926-67"><a href="análisis-de-datos-con-python.html#cb926-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-68"><a href="análisis-de-datos-con-python.html#cb926-68" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora esperamos unos segundos </span></span>
<span id="cb926-69"><a href="análisis-de-datos-con-python.html#cb926-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-70"><a href="análisis-de-datos-con-python.html#cb926-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Apretamos la pagina siguiente </span></span>
<span id="cb926-71"><a href="análisis-de-datos-con-python.html#cb926-71" aria-hidden="true" tabindex="-1"></a>driver.find_element_by_xpath(<span class="st">&quot;/html/body/div[2]/div[2]/div[2]/div[6]/div/div[1]/div[4]/div/div[5]/div/div[18]/div/div/div/a[2]&quot;</span>).click()</span>
<span id="cb926-72"><a href="análisis-de-datos-con-python.html#cb926-72" aria-hidden="true" tabindex="-1"></a>time.sleep(<span class="dv">3</span>)</span>
<span id="cb926-73"><a href="análisis-de-datos-con-python.html#cb926-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-74"><a href="análisis-de-datos-con-python.html#cb926-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Repitamos el proceso </span></span>
<span id="cb926-75"><a href="análisis-de-datos-con-python.html#cb926-75" aria-hidden="true" tabindex="-1"></a>csvFile <span class="op">=</span> <span class="bu">open</span>(<span class="st">&quot;reviews2.csv&quot;</span>, </span>
<span id="cb926-76"><a href="análisis-de-datos-con-python.html#cb926-76" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;w&quot;</span>, </span>
<span id="cb926-77"><a href="análisis-de-datos-con-python.html#cb926-77" aria-hidden="true" tabindex="-1"></a>               newline<span class="op">=</span><span class="st">&#39;&#39;</span>, </span>
<span id="cb926-78"><a href="análisis-de-datos-con-python.html#cb926-78" aria-hidden="true" tabindex="-1"></a>               encoding<span class="op">=</span><span class="st">&quot;utf-8&quot;</span>)</span>
<span id="cb926-79"><a href="análisis-de-datos-con-python.html#cb926-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-80"><a href="análisis-de-datos-con-python.html#cb926-80" aria-hidden="true" tabindex="-1"></a>csvWriter <span class="op">=</span> csv.writer(csvFile)</span>
<span id="cb926-81"><a href="análisis-de-datos-con-python.html#cb926-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-82"><a href="análisis-de-datos-con-python.html#cb926-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a incluir las columnas para las cuales queremos obtener información </span></span>
<span id="cb926-83"><a href="análisis-de-datos-con-python.html#cb926-83" aria-hidden="true" tabindex="-1"></a>csvWriter.writerow([<span class="st">&#39;Score&#39;</span>,<span class="st">&#39;Date&#39;</span>,<span class="st">&#39;Title&#39;</span>,<span class="st">&#39;Review&#39;</span>])</span>
<span id="cb926-84"><a href="análisis-de-datos-con-python.html#cb926-84" aria-hidden="true" tabindex="-1"></a>driver.find_element_by_xpath(<span class="st">&#39;//*[@id=&quot;taplc_location_reviews_list_resp_rr_resp_0&quot;]/div/div[17]&#39;</span>).click()</span>
<span id="cb926-85"><a href="análisis-de-datos-con-python.html#cb926-85" aria-hidden="true" tabindex="-1"></a>time.sleep(<span class="dv">5</span>) <span class="co"># Wait for reviews to load</span></span>
<span id="cb926-86"><a href="análisis-de-datos-con-python.html#cb926-86" aria-hidden="true" tabindex="-1"></a>reviews <span class="op">=</span> driver.find_elements_by_xpath(<span class="st">&quot;//div[@class=&#39;ui_column is-9&#39;]&quot;</span>)</span>
<span id="cb926-87"><a href="análisis-de-datos-con-python.html#cb926-87" aria-hidden="true" tabindex="-1"></a>num_page_items <span class="op">=</span> <span class="bu">min</span>(<span class="bu">len</span>(reviews), <span class="dv">10</span>)</span>
<span id="cb926-88"><a href="análisis-de-datos-con-python.html#cb926-88" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(num_page_items):</span>
<span id="cb926-89"><a href="análisis-de-datos-con-python.html#cb926-89" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Obtenemos el puntaje, la fecha, el titulo y la review</span></span>
<span id="cb926-90"><a href="análisis-de-datos-con-python.html#cb926-90" aria-hidden="true" tabindex="-1"></a>    score_class <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//span[contains(@class, &#39;ui_bubble_rating bubble_&#39;)]&quot;</span>).get_attribute(<span class="st">&quot;class&quot;</span>)</span>
<span id="cb926-91"><a href="análisis-de-datos-con-python.html#cb926-91" aria-hidden="true" tabindex="-1"></a>    score <span class="op">=</span> score_class.split(<span class="st">&quot;_&quot;</span>)[<span class="dv">3</span>]</span>
<span id="cb926-92"><a href="análisis-de-datos-con-python.html#cb926-92" aria-hidden="true" tabindex="-1"></a>    date <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//span[@class=&#39;ratingDate&#39;]&quot;</span>).get_attribute(<span class="st">&quot;title&quot;</span>)</span>
<span id="cb926-93"><a href="análisis-de-datos-con-python.html#cb926-93" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//span[@class=&#39;noQuotes&#39;]&quot;</span>).text</span>
<span id="cb926-94"><a href="análisis-de-datos-con-python.html#cb926-94" aria-hidden="true" tabindex="-1"></a>    review <span class="op">=</span> reviews[i].find_element_by_xpath(<span class="st">&quot;.//p[@class=&#39;partial_entry&#39;]&quot;</span>).text.replace(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb926-95"><a href="análisis-de-datos-con-python.html#cb926-95" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Escribimos sobre el CSV</span></span>
<span id="cb926-96"><a href="análisis-de-datos-con-python.html#cb926-96" aria-hidden="true" tabindex="-1"></a>    csvWriter.writerow((score, date, title, review))</span>
<span id="cb926-97"><a href="análisis-de-datos-con-python.html#cb926-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-98"><a href="análisis-de-datos-con-python.html#cb926-98" aria-hidden="true" tabindex="-1"></a><span class="co"># Cerramos CSV</span></span>
<span id="cb926-99"><a href="análisis-de-datos-con-python.html#cb926-99" aria-hidden="true" tabindex="-1"></a>csvFile.close()</span>
<span id="cb926-100"><a href="análisis-de-datos-con-python.html#cb926-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-101"><a href="análisis-de-datos-con-python.html#cb926-101" aria-hidden="true" tabindex="-1"></a><span class="co"># Cerramos navegador </span></span>
<span id="cb926-102"><a href="análisis-de-datos-con-python.html#cb926-102" aria-hidden="true" tabindex="-1"></a>driver.close()</span></code></pre></div>
<ul>
<li>De esta forma podemos ir automatizando el scraping de diversas formas</li>
<li>Para cualquier proceso de obtención de datos que requiera manipulación más complejas: cambio de páginas, ingresar contraseñas, entre otras. Selenium es una buena opción</li>
</ul>
</div>
<div id="ejemplo-2-ingresar-una-contraseña" class="section level4 hasAnchor" number="4.9.3.2">
<h4><span class="header-section-number">4.9.3.2</span> Ejemplo 2: Ingresar una contraseña<a href="análisis-de-datos-con-python.html#ejemplo-2-ingresar-una-contraseña" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb927"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb927-1"><a href="análisis-de-datos-con-python.html#cb927-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb927-2"><a href="análisis-de-datos-con-python.html#cb927-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb927-3"><a href="análisis-de-datos-con-python.html#cb927-3" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb927-4"><a href="análisis-de-datos-con-python.html#cb927-4" aria-hidden="true" tabindex="-1"></a>driver.get(<span class="st">&quot;https://mail.rediff.com/cgi-bin/login.cgi&quot;</span>)</span>
<span id="cb927-5"><a href="análisis-de-datos-con-python.html#cb927-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb927-6"><a href="análisis-de-datos-con-python.html#cb927-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificamos la posición del nombre de usuario, la contrase{a y señalamos que poner</span></span>
<span id="cb927-7"><a href="análisis-de-datos-con-python.html#cb927-7" aria-hidden="true" tabindex="-1"></a>driver.find_element_by_name(<span class="st">&quot;login&quot;</span>).send_keys(<span class="st">&quot;ncamposb&quot;</span>)</span>
<span id="cb927-8"><a href="análisis-de-datos-con-python.html#cb927-8" aria-hidden="true" tabindex="-1"></a>time.sleep(<span class="fl">0.2</span>)</span>
<span id="cb927-9"><a href="análisis-de-datos-con-python.html#cb927-9" aria-hidden="true" tabindex="-1"></a>driver.find_element_by_name(<span class="st">&quot;passwd&quot;</span>).send_keys(<span class="st">&quot;contraeñaultrasecreta23&quot;</span>)</span>
<span id="cb927-10"><a href="análisis-de-datos-con-python.html#cb927-10" aria-hidden="true" tabindex="-1"></a>time.sleep(<span class="fl">0.4</span>)</span>
<span id="cb927-11"><a href="análisis-de-datos-con-python.html#cb927-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Le indicamos que aprete sobre sign in </span></span>
<span id="cb927-12"><a href="análisis-de-datos-con-python.html#cb927-12" aria-hidden="true" tabindex="-1"></a>driver.find_element_by_class_name(<span class="st">&quot;signinbtn&quot;</span>).click()</span>
<span id="cb927-13"><a href="análisis-de-datos-con-python.html#cb927-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Cerramos el navegador</span></span></code></pre></div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="análisis-de-datos-con-stata.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="referencias.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/bepint/Bookdown-Cursos/edit/master/03-curso3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/bepint/Bookdown-Cursos/blob/master/03-curso3.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
