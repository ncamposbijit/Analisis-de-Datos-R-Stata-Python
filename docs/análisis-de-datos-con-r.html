<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Análisis de datos con R | Análisis de Datos con Stata, R y Python</title>
  <meta name="description" content="Libro enfocado en enseñar análisis de datos utilizando Stata, R y Python" />
  <meta name="generator" content="bookdown 0.39.2 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Análisis de datos con R | Análisis de Datos con Stata, R y Python" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Libro enfocado en enseñar análisis de datos utilizando Stata, R y Python" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Análisis de datos con R | Análisis de Datos con Stata, R y Python" />
  
  <meta name="twitter:description" content="Libro enfocado en enseñar análisis de datos utilizando Stata, R y Python" />
  

<meta name="author" content="Nicolás Campos Bijit" />


<meta name="date" content="2024-07-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="análisis-de-datos-con-python.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="chapter" data-level="2" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html"><i class="fa fa-check"></i><b>2</b> Buenas prácticas de programación</a>
<ul>
<li class="chapter" data-level="2.1" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#programación-defensiva"><i class="fa fa-check"></i><b>2.1</b> Programación defensiva</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#práctica-i-escribir-una-prueba-o-test"><i class="fa fa-check"></i><b>2.1.1</b> Práctica I: escribir una prueba o test</a></li>
<li class="chapter" data-level="2.1.2" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#práctica-ii-no-duplicar-información"><i class="fa fa-check"></i><b>2.1.2</b> Práctica II: no duplicar información</a></li>
<li class="chapter" data-level="2.1.3" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#práctica-iv-estilo-importa"><i class="fa fa-check"></i><b>2.1.3</b> Práctica IV: estilo importa</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#estilo-de-codificación-en-stata"><i class="fa fa-check"></i><b>2.2</b> Estilo de codificación en Stata</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#ser-ordenado-no-es-condición-suficiente-para-tener-un-buen-estilo-de-codificación"><i class="fa fa-check"></i><b>2.2.1</b> Ser ordenado no es condición suficiente para tener un buen estilo de codificación</a></li>
<li class="chapter" data-level="2.2.2" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#escribe-códigos-cortos"><i class="fa fa-check"></i><b>2.2.2</b> Escribe códigos cortos</a></li>
<li class="chapter" data-level="2.2.3" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#el-nombre-de-las-variables-debe-caracterizarla"><i class="fa fa-check"></i><b>2.2.3</b> El nombre de las variables debe caracterizarla</a></li>
<li class="chapter" data-level="2.2.4" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#ten-especial-cuidado-cuando-uses-álgebra-en-los-códigos."><i class="fa fa-check"></i><b>2.2.4</b> Ten especial cuidado cuando uses álgebra en los códigos.</a></li>
<li class="chapter" data-level="2.2.5" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#ser-consistentes"><i class="fa fa-check"></i><b>2.2.5</b> Ser consistentes</a></li>
<li class="chapter" data-level="2.2.6" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#chequear-errores"><i class="fa fa-check"></i><b>2.2.6</b> Chequear errores</a></li>
<li class="chapter" data-level="2.2.7" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#separar-tipos-de-códigos"><i class="fa fa-check"></i><b>2.2.7</b> Separar tipos de códigos</a></li>
<li class="chapter" data-level="2.2.8" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#automatizar-todo-lo-que-se-pueda-automatizar"><i class="fa fa-check"></i><b>2.2.8</b> Automatizar todo lo que se pueda automatizar</a></li>
<li class="chapter" data-level="2.2.9" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#abstraer-para-eliminar-pasos-redundantes."><i class="fa fa-check"></i><b>2.2.9</b> Abstraer para eliminar pasos redundantes.</a></li>
<li class="chapter" data-level="2.2.10" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#crear-códigos-autoexplicativos-que-complementen-a-la-documentación"><i class="fa fa-check"></i><b>2.2.10</b> Crear códigos autoexplicativos que complementen a la documentación</a></li>
<li class="chapter" data-level="2.2.11" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#no-ser-repetitivo"><i class="fa fa-check"></i><b>2.2.11</b> No ser repetitivo</a></li>
<li class="chapter" data-level="2.2.12" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#mensajes-finales-sobre-estilo-de-codificación"><i class="fa fa-check"></i><b>2.2.12</b> Mensajes finales sobre estilo de codificación</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#organización-de-un-proyecto-en-stata"><i class="fa fa-check"></i><b>2.3</b> Organización de un proyecto en Stata</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#flujo-de-trabajo-en-stata"><i class="fa fa-check"></i><b>2.3.1</b> Flujo de trabajo en Stata</a></li>
<li class="chapter" data-level="2.3.2" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#organización-de-archivos-y-carpetas"><i class="fa fa-check"></i><b>2.3.2</b> Organización de archivos y carpetas</a></li>
<li class="chapter" data-level="2.3.3" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#master-do-files"><i class="fa fa-check"></i><b>2.3.3</b> Master <code>do-files</code></a></li>
<li class="chapter" data-level="2.3.4" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#rutas-de-las-carpetas"><i class="fa fa-check"></i><b>2.3.4</b> Rutas de las carpetas:</a></li>
<li class="chapter" data-level="2.3.5" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#utilizar-algún-auxiliar-de-generación-de-código-sublime-text"><i class="fa fa-check"></i><b>2.3.5</b> Utilizar algún auxiliar de generación de código: Sublime Text</a></li>
<li class="chapter" data-level="2.3.6" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#macros-locales-y-globales"><i class="fa fa-check"></i><b>2.3.6</b> Macros locales y globales</a></li>
<li class="chapter" data-level="2.3.7" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#estructuras-de-datos"><i class="fa fa-check"></i><b>2.3.7</b> Estructuras de datos</a></li>
<li class="chapter" data-level="2.3.8" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#iteradores"><i class="fa fa-check"></i><b>2.3.8</b> Iteradores</a></li>
<li class="chapter" data-level="2.3.9" data-path="buenas-prácticas-de-programación.html"><a href="buenas-prácticas-de-programación.html#manejo-de-bases-de-datos"><i class="fa fa-check"></i><b>2.3.9</b> Manejo de bases de datos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="programar-ado---files.html"><a href="programar-ado---files.html"><i class="fa fa-check"></i><b>3</b> Programar ado - files</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="programar-ado---files.html"><a href="programar-ado---files.html#escribir-programas-en-stata"><i class="fa fa-check"></i><b>3.0.1</b> Escribir programas en Stata</a></li>
<li class="chapter" data-level="3.0.2" data-path="programar-ado---files.html"><a href="programar-ado---files.html#por-qué-escribir-programas-abstracción"><i class="fa fa-check"></i><b>3.0.2</b> ¿Por qué escribir programas?: Abstracción</a></li>
<li class="chapter" data-level="3.0.3" data-path="programar-ado---files.html"><a href="programar-ado---files.html#mis-primeros-programas-en-stata"><i class="fa fa-check"></i><b>3.0.3</b> Mis primeros programas en Stata</a></li>
<li class="chapter" data-level="3.0.4" data-path="programar-ado---files.html"><a href="programar-ado---files.html#programa-con-distintos-argumentos"><i class="fa fa-check"></i><b>3.0.4</b> Programa con distintos argumentos</a></li>
<li class="chapter" data-level="3.0.5" data-path="programar-ado---files.html"><a href="programar-ado---files.html#opción-syntax"><i class="fa fa-check"></i><b>3.0.5</b> Opción Syntax</a></li>
<li class="chapter" data-level="3.0.6" data-path="programar-ado---files.html"><a href="programar-ado---files.html#return"><i class="fa fa-check"></i><b>3.0.6</b> Return</a></li>
<li class="chapter" data-level="3.0.7" data-path="programar-ado---files.html"><a href="programar-ado---files.html#implementar-opciones-al-programa"><i class="fa fa-check"></i><b>3.0.7</b> Implementar opciones al programa</a></li>
<li class="chapter" data-level="3.0.8" data-path="programar-ado---files.html"><a href="programar-ado---files.html#incluir-ifin-al-programa"><i class="fa fa-check"></i><b>3.0.8</b> Incluir if/in al programa</a></li>
<li class="chapter" data-level="3.0.9" data-path="programar-ado---files.html"><a href="programar-ado---files.html#generalizar-el-comando-para-incluir-múltiples-variables"><i class="fa fa-check"></i><b>3.0.9</b> Generalizar el comando para incluir múltiples variables</a></li>
<li class="chapter" data-level="3.0.10" data-path="programar-ado---files.html"><a href="programar-ado---files.html#agregar-prefijos-a-los-programas"><i class="fa fa-check"></i><b>3.0.10</b> Agregar prefijos a los programas</a></li>
<li class="chapter" data-level="3.0.11" data-path="programar-ado---files.html"><a href="programar-ado---files.html#programas-para-complementar-función-egen"><i class="fa fa-check"></i><b>3.0.11</b> Programas para complementar función egen</a></li>
<li class="chapter" data-level="3.0.12" data-path="programar-ado---files.html"><a href="programar-ado---files.html#syntax"><i class="fa fa-check"></i><b>3.0.12</b> Syntax</a></li>
<li class="chapter" data-level="3.0.13" data-path="programar-ado---files.html"><a href="programar-ado---files.html#varlist"><i class="fa fa-check"></i><b>3.0.13</b> Varlist</a></li>
<li class="chapter" data-level="3.0.14" data-path="programar-ado---files.html"><a href="programar-ado---files.html#opciones"><i class="fa fa-check"></i><b>3.0.14</b> Opciones</a></li>
<li class="chapter" data-level="3.0.15" data-path="programar-ado---files.html"><a href="programar-ado---files.html#programa-para-calcular-percentiles"><i class="fa fa-check"></i><b>3.0.15</b> Programa para calcular percentiles</a></li>
<li class="chapter" data-level="3.0.16" data-path="programar-ado---files.html"><a href="programar-ado---files.html#programa-con-opción-return"><i class="fa fa-check"></i><b>3.0.16</b> Programa con opción return</a></li>
<li class="chapter" data-level="3.0.17" data-path="programar-ado---files.html"><a href="programar-ado---files.html#agregar-opciones-al-programa"><i class="fa fa-check"></i><b>3.0.17</b> Agregar opciones al programa</a></li>
<li class="chapter" data-level="3.0.18" data-path="programar-ado---files.html"><a href="programar-ado---files.html#generalizar-el-comando-para-incluir-múltiples-variables-1"><i class="fa fa-check"></i><b>3.0.18</b> Generalizar el comando para incluir múltiples variables</a></li>
<li class="chapter" data-level="3.0.19" data-path="programar-ado---files.html"><a href="programar-ado---files.html#agregar-prefijos-a-los-programas-1"><i class="fa fa-check"></i><b>3.0.19</b> Agregar prefijos a los programas</a></li>
<li class="chapter" data-level="3.0.20" data-path="programar-ado---files.html"><a href="programar-ado---files.html#programas-para-complementar-función-egen-1"><i class="fa fa-check"></i><b>3.0.20</b> Programas para complementar función egen</a></li>
<li class="chapter" data-level="3.0.21" data-path="programar-ado---files.html"><a href="programar-ado---files.html#generalización-de-la-función-egen"><i class="fa fa-check"></i><b>3.0.21</b> Generalización de la función egen</a></li>
<li class="chapter" data-level="3.0.22" data-path="programar-ado---files.html"><a href="programar-ado---files.html#documentar-tu-programa"><i class="fa fa-check"></i><b>3.0.22</b> Documentar tu programa</a></li>
<li class="chapter" data-level="3.0.23" data-path="programar-ado---files.html"><a href="programar-ado---files.html#escribir-programas-e-class"><i class="fa fa-check"></i><b>3.0.23</b> Escribir programas e-class</a></li>
<li class="chapter" data-level="3.0.24" data-path="programar-ado---files.html"><a href="programar-ado---files.html#marksample-mark-y-markout"><i class="fa fa-check"></i><b>3.0.24</b> Marksample, Mark y Markout</a></li>
<li class="chapter" data-level="3.0.25" data-path="programar-ado---files.html"><a href="programar-ado---files.html#sortpreserve"><i class="fa fa-check"></i><b>3.0.25</b> Sortpreserve</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exportar-información.html"><a href="exportar-información.html"><i class="fa fa-check"></i><b>4</b> Exportar Información</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="exportar-información.html"><a href="exportar-información.html#stata-markdown"><i class="fa fa-check"></i><b>4.0.1</b> Stata Markdown</a></li>
<li class="chapter" data-level="4.0.2" data-path="exportar-información.html"><a href="exportar-información.html#putdocx"><i class="fa fa-check"></i><b>4.0.2</b> Putdocx</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html"><i class="fa fa-check"></i><b>5</b> Manejo de grandes bases de datos en Stata</a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#estilo-de-codificación-mejorar-velocidad-y-eficiencia"><i class="fa fa-check"></i><b>5.0.1</b> Estilo de codificación: mejorar velocidad y eficiencia</a></li>
<li class="chapter" data-level="5.0.2" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#cargar-grandes-bases-de-datos"><i class="fa fa-check"></i><b>5.0.2</b> Cargar grandes bases de datos</a></li>
<li class="chapter" data-level="5.0.3" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#reducir-el-uso-de-memoria"><i class="fa fa-check"></i><b>5.0.3</b> Reducir el uso de memoria</a></li>
<li class="chapter" data-level="5.0.4" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#reducir-el-tamaño-de-la-base-de-datos"><i class="fa fa-check"></i><b>5.0.4</b> Reducir el tamaño de la base de datos</a></li>
<li class="chapter" data-level="5.0.5" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#eliminar-siempre-resultados-intermedios-incluso-temporales"><i class="fa fa-check"></i><b>5.0.5</b> Eliminar siempre resultados intermedios, incluso temporales</a></li>
<li class="chapter" data-level="5.0.6" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#dividir-en-trozos-cuando-sea-posible"><i class="fa fa-check"></i><b>5.0.6</b> Dividir en trozos cuando sea posible</a></li>
<li class="chapter" data-level="5.0.7" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#sort"><i class="fa fa-check"></i><b>5.0.7</b> Sort</a></li>
<li class="chapter" data-level="5.0.8" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#selección-de-muestra"><i class="fa fa-check"></i><b>5.0.8</b> Selección de muestra</a></li>
<li class="chapter" data-level="5.0.9" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#precaución-con-reshape"><i class="fa fa-check"></i><b>5.0.9</b> Precaución con reshape</a></li>
<li class="chapter" data-level="5.0.10" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#subexpresiones-comunes"><i class="fa fa-check"></i><b>5.0.10</b> Subexpresiones comunes</a></li>
<li class="chapter" data-level="5.0.11" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#recomendaciones-adicionales"><i class="fa fa-check"></i><b>5.0.11</b> Recomendaciones Adicionales</a></li>
<li class="chapter" data-level="5.0.12" data-path="manejo-de-grandes-bases-de-datos-en-stata.html"><a href="manejo-de-grandes-bases-de-datos-en-stata.html#resumen"><i class="fa fa-check"></i><b>5.0.12</b> Resumen</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mata.html"><a href="mata.html"><i class="fa fa-check"></i><b>6</b> Mata</a>
<ul>
<li class="chapter" data-level="6.1" data-path="mata.html"><a href="mata.html#qué-es-mata"><i class="fa fa-check"></i><b>6.1</b> ¿Qué es Mata?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html"><i class="fa fa-check"></i><b>7</b> Análisis de Datos con Python</a>
<ul>
<li class="chapter" data-level="7.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#introducción-al-análisis-de-datos-con-python"><i class="fa fa-check"></i><b>7.1</b> Introducción al análisis de datos con Python</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#antes-de-partir-con-python"><i class="fa fa-check"></i><b>7.1.1</b> Antes de partir con Python…</a></li>
<li class="chapter" data-level="7.1.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#atajos"><i class="fa fa-check"></i><b>7.1.2</b> Atajos</a></li>
<li class="chapter" data-level="7.1.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#extensiones-de-jupyter-notebook"><i class="fa fa-check"></i><b>7.1.3</b> Extensiones de Jupyter Notebook</a></li>
<li class="chapter" data-level="7.1.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#sintaxis-básica"><i class="fa fa-check"></i><b>7.1.4</b> Sintaxis básica</a></li>
<li class="chapter" data-level="7.1.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#variables-y-objetos"><i class="fa fa-check"></i><b>7.1.5</b> Variables y objetos</a></li>
<li class="chapter" data-level="7.1.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#operadores"><i class="fa fa-check"></i><b>7.1.6</b> Operadores</a></li>
<li class="chapter" data-level="7.1.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#estructuras-de-datos-listas-tuplas-conjuntos-diccionarios"><i class="fa fa-check"></i><b>7.1.7</b> Estructuras de datos: listas, tuplas, conjuntos, diccionarios</a></li>
<li class="chapter" data-level="7.1.8" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#funciones-1"><i class="fa fa-check"></i><b>7.1.8</b> Funciones</a></li>
<li class="chapter" data-level="7.1.9" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#methods"><i class="fa fa-check"></i><b>7.1.9</b> Methods</a></li>
<li class="chapter" data-level="7.1.10" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#paquetes"><i class="fa fa-check"></i><b>7.1.10</b> Paquetes</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#librerias-principales-de-python---numpy-matplotlib-pandas"><i class="fa fa-check"></i><b>7.2</b> Librerías principales de Python - Numpy, Matplotlib, Pandas</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#numpy"><i class="fa fa-check"></i><b>7.2.1</b> NumPy</a></li>
<li class="chapter" data-level="7.2.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#matplotlib"><i class="fa fa-check"></i><b>7.2.2</b> Matplotlib</a></li>
<li class="chapter" data-level="7.2.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#pandas"><i class="fa fa-check"></i><b>7.2.3</b> Pandas</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#herramientas-de-programación"><i class="fa fa-check"></i><b>7.3</b> Herramientas de programación</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#controladores-de-flujo"><i class="fa fa-check"></i><b>7.3.1</b> Controladores de flujo</a></li>
<li class="chapter" data-level="7.3.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#if-elif-else"><i class="fa fa-check"></i><b>7.3.2</b> if-elif-else</a></li>
<li class="chapter" data-level="7.3.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#iteradores-básicos"><i class="fa fa-check"></i><b>7.3.3</b> Iteradores básicos</a></li>
<li class="chapter" data-level="7.3.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#iteradores-adicionales-en-python"><i class="fa fa-check"></i><b>7.3.4</b> Iteradores adicionales en Python</a></li>
<li class="chapter" data-level="7.3.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#list-comprehension"><i class="fa fa-check"></i><b>7.3.5</b> List Comprehension</a></li>
<li class="chapter" data-level="7.3.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#generadores"><i class="fa fa-check"></i><b>7.3.6</b> Generadores</a></li>
<li class="chapter" data-level="7.3.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#funciones-2"><i class="fa fa-check"></i><b>7.3.7</b> Funciones</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#manipulación-de-bases-de-datos-parte-i"><i class="fa fa-check"></i><b>7.4</b> Manipulación de bases de datos (Parte I)</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#importar-e-inspeccionar-datos-repaso"><i class="fa fa-check"></i><b>7.4.1</b> Importar e inspeccionar datos (repaso)</a></li>
<li class="chapter" data-level="7.4.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#manipular-repaso"><i class="fa fa-check"></i><b>7.4.2</b> Manipular (repaso)</a></li>
<li class="chapter" data-level="7.4.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#agrupar-calculos"><i class="fa fa-check"></i><b>7.4.3</b> Agrupar calculos</a></li>
<li class="chapter" data-level="7.4.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#aplicar-funciones"><i class="fa fa-check"></i><b>7.4.4</b> Aplicar funciones</a></li>
<li class="chapter" data-level="7.4.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#datos-como-tablas-problemas-y-soluciones"><i class="fa fa-check"></i><b>7.4.5</b> Datos como tablas: problemas y soluciones</a></li>
<li class="chapter" data-level="7.4.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#concatenar-data-frames"><i class="fa fa-check"></i><b>7.4.6</b> Concatenar data frames</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#manipulación-de-bases-de-datos-parte-ii"><i class="fa fa-check"></i><b>7.5</b> Manipulación de bases de datos (Parte II)</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#aplicar-funciones-a-columnas-de-una-base-de-datos"><i class="fa fa-check"></i><b>7.5.1</b> Aplicar funciones a columnas de una base de datos</a></li>
<li class="chapter" data-level="7.5.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#dividir-una-base-de-datos-por-grupos"><i class="fa fa-check"></i><b>7.5.2</b> Dividir una base de datos por grupos</a></li>
<li class="chapter" data-level="7.5.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#librería-datetime"><i class="fa fa-check"></i><b>7.5.3</b> Librería datetime</a></li>
<li class="chapter" data-level="7.5.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#reestructurar-un-dataframe"><i class="fa fa-check"></i><b>7.5.4</b> Reestructurar un DataFrame</a></li>
<li class="chapter" data-level="7.5.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#reestructurar-datos-para-arreglar-posibles-problemas"><i class="fa fa-check"></i><b>7.5.5</b> Reestructurar datos para arreglar posibles problemas</a></li>
<li class="chapter" data-level="7.5.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#missing-values-1"><i class="fa fa-check"></i><b>7.5.6</b> Missing values</a></li>
<li class="chapter" data-level="7.5.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#juntar-bases-de-datos-merge-y-append"><i class="fa fa-check"></i><b>7.5.7</b> Juntar bases de datos: merge y append</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-i"><i class="fa fa-check"></i><b>7.6</b> Análisis de datos (Parte I)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#estadistica-descriptiva"><i class="fa fa-check"></i><b>7.6.1</b> Estadistica Descriptiva</a></li>
<li class="chapter" data-level="7.6.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#la-distribución-normal"><i class="fa fa-check"></i><b>7.6.2</b> La distribución normal</a></li>
<li class="chapter" data-level="7.6.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#test-de-hipotesis"><i class="fa fa-check"></i><b>7.6.3</b> Test de hipotesis</a></li>
<li class="chapter" data-level="7.6.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-1-resumen-exploratorio-de-datos"><i class="fa fa-check"></i><b>7.6.4</b> Ejemplo 1: resumen exploratorio de datos</a></li>
<li class="chapter" data-level="7.6.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-2-datos-con-precios-de-casas"><i class="fa fa-check"></i><b>7.6.5</b> Ejemplo 2: datos con precios de casas</a></li>
<li class="chapter" data-level="7.6.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-3"><i class="fa fa-check"></i><b>7.6.6</b> Ejemplo 3</a></li>
<li class="chapter" data-level="7.6.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-4"><i class="fa fa-check"></i><b>7.6.7</b> Ejemplo 4</a></li>
<li class="chapter" data-level="7.6.8" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#ejemplo-5-desigualdad-de-ingreso-usando-gapminder"><i class="fa fa-check"></i><b>7.6.8</b> Ejemplo 5 : Desigualdad de ingreso usando Gapminder</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-ii"><i class="fa fa-check"></i><b>7.7</b> Análisis de datos (Parte II)</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#optimización-con-scipy"><i class="fa fa-check"></i><b>7.7.1</b> Optimización con Scipy</a></li>
<li class="chapter" data-level="7.7.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#modelo-de-regresión-lineal"><i class="fa fa-check"></i><b>7.7.2</b> Modelo de regresión lineal</a></li>
<li class="chapter" data-level="7.7.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#una-simulación-de-montecarlo"><i class="fa fa-check"></i><b>7.7.3</b> Una simulación de montecarlo</a></li>
<li class="chapter" data-level="7.7.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#bootstraping"><i class="fa fa-check"></i><b>7.7.4</b> Bootstraping</a></li>
<li class="chapter" data-level="7.7.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#regresión-logistica"><i class="fa fa-check"></i><b>7.7.5</b> Regresión Logistica</a></li>
<li class="chapter" data-level="7.7.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#matching"><i class="fa fa-check"></i><b>7.7.6</b> Matching</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#análisis-de-datos-parte-iii"><i class="fa fa-check"></i><b>7.8</b> Análisis de Datos (Parte III)</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#bootstraping-en-el-contexto-de-mco"><i class="fa fa-check"></i><b>7.8.1</b> Bootstraping en el contexto de MCO</a></li>
<li class="chapter" data-level="7.8.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#logit-probabilidad-de-sobrevivir-al-hundimiento-del-titanic"><i class="fa fa-check"></i><b>7.8.2</b> Logit: Probabilidad de sobrevivir al hundimiento del Titanic</a></li>
<li class="chapter" data-level="7.8.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#gmm"><i class="fa fa-check"></i><b>7.8.3</b> GMM</a></li>
<li class="chapter" data-level="7.8.4" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#diferencias-en-diferencias"><i class="fa fa-check"></i><b>7.8.4</b> Diferencias en Diferencias</a></li>
<li class="chapter" data-level="7.8.5" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#plotly"><i class="fa fa-check"></i><b>7.8.5</b> Plotly</a></li>
<li class="chapter" data-level="7.8.6" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#automatización"><i class="fa fa-check"></i><b>7.8.6</b> Automatización</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#web-scraping-en-python"><i class="fa fa-check"></i><b>7.9</b> Web Scraping en Python</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#introducción-3"><i class="fa fa-check"></i><b>7.9.1</b> Introducción</a></li>
<li class="chapter" data-level="7.9.2" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#muchos-ejemplos-practicos-de-web---scraping"><i class="fa fa-check"></i><b>7.9.2</b> Muchos ejemplos practicos de Web - scraping</a></li>
<li class="chapter" data-level="7.9.3" data-path="análisis-de-datos-con-python.html"><a href="análisis-de-datos-con-python.html#selenium"><i class="fa fa-check"></i><b>7.9.3</b> Selenium</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html"><i class="fa fa-check"></i><b>8</b> Análisis de datos con R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#introducción-a-r-y-rstudio"><i class="fa fa-check"></i><b>8.1</b> Introducción a R y RStudio</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#por-qué-utilizar-r-como-lenguaje-de-programación"><i class="fa fa-check"></i><b>8.1.1</b> ¿Por qué utilizar R como lenguaje de programación?</a></li>
<li class="chapter" data-level="8.1.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#términos-clave-y-recurrentes-a-lo-largo-del-curso"><i class="fa fa-check"></i><b>8.1.2</b> Términos clave y recurrentes a lo largo del curso</a></li>
<li class="chapter" data-level="8.1.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#recursos-de-aprendizaje"><i class="fa fa-check"></i><b>8.1.3</b> Recursos de Aprendizaje</a></li>
<li class="chapter" data-level="8.1.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#interfaz-rstudio"><i class="fa fa-check"></i><b>8.1.4</b> Interfaz RStudio</a></li>
<li class="chapter" data-level="8.1.5" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#instalación-de-paquetes-y-ayuda"><i class="fa fa-check"></i><b>8.1.5</b> Instalación de paquetes y ayuda</a></li>
<li class="chapter" data-level="8.1.6" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-objetos"><i class="fa fa-check"></i><b>8.1.6</b> Manipulación de objetos</a></li>
<li class="chapter" data-level="8.1.7" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#tipos-de-objetos"><i class="fa fa-check"></i><b>8.1.7</b> Tipos de objetos</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#herramientas-de-programación-1"><i class="fa fa-check"></i><b>8.2</b> Herramientas de programación</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#objetos-adicionales"><i class="fa fa-check"></i><b>8.2.1</b> Objetos adicionales</a></li>
<li class="chapter" data-level="8.2.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#acceder-a-elementos-de-un-objeto"><i class="fa fa-check"></i><b>8.2.2</b> Acceder a elementos de un objeto</a></li>
<li class="chapter" data-level="8.2.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#tipos-de-objetos-y-datos"><i class="fa fa-check"></i><b>8.2.3</b> Tipos de objetos y datos</a></li>
<li class="chapter" data-level="8.2.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#herramientas-en-r"><i class="fa fa-check"></i><b>8.2.4</b> Herramientas en R</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-i-1"><i class="fa fa-check"></i><b>8.3</b> Manipulación de bases de datos (Parte I)</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#principios-de-programación"><i class="fa fa-check"></i><b>8.3.1</b> Principios de programación</a></li>
<li class="chapter" data-level="8.3.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulacion-de-bases-de-datos-en-r"><i class="fa fa-check"></i><b>8.3.2</b> Manipulacion de bases de datos en R</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-ii-1"><i class="fa fa-check"></i><b>8.4</b> Manipulación de bases de datos (Parte II)</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#funciones-clave"><i class="fa fa-check"></i><b>8.4.1</b> Funciones clave</a></li>
<li class="chapter" data-level="8.4.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#operador-piping"><i class="fa fa-check"></i><b>8.4.2</b> Operador piping</a></li>
<li class="chapter" data-level="8.4.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#proceso-de-análisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar"><i class="fa fa-check"></i><b>8.4.3</b> Proceso de análisis de datos (Parte I): cargar, inspeccionar y limpiar</a></li>
<li class="chapter" data-level="8.4.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#proceso-de-análisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar"><i class="fa fa-check"></i><b>8.4.4</b> Proceso de análisis de datos (Parte II): cargar, inspeccionar y limpiar</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-iii"><i class="fa fa-check"></i><b>8.5</b> Manipulación de bases de datos (Parte III)</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#crear-variables"><i class="fa fa-check"></i><b>8.5.1</b> Crear Variables</a></li>
<li class="chapter" data-level="8.5.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#factores"><i class="fa fa-check"></i><b>8.5.2</b> Factores</a></li>
<li class="chapter" data-level="8.5.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#funciones-útiles-para-transformar-bases-de-datos"><i class="fa fa-check"></i><b>8.5.3</b> Funciones útiles para transformar bases de datos</a></li>
<li class="chapter" data-level="8.5.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#cambio-de-formato-de-los-datos"><i class="fa fa-check"></i><b>8.5.4</b> Cambio de formato de los datos</a></li>
<li class="chapter" data-level="8.5.5" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#juntar-bases-de-datos"><i class="fa fa-check"></i><b>8.5.5</b> Juntar bases de datos</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#análisis-de-datos"><i class="fa fa-check"></i><b>8.6</b> Análisis de datos</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#inspección-de-datos"><i class="fa fa-check"></i><b>8.6.1</b> Inspección de datos</a></li>
<li class="chapter" data-level="8.6.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#estadística-descriptiva"><i class="fa fa-check"></i><b>8.6.2</b> Estadística descriptiva</a></li>
<li class="chapter" data-level="8.6.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#tablas-de-frecuencia"><i class="fa fa-check"></i><b>8.6.3</b> Tablas de frecuencia</a></li>
<li class="chapter" data-level="8.6.4" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#estadística-descriptiva-con-dplyr"><i class="fa fa-check"></i><b>8.6.4</b> Estadística descriptiva con “dplyr”</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#visualización"><i class="fa fa-check"></i><b>8.7</b> Visualización</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#visualización-r-base"><i class="fa fa-check"></i><b>8.7.1</b> Visualización: R base</a></li>
<li class="chapter" data-level="8.7.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#uso-paquete-ggplot"><i class="fa fa-check"></i><b>8.7.2</b> Uso paquete ggplot</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#análisis-de-datos-y-generación-de-informes-con-r-markdown"><i class="fa fa-check"></i><b>8.8</b> Análisis de datos y generación de informes con R Markdown</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#test-de-hipótesis"><i class="fa fa-check"></i><b>8.8.1</b> Test de hipótesis</a></li>
<li class="chapter" data-level="8.8.2" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#regresión-lineal-en-r"><i class="fa fa-check"></i><b>8.8.2</b> Regresión Lineal en R</a></li>
<li class="chapter" data-level="8.8.3" data-path="análisis-de-datos-con-r.html"><a href="análisis-de-datos-con-r.html#r-markdown"><i class="fa fa-check"></i><b>8.8.3</b> R Markdown</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análisis de Datos con Stata, R y Python</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="análisis-de-datos-con-r" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Análisis de datos con R<a href="análisis-de-datos-con-r.html#análisis-de-datos-con-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="introducción-a-r-y-rstudio" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Introducción a R y RStudio<a href="análisis-de-datos-con-r.html#introducción-a-r-y-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="por-qué-utilizar-r-como-lenguaje-de-programación" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> ¿Por qué utilizar R como lenguaje de programación?<a href="análisis-de-datos-con-r.html#por-qué-utilizar-r-como-lenguaje-de-programación" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Código abierto:</strong> Licencia no tiene costo.</p></li>
<li><p><strong>Versátil:</strong> análisis estadístico y econométrico + tareas de
programación útiles (ej. web - scraping).</p></li>
<li><p><strong>Flexible y reproducible:</strong> garantiza reproducibilidad, es flexible
ante cambios y detección de errores.</p></li>
<li><p><strong>Demandado:</strong> Lenguajes de programación de código abierto son solicitados cada vez más en el mercado laboral.</p></li>
</ul>
</div>
<div id="términos-clave-y-recurrentes-a-lo-largo-del-curso" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Términos clave y recurrentes a lo largo del curso<a href="análisis-de-datos-con-r.html#términos-clave-y-recurrentes-a-lo-largo-del-curso" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><strong>RStudio:</strong> Interfaz Gráfica para el usuario. Esta diseñada para un
uso más sencillo de R.</li>
<li><strong>Objetos:</strong> Cualquier cosa que guardes en R. Por ejemplo: bases de
datos, variables, listas de nombres, gráficos.</li>
<li><strong>Funciones:</strong> Una operación producida por un código tal que acepta
insumos y retorna productos.</li>
<li><strong>Paquetes:</strong> Es un conjunto de funciones agrupadas según su objetivo.</li>
<li><strong>Scripts/Códigos:</strong> Documento que contiene todos los comandos
utilizados en un proceso de análisis de datos.</li>
</ul>
</div>
<div id="recursos-de-aprendizaje" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Recursos de Aprendizaje<a href="análisis-de-datos-con-r.html#recursos-de-aprendizaje" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div style="text-align: justify">
<ul>
<li>Hojas de resumen: material disponible con un resumen de los
principales comandos/paquetes/funciones para distintos temas.
Disponibles en: <a href="https://www.rstudio.com/resources/cheatsheets/" class="uri">https://www.rstudio.com/resources/cheatsheets/</a></li>
</ul>
</div>
<ul>
<li>Foros y sitios web:
<ul>
<li><a href="https://stackoverflow.com/questions/tagged/r">Stackoverflow</a></li>
<li><a href="https://preettheman.medium.com/awesome-tricks-every-r-coder-should-know-c4220cd2cfbc">Medium</a></li>
<li><a href="https://posit.co/">El Blog de RStudio</a></li>
</ul></li>
<li>Libros:
<ul>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="https://posit.co/resources/videos/">Recursos sobre R en
español.</a></li>
<li><a href="https://bookdown.org/">Bookdown</a></li>
</ul></li>
<li></li>
</ul>
</div>
<div id="interfaz-rstudio" class="section level3 hasAnchor" number="8.1.4">
<h3><span class="header-section-number">8.1.4</span> Interfaz RStudio<a href="análisis-de-datos-con-r.html#interfaz-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="cuatro-secciones-en-rstudio" class="section level4 hasAnchor" number="8.1.4.1">
<h4><span class="header-section-number">8.1.4.1</span> Cuatro secciones en Rstudio<a href="análisis-de-datos-con-r.html#cuatro-secciones-en-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Las fundamentales son: <em>Scripts, Console,
Environment/Files/Help</em>.</p>
<ul>
<li><strong>Scripts:</strong> Donde desarrollaremos los códigos. Es un cuarderno.</li>
<li><strong>Console:</strong> Donde veremos los resultados.</li>
<li><strong>Environment:</strong> Donde veremos los datos y la información que vamos generando.</li>
<li><strong>Files:</strong> Donde veremos los archivos asociados a nuestros proyectos.</li>
<li><strong>Help:</strong> Donde desarrollaremos los códigos. Es un cuarderno.</li>
</ul>
<p>Para personalizar RStudio hay que ir a: <strong>Tools -&gt; Global Options</strong>.
Allí pueden cambiar el color del ambiente, tipo de letra, orden. La
idea es utilizar RStudio de la forma mas intuitiva posible.</p>
</div>
<div id="escribir-comentarios" class="section level4 hasAnchor" number="8.1.4.2">
<h4><span class="header-section-number">8.1.4.2</span> Escribir comentarios<a href="análisis-de-datos-con-r.html#escribir-comentarios" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Es muy importante escribir comentarios a lo largo de los códigos. Tambíen es importante saber escribir <strong>buenos</strong> comentarios. Una buena guía que habla un poco de eso y de muchas cosas más es: <a href="https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf">Code and Data for the Social Sciences: A Practitioner’s Guide</a>.</p>
<p><code>(#)</code> para escribir comentarios en el script. Si quiero marcar varias
lineas como comentario: <code>ctrl + shift + c</code></p>
</div>
<div id="índices" class="section level4 hasAnchor" number="8.1.4.3">
<h4><span class="header-section-number">8.1.4.3</span> Índices<a href="análisis-de-datos-con-r.html#índices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Es importante escribir índices para documentar sus códigos. Para
observarlo debo escribir: <code>ctrl + shift + o</code></p>
<p>Los títulos pueden estar jerarquizados:</p>
<div class="sourceCode" id="cb851"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb851-1"><a href="análisis-de-datos-con-r.html#cb851-1" aria-hidden="true" tabindex="-1"></a><span class="co"># El mas importante</span></span>
<span id="cb851-2"><a href="análisis-de-datos-con-r.html#cb851-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Este es un poco menos importante</span></span>
<span id="cb851-3"><a href="análisis-de-datos-con-r.html#cb851-3" aria-hidden="true" tabindex="-1"></a><span class="do">### Este es un poco menos importante que el anterior</span></span>
<span id="cb851-4"><a href="análisis-de-datos-con-r.html#cb851-4" aria-hidden="true" tabindex="-1"></a><span class="do">#### El menos importante</span></span></code></pre></div>
<p>Es importante actualizarlo constantemente para no perder funcionalidad.</p>
</div>
</div>
<div id="instalación-de-paquetes-y-ayuda" class="section level3 hasAnchor" number="8.1.5">
<h3><span class="header-section-number">8.1.5</span> Instalación de paquetes y ayuda<a href="análisis-de-datos-con-r.html#instalación-de-paquetes-y-ayuda" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Los paquetes son basicamente conjuntos de funciones. Los paquetes se
instalan una vez, pero se llaman siempre que se vayan a utilizar.</p>
<div id="librerías" class="section level4 hasAnchor" number="8.1.5.1">
<h4><span class="header-section-number">8.1.5.1</span> Librerías<a href="análisis-de-datos-con-r.html#librerías" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Esto se puede hacer de dos maneras:</p>
<ol style="list-style-type: decimal">
<li><p>Desde la pestaña <em>packages</em> en la esquina inferior derecha.</p></li>
<li><p>Con comandos</p></li>
</ol>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="análisis-de-datos-con-r.html#cb852-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<p>Varios paquetes a la vez:</p>
<div class="sourceCode" id="cb853"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb853-1"><a href="análisis-de-datos-con-r.html#cb853-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;dplyr&quot;</span>,<span class="st">&quot;ggplot2&quot;</span>,<span class="st">&quot;rio&quot;</span>))</span></code></pre></div>
<p>Error común:</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb854-1"><a href="análisis-de-datos-con-r.html#cb854-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
<p>Por lo general es bueno instalarlas desde el inicio del trabajo dado que
comúnmente usamos las mismas librerías al realizar análisis de datos.
Con esta función le decimos a R que instale el paquete si este no está
instalado (algo típico cuando cambiamos de computador):</p>
<div class="sourceCode" id="cb855"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb855-1"><a href="análisis-de-datos-con-r.html#cb855-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(dplyr)) {<span class="fu">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)}</span></code></pre></div>
<p>Cargar librerías:</p>
<div class="sourceCode" id="cb856"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb856-1"><a href="análisis-de-datos-con-r.html#cb856-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>Si queremos ver que hay dentro de cada paquete:</p>
<div class="sourceCode" id="cb857"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb857-1"><a href="análisis-de-datos-con-r.html#cb857-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="st">&quot;package:dplyr&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>) <span class="co">#ls = list objects</span></span></code></pre></div>
<p><strong>Importante</strong>: el paquete debe ser instalado una vez, pero cargado cada
vez que se utilice. Muchas veces hay actualizaciones. Para revisar e
instalarlas.</p>
<div class="sourceCode" id="cb858"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb858-1"><a href="análisis-de-datos-con-r.html#cb858-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>()</span></code></pre></div>
<p>Alternativamente puedo conectar paquete con función utilizando <code>::</code>. Si
hago esto no es necesario llamar a la librería para utilizar esa función
en particular. No obstante, lo recomendable es cargar todas las
librerías de los paquetes que voy a utilizar al inicio.</p>
</div>
<div id="función-de-ayuda" class="section level4 hasAnchor" number="8.1.5.2">
<h4><span class="header-section-number">8.1.5.2</span> Función de ayuda<a href="análisis-de-datos-con-r.html#función-de-ayuda" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sobre una función en particular:</p>
<div class="sourceCode" id="cb859"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb859-1"><a href="análisis-de-datos-con-r.html#cb859-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(mean) </span>
<span id="cb859-2"><a href="análisis-de-datos-con-r.html#cb859-2" aria-hidden="true" tabindex="-1"></a>?mean </span>
<span id="cb859-3"><a href="análisis-de-datos-con-r.html#cb859-3" aria-hidden="true" tabindex="-1"></a>mean <span class="co">#pulsar la tecla F1 </span></span>
<span id="cb859-4"><a href="análisis-de-datos-con-r.html#cb859-4" aria-hidden="true" tabindex="-1"></a>sd</span></code></pre></div>
<p>Sobre un paquete en particular:</p>
<div class="sourceCode" id="cb860"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb860-1"><a href="análisis-de-datos-con-r.html#cb860-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;dplyr&quot;</span>) </span>
<span id="cb860-2"><a href="análisis-de-datos-con-r.html#cb860-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help=</span><span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
</div>
<div id="shortcuts-útiles" class="section level4 hasAnchor" number="8.1.5.3">
<h4><span class="header-section-number">8.1.5.3</span> <em>Shortcuts</em> útiles<a href="análisis-de-datos-con-r.html#shortcuts-útiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><code>Esc</code>: interrumpir el comando actual</li>
<li><code>Ctrl + s</code>: guardar</li>
<li><code>tab</code>: autocompletar</li>
<li><code>Ctrl + Enter</code>: ejecutar línea</li>
<li><code>Ctrl + Shift + C</code>: comentar</li>
<li><code>&lt;-</code>: Alt + - / option + -</li>
<li><code>%&gt;%</code>: ctrl + shift + m (<em>pipe</em>)</li>
<li><code>Ctrl + l</code>: limpiar</li>
<li><code>Ctrl + alt + b</code>: ejecutar todo hasta aquí (flechas en la consola me
permiten ver los últimos comandos utilizados).</li>
<li><code>Shift + lineas</code>: seleccionar varias lineas</li>
<li><code>Ctrl + f</code>: buscar/remplazar</li>
<li><code>Ctrl + "flecha arriba" en la consola</code>: ver comandos utilizados.</li>
</ul>
</div>
<div id="limpiar-environment-en-r" class="section level4 hasAnchor" number="8.1.5.4">
<h4><span class="header-section-number">8.1.5.4</span> Limpiar <em>“environment”</em> en R<a href="análisis-de-datos-con-r.html#limpiar-environment-en-r" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Eliminar todos los objetos:</p>
<div class="sourceCode" id="cb861"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb861-1"><a href="análisis-de-datos-con-r.html#cb861-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span></code></pre></div>
<p>Eliminar sólo un objeto:</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="análisis-de-datos-con-r.html#cb862-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(data1)</span></code></pre></div>
<p>Si quiero limpiar la consola tengo que apretar <code>Ctrl + L</code>.</p>
</div>
<div id="identificar-el-paquete-de-una-función" class="section level4 hasAnchor" number="8.1.5.5">
<h4><span class="header-section-number">8.1.5.5</span> Identificar el paquete de una función<a href="análisis-de-datos-con-r.html#identificar-el-paquete-de-una-función" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Hay ocasiones en que queremos saber de que paquete es una función
determinada. Para ello, revisar:
<a href="https://sebastiansauer.github.io/finds_funs/" class="uri">https://sebastiansauer.github.io/finds_funs/</a></p>
</div>
<div id="error-común" class="section level4 hasAnchor" number="8.1.5.6">
<h4><span class="header-section-number">8.1.5.6</span> Error común<a href="análisis-de-datos-con-r.html#error-común" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb863"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb863-1"><a href="análisis-de-datos-con-r.html#cb863-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;hola&quot;</span></span></code></pre></div>
<p>Noten que en la consola aparece un signo <code>+</code>. En estos casos RStudio se
detiene porque probablemente se les olvido un <code>)</code> o bien un <code>#</code>. En
estos casos hay que corregir el error para ejecutar nuevamente y luego
apretar <code>esc</code> en la consola para seguir ejecutando los comandos.</p>
</div>
</div>
<div id="manipulación-de-objetos" class="section level3 hasAnchor" number="8.1.6">
<h3><span class="header-section-number">8.1.6</span> Manipulación de objetos<a href="análisis-de-datos-con-r.html#manipulación-de-objetos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="usar-r-como-calculadoraejecutar-comandos" class="section level4 hasAnchor" number="8.1.6.1">
<h4><span class="header-section-number">8.1.6.1</span> Usar R como calculadora/ejecutar comandos<a href="análisis-de-datos-con-r.html#usar-r-como-calculadoraejecutar-comandos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>De manera separada (seleccionar las <code>ordenes+ctrl+Enter</code>):</p>
<div class="sourceCode" id="cb864"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb864-1"><a href="análisis-de-datos-con-r.html#cb864-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">2</span> </span>
<span id="cb864-2"><a href="análisis-de-datos-con-r.html#cb864-2" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">*</span><span class="dv">5</span><span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
<p>Ejecutar todas las instrucciones:</p>
<div class="sourceCode" id="cb865"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb865-1"><a href="análisis-de-datos-con-r.html#cb865-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">2</span> ; <span class="dv">3</span><span class="sc">*</span><span class="dv">5</span><span class="sc">^</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>)</span>
<span id="cb865-2"><a href="análisis-de-datos-con-r.html#cb865-2" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">+</span><span class="dv">4</span> </span>
<span id="cb865-3"><a href="análisis-de-datos-con-r.html#cb865-3" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">*</span><span class="dv">4</span> </span>
<span id="cb865-4"><a href="análisis-de-datos-con-r.html#cb865-4" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span><span class="sc">/</span><span class="dv">4</span> </span>
<span id="cb865-5"><a href="análisis-de-datos-con-r.html#cb865-5" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span><span class="sc">^</span><span class="dv">7</span></span>
<span id="cb865-6"><a href="análisis-de-datos-con-r.html#cb865-6" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span><span class="sc">^</span><span class="dv">77</span></span>
<span id="cb865-7"><a href="análisis-de-datos-con-r.html#cb865-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb865-8"><a href="análisis-de-datos-con-r.html#cb865-8" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">10</span>) </span>
<span id="cb865-9"><a href="análisis-de-datos-con-r.html#cb865-9" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">1</span>)</span>
<span id="cb865-10"><a href="análisis-de-datos-con-r.html#cb865-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb865-11"><a href="análisis-de-datos-con-r.html#cb865-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">91</span>) <span class="co"># raiz cuadrada</span></span>
<span id="cb865-12"><a href="análisis-de-datos-con-r.html#cb865-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb865-13"><a href="análisis-de-datos-con-r.html#cb865-13" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fl">7.3</span>) <span class="co"># redondear</span></span></code></pre></div>
<p>Incluso grandes operaciones:</p>
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="análisis-de-datos-con-r.html#cb866-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">91</span>) <span class="sc">+</span> <span class="dv">4892788</span><span class="sc">*</span><span class="dv">673</span> <span class="sc">-</span> (<span class="fu">log</span>(<span class="dv">4</span>)<span class="sc">*</span><span class="fu">round</span>(<span class="fl">67893.9181</span>, <span class="at">digits =</span> <span class="dv">2</span>))</span></code></pre></div>
<p>Incluso uso de números imaginarios:</p>
<div class="sourceCode" id="cb867"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb867-1"><a href="análisis-de-datos-con-r.html#cb867-1" aria-hidden="true" tabindex="-1"></a>2i<span class="sc">+</span>5i<span class="sc">+</span><span class="fu">sqrt</span>(25i)</span></code></pre></div>
</div>
<div id="creacion-de-objetos-asignaciones-y-funciones" class="section level4 hasAnchor" number="8.1.6.2">
<h4><span class="header-section-number">8.1.6.2</span> Creacion de objetos: asignaciones y funciones<a href="análisis-de-datos-con-r.html#creacion-de-objetos-asignaciones-y-funciones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>con el signo <code>&lt;-</code> asignamos valores. También se puede utilizar <code>=</code>, pero
no es recomendable, ya que confunde.</p>
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="análisis-de-datos-con-r.html#cb868-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span> </span>
<span id="cb868-2"><a href="análisis-de-datos-con-r.html#cb868-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<p>Las asignaciones son MUDAS. Si no las llamo, no aparecen en la consola.
Lo anterior es una operación sencilla, pero lo que queremos es generar
asignaciones con funciones.</p>
<p>Podemos utilizar funciones. Las funciones son la parte central del uso
de R. Algunas funciones vienen instaladas en R. Otras funciones hay que
obtenerlas desde paquetes. También es posible escribir tus propias
funciones <code>()</code>. Las funciones estan por lo general escritas en
paréntesis, por ejemplo <code>filter()</code>. Hay ocasiones en que las funciones
estan relacionadas con un paquete específico <code>dplyr::filter()</code>.</p>
<ul>
<li>Ejemplo 1: función simple</li>
</ul>
<div class="sourceCode" id="cb869"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb869-1"><a href="análisis-de-datos-con-r.html#cb869-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">49</span>)</span></code></pre></div>
<ul>
<li>Ejemplo 2: sobre una base de datos</li>
</ul>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="análisis-de-datos-con-r.html#cb870-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars<span class="sc">$</span>mpg)</span></code></pre></div>
<p><em>Nota:</em> mtcars viene incluidad en R.</p>
<p>Para ver mas:</p>
<div class="sourceCode" id="cb871"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb871-1"><a href="análisis-de-datos-con-r.html#cb871-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code></pre></div>
<p>Otra función:</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="análisis-de-datos-con-r.html#cb872-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span> </span>
<span id="cb872-2"><a href="análisis-de-datos-con-r.html#cb872-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb872-3"><a href="análisis-de-datos-con-r.html#cb872-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span><span class="fu">c</span>(x,y) </span>
<span id="cb872-4"><a href="análisis-de-datos-con-r.html#cb872-4" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<p>Uso de funciones aritméticas:</p>
<div class="sourceCode" id="cb873"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb873-1"><a href="análisis-de-datos-con-r.html#cb873-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(z) </span>
<span id="cb873-2"><a href="análisis-de-datos-con-r.html#cb873-2" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(z)</span></code></pre></div>
<p>Relaciones entre objetos:</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="análisis-de-datos-con-r.html#cb874-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">mean</span>(z)</span></code></pre></div>
<p>Creación de objetos por asignación:</p>
<div class="sourceCode" id="cb875"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb875-1"><a href="análisis-de-datos-con-r.html#cb875-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span><span class="sc">+</span><span class="dv">10</span> </span>
<span id="cb875-2"><a href="análisis-de-datos-con-r.html#cb875-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span><span class="dv">4</span></span></code></pre></div>
<p>Comparar objetos:</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="análisis-de-datos-con-r.html#cb876-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">&gt;</span> b</span></code></pre></div>
<p>Notar que las asignaciones son silenciosas:</p>
<div class="sourceCode" id="cb877"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb877-1"><a href="análisis-de-datos-con-r.html#cb877-1" aria-hidden="true" tabindex="-1"></a>a </span>
<span id="cb877-2"><a href="análisis-de-datos-con-r.html#cb877-2" aria-hidden="true" tabindex="-1"></a>b </span>
<span id="cb877-3"><a href="análisis-de-datos-con-r.html#cb877-3" aria-hidden="true" tabindex="-1"></a><span class="co"># o altenativamente utilizar print </span></span>
<span id="cb877-4"><a href="análisis-de-datos-con-r.html#cb877-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a) </span>
<span id="cb877-5"><a href="análisis-de-datos-con-r.html#cb877-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(b)</span></code></pre></div>
<p>Creación de objetos usando funciones:</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="análisis-de-datos-con-r.html#cb878-1" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> <span class="fu">c</span>(a,b)</span>
<span id="cb878-2"><a href="análisis-de-datos-con-r.html#cb878-2" aria-hidden="true" tabindex="-1"></a>promedio <span class="ot">&lt;-</span> <span class="fu">mean</span>(valores)</span>
<span id="cb878-3"><a href="análisis-de-datos-con-r.html#cb878-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(promedio)</span>
<span id="cb878-4"><a href="análisis-de-datos-con-r.html#cb878-4" aria-hidden="true" tabindex="-1"></a>promedio</span></code></pre></div>
<p>Podemos escribir un promedio aquí usando función <code>mean():</code></p>
<div class="sourceCode" id="cb879"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb879-1"><a href="análisis-de-datos-con-r.html#cb879-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span> </span>
<span id="cb879-2"><a href="análisis-de-datos-con-r.html#cb879-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb879-3"><a href="análisis-de-datos-con-r.html#cb879-3" aria-hidden="true" tabindex="-1"></a>valores1 <span class="ot">&lt;-</span> <span class="fu">c</span>(a,b)</span>
<span id="cb879-4"><a href="análisis-de-datos-con-r.html#cb879-4" aria-hidden="true" tabindex="-1"></a>promedio1 <span class="ot">&lt;-</span><span class="fu">mean</span>(valores1)</span>
<span id="cb879-5"><a href="análisis-de-datos-con-r.html#cb879-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(promedio1)</span></code></pre></div>
<p>Limpiamos datos nuevamente:</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="análisis-de-datos-con-r.html#cb880-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) </span>
<span id="cb880-2"><a href="análisis-de-datos-con-r.html#cb880-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(promedio)</span></code></pre></div>
</div>
<div id="creacion-de-objetos-y-asignaciones" class="section level4 hasAnchor" number="8.1.6.3">
<h4><span class="header-section-number">8.1.6.3</span> Creacion de objetos y asignaciones<a href="análisis-de-datos-con-r.html#creacion-de-objetos-y-asignaciones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Es importante espaciar codigos. Definimos dos vectores utilizando la
función <code>c()</code></p>
<div class="sourceCode" id="cb881"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb881-1"><a href="análisis-de-datos-con-r.html#cb881-1" aria-hidden="true" tabindex="-1"></a>educ <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">12</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">16</span>,<span class="dv">14</span>,<span class="dv">8</span>,<span class="dv">10</span>,<span class="dv">14</span>,<span class="dv">12</span>)</span>
<span id="cb881-2"><a href="análisis-de-datos-con-r.html#cb881-2" aria-hidden="true" tabindex="-1"></a>ingreso <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">325</span>,<span class="dv">415</span>,<span class="dv">360</span>,<span class="dv">380</span>,<span class="dv">670</span>,<span class="dv">545</span>,<span class="dv">350</span>,<span class="dv">420</span>,<span class="dv">680</span>,<span class="dv">465</span>)</span></code></pre></div>
<p>Calculamos promedio, desviación estándar y correlación</p>
<div class="sourceCode" id="cb882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb882-1"><a href="análisis-de-datos-con-r.html#cb882-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ingreso)</span>
<span id="cb882-2"><a href="análisis-de-datos-con-r.html#cb882-2" aria-hidden="true" tabindex="-1"></a>promedioingreso <span class="ot">&lt;-</span> <span class="fu">mean</span>(ingreso)</span>
<span id="cb882-3"><a href="análisis-de-datos-con-r.html#cb882-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb882-4"><a href="análisis-de-datos-con-r.html#cb882-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(ingreso)</span>
<span id="cb882-5"><a href="análisis-de-datos-con-r.html#cb882-5" aria-hidden="true" tabindex="-1"></a>sdingreso <span class="ot">&lt;-</span> <span class="fu">sd</span>(ingreso)</span>
<span id="cb882-6"><a href="análisis-de-datos-con-r.html#cb882-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb882-7"><a href="análisis-de-datos-con-r.html#cb882-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(educ, ingreso)</span>
<span id="cb882-8"><a href="análisis-de-datos-con-r.html#cb882-8" aria-hidden="true" tabindex="-1"></a>coreduing <span class="ot">&lt;-</span> <span class="fu">cor</span>(educ,ingreso)</span></code></pre></div>
<p>Graficamos</p>
<div class="sourceCode" id="cb883"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb883-1"><a href="análisis-de-datos-con-r.html#cb883-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(educ, ingreso)</span></code></pre></div>
<p>Estimar una regresión lineal</p>
<div class="sourceCode" id="cb884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb884-1"><a href="análisis-de-datos-con-r.html#cb884-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(ingreso <span class="sc">~</span> educ)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.1.1:</b> Nombrar objetos</p>
<p>De los siguientes ejemplos, ¿Cuáles son nombres de variables válidas en
R?</p>
<div class="sourceCode" id="cb885"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb885-1"><a href="análisis-de-datos-con-r.html#cb885-1" aria-hidden="true" tabindex="-1"></a><span class="co"># min_height</span></span>
<span id="cb885-2"><a href="análisis-de-datos-con-r.html#cb885-2" aria-hidden="true" tabindex="-1"></a><span class="co"># max.height</span></span>
<span id="cb885-3"><a href="análisis-de-datos-con-r.html#cb885-3" aria-hidden="true" tabindex="-1"></a><span class="co"># _age</span></span>
<span id="cb885-4"><a href="análisis-de-datos-con-r.html#cb885-4" aria-hidden="true" tabindex="-1"></a><span class="co"># .mass</span></span>
<span id="cb885-5"><a href="análisis-de-datos-con-r.html#cb885-5" aria-hidden="true" tabindex="-1"></a><span class="co"># MaxLength</span></span>
<span id="cb885-6"><a href="análisis-de-datos-con-r.html#cb885-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Min-length</span></span>
<span id="cb885-7"><a href="análisis-de-datos-con-r.html#cb885-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2widths</span></span>
<span id="cb885-8"><a href="análisis-de-datos-con-r.html#cb885-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calsius2kelvin</span></span></code></pre></div>
</div>
</div>
</div>
<div id="tipos-de-objetos" class="section level3 hasAnchor" number="8.1.7">
<h3><span class="header-section-number">8.1.7</span> Tipos de objetos<a href="análisis-de-datos-con-r.html#tipos-de-objetos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="vectores" class="section level4 hasAnchor" number="8.1.7.1">
<h4><span class="header-section-number">8.1.7.1</span> Vectores<a href="análisis-de-datos-con-r.html#vectores" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R opera componente por componente, por lo que es muy sencillo poder
trabajar con vectores y matrices.</p>
<p>Para crear un vector utilizamos la funcion <code>c()</code></p>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb886-1"><a href="análisis-de-datos-con-r.html#cb886-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span>
<span id="cb886-2"><a href="análisis-de-datos-con-r.html#cb886-2" aria-hidden="true" tabindex="-1"></a><span class="co">#o bien</span></span>
<span id="cb886-3"><a href="análisis-de-datos-con-r.html#cb886-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>)</span></code></pre></div>
<p>Veamos los vectores</p>
<div class="sourceCode" id="cb887"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb887-1"><a href="análisis-de-datos-con-r.html#cb887-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y </span>
<span id="cb887-2"><a href="análisis-de-datos-con-r.html#cb887-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<p>Supongamos los siguientes vectores:</p>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb888-1"><a href="análisis-de-datos-con-r.html#cb888-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb888-2"><a href="análisis-de-datos-con-r.html#cb888-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<p>¿Cuál es su longitud?</p>
<div class="sourceCode" id="cb889"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb889-1"><a href="análisis-de-datos-con-r.html#cb889-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span>
<span id="cb889-2"><a href="análisis-de-datos-con-r.html#cb889-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(y)</span></code></pre></div>
<p>Si no tienen la misma longitud, ¿cual sería el resultado de <code>x + y</code>?</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb890-1"><a href="análisis-de-datos-con-r.html#cb890-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y </span>
<span id="cb890-2"><a href="análisis-de-datos-con-r.html#cb890-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<p><strong>IMPORTANTE</strong>: En este caso R realiza la operación de todos modos, pero
nos indica que hay una advertencia de que sus dimensiones difieren. Lo
relevante de los vectores es que sólo se puede concatenar elementos del
mismo tipo, de lo contrario R nos arroja error.</p>
<div class="sourceCode" id="cb891"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb891-1"><a href="análisis-de-datos-con-r.html#cb891-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fl">1.5</span><span class="sc">:</span><span class="fl">9.5</span>,<span class="dv">4</span>) <span class="co">#genera repeticiones de los valores definidos </span></span>
<span id="cb891-2"><a href="análisis-de-datos-con-r.html#cb891-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span><span class="sc">:</span><span class="dv">30</span>)</span>
<span id="cb891-3"><a href="análisis-de-datos-con-r.html#cb891-3" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb891-4"><a href="análisis-de-datos-con-r.html#cb891-4" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb891-5"><a href="análisis-de-datos-con-r.html#cb891-5" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">c</span>(x1,x2)</span>
<span id="cb891-6"><a href="análisis-de-datos-con-r.html#cb891-6" aria-hidden="true" tabindex="-1"></a>x4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>))</span></code></pre></div>
<p>Subconjunto de un vector</p>
<div class="sourceCode" id="cb892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb892-1"><a href="análisis-de-datos-con-r.html#cb892-1" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">3</span>] <span class="co"># obtener el tercer elemento </span></span>
<span id="cb892-2"><a href="análisis-de-datos-con-r.html#cb892-2" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] </span>
<span id="cb892-3"><a href="análisis-de-datos-con-r.html#cb892-3" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">4</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb892-4"><a href="análisis-de-datos-con-r.html#cb892-4" aria-hidden="true" tabindex="-1"></a>y[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">6</span>)]</span>
<span id="cb892-5"><a href="análisis-de-datos-con-r.html#cb892-5" aria-hidden="true" tabindex="-1"></a>y[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">16</span>)]</span></code></pre></div>
</div>
<div id="matrices-1" class="section level4 hasAnchor" number="8.1.7.2">
<h4><span class="header-section-number">8.1.7.2</span> Matrices<a href="análisis-de-datos-con-r.html#matrices-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="definir-matrices" class="section level5 hasAnchor" number="8.1.7.2.1">
<h5><span class="header-section-number">8.1.7.2.1</span> Definir matrices<a href="análisis-de-datos-con-r.html#definir-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Sintaxis general</p>
<div class="sourceCode" id="cb893"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb893-1"><a href="análisis-de-datos-con-r.html#cb893-1" aria-hidden="true" tabindex="-1"></a>mi.matriz <span class="ot">&lt;-</span> <span class="fu">matrix</span>(vector,</span>
<span id="cb893-2"><a href="análisis-de-datos-con-r.html#cb893-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ncol =</span> num_columnas, <span class="at">nrow =</span> num_filas,</span>
<span id="cb893-3"><a href="análisis-de-datos-con-r.html#cb893-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">byrow =</span> valor_logico,</span>
<span id="cb893-4"><a href="análisis-de-datos-con-r.html#cb893-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">dimnames =</span> <span class="fu">list</span>(vector_nombres_filas,</span>
<span id="cb893-5"><a href="análisis-de-datos-con-r.html#cb893-5" aria-hidden="true" tabindex="-1"></a>                                   vector_nombres_columnas)</span>
<span id="cb893-6"><a href="análisis-de-datos-con-r.html#cb893-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Para crear matrices utilizamos la función <code>matrix()</code></p>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="análisis-de-datos-con-r.html#cb894-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>), </span>
<span id="cb894-2"><a href="análisis-de-datos-con-r.html#cb894-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">nrow =</span> <span class="dv">2</span>, </span>
<span id="cb894-3"><a href="análisis-de-datos-con-r.html#cb894-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">ncol =</span> <span class="dv">2</span>) </span>
<span id="cb894-4"><a href="análisis-de-datos-con-r.html#cb894-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb894-5"><a href="análisis-de-datos-con-r.html#cb894-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb894-6"><a href="análisis-de-datos-con-r.html#cb894-6" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>), </span>
<span id="cb894-7"><a href="análisis-de-datos-con-r.html#cb894-7" aria-hidden="true" tabindex="-1"></a>             <span class="dv">2</span>, </span>
<span id="cb894-8"><a href="análisis-de-datos-con-r.html#cb894-8" aria-hidden="true" tabindex="-1"></a>             <span class="dv">2</span>)</span></code></pre></div>
<p>No es necesario poner <code>data=</code>, pero por orden mental es mejor hacerlo.</p>
<div class="sourceCode" id="cb895"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb895-1"><a href="análisis-de-datos-con-r.html#cb895-1" aria-hidden="true" tabindex="-1"></a>x </span>
<span id="cb895-2"><a href="análisis-de-datos-con-r.html#cb895-2" aria-hidden="true" tabindex="-1"></a>x1</span></code></pre></div>
<p>Notar que por DEFECTO rellena columna por columna. Podemos explicitar
que queremos realizar la matriz fila por fila</p>
<div class="sourceCode" id="cb896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb896-1"><a href="análisis-de-datos-con-r.html#cb896-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb896-2"><a href="análisis-de-datos-con-r.html#cb896-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">nrow =</span> <span class="dv">3</span>, </span>
<span id="cb896-3"><a href="análisis-de-datos-con-r.html#cb896-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb896-4"><a href="análisis-de-datos-con-r.html#cb896-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb896-5"><a href="análisis-de-datos-con-r.html#cb896-5" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<p>Podemos saber cual es la dimensión de <code>x</code></p>
<div class="sourceCode" id="cb897"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb897-1"><a href="análisis-de-datos-con-r.html#cb897-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(y)</span>
<span id="cb897-2"><a href="análisis-de-datos-con-r.html#cb897-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(y)[<span class="dv">1</span>] <span class="co"># cantidad de filas</span></span>
<span id="cb897-3"><a href="análisis-de-datos-con-r.html#cb897-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(y)[<span class="dv">2</span>] <span class="co"># cantidad de columnas</span></span>
<span id="cb897-4"><a href="análisis-de-datos-con-r.html#cb897-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb897-5"><a href="análisis-de-datos-con-r.html#cb897-5" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">byrow=</span><span class="dv">2</span>)</span>
<span id="cb897-6"><a href="análisis-de-datos-con-r.html#cb897-6" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<p>Los va a repetir!</p>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="análisis-de-datos-con-r.html#cb898-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>), <span class="at">nrow=</span><span class="dv">2</span>, <span class="at">ncol=</span><span class="dv">3</span>, <span class="at">byrow=</span> <span class="dv">2</span>) </span>
<span id="cb898-2"><a href="análisis-de-datos-con-r.html#cb898-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<p>Notar que el orden en cualquier matrix es <strong>filas x columnas</strong>. Podemos
también omitir la cantidad de filas o columnas en la matriz y obtenemos
el mismo resultado</p>
<div class="sourceCode" id="cb899"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb899-1"><a href="análisis-de-datos-con-r.html#cb899-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>), <span class="dv">2</span>, <span class="at">byrow=</span>T)</span>
<span id="cb899-2"><a href="análisis-de-datos-con-r.html#cb899-2" aria-hidden="true" tabindex="-1"></a>y </span></code></pre></div>
<p>En el caso de crear matrices vacías hay que definir las dimensiones</p>
<div class="sourceCode" id="cb900"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb900-1"><a href="análisis-de-datos-con-r.html#cb900-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow=</span><span class="dv">3</span>, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb900-2"><a href="análisis-de-datos-con-r.html#cb900-2" aria-hidden="true" tabindex="-1"></a>y <span class="co">#útil para los loops</span></span></code></pre></div>
<p>Darle nombre a las filas y columnas</p>
<div class="sourceCode" id="cb901"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb901-1"><a href="análisis-de-datos-con-r.html#cb901-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span> (<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>), <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>, </span>
<span id="cb901-2"><a href="análisis-de-datos-con-r.html#cb901-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">dimnames=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;X1&quot;</span>,<span class="st">&quot;X2&quot;</span>),<span class="fu">c</span>(<span class="st">&quot;Y1&quot;</span>, <span class="st">&quot;Y2&quot;</span>)))</span>
<span id="cb901-3"><a href="análisis-de-datos-con-r.html#cb901-3" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<p>Se puede realizar desde las funciones colnames y rownames</p>
<div class="sourceCode" id="cb902"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb902-1"><a href="análisis-de-datos-con-r.html#cb902-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Variable 1&quot;</span>, <span class="st">&quot;Variable 2&quot;</span>)</span>
<span id="cb902-2"><a href="análisis-de-datos-con-r.html#cb902-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a1&quot;</span>, <span class="st">&quot;a2&quot;</span>)</span>
<span id="cb902-3"><a href="análisis-de-datos-con-r.html#cb902-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<p>Añadir filas o columnas a una matriz</p>
<div class="sourceCode" id="cb903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb903-1"><a href="análisis-de-datos-con-r.html#cb903-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>)</span></code></pre></div>
</div>
<div id="unir-matrices" class="section level5 hasAnchor" number="8.1.7.2.2">
<h5><span class="header-section-number">8.1.7.2.2</span> Unir matrices<a href="análisis-de-datos-con-r.html#unir-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Unir mediante filas (queda con el nombre del vector la observación)</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="análisis-de-datos-con-r.html#cb904-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">rbind</span>(x,w) </span>
<span id="cb904-2"><a href="análisis-de-datos-con-r.html#cb904-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<p>Unir mediante columnas</p>
<div class="sourceCode" id="cb905"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb905-1"><a href="análisis-de-datos-con-r.html#cb905-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">cbind</span>(x,w) </span>
<span id="cb905-2"><a href="análisis-de-datos-con-r.html#cb905-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<p>¿Y si tienen diferente cantidad de filas y/o columnas? repite el vector
o observaci?n con menor longitud</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="análisis-de-datos-con-r.html#cb906-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>),<span class="dv">3</span>)</span>
<span id="cb906-2"><a href="análisis-de-datos-con-r.html#cb906-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb906-3"><a href="análisis-de-datos-con-r.html#cb906-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb906-4"><a href="análisis-de-datos-con-r.html#cb906-4" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb906-5"><a href="análisis-de-datos-con-r.html#cb906-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb906-6"><a href="análisis-de-datos-con-r.html#cb906-6" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span><span class="fu">rbind</span>(x,y)</span>
<span id="cb906-7"><a href="análisis-de-datos-con-r.html#cb906-7" aria-hidden="true" tabindex="-1"></a>z </span></code></pre></div>
<p>Podemos pasar un vector a una matriz</p>
<div class="sourceCode" id="cb907"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb907-1"><a href="análisis-de-datos-con-r.html#cb907-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb907-2"><a href="análisis-de-datos-con-r.html#cb907-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb907-3"><a href="análisis-de-datos-con-r.html#cb907-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb907-4"><a href="análisis-de-datos-con-r.html#cb907-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(x)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)</span>
<span id="cb907-5"><a href="análisis-de-datos-con-r.html#cb907-5" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<p>Trasponer matrices:</p>
<div class="sourceCode" id="cb908"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb908-1"><a href="análisis-de-datos-con-r.html#cb908-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>),<span class="dv">3</span>)</span>
<span id="cb908-2"><a href="análisis-de-datos-con-r.html#cb908-2" aria-hidden="true" tabindex="-1"></a>xtraspuesta <span class="ot">&lt;-</span> <span class="fu">t</span>(x)</span></code></pre></div>
<p>Potencialmente se pueden hacer muchas más operaciones que involucren
matrices. Por ejemplo, subconjuntos de una matriz: segundo y cuarto
elemento de la segunda fila:</p>
<div class="sourceCode" id="cb909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb909-1"><a href="análisis-de-datos-con-r.html#cb909-1" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb909-2"><a href="análisis-de-datos-con-r.html#cb909-2" aria-hidden="true" tabindex="-1"></a>M</span>
<span id="cb909-3"><a href="análisis-de-datos-con-r.html#cb909-3" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb909-4"><a href="análisis-de-datos-con-r.html#cb909-4" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">1</span>,]</span>
<span id="cb909-5"><a href="análisis-de-datos-con-r.html#cb909-5" aria-hidden="true" tabindex="-1"></a>M[,<span class="dv">2</span>]</span>
<span id="cb909-6"><a href="análisis-de-datos-con-r.html#cb909-6" aria-hidden="true" tabindex="-1"></a>M[<span class="dv">2</span>,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)]</span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="herramientas-de-programación-1" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Herramientas de programación<a href="análisis-de-datos-con-r.html#herramientas-de-programación-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="objetos-adicionales" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Objetos adicionales<a href="análisis-de-datos-con-r.html#objetos-adicionales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="arreglos" class="section level4 hasAnchor" number="8.2.1.1">
<h4><span class="header-section-number">8.2.1.1</span> Arreglos<a href="análisis-de-datos-con-r.html#arreglos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Crear arreglos: La única diferencia con matrices es que acepta mas de
dos dimensiones.</p>
<p>Para generarlos:</p>
<div class="sourceCode" id="cb910"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb910-1"><a href="análisis-de-datos-con-r.html#cb910-1" aria-hidden="true" tabindex="-1"></a>mi.arreglo <span class="ot">&lt;-</span><span class="fu">array</span>(vector, </span>
<span id="cb910-2"><a href="análisis-de-datos-con-r.html#cb910-2" aria-hidden="true" tabindex="-1"></a>                   dimensiones, </span>
<span id="cb910-3"><a href="análisis-de-datos-con-r.html#cb910-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">dimnames =</span> etiquetas_dim)</span></code></pre></div>
<p>Para nombrarlos definimos etiquetas y luego las agregamos. Es mucho
mejor y mas ordenado hacerlo así:</p>
<div class="sourceCode" id="cb911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb911-1"><a href="análisis-de-datos-con-r.html#cb911-1" aria-hidden="true" tabindex="-1"></a>dim1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A1&quot;</span>, <span class="st">&quot;A2&quot;</span>)</span>
<span id="cb911-2"><a href="análisis-de-datos-con-r.html#cb911-2" aria-hidden="true" tabindex="-1"></a>dim2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;B1&quot;</span>, <span class="st">&quot;B2&quot;</span>, <span class="st">&quot;B3&quot;</span>, <span class="st">&quot;B4&quot;</span>)</span>
<span id="cb911-3"><a href="análisis-de-datos-con-r.html#cb911-3" aria-hidden="true" tabindex="-1"></a>dim3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;C1&quot;</span>, <span class="st">&quot;C2&quot;</span>, <span class="st">&quot;C3&quot;</span>)</span></code></pre></div>
<p><strong>Ejemplo de arreglo:</strong> Defino un arreglo de 3 matrices de 2 (filas) x 4
(columnas)</p>
<div class="sourceCode" id="cb912"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb912-1"><a href="análisis-de-datos-con-r.html#cb912-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>,</span>
<span id="cb912-2"><a href="análisis-de-datos-con-r.html#cb912-2" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">3</span>),</span>
<span id="cb912-3"><a href="análisis-de-datos-con-r.html#cb912-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">dimnames =</span> <span class="fu">list</span>(dim1, dim2, dim3))</span>
<span id="cb912-4"><a href="análisis-de-datos-con-r.html#cb912-4" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<p>Notar la tercera dimensión!</p>
<p><strong>Subconjuntos de un arreglo:</strong> x[Fila,Columna, Matriz]</p>
<div class="sourceCode" id="cb913"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb913-1"><a href="análisis-de-datos-con-r.html#cb913-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]       <span class="co"># 1 fila, 2da columna, 3ra matriz</span></span>
<span id="cb913-2"><a href="análisis-de-datos-con-r.html#cb913-2" aria-hidden="true" tabindex="-1"></a>x[,,<span class="dv">3</span>]         <span class="co"># 3era matriz completa</span></span>
<span id="cb913-3"><a href="análisis-de-datos-con-r.html#cb913-3" aria-hidden="true" tabindex="-1"></a>x[,<span class="dv">4</span>,]         <span class="co"># 4ta columna de todas las matrices</span></span>
<span id="cb913-4"><a href="análisis-de-datos-con-r.html#cb913-4" aria-hidden="true" tabindex="-1"></a>x[,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">2</span>]       <span class="co"># Todas las filas, sin la primera columna, de la matriz 2. </span></span>
<span id="cb913-5"><a href="análisis-de-datos-con-r.html#cb913-5" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">1</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="dv">3</span>] <span class="co"># Todas las columnas, sin la fila 1, de la matriz 3. </span></span>
<span id="cb913-6"><a href="análisis-de-datos-con-r.html#cb913-6" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">3</span>]    <span class="co"># Columnas 1 y 2, sin la fila 1, de la matriz 3. </span></span>
<span id="cb913-7"><a href="análisis-de-datos-con-r.html#cb913-7" aria-hidden="true" tabindex="-1"></a>x[,,<span class="dv">1</span>]<span class="sc">*</span><span class="dv">2</span></span></code></pre></div>
</div>
<div id="listas-1" class="section level4 hasAnchor" number="8.2.1.2">
<h4><span class="header-section-number">8.2.1.2</span> Listas<a href="análisis-de-datos-con-r.html#listas-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Las listas contienen elementos de diferente tipo: matrices, objetos,
dataframes, vectores, etc.</p>
<div class="sourceCode" id="cb914"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb914-1"><a href="análisis-de-datos-con-r.html#cb914-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>), <span class="st">&quot;R&quot;</span>, <span class="cn">TRUE</span>, <span class="dv">2</span><span class="sc">+</span>3i, 5L)</span>
<span id="cb914-2"><a href="análisis-de-datos-con-r.html#cb914-2" aria-hidden="true" tabindex="-1"></a>x <span class="co">#separa todo componente</span></span></code></pre></div>
<p>Para acceder a un objeto dentro de la lista se debe utilizar DOBLE
CORCHETE:</p>
<div class="sourceCode" id="cb915"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb915-1"><a href="análisis-de-datos-con-r.html#cb915-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">5</span>]]</span>
<span id="cb915-2"><a href="análisis-de-datos-con-r.html#cb915-2" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">5</span>]</span></code></pre></div>
<p>Veamos un ejemplo de cómo trabaja:</p>
<div class="sourceCode" id="cb916"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb916-1"><a href="análisis-de-datos-con-r.html#cb916-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Titulacion =</span> <span class="fu">c</span>(<span class="st">&quot;Economia&quot;</span>, <span class="st">&quot;Administracion&quot;</span>, <span class="st">&quot;Politica&quot;</span>), </span>
<span id="cb916-2"><a href="análisis-de-datos-con-r.html#cb916-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">Edad =</span><span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">27</span>))</span>
<span id="cb916-3"><a href="análisis-de-datos-con-r.html#cb916-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<p>Al nombrar los componentes dentro de la lista, podemos llamarlos sin
necesidad de los corchetes:</p>
<div class="sourceCode" id="cb917"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb917-1"><a href="análisis-de-datos-con-r.html#cb917-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>Titulacion</span>
<span id="cb917-2"><a href="análisis-de-datos-con-r.html#cb917-2" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">1</span>]]</span>
<span id="cb917-3"><a href="análisis-de-datos-con-r.html#cb917-3" aria-hidden="true" tabindex="-1"></a>x[[<span class="st">&quot;Titulacion&quot;</span>]]</span>
<span id="cb917-4"><a href="análisis-de-datos-con-r.html#cb917-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb917-5"><a href="análisis-de-datos-con-r.html#cb917-5" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>Edad</span>
<span id="cb917-6"><a href="análisis-de-datos-con-r.html#cb917-6" aria-hidden="true" tabindex="-1"></a>x[[<span class="dv">2</span>]]</span></code></pre></div>
<p>Como los componentes dentro de las listas tienen definida una
naturaleza, podemos hacer operaciones con ellas también:</p>
<div class="sourceCode" id="cb918"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb918-1"><a href="análisis-de-datos-con-r.html#cb918-1" aria-hidden="true" tabindex="-1"></a>x[[<span class="st">&quot;Edad&quot;</span>]]<span class="sc">*</span><span class="dv">3</span></span>
<span id="cb918-2"><a href="análisis-de-datos-con-r.html#cb918-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb918-3"><a href="análisis-de-datos-con-r.html#cb918-3" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>Edad[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]<span class="sc">*</span><span class="dv">3</span></span></code></pre></div>
<p>Finalmente, tambien podemos crear listas vacias (útil para rellenar
utilizando iteradores):</p>
<div class="sourceCode" id="cb919"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb919-1"><a href="análisis-de-datos-con-r.html#cb919-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span><span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><strong>Ejemplo de una lista:</strong> Definimos una lista</p>
<div class="sourceCode" id="cb920"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb920-1"><a href="análisis-de-datos-con-r.html#cb920-1" aria-hidden="true" tabindex="-1"></a>milista <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb920-2"><a href="análisis-de-datos-con-r.html#cb920-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb920-3"><a href="análisis-de-datos-con-r.html#cb920-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Primer elemento sera un vector</span></span>
<span id="cb920-4"><a href="análisis-de-datos-con-r.html#cb920-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">hospitales =</span> <span class="fu">c</span>(<span class="st">&quot;Van Buren&quot;</span>, <span class="st">&quot;Gustavo Fricke&quot;</span>, <span class="st">&quot;Salvador&quot;</span>),</span>
<span id="cb920-5"><a href="análisis-de-datos-con-r.html#cb920-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb920-6"><a href="análisis-de-datos-con-r.html#cb920-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Segundo elemento sera un dataframe</span></span>
<span id="cb920-7"><a href="análisis-de-datos-con-r.html#cb920-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">direccion   =</span> <span class="fu">data.frame</span>(</span>
<span id="cb920-8"><a href="análisis-de-datos-con-r.html#cb920-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">calle =</span> <span class="fu">c</span>(<span class="st">&quot;San Ignacio&quot;</span>, <span class="st">&quot;Av. Alvarez&quot;</span>, <span class="st">&quot;Av. Salvador&quot;</span>),</span>
<span id="cb920-9"><a href="análisis-de-datos-con-r.html#cb920-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ciudad   =</span> <span class="fu">c</span>(<span class="st">&quot;Valparaíso&quot;</span>, <span class="st">&quot;Viña del Mar&quot;</span>, <span class="st">&quot;Santiago&quot;</span>)</span>
<span id="cb920-10"><a href="análisis-de-datos-con-r.html#cb920-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb920-11"><a href="análisis-de-datos-con-r.html#cb920-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb920-12"><a href="análisis-de-datos-con-r.html#cb920-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb920-13"><a href="análisis-de-datos-con-r.html#cb920-13" aria-hidden="true" tabindex="-1"></a>milista</span></code></pre></div>
<p>Llamar a subconjuntos</p>
<div class="sourceCode" id="cb921"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb921-1"><a href="análisis-de-datos-con-r.html#cb921-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Retorna el elemento de la lista</span></span>
<span id="cb921-2"><a href="análisis-de-datos-con-r.html#cb921-2" aria-hidden="true" tabindex="-1"></a>milista<span class="sc">$</span>hospitales</span>
<span id="cb921-3"><a href="análisis-de-datos-con-r.html#cb921-3" aria-hidden="true" tabindex="-1"></a>milista[<span class="dv">2</span>]</span>
<span id="cb921-4"><a href="análisis-de-datos-con-r.html#cb921-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-5"><a href="análisis-de-datos-con-r.html#cb921-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Retorna el elemento, pero sin nombre y como vector</span></span>
<span id="cb921-6"><a href="análisis-de-datos-con-r.html#cb921-6" aria-hidden="true" tabindex="-1"></a>milista[[<span class="dv">1</span>]]</span>
<span id="cb921-7"><a href="análisis-de-datos-con-r.html#cb921-7" aria-hidden="true" tabindex="-1"></a>milista[[<span class="st">&quot;hospitales&quot;</span>]]</span>
<span id="cb921-8"><a href="análisis-de-datos-con-r.html#cb921-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb921-9"><a href="análisis-de-datos-con-r.html#cb921-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Elementos particulares</span></span>
<span id="cb921-10"><a href="análisis-de-datos-con-r.html#cb921-10" aria-hidden="true" tabindex="-1"></a>milista[[<span class="dv">1</span>]][<span class="dv">3</span>]</span>
<span id="cb921-11"><a href="análisis-de-datos-con-r.html#cb921-11" aria-hidden="true" tabindex="-1"></a>milista[[<span class="dv">2</span>]][,<span class="dv">1</span>]</span>
<span id="cb921-12"><a href="análisis-de-datos-con-r.html#cb921-12" aria-hidden="true" tabindex="-1"></a>milista[[<span class="dv">2</span>]][<span class="dv">1</span>,]</span>
<span id="cb921-13"><a href="análisis-de-datos-con-r.html#cb921-13" aria-hidden="true" tabindex="-1"></a>milista[[<span class="dv">2</span>]][<span class="dv">1</span>,<span class="dv">2</span>]</span></code></pre></div>
<p>Notar que es importante saber el tipo de dato.</p>
</div>
<div id="dataframes" class="section level4 hasAnchor" number="8.2.1.3">
<h4><span class="header-section-number">8.2.1.3</span> Dataframes<a href="análisis-de-datos-con-r.html#dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Crear un dataframe:</strong> Es básicamente una matriz donde filas y columnas
tienen significado. Contiene tanto valores numericos, carácteres,
variables categóricas, etc.</p>
<div class="sourceCode" id="cb922"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb922-1"><a href="análisis-de-datos-con-r.html#cb922-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Titulacion =</span> <span class="fu">c</span>(<span class="st">&quot;Economia&quot;</span>, <span class="st">&quot;Administracion&quot;</span>, </span>
<span id="cb922-2"><a href="análisis-de-datos-con-r.html#cb922-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Administracion&quot;</span>),</span>
<span id="cb922-3"><a href="análisis-de-datos-con-r.html#cb922-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Edad =</span><span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">23</span>,<span class="dv">27</span>), </span>
<span id="cb922-4"><a href="análisis-de-datos-con-r.html#cb922-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ocupacion =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb922-5"><a href="análisis-de-datos-con-r.html#cb922-5" aria-hidden="true" tabindex="-1"></a>datos</span></code></pre></div>
<p>Esto es lo mas cercano a una base de datos. Es uno de los objetos
básicos que veremos muchas veces a lo largo del curso.</p>
<p><strong>Dimensiones de un dataframe:</strong> Para ver las dimensiones hay que
utilizar nrow(), ncol() o bien dim().</p>
<div class="sourceCode" id="cb923"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb923-1"><a href="análisis-de-datos-con-r.html#cb923-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datos)</span>
<span id="cb923-2"><a href="análisis-de-datos-con-r.html#cb923-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(datos)</span>
<span id="cb923-3"><a href="análisis-de-datos-con-r.html#cb923-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(datos)</span></code></pre></div>
<p>Notar que nrow() y ncol() tambien sirven para matrices.</p>
<p><strong>Subconjuntos de un dataframe:</strong> Al igual que en las matrices,
utilizamos <code>[ ]</code> para acceder a elementos dentro de la base.</p>
<div class="sourceCode" id="cb924"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb924-1"><a href="análisis-de-datos-con-r.html#cb924-1" aria-hidden="true" tabindex="-1"></a>datos[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb924-2"><a href="análisis-de-datos-con-r.html#cb924-2" aria-hidden="true" tabindex="-1"></a>datos[,<span class="dv">1</span>]</span>
<span id="cb924-3"><a href="análisis-de-datos-con-r.html#cb924-3" aria-hidden="true" tabindex="-1"></a>datos[,<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb924-4"><a href="análisis-de-datos-con-r.html#cb924-4" aria-hidden="true" tabindex="-1"></a>datos[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span>
<span id="cb924-5"><a href="análisis-de-datos-con-r.html#cb924-5" aria-hidden="true" tabindex="-1"></a>datos[, <span class="fu">c</span>(<span class="st">&quot;Titulacion&quot;</span>)]</span>
<span id="cb924-6"><a href="análisis-de-datos-con-r.html#cb924-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-7"><a href="análisis-de-datos-con-r.html#cb924-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Tambien puedo ocupar $ para llamar. </span></span>
<span id="cb924-8"><a href="análisis-de-datos-con-r.html#cb924-8" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>Titulacion</span>
<span id="cb924-9"><a href="análisis-de-datos-con-r.html#cb924-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb924-10"><a href="análisis-de-datos-con-r.html#cb924-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ojo que esto lo puedo hacer con todo</span></span>
<span id="cb924-11"><a href="análisis-de-datos-con-r.html#cb924-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos[,<span class="dv">2</span>])</span>
<span id="cb924-12"><a href="análisis-de-datos-con-r.html#cb924-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos[,<span class="dv">2</span>])[<span class="dv">3</span>]</span>
<span id="cb924-13"><a href="análisis-de-datos-con-r.html#cb924-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos[,<span class="dv">2</span>])[<span class="st">&quot;Max.&quot;</span>]</span></code></pre></div>
<p><strong>Tibbles:</strong> Una version mas moderna de dataframes. Es la misma idea:
lista de vectores con nombres.</p>
<div class="sourceCode" id="cb925"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb925-1"><a href="análisis-de-datos-con-r.html#cb925-1" aria-hidden="true" tabindex="-1"></a>Altura <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">168</span>, <span class="dv">177</span>, <span class="dv">177</span>, <span class="dv">177</span>, <span class="dv">178</span>, <span class="dv">172</span>, <span class="dv">165</span>, <span class="dv">171</span>, <span class="dv">178</span>, <span class="dv">170</span>)</span>
<span id="cb925-2"><a href="análisis-de-datos-con-r.html#cb925-2" aria-hidden="true" tabindex="-1"></a>Peso  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">72</span>, <span class="dv">85</span>, <span class="dv">95</span>, <span class="dv">71</span>, <span class="dv">69</span>, <span class="dv">61</span>, <span class="dv">61</span>, <span class="dv">51</span>, <span class="dv">75</span>)</span>
<span id="cb925-3"><a href="análisis-de-datos-con-r.html#cb925-3" aria-hidden="true" tabindex="-1"></a>M <span class="ot">&lt;-</span> <span class="fu">cbind</span>(Altura, Peso)</span></code></pre></div>
<p>Paquete para trabajar con bases de datos (más detalles en secciones 2.3
y 2.4)</p>
<div class="sourceCode" id="cb926"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb926-1"><a href="análisis-de-datos-con-r.html#cb926-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>) </span>
<span id="cb926-2"><a href="análisis-de-datos-con-r.html#cb926-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble) <span class="co"># Una libreria dentro de tidyverse. </span></span>
<span id="cb926-3"><a href="análisis-de-datos-con-r.html#cb926-3" aria-hidden="true" tabindex="-1"></a>misdatos <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(M)</span>
<span id="cb926-4"><a href="análisis-de-datos-con-r.html#cb926-4" aria-hidden="true" tabindex="-1"></a>misdatos</span>
<span id="cb926-5"><a href="análisis-de-datos-con-r.html#cb926-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb926-6"><a href="análisis-de-datos-con-r.html#cb926-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos ver los nombres o bien estadistica básica de cada variable. </span></span>
<span id="cb926-7"><a href="análisis-de-datos-con-r.html#cb926-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(misdatos)</span>
<span id="cb926-8"><a href="análisis-de-datos-con-r.html#cb926-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(misdatos)</span></code></pre></div>
<p><strong>Agregar columnas a un dataframe:</strong> Podemos agregar variables a la
base. Dos opciones:</p>
<div class="sourceCode" id="cb927"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb927-1"><a href="análisis-de-datos-con-r.html#cb927-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opción 1: utilizando $nombre_columna&lt;-vector</span></span>
<span id="cb927-2"><a href="análisis-de-datos-con-r.html#cb927-2" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb927-3"><a href="análisis-de-datos-con-r.html#cb927-3" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb927-4"><a href="análisis-de-datos-con-r.html#cb927-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb927-5"><a href="análisis-de-datos-con-r.html#cb927-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Opción 2: utilizando el cbind (al igual que con matrices)</span></span>
<span id="cb927-6"><a href="análisis-de-datos-con-r.html#cb927-6" aria-hidden="true" tabindex="-1"></a>id2<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb927-7"><a href="análisis-de-datos-con-r.html#cb927-7" aria-hidden="true" tabindex="-1"></a>datos1 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(id2,datos) </span>
<span id="cb927-8"><a href="análisis-de-datos-con-r.html#cb927-8" aria-hidden="true" tabindex="-1"></a>datos1</span></code></pre></div>
<p><strong>Attach:</strong></p>
<p>Notación muy inconveniente</p>
<div class="sourceCode" id="cb928"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb928-1"><a href="análisis-de-datos-con-r.html#cb928-1" aria-hidden="true" tabindex="-1"></a>misdatos<span class="sc">$</span>Altura</span>
<span id="cb928-2"><a href="análisis-de-datos-con-r.html#cb928-2" aria-hidden="true" tabindex="-1"></a>misdatos<span class="sc">$</span>Peso</span></code></pre></div>
<p>Para evitar escribir datos cada vez que quiera llamar a una variable voy
a utilizar la funcion <code>attach()</code>:</p>
<div class="sourceCode" id="cb929"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb929-1"><a href="análisis-de-datos-con-r.html#cb929-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(datos) <span class="co"># para comenzar</span></span>
<span id="cb929-2"><a href="análisis-de-datos-con-r.html#cb929-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb929-3"><a href="análisis-de-datos-con-r.html#cb929-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora puedo llamar a sus variables sin utilizar datos</span></span>
<span id="cb929-4"><a href="análisis-de-datos-con-r.html#cb929-4" aria-hidden="true" tabindex="-1"></a>nueva <span class="ot">&lt;-</span> Edad <span class="sc">*</span> ocupacion </span>
<span id="cb929-5"><a href="análisis-de-datos-con-r.html#cb929-5" aria-hidden="true" tabindex="-1"></a>nueva <span class="ot">&lt;-</span> datos<span class="sc">$</span>Edad <span class="sc">*</span> datos<span class="sc">$</span>ocupacion</span>
<span id="cb929-6"><a href="análisis-de-datos-con-r.html#cb929-6" aria-hidden="true" tabindex="-1"></a>nueva </span>
<span id="cb929-7"><a href="análisis-de-datos-con-r.html#cb929-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb929-8"><a href="análisis-de-datos-con-r.html#cb929-8" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(datos) <span class="co"># para terminar</span></span></code></pre></div>
<p>Esta es una forma mucho mas conveniente de trabajar con dataframes o
tibble en R.</p>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.2.1:</b> Crear un dataframe</p>
<p>Cree su primera base de datos. Debe armar una tabla igual a la figura.
Tiene 5 minutos. <img src="01figuras/ejercicio2.PNG" alt="Ejercicio" /></p>
</div>
<p>Respuesta:</p>
<div class="sourceCode" id="cb930"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb930-1"><a href="análisis-de-datos-con-r.html#cb930-1" aria-hidden="true" tabindex="-1"></a>ejer <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Tipo_animal =</span> <span class="fu">c</span>(<span class="st">&quot;Perro&quot;</span>, <span class="st">&quot;Perro&quot;</span>,<span class="st">&quot;Gato&quot;</span>,<span class="st">&quot;Perro&quot;</span>, </span>
<span id="cb930-2"><a href="análisis-de-datos-con-r.html#cb930-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Gato&quot;</span>,<span class="st">&quot;Gato&quot;</span>,<span class="st">&quot;Gato&quot;</span>),</span>
<span id="cb930-3"><a href="análisis-de-datos-con-r.html#cb930-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Color =</span><span class="fu">c</span>(<span class="st">&quot;Café&quot;</span>,<span class="st">&quot;Blanco&quot;</span>,<span class="st">&quot;Negro&quot;</span>,<span class="st">&quot;Manchas&quot;</span>,<span class="st">&quot;Café&quot;</span>,<span class="st">&quot;Tricolor&quot;</span>,<span class="st">&quot;Negro&quot;</span>), </span>
<span id="cb930-4"><a href="análisis-de-datos-con-r.html#cb930-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Peso =</span> <span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">4</span>),</span>
<span id="cb930-5"><a href="análisis-de-datos-con-r.html#cb930-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Pasea=</span><span class="fu">c</span>(<span class="st">&quot;Sí&quot;</span>,<span class="st">&quot;Sí&quot;</span>,<span class="st">&quot;Sí&quot;</span>,<span class="st">&quot;No&quot;</span>,<span class="st">&quot;No&quot;</span>,<span class="st">&quot;No&quot;</span>,<span class="st">&quot;Sí&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="acceder-a-elementos-de-un-objeto" class="section level3 hasAnchor" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Acceder a elementos de un objeto<a href="análisis-de-datos-con-r.html#acceder-a-elementos-de-un-objeto" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="vectores-1" class="section level4 hasAnchor" number="8.2.2.1">
<h4><span class="header-section-number">8.2.2.1</span> Vectores<a href="análisis-de-datos-con-r.html#vectores-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Para acceder a los elementos de un objeto debemos utilizar los corchetes
<code>[ ]</code></p>
<div class="sourceCode" id="cb931"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb931-1"><a href="análisis-de-datos-con-r.html#cb931-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos en un vector</span></span>
<span id="cb931-2"><a href="análisis-de-datos-con-r.html#cb931-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb931-3"><a href="análisis-de-datos-con-r.html#cb931-3" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;T&quot;</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">1</span><span class="sc">+</span>2i,<span class="st">&quot;t&quot;</span>, <span class="st">&quot;c&quot;</span>,<span class="st">&quot;a&quot;</span>,<span class="dv">6</span>)</span>
<span id="cb931-4"><a href="análisis-de-datos-con-r.html#cb931-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span>
<span id="cb931-5"><a href="análisis-de-datos-con-r.html#cb931-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb931-6"><a href="análisis-de-datos-con-r.html#cb931-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos llamar a un objeto de un vector </span></span>
<span id="cb931-7"><a href="análisis-de-datos-con-r.html#cb931-7" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>]</span>
<span id="cb931-8"><a href="análisis-de-datos-con-r.html#cb931-8" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span>]</span></code></pre></div>
<p>De esta manera podemos extraerlo o utilizarlo en diferentes operaciones.
Pero sólo debe ser entre observaciones numericas:</p>
<div class="sourceCode" id="cb932"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb932-1"><a href="análisis-de-datos-con-r.html#cb932-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>]<span class="sc">+</span>x[<span class="dv">6</span>] <span class="co">#de lo contrario R nos arroja un error </span></span>
<span id="cb932-2"><a href="análisis-de-datos-con-r.html#cb932-2" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">+</span>2i)</span>
<span id="cb932-3"><a href="análisis-de-datos-con-r.html#cb932-3" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">3</span>]<span class="sc">+</span>y[<span class="dv">7</span>]</span>
<span id="cb932-4"><a href="análisis-de-datos-con-r.html#cb932-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb932-5"><a href="análisis-de-datos-con-r.html#cb932-5" aria-hidden="true" tabindex="-1"></a><span class="co">#O podemos visualizar a x, pero sin el primer objeto</span></span>
<span id="cb932-6"><a href="análisis-de-datos-con-r.html#cb932-6" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb932-7"><a href="análisis-de-datos-con-r.html#cb932-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb932-8"><a href="análisis-de-datos-con-r.html#cb932-8" aria-hidden="true" tabindex="-1"></a><span class="co">#O eliminar el primer objeto </span></span>
<span id="cb932-9"><a href="análisis-de-datos-con-r.html#cb932-9" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span>x[<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb932-10"><a href="análisis-de-datos-con-r.html#cb932-10" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
</div>
<div id="matrices-2" class="section level4 hasAnchor" number="8.2.2.2">
<h4><span class="header-section-number">8.2.2.2</span> Matrices<a href="análisis-de-datos-con-r.html#matrices-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Si analizamos los objetos de una matriz:</p>
<div class="sourceCode" id="cb933"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb933-1"><a href="análisis-de-datos-con-r.html#cb933-1" aria-hidden="true" tabindex="-1"></a>w<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">3</span>)</span>
<span id="cb933-2"><a href="análisis-de-datos-con-r.html#cb933-2" aria-hidden="true" tabindex="-1"></a>w</span>
<span id="cb933-3"><a href="análisis-de-datos-con-r.html#cb933-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb933-4"><a href="análisis-de-datos-con-r.html#cb933-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Elemento [1,1]</span></span>
<span id="cb933-5"><a href="análisis-de-datos-con-r.html#cb933-5" aria-hidden="true" tabindex="-1"></a>w[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb933-6"><a href="análisis-de-datos-con-r.html#cb933-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Toda la primera columna </span></span>
<span id="cb933-7"><a href="análisis-de-datos-con-r.html#cb933-7" aria-hidden="true" tabindex="-1"></a>w[,<span class="dv">1</span>]</span>
<span id="cb933-8"><a href="análisis-de-datos-con-r.html#cb933-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Toda la segunda fila</span></span>
<span id="cb933-9"><a href="análisis-de-datos-con-r.html#cb933-9" aria-hidden="true" tabindex="-1"></a>w[<span class="dv">2</span>,]</span>
<span id="cb933-10"><a href="análisis-de-datos-con-r.html#cb933-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Dos columnas</span></span>
<span id="cb933-11"><a href="análisis-de-datos-con-r.html#cb933-11" aria-hidden="true" tabindex="-1"></a>w[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># w[,-3]</span></span>
<span id="cb933-12"><a href="análisis-de-datos-con-r.html#cb933-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Todas las filas menos la primera</span></span>
<span id="cb933-13"><a href="análisis-de-datos-con-r.html#cb933-13" aria-hidden="true" tabindex="-1"></a>w[<span class="sc">-</span><span class="dv">1</span>,]</span></code></pre></div>
</div>
<div id="listas-2" class="section level4 hasAnchor" number="8.2.2.3">
<h4><span class="header-section-number">8.2.2.3</span> Listas<a href="análisis-de-datos-con-r.html#listas-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Si queremos llamar a un objeto dentro de una lista:</p>
<div class="sourceCode" id="cb934"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb934-1"><a href="análisis-de-datos-con-r.html#cb934-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>), <span class="st">&quot;R&quot;</span>, T, <span class="dv">2</span><span class="sc">+</span>3i, 5L)</span>
<span id="cb934-2"><a href="análisis-de-datos-con-r.html#cb934-2" aria-hidden="true" tabindex="-1"></a>z <span class="co">#separa todo componente</span></span></code></pre></div>
<p>Para acceder a un objeto dentro de la lista se debe utilizar doble
corchete:</p>
<div class="sourceCode" id="cb935"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb935-1"><a href="análisis-de-datos-con-r.html#cb935-1" aria-hidden="true" tabindex="-1"></a>z[[<span class="dv">1</span>]]</span>
<span id="cb935-2"><a href="análisis-de-datos-con-r.html#cb935-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb935-3"><a href="análisis-de-datos-con-r.html#cb935-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Y algo dentro de ese objeto </span></span>
<span id="cb935-4"><a href="análisis-de-datos-con-r.html#cb935-4" aria-hidden="true" tabindex="-1"></a>z[[<span class="dv">1</span>]][<span class="dv">5</span>]</span>
<span id="cb935-5"><a href="análisis-de-datos-con-r.html#cb935-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb935-6"><a href="análisis-de-datos-con-r.html#cb935-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Tambien podemos analizar su clasificacion </span></span>
<span id="cb935-7"><a href="análisis-de-datos-con-r.html#cb935-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(z[[<span class="dv">1</span>]]) <span class="co">#numerico </span></span>
<span id="cb935-8"><a href="análisis-de-datos-con-r.html#cb935-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb935-9"><a href="análisis-de-datos-con-r.html#cb935-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Si es numerico, entonces tambien podemos hacer operaciones </span></span>
<span id="cb935-10"><a href="análisis-de-datos-con-r.html#cb935-10" aria-hidden="true" tabindex="-1"></a>z[[<span class="dv">1</span>]][<span class="dv">3</span>]<span class="sc">*</span>z[[<span class="dv">1</span>]][<span class="dv">5</span>]</span></code></pre></div>
</div>
</div>
<div id="tipos-de-objetos-y-datos" class="section level3 hasAnchor" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> Tipos de objetos y datos<a href="análisis-de-datos-con-r.html#tipos-de-objetos-y-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="identificar-tipos-de-objetos" class="section level4 hasAnchor" number="8.2.3.1">
<h4><span class="header-section-number">8.2.3.1</span> Identificar tipos de objetos<a href="análisis-de-datos-con-r.html#identificar-tipos-de-objetos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Veamos en un vector cualquiera</p>
<div class="sourceCode" id="cb936"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb936-1"><a href="análisis-de-datos-con-r.html#cb936-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;T&quot;</span>, <span class="cn">FALSE</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="dv">1</span><span class="sc">+</span>2i,<span class="st">&quot;t&quot;</span>, <span class="st">&quot;c&quot;</span>,<span class="st">&quot;a&quot;</span>,<span class="dv">6</span>)</span>
<span id="cb936-2"><a href="análisis-de-datos-con-r.html#cb936-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<p>Como bien sabemos todo en R es un objeto. Para saber que tipo de objeto
es puedo utilizar la función <code>class()</code>:</p>
<div class="sourceCode" id="cb937"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb937-1"><a href="análisis-de-datos-con-r.html#cb937-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datos)</span>
<span id="cb937-2"><a href="análisis-de-datos-con-r.html#cb937-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (x)</span></code></pre></div>
<p>Note que <code>class()</code> identifico que es un “data.frame” y una lista.
También puedo ver los tipos de elementos dentro de un determinado
objeto. Para datos, existen 5 tipos principales, llamados:</p>
<ol style="list-style-type: decimal">
<li><strong>carácteres:</strong> texto. Se escriben con comillas (ej: “3”, “swc”).</li>
<li><strong>numéricos:</strong> numeros reales (ej. 2, 15.5).</li>
<li><strong>enteros:</strong> numeros enteros (“L” le dice a R que guarde esto como
un entero).</li>
<li><strong>logical:</strong> valores logicos (ej. TRUE, FALSE).</li>
<li><strong>complejos:</strong> 1 + 4i (Numero complejos).</li>
</ol>
</div>
<div id="identificar-tipos-de-datos" class="section level4 hasAnchor" number="8.2.3.2">
<h4><span class="header-section-number">8.2.3.2</span> Identificar tipos de datos<a href="análisis-de-datos-con-r.html#identificar-tipos-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb938"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb938-1"><a href="análisis-de-datos-con-r.html#cb938-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Carácteres</span></span>
<span id="cb938-2"><a href="análisis-de-datos-con-r.html#cb938-2" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>)</span>
<span id="cb938-3"><a href="análisis-de-datos-con-r.html#cb938-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(z)</span>
<span id="cb938-4"><a href="análisis-de-datos-con-r.html#cb938-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb938-5"><a href="análisis-de-datos-con-r.html#cb938-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Números enteros</span></span>
<span id="cb938-6"><a href="análisis-de-datos-con-r.html#cb938-6" aria-hidden="true" tabindex="-1"></a>w<span class="ot">&lt;-</span><span class="fu">c</span>(1L,2L,3L) <span class="co">#la L es para obligar que sea entero</span></span>
<span id="cb938-7"><a href="análisis-de-datos-con-r.html#cb938-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(w)</span>
<span id="cb938-8"><a href="análisis-de-datos-con-r.html#cb938-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb938-9"><a href="análisis-de-datos-con-r.html#cb938-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Numéricos </span></span>
<span id="cb938-10"><a href="análisis-de-datos-con-r.html#cb938-10" aria-hidden="true" tabindex="-1"></a>w1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb938-11"><a href="análisis-de-datos-con-r.html#cb938-11" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(w1)</span>
<span id="cb938-12"><a href="análisis-de-datos-con-r.html#cb938-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb938-13"><a href="análisis-de-datos-con-r.html#cb938-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que la L lo obliga a ser entero ¿Qué ocurre si no coloco la L? </span></span>
<span id="cb938-14"><a href="análisis-de-datos-con-r.html#cb938-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb938-15"><a href="análisis-de-datos-con-r.html#cb938-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Valores logicos</span></span>
<span id="cb938-16"><a href="análisis-de-datos-con-r.html#cb938-16" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb938-17"><a href="análisis-de-datos-con-r.html#cb938-17" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(v1)</span>
<span id="cb938-18"><a href="análisis-de-datos-con-r.html#cb938-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb938-19"><a href="análisis-de-datos-con-r.html#cb938-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que si estan entre comillas son caracteres, no logical!. </span></span>
<span id="cb938-20"><a href="análisis-de-datos-con-r.html#cb938-20" aria-hidden="true" tabindex="-1"></a>v<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;TRUE&quot;</span>, <span class="st">&quot;FALSE&quot;</span>)</span>
<span id="cb938-21"><a href="análisis-de-datos-con-r.html#cb938-21" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(v)</span>
<span id="cb938-22"><a href="análisis-de-datos-con-r.html#cb938-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb938-23"><a href="análisis-de-datos-con-r.html#cb938-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Números complejos </span></span>
<span id="cb938-24"><a href="análisis-de-datos-con-r.html#cb938-24" aria-hidden="true" tabindex="-1"></a>t<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">+</span>2i,<span class="dv">1</span><span class="sc">+</span>3i)</span>
<span id="cb938-25"><a href="análisis-de-datos-con-r.html#cb938-25" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(t)</span></code></pre></div>
<p>Hay más clases: Date(fechas), Factor(variables categóricas), data.frame,
tibble, list.</p>
</div>
<div id="importan-los-tipos-de-los-objetos" class="section level4 hasAnchor" number="8.2.3.3">
<h4><span class="header-section-number">8.2.3.3</span> ¿Importan los tipos de los objetos?<a href="análisis-de-datos-con-r.html#importan-los-tipos-de-los-objetos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R intenta mantener dentro de un vector el tipo de objeto. Si es que
tratamos de juntar distintos tipos de datos en un vector. Igualar a la
clase. Por ejemplo, si intentamos generar un vector con texto y
número/logical todo será texto:</p>
<div class="sourceCode" id="cb939"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb939-1"><a href="análisis-de-datos-con-r.html#cb939-1" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="st">&quot;a&quot;</span>, <span class="cn">TRUE</span>, <span class="dv">2</span>)</span>
<span id="cb939-2"><a href="análisis-de-datos-con-r.html#cb939-2" aria-hidden="true" tabindex="-1"></a>h</span>
<span id="cb939-3"><a href="análisis-de-datos-con-r.html#cb939-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(h)</span></code></pre></div>
<p>Si intentamos juntar un “Logical” con un número todo será número:</p>
<div class="sourceCode" id="cb940"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb940-1"><a href="análisis-de-datos-con-r.html#cb940-1" aria-hidden="true" tabindex="-1"></a>h1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb940-2"><a href="análisis-de-datos-con-r.html#cb940-2" aria-hidden="true" tabindex="-1"></a>h1</span>
<span id="cb940-3"><a href="análisis-de-datos-con-r.html#cb940-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(h1)</span></code></pre></div>
<p>Aquí carácter todo se va a caracter:</p>
<div class="sourceCode" id="cb941"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb941-1"><a href="análisis-de-datos-con-r.html#cb941-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;T&quot;</span>, <span class="st">&quot;FALSE&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">+</span>2i, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb941-2"><a href="análisis-de-datos-con-r.html#cb941-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span>
<span id="cb941-3"><a href="análisis-de-datos-con-r.html#cb941-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb941-4"><a href="análisis-de-datos-con-r.html#cb941-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb941-5"><a href="análisis-de-datos-con-r.html#cb941-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span>
<span id="cb941-6"><a href="análisis-de-datos-con-r.html#cb941-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb941-7"><a href="análisis-de-datos-con-r.html#cb941-7" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb941-8"><a href="análisis-de-datos-con-r.html#cb941-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span></code></pre></div>
<p>Si utilizo el operador <code>:</code> para crear vectores lo interpreta como un
<em>integer</em>.</p>
</div>
<div id="forzar-a-r-para-que-utilice-un-tipo-de-dato" class="section level4 hasAnchor" number="8.2.3.4">
<h4><span class="header-section-number">8.2.3.4</span> Forzar a R para que utilice un tipo de dato<a href="análisis-de-datos-con-r.html#forzar-a-r-para-que-utilice-un-tipo-de-dato" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Forzar a R a llevar el vector solo a numérico:</p>
<div class="sourceCode" id="cb942"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb942-1"><a href="análisis-de-datos-con-r.html#cb942-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(x)</span>
<span id="cb942-2"><a href="análisis-de-datos-con-r.html#cb942-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(z)</span>
<span id="cb942-3"><a href="análisis-de-datos-con-r.html#cb942-3" aria-hidden="true" tabindex="-1"></a>z </span></code></pre></div>
<p><code>as.numeric()</code> fuerza al vector a solo tener números. Noten que remplaza
los que no son numérico por NA.</p>
<p>Forzar a R a llevar el vector solo a carácteres:</p>
<div class="sourceCode" id="cb943"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb943-1"><a href="análisis-de-datos-con-r.html#cb943-1" aria-hidden="true" tabindex="-1"></a>z1 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(y)</span>
<span id="cb943-2"><a href="análisis-de-datos-con-r.html#cb943-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(z1)</span>
<span id="cb943-3"><a href="análisis-de-datos-con-r.html#cb943-3" aria-hidden="true" tabindex="-1"></a>z1</span></code></pre></div>
<p>Noten que ahora se agregaron las dobles comillas.</p>
<p>Forzar a R a llevar el vector sólo a carácter.</p>
<div class="sourceCode" id="cb944"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb944-1"><a href="análisis-de-datos-con-r.html#cb944-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb944-2"><a href="análisis-de-datos-con-r.html#cb944-2" aria-hidden="true" tabindex="-1"></a>z2 <span class="ot">&lt;-</span> <span class="fu">as.logical</span>(x)</span>
<span id="cb944-3"><a href="análisis-de-datos-con-r.html#cb944-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(z2)</span>
<span id="cb944-4"><a href="análisis-de-datos-con-r.html#cb944-4" aria-hidden="true" tabindex="-1"></a>z2 </span></code></pre></div>
<p>Noten que “T” fue aceptado como TRUE!</p>
</div>
<div id="cómo-saber-que-tipo-de-datos-tengo" class="section level4 hasAnchor" number="8.2.3.5">
<h4><span class="header-section-number">8.2.3.5</span> ¿Cómo saber que tipo de datos tengo?<a href="análisis-de-datos-con-r.html#cómo-saber-que-tipo-de-datos-tengo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb945"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb945-1"><a href="análisis-de-datos-con-r.html#cb945-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo preguntar a R sobre el tipo. </span></span>
<span id="cb945-2"><a href="análisis-de-datos-con-r.html#cb945-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb945-3"><a href="análisis-de-datos-con-r.html#cb945-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(y)   <span class="co"># Es numerico?</span></span>
<span id="cb945-4"><a href="análisis-de-datos-con-r.html#cb945-4" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(y) <span class="co"># Es caracter?</span></span>
<span id="cb945-5"><a href="análisis-de-datos-con-r.html#cb945-5" aria-hidden="true" tabindex="-1"></a><span class="fu">is.logical</span>(y)   <span class="co"># Es logico?</span></span>
<span id="cb945-6"><a href="análisis-de-datos-con-r.html#cb945-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb945-7"><a href="análisis-de-datos-con-r.html#cb945-7" aria-hidden="true" tabindex="-1"></a><span class="co"># La respuesta a esta pregunta va a ser un valor lógico</span></span>
<span id="cb945-8"><a href="análisis-de-datos-con-r.html#cb945-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">is.numeric</span>(y))</span>
<span id="cb945-9"><a href="análisis-de-datos-con-r.html#cb945-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb945-10"><a href="análisis-de-datos-con-r.html#cb945-10" aria-hidden="true" tabindex="-1"></a><span class="co"># También se puede utilizar la opcion `typeof`</span></span>
<span id="cb945-11"><a href="análisis-de-datos-con-r.html#cb945-11" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(y)</span></code></pre></div>
</div>
<div id="mayúsculas-importan" class="section level4 hasAnchor" number="8.2.3.6">
<h4><span class="header-section-number">8.2.3.6</span> Mayúsculas importan<a href="análisis-de-datos-con-r.html#mayúsculas-importan" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Como vimos en lasección anterior, R es sensible a las mayúsculas. Esto
aplica para nombres de funciones, paquetes, comando y también para los
datos. Por ejemplo:</p>
<div class="sourceCode" id="cb946"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb946-1"><a href="análisis-de-datos-con-r.html#cb946-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;a&quot;</span>,<span class="st">&quot;a&quot;</span>,<span class="st">&quot;a&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>,<span class="st">&quot;b&quot;</span>, <span class="st">&quot;A&quot;</span>)</span>
<span id="cb946-2"><a href="análisis-de-datos-con-r.html#cb946-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span>
<span id="cb946-3"><a href="análisis-de-datos-con-r.html#cb946-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb946-4"><a href="análisis-de-datos-con-r.html#cb946-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x <span class="sc">==</span> <span class="st">&#39;a&#39;</span>)</span>
<span id="cb946-5"><a href="análisis-de-datos-con-r.html#cb946-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x <span class="sc">==</span> <span class="st">&#39;b&#39;</span>)</span></code></pre></div>
<p>Para R las minúsculas y mayúsculas SI IMPORTAN!.</p>
</div>
<div id="carácteres-especiales" class="section level4 hasAnchor" number="8.2.3.7">
<h4><span class="header-section-number">8.2.3.7</span> Carácteres especiales<a href="análisis-de-datos-con-r.html#carácteres-especiales" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vimos que existen nombres de variables no validos en R. Tambien existe
un conjunto de caracteres invalidos.</p>
<ul>
<li><strong>NA:</strong> Not Available (missing values)</li>
<li><strong>NaN:</strong> Not a Numbers (ej. 0/0)</li>
<li><strong>Inf:</strong> Infinito (1/0)</li>
<li><strong>-Inf:</strong> Menos infinito</li>
</ul>
<div class="sourceCode" id="cb947"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb947-1"><a href="análisis-de-datos-con-r.html#cb947-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span>
<span id="cb947-2"><a href="análisis-de-datos-con-r.html#cb947-2" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span> </span></code></pre></div>
</div>
<div id="missing-values-3" class="section level4 hasAnchor" number="8.2.3.8">
<h4><span class="header-section-number">8.2.3.8</span> Missing values<a href="análisis-de-datos-con-r.html#missing-values-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>En R, los valores perdidos (“missing values”) se representan con el
valor especial <code>NA</code> (letras mayusculas N y A - sin comillas). Para saber
si tengo valores <code>NA</code> en un objeto, puedo ocupar la funcion <code>is.na()</code>:</p>
<div class="sourceCode" id="cb948"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb948-1"><a href="análisis-de-datos-con-r.html#cb948-1" aria-hidden="true" tabindex="-1"></a>ejemplo <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="cn">NA</span>,<span class="dv">4</span>)</span>
<span id="cb948-2"><a href="análisis-de-datos-con-r.html#cb948-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(ejemplo)</span>
<span id="cb948-3"><a href="análisis-de-datos-con-r.html#cb948-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb948-4"><a href="análisis-de-datos-con-r.html#cb948-4" aria-hidden="true" tabindex="-1"></a>ejemplo[<span class="sc">!</span><span class="fu">is.na</span>(ejemplo)]</span>
<span id="cb948-5"><a href="análisis-de-datos-con-r.html#cb948-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb948-6"><a href="análisis-de-datos-con-r.html#cb948-6" aria-hidden="true" tabindex="-1"></a><span class="co"># El resultado es un vector. Noten que es importante para utilizar algunas funciones:</span></span>
<span id="cb948-7"><a href="análisis-de-datos-con-r.html#cb948-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb948-8"><a href="análisis-de-datos-con-r.html#cb948-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ejemplo)</span>
<span id="cb948-9"><a href="análisis-de-datos-con-r.html#cb948-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ejemplo, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>No funciona en el primer caso, si en el segundo. Veremos mas detalles
sobre como tratar missing values (ej. recodificar) en las clases de
manipulacion y analisis de datos.</p>
</div>
<div id="funciones-útiles" class="section level4 hasAnchor" number="8.2.3.9">
<h4><span class="header-section-number">8.2.3.9</span> Funciones útiles<a href="análisis-de-datos-con-r.html#funciones-útiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb949"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb949-1"><a href="análisis-de-datos-con-r.html#cb949-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Redondear</span></span>
<span id="cb949-2"><a href="análisis-de-datos-con-r.html#cb949-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x,<span class="at">digits =</span> n)</span>
<span id="cb949-3"><a href="análisis-de-datos-con-r.html#cb949-3" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">c</span>(<span class="fl">2.53</span>, <span class="fl">3.52</span>), <span class="dv">1</span>)</span>
<span id="cb949-4"><a href="análisis-de-datos-con-r.html#cb949-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-5"><a href="análisis-de-datos-con-r.html#cb949-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Estadística simple</span></span>
<span id="cb949-6"><a href="análisis-de-datos-con-r.html#cb949-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb949-7"><a href="análisis-de-datos-con-r.html#cb949-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-8"><a href="análisis-de-datos-con-r.html#cb949-8" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)    <span class="co"># promedio</span></span>
<span id="cb949-9"><a href="análisis-de-datos-con-r.html#cb949-9" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x)  <span class="co"># mediana</span></span>
<span id="cb949-10"><a href="análisis-de-datos-con-r.html#cb949-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(x)      <span class="co"># desviacion estandar</span></span>
<span id="cb949-11"><a href="análisis-de-datos-con-r.html#cb949-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)     <span class="co"># suma del vector</span></span>
<span id="cb949-12"><a href="análisis-de-datos-con-r.html#cb949-12" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(x)     <span class="co"># Valor minimo</span></span>
<span id="cb949-13"><a href="análisis-de-datos-con-r.html#cb949-13" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x)     <span class="co"># Valor maximo</span></span>
<span id="cb949-14"><a href="análisis-de-datos-con-r.html#cb949-14" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(x)   <span class="co"># rango </span></span>
<span id="cb949-15"><a href="análisis-de-datos-con-r.html#cb949-15" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x) <span class="co"># resumen </span></span>
<span id="cb949-16"><a href="análisis-de-datos-con-r.html#cb949-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-17"><a href="análisis-de-datos-con-r.html#cb949-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que tienen que ser vectores!</span></span>
<span id="cb949-18"><a href="análisis-de-datos-con-r.html#cb949-18" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>) </span>
<span id="cb949-19"><a href="análisis-de-datos-con-r.html#cb949-19" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">0</span>))</span>
<span id="cb949-20"><a href="análisis-de-datos-con-r.html#cb949-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-21"><a href="análisis-de-datos-con-r.html#cb949-21" aria-hidden="true" tabindex="-1"></a><span class="co"># En el primer caso sólo toma el primer valor! Ojo, siempre un vector. </span></span>
<span id="cb949-22"><a href="análisis-de-datos-con-r.html#cb949-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-23"><a href="análisis-de-datos-con-r.html#cb949-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Otras funciones</span></span>
<span id="cb949-24"><a href="análisis-de-datos-con-r.html#cb949-24" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">2</span> )                        <span class="co"># Crear secuencias</span></span>
<span id="cb949-25"><a href="análisis-de-datos-con-r.html#cb949-25" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),<span class="dv">10</span>)                    <span class="co"># Repetir</span></span>
<span id="cb949-26"><a href="análisis-de-datos-con-r.html#cb949-26" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span>(x,<span class="dv">2</span>)                            <span class="co"># subdividir</span></span>
<span id="cb949-27"><a href="análisis-de-datos-con-r.html#cb949-27" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(x, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>) <span class="co"># Generar un aleatorio</span></span>
<span id="cb949-28"><a href="análisis-de-datos-con-r.html#cb949-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-29"><a href="análisis-de-datos-con-r.html#cb949-29" aria-hidden="true" tabindex="-1"></a><span class="co"># El analisis de datos es...</span></span>
<span id="cb949-30"><a href="análisis-de-datos-con-r.html#cb949-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-31"><a href="análisis-de-datos-con-r.html#cb949-31" aria-hidden="true" tabindex="-1"></a>Altura <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">168</span>, <span class="dv">177</span>, <span class="dv">177</span>, <span class="dv">177</span>, <span class="dv">178</span>, <span class="dv">172</span>, <span class="dv">165</span>, <span class="dv">171</span>, <span class="dv">178</span>, <span class="dv">170</span>)</span>
<span id="cb949-32"><a href="análisis-de-datos-con-r.html#cb949-32" aria-hidden="true" tabindex="-1"></a>Peso  <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">72</span>, <span class="dv">85</span>, <span class="dv">95</span>, <span class="dv">71</span>, <span class="dv">69</span>, <span class="dv">61</span>, <span class="dv">61</span>, <span class="dv">51</span>, <span class="dv">75</span>)</span>
<span id="cb949-33"><a href="análisis-de-datos-con-r.html#cb949-33" aria-hidden="true" tabindex="-1"></a>M <span class="ot">=</span> <span class="fu">cbind</span>(Altura, Peso)</span>
<span id="cb949-34"><a href="análisis-de-datos-con-r.html#cb949-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-35"><a href="análisis-de-datos-con-r.html#cb949-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Paquete para trabajar con bases de datos (más detalles en secciones 2.3 y 2.4)</span></span>
<span id="cb949-36"><a href="análisis-de-datos-con-r.html#cb949-36" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>) </span>
<span id="cb949-37"><a href="análisis-de-datos-con-r.html#cb949-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble) <span class="co"># Una libreria dentro de tidyverse. </span></span>
<span id="cb949-38"><a href="análisis-de-datos-con-r.html#cb949-38" aria-hidden="true" tabindex="-1"></a>misdatos <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(M)</span>
<span id="cb949-39"><a href="análisis-de-datos-con-r.html#cb949-39" aria-hidden="true" tabindex="-1"></a>misdatos</span>
<span id="cb949-40"><a href="análisis-de-datos-con-r.html#cb949-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb949-41"><a href="análisis-de-datos-con-r.html#cb949-41" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(misdatos)</span>
<span id="cb949-42"><a href="análisis-de-datos-con-r.html#cb949-42" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(Altura)</span>
<span id="cb949-43"><a href="análisis-de-datos-con-r.html#cb949-43" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(misdatos<span class="sc">$</span>Peso)</span>
<span id="cb949-44"><a href="análisis-de-datos-con-r.html#cb949-44" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(misdatos)</span></code></pre></div>
</div>
</div>
<div id="herramientas-en-r" class="section level3 hasAnchor" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> Herramientas en R<a href="análisis-de-datos-con-r.html#herramientas-en-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="escribir-códigos" class="section level4 hasAnchor" number="8.2.4.1">
<h4><span class="header-section-number">8.2.4.1</span> Escribir Códigos<a href="análisis-de-datos-con-r.html#escribir-códigos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Algunos comentarios con respecto a la escritura de codigos:</p>
<ol style="list-style-type: decimal">
<li>Siempre escribir comentarios autocontenidos.</li>
<li>Siempre utilizar índice.</li>
</ol>
<ul>
<li>Me permite reducir el código.</li>
<li>Me permite ver donde estoy también en un código largo.</li>
<li>Puedo verlo con ctrl + shift + O o bien en la esquina inferior
izquierda del script.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Separar códigos largos en varios códigos. Cada código debe tener un
objetivo claro que debe explicar en una oración.</li>
<li>Escribir códigos en bloques.</li>
<li>Tres consejos básicos de estilo:</li>
</ol>
<ul>
<li>utilizar <code>_</code> para generar variables o bien otra convención.</li>
<li>separar entre objetos y operaciones.</li>
</ul>
</div>
<div id="condicionales-y-controladores-de-flujo" class="section level4 hasAnchor" number="8.2.4.2">
<h4><span class="header-section-number">8.2.4.2</span> Condicionales y controladores de flujo<a href="análisis-de-datos-con-r.html#condicionales-y-controladores-de-flujo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Operadores básicos:</p>
<div class="sourceCode" id="cb950"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb950-1"><a href="análisis-de-datos-con-r.html#cb950-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb950-2"><a href="análisis-de-datos-con-r.html#cb950-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-3"><a href="análisis-de-datos-con-r.html#cb950-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignador</span></span>
<span id="cb950-4"><a href="análisis-de-datos-con-r.html#cb950-4" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">3</span></span>
<span id="cb950-5"><a href="análisis-de-datos-con-r.html#cb950-5" aria-hidden="true" tabindex="-1"></a>a </span>
<span id="cb950-6"><a href="análisis-de-datos-con-r.html#cb950-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-7"><a href="análisis-de-datos-con-r.html#cb950-7" aria-hidden="true" tabindex="-1"></a>a1 <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">3</span></span>
<span id="cb950-8"><a href="análisis-de-datos-con-r.html#cb950-8" aria-hidden="true" tabindex="-1"></a>a1 </span>
<span id="cb950-9"><a href="análisis-de-datos-con-r.html#cb950-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-10"><a href="análisis-de-datos-con-r.html#cb950-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: Nunca ocupar igual. </span></span>
<span id="cb950-11"><a href="análisis-de-datos-con-r.html#cb950-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-12"><a href="análisis-de-datos-con-r.html#cb950-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Igualdad </span></span>
<span id="cb950-13"><a href="análisis-de-datos-con-r.html#cb950-13" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="cn">TRUE</span> </span>
<span id="cb950-14"><a href="análisis-de-datos-con-r.html#cb950-14" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="cn">FALSE</span></span>
<span id="cb950-15"><a href="análisis-de-datos-con-r.html#cb950-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-16"><a href="análisis-de-datos-con-r.html#cb950-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: Para comparar elementos se utiliza doble igual &quot;==&quot;.  </span></span>
<span id="cb950-17"><a href="análisis-de-datos-con-r.html#cb950-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-18"><a href="análisis-de-datos-con-r.html#cb950-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-19"><a href="análisis-de-datos-con-r.html#cb950-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Desigualdad (!=)</span></span>
<span id="cb950-20"><a href="análisis-de-datos-con-r.html#cb950-20" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">!=</span> <span class="cn">FALSE</span> </span>
<span id="cb950-21"><a href="análisis-de-datos-con-r.html#cb950-21" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Hola&quot;</span> <span class="sc">!=</span> <span class="st">&quot;Chao&quot;</span></span>
<span id="cb950-22"><a href="análisis-de-datos-con-r.html#cb950-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-23"><a href="análisis-de-datos-con-r.html#cb950-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Otros comparadores: &lt;, &gt; (&gt;=), (&lt;=) </span></span>
<span id="cb950-24"><a href="análisis-de-datos-con-r.html#cb950-24" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">&lt;</span> <span class="dv">5</span></span>
<span id="cb950-25"><a href="análisis-de-datos-con-r.html#cb950-25" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&gt;</span> <span class="dv">8</span></span>
<span id="cb950-26"><a href="análisis-de-datos-con-r.html#cb950-26" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&gt;=</span> <span class="dv">5</span></span>
<span id="cb950-27"><a href="análisis-de-datos-con-r.html#cb950-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-28"><a href="análisis-de-datos-con-r.html#cb950-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: No confundir con &lt;- que es para asignar. </span></span>
<span id="cb950-29"><a href="análisis-de-datos-con-r.html#cb950-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-30"><a href="análisis-de-datos-con-r.html#cb950-30" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&gt;</span> <span class="cn">FALSE</span></span>
<span id="cb950-31"><a href="análisis-de-datos-con-r.html#cb950-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-32"><a href="análisis-de-datos-con-r.html#cb950-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que la respuesta en un logical. </span></span>
<span id="cb950-33"><a href="análisis-de-datos-con-r.html#cb950-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-34"><a href="análisis-de-datos-con-r.html#cb950-34" aria-hidden="true" tabindex="-1"></a><span class="co"># En vectores y matrices</span></span>
<span id="cb950-35"><a href="análisis-de-datos-con-r.html#cb950-35" aria-hidden="true" tabindex="-1"></a>vector1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">9</span>,<span class="dv">13</span>)</span>
<span id="cb950-36"><a href="análisis-de-datos-con-r.html#cb950-36" aria-hidden="true" tabindex="-1"></a>vector2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">12</span>,<span class="dv">15</span>)</span>
<span id="cb950-37"><a href="análisis-de-datos-con-r.html#cb950-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-38"><a href="análisis-de-datos-con-r.html#cb950-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparar contra un escalar</span></span>
<span id="cb950-39"><a href="análisis-de-datos-con-r.html#cb950-39" aria-hidden="true" tabindex="-1"></a>vector1 <span class="sc">&gt;</span> <span class="dv">10</span></span>
<span id="cb950-40"><a href="análisis-de-datos-con-r.html#cb950-40" aria-hidden="true" tabindex="-1"></a>vector2 <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb950-41"><a href="análisis-de-datos-con-r.html#cb950-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-42"><a href="análisis-de-datos-con-r.html#cb950-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Compararlos entre ellos </span></span>
<span id="cb950-43"><a href="análisis-de-datos-con-r.html#cb950-43" aria-hidden="true" tabindex="-1"></a>vector1 <span class="sc">&lt;</span> vector2</span>
<span id="cb950-44"><a href="análisis-de-datos-con-r.html#cb950-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-45"><a href="análisis-de-datos-con-r.html#cb950-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos en una matriz </span></span>
<span id="cb950-46"><a href="análisis-de-datos-con-r.html#cb950-46" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(vector1, vector2), </span>
<span id="cb950-47"><a href="análisis-de-datos-con-r.html#cb950-47" aria-hidden="true" tabindex="-1"></a>                 <span class="at">byrow =</span> <span class="cn">TRUE</span>, </span>
<span id="cb950-48"><a href="análisis-de-datos-con-r.html#cb950-48" aria-hidden="true" tabindex="-1"></a>                 <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb950-49"><a href="análisis-de-datos-con-r.html#cb950-49" aria-hidden="true" tabindex="-1"></a>matrix</span>
<span id="cb950-50"><a href="análisis-de-datos-con-r.html#cb950-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb950-51"><a href="análisis-de-datos-con-r.html#cb950-51" aria-hidden="true" tabindex="-1"></a>matrix <span class="sc">&gt;</span> <span class="dv">10</span></span></code></pre></div>
<p>Operador %in%: Un operador muy útil para comparar valores y para evaluar
rápidamente si un valor está dentro de un vector o marco de datos.</p>
<div class="sourceCode" id="cb951"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb951-1"><a href="análisis-de-datos-con-r.html#cb951-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb951-2"><a href="análisis-de-datos-con-r.html#cb951-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-3"><a href="análisis-de-datos-con-r.html#cb951-3" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb951-4"><a href="análisis-de-datos-con-r.html#cb951-4" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="dv">101</span></span>
<span id="cb951-5"><a href="análisis-de-datos-con-r.html#cb951-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>)</span>
<span id="cb951-6"><a href="análisis-de-datos-con-r.html#cb951-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-7"><a href="análisis-de-datos-con-r.html#cb951-7" aria-hidden="true" tabindex="-1"></a><span class="co"># El valor v1 ¿se encuentra dentro de t?</span></span>
<span id="cb951-8"><a href="análisis-de-datos-con-r.html#cb951-8" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">%in%</span> t </span>
<span id="cb951-9"><a href="análisis-de-datos-con-r.html#cb951-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-10"><a href="análisis-de-datos-con-r.html#cb951-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo....</span></span>
<span id="cb951-11"><a href="análisis-de-datos-con-r.html#cb951-11" aria-hidden="true" tabindex="-1"></a>mivector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)</span>
<span id="cb951-12"><a href="análisis-de-datos-con-r.html#cb951-12" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;a&quot;</span> <span class="sc">%in%</span> mivector</span>
<span id="cb951-13"><a href="análisis-de-datos-con-r.html#cb951-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-14"><a href="análisis-de-datos-con-r.html#cb951-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Si no  está en el vector da un FALSE</span></span>
<span id="cb951-15"><a href="análisis-de-datos-con-r.html#cb951-15" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;h&quot;</span> <span class="sc">%in%</span> mivector</span>
<span id="cb951-16"><a href="análisis-de-datos-con-r.html#cb951-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-17"><a href="análisis-de-datos-con-r.html#cb951-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Si le quiero preguntar si NO está, coloco un signo de exclamación al frente. </span></span>
<span id="cb951-18"><a href="análisis-de-datos-con-r.html#cb951-18" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">&quot;a&quot;</span> <span class="sc">%in%</span> mivector</span>
<span id="cb951-19"><a href="análisis-de-datos-con-r.html#cb951-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-20"><a href="análisis-de-datos-con-r.html#cb951-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Un vector en otro vector </span></span>
<span id="cb951-21"><a href="análisis-de-datos-con-r.html#cb951-21" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">12</span>, <span class="dv">19</span>, <span class="dv">1</span>)</span>
<span id="cb951-22"><a href="análisis-de-datos-con-r.html#cb951-22" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">16</span>, <span class="dv">1</span>)</span>
<span id="cb951-23"><a href="análisis-de-datos-con-r.html#cb951-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-24"><a href="análisis-de-datos-con-r.html#cb951-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Veamos si los elementos de un vector &quot;largo&quot; están en uno &quot;corto&quot; </span></span>
<span id="cb951-25"><a href="análisis-de-datos-con-r.html#cb951-25" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%in%</span> a</span>
<span id="cb951-26"><a href="análisis-de-datos-con-r.html#cb951-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb951-27"><a href="análisis-de-datos-con-r.html#cb951-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Esto va a ser muy útil cuando trabajemos con bases de datos. </span></span></code></pre></div>
<p>Operadores para seleccionar subconjuntos de datos:</p>
<div class="sourceCode" id="cb952"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb952-1"><a href="análisis-de-datos-con-r.html#cb952-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="cn">NA</span>,<span class="dv">8</span>)</span>
<span id="cb952-2"><a href="análisis-de-datos-con-r.html#cb952-2" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb952-3"><a href="análisis-de-datos-con-r.html#cb952-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb952-4"><a href="análisis-de-datos-con-r.html#cb952-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vamos a seleccionar solo los que no son NA</span></span>
<span id="cb952-5"><a href="análisis-de-datos-con-r.html#cb952-5" aria-hidden="true" tabindex="-1"></a>y1 <span class="ot">&lt;-</span> y[<span class="sc">!</span><span class="fu">is.na</span>(y)]</span>
<span id="cb952-6"><a href="análisis-de-datos-con-r.html#cb952-6" aria-hidden="true" tabindex="-1"></a>y1 </span>
<span id="cb952-7"><a href="análisis-de-datos-con-r.html#cb952-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb952-8"><a href="análisis-de-datos-con-r.html#cb952-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que utilizamos la funcion is.NA y un operador (!). Más detalles en parte de análisis de datos, pero noten que la idea principal está aquí. </span></span></code></pre></div>
<p>Operadores lógicos:</p>
<div class="sourceCode" id="cb953"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb953-1"><a href="análisis-de-datos-con-r.html#cb953-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Operador (&amp;): operador &quot;y&quot;</span></span>
<span id="cb953-2"><a href="análisis-de-datos-con-r.html#cb953-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span> </span>
<span id="cb953-3"><a href="análisis-de-datos-con-r.html#cb953-3" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span>
<span id="cb953-4"><a href="análisis-de-datos-con-r.html#cb953-4" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span>
<span id="cb953-5"><a href="análisis-de-datos-con-r.html#cb953-5" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span> </span>
<span id="cb953-6"><a href="análisis-de-datos-con-r.html#cb953-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-7"><a href="análisis-de-datos-con-r.html#cb953-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo </span></span>
<span id="cb953-8"><a href="análisis-de-datos-con-r.html#cb953-8" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">12</span> </span>
<span id="cb953-9"><a href="análisis-de-datos-con-r.html#cb953-9" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">11</span>  </span>
<span id="cb953-10"><a href="análisis-de-datos-con-r.html#cb953-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-11"><a href="análisis-de-datos-con-r.html#cb953-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Operador (|): operador &quot;o&quot;. Condiciones no excluyentes.</span></span>
<span id="cb953-12"><a href="análisis-de-datos-con-r.html#cb953-12" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span>  <span class="sc">|</span> <span class="cn">TRUE</span> </span>
<span id="cb953-13"><a href="análisis-de-datos-con-r.html#cb953-13" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span>  <span class="sc">|</span> <span class="cn">FALSE</span> </span>
<span id="cb953-14"><a href="análisis-de-datos-con-r.html#cb953-14" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">TRUE</span></span>
<span id="cb953-15"><a href="análisis-de-datos-con-r.html#cb953-15" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span> </span>
<span id="cb953-16"><a href="análisis-de-datos-con-r.html#cb953-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-17"><a href="análisis-de-datos-con-r.html#cb953-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo</span></span>
<span id="cb953-18"><a href="análisis-de-datos-con-r.html#cb953-18" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb953-19"><a href="análisis-de-datos-con-r.html#cb953-19" aria-hidden="true" tabindex="-1"></a>y <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">|</span> y <span class="sc">&gt;</span> <span class="dv">15</span> </span>
<span id="cb953-20"><a href="análisis-de-datos-con-r.html#cb953-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-21"><a href="análisis-de-datos-con-r.html#cb953-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Operador de negación (!)</span></span>
<span id="cb953-22"><a href="análisis-de-datos-con-r.html#cb953-22" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">TRUE</span> </span>
<span id="cb953-23"><a href="análisis-de-datos-con-r.html#cb953-23" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">FALSE</span> </span>
<span id="cb953-24"><a href="análisis-de-datos-con-r.html#cb953-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-25"><a href="análisis-de-datos-con-r.html#cb953-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinarlo con funciones </span></span>
<span id="cb953-26"><a href="análisis-de-datos-con-r.html#cb953-26" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.numeric</span>(<span class="dv">5</span>)</span>
<span id="cb953-27"><a href="análisis-de-datos-con-r.html#cb953-27" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.numeric</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb953-28"><a href="análisis-de-datos-con-r.html#cb953-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-29"><a href="análisis-de-datos-con-r.html#cb953-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Operadores con vectores </span></span>
<span id="cb953-30"><a href="análisis-de-datos-con-r.html#cb953-30" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="sc">&amp;</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb953-31"><a href="análisis-de-datos-con-r.html#cb953-31" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>) <span class="sc">|</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb953-32"><a href="análisis-de-datos-con-r.html#cb953-32" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>)</span>
<span id="cb953-33"><a href="análisis-de-datos-con-r.html#cb953-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb953-34"><a href="análisis-de-datos-con-r.html#cb953-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Si utilizo dos &quot;&amp;&amp;&quot; sólo compara el primer elemento del vector</span></span>
<span id="cb953-35"><a href="análisis-de-datos-con-r.html#cb953-35" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>) <span class="sc">||</span> <span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>)</span>
<span id="cb953-36"><a href="análisis-de-datos-con-r.html#cb953-36" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>) <span class="sc">&amp;&amp;</span> <span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>, <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="condicionales" class="section level4 hasAnchor" number="8.2.4.3">
<h4><span class="header-section-number">8.2.4.3</span> Condicionales<a href="análisis-de-datos-con-r.html#condicionales" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If:</p>
<div class="sourceCode" id="cb954"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb954-1"><a href="análisis-de-datos-con-r.html#cb954-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb954-2"><a href="análisis-de-datos-con-r.html#cb954-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-3"><a href="análisis-de-datos-con-r.html#cb954-3" aria-hidden="true" tabindex="-1"></a><span class="co">#if (condicion){</span></span>
<span id="cb954-4"><a href="análisis-de-datos-con-r.html#cb954-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb954-5"><a href="análisis-de-datos-con-r.html#cb954-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  cualquier cosa que quiero que se haga si la condición se cumple </span></span>
<span id="cb954-6"><a href="análisis-de-datos-con-r.html#cb954-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb954-7"><a href="análisis-de-datos-con-r.html#cb954-7" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span>
<span id="cb954-8"><a href="análisis-de-datos-con-r.html#cb954-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb954-9"><a href="análisis-de-datos-con-r.html#cb954-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb954-10"><a href="análisis-de-datos-con-r.html#cb954-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-11"><a href="análisis-de-datos-con-r.html#cb954-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es número mayor que cero&quot;</span>)</span>
<span id="cb954-12"><a href="análisis-de-datos-con-r.html#cb954-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-13"><a href="análisis-de-datos-con-r.html#cb954-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb954-14"><a href="análisis-de-datos-con-r.html#cb954-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb954-15"><a href="análisis-de-datos-con-r.html#cb954-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb954-16"><a href="análisis-de-datos-con-r.html#cb954-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-17"><a href="análisis-de-datos-con-r.html#cb954-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es un número mayor que cero &quot;</span>)</span>
<span id="cb954-18"><a href="análisis-de-datos-con-r.html#cb954-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-19"><a href="análisis-de-datos-con-r.html#cb954-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb954-20"><a href="análisis-de-datos-con-r.html#cb954-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb954-21"><a href="análisis-de-datos-con-r.html#cb954-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>){</span>
<span id="cb954-22"><a href="análisis-de-datos-con-r.html#cb954-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-23"><a href="análisis-de-datos-con-r.html#cb954-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es un número menor que cero&quot;</span>)</span>
<span id="cb954-24"><a href="análisis-de-datos-con-r.html#cb954-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb954-25"><a href="análisis-de-datos-con-r.html#cb954-25" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Else:</p>
<div class="sourceCode" id="cb955"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb955-1"><a href="análisis-de-datos-con-r.html#cb955-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb955-2"><a href="análisis-de-datos-con-r.html#cb955-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb955-3"><a href="análisis-de-datos-con-r.html#cb955-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb955-4"><a href="análisis-de-datos-con-r.html#cb955-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb955-5"><a href="análisis-de-datos-con-r.html#cb955-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es un número positivo&quot;</span>)</span>
<span id="cb955-6"><a href="análisis-de-datos-con-r.html#cb955-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb955-7"><a href="análisis-de-datos-con-r.html#cb955-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb955-8"><a href="análisis-de-datos-con-r.html#cb955-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb955-9"><a href="análisis-de-datos-con-r.html#cb955-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es un número negativo&quot;</span>)</span>
<span id="cb955-10"><a href="análisis-de-datos-con-r.html#cb955-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb955-11"><a href="análisis-de-datos-con-r.html#cb955-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Elseif:</p>
<div class="sourceCode" id="cb956"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb956-1"><a href="análisis-de-datos-con-r.html#cb956-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb956-2"><a href="análisis-de-datos-con-r.html#cb956-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb956-3"><a href="análisis-de-datos-con-r.html#cb956-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb956-4"><a href="análisis-de-datos-con-r.html#cb956-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-5"><a href="análisis-de-datos-con-r.html#cb956-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es mayor que cero&quot;</span>)</span>
<span id="cb956-6"><a href="análisis-de-datos-con-r.html#cb956-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-7"><a href="análisis-de-datos-con-r.html#cb956-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb956-8"><a href="análisis-de-datos-con-r.html#cb956-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-9"><a href="análisis-de-datos-con-r.html#cb956-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es igual a cero&quot;</span>)</span>
<span id="cb956-10"><a href="análisis-de-datos-con-r.html#cb956-10" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span>{</span>
<span id="cb956-11"><a href="análisis-de-datos-con-r.html#cb956-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-12"><a href="análisis-de-datos-con-r.html#cb956-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es menor que cero&quot;</span>)</span>
<span id="cb956-13"><a href="análisis-de-datos-con-r.html#cb956-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-14"><a href="análisis-de-datos-con-r.html#cb956-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb956-15"><a href="análisis-de-datos-con-r.html#cb956-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb956-16"><a href="análisis-de-datos-con-r.html#cb956-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Importante: `(%%) corresponde al resto de una división`</span></span>
<span id="cb956-17"><a href="análisis-de-datos-con-r.html#cb956-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb956-18"><a href="análisis-de-datos-con-r.html#cb956-18" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">6</span> </span>
<span id="cb956-19"><a href="análisis-de-datos-con-r.html#cb956-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb956-20"><a href="análisis-de-datos-con-r.html#cb956-20" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb956-21"><a href="análisis-de-datos-con-r.html#cb956-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-22"><a href="análisis-de-datos-con-r.html#cb956-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es divisible por 2&quot;</span>)</span>
<span id="cb956-23"><a href="análisis-de-datos-con-r.html#cb956-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-24"><a href="análisis-de-datos-con-r.html#cb956-24" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb956-25"><a href="análisis-de-datos-con-r.html#cb956-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-26"><a href="análisis-de-datos-con-r.html#cb956-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x es divisible por 3&quot;</span>)</span>
<span id="cb956-27"><a href="análisis-de-datos-con-r.html#cb956-27" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb956-28"><a href="análisis-de-datos-con-r.html#cb956-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-29"><a href="análisis-de-datos-con-r.html#cb956-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;x no es divisible ni por 2 ni por 3&quot;</span>)</span>
<span id="cb956-30"><a href="análisis-de-datos-con-r.html#cb956-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb956-31"><a href="análisis-de-datos-con-r.html#cb956-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb956-32"><a href="análisis-de-datos-con-r.html#cb956-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb956-33"><a href="análisis-de-datos-con-r.html#cb956-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que si la primera condición se cumple, la segunda no se ejecuta aunque sea cierta.  </span></span></code></pre></div>
</div>
<div id="funciones-3" class="section level4 hasAnchor" number="8.2.4.4">
<h4><span class="header-section-number">8.2.4.4</span> Funciones<a href="análisis-de-datos-con-r.html#funciones-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Idea principal: <span class="math inline">\(f(x) = 2x + 1\)</span>, <span class="math inline">\(x \in R\)</span> <span class="math inline">\(f(x) = &#39;hola&#39; + x\)</span>,
<span class="math inline">\(x \in (&#39;pepe&#39;, &#39;pepa&#39;, &#39;marta&#39;)\)</span></p>
<div class="sourceCode" id="cb957"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb957-1"><a href="análisis-de-datos-con-r.html#cb957-1" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb957-2"><a href="análisis-de-datos-con-r.html#cb957-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(valores)</span></code></pre></div>
<p>Algunas cosas adicionales sobre funciones: <code>n</code> me permite ver los
argumentos de una función, sin necesidad de ver la documentación. Útil a
veces.</p>
<div class="sourceCode" id="cb958"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb958-1"><a href="análisis-de-datos-con-r.html#cb958-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Escribir funciones con un argumento</span></span>
<span id="cb958-2"><a href="análisis-de-datos-con-r.html#cb958-2" aria-hidden="true" tabindex="-1"></a>triple <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb958-3"><a href="análisis-de-datos-con-r.html#cb958-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-4"><a href="análisis-de-datos-con-r.html#cb958-4" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">*</span> x</span>
<span id="cb958-5"><a href="análisis-de-datos-con-r.html#cb958-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb958-6"><a href="análisis-de-datos-con-r.html#cb958-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-7"><a href="análisis-de-datos-con-r.html#cb958-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-8"><a href="análisis-de-datos-con-r.html#cb958-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-9"><a href="análisis-de-datos-con-r.html#cb958-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-10"><a href="análisis-de-datos-con-r.html#cb958-10" aria-hidden="true" tabindex="-1"></a>triple <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb958-11"><a href="análisis-de-datos-con-r.html#cb958-11" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb958-12"><a href="análisis-de-datos-con-r.html#cb958-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-13"><a href="análisis-de-datos-con-r.html#cb958-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-14"><a href="análisis-de-datos-con-r.html#cb958-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-15"><a href="análisis-de-datos-con-r.html#cb958-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-16"><a href="análisis-de-datos-con-r.html#cb958-16" aria-hidden="true" tabindex="-1"></a><span class="fu">triple</span>(<span class="dv">500</span>)</span>
<span id="cb958-17"><a href="análisis-de-datos-con-r.html#cb958-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-18"><a href="análisis-de-datos-con-r.html#cb958-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Escribir funciones con mas de un argumento</span></span>
<span id="cb958-19"><a href="análisis-de-datos-con-r.html#cb958-19" aria-hidden="true" tabindex="-1"></a>operacion <span class="ot">&lt;-</span> <span class="cf">function</span>(a,b){</span>
<span id="cb958-20"><a href="análisis-de-datos-con-r.html#cb958-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-21"><a href="análisis-de-datos-con-r.html#cb958-21" aria-hidden="true" tabindex="-1"></a>  a<span class="sc">*</span>b <span class="sc">+</span> a<span class="sc">/</span>b</span>
<span id="cb958-22"><a href="análisis-de-datos-con-r.html#cb958-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-23"><a href="análisis-de-datos-con-r.html#cb958-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-24"><a href="análisis-de-datos-con-r.html#cb958-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-25"><a href="análisis-de-datos-con-r.html#cb958-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-26"><a href="análisis-de-datos-con-r.html#cb958-26" aria-hidden="true" tabindex="-1"></a><span class="fu">operacion</span>(<span class="dv">4</span>,<span class="dv">2</span>)</span>
<span id="cb958-27"><a href="análisis-de-datos-con-r.html#cb958-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-28"><a href="análisis-de-datos-con-r.html#cb958-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Escribir funciones fijando opción por defecto.</span></span>
<span id="cb958-29"><a href="análisis-de-datos-con-r.html#cb958-29" aria-hidden="true" tabindex="-1"></a>operacion_defecto <span class="ot">&lt;-</span> <span class="cf">function</span>(a,<span class="at">b =</span> <span class="dv">1</span>){</span>
<span id="cb958-30"><a href="análisis-de-datos-con-r.html#cb958-30" aria-hidden="true" tabindex="-1"></a>  a<span class="sc">*</span>b <span class="sc">+</span> a<span class="sc">/</span>b</span>
<span id="cb958-31"><a href="análisis-de-datos-con-r.html#cb958-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-32"><a href="análisis-de-datos-con-r.html#cb958-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-33"><a href="análisis-de-datos-con-r.html#cb958-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-34"><a href="análisis-de-datos-con-r.html#cb958-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-35"><a href="análisis-de-datos-con-r.html#cb958-35" aria-hidden="true" tabindex="-1"></a><span class="fu">operacion_defecto</span>(<span class="dv">4</span>)</span>
<span id="cb958-36"><a href="análisis-de-datos-con-r.html#cb958-36" aria-hidden="true" tabindex="-1"></a><span class="fu">operacion_defecto</span>(<span class="dv">4</span>,<span class="dv">0</span>)</span>
<span id="cb958-37"><a href="análisis-de-datos-con-r.html#cb958-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-38"><a href="análisis-de-datos-con-r.html#cb958-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Escribir funciones utilizando if y return.</span></span>
<span id="cb958-39"><a href="análisis-de-datos-con-r.html#cb958-39" aria-hidden="true" tabindex="-1"></a>operacion_condicionales <span class="ot">&lt;-</span> <span class="cf">function</span>(a,<span class="at">b =</span> <span class="dv">1</span>){</span>
<span id="cb958-40"><a href="análisis-de-datos-con-r.html#cb958-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (b <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb958-41"><a href="análisis-de-datos-con-r.html#cb958-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb958-42"><a href="análisis-de-datos-con-r.html#cb958-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb958-43"><a href="análisis-de-datos-con-r.html#cb958-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb958-44"><a href="análisis-de-datos-con-r.html#cb958-44" aria-hidden="true" tabindex="-1"></a>  a<span class="sc">*</span>b <span class="sc">+</span> a<span class="sc">/</span>b  </span>
<span id="cb958-45"><a href="análisis-de-datos-con-r.html#cb958-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-46"><a href="análisis-de-datos-con-r.html#cb958-46" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-47"><a href="análisis-de-datos-con-r.html#cb958-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-48"><a href="análisis-de-datos-con-r.html#cb958-48" aria-hidden="true" tabindex="-1"></a><span class="fu">operacion_condicionales</span>(<span class="dv">4</span>,<span class="dv">0</span>)</span>
<span id="cb958-49"><a href="análisis-de-datos-con-r.html#cb958-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-50"><a href="análisis-de-datos-con-r.html#cb958-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones con texto </span></span>
<span id="cb958-51"><a href="análisis-de-datos-con-r.html#cb958-51" aria-hidden="true" tabindex="-1"></a>texto <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb958-52"><a href="análisis-de-datos-con-r.html#cb958-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Hola mundo!&quot;</span>)</span>
<span id="cb958-53"><a href="análisis-de-datos-con-r.html#cb958-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb958-54"><a href="análisis-de-datos-con-r.html#cb958-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-55"><a href="análisis-de-datos-con-r.html#cb958-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-56"><a href="análisis-de-datos-con-r.html#cb958-56" aria-hidden="true" tabindex="-1"></a><span class="fu">texto</span>()</span>
<span id="cb958-57"><a href="análisis-de-datos-con-r.html#cb958-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-58"><a href="análisis-de-datos-con-r.html#cb958-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Funciones por defecto en ambos casos</span></span>
<span id="cb958-59"><a href="análisis-de-datos-con-r.html#cb958-59" aria-hidden="true" tabindex="-1"></a>operacion_dosdefectos <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">a =</span> <span class="dv">1</span>,<span class="at">b =</span> <span class="dv">1</span>){</span>
<span id="cb958-60"><a href="análisis-de-datos-con-r.html#cb958-60" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (b <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb958-61"><a href="análisis-de-datos-con-r.html#cb958-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb958-62"><a href="análisis-de-datos-con-r.html#cb958-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb958-63"><a href="análisis-de-datos-con-r.html#cb958-63" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb958-64"><a href="análisis-de-datos-con-r.html#cb958-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-65"><a href="análisis-de-datos-con-r.html#cb958-65" aria-hidden="true" tabindex="-1"></a>  a<span class="sc">*</span>b <span class="sc">+</span> a<span class="sc">/</span>b  </span>
<span id="cb958-66"><a href="análisis-de-datos-con-r.html#cb958-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb958-67"><a href="análisis-de-datos-con-r.html#cb958-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb958-68"><a href="análisis-de-datos-con-r.html#cb958-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb958-69"><a href="análisis-de-datos-con-r.html#cb958-69" aria-hidden="true" tabindex="-1"></a><span class="fu">operacion_dosdefectos</span>()</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.2.2:</b> Funciones</p>
<p>Genere una función que sea igual a la división de dos elementos. Coloque
un mensaje que indique cuando la división es indeterminada.</p>
</div>
<p>Respuesta:</p>
<div class="sourceCode" id="cb959"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb959-1"><a href="análisis-de-datos-con-r.html#cb959-1" aria-hidden="true" tabindex="-1"></a>operacion_indeterminada <span class="ot">&lt;-</span> <span class="cf">function</span>(a,b){</span>
<span id="cb959-2"><a href="análisis-de-datos-con-r.html#cb959-2" aria-hidden="true" tabindex="-1"></a>  a<span class="sc">/</span>b </span>
<span id="cb959-3"><a href="análisis-de-datos-con-r.html#cb959-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (b <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb959-4"><a href="análisis-de-datos-con-r.html#cb959-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;Es indeterminado&quot;</span>)</span>
<span id="cb959-5"><a href="análisis-de-datos-con-r.html#cb959-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb959-6"><a href="análisis-de-datos-con-r.html#cb959-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb959-7"><a href="análisis-de-datos-con-r.html#cb959-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb959-8"><a href="análisis-de-datos-con-r.html#cb959-8" aria-hidden="true" tabindex="-1"></a><span class="fu">operacion_indeterminada</span>(<span class="dv">1</span>,<span class="dv">0</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-i-1" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Manipulación de bases de datos (Parte I)<a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-i-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="principios-de-programación" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Principios de programación<a href="análisis-de-datos-con-r.html#principios-de-programación" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="iteradores-1" class="section level4 hasAnchor" number="8.3.1.1">
<h4><span class="header-section-number">8.3.1.1</span> Iteradores<a href="análisis-de-datos-con-r.html#iteradores-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For loop:</p>
<div class="sourceCode" id="cb960"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb960-1"><a href="análisis-de-datos-con-r.html#cb960-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imaginen que queremos mostrar los nombres de un vector de forma reiterada</span></span>
<span id="cb960-2"><a href="análisis-de-datos-con-r.html#cb960-2" aria-hidden="true" tabindex="-1"></a>ciudades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Nueva York&quot;</span>, <span class="st">&quot;Paris&quot;</span>, <span class="st">&quot;Santiago&quot;</span>, <span class="st">&quot;Rancagua&quot;</span>)</span>
<span id="cb960-3"><a href="análisis-de-datos-con-r.html#cb960-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-4"><a href="análisis-de-datos-con-r.html#cb960-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ciudades[<span class="dv">1</span>])</span>
<span id="cb960-5"><a href="análisis-de-datos-con-r.html#cb960-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ciudades[<span class="dv">2</span>])</span>
<span id="cb960-6"><a href="análisis-de-datos-con-r.html#cb960-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ciudades[<span class="dv">3</span>])</span>
<span id="cb960-7"><a href="análisis-de-datos-con-r.html#cb960-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ciudades[<span class="dv">4</span>])</span>
<span id="cb960-8"><a href="análisis-de-datos-con-r.html#cb960-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-9"><a href="análisis-de-datos-con-r.html#cb960-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Lo anterior se puede hacer utilizando un iterador.</span></span>
<span id="cb960-10"><a href="análisis-de-datos-con-r.html#cb960-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>){</span>
<span id="cb960-11"><a href="análisis-de-datos-con-r.html#cb960-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudades[i])</span>
<span id="cb960-12"><a href="análisis-de-datos-con-r.html#cb960-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb960-13"><a href="análisis-de-datos-con-r.html#cb960-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-14"><a href="análisis-de-datos-con-r.html#cb960-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilizando variables ocultas...</span></span>
<span id="cb960-15"><a href="análisis-de-datos-con-r.html#cb960-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (.j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>){</span>
<span id="cb960-16"><a href="análisis-de-datos-con-r.html#cb960-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudades[.j])</span>
<span id="cb960-17"><a href="análisis-de-datos-con-r.html#cb960-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb960-18"><a href="análisis-de-datos-con-r.html#cb960-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-19"><a href="análisis-de-datos-con-r.html#cb960-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (.j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ciudades)){</span>
<span id="cb960-20"><a href="análisis-de-datos-con-r.html#cb960-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudades[.j])</span>
<span id="cb960-21"><a href="análisis-de-datos-con-r.html#cb960-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb960-22"><a href="análisis-de-datos-con-r.html#cb960-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-23"><a href="análisis-de-datos-con-r.html#cb960-23" aria-hidden="true" tabindex="-1"></a><span class="co"># o escrito señalando el nombre de cada elemento de un vector. </span></span>
<span id="cb960-24"><a href="análisis-de-datos-con-r.html#cb960-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ciudad <span class="cf">in</span> ciudades){</span>
<span id="cb960-25"><a href="análisis-de-datos-con-r.html#cb960-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudad)</span>
<span id="cb960-26"><a href="análisis-de-datos-con-r.html#cb960-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb960-27"><a href="análisis-de-datos-con-r.html#cb960-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-28"><a href="análisis-de-datos-con-r.html#cb960-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Otro ejemplo:</span></span>
<span id="cb960-29"><a href="análisis-de-datos-con-r.html#cb960-29" aria-hidden="true" tabindex="-1"></a>semana <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Domingo&quot;</span>,</span>
<span id="cb960-30"><a href="análisis-de-datos-con-r.html#cb960-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Lunes&quot;</span>,</span>
<span id="cb960-31"><a href="análisis-de-datos-con-r.html#cb960-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Martes&quot;</span>,</span>
<span id="cb960-32"><a href="análisis-de-datos-con-r.html#cb960-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Miercoles&quot;</span>,</span>
<span id="cb960-33"><a href="análisis-de-datos-con-r.html#cb960-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Jueves&quot;</span>,</span>
<span id="cb960-34"><a href="análisis-de-datos-con-r.html#cb960-34" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Viernes&quot;</span>,</span>
<span id="cb960-35"><a href="análisis-de-datos-con-r.html#cb960-35" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Sabado&quot;</span>)</span>
<span id="cb960-36"><a href="análisis-de-datos-con-r.html#cb960-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb960-37"><a href="análisis-de-datos-con-r.html#cb960-37" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (dia <span class="cf">in</span> semana)</span>
<span id="cb960-38"><a href="análisis-de-datos-con-r.html#cb960-38" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb960-39"><a href="análisis-de-datos-con-r.html#cb960-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(dia)</span>
<span id="cb960-40"><a href="análisis-de-datos-con-r.html#cb960-40" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>For loop con opciones:</p>
<div class="sourceCode" id="cb961"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb961-1"><a href="análisis-de-datos-con-r.html#cb961-1" aria-hidden="true" tabindex="-1"></a>ciudades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Nueva York&quot;</span>, <span class="st">&quot;Paris&quot;</span>, <span class="st">&quot;Santiago&quot;</span>, <span class="st">&quot;Tokio&quot;</span>)</span>
<span id="cb961-2"><a href="análisis-de-datos-con-r.html#cb961-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb961-3"><a href="análisis-de-datos-con-r.html#cb961-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar opcion break: quiebra el loop</span></span>
<span id="cb961-4"><a href="análisis-de-datos-con-r.html#cb961-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ciudad <span class="cf">in</span> ciudades){</span>
<span id="cb961-5"><a href="análisis-de-datos-con-r.html#cb961-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">nchar</span>(ciudad) <span class="sc">==</span> <span class="dv">8</span>){</span>
<span id="cb961-6"><a href="análisis-de-datos-con-r.html#cb961-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb961-7"><a href="análisis-de-datos-con-r.html#cb961-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb961-8"><a href="análisis-de-datos-con-r.html#cb961-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudad)</span>
<span id="cb961-9"><a href="análisis-de-datos-con-r.html#cb961-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb961-10"><a href="análisis-de-datos-con-r.html#cb961-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb961-11"><a href="análisis-de-datos-con-r.html#cb961-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar  Opción next: se salta ese elemento</span></span>
<span id="cb961-12"><a href="análisis-de-datos-con-r.html#cb961-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ciudad <span class="cf">in</span> ciudades){</span>
<span id="cb961-13"><a href="análisis-de-datos-con-r.html#cb961-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nchar</span>(ciudad) <span class="sc">==</span> <span class="dv">8</span>){</span>
<span id="cb961-14"><a href="análisis-de-datos-con-r.html#cb961-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span> </span>
<span id="cb961-15"><a href="análisis-de-datos-con-r.html#cb961-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb961-16"><a href="análisis-de-datos-con-r.html#cb961-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudad)</span>
<span id="cb961-17"><a href="análisis-de-datos-con-r.html#cb961-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Flexibilizar el iterador:</p>
<div class="sourceCode" id="cb962"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb962-1"><a href="análisis-de-datos-con-r.html#cb962-1" aria-hidden="true" tabindex="-1"></a>ciudades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Nueva York&quot;</span>, <span class="st">&quot;Paris&quot;</span>, <span class="st">&quot;Santiago&quot;</span>, </span>
<span id="cb962-2"><a href="análisis-de-datos-con-r.html#cb962-2" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Tokio&quot;</span>, <span class="st">&quot;Rancagua&quot;</span>, <span class="st">&quot;Roma&quot;</span>)</span>
<span id="cb962-3"><a href="análisis-de-datos-con-r.html#cb962-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-4"><a href="análisis-de-datos-con-r.html#cb962-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora el tamaño del loop es flexible. Esto es muy inportante para cuando trabajemos con bases de datos. </span></span>
<span id="cb962-5"><a href="análisis-de-datos-con-r.html#cb962-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-6"><a href="análisis-de-datos-con-r.html#cb962-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ciudades)){</span>
<span id="cb962-7"><a href="análisis-de-datos-con-r.html#cb962-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudades[i])</span>
<span id="cb962-8"><a href="análisis-de-datos-con-r.html#cb962-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb962-9"><a href="análisis-de-datos-con-r.html#cb962-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-10"><a href="análisis-de-datos-con-r.html#cb962-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que ahora llamo a los elementos dentro de un loop como subconjuntos de un vector. </span></span>
<span id="cb962-11"><a href="análisis-de-datos-con-r.html#cb962-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-12"><a href="análisis-de-datos-con-r.html#cb962-12" aria-hidden="true" tabindex="-1"></a><span class="co"># En resumen, dos versiones de lo mismo </span></span>
<span id="cb962-13"><a href="análisis-de-datos-con-r.html#cb962-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-14"><a href="análisis-de-datos-con-r.html#cb962-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ciudades)){</span>
<span id="cb962-15"><a href="análisis-de-datos-con-r.html#cb962-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudades[i])</span>
<span id="cb962-16"><a href="análisis-de-datos-con-r.html#cb962-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb962-17"><a href="análisis-de-datos-con-r.html#cb962-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-18"><a href="análisis-de-datos-con-r.html#cb962-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (ciudad <span class="cf">in</span> ciudades){</span>
<span id="cb962-19"><a href="análisis-de-datos-con-r.html#cb962-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb962-20"><a href="análisis-de-datos-con-r.html#cb962-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(ciudad)</span>
<span id="cb962-21"><a href="análisis-de-datos-con-r.html#cb962-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb962-22"><a href="análisis-de-datos-con-r.html#cb962-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-23"><a href="análisis-de-datos-con-r.html#cb962-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo: para dejar mensajes </span></span>
<span id="cb962-24"><a href="análisis-de-datos-con-r.html#cb962-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-25"><a href="análisis-de-datos-con-r.html#cb962-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(ciudades)){</span>
<span id="cb962-26"><a href="análisis-de-datos-con-r.html#cb962-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(ciudades[i], <span class="st">&quot;esta en la posicion&quot;</span>,i, </span>
<span id="cb962-27"><a href="análisis-de-datos-con-r.html#cb962-27" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;en el vector ciudades&quot;</span>))</span>
<span id="cb962-28"><a href="análisis-de-datos-con-r.html#cb962-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb962-29"><a href="análisis-de-datos-con-r.html#cb962-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-30"><a href="análisis-de-datos-con-r.html#cb962-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Lo anterior es aplicable para inspecciones de bases de datos, por ejemplo, podemos dejar un mensaje</span></span>
<span id="cb962-31"><a href="análisis-de-datos-con-r.html#cb962-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb962-32"><a href="análisis-de-datos-con-r.html#cb962-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(mtcars)){</span>
<span id="cb962-33"><a href="análisis-de-datos-con-r.html#cb962-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;el promedio de la variable&quot;</span>,</span>
<span id="cb962-34"><a href="análisis-de-datos-con-r.html#cb962-34" aria-hidden="true" tabindex="-1"></a>              <span class="fu">names</span>(mtcars[i]), <span class="st">&quot;es&quot;</span>,</span>
<span id="cb962-35"><a href="análisis-de-datos-con-r.html#cb962-35" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mean</span>(mtcars[,i])))</span>
<span id="cb962-36"><a href="análisis-de-datos-con-r.html#cb962-36" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>While: mientras que…</p>
<div class="sourceCode" id="cb963"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb963-1"><a href="análisis-de-datos-con-r.html#cb963-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span> </span>
<span id="cb963-2"><a href="análisis-de-datos-con-r.html#cb963-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb963-3"><a href="análisis-de-datos-con-r.html#cb963-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (x <span class="sc">&lt;=</span> <span class="dv">7</span>){</span>
<span id="cb963-4"><a href="análisis-de-datos-con-r.html#cb963-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;x es&quot;</span>, x))</span>
<span id="cb963-5"><a href="análisis-de-datos-con-r.html#cb963-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb963-6"><a href="análisis-de-datos-con-r.html#cb963-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Actualización </span></span>
<span id="cb963-7"><a href="análisis-de-datos-con-r.html#cb963-7" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb963-8"><a href="análisis-de-datos-con-r.html#cb963-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb963-9"><a href="análisis-de-datos-con-r.html#cb963-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb963-10"><a href="análisis-de-datos-con-r.html#cb963-10" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (x <span class="sc">&lt;=</span> <span class="dv">700</span>){</span>
<span id="cb963-11"><a href="análisis-de-datos-con-r.html#cb963-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;x es&quot;</span>, x))</span>
<span id="cb963-12"><a href="análisis-de-datos-con-r.html#cb963-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Actualizacion </span></span>
<span id="cb963-13"><a href="análisis-de-datos-con-r.html#cb963-13" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb963-14"><a href="análisis-de-datos-con-r.html#cb963-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb963-15"><a href="análisis-de-datos-con-r.html#cb963-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb963-16"><a href="análisis-de-datos-con-r.html#cb963-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Muy importante la actualización.</span></span></code></pre></div>
</div>
<div id="lapply-sapply-y-vapply" class="section level4 hasAnchor" number="8.3.1.2">
<h4><span class="header-section-number">8.3.1.2</span> Lapply, Sapply y Vapply<a href="análisis-de-datos-con-r.html#lapply-sapply-y-vapply" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Lapply:</p>
<div class="sourceCode" id="cb964"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb964-1"><a href="análisis-de-datos-con-r.html#cb964-1" aria-hidden="true" tabindex="-1"></a>nyc <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">poblacion =</span> <span class="dv">8405837</span>, </span>
<span id="cb964-2"><a href="análisis-de-datos-con-r.html#cb964-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">barrios =</span> <span class="fu">c</span>(<span class="st">&quot;Manhattan&quot;</span>, <span class="st">&quot;Bronx&quot;</span>, </span>
<span id="cb964-3"><a href="análisis-de-datos-con-r.html#cb964-3" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Queens&quot;</span>, </span>
<span id="cb964-4"><a href="análisis-de-datos-con-r.html#cb964-4" aria-hidden="true" tabindex="-1"></a>                        <span class="st">&quot;Staten Island&quot;</span>))</span>
<span id="cb964-5"><a href="análisis-de-datos-con-r.html#cb964-5" aria-hidden="true" tabindex="-1"></a>nyc</span></code></pre></div>
<ul>
<li>Equivalencia loop y lapply. Quiero saber todas las clases de la
lista:</li>
</ul>
<div class="sourceCode" id="cb965"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb965-1"><a href="análisis-de-datos-con-r.html#cb965-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo hacer esto con un loop </span></span>
<span id="cb965-2"><a href="análisis-de-datos-con-r.html#cb965-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (objeto <span class="cf">in</span> nyc){</span>
<span id="cb965-3"><a href="análisis-de-datos-con-r.html#cb965-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">class</span>(objeto))</span>
<span id="cb965-4"><a href="análisis-de-datos-con-r.html#cb965-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb965-5"><a href="análisis-de-datos-con-r.html#cb965-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb965-6"><a href="análisis-de-datos-con-r.html#cb965-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(nyc)){</span>
<span id="cb965-7"><a href="análisis-de-datos-con-r.html#cb965-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">class</span>(nyc[[i]]))</span>
<span id="cb965-8"><a href="análisis-de-datos-con-r.html#cb965-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb965-9"><a href="análisis-de-datos-con-r.html#cb965-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb965-10"><a href="análisis-de-datos-con-r.html#cb965-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pero, si utilizo `lapply()` puedo hacerlo mucho más eficiente. </span></span>
<span id="cb965-11"><a href="análisis-de-datos-con-r.html#cb965-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Lapply: que aplica esto como si fuese un `for`. </span></span>
<span id="cb965-12"><a href="análisis-de-datos-con-r.html#cb965-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(nyc,class)</span></code></pre></div>
<ul>
<li>Resultado de lapply con vector:</li>
</ul>
<div class="sourceCode" id="cb966"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb966-1"><a href="análisis-de-datos-con-r.html#cb966-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lapply ejecuta la función, en este caso class, para todo elemento del objeto, en este caso nyc. </span></span>
<span id="cb966-2"><a href="análisis-de-datos-con-r.html#cb966-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb966-3"><a href="análisis-de-datos-con-r.html#cb966-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Si quiero saber el número de carácteres</span></span>
<span id="cb966-4"><a href="análisis-de-datos-con-r.html#cb966-4" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;New york&quot;</span>,<span class="st">&quot;Paris&quot;</span>, <span class="st">&quot;Tokyo&quot;</span>, <span class="st">&quot; Rio de Janeiro&quot;</span>)</span>
<span id="cb966-5"><a href="análisis-de-datos-con-r.html#cb966-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(cities,nchar)</span>
<span id="cb966-6"><a href="análisis-de-datos-con-r.html#cb966-6" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">lapply</span>(cities,nchar))</span>
<span id="cb966-7"><a href="análisis-de-datos-con-r.html#cb966-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb966-8"><a href="análisis-de-datos-con-r.html#cb966-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que el resultado aquí es una lista. Si quiero que sea un vector, puedo utilizar la función `unlist()`. </span></span>
<span id="cb966-9"><a href="análisis-de-datos-con-r.html#cb966-9" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">lapply</span>(cities,nchar))</span>
<span id="cb966-10"><a href="análisis-de-datos-con-r.html#cb966-10" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">unlist</span>(<span class="fu">lapply</span>(cities,nchar)))</span></code></pre></div>
<ul>
<li>Lapply como función:</li>
</ul>
<div class="sourceCode" id="cb967"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb967-1"><a href="análisis-de-datos-con-r.html#cb967-1" aria-hidden="true" tabindex="-1"></a>precios <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fl">2.25</span>, <span class="fl">2.18</span>, <span class="fl">2.89</span>, <span class="fl">2.84</span>, <span class="fl">2.89</span>)</span>
<span id="cb967-2"><a href="análisis-de-datos-con-r.html#cb967-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb967-3"><a href="análisis-de-datos-con-r.html#cb967-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos una función</span></span>
<span id="cb967-4"><a href="análisis-de-datos-con-r.html#cb967-4" aria-hidden="true" tabindex="-1"></a>multiplicar <span class="ot">&lt;-</span> <span class="cf">function</span>(x,factor){</span>
<span id="cb967-5"><a href="análisis-de-datos-con-r.html#cb967-5" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">*</span> factor</span>
<span id="cb967-6"><a href="análisis-de-datos-con-r.html#cb967-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb967-7"><a href="análisis-de-datos-con-r.html#cb967-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb967-8"><a href="análisis-de-datos-con-r.html#cb967-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, podemos aplicar lapply y agregar opciones de la función</span></span>
<span id="cb967-9"><a href="análisis-de-datos-con-r.html#cb967-9" aria-hidden="true" tabindex="-1"></a>tresveces <span class="ot">&lt;-</span> <span class="fu">lapply</span>(precios, multiplicar, <span class="at">factor =</span> <span class="dv">3</span>)</span>
<span id="cb967-10"><a href="análisis-de-datos-con-r.html#cb967-10" aria-hidden="true" tabindex="-1"></a>tresveces <span class="ot">&lt;-</span> <span class="fu">unlist</span>(tresveces)</span>
<span id="cb967-11"><a href="análisis-de-datos-con-r.html#cb967-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb967-12"><a href="análisis-de-datos-con-r.html#cb967-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que la sintaxis es: objeto, función, opciones. Es decir, igual a lo anterior, pero pudiendo agregar opcionales. </span></span></code></pre></div>
<p><strong>Sapply:</strong> Es una variacion de <code>lapply</code> que sirve para simplificar
<code>lapply</code>. Ahora el resultado es un vector, no una lista.</p>
<div class="sourceCode" id="cb968"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb968-1"><a href="análisis-de-datos-con-r.html#cb968-1" aria-hidden="true" tabindex="-1"></a>cities <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;New york&quot;</span>,<span class="st">&quot;Paris&quot;</span>, <span class="st">&quot;Tokyo&quot;</span>, <span class="st">&quot; Rio de Janeiro&quot;</span>)</span>
<span id="cb968-2"><a href="análisis-de-datos-con-r.html#cb968-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb968-3"><a href="análisis-de-datos-con-r.html#cb968-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(cities,nchar)</span>
<span id="cb968-4"><a href="análisis-de-datos-con-r.html#cb968-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(cities,nchar)</span>
<span id="cb968-5"><a href="análisis-de-datos-con-r.html#cb968-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb968-6"><a href="análisis-de-datos-con-r.html#cb968-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que es bastante ordenado. Sin embargo, falla cuando no es fácil ordenar el resultado. </span></span></code></pre></div>
<p><strong>Vapply:</strong> Es una variación que sirve para definir explícitamente el
tipo de objeto del resultado.</p>
<div class="sourceCode" id="cb969"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb969-1"><a href="análisis-de-datos-con-r.html#cb969-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vapply</span>(cities, nchar, <span class="fu">numeric</span>(<span class="dv">1</span>))</span></code></pre></div>
</div>
</div>
<div id="manipulacion-de-bases-de-datos-en-r" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Manipulacion de bases de datos en R<a href="análisis-de-datos-con-r.html#manipulacion-de-bases-de-datos-en-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Analizar datos es parte importante de las labores que uno desea realizar
al utilizar R. Vamos a revisar cuatro aspectos iniciales de cualquier
trabajo con datos:</p>
<ol style="list-style-type: decimal">
<li>Importar datos en distintos formatos.</li>
<li>Inspeccionar y limpiar los datos que tenemos.</li>
<li>Transformar los datos con el fin de crear nuevas variables.</li>
<li>Juntar bases de datos de distinto tipo.</li>
</ol>
<div id="importar-bases-de-datos" class="section level4 hasAnchor" number="8.3.2.1">
<h4><span class="header-section-number">8.3.2.1</span> Importar bases de datos<a href="análisis-de-datos-con-r.html#importar-bases-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li><p>Para poder utilizar, cargar, renovar datos es importante tenerlos
todos en un solo lugar.</p></li>
<li><p>Esto también aplica para los resultados y codigos.</p></li>
<li><p>Para que esto efectivamente ocurra necesitamos decirle a R cual va a
ser nuestro directorio de trabajo. Es decir, el lugar donde
guardaremos los datos que queremos trabajar, los resultados de
nuestros análisis y nuestros códigos.</p></li>
</ol>
<p>Directorios de trabajo en R:</p>
<div class="sourceCode" id="cb970"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb970-1"><a href="análisis-de-datos-con-r.html#cb970-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Me dice donde estoy </span></span>
<span id="cb970-2"><a href="análisis-de-datos-con-r.html#cb970-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb970-3"><a href="análisis-de-datos-con-r.html#cb970-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-4"><a href="análisis-de-datos-con-r.html#cb970-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Si quiero indicarle otra ruta tengo dos opciones: </span></span>
<span id="cb970-5"><a href="análisis-de-datos-con-r.html#cb970-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-6"><a href="análisis-de-datos-con-r.html#cb970-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Opcion 1: Indicar a R la ruta/carpeta donde tengo mis datos </span></span>
<span id="cb970-7"><a href="análisis-de-datos-con-r.html#cb970-7" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3&quot;</span>)</span>
<span id="cb970-8"><a href="análisis-de-datos-con-r.html#cb970-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-9"><a href="análisis-de-datos-con-r.html#cb970-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Opcion 2: Lo mismo que opcion 1, pero más ordenado. </span></span>
<span id="cb970-10"><a href="análisis-de-datos-con-r.html#cb970-10" aria-hidden="true" tabindex="-1"></a>ruta <span class="ot">&lt;-</span><span class="st">&quot;C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3&quot;</span></span>
<span id="cb970-11"><a href="análisis-de-datos-con-r.html#cb970-11" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(ruta)</span>
<span id="cb970-12"><a href="análisis-de-datos-con-r.html#cb970-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-13"><a href="análisis-de-datos-con-r.html#cb970-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que es necesario ocupar `/`. Por defecto las rutas al copiarlas vienen con otro tipo de &quot;slash&quot;. Para cambiarlas fácilmente, y no una por una, vamos a utilizar `ctrl + f`. </span></span>
<span id="cb970-14"><a href="análisis-de-datos-con-r.html#cb970-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb970-15"><a href="análisis-de-datos-con-r.html#cb970-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Con este atajo podemos remplazar varios elementos a la vez. Cuidado!! Es importante decirle si queremos que modifique todo el documento o bien solo una parte. </span></span>
<span id="cb970-16"><a href="análisis-de-datos-con-r.html#cb970-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(ruta)</span></code></pre></div>
<p>Ejemplo de ordenar carpetas:</p>
<div class="sourceCode" id="cb971"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb971-1"><a href="análisis-de-datos-con-r.html#cb971-1" aria-hidden="true" tabindex="-1"></a>ruta <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3&quot;</span></span>
<span id="cb971-2"><a href="análisis-de-datos-con-r.html#cb971-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb971-3"><a href="análisis-de-datos-con-r.html#cb971-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Codigos </span></span>
<span id="cb971-4"><a href="análisis-de-datos-con-r.html#cb971-4" aria-hidden="true" tabindex="-1"></a>codigos <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3/codigos&quot;</span></span>
<span id="cb971-5"><a href="análisis-de-datos-con-r.html#cb971-5" aria-hidden="true" tabindex="-1"></a>codigos <span class="ot">&lt;-</span> <span class="fu">paste</span>(ruta,<span class="st">&quot;/&quot;</span>,<span class="st">&quot;codigos&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb971-6"><a href="análisis-de-datos-con-r.html#cb971-6" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(codigos)</span>
<span id="cb971-7"><a href="análisis-de-datos-con-r.html#cb971-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(codigos)</span>
<span id="cb971-8"><a href="análisis-de-datos-con-r.html#cb971-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb971-9"><a href="análisis-de-datos-con-r.html#cb971-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos </span></span>
<span id="cb971-10"><a href="análisis-de-datos-con-r.html#cb971-10" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/catab/Dropbox/Curso R - Agosto 2022/Clase 3/datos&quot;</span></span>
<span id="cb971-11"><a href="análisis-de-datos-con-r.html#cb971-11" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">paste</span>(ruta,<span class="st">&quot;/&quot;</span>,<span class="st">&quot;datos&quot;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)</span>
<span id="cb971-12"><a href="análisis-de-datos-con-r.html#cb971-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(datos)</span>
<span id="cb971-13"><a href="análisis-de-datos-con-r.html#cb971-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb971-14"><a href="análisis-de-datos-con-r.html#cb971-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos raw </span></span>
<span id="cb971-15"><a href="análisis-de-datos-con-r.html#cb971-15" aria-hidden="true" tabindex="-1"></a>datosraw <span class="ot">&lt;-</span> <span class="st">&quot;C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3/datos/raw&quot;</span></span>
<span id="cb971-16"><a href="análisis-de-datos-con-r.html#cb971-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>(datosraw)</span>
<span id="cb971-17"><a href="análisis-de-datos-con-r.html#cb971-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb971-18"><a href="análisis-de-datos-con-r.html#cb971-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Todo lo anterior no es muy recomendado. </span></span></code></pre></div>
<p>Proyectos de R:</p>
<ul>
<li>Proyecto: piensen en muchos proyectos con muchos códigos.</li>
<li>Es una herramienta incorporada en RStudio que permite manejar un
proyecto de análisis de datos.</li>
<li>Permite dividir el trabajo en múltiples contextos cada uno con su
propio directorio de trabajo, espacio de trabajo e historial.</li>
<li>¿Por qué utilizarlo?
<ul>
<li>Mantiene códigos y datos en la misma carpeta.</li>
<li>Mantiene códigos y datos separados de otros proyectos: evita
confusiones o errores.</li>
<li>Identifica automáticamente el directorio de trabajo, facilitando
cooperación.</li>
</ul></li>
</ul>
<p>Pasos para crear un proyecto:</p>
<ul>
<li>Dos opciones:
<ul>
<li>R crea una carpeta de trabajo.</li>
<li>Crear una carpeta primero, y luego decirle a R que la
identifique.</li>
</ul></li>
<li>Todos los nuevos archivos serán automáticamente guardados en la
carpeta del proyecto.</li>
<li>Una vez hecho el proyecto se genera un archivo con extensión
<code>R.proj</code>.</li>
<li>Aquí R guarda información del proyecto: historial, datos, etc.</li>
<li>Lo más importante es que fija el directorio de trabajo de forma tal
de que siempre sea el mismo una vez que se abre un proyecto. Evita
cambiar directorios de trabajo al colaborar.</li>
</ul>
<p>Package here:</p>
<div class="sourceCode" id="cb972"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb972-1"><a href="análisis-de-datos-con-r.html#cb972-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;pacman&quot;</span>)</span>
<span id="cb972-2"><a href="análisis-de-datos-con-r.html#cb972-2" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb972-3"><a href="análisis-de-datos-con-r.html#cb972-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb972-4"><a href="análisis-de-datos-con-r.html#cb972-4" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>()</span>
<span id="cb972-5"><a href="análisis-de-datos-con-r.html#cb972-5" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>)</span></code></pre></div>
<p>Package <code>rio</code>: R tiene bases de datos propias. Sin embargo, muchas veces
van a querer trabajar con datos propios. o bien de datos públicos que
muchas veces estan en distintos formatos. Rio package es una forma
flexible de importar datos en distintos.</p>
<p>Rio debe su nombre por R input/output. Dos funciones principales:
<code>import()</code> y <code>export()</code>. Además, cuando se le indica la extensión a
<code>rio</code> este leerá y utilizará la herramienta indicada para leer esos
datos.</p>
<div class="sourceCode" id="cb973"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb973-1"><a href="análisis-de-datos-con-r.html#cb973-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb973-2"><a href="análisis-de-datos-con-r.html#cb973-2" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(here, <span class="co"># Modificar carpetas</span></span>
<span id="cb973-3"><a href="análisis-de-datos-con-r.html#cb973-3" aria-hidden="true" tabindex="-1"></a>       rio)  <span class="co"># Importar/exportar datos</span></span></code></pre></div>
<p>Hay otras opciones tambien para importar datos. Por ejemplo,
<code>read.csv() ("base R")</code>; <code>read.xlsx ("openxlsx")</code>. El problema es que
son difíciles de recordar. Mejor utilizar una.</p>
<p>Importar datos en distintos formatos: Utilizar <code>import()</code> para importar
un conjunto de datos es bastante sencillo. Basta con proporcionar la
ruta del archivo (incluyendo el nombre y la extensión del archivo) entre
comillas.</p>
<div class="sourceCode" id="cb974"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb974-1"><a href="análisis-de-datos-con-r.html#cb974-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ocupamos R project, here e import para importar datos fácilmente</span></span>
<span id="cb974-2"><a href="análisis-de-datos-con-r.html#cb974-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb974-3"><a href="análisis-de-datos-con-r.html#cb974-3" aria-hidden="true" tabindex="-1"></a>datos_xlsx <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>))</span>
<span id="cb974-4"><a href="análisis-de-datos-con-r.html#cb974-4" aria-hidden="true" tabindex="-1"></a>datos_dta  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.dta&quot;</span>))</span>
<span id="cb974-5"><a href="análisis-de-datos-con-r.html#cb974-5" aria-hidden="true" tabindex="-1"></a>datos_txt  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.txt&quot;</span>))</span>
<span id="cb974-6"><a href="análisis-de-datos-con-r.html#cb974-6" aria-hidden="true" tabindex="-1"></a>datos_csv  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.csv&quot;</span>))</span></code></pre></div>
<p>Opciones:</p>
<div class="sourceCode" id="cb975"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb975-1"><a href="análisis-de-datos-con-r.html#cb975-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Importar distintas hojas: Por defecto se importa la primer hoja de una base de datos, con &quot;which&quot; puedo elegir la hoja.</span></span>
<span id="cb975-2"><a href="análisis-de-datos-con-r.html#cb975-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-3"><a href="análisis-de-datos-con-r.html#cb975-3" aria-hidden="true" tabindex="-1"></a>datos_xlsx_h1 <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), </span>
<span id="cb975-4"><a href="análisis-de-datos-con-r.html#cb975-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span>
<span id="cb975-5"><a href="análisis-de-datos-con-r.html#cb975-5" aria-hidden="true" tabindex="-1"></a>datos_xlsx_h2 <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), </span>
<span id="cb975-6"><a href="análisis-de-datos-con-r.html#cb975-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">which =</span> <span class="st">&quot;hoja2&quot;</span>) </span>
<span id="cb975-7"><a href="análisis-de-datos-con-r.html#cb975-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-8"><a href="análisis-de-datos-con-r.html#cb975-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Puedo decirle a priori que valores son missings. </span></span>
<span id="cb975-9"><a href="análisis-de-datos-con-r.html#cb975-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-10"><a href="análisis-de-datos-con-r.html#cb975-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Especificar un missing</span></span>
<span id="cb975-11"><a href="análisis-de-datos-con-r.html#cb975-11" aria-hidden="true" tabindex="-1"></a>datos_xlsx <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">na =</span> <span class="st">&quot;2018&quot;</span>) </span>
<span id="cb975-12"><a href="análisis-de-datos-con-r.html#cb975-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-13"><a href="análisis-de-datos-con-r.html#cb975-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Especificar varios a la vez..</span></span>
<span id="cb975-14"><a href="análisis-de-datos-con-r.html#cb975-14" aria-hidden="true" tabindex="-1"></a>datos_xlsx <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), </span>
<span id="cb975-15"><a href="análisis-de-datos-con-r.html#cb975-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">&quot;Missing&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot; &quot;</span>))</span>
<span id="cb975-16"><a href="análisis-de-datos-con-r.html#cb975-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-17"><a href="análisis-de-datos-con-r.html#cb975-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Saltar filas.</span></span>
<span id="cb975-18"><a href="análisis-de-datos-con-r.html#cb975-18" aria-hidden="true" tabindex="-1"></a>datos_xlsx <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb975-19"><a href="análisis-de-datos-con-r.html#cb975-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-20"><a href="análisis-de-datos-con-r.html#cb975-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que puedo hacerlo con cualquier tipo de datos, ya que son opciones de la función `rio`. </span></span>
<span id="cb975-21"><a href="análisis-de-datos-con-r.html#cb975-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-22"><a href="análisis-de-datos-con-r.html#cb975-22" aria-hidden="true" tabindex="-1"></a>datos_dta  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.dta&quot;</span>) , <span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb975-23"><a href="análisis-de-datos-con-r.html#cb975-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb975-24"><a href="análisis-de-datos-con-r.html#cb975-24" aria-hidden="true" tabindex="-1"></a><span class="co"># En la tabla de este link pueden ver los distintos paquetes que soporta `rio`, junto a ejemplo adicionales. </span></span>
<span id="cb975-25"><a href="análisis-de-datos-con-r.html#cb975-25" aria-hidden="true" tabindex="-1"></a><span class="fu">browseURL</span>(<span class="st">&quot;https://cran.r-project.org/web/packages/rio/vignettes/rio.html&quot;</span>) </span></code></pre></div>
</div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-ii-1" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Manipulación de bases de datos (Parte II)<a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-ii-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ya sabemos cargar datos. Ahora vamos a hacer el primer proceso para
analizar cualquier base de datos.</p>
<div id="funciones-clave" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Funciones clave<a href="análisis-de-datos-con-r.html#funciones-clave" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>Tidyverse</code> es una colección de paquetes de R. <code>Tidyverse</code> contiene
múltiples paquetes que iremos utilizando. Incluye: <code>dplyr</code>, <code>ggplot2</code>,
<code>tidyr</code>, <code>stringr</code>, <code>tibble</code>, <code>purrr</code>, <code>magrittr</code> y <code>forcats</code>. Una
paquete clave es <code>dplyr</code> que contiene muchas funciones para trabajar con
bases de datos.</p>
<p>Instalamos tidyverse:</p>
<div class="sourceCode" id="cb976"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb976-1"><a href="análisis-de-datos-con-r.html#cb976-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb976-2"><a href="análisis-de-datos-con-r.html#cb976-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb976-3"><a href="análisis-de-datos-con-r.html#cb976-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb976-4"><a href="análisis-de-datos-con-r.html#cb976-4" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidyverse)</span></code></pre></div>
</div>
<div id="operador-piping" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Operador piping<a href="análisis-de-datos-con-r.html#operador-piping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Piping <code>%&gt;%</code>: <code>crtrl + shift + m</code>. Paquete asociado: <code>magrittr</code></p>
<div class="sourceCode" id="cb977"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb977-1"><a href="análisis-de-datos-con-r.html#cb977-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(magrittr)</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Operador que permite encadenar las funciones para realizar de manera
sencilla transformaciones complejas en las bases de datos.</li>
<li>Lo que dice es pasar el elemento que esta a su izquierda como un
argumento de la función que tiene a la derecha.</li>
<li>Coloca el énfasis en las acciones. Pasa un output intermedio de una
función a la siguiente.</li>
<li><code>magrittr</code> es el paquete que permite ocupar <code>piping</code>. <code>piping</code> se
utiliza mucho con las librerias de <code>tidyverse</code> y <code>dplyr</code> enfocadas
en análisis de datos.</li>
<li>Excelente cuando existe una secuencia de acciones/operaciones que
queremos realizar.</li>
</ol>
<div class="sourceCode" id="cb978"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb978-1"><a href="análisis-de-datos-con-r.html#cb978-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb978-2"><a href="análisis-de-datos-con-r.html#cb978-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb978-3"><a href="análisis-de-datos-con-r.html#cb978-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 1: usar pipe como encadenador </span></span>
<span id="cb978-4"><a href="análisis-de-datos-con-r.html#cb978-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris, <span class="at">n =</span> <span class="dv">4</span>)</span>
<span id="cb978-5"><a href="análisis-de-datos-con-r.html#cb978-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb978-6"><a href="análisis-de-datos-con-r.html#cb978-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Con piping</span></span>
<span id="cb978-7"><a href="análisis-de-datos-con-r.html#cb978-7" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">4</span>)</span>
<span id="cb978-8"><a href="análisis-de-datos-con-r.html#cb978-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb978-9"><a href="análisis-de-datos-con-r.html#cb978-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Ejemplo 2: obtener número total de observaciones y un promedio. </span></span>
<span id="cb978-10"><a href="análisis-de-datos-con-r.html#cb978-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summarize</span>(mtcars, </span>
<span id="cb978-11"><a href="análisis-de-datos-con-r.html#cb978-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">media =</span> <span class="fu">mean</span>(disp))</span>
<span id="cb978-12"><a href="análisis-de-datos-con-r.html#cb978-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb978-13"><a href="análisis-de-datos-con-r.html#cb978-13" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">promedio =</span> <span class="fu">mean</span>(disp))</span>
<span id="cb978-14"><a href="análisis-de-datos-con-r.html#cb978-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb978-15"><a href="análisis-de-datos-con-r.html#cb978-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Con piping </span></span>
<span id="cb978-16"><a href="análisis-de-datos-con-r.html#cb978-16" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb978-17"><a href="análisis-de-datos-con-r.html#cb978-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mpg <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb978-18"><a href="análisis-de-datos-con-r.html#cb978-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">promedio =</span> <span class="fu">mean</span>(disp))</span>
<span id="cb978-19"><a href="análisis-de-datos-con-r.html#cb978-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb978-20"><a href="análisis-de-datos-con-r.html#cb978-20" aria-hidden="true" tabindex="-1"></a>promedio_mpg_20 <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb978-21"><a href="análisis-de-datos-con-r.html#cb978-21" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">filter</span>(mpg <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb978-22"><a href="análisis-de-datos-con-r.html#cb978-22" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">summarise</span>(<span class="at">promedio =</span> <span class="fu">mean</span>(disp))</span>
<span id="cb978-23"><a href="análisis-de-datos-con-r.html#cb978-23" aria-hidden="true" tabindex="-1"></a>promedio_mpg_20 </span></code></pre></div>
</div>
<div id="proceso-de-análisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Proceso de análisis de datos (Parte I): cargar, inspeccionar y limpiar<a href="análisis-de-datos-con-r.html#proceso-de-análisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Preámbulo:</p>
<div class="sourceCode" id="cb979"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb979-1"><a href="análisis-de-datos-con-r.html#cb979-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiar</span></span>
<span id="cb979-2"><a href="análisis-de-datos-con-r.html#cb979-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb979-3"><a href="análisis-de-datos-con-r.html#cb979-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb979-4"><a href="análisis-de-datos-con-r.html#cb979-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos paquetes que vamos a utilizar</span></span>
<span id="cb979-5"><a href="análisis-de-datos-con-r.html#cb979-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb979-6"><a href="análisis-de-datos-con-r.html#cb979-6" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(</span>
<span id="cb979-7"><a href="análisis-de-datos-con-r.html#cb979-7" aria-hidden="true" tabindex="-1"></a>  rio,        <span class="co"># Importar/Exportar datos </span></span>
<span id="cb979-8"><a href="análisis-de-datos-con-r.html#cb979-8" aria-hidden="true" tabindex="-1"></a>  here,       <span class="co"># Determinar las rutas de mi carpeta </span></span>
<span id="cb979-9"><a href="análisis-de-datos-con-r.html#cb979-9" aria-hidden="true" tabindex="-1"></a>  tidyverse,  <span class="co"># Analisis de datos y visualización</span></span>
<span id="cb979-10"><a href="análisis-de-datos-con-r.html#cb979-10" aria-hidden="true" tabindex="-1"></a>  magrittr,   <span class="co"># Para utilizar operador %&gt;%  </span></span>
<span id="cb979-11"><a href="análisis-de-datos-con-r.html#cb979-11" aria-hidden="true" tabindex="-1"></a>  janitor     <span class="co"># Para análisis de datos</span></span>
<span id="cb979-12"><a href="análisis-de-datos-con-r.html#cb979-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb979-13"><a href="análisis-de-datos-con-r.html#cb979-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb979-14"><a href="análisis-de-datos-con-r.html#cb979-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos datos</span></span>
<span id="cb979-15"><a href="análisis-de-datos-con-r.html#cb979-15" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span></code></pre></div>
<p>Inspeccionar:</p>
<div class="sourceCode" id="cb980"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb980-1"><a href="análisis-de-datos-con-r.html#cb980-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visión general </span></span>
<span id="cb980-2"><a href="análisis-de-datos-con-r.html#cb980-2" aria-hidden="true" tabindex="-1"></a>datos </span>
<span id="cb980-3"><a href="análisis-de-datos-con-r.html#cb980-3" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(datos)</span>
<span id="cb980-4"><a href="análisis-de-datos-con-r.html#cb980-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-5"><a href="análisis-de-datos-con-r.html#cb980-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Para una inspección detallada </span></span>
<span id="cb980-6"><a href="análisis-de-datos-con-r.html#cb980-6" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(skimr)</span>
<span id="cb980-7"><a href="análisis-de-datos-con-r.html#cb980-7" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(datos)</span>
<span id="cb980-8"><a href="análisis-de-datos-con-r.html#cb980-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(datos)</span>
<span id="cb980-9"><a href="análisis-de-datos-con-r.html#cb980-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-10"><a href="análisis-de-datos-con-r.html#cb980-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar algunas filas, columnas, etc.</span></span>
<span id="cb980-11"><a href="análisis-de-datos-con-r.html#cb980-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-12"><a href="análisis-de-datos-con-r.html#cb980-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos)     <span class="co"># muestra las 6 primeras filas </span></span>
<span id="cb980-13"><a href="análisis-de-datos-con-r.html#cb980-13" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(datos)     <span class="co"># últimas 6 filas </span></span>
<span id="cb980-14"><a href="análisis-de-datos-con-r.html#cb980-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos, <span class="dv">11</span>) <span class="co"># podemos pedir m?s de 6 </span></span>
<span id="cb980-15"><a href="análisis-de-datos-con-r.html#cb980-15" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(datos, <span class="dv">3</span>)  <span class="co"># o menos de 6</span></span>
<span id="cb980-16"><a href="análisis-de-datos-con-r.html#cb980-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-17"><a href="análisis-de-datos-con-r.html#cb980-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar nombre variables/columnas</span></span>
<span id="cb980-18"><a href="análisis-de-datos-con-r.html#cb980-18" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos)</span>
<span id="cb980-19"><a href="análisis-de-datos-con-r.html#cb980-19" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span>
<span id="cb980-20"><a href="análisis-de-datos-con-r.html#cb980-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-21"><a href="análisis-de-datos-con-r.html#cb980-21" aria-hidden="true" tabindex="-1"></a><span class="co"># `names()` también puede ser </span></span>
<span id="cb980-22"><a href="análisis-de-datos-con-r.html#cb980-22" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;GDP&quot;</span>, <span class="st">&quot;GROSS_EXPORTS&quot;</span>, </span>
<span id="cb980-23"><a href="análisis-de-datos-con-r.html#cb980-23" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;GROSS_IMPORTS&quot;</span>, <span class="st">&quot;NET_EXPORTS&quot;</span> )</span>
<span id="cb980-24"><a href="análisis-de-datos-con-r.html#cb980-24" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos)</span>
<span id="cb980-25"><a href="análisis-de-datos-con-r.html#cb980-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-26"><a href="análisis-de-datos-con-r.html#cb980-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar filas </span></span>
<span id="cb980-27"><a href="análisis-de-datos-con-r.html#cb980-27" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(datos)</span>
<span id="cb980-28"><a href="análisis-de-datos-con-r.html#cb980-28" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(mtcars)</span>
<span id="cb980-29"><a href="análisis-de-datos-con-r.html#cb980-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-30"><a href="análisis-de-datos-con-r.html#cb980-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar la cantidad de variables de la base de datos</span></span>
<span id="cb980-31"><a href="análisis-de-datos-con-r.html#cb980-31" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(datos) <span class="co"># columnas o variables</span></span>
<span id="cb980-32"><a href="análisis-de-datos-con-r.html#cb980-32" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(datos) </span>
<span id="cb980-33"><a href="análisis-de-datos-con-r.html#cb980-33" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(datos) </span>
<span id="cb980-34"><a href="análisis-de-datos-con-r.html#cb980-34" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datos)</span>
<span id="cb980-35"><a href="análisis-de-datos-con-r.html#cb980-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-36"><a href="análisis-de-datos-con-r.html#cb980-36" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué tipo de objeto es? </span></span>
<span id="cb980-37"><a href="análisis-de-datos-con-r.html#cb980-37" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(datos)</span>
<span id="cb980-38"><a href="análisis-de-datos-con-r.html#cb980-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-39"><a href="análisis-de-datos-con-r.html#cb980-39" aria-hidden="true" tabindex="-1"></a><span class="co"># También podemos inspeccionar elementos específicos</span></span>
<span id="cb980-40"><a href="análisis-de-datos-con-r.html#cb980-40" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span>
<span id="cb980-41"><a href="análisis-de-datos-con-r.html#cb980-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-42"><a href="análisis-de-datos-con-r.html#cb980-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos ver la columna de GDP</span></span>
<span id="cb980-43"><a href="análisis-de-datos-con-r.html#cb980-43" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>gdp</span>
<span id="cb980-44"><a href="análisis-de-datos-con-r.html#cb980-44" aria-hidden="true" tabindex="-1"></a>datos[<span class="dv">2</span>]</span>
<span id="cb980-45"><a href="análisis-de-datos-con-r.html#cb980-45" aria-hidden="true" tabindex="-1"></a>datos[,<span class="dv">2</span>]</span>
<span id="cb980-46"><a href="análisis-de-datos-con-r.html#cb980-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-47"><a href="análisis-de-datos-con-r.html#cb980-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Para llamarlos solo por su nombre recordar ocupar `attach()`</span></span>
<span id="cb980-48"><a href="análisis-de-datos-con-r.html#cb980-48" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(datos)</span>
<span id="cb980-49"><a href="análisis-de-datos-con-r.html#cb980-49" aria-hidden="true" tabindex="-1"></a>gdp</span>
<span id="cb980-50"><a href="análisis-de-datos-con-r.html#cb980-50" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(datos)</span>
<span id="cb980-51"><a href="análisis-de-datos-con-r.html#cb980-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-52"><a href="análisis-de-datos-con-r.html#cb980-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos un objeto dentro de una variable </span></span>
<span id="cb980-53"><a href="análisis-de-datos-con-r.html#cb980-53" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>gdp[<span class="dv">7</span>]</span>
<span id="cb980-54"><a href="análisis-de-datos-con-r.html#cb980-54" aria-hidden="true" tabindex="-1"></a>datos[<span class="dv">7</span>,<span class="dv">2</span>]      <span class="co">#[fila, columna]</span></span>
<span id="cb980-55"><a href="análisis-de-datos-con-r.html#cb980-55" aria-hidden="true" tabindex="-1"></a>datos[<span class="dv">7</span>,<span class="st">&quot;gdp&quot;</span>]</span>
<span id="cb980-56"><a href="análisis-de-datos-con-r.html#cb980-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-57"><a href="análisis-de-datos-con-r.html#cb980-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos seleccionar parte de la columna </span></span>
<span id="cb980-58"><a href="análisis-de-datos-con-r.html#cb980-58" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>gdp[<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb980-59"><a href="análisis-de-datos-con-r.html#cb980-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-60"><a href="análisis-de-datos-con-r.html#cb980-60" aria-hidden="true" tabindex="-1"></a><span class="co"># o bien (solo por `attach()`)</span></span>
<span id="cb980-61"><a href="análisis-de-datos-con-r.html#cb980-61" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(datos)</span>
<span id="cb980-62"><a href="análisis-de-datos-con-r.html#cb980-62" aria-hidden="true" tabindex="-1"></a>gdp[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb980-63"><a href="análisis-de-datos-con-r.html#cb980-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-64"><a href="análisis-de-datos-con-r.html#cb980-64" aria-hidden="true" tabindex="-1"></a><span class="co"># o bien </span></span>
<span id="cb980-65"><a href="análisis-de-datos-con-r.html#cb980-65" aria-hidden="true" tabindex="-1"></a>datos[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="dv">2</span>] <span class="co"># mostrar las filas 1:2, de la columna 2</span></span>
<span id="cb980-66"><a href="análisis-de-datos-con-r.html#cb980-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb980-67"><a href="análisis-de-datos-con-r.html#cb980-67" aria-hidden="true" tabindex="-1"></a><span class="co"># `table()` me permite hacer una tabla sencilla de frecuencias</span></span>
<span id="cb980-68"><a href="análisis-de-datos-con-r.html#cb980-68" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos<span class="sc">$</span>year)</span>
<span id="cb980-69"><a href="análisis-de-datos-con-r.html#cb980-69" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(datos)</span>
<span id="cb980-70"><a href="análisis-de-datos-con-r.html#cb980-70" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(year)</span>
<span id="cb980-71"><a href="análisis-de-datos-con-r.html#cb980-71" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(datos)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.4.1:</b> Utilizando el operador pipping, mostrar las
últimas 2 filas de las primeras 11 filas.</p>
</div>
<p>Limpiar:</p>
<div class="sourceCode" id="cb981"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb981-1"><a href="análisis-de-datos-con-r.html#cb981-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;YEAR&quot;</span>, <span class="st">&quot;GDP&quot;</span>, <span class="st">&quot;GROSS_EXPORTS&quot;</span>, </span>
<span id="cb981-2"><a href="análisis-de-datos-con-r.html#cb981-2" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;GROSS_IMPORTS&quot;</span>, <span class="st">&quot;NET_EXPORTS&quot;</span> )</span>
<span id="cb981-3"><a href="análisis-de-datos-con-r.html#cb981-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos)</span>
<span id="cb981-4"><a href="análisis-de-datos-con-r.html#cb981-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb981-5"><a href="análisis-de-datos-con-r.html#cb981-5" aria-hidden="true" tabindex="-1"></a><span class="co"># La función `clean_names()` del paquete `janitor` estandariza nombres: </span></span>
<span id="cb981-6"><a href="análisis-de-datos-con-r.html#cb981-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb981-7"><a href="análisis-de-datos-con-r.html#cb981-7" aria-hidden="true" tabindex="-1"></a>datos_nuevos <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(datos)</span>
<span id="cb981-8"><a href="análisis-de-datos-con-r.html#cb981-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos)</span>
<span id="cb981-9"><a href="análisis-de-datos-con-r.html#cb981-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos_nuevos)</span></code></pre></div>
<p>Renombrar variables:</p>
<div class="sourceCode" id="cb982"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb982-1"><a href="análisis-de-datos-con-r.html#cb982-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb982-2"><a href="análisis-de-datos-con-r.html#cb982-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb982-3"><a href="análisis-de-datos-con-r.html#cb982-3" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span>
<span id="cb982-4"><a href="análisis-de-datos-con-r.html#cb982-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb982-5"><a href="análisis-de-datos-con-r.html#cb982-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para renombrar variables. Sintaxis: rename(nuevonombre = viejonombre)</span></span>
<span id="cb982-6"><a href="análisis-de-datos-con-r.html#cb982-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb982-7"><a href="análisis-de-datos-con-r.html#cb982-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Escribamos esto, pero con `piping`</span></span>
<span id="cb982-8"><a href="análisis-de-datos-con-r.html#cb982-8" aria-hidden="true" tabindex="-1"></a>datos_renombrados <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb982-9"><a href="análisis-de-datos-con-r.html#cb982-9" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">rename</span>(<span class="at">tiempo =</span> year, </span>
<span id="cb982-10"><a href="análisis-de-datos-con-r.html#cb982-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">pib =</span> gdp, </span>
<span id="cb982-11"><a href="análisis-de-datos-con-r.html#cb982-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">exportaciones =</span> gross_exports)</span>
<span id="cb982-12"><a href="análisis-de-datos-con-r.html#cb982-12" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos_renombrados)</span>
<span id="cb982-13"><a href="análisis-de-datos-con-r.html#cb982-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(datos_renombrados)</span></code></pre></div>
<p>Seleccionar variables o columnas:</p>
<div class="sourceCode" id="cb983"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb983-1"><a href="análisis-de-datos-con-r.html#cb983-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span> <span class="fu">ls</span>())</span>
<span id="cb983-2"><a href="análisis-de-datos-con-r.html#cb983-2" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span>
<span id="cb983-3"><a href="análisis-de-datos-con-r.html#cb983-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb983-4"><a href="análisis-de-datos-con-r.html#cb983-4" aria-hidden="true" tabindex="-1"></a><span class="co"># select() de `dplyr` permite seleccionar variables</span></span>
<span id="cb983-5"><a href="análisis-de-datos-con-r.html#cb983-5" aria-hidden="true" tabindex="-1"></a>datos_select <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb983-6"><a href="análisis-de-datos-con-r.html#cb983-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select</span>(year, gdp)  </span>
<span id="cb983-7"><a href="análisis-de-datos-con-r.html#cb983-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb983-8"><a href="análisis-de-datos-con-r.html#cb983-8" aria-hidden="true" tabindex="-1"></a>datos_select1 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb983-9"><a href="análisis-de-datos-con-r.html#cb983-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb983-10"><a href="análisis-de-datos-con-r.html#cb983-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb983-11"><a href="análisis-de-datos-con-r.html#cb983-11" aria-hidden="true" tabindex="-1"></a>datos_select1 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb983-12"><a href="análisis-de-datos-con-r.html#cb983-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(datos)<span class="sc">-</span><span class="dv">1</span>))  </span>
<span id="cb983-13"><a href="análisis-de-datos-con-r.html#cb983-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb983-14"><a href="análisis-de-datos-con-r.html#cb983-14" aria-hidden="true" tabindex="-1"></a><span class="co"># También puedo seleccionar en base a un criterio (Sólo sirve para string)</span></span>
<span id="cb983-15"><a href="análisis-de-datos-con-r.html#cb983-15" aria-hidden="true" tabindex="-1"></a>datos_select2 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb983-16"><a href="análisis-de-datos-con-r.html#cb983-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, <span class="fu">contains</span>(<span class="st">&quot;Gross&quot;</span>))</span>
<span id="cb983-17"><a href="análisis-de-datos-con-r.html#cb983-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb983-18"><a href="análisis-de-datos-con-r.html#cb983-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Con `select` también se puede renombrar </span></span>
<span id="cb983-19"><a href="análisis-de-datos-con-r.html#cb983-19" aria-hidden="true" tabindex="-1"></a>datos_select_renombrados <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb983-20"><a href="análisis-de-datos-con-r.html#cb983-20" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">select</span>(<span class="at">tiempo =</span> year, </span>
<span id="cb983-21"><a href="análisis-de-datos-con-r.html#cb983-21" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">pib =</span> gdp)</span>
<span id="cb983-22"><a href="análisis-de-datos-con-r.html#cb983-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb983-23"><a href="análisis-de-datos-con-r.html#cb983-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Una opción es ocupar select con `everything()` para ordeanar mis columnas. </span></span>
<span id="cb983-24"><a href="análisis-de-datos-con-r.html#cb983-24" aria-hidden="true" tabindex="-1"></a>datos_select_ordenados <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb983-25"><a href="análisis-de-datos-con-r.html#cb983-25" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(gdp, year, <span class="fu">everything</span>()) </span></code></pre></div>
<p>Remover columnas:</p>
<div class="sourceCode" id="cb984"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb984-1"><a href="análisis-de-datos-con-r.html#cb984-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La idea aqui es decir: todas se quedan, menos las que pongo aquí. </span></span>
<span id="cb984-2"><a href="análisis-de-datos-con-r.html#cb984-2" aria-hidden="true" tabindex="-1"></a>datos_select_remover <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb984-3"><a href="análisis-de-datos-con-r.html#cb984-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(gdp, year)) </span></code></pre></div>
<p>Mirar si hay duplicados. En ocasiones es importante revisar si hay
duplicados. El paquete <code>dplyr</code> contiene <code>distinct()</code>. Esta función
examina cada fila y reduce los datos solo a las que sean valores
diferentes:</p>
<div class="sourceCode" id="cb985"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb985-1"><a href="análisis-de-datos-con-r.html#cb985-1" aria-hidden="true" tabindex="-1"></a>datos1 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">distinct</span>()</span>
<span id="cb985-2"><a href="análisis-de-datos-con-r.html#cb985-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb985-3"><a href="análisis-de-datos-con-r.html#cb985-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Cuantos duplicados?</span></span>
<span id="cb985-4"><a href="análisis-de-datos-con-r.html#cb985-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datos)</span>
<span id="cb985-5"><a href="análisis-de-datos-con-r.html#cb985-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datos1)</span>
<span id="cb985-6"><a href="análisis-de-datos-con-r.html#cb985-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb985-7"><a href="análisis-de-datos-con-r.html#cb985-7" aria-hidden="true" tabindex="-1"></a>dif <span class="ot">&lt;-</span> <span class="fu">nrow</span>(datos) <span class="sc">-</span> <span class="fu">nrow</span>(datos1) </span>
<span id="cb985-8"><a href="análisis-de-datos-con-r.html#cb985-8" aria-hidden="true" tabindex="-1"></a>dif</span></code></pre></div>
</div>
<div id="proceso-de-análisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar" class="section level3 hasAnchor" number="8.4.4">
<h3><span class="header-section-number">8.4.4</span> Proceso de análisis de datos (Parte II): cargar, inspeccionar y limpiar<a href="análisis-de-datos-con-r.html#proceso-de-análisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cargar:</p>
<div class="sourceCode" id="cb986"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb986-1"><a href="análisis-de-datos-con-r.html#cb986-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiamos consola</span></span>
<span id="cb986-2"><a href="análisis-de-datos-con-r.html#cb986-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb986-3"><a href="análisis-de-datos-con-r.html#cb986-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb986-4"><a href="análisis-de-datos-con-r.html#cb986-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos paquetes que vamos a utilizar</span></span>
<span id="cb986-5"><a href="análisis-de-datos-con-r.html#cb986-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb986-6"><a href="análisis-de-datos-con-r.html#cb986-6" aria-hidden="true" tabindex="-1"></a>  rio,        <span class="co"># importar/exportar datos. </span></span>
<span id="cb986-7"><a href="análisis-de-datos-con-r.html#cb986-7" aria-hidden="true" tabindex="-1"></a>  here,       <span class="co"># escribir rutas de las carpetas.  </span></span>
<span id="cb986-8"><a href="análisis-de-datos-con-r.html#cb986-8" aria-hidden="true" tabindex="-1"></a>  janitor,    <span class="co"># limpiar datos y tablas.</span></span>
<span id="cb986-9"><a href="análisis-de-datos-con-r.html#cb986-9" aria-hidden="true" tabindex="-1"></a>  tidyverse,  <span class="co"># Manejo de bases de datos y visualización. </span></span>
<span id="cb986-10"><a href="análisis-de-datos-con-r.html#cb986-10" aria-hidden="true" tabindex="-1"></a>  magrittr,    <span class="co"># Permite utilizar operador %&gt;% (piping). </span></span>
<span id="cb986-11"><a href="análisis-de-datos-con-r.html#cb986-11" aria-hidden="true" tabindex="-1"></a>  skimr,       <span class="co"># Inspeccionar datos</span></span>
<span id="cb986-12"><a href="análisis-de-datos-con-r.html#cb986-12" aria-hidden="true" tabindex="-1"></a>  inspectdf,   <span class="co"># Inspeccionar datos</span></span>
<span id="cb986-13"><a href="análisis-de-datos-con-r.html#cb986-13" aria-hidden="true" tabindex="-1"></a>  gapminder    <span class="co"># Base de datos con información de países. </span></span>
<span id="cb986-14"><a href="análisis-de-datos-con-r.html#cb986-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb986-15"><a href="análisis-de-datos-con-r.html#cb986-15" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb986-16"><a href="análisis-de-datos-con-r.html#cb986-16" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">view</span>()</span>
<span id="cb986-17"><a href="análisis-de-datos-con-r.html#cb986-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb986-18"><a href="análisis-de-datos-con-r.html#cb986-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos datos que vienen incluidos en R. </span></span>
<span id="cb986-19"><a href="análisis-de-datos-con-r.html#cb986-19" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(starwars) </span>
<span id="cb986-20"><a href="análisis-de-datos-con-r.html#cb986-20" aria-hidden="true" tabindex="-1"></a>starwars </span></code></pre></div>
<p>Inspeccionar datos:</p>
<div class="sourceCode" id="cb987"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb987-1"><a href="análisis-de-datos-con-r.html#cb987-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Inspect_cat() retorna una base de datos que resume características de un data.frame.</span></span>
<span id="cb987-2"><a href="análisis-de-datos-con-r.html#cb987-2" aria-hidden="true" tabindex="-1"></a>inspeccion <span class="ot">&lt;-</span> <span class="fu">inspect_cat</span>(starwars)</span>
<span id="cb987-3"><a href="análisis-de-datos-con-r.html#cb987-3" aria-hidden="true" tabindex="-1"></a>inspeccion</span>
<span id="cb987-4"><a href="análisis-de-datos-con-r.html#cb987-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(inspeccion)</span>
<span id="cb987-5"><a href="análisis-de-datos-con-r.html#cb987-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-6"><a href="análisis-de-datos-con-r.html#cb987-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Las columnas son: </span></span>
<span id="cb987-7"><a href="análisis-de-datos-con-r.html#cb987-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-8"><a href="análisis-de-datos-con-r.html#cb987-8" aria-hidden="true" tabindex="-1"></a><span class="co"># col_names: nombre de cada columna</span></span>
<span id="cb987-9"><a href="análisis-de-datos-con-r.html#cb987-9" aria-hidden="true" tabindex="-1"></a><span class="co"># cnt: número de valores únicos por nivel</span></span>
<span id="cb987-10"><a href="análisis-de-datos-con-r.html#cb987-10" aria-hidden="true" tabindex="-1"></a><span class="co"># common: el nivel más común</span></span>
<span id="cb987-11"><a href="análisis-de-datos-con-r.html#cb987-11" aria-hidden="true" tabindex="-1"></a><span class="co"># common_pcnt: el porcentaje de ocurrencia del nivel más común.</span></span>
<span id="cb987-12"><a href="análisis-de-datos-con-r.html#cb987-12" aria-hidden="true" tabindex="-1"></a><span class="co"># levels: una lista de dataframes (tibbles) cada uno con tablas de frecuencia para todos los niveles. </span></span>
<span id="cb987-13"><a href="análisis-de-datos-con-r.html#cb987-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-14"><a href="análisis-de-datos-con-r.html#cb987-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que una de las columnas de un data frame pueden ser listas: </span></span>
<span id="cb987-15"><a href="análisis-de-datos-con-r.html#cb987-15" aria-hidden="true" tabindex="-1"></a>inspeccion[<span class="dv">1</span>,<span class="dv">5</span>]</span>
<span id="cb987-16"><a href="análisis-de-datos-con-r.html#cb987-16" aria-hidden="true" tabindex="-1"></a>inspeccion[<span class="dv">2</span>,<span class="dv">5</span>]</span>
<span id="cb987-17"><a href="análisis-de-datos-con-r.html#cb987-17" aria-hidden="true" tabindex="-1"></a>inspeccion[<span class="dv">3</span>,<span class="dv">5</span>]</span>
<span id="cb987-18"><a href="análisis-de-datos-con-r.html#cb987-18" aria-hidden="true" tabindex="-1"></a>inspeccion[<span class="dv">4</span>,<span class="dv">5</span>]</span>
<span id="cb987-19"><a href="análisis-de-datos-con-r.html#cb987-19" aria-hidden="true" tabindex="-1"></a>inspeccion[<span class="dv">5</span>,<span class="dv">5</span>]</span>
<span id="cb987-20"><a href="análisis-de-datos-con-r.html#cb987-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-21"><a href="análisis-de-datos-con-r.html#cb987-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, si quiero ver el contenido, debo utilizar doble paréntesis cuadrado</span></span>
<span id="cb987-22"><a href="análisis-de-datos-con-r.html#cb987-22" aria-hidden="true" tabindex="-1"></a>inspeccion[<span class="dv">1</span>,<span class="dv">5</span>]      <span class="co"># Con el nombre</span></span>
<span id="cb987-23"><a href="análisis-de-datos-con-r.html#cb987-23" aria-hidden="true" tabindex="-1"></a>inspeccion[[<span class="dv">1</span>,<span class="dv">5</span>]]    <span class="co"># El contenido</span></span>
<span id="cb987-24"><a href="análisis-de-datos-con-r.html#cb987-24" aria-hidden="true" tabindex="-1"></a>inspeccion[[<span class="dv">5</span>]]      <span class="co"># El contenido de todas las filas, en este caso, listas</span></span>
<span id="cb987-25"><a href="análisis-de-datos-con-r.html#cb987-25" aria-hidden="true" tabindex="-1"></a>inspeccion[[<span class="dv">5</span>]][[<span class="dv">1</span>]]</span>
<span id="cb987-26"><a href="análisis-de-datos-con-r.html#cb987-26" aria-hidden="true" tabindex="-1"></a>inspeccion[[<span class="dv">5</span>]][[<span class="dv">2</span>]]</span>
<span id="cb987-27"><a href="análisis-de-datos-con-r.html#cb987-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-28"><a href="análisis-de-datos-con-r.html#cb987-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Una forma más simple de mirar esta información es:</span></span>
<span id="cb987-29"><a href="análisis-de-datos-con-r.html#cb987-29" aria-hidden="true" tabindex="-1"></a>inspeccion<span class="sc">$</span>levels<span class="sc">$</span>eye_color</span>
<span id="cb987-30"><a href="análisis-de-datos-con-r.html#cb987-30" aria-hidden="true" tabindex="-1"></a>inspeccion[[<span class="dv">5</span>]][[<span class="dv">1</span>]]</span>
<span id="cb987-31"><a href="análisis-de-datos-con-r.html#cb987-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-32"><a href="análisis-de-datos-con-r.html#cb987-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Otra cosa interesante de este paquete es la función `show_plot()`</span></span>
<span id="cb987-33"><a href="análisis-de-datos-con-r.html#cb987-33" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> <span class="fu">inspect_cat</span>() <span class="sc">%&gt;%</span> <span class="fu">show_plot</span>()</span>
<span id="cb987-34"><a href="análisis-de-datos-con-r.html#cb987-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb987-35"><a href="análisis-de-datos-con-r.html#cb987-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Esta función permite ver las categorías de cada variable categórica. Noten que las zonas en gris son los NA. </span></span></code></pre></div>
<p>Limpiar bases de datos (continuación):</p>
<div class="sourceCode" id="cb988"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb988-1"><a href="análisis-de-datos-con-r.html#cb988-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span> <span class="fu">ls</span>())</span>
<span id="cb988-2"><a href="análisis-de-datos-con-r.html#cb988-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb988-3"><a href="análisis-de-datos-con-r.html#cb988-3" aria-hidden="true" tabindex="-1"></a>datos<span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span></code></pre></div>
<ul>
<li>Seleccionar columnas:</li>
</ul>
<div class="sourceCode" id="cb989"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb989-1"><a href="análisis-de-datos-con-r.html#cb989-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vimos que `select()` es parte importante. `select()` puede ser utilizado con varias funciones adicionales: </span></span>
<span id="cb989-2"><a href="análisis-de-datos-con-r.html#cb989-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-3"><a href="análisis-de-datos-con-r.html#cb989-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. everything () - todas las otras columnas no mencionadas.</span></span>
<span id="cb989-4"><a href="análisis-de-datos-con-r.html#cb989-4" aria-hidden="true" tabindex="-1"></a>datos_everything <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-5"><a href="análisis-de-datos-con-r.html#cb989-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (year, gdp, <span class="fu">everything</span>()) </span>
<span id="cb989-6"><a href="análisis-de-datos-con-r.html#cb989-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-7"><a href="análisis-de-datos-con-r.html#cb989-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. last_col () - la última columna.</span></span>
<span id="cb989-8"><a href="análisis-de-datos-con-r.html#cb989-8" aria-hidden="true" tabindex="-1"></a>datos_last_col <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-9"><a href="análisis-de-datos-con-r.html#cb989-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, <span class="fu">last_col</span>())</span>
<span id="cb989-10"><a href="análisis-de-datos-con-r.html#cb989-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-11"><a href="análisis-de-datos-con-r.html#cb989-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. where () - aplicar una función a todas las columnas y </span></span>
<span id="cb989-12"><a href="análisis-de-datos-con-r.html#cb989-12" aria-hidden="true" tabindex="-1"></a><span class="co">#               selecciona solo las que cumple esta condición </span></span>
<span id="cb989-13"><a href="análisis-de-datos-con-r.html#cb989-13" aria-hidden="true" tabindex="-1"></a><span class="co">#               (es decir, cuando es verdadera). </span></span>
<span id="cb989-14"><a href="análisis-de-datos-con-r.html#cb989-14" aria-hidden="true" tabindex="-1"></a>datos_where <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-15"><a href="análisis-de-datos-con-r.html#cb989-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.logical))</span>
<span id="cb989-16"><a href="análisis-de-datos-con-r.html#cb989-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-17"><a href="análisis-de-datos-con-r.html#cb989-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. contains () - columns containing a character string</span></span>
<span id="cb989-18"><a href="análisis-de-datos-con-r.html#cb989-18" aria-hidden="true" tabindex="-1"></a>datos_contains <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-19"><a href="análisis-de-datos-con-r.html#cb989-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;exports&quot;</span>))</span>
<span id="cb989-20"><a href="análisis-de-datos-con-r.html#cb989-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-21"><a href="análisis-de-datos-con-r.html#cb989-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. starts_with () - selecciona la variable si se tiene un prefijo determinado</span></span>
<span id="cb989-22"><a href="análisis-de-datos-con-r.html#cb989-22" aria-hidden="true" tabindex="-1"></a>datos_starts_with <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-23"><a href="análisis-de-datos-con-r.html#cb989-23" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;gross_&quot;</span>)) </span>
<span id="cb989-24"><a href="análisis-de-datos-con-r.html#cb989-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-25"><a href="análisis-de-datos-con-r.html#cb989-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. ends_with () - selecciona la variable si se tiene un sufijo determinado</span></span>
<span id="cb989-26"><a href="análisis-de-datos-con-r.html#cb989-26" aria-hidden="true" tabindex="-1"></a>datos_ends_with <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-27"><a href="análisis-de-datos-con-r.html#cb989-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;_imports&quot;</span>)) </span>
<span id="cb989-28"><a href="análisis-de-datos-con-r.html#cb989-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-29"><a href="análisis-de-datos-con-r.html#cb989-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 7. matches () - aplicar una expresión regular </span></span>
<span id="cb989-30"><a href="análisis-de-datos-con-r.html#cb989-30" aria-hidden="true" tabindex="-1"></a>datos_matches <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-31"><a href="análisis-de-datos-con-r.html#cb989-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">&quot;gross|gdp&quot;</span>))</span>
<span id="cb989-32"><a href="análisis-de-datos-con-r.html#cb989-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb989-33"><a href="análisis-de-datos-con-r.html#cb989-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 8. any_of () - la selecciona si la columna existe pero NO retorna error </span></span>
<span id="cb989-34"><a href="análisis-de-datos-con-r.html#cb989-34" aria-hidden="true" tabindex="-1"></a><span class="co">#                si no la encuentra. </span></span>
<span id="cb989-35"><a href="análisis-de-datos-con-r.html#cb989-35" aria-hidden="true" tabindex="-1"></a>datos_any_of  <span class="ot">&lt;-</span>  datos <span class="sc">%&gt;%</span> </span>
<span id="cb989-36"><a href="análisis-de-datos-con-r.html#cb989-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;gdp&quot;</span>, <span class="st">&quot;cualquiercosa&quot;</span>)))</span></code></pre></div>
<ul>
<li>Manipulación de NAs: Con vectores. Los NA son parte importante de la
limpieza de los datos. Recordemos que la función <code>is.na()</code> nos
permite identificarlos.</li>
</ul>
<div class="sourceCode" id="cb990"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb990-1"><a href="análisis-de-datos-con-r.html#cb990-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">5</span>)</span>
<span id="cb990-2"><a href="análisis-de-datos-con-r.html#cb990-2" aria-hidden="true" tabindex="-1"></a>malos <span class="ot">&lt;-</span> <span class="fu">is.na</span>(x)  </span>
<span id="cb990-3"><a href="análisis-de-datos-con-r.html#cb990-3" aria-hidden="true" tabindex="-1"></a>malos</span>
<span id="cb990-4"><a href="análisis-de-datos-con-r.html#cb990-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(malos)</span>
<span id="cb990-5"><a href="análisis-de-datos-con-r.html#cb990-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb990-6"><a href="análisis-de-datos-con-r.html#cb990-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos eliminar los NA es cosa de colocar un vector sobre otro</span></span>
<span id="cb990-7"><a href="análisis-de-datos-con-r.html#cb990-7" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">!</span>malos]</span>
<span id="cb990-8"><a href="análisis-de-datos-con-r.html#cb990-8" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">!</span><span class="fu">is.na</span>(x)]</span>
<span id="cb990-9"><a href="análisis-de-datos-con-r.html#cb990-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb990-10"><a href="análisis-de-datos-con-r.html#cb990-10" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[<span class="sc">!</span>malos]</span>
<span id="cb990-11"><a href="análisis-de-datos-con-r.html#cb990-11" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<ul>
<li>Manipulación de NAs: con <code>complete cases()</code></li>
</ul>
<div class="sourceCode" id="cb991"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb991-1"><a href="análisis-de-datos-con-r.html#cb991-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Miremos un caso más práctico con iris</span></span>
<span id="cb991-2"><a href="análisis-de-datos-con-r.html#cb991-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iris)</span>
<span id="cb991-3"><a href="análisis-de-datos-con-r.html#cb991-3" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(iris)</span>
<span id="cb991-4"><a href="análisis-de-datos-con-r.html#cb991-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;iris&quot;</span>)</span>
<span id="cb991-5"><a href="análisis-de-datos-con-r.html#cb991-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-6"><a href="análisis-de-datos-con-r.html#cb991-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar NA en la base de datos (después veremos esto en detalle ahora concéntrense solo en los NA)</span></span>
<span id="cb991-7"><a href="análisis-de-datos-con-r.html#cb991-7" aria-hidden="true" tabindex="-1"></a>iris<span class="sc">$</span>Sepal.Length<span class="ot">&lt;-</span><span class="fu">ifelse</span>(iris<span class="sc">$</span>Sepal.Length<span class="sc">&lt;</span><span class="dv">5</span>, <span class="cn">NA</span>,iris<span class="sc">$</span>Sepal.Length)</span>
<span id="cb991-8"><a href="análisis-de-datos-con-r.html#cb991-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-9"><a href="análisis-de-datos-con-r.html#cb991-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Dos opciones: </span></span>
<span id="cb991-10"><a href="análisis-de-datos-con-r.html#cb991-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-11"><a href="análisis-de-datos-con-r.html#cb991-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (i) como antes</span></span>
<span id="cb991-12"><a href="análisis-de-datos-con-r.html#cb991-12" aria-hidden="true" tabindex="-1"></a>  malos <span class="ot">&lt;-</span> <span class="fu">is.na</span>(iris<span class="sc">$</span>Sepal.Length)</span>
<span id="cb991-13"><a href="análisis-de-datos-con-r.html#cb991-13" aria-hidden="true" tabindex="-1"></a>  iris2 <span class="ot">&lt;-</span> iris[<span class="sc">!</span>malos,] </span>
<span id="cb991-14"><a href="análisis-de-datos-con-r.html#cb991-14" aria-hidden="true" tabindex="-1"></a>  iris2</span>
<span id="cb991-15"><a href="análisis-de-datos-con-r.html#cb991-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-16"><a href="análisis-de-datos-con-r.html#cb991-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (ii) utilizando `complete.cases()`</span></span>
<span id="cb991-17"><a href="análisis-de-datos-con-r.html#cb991-17" aria-hidden="true" tabindex="-1"></a>  completos <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(iris<span class="sc">$</span>Sepal.Length)</span>
<span id="cb991-18"><a href="análisis-de-datos-con-r.html#cb991-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(completos, <span class="dv">100</span>) </span>
<span id="cb991-19"><a href="análisis-de-datos-con-r.html#cb991-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb991-20"><a href="análisis-de-datos-con-r.html#cb991-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Creamos una base nueva solo con casos completos. </span></span>
<span id="cb991-21"><a href="análisis-de-datos-con-r.html#cb991-21" aria-hidden="true" tabindex="-1"></a>  iris3 <span class="ot">&lt;-</span> iris[completos,] </span>
<span id="cb991-22"><a href="análisis-de-datos-con-r.html#cb991-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(iris3)  </span>
<span id="cb991-23"><a href="análisis-de-datos-con-r.html#cb991-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>(iris3) </span></code></pre></div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-iii" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Manipulación de bases de datos (Parte III)<a href="análisis-de-datos-con-r.html#manipulación-de-bases-de-datos-parte-iii" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="crear-variables" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Crear Variables<a href="análisis-de-datos-con-r.html#crear-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="crear-variables-binarias" class="section level4 hasAnchor" number="8.5.1.1">
<h4><span class="header-section-number">8.5.1.1</span> Crear variables binarias<a href="análisis-de-datos-con-r.html#crear-variables-binarias" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Ahora vamos a ver como crear variables dicótomas o binarias. Estas
variables son muy importantes para hacer análisis de datos. Vamos a
utilizar la función <code>ifelse()</code>.</p>
<div class="sourceCode" id="cb992"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb992-1"><a href="análisis-de-datos-con-r.html#cb992-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span> <span class="fu">ls</span>())</span>
<span id="cb992-2"><a href="análisis-de-datos-con-r.html#cb992-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span>
<span id="cb992-3"><a href="análisis-de-datos-con-r.html#cb992-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb992-4"><a href="análisis-de-datos-con-r.html#cb992-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar valor 1 si estamos en democracia, 0 caso contrario</span></span>
<span id="cb992-5"><a href="análisis-de-datos-con-r.html#cb992-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">demo =</span> <span class="fu">ifelse</span>(year<span class="sc">&gt;=</span><span class="dv">1990</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb992-6"><a href="análisis-de-datos-con-r.html#cb992-6" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>demo)</span>
<span id="cb992-7"><a href="análisis-de-datos-con-r.html#cb992-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb992-8"><a href="análisis-de-datos-con-r.html#cb992-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla 1: ¿Cual fue el pib promedio en democracia y en dictadura?</span></span>
<span id="cb992-9"><a href="análisis-de-datos-con-r.html#cb992-9" aria-hidden="true" tabindex="-1"></a>tabla1 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(demo) <span class="sc">%&gt;%</span> </span>
<span id="cb992-10"><a href="análisis-de-datos-con-r.html#cb992-10" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">summarize</span>(<span class="at">promediopib =</span> <span class="fu">mean</span>(gdp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb992-11"><a href="análisis-de-datos-con-r.html#cb992-11" aria-hidden="true" tabindex="-1"></a>tabla1 </span>
<span id="cb992-12"><a href="análisis-de-datos-con-r.html#cb992-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb992-13"><a href="análisis-de-datos-con-r.html#cb992-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar valor 1 si estamos en democracia y el pib es mayor a su media</span></span>
<span id="cb992-14"><a href="análisis-de-datos-con-r.html#cb992-14" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">avance =</span> <span class="fu">ifelse</span>(demo <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> gdp <span class="sc">&gt;</span> <span class="fu">mean</span>(gdp),</span>
<span id="cb992-15"><a href="análisis-de-datos-con-r.html#cb992-15" aria-hidden="true" tabindex="-1"></a>                                         <span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb992-16"><a href="análisis-de-datos-con-r.html#cb992-16" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(data<span class="sc">$</span>gdp)</span>
<span id="cb992-17"><a href="análisis-de-datos-con-r.html#cb992-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb992-18"><a href="análisis-de-datos-con-r.html#cb992-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar valor 1 si estamos en democracia y si dentro de esos periodos</span></span>
<span id="cb992-19"><a href="análisis-de-datos-con-r.html#cb992-19" aria-hidden="true" tabindex="-1"></a><span class="co"># las exportaciones netas son mayores a la mediana de las importaciones </span></span>
<span id="cb992-20"><a href="análisis-de-datos-con-r.html#cb992-20" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>expo <span class="ot">&lt;-</span><span class="fu">ifelse</span>(data<span class="sc">$</span>demo<span class="sc">==</span><span class="dv">1</span>, <span class="fu">ifelse</span>(data<span class="sc">$</span>gross_exports<span class="sc">&gt;</span></span>
<span id="cb992-21"><a href="análisis-de-datos-con-r.html#cb992-21" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">median</span>(data<span class="sc">$</span>gross_imports),<span class="dv">1</span>,<span class="dv">0</span>),<span class="dv">0</span>)</span>
<span id="cb992-22"><a href="análisis-de-datos-con-r.html#cb992-22" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>expo)</span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.5.1:</b> Escriba lo anterior utilizando mutate.</p>
</div>
<p>Respuesta:</p>
<div class="sourceCode" id="cb993"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb993-1"><a href="análisis-de-datos-con-r.html#cb993-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">expo =</span> <span class="fu">ifelse</span>(demo<span class="sc">==</span><span class="dv">1</span>, </span>
<span id="cb993-2"><a href="análisis-de-datos-con-r.html#cb993-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ifelse</span>(gross_exports<span class="sc">&gt;</span></span>
<span id="cb993-3"><a href="análisis-de-datos-con-r.html#cb993-3" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">median</span>(gross_imports),<span class="dv">1</span>,<span class="dv">0</span>),<span class="dv">0</span>))</span></code></pre></div>
</div>
<div id="crear-variables-categóricas" class="section level4 hasAnchor" number="8.5.1.2">
<h4><span class="header-section-number">8.5.1.2</span> Crear variables categóricas<a href="análisis-de-datos-con-r.html#crear-variables-categóricas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>También podemos crear variables categóricas utilizando <code>ifelse()</code>. De
manera muy sencilla podemos generar variables según ciertas condiciones:</p>
<div class="sourceCode" id="cb994"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb994-1"><a href="análisis-de-datos-con-r.html#cb994-1" aria-hidden="true" tabindex="-1"></a><span class="co"># De manera muy sencilla podemos generar variables según ciertas condiciones  </span></span>
<span id="cb994-2"><a href="análisis-de-datos-con-r.html#cb994-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>tipo<span class="ot">&lt;-</span><span class="fu">ifelse</span>(data<span class="sc">$</span>year<span class="sc">&lt;</span><span class="dv">1980</span> <span class="sc">&amp;</span> data<span class="sc">$</span>year<span class="sc">&gt;</span><span class="dv">1959</span>,<span class="dv">1</span>,</span>
<span id="cb994-3"><a href="análisis-de-datos-con-r.html#cb994-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">ifelse</span>(data<span class="sc">$</span>year<span class="sc">&lt;</span><span class="dv">2000</span> <span class="sc">&amp;</span> data<span class="sc">$</span>year<span class="sc">&gt;</span><span class="dv">1979</span>,<span class="dv">2</span>,</span>
<span id="cb994-4"><a href="análisis-de-datos-con-r.html#cb994-4" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(data<span class="sc">$</span>year<span class="sc">&lt;</span><span class="dv">2010</span> <span class="sc">&amp;</span> data<span class="sc">$</span>year<span class="sc">&gt;</span><span class="dv">1999</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb994-5"><a href="análisis-de-datos-con-r.html#cb994-5" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb994-6"><a href="análisis-de-datos-con-r.html#cb994-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb994-7"><a href="análisis-de-datos-con-r.html#cb994-7" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>tipo)  </span>
<span id="cb994-8"><a href="análisis-de-datos-con-r.html#cb994-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb994-9"><a href="análisis-de-datos-con-r.html#cb994-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  Nota: no es recomendable utilizar o escribir tantos `ifelse()` juntos.</span></span>
<span id="cb994-10"><a href="análisis-de-datos-con-r.html#cb994-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Es mejor utilizar `case_when()` que veremos un más adelante. </span></span></code></pre></div>
</div>
</div>
<div id="factores" class="section level3 hasAnchor" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Factores<a href="análisis-de-datos-con-r.html#factores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R puede codificar automáticamente una variable categorica (factor) con
un número entero. Sirven para hacer estadisticas o estimar regresiones.
Los factores, pueden ser ordenados o no ordenados, se utilizan para
representar variables que se agrupan en categorías.</p>
<p>Veamos un ejemplo:</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb995-1"><a href="análisis-de-datos-con-r.html#cb995-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;Ford&quot;</span>,<span class="st">&quot;BMW&quot;</span>,<span class="st">&quot;Peugeot&quot;</span>),<span class="dv">10</span>)</span>
<span id="cb995-2"><a href="análisis-de-datos-con-r.html#cb995-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb995-3"><a href="análisis-de-datos-con-r.html#cb995-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb995-4"><a href="análisis-de-datos-con-r.html#cb995-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span>
<span id="cb995-5"><a href="análisis-de-datos-con-r.html#cb995-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb995-6"><a href="análisis-de-datos-con-r.html#cb995-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `factor()`</span></span>
<span id="cb995-7"><a href="análisis-de-datos-con-r.html#cb995-7" aria-hidden="true" tabindex="-1"></a>factor_nominal <span class="ot">&lt;-</span> <span class="fu">factor</span>(x)</span>
<span id="cb995-8"><a href="análisis-de-datos-con-r.html#cb995-8" aria-hidden="true" tabindex="-1"></a>factor_nominal</span>
<span id="cb995-9"><a href="análisis-de-datos-con-r.html#cb995-9" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(factor_nominal)</span>
<span id="cb995-10"><a href="análisis-de-datos-con-r.html#cb995-10" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(factor_nominal) <span class="co">#para analizar que niveles tiene el objeto</span></span>
<span id="cb995-11"><a href="análisis-de-datos-con-r.html#cb995-11" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(factor_nominal)  <span class="co"># resume la cantidad de observaciones por nivel</span></span></code></pre></div>
</div>
<div id="funciones-útiles-para-transformar-bases-de-datos" class="section level3 hasAnchor" number="8.5.3">
<h3><span class="header-section-number">8.5.3</span> Funciones útiles para transformar bases de datos<a href="análisis-de-datos-con-r.html#funciones-útiles-para-transformar-bases-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>across()</code>: Algunas veces queremos aplicar una función a múltiples
variables, para ello vamos a utilizar la función <code>across()</code> y
especificar la función con <code>fns</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb996"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb996-1"><a href="análisis-de-datos-con-r.html#cb996-1" aria-hidden="true" tabindex="-1"></a>datos2 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb996-2"><a href="análisis-de-datos-con-r.html#cb996-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">fns =</span> as.numeric))</span>
<span id="cb996-3"><a href="análisis-de-datos-con-r.html#cb996-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb996-4"><a href="análisis-de-datos-con-r.html#cb996-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aquí `across()`, que es una función de &quot;dplyr&quot;, permite ser utilizada con `mutate()`, `select()`, `filter()`, `summarise()`, etc. </span></span>
<span id="cb996-5"><a href="análisis-de-datos-con-r.html#cb996-5" aria-hidden="true" tabindex="-1"></a>datos3 <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb996-6"><a href="análisis-de-datos-con-r.html#cb996-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">contains</span>(<span class="st">&quot;gross&quot;</span>), <span class="at">.fns =</span> as.numeric))</span></code></pre></div>
<p><code>cumsum()</code>: Suma acumulada</p>
<div class="sourceCode" id="cb997"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb997-1"><a href="análisis-de-datos-con-r.html#cb997-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para hacer operaciones acumuladas</span></span>
<span id="cb997-2"><a href="análisis-de-datos-con-r.html#cb997-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">15</span>,<span class="dv">10</span>))     <span class="co"># Retorna la suma del vector</span></span>
<span id="cb997-3"><a href="análisis-de-datos-con-r.html#cb997-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cumsum</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">15</span>,<span class="dv">10</span>))  <span class="co"># Retorna la suma acumulada del vector</span></span>
<span id="cb997-4"><a href="análisis-de-datos-con-r.html#cb997-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb997-5"><a href="análisis-de-datos-con-r.html#cb997-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo utilizarla con mutate ()</span></span>
<span id="cb997-6"><a href="análisis-de-datos-con-r.html#cb997-6" aria-hidden="true" tabindex="-1"></a>datos_acumulados <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb997-7"><a href="análisis-de-datos-con-r.html#cb997-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb997-8"><a href="análisis-de-datos-con-r.html#cb997-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(gdp) <span class="sc">%&gt;%</span> </span>
<span id="cb997-9"><a href="análisis-de-datos-con-r.html#cb997-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdp_acumulado =</span> <span class="fu">cumsum</span>(n))</span>
<span id="cb997-10"><a href="análisis-de-datos-con-r.html#cb997-10" aria-hidden="true" tabindex="-1"></a>datos_acumulados</span></code></pre></div>
<p>Recodificar variables: A continuación se presentan algunos escenarios en
los que es necesario recodificar (cambiar) los valores:</p>
<ol style="list-style-type: decimal">
<li>Editar un valor específico (por ejemplo, una fecha con un año o
formato incorrecto)</li>
<li>Para conciliar valores que no se escriben igual</li>
<li>Crear una nueva columna de valores categóricas</li>
<li>Crear una nueva columna de categorías numéricas (por ejemplo,
categorías de edad)</li>
</ol>
<p><code>recode ()</code>: Cambiar valores</p>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="análisis-de-datos-con-r.html#cb998-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span> <span class="fu">ls</span>())</span>
<span id="cb998-2"><a href="análisis-de-datos-con-r.html#cb998-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;Data.xlsx&quot;</span>), <span class="at">which =</span> <span class="st">&quot;hoja1&quot;</span>) </span>
<span id="cb998-3"><a href="análisis-de-datos-con-r.html#cb998-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">demo =</span> <span class="fu">ifelse</span>(year<span class="sc">&gt;=</span><span class="dv">1990</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb998-4"><a href="análisis-de-datos-con-r.html#cb998-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb998-5"><a href="análisis-de-datos-con-r.html#cb998-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Seguimos con data </span></span>
<span id="cb998-6"><a href="análisis-de-datos-con-r.html#cb998-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span>
<span id="cb998-7"><a href="análisis-de-datos-con-r.html#cb998-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb998-8"><a href="análisis-de-datos-con-r.html#cb998-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos una nueva variable </span></span>
<span id="cb998-9"><a href="análisis-de-datos-con-r.html#cb998-9" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">regimen =</span> <span class="fu">ifelse</span>(demo <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;Democracia&quot;</span>, <span class="st">&quot;Dictadura&quot;</span>))</span>
<span id="cb998-10"><a href="análisis-de-datos-con-r.html#cb998-10" aria-hidden="true" tabindex="-1"></a>datos </span>
<span id="cb998-11"><a href="análisis-de-datos-con-r.html#cb998-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb998-12"><a href="análisis-de-datos-con-r.html#cb998-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Recodificamos (cambiar nombres)</span></span>
<span id="cb998-13"><a href="análisis-de-datos-con-r.html#cb998-13" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb998-14"><a href="análisis-de-datos-con-r.html#cb998-14" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">regimen =</span> <span class="fu">recode</span>(regimen, <span class="st">&quot;Democracia&quot;</span> <span class="ot">=</span> <span class="st">&quot;Demo&quot;</span>, </span>
<span id="cb998-15"><a href="análisis-de-datos-con-r.html#cb998-15" aria-hidden="true" tabindex="-1"></a>                          <span class="st">&quot;Dictadura&quot;</span> <span class="ot">=</span> <span class="st">&quot;Dict&quot;</span>))</span>
<span id="cb998-16"><a href="análisis-de-datos-con-r.html#cb998-16" aria-hidden="true" tabindex="-1"></a>datos </span>
<span id="cb998-17"><a href="análisis-de-datos-con-r.html#cb998-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb998-18"><a href="análisis-de-datos-con-r.html#cb998-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que es vieja variable por nueva variable</span></span></code></pre></div>
<p><code>replace()</code>: Reemplazar valores</p>
<div class="sourceCode" id="cb999"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb999-1"><a href="análisis-de-datos-con-r.html#cb999-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">avance =</span> <span class="fu">ifelse</span>(demo <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> gdp <span class="sc">&gt;</span> <span class="fu">mean</span>(gdp),</span>
<span id="cb999-2"><a href="análisis-de-datos-con-r.html#cb999-2" aria-hidden="true" tabindex="-1"></a>                                           <span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb999-3"><a href="análisis-de-datos-con-r.html#cb999-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb999-4"><a href="análisis-de-datos-con-r.html#cb999-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Similar sintaxis a la de recode</span></span>
<span id="cb999-5"><a href="análisis-de-datos-con-r.html#cb999-5" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb999-6"><a href="análisis-de-datos-con-r.html#cb999-6" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">regimen =</span> <span class="fu">replace</span>(regimen, avance <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;No cambio en el pib&quot;</span>))</span>
<span id="cb999-7"><a href="análisis-de-datos-con-r.html#cb999-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb999-8"><a href="análisis-de-datos-con-r.html#cb999-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Sintaxis</span></span>
<span id="cb999-9"><a href="análisis-de-datos-con-r.html#cb999-9" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate(columna a cambiar = replace(columna a cambiar, </span></span>
<span id="cb999-10"><a href="análisis-de-datos-con-r.html#cb999-10" aria-hidden="true" tabindex="-1"></a><span class="co">#                                      criterio para las filas, </span></span>
<span id="cb999-11"><a href="análisis-de-datos-con-r.html#cb999-11" aria-hidden="true" tabindex="-1"></a><span class="co">#                                      nuevo valor)).</span></span>
<span id="cb999-12"><a href="análisis-de-datos-con-r.html#cb999-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb999-13"><a href="análisis-de-datos-con-r.html#cb999-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Un equivalente a `replace()` es utilizar []. </span></span>
<span id="cb999-14"><a href="análisis-de-datos-con-r.html#cb999-14" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>regimen[datos<span class="sc">$</span>avance <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="st">&quot;No cambio en el pib&quot;</span></span></code></pre></div>
<p><code>replace_na()</code>: Para cambiar los valores perdidos (NA) por un valor
específico, como “Missing”, utilice la función <code>dplyr</code> <code>replace_na()</code>
dentro de <code>mutate()</code>:</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1000-1"><a href="análisis-de-datos-con-r.html#cb1000-1" aria-hidden="true" tabindex="-1"></a>datos_ficticios <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">var1 =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>), <span class="cn">NA</span>),</span>
<span id="cb1000-2"><a href="análisis-de-datos-con-r.html#cb1000-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">var2 =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">NA</span>,<span class="dv">11</span>)))</span>
<span id="cb1000-3"><a href="análisis-de-datos-con-r.html#cb1000-3" aria-hidden="true" tabindex="-1"></a>datos_ficticios</span>
<span id="cb1000-4"><a href="análisis-de-datos-con-r.html#cb1000-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1000-5"><a href="análisis-de-datos-con-r.html#cb1000-5" aria-hidden="true" tabindex="-1"></a>datos_ficticios1 <span class="ot">&lt;-</span> datos_ficticios <span class="sc">%&gt;%</span> </span>
<span id="cb1000-6"><a href="análisis-de-datos-con-r.html#cb1000-6" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">mutate</span>(<span class="at">var1 =</span> <span class="fu">replace_na</span>(var1, <span class="dv">0</span>))</span>
<span id="cb1000-7"><a href="análisis-de-datos-con-r.html#cb1000-7" aria-hidden="true" tabindex="-1"></a>datos_ficticios1</span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Recordatorio:</b> Esta función cambia los missing values solo por
valores de la misma clase de la variable/columna, por lo tanto, si
trabajamos con valores de clase numérica los reemplazos deben ser
también numéricos.</p>
</div>
<p><code>case_when()</code>: una función de <code>dplyr</code>. Es útil para asignar múltiples
valores. Sirve si se necesita recodificar muchos grupos:</p>
<div class="sourceCode" id="cb1001"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1001-1"><a href="análisis-de-datos-con-r.html#cb1001-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1001-2"><a href="análisis-de-datos-con-r.html#cb1001-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1001-3"><a href="análisis-de-datos-con-r.html#cb1001-3" aria-hidden="true" tabindex="-1"></a>datosedad <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">edad =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">500</span>,<span class="dv">2330</span>,<span class="dv">8</span>,<span class="dv">10</span>,<span class="dv">12</span>), </span>
<span id="cb1001-4"><a href="análisis-de-datos-con-r.html#cb1001-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">unidad =</span> <span class="fu">c</span>(<span class="st">&quot;años&quot;</span>,<span class="st">&quot;años&quot;</span>, <span class="st">&quot;años&quot;</span>, <span class="cn">NA</span>, <span class="st">&quot;meses&quot;</span>, <span class="st">&quot;meses&quot;</span>, </span>
<span id="cb1001-5"><a href="análisis-de-datos-con-r.html#cb1001-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;años&quot;</span>, <span class="st">&quot;años&quot;</span>, <span class="st">&quot;semanas&quot;</span>))</span>
<span id="cb1001-6"><a href="análisis-de-datos-con-r.html#cb1001-6" aria-hidden="true" tabindex="-1"></a>datosedad</span>
<span id="cb1001-7"><a href="análisis-de-datos-con-r.html#cb1001-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1001-8"><a href="análisis-de-datos-con-r.html#cb1001-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Imaginemos que queremos tener una medida comparable de edad, para ello</span></span>
<span id="cb1001-9"><a href="análisis-de-datos-con-r.html#cb1001-9" aria-hidden="true" tabindex="-1"></a><span class="co"># podemos utilizar `case_when()`. </span></span>
<span id="cb1001-10"><a href="análisis-de-datos-con-r.html#cb1001-10" aria-hidden="true" tabindex="-1"></a>datos_case_when <span class="ot">&lt;-</span>  datosedad <span class="sc">%&gt;%</span> </span>
<span id="cb1001-11"><a href="análisis-de-datos-con-r.html#cb1001-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(edad_años <span class="ot">=</span> <span class="fu">case_when</span>(</span>
<span id="cb1001-12"><a href="análisis-de-datos-con-r.html#cb1001-12" aria-hidden="true" tabindex="-1"></a>    unidad <span class="sc">==</span> <span class="st">&quot;años&quot;</span>  <span class="sc">~</span> edad, </span>
<span id="cb1001-13"><a href="análisis-de-datos-con-r.html#cb1001-13" aria-hidden="true" tabindex="-1"></a>    unidad <span class="sc">==</span> <span class="st">&quot;meses&quot;</span> <span class="sc">~</span> edad<span class="sc">/</span><span class="dv">12</span>, </span>
<span id="cb1001-14"><a href="análisis-de-datos-con-r.html#cb1001-14" aria-hidden="true" tabindex="-1"></a>    unidad <span class="sc">==</span> <span class="st">&quot;semanas&quot;</span> <span class="sc">~</span> edad<span class="sc">/</span><span class="dv">52</span>, </span>
<span id="cb1001-15"><a href="análisis-de-datos-con-r.html#cb1001-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(unidad) <span class="sc">~</span> edad))</span>
<span id="cb1001-16"><a href="análisis-de-datos-con-r.html#cb1001-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1001-17"><a href="análisis-de-datos-con-r.html#cb1001-17" aria-hidden="true" tabindex="-1"></a>datos_case_when</span></code></pre></div>
</div>
<div id="cambio-de-formato-de-los-datos" class="section level3 hasAnchor" number="8.5.4">
<h3><span class="header-section-number">8.5.4</span> Cambio de formato de los datos<a href="análisis-de-datos-con-r.html#cambio-de-formato-de-los-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="de-ancho-a-largo" class="section level4 hasAnchor" number="8.5.4.1">
<h4><span class="header-section-number">8.5.4.1</span> De ancho a largo<a href="análisis-de-datos-con-r.html#de-ancho-a-largo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>En en siguiente ejemplo, los datos están guardaos en “wide” para las
columnas que tienen el número de casos de malaria por tramos de edad.
Para un trabajo de análisis de datos es importante transformar los datos
a “long”.</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="análisis-de-datos-con-r.html#cb1002-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1002-2"><a href="análisis-de-datos-con-r.html#cb1002-2" aria-hidden="true" tabindex="-1"></a>count_data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>,<span class="st">&quot;malaria_facility_count_data.rds&quot;</span>))</span>
<span id="cb1002-3"><a href="análisis-de-datos-con-r.html#cb1002-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(count_data)</span></code></pre></div>
<p><code>pivot_longer()</code>: función del paquete <code>tidyr</code>. Paquete incluido en
<code>tidyverse()</code>. Transforma los datos de wide a long.</p>
<div class="sourceCode" id="cb1003"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1003-1"><a href="análisis-de-datos-con-r.html#cb1003-1" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> count_data <span class="sc">%&gt;%</span> </span>
<span id="cb1003-2"><a href="análisis-de-datos-con-r.html#cb1003-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb1003-3"><a href="análisis-de-datos-con-r.html#cb1003-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;malaria_rdt_0-4&quot;</span>, </span>
<span id="cb1003-4"><a href="análisis-de-datos-con-r.html#cb1003-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;malaria_rdt_5-14&quot;</span>, </span>
<span id="cb1003-5"><a href="análisis-de-datos-con-r.html#cb1003-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;malaria_rdt_15&quot;</span>, </span>
<span id="cb1003-6"><a href="análisis-de-datos-con-r.html#cb1003-6" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;malaria_tot&quot;</span>)</span>
<span id="cb1003-7"><a href="análisis-de-datos-con-r.html#cb1003-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1003-8"><a href="análisis-de-datos-con-r.html#cb1003-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-9"><a href="análisis-de-datos-con-r.html#cb1003-9" aria-hidden="true" tabindex="-1"></a>df_long </span>
<span id="cb1003-10"><a href="análisis-de-datos-con-r.html#cb1003-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-11"><a href="análisis-de-datos-con-r.html#cb1003-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Una mejor opción es con la función starts_with(): </span></span>
<span id="cb1003-12"><a href="análisis-de-datos-con-r.html#cb1003-12" aria-hidden="true" tabindex="-1"></a>count_data <span class="sc">%&gt;%</span> </span>
<span id="cb1003-13"><a href="análisis-de-datos-con-r.html#cb1003-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb1003-14"><a href="análisis-de-datos-con-r.html#cb1003-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;malaria_&quot;</span>)</span>
<span id="cb1003-15"><a href="análisis-de-datos-con-r.html#cb1003-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1003-16"><a href="análisis-de-datos-con-r.html#cb1003-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-17"><a href="análisis-de-datos-con-r.html#cb1003-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Para agregar nombres a las nuevas variable creadas</span></span>
<span id="cb1003-18"><a href="análisis-de-datos-con-r.html#cb1003-18" aria-hidden="true" tabindex="-1"></a>df_long1 <span class="ot">&lt;-</span> count_data <span class="sc">%&gt;%</span> </span>
<span id="cb1003-19"><a href="análisis-de-datos-con-r.html#cb1003-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb1003-20"><a href="análisis-de-datos-con-r.html#cb1003-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">&quot;malaria_&quot;</span>),</span>
<span id="cb1003-21"><a href="análisis-de-datos-con-r.html#cb1003-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;grupo_edad&quot;</span>,</span>
<span id="cb1003-22"><a href="análisis-de-datos-con-r.html#cb1003-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;casos_malaria&quot;</span></span>
<span id="cb1003-23"><a href="análisis-de-datos-con-r.html#cb1003-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1003-24"><a href="análisis-de-datos-con-r.html#cb1003-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1003-25"><a href="análisis-de-datos-con-r.html#cb1003-25" aria-hidden="true" tabindex="-1"></a>df_long1</span></code></pre></div>
</div>
<div id="de-largo-a-ancho" class="section level4 hasAnchor" number="8.5.4.2">
<h4><span class="header-section-number">8.5.4.2</span> De largo a ancho<a href="análisis-de-datos-con-r.html#de-largo-a-ancho" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>pivot_wider()</code>: Transforma los datos de long a wide. Útil si quiero
hacer una tabla mas amigable para el o la lectora.</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="análisis-de-datos-con-r.html#cb1004-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1004-2"><a href="análisis-de-datos-con-r.html#cb1004-2" aria-hidden="true" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>,<span class="st">&quot;linelist_cleaned.rds&quot;</span>))</span>
<span id="cb1004-3"><a href="análisis-de-datos-con-r.html#cb1004-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1004-4"><a href="análisis-de-datos-con-r.html#cb1004-4" aria-hidden="true" tabindex="-1"></a> df_wide <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb1004-5"><a href="análisis-de-datos-con-r.html#cb1004-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">count</span>(age_cat, gender)</span>
<span id="cb1004-6"><a href="análisis-de-datos-con-r.html#cb1004-6" aria-hidden="true" tabindex="-1"></a> df_wide</span>
<span id="cb1004-7"><a href="análisis-de-datos-con-r.html#cb1004-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1004-8"><a href="análisis-de-datos-con-r.html#cb1004-8" aria-hidden="true" tabindex="-1"></a><span class="co"># En un mejor formato</span></span>
<span id="cb1004-9"><a href="análisis-de-datos-con-r.html#cb1004-9" aria-hidden="true" tabindex="-1"></a> table_wide <span class="ot">&lt;-</span> df_wide <span class="sc">%&gt;%</span></span>
<span id="cb1004-10"><a href="análisis-de-datos-con-r.html#cb1004-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb1004-11"><a href="análisis-de-datos-con-r.html#cb1004-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">id_cols =</span> age_cat,</span>
<span id="cb1004-12"><a href="análisis-de-datos-con-r.html#cb1004-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">names_from =</span> gender,</span>
<span id="cb1004-13"><a href="análisis-de-datos-con-r.html#cb1004-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">values_from =</span> n</span>
<span id="cb1004-14"><a href="análisis-de-datos-con-r.html#cb1004-14" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb1004-15"><a href="análisis-de-datos-con-r.html#cb1004-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1004-16"><a href="análisis-de-datos-con-r.html#cb1004-16" aria-hidden="true" tabindex="-1"></a> table_wide</span></code></pre></div>
<p>Otra opción para hacer esto mismo es <code>gather()</code> y <code>spread()</code>:</p>
<div class="sourceCode" id="cb1005"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1005-1"><a href="análisis-de-datos-con-r.html#cb1005-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1005-2"><a href="análisis-de-datos-con-r.html#cb1005-2" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>,<span class="st">&quot;Cuadro_1.xls&quot;</span>), <span class="at">skip =</span> <span class="dv">1</span>) </span>
<span id="cb1005-3"><a href="análisis-de-datos-con-r.html#cb1005-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1005-4"><a href="análisis-de-datos-con-r.html#cb1005-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos datos que estan en formato ancho y los preparamos un poco...</span></span>
<span id="cb1005-5"><a href="análisis-de-datos-con-r.html#cb1005-5" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]  </span>
<span id="cb1005-6"><a href="análisis-de-datos-con-r.html#cb1005-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span><span class="sc">:</span><span class="dv">2018</span>)</span>
<span id="cb1005-7"><a href="análisis-de-datos-con-r.html#cb1005-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datos)</span>
<span id="cb1005-8"><a href="análisis-de-datos-con-r.html#cb1005-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1005-9"><a href="análisis-de-datos-con-r.html#cb1005-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Como vemos, los años estan en las columnas, y queremos pasar a long data, </span></span>
<span id="cb1005-10"><a href="análisis-de-datos-con-r.html#cb1005-10" aria-hidden="true" tabindex="-1"></a><span class="co"># de forma tal que los años esten en una columna y el pib en otra </span></span>
<span id="cb1005-11"><a href="análisis-de-datos-con-r.html#cb1005-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. La funciom &quot;gather()&quot; transforma los datos de formato ancho (wide) a </span></span>
<span id="cb1005-12"><a href="análisis-de-datos-con-r.html#cb1005-12" aria-hidden="true" tabindex="-1"></a><span class="co"># formato largo (long)</span></span>
<span id="cb1005-13"><a href="análisis-de-datos-con-r.html#cb1005-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1005-14"><a href="análisis-de-datos-con-r.html#cb1005-14" aria-hidden="true" tabindex="-1"></a><span class="co"># De ancho a largo: utilizando la función gather()</span></span>
<span id="cb1005-15"><a href="análisis-de-datos-con-r.html#cb1005-15" aria-hidden="true" tabindex="-1"></a><span class="co"># La primera es la variable &quot;clave&quot; y la segunda es la del valor</span></span>
<span id="cb1005-16"><a href="análisis-de-datos-con-r.html#cb1005-16" aria-hidden="true" tabindex="-1"></a>data_long <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1005-17"><a href="análisis-de-datos-con-r.html#cb1005-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(año, pib, <span class="dv">1</span><span class="sc">:</span><span class="dv">59</span>)</span>
<span id="cb1005-18"><a href="análisis-de-datos-con-r.html#cb1005-18" aria-hidden="true" tabindex="-1"></a>data_long</span>
<span id="cb1005-19"><a href="análisis-de-datos-con-r.html#cb1005-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1005-20"><a href="análisis-de-datos-con-r.html#cb1005-20" aria-hidden="true" tabindex="-1"></a><span class="co"># De largo a ancho: utilizando la función spread()</span></span>
<span id="cb1005-21"><a href="análisis-de-datos-con-r.html#cb1005-21" aria-hidden="true" tabindex="-1"></a>data_wide <span class="ot">&lt;-</span> data_long <span class="sc">%&gt;%</span> </span>
<span id="cb1005-22"><a href="análisis-de-datos-con-r.html#cb1005-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(año,pib)</span>
<span id="cb1005-23"><a href="análisis-de-datos-con-r.html#cb1005-23" aria-hidden="true" tabindex="-1"></a>data_wide</span></code></pre></div>
</div>
</div>
<div id="juntar-bases-de-datos" class="section level3 hasAnchor" number="8.5.5">
<h3><span class="header-section-number">8.5.5</span> Juntar bases de datos<a href="análisis-de-datos-con-r.html#juntar-bases-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="pegar-hacia-el-lado-por-columnas" class="section level4 hasAnchor" number="8.5.5.1">
<h4><span class="header-section-number">8.5.5.1</span> Pegar hacia el lado (por columnas)<a href="análisis-de-datos-con-r.html#pegar-hacia-el-lado-por-columnas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>En el siguiente ejemplo, tenemos datos de hospitales.</p>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="análisis-de-datos-con-r.html#cb1006-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1006-2"><a href="análisis-de-datos-con-r.html#cb1006-2" aria-hidden="true" tabindex="-1"></a>hosp_info <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>,<span class="st">&quot;hosp_info_final.xlsx&quot;</span>))</span>
<span id="cb1006-3"><a href="análisis-de-datos-con-r.html#cb1006-3" aria-hidden="true" tabindex="-1"></a>linelist_mini <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>,<span class="st">&quot;linelist_mini_final.xlsx&quot;</span>))</span></code></pre></div>
<p>Sintaxis: Imaginemos que tenemos dos bases de datos “df1”, “df2”. df1
tienen una columna llamada “ID”. df2 tiene una columna que se llama
identificador.</p>
<div class="sourceCode" id="cb1007"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1007-1"><a href="análisis-de-datos-con-r.html#cb1007-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 1: nombres de identificadores distintos.</span></span>
<span id="cb1007-2"><a href="análisis-de-datos-con-r.html#cb1007-2" aria-hidden="true" tabindex="-1"></a>data_junta <span class="ot">&lt;-</span> <span class="fu">join</span>(df1,</span>
<span id="cb1007-3"><a href="análisis-de-datos-con-r.html#cb1007-3" aria-hidden="true" tabindex="-1"></a>                   df2,</span>
<span id="cb1007-4"><a href="análisis-de-datos-con-r.html#cb1007-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span> <span class="ot">=</span> <span class="st">&quot;identificador&quot;</span>))</span>
<span id="cb1007-5"><a href="análisis-de-datos-con-r.html#cb1007-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1007-6"><a href="análisis-de-datos-con-r.html#cb1007-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 2: imaginemos ambas bases de datos (df1, df2) tienen un</span></span>
<span id="cb1007-7"><a href="análisis-de-datos-con-r.html#cb1007-7" aria-hidden="true" tabindex="-1"></a><span class="co">#         identificador llamado &quot;ID&quot;</span></span>
<span id="cb1007-8"><a href="análisis-de-datos-con-r.html#cb1007-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1007-9"><a href="análisis-de-datos-con-r.html#cb1007-9" aria-hidden="true" tabindex="-1"></a>data_junta <span class="ot">&lt;-</span> <span class="fu">join</span>(df1,</span>
<span id="cb1007-10"><a href="análisis-de-datos-con-r.html#cb1007-10" aria-hidden="true" tabindex="-1"></a>                        df2,</span>
<span id="cb1007-11"><a href="análisis-de-datos-con-r.html#cb1007-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb1007-12"><a href="análisis-de-datos-con-r.html#cb1007-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1007-13"><a href="análisis-de-datos-con-r.html#cb1007-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Caso 3: imaginemos queremos pegar bases de datos considerando más</span></span>
<span id="cb1007-14"><a href="análisis-de-datos-con-r.html#cb1007-14" aria-hidden="true" tabindex="-1"></a><span class="co">#         de un identificador.</span></span>
<span id="cb1007-15"><a href="análisis-de-datos-con-r.html#cb1007-15" aria-hidden="true" tabindex="-1"></a>data_junta <span class="ot">&lt;-</span> <span class="fu">join</span>(df1, df2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;nombre&quot;</span> <span class="ot">=</span> <span class="st">&quot;primernombre&quot;</span>,</span>
<span id="cb1007-16"><a href="análisis-de-datos-con-r.html#cb1007-16" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">&quot;apellido&quot;</span> <span class="ot">=</span> <span class="st">&quot;primerapellido&quot;</span>,</span>
<span id="cb1007-17"><a href="análisis-de-datos-con-r.html#cb1007-17" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">&quot;Edad&quot;</span> <span class="ot">=</span> <span class="st">&quot;edad&quot;</span>))</span></code></pre></div>
<p><strong>Left y Right join:</strong></p>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="análisis-de-datos-con-r.html#cb1008-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Left join: la primera base de datos que aparece es la referencia.</span></span>
<span id="cb1008-2"><a href="análisis-de-datos-con-r.html#cb1008-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Right join: la segunda base de datos que aparece es la referencia.</span></span>
<span id="cb1008-3"><a href="análisis-de-datos-con-r.html#cb1008-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-4"><a href="análisis-de-datos-con-r.html#cb1008-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Left_join</span></span>
<span id="cb1008-5"><a href="análisis-de-datos-con-r.html#cb1008-5" aria-hidden="true" tabindex="-1"></a>left_join_ex1 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(linelist_mini,</span>
<span id="cb1008-6"><a href="análisis-de-datos-con-r.html#cb1008-6" aria-hidden="true" tabindex="-1"></a>                           hosp_info,</span>
<span id="cb1008-7"><a href="análisis-de-datos-con-r.html#cb1008-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hospital&quot;</span> <span class="ot">=</span> <span class="st">&quot;hosp_name&quot;</span>))</span>
<span id="cb1008-8"><a href="análisis-de-datos-con-r.html#cb1008-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-9"><a href="análisis-de-datos-con-r.html#cb1008-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-10"><a href="análisis-de-datos-con-r.html#cb1008-10" aria-hidden="true" tabindex="-1"></a>right_join_ex1 <span class="ot">&lt;-</span> <span class="fu">right_join</span>(hosp_info,</span>
<span id="cb1008-11"><a href="análisis-de-datos-con-r.html#cb1008-11" aria-hidden="true" tabindex="-1"></a>                             linelist_mini,</span>
<span id="cb1008-12"><a href="análisis-de-datos-con-r.html#cb1008-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hosp_name&quot;</span> <span class="ot">=</span> <span class="st">&quot;hospital&quot;</span>))</span>
<span id="cb1008-13"><a href="análisis-de-datos-con-r.html#cb1008-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-14"><a href="análisis-de-datos-con-r.html#cb1008-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Ambos son equivalentes. </span></span>
<span id="cb1008-15"><a href="análisis-de-datos-con-r.html#cb1008-15" aria-hidden="true" tabindex="-1"></a>right_join_ex2 <span class="ot">&lt;-</span> <span class="fu">right_join</span>(linelist_mini,</span>
<span id="cb1008-16"><a href="análisis-de-datos-con-r.html#cb1008-16" aria-hidden="true" tabindex="-1"></a>                             hosp_info,</span>
<span id="cb1008-17"><a href="análisis-de-datos-con-r.html#cb1008-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hospital&quot;</span> <span class="ot">=</span> <span class="st">&quot;hosp_name&quot;</span>))</span>
<span id="cb1008-18"><a href="análisis-de-datos-con-r.html#cb1008-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-19"><a href="análisis-de-datos-con-r.html#cb1008-19" aria-hidden="true" tabindex="-1"></a>left_join_ex2 <span class="ot">&lt;-</span> linelist_mini <span class="sc">%&gt;%</span></span>
<span id="cb1008-20"><a href="análisis-de-datos-con-r.html#cb1008-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(hosp_info,</span>
<span id="cb1008-21"><a href="análisis-de-datos-con-r.html#cb1008-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hospital&quot;</span> <span class="ot">=</span> <span class="st">&quot;hosp_name&quot;</span>))</span>
<span id="cb1008-22"><a href="análisis-de-datos-con-r.html#cb1008-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-23"><a href="análisis-de-datos-con-r.html#cb1008-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Notas:</span></span>
<span id="cb1008-24"><a href="análisis-de-datos-con-r.html#cb1008-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1008-25"><a href="análisis-de-datos-con-r.html#cb1008-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Todas las filas/observaciones de la base de datos de referencia</span></span>
<span id="cb1008-26"><a href="análisis-de-datos-con-r.html#cb1008-26" aria-hidden="true" tabindex="-1"></a><span class="co">#    se mantienen.</span></span>
<span id="cb1008-27"><a href="análisis-de-datos-con-r.html#cb1008-27" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Si hay más de un match, se duplican las observaciones.</span></span>
<span id="cb1008-28"><a href="análisis-de-datos-con-r.html#cb1008-28" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Los identificadores se combinan. Según el nombre</span></span>
<span id="cb1008-29"><a href="análisis-de-datos-con-r.html#cb1008-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     de la columna de la base de datos de referencia.</span></span>
<span id="cb1008-30"><a href="análisis-de-datos-con-r.html#cb1008-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Cuando no hay un &quot;match&quot; las columnas se llenan con un NA</span></span>
<span id="cb1008-31"><a href="análisis-de-datos-con-r.html#cb1008-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     para las observaciones de la base de referencia.</span></span>
<span id="cb1008-32"><a href="análisis-de-datos-con-r.html#cb1008-32" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. No &quot;match&quot; por la base que no es de referencia se borran.</span></span></code></pre></div>
<p><strong>Full Join:</strong> El más inclusivo de los “joins”. Retorna todas las
observaciones/filas:</p>
<div class="sourceCode" id="cb1009"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1009-1"><a href="análisis-de-datos-con-r.html#cb1009-1" aria-hidden="true" tabindex="-1"></a>full_join_ex3 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(linelist_mini,</span>
<span id="cb1009-2"><a href="análisis-de-datos-con-r.html#cb1009-2" aria-hidden="true" tabindex="-1"></a>                           hosp_info,</span>
<span id="cb1009-3"><a href="análisis-de-datos-con-r.html#cb1009-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hospital&quot;</span> <span class="ot">=</span> <span class="st">&quot;hosp_name&quot;</span>))</span>
<span id="cb1009-4"><a href="análisis-de-datos-con-r.html#cb1009-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1009-5"><a href="análisis-de-datos-con-r.html#cb1009-5" aria-hidden="true" tabindex="-1"></a>full_join_ex3 <span class="ot">&lt;-</span> linelist_mini <span class="sc">%&gt;%</span></span>
<span id="cb1009-6"><a href="análisis-de-datos-con-r.html#cb1009-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(hosp_info,</span>
<span id="cb1009-7"><a href="análisis-de-datos-con-r.html#cb1009-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hospital&quot;</span> <span class="ot">=</span> <span class="st">&quot;hosp_name&quot;</span>))</span></code></pre></div>
<p><strong>Inner join:</strong> El más restrictivo de los “join”. Retorna solo las filas
que hicieron match entre ambas bases de datos.</p>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="análisis-de-datos-con-r.html#cb1010-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Su análogo en stata es:  merge 1:1, keep _merge==3</span></span>
<span id="cb1010-2"><a href="análisis-de-datos-con-r.html#cb1010-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Los que se pegaron perfectamente entre ambas bases.</span></span>
<span id="cb1010-3"><a href="análisis-de-datos-con-r.html#cb1010-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1010-4"><a href="análisis-de-datos-con-r.html#cb1010-4" aria-hidden="true" tabindex="-1"></a>inner_join_example <span class="ot">&lt;-</span> linelist_mini <span class="sc">%&gt;%</span></span>
<span id="cb1010-5"><a href="análisis-de-datos-con-r.html#cb1010-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(hosp_info,</span>
<span id="cb1010-6"><a href="análisis-de-datos-con-r.html#cb1010-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hospital&quot;</span> <span class="ot">=</span> <span class="st">&quot;hosp_name&quot;</span>))</span></code></pre></div>
<p><strong>Semi - join:</strong> Mantiene todas las observaciones de la base de
referencia que tengan un “match” en la base secundaria, pero NO agrega
nuevas columnas ni duplicados en casos de multiples “match”.</p>
<div class="sourceCode" id="cb1011"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1011-1"><a href="análisis-de-datos-con-r.html#cb1011-1" aria-hidden="true" tabindex="-1"></a>semi_join_example1 <span class="ot">&lt;-</span> <span class="fu">semi_join</span>(hosp_info, linelist_mini, </span>
<span id="cb1011-2"><a href="análisis-de-datos-con-r.html#cb1011-2" aria-hidden="true" tabindex="-1"></a>                                <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hosp_name&quot;</span> <span class="ot">=</span><span class="st">&quot;hospital&quot;</span>))</span>
<span id="cb1011-3"><a href="análisis-de-datos-con-r.html#cb1011-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1011-4"><a href="análisis-de-datos-con-r.html#cb1011-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1011-5"><a href="análisis-de-datos-con-r.html#cb1011-5" aria-hidden="true" tabindex="-1"></a>semi_join_example <span class="ot">&lt;-</span> hosp_info <span class="sc">%&gt;%</span></span>
<span id="cb1011-6"><a href="análisis-de-datos-con-r.html#cb1011-6" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">semi_join</span>(linelist_mini,</span>
<span id="cb1011-7"><a href="análisis-de-datos-con-r.html#cb1011-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hosp_name&quot;</span> <span class="ot">=</span> <span class="st">&quot;hospital&quot;</span>))</span></code></pre></div>
<p><strong>Anti- join:</strong> Se le llama, al igual que semi-join “join de filtros”.
Retorna las observaciones/filas en la base de datos de referencia que no
hacen “match” en base de datos secundaria.</p>
<div class="sourceCode" id="cb1012"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1012-1"><a href="análisis-de-datos-con-r.html#cb1012-1" aria-hidden="true" tabindex="-1"></a>anti_join_example <span class="ot">&lt;-</span> hosp_info <span class="sc">%&gt;%</span></span>
<span id="cb1012-2"><a href="análisis-de-datos-con-r.html#cb1012-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(linelist_mini,</span>
<span id="cb1012-3"><a href="análisis-de-datos-con-r.html#cb1012-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;hosp_name&quot;</span> <span class="ot">=</span> <span class="st">&quot;hospital&quot;</span>))</span></code></pre></div>
<p>La función <code>merge</code>:</p>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1013-1"><a href="análisis-de-datos-con-r.html#cb1013-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1013-2"><a href="análisis-de-datos-con-r.html#cb1013-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1013-3"><a href="análisis-de-datos-con-r.html#cb1013-3" aria-hidden="true" tabindex="-1"></a>authors <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1013-4"><a href="análisis-de-datos-con-r.html#cb1013-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">surname =</span> (<span class="fu">c</span>(<span class="st">&quot;Tukey&quot;</span>, <span class="st">&quot;Venables&quot;</span>, <span class="st">&quot;Tierney&quot;</span>, <span class="st">&quot;Ripley&quot;</span>, <span class="st">&quot;McNeil&quot;</span>)),</span>
<span id="cb1013-5"><a href="análisis-de-datos-con-r.html#cb1013-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">nationality =</span> <span class="fu">c</span>(<span class="st">&quot;US&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&quot;US&quot;</span>, <span class="st">&quot;UK&quot;</span>, <span class="st">&quot;Australia&quot;</span>),</span>
<span id="cb1013-6"><a href="análisis-de-datos-con-r.html#cb1013-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">deceased =</span> <span class="fu">c</span>(<span class="st">&quot;yes&quot;</span>, <span class="fu">rep</span>(<span class="st">&quot;no&quot;</span>, <span class="dv">4</span>)))</span>
<span id="cb1013-7"><a href="análisis-de-datos-con-r.html#cb1013-7" aria-hidden="true" tabindex="-1"></a>authors</span>
<span id="cb1013-8"><a href="análisis-de-datos-con-r.html#cb1013-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1013-9"><a href="análisis-de-datos-con-r.html#cb1013-9" aria-hidden="true" tabindex="-1"></a>books <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1013-10"><a href="análisis-de-datos-con-r.html#cb1013-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> (<span class="fu">c</span>(<span class="st">&quot;Tukey&quot;</span>, <span class="st">&quot;Venables&quot;</span>, <span class="st">&quot;Tierney&quot;</span>,</span>
<span id="cb1013-11"><a href="análisis-de-datos-con-r.html#cb1013-11" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot;Ripley&quot;</span>, <span class="st">&quot;Ripley&quot;</span>, <span class="st">&quot;McNeil&quot;</span>, <span class="st">&quot;R Core&quot;</span>)),</span>
<span id="cb1013-12"><a href="análisis-de-datos-con-r.html#cb1013-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">c</span>(<span class="st">&quot;Exploratory Data Analysis&quot;</span>,</span>
<span id="cb1013-13"><a href="análisis-de-datos-con-r.html#cb1013-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Modern Applied Statistics ...&quot;</span>,</span>
<span id="cb1013-14"><a href="análisis-de-datos-con-r.html#cb1013-14" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;LISP-STAT&quot;</span>,</span>
<span id="cb1013-15"><a href="análisis-de-datos-con-r.html#cb1013-15" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Spatial Statistics&quot;</span>, <span class="st">&quot;Stochastic Simulation&quot;</span>,</span>
<span id="cb1013-16"><a href="análisis-de-datos-con-r.html#cb1013-16" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;Interactive Data Analysis&quot;</span>,</span>
<span id="cb1013-17"><a href="análisis-de-datos-con-r.html#cb1013-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;An Introduction to R&quot;</span>),</span>
<span id="cb1013-18"><a href="análisis-de-datos-con-r.html#cb1013-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">other.author =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;Ripley&quot;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span id="cb1013-19"><a href="análisis-de-datos-con-r.html#cb1013-19" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;Venables &amp; Smith&quot;</span>))</span>
<span id="cb1013-20"><a href="análisis-de-datos-con-r.html#cb1013-20" aria-hidden="true" tabindex="-1"></a>books</span>
<span id="cb1013-21"><a href="análisis-de-datos-con-r.html#cb1013-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1013-22"><a href="análisis-de-datos-con-r.html#cb1013-22" aria-hidden="true" tabindex="-1"></a>m0 <span class="ot">&lt;-</span> <span class="fu">merge</span>(authors,</span>
<span id="cb1013-23"><a href="análisis-de-datos-con-r.html#cb1013-23" aria-hidden="true" tabindex="-1"></a>            books,</span>
<span id="cb1013-24"><a href="análisis-de-datos-con-r.html#cb1013-24" aria-hidden="true" tabindex="-1"></a>            <span class="at">by.x =</span> <span class="st">&quot;surname&quot;</span>, <span class="at">by.y =</span> <span class="st">&quot;name&quot;</span>)</span>
<span id="cb1013-25"><a href="análisis-de-datos-con-r.html#cb1013-25" aria-hidden="true" tabindex="-1"></a>m0</span>
<span id="cb1013-26"><a href="análisis-de-datos-con-r.html#cb1013-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1013-27"><a href="análisis-de-datos-con-r.html#cb1013-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Por defecto solo mantiene las que hicieron match.</span></span>
<span id="cb1013-28"><a href="análisis-de-datos-con-r.html#cb1013-28" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span>  <span class="fu">merge</span>(authors,</span>
<span id="cb1013-29"><a href="análisis-de-datos-con-r.html#cb1013-29" aria-hidden="true" tabindex="-1"></a>             books,</span>
<span id="cb1013-30"><a href="análisis-de-datos-con-r.html#cb1013-30" aria-hidden="true" tabindex="-1"></a>             <span class="at">by.x =</span> <span class="st">&quot;surname&quot;</span>, <span class="at">by.y =</span> <span class="st">&quot;name&quot;</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1013-31"><a href="análisis-de-datos-con-r.html#cb1013-31" aria-hidden="true" tabindex="-1"></a>m1</span></code></pre></div>
</div>
<div id="pegar-hacia-abajo-por-filas" class="section level4 hasAnchor" number="8.5.5.2">
<h4><span class="header-section-number">8.5.5.2</span> Pegar hacia abajo (por filas)<a href="análisis-de-datos-con-r.html#pegar-hacia-abajo-por-filas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Otra forma de unir bases de datos es agregar filas. Similar a lo que se
hace con <code>append()</code> en Stata. Vamos a utilizar la función <code>bind_rows()</code>
desde el paquete “dplyr”.</p>
<ol style="list-style-type: decimal">
<li><code>bind_rows()</code> es bastante inclusivo. Cualquier columna presente en
las bases de datos se incluye en el output.</li>
<li>Si ambas columnas se llaman igual, se alinearan correctamente.</li>
<li>Adicionalmente, podemos agregar el argumento <code>.id=</code>. Este argumento
genera una nueva columna que sirve para identificar de donde
proviene la informacion.</li>
</ol>
<p><strong>Ejemplo 1:</strong> caso sencillo</p>
<div class="sourceCode" id="cb1014"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1014-1"><a href="análisis-de-datos-con-r.html#cb1014-1" aria-hidden="true" tabindex="-1"></a>continente_resumen <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb1014-2"><a href="análisis-de-datos-con-r.html#cb1014-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span></span>
<span id="cb1014-3"><a href="análisis-de-datos-con-r.html#cb1014-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1014-4"><a href="análisis-de-datos-con-r.html#cb1014-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cases =</span> <span class="fu">n</span>(),</span>
<span id="cb1014-5"><a href="análisis-de-datos-con-r.html#cb1014-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdpPercapmedian =</span> <span class="fu">median</span>(gdpPercap, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb1014-6"><a href="análisis-de-datos-con-r.html#cb1014-6" aria-hidden="true" tabindex="-1"></a>continente_resumen</span>
<span id="cb1014-7"><a href="análisis-de-datos-con-r.html#cb1014-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1014-8"><a href="análisis-de-datos-con-r.html#cb1014-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear Tabla 2: sin agrupar</span></span>
<span id="cb1014-9"><a href="análisis-de-datos-con-r.html#cb1014-9" aria-hidden="true" tabindex="-1"></a>totales <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb1014-10"><a href="análisis-de-datos-con-r.html#cb1014-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1014-11"><a href="análisis-de-datos-con-r.html#cb1014-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cases =</span> <span class="fu">n</span>(),</span>
<span id="cb1014-12"><a href="análisis-de-datos-con-r.html#cb1014-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdpPercapmedian =</span>  <span class="fu">median</span>(gdpPercap, <span class="at">na.rm=</span>T)</span>
<span id="cb1014-13"><a href="análisis-de-datos-con-r.html#cb1014-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1014-14"><a href="análisis-de-datos-con-r.html#cb1014-14" aria-hidden="true" tabindex="-1"></a>totales</span>
<span id="cb1014-15"><a href="análisis-de-datos-con-r.html#cb1014-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1014-16"><a href="análisis-de-datos-con-r.html#cb1014-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora las podemos pegar</span></span>
<span id="cb1014-17"><a href="análisis-de-datos-con-r.html#cb1014-17" aria-hidden="true" tabindex="-1"></a>combinadas <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(continente_resumen, totales)</span>
<span id="cb1014-18"><a href="análisis-de-datos-con-r.html#cb1014-18" aria-hidden="true" tabindex="-1"></a>combinadas</span>
<span id="cb1014-19"><a href="análisis-de-datos-con-r.html#cb1014-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1014-20"><a href="análisis-de-datos-con-r.html#cb1014-20" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Como cambiar ese NA? </span></span>
<span id="cb1014-21"><a href="análisis-de-datos-con-r.html#cb1014-21" aria-hidden="true" tabindex="-1"></a>combinadas <span class="ot">&lt;-</span> combinadas <span class="sc">%&gt;%</span> </span>
<span id="cb1014-22"><a href="análisis-de-datos-con-r.html#cb1014-22" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">continent =</span> <span class="fu">replace_na</span>(<span class="st">&quot;total&quot;</span>))</span>
<span id="cb1014-23"><a href="análisis-de-datos-con-r.html#cb1014-23" aria-hidden="true" tabindex="-1"></a>combinadas</span>
<span id="cb1014-24"><a href="análisis-de-datos-con-r.html#cb1014-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1014-25"><a href="análisis-de-datos-con-r.html#cb1014-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Muy util colocar &quot;id&quot;</span></span>
<span id="cb1014-26"><a href="análisis-de-datos-con-r.html#cb1014-26" aria-hidden="true" tabindex="-1"></a>combinadas_id <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(continente_resumen, </span>
<span id="cb1014-27"><a href="análisis-de-datos-con-r.html#cb1014-27" aria-hidden="true" tabindex="-1"></a>                           totales, </span>
<span id="cb1014-28"><a href="análisis-de-datos-con-r.html#cb1014-28" aria-hidden="true" tabindex="-1"></a>                           <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb1014-29"><a href="análisis-de-datos-con-r.html#cb1014-29" aria-hidden="true" tabindex="-1"></a>combinadas_id</span></code></pre></div>
<p><strong>Ejemplo 2:</strong> ¿Qué ocurre si hay más de un archivo?</p>
<div class="sourceCode" id="cb1015"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1015-1"><a href="análisis-de-datos-con-r.html#cb1015-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base de datos maestra</span></span>
<span id="cb1015-2"><a href="análisis-de-datos-con-r.html#cb1015-2" aria-hidden="true" tabindex="-1"></a>trial <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1015-3"><a href="análisis-de-datos-con-r.html#cb1015-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">year    =</span> <span class="fu">c</span>(<span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>),</span>
<span id="cb1015-4"><a href="análisis-de-datos-con-r.html#cb1015-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">n       =</span> <span class="fu">c</span>(<span class="dv">501</span>, <span class="dv">499</span>, <span class="dv">498</span>, <span class="dv">502</span>),</span>
<span id="cb1015-5"><a href="análisis-de-datos-con-r.html#cb1015-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="fu">c</span>(<span class="dv">51</span>, <span class="dv">52</span>, <span class="dv">49</span>, <span class="dv">50</span>)</span>
<span id="cb1015-6"><a href="análisis-de-datos-con-r.html#cb1015-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb1015-7"><a href="análisis-de-datos-con-r.html#cb1015-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb1015-8"><a href="análisis-de-datos-con-r.html#cb1015-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1015-9"><a href="análisis-de-datos-con-r.html#cb1015-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Base de datos 1</span></span>
<span id="cb1015-10"><a href="análisis-de-datos-con-r.html#cb1015-10" aria-hidden="true" tabindex="-1"></a>trial_2020 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1015-11"><a href="análisis-de-datos-con-r.html#cb1015-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">year    =</span> <span class="dv">2020</span>,</span>
<span id="cb1015-12"><a href="análisis-de-datos-con-r.html#cb1015-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">n       =</span> <span class="dv">500</span>,</span>
<span id="cb1015-13"><a href="análisis-de-datos-con-r.html#cb1015-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="dv">48</span></span>
<span id="cb1015-14"><a href="análisis-de-datos-con-r.html#cb1015-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb1015-15"><a href="análisis-de-datos-con-r.html#cb1015-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb1015-16"><a href="análisis-de-datos-con-r.html#cb1015-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1015-17"><a href="análisis-de-datos-con-r.html#cb1015-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Base de datos 2</span></span>
<span id="cb1015-18"><a href="análisis-de-datos-con-r.html#cb1015-18" aria-hidden="true" tabindex="-1"></a>trial_2021 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1015-19"><a href="análisis-de-datos-con-r.html#cb1015-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">year      =</span> <span class="dv">2021</span>,</span>
<span id="cb1015-20"><a href="análisis-de-datos-con-r.html#cb1015-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">n         =</span> <span class="dv">598</span>,</span>
<span id="cb1015-21"><a href="análisis-de-datos-con-r.html#cb1015-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome   =</span> <span class="dv">57</span></span>
<span id="cb1015-22"><a href="análisis-de-datos-con-r.html#cb1015-22" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb1015-23"><a href="análisis-de-datos-con-r.html#cb1015-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb1015-24"><a href="análisis-de-datos-con-r.html#cb1015-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1015-25"><a href="análisis-de-datos-con-r.html#cb1015-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Para combinar mas de una base de datos</span></span>
<span id="cb1015-26"><a href="análisis-de-datos-con-r.html#cb1015-26" aria-hidden="true" tabindex="-1"></a>trial1<span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(trial,trial_2020, trial_2021)</span></code></pre></div>
<p><strong>Ejemplo 3:</strong> ¿Qué ocurre si tengo muchos archivos?</p>
<div class="sourceCode" id="cb1016"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1016-1"><a href="análisis-de-datos-con-r.html#cb1016-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb1016-2"><a href="análisis-de-datos-con-r.html#cb1016-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span>
<span id="cb1016-3"><a href="análisis-de-datos-con-r.html#cb1016-3" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(plyr)    <span class="co"># Recomendable ocupar paquete plyr.</span></span>
<span id="cb1016-4"><a href="análisis-de-datos-con-r.html#cb1016-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1016-5"><a href="análisis-de-datos-con-r.html#cb1016-5" aria-hidden="true" tabindex="-1"></a>allfiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;datos&quot;</span>,</span>
<span id="cb1016-6"><a href="análisis-de-datos-con-r.html#cb1016-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>,</span>
<span id="cb1016-7"><a href="análisis-de-datos-con-r.html#cb1016-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1016-8"><a href="análisis-de-datos-con-r.html#cb1016-8" aria-hidden="true" tabindex="-1"></a>allfiles</span>
<span id="cb1016-9"><a href="análisis-de-datos-con-r.html#cb1016-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1016-10"><a href="análisis-de-datos-con-r.html#cb1016-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Append data</span></span>
<span id="cb1016-11"><a href="análisis-de-datos-con-r.html#cb1016-11" aria-hidden="true" tabindex="-1"></a>combined_data<span class="ot">&lt;-</span> <span class="fu">ldply</span>(allfiles, read_csv)</span>
<span id="cb1016-12"><a href="análisis-de-datos-con-r.html#cb1016-12" aria-hidden="true" tabindex="-1"></a>combined_data</span>
<span id="cb1016-13"><a href="análisis-de-datos-con-r.html#cb1016-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1016-14"><a href="análisis-de-datos-con-r.html#cb1016-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformar a un data.frame.</span></span>
<span id="cb1016-15"><a href="análisis-de-datos-con-r.html#cb1016-15" aria-hidden="true" tabindex="-1"></a>combined_data_sep <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> combined_data,</span>
<span id="cb1016-16"><a href="análisis-de-datos-con-r.html#cb1016-16" aria-hidden="true" tabindex="-1"></a>                              <span class="at">col =</span> <span class="st">&quot;year;n;outcome&quot;</span>,</span>
<span id="cb1016-17"><a href="análisis-de-datos-con-r.html#cb1016-17" aria-hidden="true" tabindex="-1"></a>                              <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;outcome&quot;</span>),</span>
<span id="cb1016-18"><a href="análisis-de-datos-con-r.html#cb1016-18" aria-hidden="true" tabindex="-1"></a>                              <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>)</span>
<span id="cb1016-19"><a href="análisis-de-datos-con-r.html#cb1016-19" aria-hidden="true" tabindex="-1"></a>combined_data_sep</span></code></pre></div>
</div>
</div>
</div>
<div id="análisis-de-datos" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Análisis de datos<a href="análisis-de-datos-con-r.html#análisis-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="inspección-de-datos" class="section level3 hasAnchor" number="8.6.1">
<h3><span class="header-section-number">8.6.1</span> Inspección de datos<a href="análisis-de-datos-con-r.html#inspección-de-datos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Preámbulo:</p>
<div class="sourceCode" id="cb1017"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1017-1"><a href="análisis-de-datos-con-r.html#cb1017-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiamos consola</span></span>
<span id="cb1017-2"><a href="análisis-de-datos-con-r.html#cb1017-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1017-3"><a href="análisis-de-datos-con-r.html#cb1017-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1017-4"><a href="análisis-de-datos-con-r.html#cb1017-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos paquetes que vamos a utilizar</span></span>
<span id="cb1017-5"><a href="análisis-de-datos-con-r.html#cb1017-5" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb1017-6"><a href="análisis-de-datos-con-r.html#cb1017-6" aria-hidden="true" tabindex="-1"></a>  rio,        <span class="co"># importar/exportar datos. </span></span>
<span id="cb1017-7"><a href="análisis-de-datos-con-r.html#cb1017-7" aria-hidden="true" tabindex="-1"></a>  here,       <span class="co"># escribir rutas de las carpetas.  </span></span>
<span id="cb1017-8"><a href="análisis-de-datos-con-r.html#cb1017-8" aria-hidden="true" tabindex="-1"></a>  janitor,    <span class="co"># limpiar datos y tablas.</span></span>
<span id="cb1017-9"><a href="análisis-de-datos-con-r.html#cb1017-9" aria-hidden="true" tabindex="-1"></a>  tidyverse,  <span class="co"># Manejo de bases de datos y visualización. </span></span>
<span id="cb1017-10"><a href="análisis-de-datos-con-r.html#cb1017-10" aria-hidden="true" tabindex="-1"></a>  magrittr,    <span class="co"># Permite utilizar operador %&gt;% (piping). </span></span>
<span id="cb1017-11"><a href="análisis-de-datos-con-r.html#cb1017-11" aria-hidden="true" tabindex="-1"></a>  skimr,       <span class="co"># Inspeccionar datos</span></span>
<span id="cb1017-12"><a href="análisis-de-datos-con-r.html#cb1017-12" aria-hidden="true" tabindex="-1"></a>  inspectdf,   <span class="co"># Inspeccionar datos</span></span>
<span id="cb1017-13"><a href="análisis-de-datos-con-r.html#cb1017-13" aria-hidden="true" tabindex="-1"></a>  gapminder    <span class="co"># Base de datos con información de países. </span></span>
<span id="cb1017-14"><a href="análisis-de-datos-con-r.html#cb1017-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Ahora vamos a crear tablas de estadística descriptiva que nos interesen
para el análisis de datos.</p>
<div class="sourceCode" id="cb1018"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1018-1"><a href="análisis-de-datos-con-r.html#cb1018-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importamos datos</span></span>
<span id="cb1018-2"><a href="análisis-de-datos-con-r.html#cb1018-2" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>,<span class="st">&quot;linelist_cleaned.rds&quot;</span>))</span>
<span id="cb1018-3"><a href="análisis-de-datos-con-r.html#cb1018-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-4"><a href="análisis-de-datos-con-r.html#cb1018-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Inspeccionamos los datos</span></span>
<span id="cb1018-5"><a href="análisis-de-datos-con-r.html#cb1018-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-6"><a href="análisis-de-datos-con-r.html#cb1018-6" aria-hidden="true" tabindex="-1"></a><span class="co"># a.  Visión general de la base de datos</span></span>
<span id="cb1018-7"><a href="análisis-de-datos-con-r.html#cb1018-7" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(datos)</span>
<span id="cb1018-8"><a href="análisis-de-datos-con-r.html#cb1018-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-9"><a href="análisis-de-datos-con-r.html#cb1018-9" aria-hidden="true" tabindex="-1"></a><span class="co"># b. Información sobre cada columna</span></span>
<span id="cb1018-10"><a href="análisis-de-datos-con-r.html#cb1018-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos)</span>
<span id="cb1018-11"><a href="análisis-de-datos-con-r.html#cb1018-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-12"><a href="análisis-de-datos-con-r.html#cb1018-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-13"><a href="análisis-de-datos-con-r.html#cb1018-13" aria-hidden="true" tabindex="-1"></a><span class="co"># c. Información sobre cada variable categórica. </span></span>
<span id="cb1018-14"><a href="análisis-de-datos-con-r.html#cb1018-14" aria-hidden="true" tabindex="-1"></a>insp <span class="ot">&lt;-</span> <span class="fu">inspect_cat</span>(datos)</span>
<span id="cb1018-15"><a href="análisis-de-datos-con-r.html#cb1018-15" aria-hidden="true" tabindex="-1"></a>insp</span>
<span id="cb1018-16"><a href="análisis-de-datos-con-r.html#cb1018-16" aria-hidden="true" tabindex="-1"></a>insp_figura <span class="ot">&lt;-</span> insp <span class="sc">%&gt;%</span> <span class="fu">show_plot</span>()</span>
<span id="cb1018-17"><a href="análisis-de-datos-con-r.html#cb1018-17" aria-hidden="true" tabindex="-1"></a>insp_figura</span>
<span id="cb1018-18"><a href="análisis-de-datos-con-r.html#cb1018-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-19"><a href="análisis-de-datos-con-r.html#cb1018-19" aria-hidden="true" tabindex="-1"></a><span class="co"># d. Miramos nombre de las variables</span></span>
<span id="cb1018-20"><a href="análisis-de-datos-con-r.html#cb1018-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(datos)</span>
<span id="cb1018-21"><a href="análisis-de-datos-con-r.html#cb1018-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1018-22"><a href="análisis-de-datos-con-r.html#cb1018-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota 1: Tenemos 29 variables y el id es igual a case_id. </span></span></code></pre></div>
<p>Transformamos variables de interés:</p>
<div class="sourceCode" id="cb1019"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1019-1"><a href="análisis-de-datos-con-r.html#cb1019-1" aria-hidden="true" tabindex="-1"></a><span class="co"># a. Miramos la clase de cada variable </span></span>
<span id="cb1019-2"><a href="análisis-de-datos-con-r.html#cb1019-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">lapply</span>(datos,class))</span>
<span id="cb1019-3"><a href="análisis-de-datos-con-r.html#cb1019-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-4"><a href="análisis-de-datos-con-r.html#cb1019-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota 2: gender esta como texto, podría estar como factor. Lo mismo ocurre con outcome. </span></span>
<span id="cb1019-5"><a href="análisis-de-datos-con-r.html#cb1019-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-6"><a href="análisis-de-datos-con-r.html#cb1019-6" aria-hidden="true" tabindex="-1"></a><span class="co"># b. Transformamos gender/outcome en factores </span></span>
<span id="cb1019-7"><a href="análisis-de-datos-con-r.html#cb1019-7" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(datos<span class="sc">$</span>gender)</span>
<span id="cb1019-8"><a href="análisis-de-datos-con-r.html#cb1019-8" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(datos<span class="sc">$</span>gender)</span>
<span id="cb1019-9"><a href="análisis-de-datos-con-r.html#cb1019-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-10"><a href="análisis-de-datos-con-r.html#cb1019-10" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>outcome<span class="ot">&lt;-</span> <span class="fu">as.factor</span>(datos<span class="sc">$</span>outcome)</span>
<span id="cb1019-11"><a href="análisis-de-datos-con-r.html#cb1019-11" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(datos<span class="sc">$</span>outcome)</span>
<span id="cb1019-12"><a href="análisis-de-datos-con-r.html#cb1019-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-13"><a href="análisis-de-datos-con-r.html#cb1019-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Miramos como esta codificado ahora </span></span>
<span id="cb1019-14"><a href="análisis-de-datos-con-r.html#cb1019-14" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">lapply</span>(datos,class))[<span class="st">&quot;gender&quot;</span>]</span>
<span id="cb1019-15"><a href="análisis-de-datos-con-r.html#cb1019-15" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(datos)</span>
<span id="cb1019-16"><a href="análisis-de-datos-con-r.html#cb1019-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-17"><a href="análisis-de-datos-con-r.html#cb1019-17" aria-hidden="true" tabindex="-1"></a><span class="co"># c. Seleccionamos solo variables que nos interesa ocupar: reducir el problema!</span></span>
<span id="cb1019-18"><a href="análisis-de-datos-con-r.html#cb1019-18" aria-hidden="true" tabindex="-1"></a>datos_trabajo <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">select</span>(case_id, outcome, gender, age, </span>
<span id="cb1019-19"><a href="análisis-de-datos-con-r.html#cb1019-19" aria-hidden="true" tabindex="-1"></a>                                  age_years, age_cat, hospital, wt_kg<span class="sc">:</span>temp, </span>
<span id="cb1019-20"><a href="análisis-de-datos-con-r.html#cb1019-20" aria-hidden="true" tabindex="-1"></a>                                  days_onset_hosp)</span>
<span id="cb1019-21"><a href="análisis-de-datos-con-r.html#cb1019-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-22"><a href="análisis-de-datos-con-r.html#cb1019-22" aria-hidden="true" tabindex="-1"></a><span class="co"># d. Vemos que hay variables que están codificadas como &quot;yes&quot; y &quot;no&quot;. </span></span>
<span id="cb1019-23"><a href="análisis-de-datos-con-r.html#cb1019-23" aria-hidden="true" tabindex="-1"></a><span class="co">#    Vamos a crearlas como variables binarias. </span></span>
<span id="cb1019-24"><a href="análisis-de-datos-con-r.html#cb1019-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-25"><a href="análisis-de-datos-con-r.html#cb1019-25" aria-hidden="true" tabindex="-1"></a>datos_trabajo <span class="ot">&lt;-</span>  datos_trabajo <span class="sc">%&gt;%</span>  </span>
<span id="cb1019-26"><a href="análisis-de-datos-con-r.html#cb1019-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">chills =</span>  <span class="fu">ifelse</span>(chills <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb1019-27"><a href="análisis-de-datos-con-r.html#cb1019-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">cough  =</span>  <span class="fu">ifelse</span>(cough <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>,<span class="dv">1</span>,<span class="dv">0</span>), </span>
<span id="cb1019-28"><a href="análisis-de-datos-con-r.html#cb1019-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">aches  =</span>  <span class="fu">ifelse</span>(aches <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>,<span class="dv">1</span>,<span class="dv">0</span>), </span>
<span id="cb1019-29"><a href="análisis-de-datos-con-r.html#cb1019-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">vomit  =</span>  <span class="fu">ifelse</span>(vomit <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span>
<span id="cb1019-30"><a href="análisis-de-datos-con-r.html#cb1019-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-31"><a href="análisis-de-datos-con-r.html#cb1019-31" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(datos_trabajo)</span>
<span id="cb1019-32"><a href="análisis-de-datos-con-r.html#cb1019-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-33"><a href="análisis-de-datos-con-r.html#cb1019-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiamos para quedarnos solo con los datos que nos interesan. </span></span>
<span id="cb1019-34"><a href="análisis-de-datos-con-r.html#cb1019-34" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(insp, insp_figura)</span>
<span id="cb1019-35"><a href="análisis-de-datos-con-r.html#cb1019-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-36"><a href="análisis-de-datos-con-r.html#cb1019-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspeccionamos nuevamente</span></span>
<span id="cb1019-37"><a href="análisis-de-datos-con-r.html#cb1019-37" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(datos_trabajo)</span>
<span id="cb1019-38"><a href="análisis-de-datos-con-r.html#cb1019-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-39"><a href="análisis-de-datos-con-r.html#cb1019-39" aria-hidden="true" tabindex="-1"></a><span class="co"># e. Ahora vamos a dejar una base de datos unicamente con valores completos</span></span>
<span id="cb1019-40"><a href="análisis-de-datos-con-r.html#cb1019-40" aria-hidden="true" tabindex="-1"></a>completos <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(datos_trabajo)</span>
<span id="cb1019-41"><a href="análisis-de-datos-con-r.html#cb1019-41" aria-hidden="true" tabindex="-1"></a>completos </span>
<span id="cb1019-42"><a href="análisis-de-datos-con-r.html#cb1019-42" aria-hidden="true" tabindex="-1"></a>datos_trabajo <span class="ot">&lt;-</span> datos_trabajo[completos,]</span>
<span id="cb1019-43"><a href="análisis-de-datos-con-r.html#cb1019-43" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(datos_trabajo)            </span>
<span id="cb1019-44"><a href="análisis-de-datos-con-r.html#cb1019-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1019-45"><a href="análisis-de-datos-con-r.html#cb1019-45" aria-hidden="true" tabindex="-1"></a><span class="co"># f. Finalmente, vamos a renombrar la base de datos con la que vamos a trabajar.  </span></span>
<span id="cb1019-46"><a href="análisis-de-datos-con-r.html#cb1019-46" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(datos, completos)</span>
<span id="cb1019-47"><a href="análisis-de-datos-con-r.html#cb1019-47" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> datos_trabajo</span>
<span id="cb1019-48"><a href="análisis-de-datos-con-r.html#cb1019-48" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(datos_trabajo)</span></code></pre></div>
</div>
<div id="estadística-descriptiva" class="section level3 hasAnchor" number="8.6.2">
<h3><span class="header-section-number">8.6.2</span> Estadística descriptiva<a href="análisis-de-datos-con-r.html#estadística-descriptiva" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Describiendo los datos:</p>
<div class="sourceCode" id="cb1020"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1020-1"><a href="análisis-de-datos-con-r.html#cb1020-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(rstatix)</span>
<span id="cb1020-2"><a href="análisis-de-datos-con-r.html#cb1020-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1020-3"><a href="análisis-de-datos-con-r.html#cb1020-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Opcion 1: utilizar get_summary_stats() del paquete &quot;rstatix&quot;. </span></span>
<span id="cb1020-4"><a href="análisis-de-datos-con-r.html#cb1020-4" aria-hidden="true" tabindex="-1"></a><span class="co"># El resultado se guarda en un dataframe. </span></span>
<span id="cb1020-5"><a href="análisis-de-datos-con-r.html#cb1020-5" aria-hidden="true" tabindex="-1"></a>tabla1 <span class="ot">&lt;-</span> datos  <span class="sc">%&gt;%</span> </span>
<span id="cb1020-6"><a href="análisis-de-datos-con-r.html#cb1020-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_summary_stats</span>(</span>
<span id="cb1020-7"><a href="análisis-de-datos-con-r.html#cb1020-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">everything</span>(),  </span>
<span id="cb1020-8"><a href="análisis-de-datos-con-r.html#cb1020-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;full&quot;</span>)                    </span>
<span id="cb1020-9"><a href="análisis-de-datos-con-r.html#cb1020-9" aria-hidden="true" tabindex="-1"></a>tabla1 </span>
<span id="cb1020-10"><a href="análisis-de-datos-con-r.html#cb1020-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1020-11"><a href="análisis-de-datos-con-r.html#cb1020-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Puedo exportar esta tabla en excel utilizando `rio` y `here`.</span></span>
<span id="cb1020-12"><a href="análisis-de-datos-con-r.html#cb1020-12" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(tabla1, <span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, </span>
<span id="cb1020-13"><a href="análisis-de-datos-con-r.html#cb1020-13" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;ejercicio1&quot;</span>, </span>
<span id="cb1020-14"><a href="análisis-de-datos-con-r.html#cb1020-14" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;tabla1.xlsx&quot;</span>))</span></code></pre></div>
</div>
<div id="tablas-de-frecuencia" class="section level3 hasAnchor" number="8.6.3">
<h3><span class="header-section-number">8.6.3</span> Tablas de frecuencia<a href="análisis-de-datos-con-r.html#tablas-de-frecuencia" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>El paquete “janitor” ofrece la función <code>tabyl()</code> para producir
tabulaciones simples y tabulaciones cruzadas, que pueden ser “adornadas”
o modificadas con funciones de ayuda para mostrar porcentajes,
proporciones, recuentos, etc.</p>
<p>El uso por defecto de <code>tabyl()</code> en una columna específica produce los
valores únicos, los recuentos y los “porcentajes” de la columna (en
realidad proporciones). Las proporciones pueden tener muchos dígitos.
Puede ajustar el número de décimales con la función <code>adorn_rounding()</code>
como se describe a continuación.</p>
<div id="tablas-de-frecuencias-con-una-entrada" class="section level4 hasAnchor" number="8.6.3.1">
<h4><span class="header-section-number">8.6.3.1</span> Tablas de frecuencias con una entrada<a href="análisis-de-datos-con-r.html#tablas-de-frecuencias-con-una-entrada" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1021"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1021-1"><a href="análisis-de-datos-con-r.html#cb1021-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frecuencia para age_cat </span></span>
<span id="cb1021-2"><a href="análisis-de-datos-con-r.html#cb1021-2" aria-hidden="true" tabindex="-1"></a>tabla2a <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(outcome)</span>
<span id="cb1021-3"><a href="análisis-de-datos-con-r.html#cb1021-3" aria-hidden="true" tabindex="-1"></a>tabla2a </span>
<span id="cb1021-4"><a href="análisis-de-datos-con-r.html#cb1021-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-5"><a href="análisis-de-datos-con-r.html#cb1021-5" aria-hidden="true" tabindex="-1"></a>tabla2b <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(gender)</span>
<span id="cb1021-6"><a href="análisis-de-datos-con-r.html#cb1021-6" aria-hidden="true" tabindex="-1"></a>tabla2b </span>
<span id="cb1021-7"><a href="análisis-de-datos-con-r.html#cb1021-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-8"><a href="análisis-de-datos-con-r.html#cb1021-8" aria-hidden="true" tabindex="-1"></a>tabla2c <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(age_cat)</span>
<span id="cb1021-9"><a href="análisis-de-datos-con-r.html#cb1021-9" aria-hidden="true" tabindex="-1"></a>tabla2c </span>
<span id="cb1021-10"><a href="análisis-de-datos-con-r.html#cb1021-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-11"><a href="análisis-de-datos-con-r.html#cb1021-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(tabla2a, tabla2b, tabla2c)</span>
<span id="cb1021-12"><a href="análisis-de-datos-con-r.html#cb1021-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-13"><a href="análisis-de-datos-con-r.html#cb1021-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Qué pasa si queremos hacer una tabla de frecuencias para </span></span>
<span id="cb1021-14"><a href="análisis-de-datos-con-r.html#cb1021-14" aria-hidden="true" tabindex="-1"></a><span class="co"># todas las variables que son factores? -&gt; iteradores! </span></span>
<span id="cb1021-15"><a href="análisis-de-datos-con-r.html#cb1021-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-16"><a href="análisis-de-datos-con-r.html#cb1021-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de todas las variables de la base de datos</span></span>
<span id="cb1021-17"><a href="análisis-de-datos-con-r.html#cb1021-17" aria-hidden="true" tabindex="-1"></a>nombres <span class="ot">&lt;-</span> <span class="fu">names</span>(datos)</span>
<span id="cb1021-18"><a href="análisis-de-datos-con-r.html#cb1021-18" aria-hidden="true" tabindex="-1"></a>nombres </span>
<span id="cb1021-19"><a href="análisis-de-datos-con-r.html#cb1021-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-20"><a href="análisis-de-datos-con-r.html#cb1021-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecciono solo a las que son categóricas (factores)</span></span>
<span id="cb1021-21"><a href="análisis-de-datos-con-r.html#cb1021-21" aria-hidden="true" tabindex="-1"></a>select <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(datos, is.factor))</span>
<span id="cb1021-22"><a href="análisis-de-datos-con-r.html#cb1021-22" aria-hidden="true" tabindex="-1"></a>select </span>
<span id="cb1021-23"><a href="análisis-de-datos-con-r.html#cb1021-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1021-24"><a href="análisis-de-datos-con-r.html#cb1021-24" aria-hidden="true" tabindex="-1"></a>nombres <span class="ot">&lt;-</span> nombres[select <span class="sc">==</span> <span class="cn">TRUE</span>]</span>
<span id="cb1021-25"><a href="análisis-de-datos-con-r.html#cb1021-25" aria-hidden="true" tabindex="-1"></a>nombres </span></code></pre></div>
<p>Ahora voy a generar tantas tablas como variables categóricas para ello
vamos a hacer uso de iteraciones. Creo una lista vacía, donde voy a
guardar las tablas (data frames) que se generen.</p>
<div class="sourceCode" id="cb1022"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1022-1"><a href="análisis-de-datos-con-r.html#cb1022-1" aria-hidden="true" tabindex="-1"></a>tabla2 <span class="ot">&lt;-</span>  <span class="fu">list</span>()</span>
<span id="cb1022-2"><a href="análisis-de-datos-con-r.html#cb1022-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1022-3"><a href="análisis-de-datos-con-r.html#cb1022-3" aria-hidden="true" tabindex="-1"></a>tabla2a <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(outcome)</span>
<span id="cb1022-4"><a href="análisis-de-datos-con-r.html#cb1022-4" aria-hidden="true" tabindex="-1"></a>tabla2a </span>
<span id="cb1022-5"><a href="análisis-de-datos-con-r.html#cb1022-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1022-6"><a href="análisis-de-datos-con-r.html#cb1022-6" aria-hidden="true" tabindex="-1"></a>tabla2b <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(gender)</span>
<span id="cb1022-7"><a href="análisis-de-datos-con-r.html#cb1022-7" aria-hidden="true" tabindex="-1"></a>tabla2b </span>
<span id="cb1022-8"><a href="análisis-de-datos-con-r.html#cb1022-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1022-9"><a href="análisis-de-datos-con-r.html#cb1022-9" aria-hidden="true" tabindex="-1"></a>tabla2c <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(age_cat)</span>
<span id="cb1022-10"><a href="análisis-de-datos-con-r.html#cb1022-10" aria-hidden="true" tabindex="-1"></a>tabla2c </span>
<span id="cb1022-11"><a href="análisis-de-datos-con-r.html#cb1022-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1022-12"><a href="análisis-de-datos-con-r.html#cb1022-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(nombres)){</span>
<span id="cb1022-13"><a href="análisis-de-datos-con-r.html#cb1022-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1022-14"><a href="análisis-de-datos-con-r.html#cb1022-14" aria-hidden="true" tabindex="-1"></a>  tabla2[[i]] <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(nombres[i])</span>
<span id="cb1022-15"><a href="análisis-de-datos-con-r.html#cb1022-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ahora tengo una lista de tablas. Cada tabla habla de un variable
categórica. Si vemos son equivalente a generarlas de otra forma. Si
tengo pocas variables categóricas, esta forma puede no ser relevante,
sin embargo, si tengo muchas, puede ser una buena forma de generar
estadística descriptiva.</p>
<div class="sourceCode" id="cb1023"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1023-1"><a href="análisis-de-datos-con-r.html#cb1023-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparamos </span></span>
<span id="cb1023-2"><a href="análisis-de-datos-con-r.html#cb1023-2" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(outcome,<span class="at">show_na =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1023-3"><a href="análisis-de-datos-con-r.html#cb1023-3" aria-hidden="true" tabindex="-1"></a>tabla2[[<span class="dv">1</span>]]</span>
<span id="cb1023-4"><a href="análisis-de-datos-con-r.html#cb1023-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1023-5"><a href="análisis-de-datos-con-r.html#cb1023-5" aria-hidden="true" tabindex="-1"></a>datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(gender,<span class="at">show_na =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1023-6"><a href="análisis-de-datos-con-r.html#cb1023-6" aria-hidden="true" tabindex="-1"></a>tabla2[[<span class="dv">2</span>]]</span>
<span id="cb1023-7"><a href="análisis-de-datos-con-r.html#cb1023-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1023-8"><a href="análisis-de-datos-con-r.html#cb1023-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportamos utilizando `rio` y `here` de nuevo </span></span>
<span id="cb1023-9"><a href="análisis-de-datos-con-r.html#cb1023-9" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(tabla2[[<span class="dv">1</span>]],<span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, <span class="st">&quot;ejercicio1&quot;</span>, <span class="st">&quot;tabla2-1-freq-outcomes.xlsx&quot;</span>))</span>
<span id="cb1023-10"><a href="análisis-de-datos-con-r.html#cb1023-10" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(tabla2[[<span class="dv">2</span>]],<span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, <span class="st">&quot;ejercicio1&quot;</span>, <span class="st">&quot;tabla2-2-freq-gender.xlsx&quot;</span>))</span>
<span id="cb1023-11"><a href="análisis-de-datos-con-r.html#cb1023-11" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(tabla2[[<span class="dv">3</span>]],<span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, <span class="st">&quot;ejercicio1&quot;</span>, <span class="st">&quot;tabla2-3-freq-age_cat.xlsx&quot;</span>))</span></code></pre></div>
</div>
<div id="tablas-de-frecuencias-con-más-de-una-entrada" class="section level4 hasAnchor" number="8.6.3.2">
<h4><span class="header-section-number">8.6.3.2</span> Tablas de frecuencias con más de una entrada<a href="análisis-de-datos-con-r.html#tablas-de-frecuencias-con-más-de-una-entrada" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Imaginen que estamos interesados o interesadas en saber cuantas
observaciones por categoría de edad por genero. Para ello nos gustaría
hacer una tabla de doble entrada. Podemos ocupar <code>tabyl()</code> para hacer
eso fácilmente:</p>
<div class="sourceCode" id="cb1024"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1024-1"><a href="análisis-de-datos-con-r.html#cb1024-1" aria-hidden="true" tabindex="-1"></a>tabla3 <span class="ot">&lt;-</span> datos  <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(age_cat, gender, <span class="at">show_na =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1024-2"><a href="análisis-de-datos-con-r.html#cb1024-2" aria-hidden="true" tabindex="-1"></a>tabla3 </span>
<span id="cb1024-3"><a href="análisis-de-datos-con-r.html#cb1024-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(tabla3)</span>
<span id="cb1024-4"><a href="análisis-de-datos-con-r.html#cb1024-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1024-5"><a href="análisis-de-datos-con-r.html#cb1024-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacemos una lista </span></span>
<span id="cb1024-6"><a href="análisis-de-datos-con-r.html#cb1024-6" aria-hidden="true" tabindex="-1"></a>tabla3 <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1024-7"><a href="análisis-de-datos-con-r.html#cb1024-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1024-8"><a href="análisis-de-datos-con-r.html#cb1024-8" aria-hidden="true" tabindex="-1"></a>tabla3[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(outcome, gender)</span>
<span id="cb1024-9"><a href="análisis-de-datos-con-r.html#cb1024-9" aria-hidden="true" tabindex="-1"></a>tabla3[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(outcome, age_cat)</span>
<span id="cb1024-10"><a href="análisis-de-datos-con-r.html#cb1024-10" aria-hidden="true" tabindex="-1"></a>tabla3[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> <span class="fu">tabyl</span>(age_cat, gender)</span>
<span id="cb1024-11"><a href="análisis-de-datos-con-r.html#cb1024-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1024-12"><a href="análisis-de-datos-con-r.html#cb1024-12" aria-hidden="true" tabindex="-1"></a>tabla3[[<span class="dv">1</span>]]</span>
<span id="cb1024-13"><a href="análisis-de-datos-con-r.html#cb1024-13" aria-hidden="true" tabindex="-1"></a>tabla3[[<span class="dv">2</span>]]</span>
<span id="cb1024-14"><a href="análisis-de-datos-con-r.html#cb1024-14" aria-hidden="true" tabindex="-1"></a>tabla3[[<span class="dv">3</span>]]</span>
<span id="cb1024-15"><a href="análisis-de-datos-con-r.html#cb1024-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1024-16"><a href="análisis-de-datos-con-r.html#cb1024-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportamos pero a diferentes hojas</span></span>
<span id="cb1024-17"><a href="análisis-de-datos-con-r.html#cb1024-17" aria-hidden="true" tabindex="-1"></a><span class="fu">export</span>(<span class="fu">list</span>(<span class="st">&quot;tabla 3.1&quot;</span> <span class="ot">=</span> tabla3[[<span class="dv">1</span>]],<span class="st">&quot;tabla 3.2&quot;</span> <span class="ot">=</span> tabla3[[<span class="dv">2</span>]],</span>
<span id="cb1024-18"><a href="análisis-de-datos-con-r.html#cb1024-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;tabla 3.3&quot;</span> <span class="ot">=</span> tabla3[[<span class="dv">3</span>]]),   <span class="co">#Podemos asignarles nombres</span></span>
<span id="cb1024-19"><a href="análisis-de-datos-con-r.html#cb1024-19" aria-hidden="true" tabindex="-1"></a>       <span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, <span class="st">&quot;ejercicio1&quot;</span>, <span class="st">&quot;tabla3_cruzadas.xlsx&quot;</span>))</span></code></pre></div>
</div>
<div id="tablas-mejoradas-con-opciones" class="section level4 hasAnchor" number="8.6.3.3">
<h4><span class="header-section-number">8.6.3.3</span> Tablas mejoradas con opciones<a href="análisis-de-datos-con-r.html#tablas-mejoradas-con-opciones" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1025"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1025-1"><a href="análisis-de-datos-con-r.html#cb1025-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabular los recuentos y las proporciones por categoría de edad</span></span>
<span id="cb1025-2"><a href="análisis-de-datos-con-r.html#cb1025-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-3"><a href="análisis-de-datos-con-r.html#cb1025-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Con porcentajes para una de una entrada</span></span>
<span id="cb1025-4"><a href="análisis-de-datos-con-r.html#cb1025-4" aria-hidden="true" tabindex="-1"></a>tabla4 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>               </span>
<span id="cb1025-5"><a href="análisis-de-datos-con-r.html#cb1025-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat) <span class="sc">%&gt;%</span>       </span>
<span id="cb1025-6"><a href="análisis-de-datos-con-r.html#cb1025-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>()   <span class="co"># convertir proporciones en porcentajes</span></span>
<span id="cb1025-7"><a href="análisis-de-datos-con-r.html#cb1025-7" aria-hidden="true" tabindex="-1"></a>tabla4</span>
<span id="cb1025-8"><a href="análisis-de-datos-con-r.html#cb1025-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-9"><a href="análisis-de-datos-con-r.html#cb1025-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Con porcentajes por fila</span></span>
<span id="cb1025-10"><a href="análisis-de-datos-con-r.html#cb1025-10" aria-hidden="true" tabindex="-1"></a>tabla5 <span class="ot">&lt;-</span> datos  <span class="sc">%&gt;%</span>                                  </span>
<span id="cb1025-11"><a href="análisis-de-datos-con-r.html#cb1025-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat, gender) <span class="sc">%&gt;%</span>                  <span class="co"># contar para edad y género</span></span>
<span id="cb1025-12"><a href="análisis-de-datos-con-r.html#cb1025-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>             <span class="co"># agregar totales</span></span>
<span id="cb1025-13"><a href="análisis-de-datos-con-r.html#cb1025-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="at">denominator =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># cambiar a porcentaje</span></span>
<span id="cb1025-14"><a href="análisis-de-datos-con-r.html#cb1025-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">2</span>)            <span class="co"># numero de digitos</span></span>
<span id="cb1025-15"><a href="análisis-de-datos-con-r.html#cb1025-15" aria-hidden="true" tabindex="-1"></a>tabla5 </span>
<span id="cb1025-16"><a href="análisis-de-datos-con-r.html#cb1025-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-17"><a href="análisis-de-datos-con-r.html#cb1025-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: ¿Qué ocurre si cambio col/row en adorn_percentages? </span></span>
<span id="cb1025-18"><a href="análisis-de-datos-con-r.html#cb1025-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-19"><a href="análisis-de-datos-con-r.html#cb1025-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Con porcentajes  por columna </span></span>
<span id="cb1025-20"><a href="análisis-de-datos-con-r.html#cb1025-20" aria-hidden="true" tabindex="-1"></a>tabla6 <span class="ot">&lt;-</span> datos  <span class="sc">%&gt;%</span>                                  </span>
<span id="cb1025-21"><a href="análisis-de-datos-con-r.html#cb1025-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat, gender) <span class="sc">%&gt;%</span>                  <span class="co"># contar para edad y genero</span></span>
<span id="cb1025-22"><a href="análisis-de-datos-con-r.html#cb1025-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>             <span class="co"># agregar totales</span></span>
<span id="cb1025-23"><a href="análisis-de-datos-con-r.html#cb1025-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="at">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># cambiar a porcentaje</span></span>
<span id="cb1025-24"><a href="análisis-de-datos-con-r.html#cb1025-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">2</span>)            <span class="co"># nùmero de digitos</span></span>
<span id="cb1025-25"><a href="análisis-de-datos-con-r.html#cb1025-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-26"><a href="análisis-de-datos-con-r.html#cb1025-26" aria-hidden="true" tabindex="-1"></a>tabla6 </span>
<span id="cb1025-27"><a href="análisis-de-datos-con-r.html#cb1025-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-28"><a href="análisis-de-datos-con-r.html#cb1025-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-29"><a href="análisis-de-datos-con-r.html#cb1025-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Con total  por columna y fila </span></span>
<span id="cb1025-30"><a href="análisis-de-datos-con-r.html#cb1025-30" aria-hidden="true" tabindex="-1"></a>tabla7 <span class="ot">&lt;-</span> datos  <span class="sc">%&gt;%</span>                                  </span>
<span id="cb1025-31"><a href="análisis-de-datos-con-r.html#cb1025-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat, gender) <span class="sc">%&gt;%</span>                  <span class="co"># contar para edad y genero</span></span>
<span id="cb1025-32"><a href="análisis-de-datos-con-r.html#cb1025-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="fu">list</span>(<span class="st">&quot;row&quot;</span>,<span class="st">&quot;col&quot;</span>)) <span class="sc">%&gt;%</span>             <span class="co"># agregar totales</span></span>
<span id="cb1025-33"><a href="análisis-de-datos-con-r.html#cb1025-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="at">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># cambiar a porcentaje</span></span>
<span id="cb1025-34"><a href="análisis-de-datos-con-r.html#cb1025-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">2</span>)            <span class="co"># nùmero de digitos</span></span>
<span id="cb1025-35"><a href="análisis-de-datos-con-r.html#cb1025-35" aria-hidden="true" tabindex="-1"></a>tabla7 </span>
<span id="cb1025-36"><a href="análisis-de-datos-con-r.html#cb1025-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-37"><a href="análisis-de-datos-con-r.html#cb1025-37" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Como se diferencian estas tablas? </span></span>
<span id="cb1025-38"><a href="análisis-de-datos-con-r.html#cb1025-38" aria-hidden="true" tabindex="-1"></a>tabla4</span>
<span id="cb1025-39"><a href="análisis-de-datos-con-r.html#cb1025-39" aria-hidden="true" tabindex="-1"></a>tabla5 <span class="co"># por fila</span></span>
<span id="cb1025-40"><a href="análisis-de-datos-con-r.html#cb1025-40" aria-hidden="true" tabindex="-1"></a>tabla6 <span class="co"># por la columna</span></span>
<span id="cb1025-41"><a href="análisis-de-datos-con-r.html#cb1025-41" aria-hidden="true" tabindex="-1"></a>tabla7 <span class="co"># agrega dos totales</span></span>
<span id="cb1025-42"><a href="análisis-de-datos-con-r.html#cb1025-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-43"><a href="análisis-de-datos-con-r.html#cb1025-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos titulos </span></span>
<span id="cb1025-44"><a href="análisis-de-datos-con-r.html#cb1025-44" aria-hidden="true" tabindex="-1"></a>tabla8 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>                                 </span>
<span id="cb1025-45"><a href="análisis-de-datos-con-r.html#cb1025-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat, gender) <span class="sc">%&gt;%</span>                  </span>
<span id="cb1025-46"><a href="análisis-de-datos-con-r.html#cb1025-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>            </span>
<span id="cb1025-47"><a href="análisis-de-datos-con-r.html#cb1025-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="at">denominator =</span> <span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># </span></span>
<span id="cb1025-48"><a href="análisis-de-datos-con-r.html#cb1025-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span>        </span>
<span id="cb1025-49"><a href="análisis-de-datos-con-r.html#cb1025-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>(<span class="at">position =</span> <span class="st">&quot;rear&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># front para colocar parentesis en %        </span></span>
<span id="cb1025-50"><a href="análisis-de-datos-con-r.html#cb1025-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>(                     <span class="co"># Agregar titulos            </span></span>
<span id="cb1025-51"><a href="análisis-de-datos-con-r.html#cb1025-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_name =</span> <span class="st">&quot;Cat. edad&quot;</span>,</span>
<span id="cb1025-52"><a href="análisis-de-datos-con-r.html#cb1025-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_name =</span> <span class="st">&quot;Genero&quot;</span>)</span>
<span id="cb1025-53"><a href="análisis-de-datos-con-r.html#cb1025-53" aria-hidden="true" tabindex="-1"></a>tabla8</span>
<span id="cb1025-54"><a href="análisis-de-datos-con-r.html#cb1025-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-55"><a href="análisis-de-datos-con-r.html#cb1025-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportamos tablas utilizando `rio` y `here`. </span></span>
<span id="cb1025-56"><a href="análisis-de-datos-con-r.html#cb1025-56" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(tabla4,tabla5,tabla6,tabla7,tabla8)</span>
<span id="cb1025-57"><a href="análisis-de-datos-con-r.html#cb1025-57" aria-hidden="true" tabindex="-1"></a>lista</span>
<span id="cb1025-58"><a href="análisis-de-datos-con-r.html#cb1025-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-59"><a href="análisis-de-datos-con-r.html#cb1025-59" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb1025-60"><a href="análisis-de-datos-con-r.html#cb1025-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">export</span>(lista[i],<span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, <span class="st">&quot;ejercicio1&quot;</span>, </span>
<span id="cb1025-61"><a href="análisis-de-datos-con-r.html#cb1025-61" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">paste</span>(<span class="st">&quot;tabla&quot;</span>,i <span class="sc">+</span> <span class="dv">3</span>,<span class="st">&quot;.xlsx&quot;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)))</span>
<span id="cb1025-62"><a href="análisis-de-datos-con-r.html#cb1025-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1025-63"><a href="análisis-de-datos-con-r.html#cb1025-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-64"><a href="análisis-de-datos-con-r.html#cb1025-64" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(flextable)</span>
<span id="cb1025-65"><a href="análisis-de-datos-con-r.html#cb1025-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1025-66"><a href="análisis-de-datos-con-r.html#cb1025-66" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportamos la tabla directamente desde flextable</span></span>
<span id="cb1025-67"><a href="análisis-de-datos-con-r.html#cb1025-67" aria-hidden="true" tabindex="-1"></a>tabla8_imagen_word <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span></span>
<span id="cb1025-68"><a href="análisis-de-datos-con-r.html#cb1025-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(age_cat, gender) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-69"><a href="análisis-de-datos-con-r.html#cb1025-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="at">where =</span> <span class="st">&quot;col&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-70"><a href="análisis-de-datos-con-r.html#cb1025-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="at">denominator =</span> <span class="st">&quot;col&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-71"><a href="análisis-de-datos-con-r.html#cb1025-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-72"><a href="análisis-de-datos-con-r.html#cb1025-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>(<span class="at">position =</span> <span class="st">&quot;front&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-73"><a href="análisis-de-datos-con-r.html#cb1025-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>(</span>
<span id="cb1025-74"><a href="análisis-de-datos-con-r.html#cb1025-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">row_name =</span> <span class="st">&quot;Categoria Edad&quot;</span>,</span>
<span id="cb1025-75"><a href="análisis-de-datos-con-r.html#cb1025-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_name =</span> <span class="st">&quot;Genero&quot;</span>,</span>
<span id="cb1025-76"><a href="análisis-de-datos-con-r.html#cb1025-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">placement =</span> <span class="st">&quot;combined&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1025-77"><a href="análisis-de-datos-con-r.html#cb1025-77" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">%&gt;%</span>                  </span>
<span id="cb1025-78"><a href="análisis-de-datos-con-r.html#cb1025-78" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>() <span class="sc">%&gt;%</span>                       </span>
<span id="cb1025-79"><a href="análisis-de-datos-con-r.html#cb1025-79" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">save_as_docx</span>(<span class="at">path =</span> <span class="st">&quot;tabla8_imagen.docx&quot;</span>)  </span></code></pre></div>
</div>
</div>
<div id="estadística-descriptiva-con-dplyr" class="section level3 hasAnchor" number="8.6.4">
<h3><span class="header-section-number">8.6.4</span> Estadística descriptiva con “dplyr”<a href="análisis-de-datos-con-r.html#estadística-descriptiva-con-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ahora vamos a volver a utilizar los verbos del paquete “dplyr” que vimos
la sección anterior. Vamos a generar las mismas cosas, pero de otra
forma.</p>
<p>Frecuencias:</p>
<div class="sourceCode" id="cb1026"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1026-1"><a href="análisis-de-datos-con-r.html#cb1026-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Removemos todo, menos datos </span></span>
<span id="cb1026-2"><a href="análisis-de-datos-con-r.html#cb1026-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()[<span class="sc">!</span> <span class="fu">ls</span>() <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;datos&quot;</span>)])</span>
<span id="cb1026-3"><a href="análisis-de-datos-con-r.html#cb1026-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1026-4"><a href="análisis-de-datos-con-r.html#cb1026-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. ¿Cuál es el total de datos?</span></span>
<span id="cb1026-5"><a href="análisis-de-datos-con-r.html#cb1026-5" aria-hidden="true" tabindex="-1"></a>tabla1 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>                 </span>
<span id="cb1026-6"><a href="análisis-de-datos-con-r.html#cb1026-6" aria-hidden="true" tabindex="-1"></a>          <span class="fu">summarise</span>(<span class="at">n_rows =</span> <span class="fu">n</span>())   </span>
<span id="cb1026-7"><a href="análisis-de-datos-con-r.html#cb1026-7" aria-hidden="true" tabindex="-1"></a>tabla1 </span>
<span id="cb1026-8"><a href="análisis-de-datos-con-r.html#cb1026-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1026-9"><a href="análisis-de-datos-con-r.html#cb1026-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. ¿Cuál es el total por categorías de edad? (con group_by y con summarize)?</span></span>
<span id="cb1026-10"><a href="análisis-de-datos-con-r.html#cb1026-10" aria-hidden="true" tabindex="-1"></a>tabla2 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1026-11"><a href="análisis-de-datos-con-r.html#cb1026-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age_cat) <span class="sc">%&gt;%</span>     </span>
<span id="cb1026-12"><a href="análisis-de-datos-con-r.html#cb1026-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_rows =</span> <span class="fu">n</span>())   </span>
<span id="cb1026-13"><a href="análisis-de-datos-con-r.html#cb1026-13" aria-hidden="true" tabindex="-1"></a>tabla2 </span>
<span id="cb1026-14"><a href="análisis-de-datos-con-r.html#cb1026-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1026-15"><a href="análisis-de-datos-con-r.html#cb1026-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. ¿Cuál es el total por categorías de edad (con count)?</span></span>
<span id="cb1026-16"><a href="análisis-de-datos-con-r.html#cb1026-16" aria-hidden="true" tabindex="-1"></a>tabla3 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1026-17"><a href="análisis-de-datos-con-r.html#cb1026-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(age_cat)</span>
<span id="cb1026-18"><a href="análisis-de-datos-con-r.html#cb1026-18" aria-hidden="true" tabindex="-1"></a>tabla3 </span>
<span id="cb1026-19"><a href="análisis-de-datos-con-r.html#cb1026-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1026-20"><a href="análisis-de-datos-con-r.html#cb1026-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. ¿Cuál es el total por categorías de edad y outcome (con count)?</span></span>
<span id="cb1026-21"><a href="análisis-de-datos-con-r.html#cb1026-21" aria-hidden="true" tabindex="-1"></a>tabla4 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1026-22"><a href="análisis-de-datos-con-r.html#cb1026-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat, outcome)</span>
<span id="cb1026-23"><a href="análisis-de-datos-con-r.html#cb1026-23" aria-hidden="true" tabindex="-1"></a>tabla4 </span>
<span id="cb1026-24"><a href="análisis-de-datos-con-r.html#cb1026-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1026-25"><a href="análisis-de-datos-con-r.html#cb1026-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Equivalente con group_by()</span></span>
<span id="cb1026-26"><a href="análisis-de-datos-con-r.html#cb1026-26" aria-hidden="true" tabindex="-1"></a>tabla4a <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1026-27"><a href="análisis-de-datos-con-r.html#cb1026-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(age_cat, outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1026-28"><a href="análisis-de-datos-con-r.html#cb1026-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_rows =</span> <span class="fu">n</span>())</span>
<span id="cb1026-29"><a href="análisis-de-datos-con-r.html#cb1026-29" aria-hidden="true" tabindex="-1"></a>tabla4a</span></code></pre></div>
<p>Porcentajes:</p>
<div class="sourceCode" id="cb1027"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1027-1"><a href="análisis-de-datos-con-r.html#cb1027-1" aria-hidden="true" tabindex="-1"></a>tabla5 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1027-2"><a href="análisis-de-datos-con-r.html#cb1027-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(outcome, age_cat) <span class="sc">%&gt;%</span>                     </span>
<span id="cb1027-3"><a href="análisis-de-datos-con-r.html#cb1027-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(                            </span>
<span id="cb1027-4"><a href="análisis-de-datos-con-r.html#cb1027-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n))<span class="sc">*</span><span class="dv">100</span>) </span>
<span id="cb1027-5"><a href="análisis-de-datos-con-r.html#cb1027-5" aria-hidden="true" tabindex="-1"></a>tabla5</span>
<span id="cb1027-6"><a href="análisis-de-datos-con-r.html#cb1027-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1027-7"><a href="análisis-de-datos-con-r.html#cb1027-7" aria-hidden="true" tabindex="-1"></a>tabla6 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>                  </span>
<span id="cb1027-8"><a href="análisis-de-datos-con-r.html#cb1027-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span>                          </span>
<span id="cb1027-9"><a href="análisis-de-datos-con-r.html#cb1027-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat) <span class="sc">%&gt;%</span>                            </span>
<span id="cb1027-10"><a href="análisis-de-datos-con-r.html#cb1027-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> (n <span class="sc">/</span> <span class="fu">sum</span>(n)<span class="sc">*</span><span class="dv">100</span>)) </span>
<span id="cb1027-11"><a href="análisis-de-datos-con-r.html#cb1027-11" aria-hidden="true" tabindex="-1"></a>tabla6 </span></code></pre></div>
<p>Resumen:</p>
<div class="sourceCode" id="cb1028"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1028-1"><a href="análisis-de-datos-con-r.html#cb1028-1" aria-hidden="true" tabindex="-1"></a>tabla7 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>         <span class="co"># armamos la tabla como un nuevo objeto</span></span>
<span id="cb1028-2"><a href="análisis-de-datos-con-r.html#cb1028-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hospital) <span class="sc">%&gt;%</span>    <span class="co"># agrupamos todos los cálculos por hospital</span></span>
<span id="cb1028-3"><a href="análisis-de-datos-con-r.html#cb1028-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(                <span class="co"># generamos la estadística que nos interesa</span></span>
<span id="cb1028-4"><a href="análisis-de-datos-con-r.html#cb1028-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cases       =</span> <span class="fu">n</span>(),      <span class="co"># número de observaciones por grupo</span></span>
<span id="cb1028-5"><a href="análisis-de-datos-con-r.html#cb1028-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay_max   =</span> <span class="fu">max</span>(days_onset_hosp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),  <span class="co"># maximo retraso</span></span>
<span id="cb1028-6"><a href="análisis-de-datos-con-r.html#cb1028-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay_mean  =</span> <span class="fu">round</span>(<span class="fu">mean</span>(days_onset_hosp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">1</span>),  <span class="co"># retraso promedio</span></span>
<span id="cb1028-7"><a href="análisis-de-datos-con-r.html#cb1028-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay_sd    =</span> <span class="fu">round</span>(<span class="fu">sd</span>(days_onset_hosp, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">digits =</span> <span class="dv">1</span>),  <span class="co"># desviacion estandar retraso</span></span>
<span id="cb1028-8"><a href="análisis-de-datos-con-r.html#cb1028-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay_3     =</span> <span class="fu">sum</span>(days_onset_hosp <span class="sc">&gt;=</span> <span class="dv">3</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),   <span class="co"># número de hospitales on retrasos mayores a tres dias</span></span>
<span id="cb1028-9"><a href="análisis-de-datos-con-r.html#cb1028-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_delay_3 =</span> (delay_3 <span class="sc">/</span> cases))                    <span class="co"># porcentaje de lo anterior </span></span>
<span id="cb1028-10"><a href="análisis-de-datos-con-r.html#cb1028-10" aria-hidden="true" tabindex="-1"></a>tabla7</span></code></pre></div>
<p>Estadísticas condicionales:</p>
<div class="sourceCode" id="cb1029"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1029-1"><a href="análisis-de-datos-con-r.html#cb1029-1" aria-hidden="true" tabindex="-1"></a>tabla8 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1029-2"><a href="análisis-de-datos-con-r.html#cb1029-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hospital) <span class="sc">%&gt;%</span> </span>
<span id="cb1029-3"><a href="análisis-de-datos-con-r.html#cb1029-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1029-4"><a href="análisis-de-datos-con-r.html#cb1029-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_temp_fvr =</span> <span class="fu">max</span>(temp[fever <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1029-5"><a href="análisis-de-datos-con-r.html#cb1029-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_temp_no =</span> <span class="fu">max</span>(temp[fever <span class="sc">==</span> <span class="st">&quot;no&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1029-6"><a href="análisis-de-datos-con-r.html#cb1029-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1029-7"><a href="análisis-de-datos-con-r.html#cb1029-7" aria-hidden="true" tabindex="-1"></a>tabla8</span>
<span id="cb1029-8"><a href="análisis-de-datos-con-r.html#cb1029-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1029-9"><a href="análisis-de-datos-con-r.html#cb1029-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Cuál es la temperatura promedio para los pacientes que tuvieron fiebre y para los que no?</span></span>
<span id="cb1029-10"><a href="análisis-de-datos-con-r.html#cb1029-10" aria-hidden="true" tabindex="-1"></a>tabla9 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1029-11"><a href="análisis-de-datos-con-r.html#cb1029-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hospital) <span class="sc">%&gt;%</span> </span>
<span id="cb1029-12"><a href="análisis-de-datos-con-r.html#cb1029-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1029-13"><a href="análisis-de-datos-con-r.html#cb1029-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">promedio_temp_fvr =</span> <span class="fu">mean</span>(temp[fever <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1029-14"><a href="análisis-de-datos-con-r.html#cb1029-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">promedio_temp_no =</span> <span class="fu">mean</span>(temp[fever <span class="sc">==</span> <span class="st">&quot;no&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1029-15"><a href="análisis-de-datos-con-r.html#cb1029-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1029-16"><a href="análisis-de-datos-con-r.html#cb1029-16" aria-hidden="true" tabindex="-1"></a>tabla9</span></code></pre></div>
<p>Percentiles:</p>
<div class="sourceCode" id="cb1030"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1030-1"><a href="análisis-de-datos-con-r.html#cb1030-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Percentiles por defecto de la variable edad (0%, 25%, 50%, 75%, 100%). </span></span>
<span id="cb1030-2"><a href="análisis-de-datos-con-r.html#cb1030-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Usamos la función `quantile()`. </span></span>
<span id="cb1030-3"><a href="análisis-de-datos-con-r.html#cb1030-3" aria-hidden="true" tabindex="-1"></a>tabla10 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1030-4"><a href="análisis-de-datos-con-r.html#cb1030-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">percentiles_edad =</span> <span class="fu">quantile</span>(age_years, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb1030-5"><a href="análisis-de-datos-con-r.html#cb1030-5" aria-hidden="true" tabindex="-1"></a>tabla10</span>
<span id="cb1030-6"><a href="análisis-de-datos-con-r.html#cb1030-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1030-7"><a href="análisis-de-datos-con-r.html#cb1030-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregarlos manualmente</span></span>
<span id="cb1030-8"><a href="análisis-de-datos-con-r.html#cb1030-8" aria-hidden="true" tabindex="-1"></a>tabla11 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1030-9"><a href="análisis-de-datos-con-r.html#cb1030-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1030-10"><a href="análisis-de-datos-con-r.html#cb1030-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">percentiles_edad =</span> <span class="fu">quantile</span>(</span>
<span id="cb1030-11"><a href="análisis-de-datos-con-r.html#cb1030-11" aria-hidden="true" tabindex="-1"></a>      age_years,</span>
<span id="cb1030-12"><a href="análisis-de-datos-con-r.html#cb1030-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">probs =</span> <span class="fu">c</span>(.<span class="dv">05</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.98</span>), </span>
<span id="cb1030-13"><a href="análisis-de-datos-con-r.html#cb1030-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb1030-14"><a href="análisis-de-datos-con-r.html#cb1030-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1030-15"><a href="análisis-de-datos-con-r.html#cb1030-15" aria-hidden="true" tabindex="-1"></a>tabla11 </span>
<span id="cb1030-16"><a href="análisis-de-datos-con-r.html#cb1030-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1030-17"><a href="análisis-de-datos-con-r.html#cb1030-17" aria-hidden="true" tabindex="-1"></a><span class="co"># También los podemos calcular combinando con otro verbos y mas especifico</span></span>
<span id="cb1030-18"><a href="análisis-de-datos-con-r.html#cb1030-18" aria-hidden="true" tabindex="-1"></a>tabla12 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1030-19"><a href="análisis-de-datos-con-r.html#cb1030-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hospital,outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1030-20"><a href="análisis-de-datos-con-r.html#cb1030-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1030-21"><a href="análisis-de-datos-con-r.html#cb1030-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">p05 =</span> <span class="fu">quantile</span>(age_years, <span class="at">probs =</span> <span class="fl">0.05</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb1030-22"><a href="análisis-de-datos-con-r.html#cb1030-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">p50 =</span> <span class="fu">quantile</span>(age_years, <span class="at">probs =</span> <span class="fl">0.5</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb1030-23"><a href="análisis-de-datos-con-r.html#cb1030-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">p75 =</span> <span class="fu">quantile</span>(age_years, <span class="at">probs =</span> <span class="fl">0.75</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb1030-24"><a href="análisis-de-datos-con-r.html#cb1030-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">p98 =</span> <span class="fu">quantile</span>(age_years, <span class="at">probs =</span> <span class="fl">0.98</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb1030-25"><a href="análisis-de-datos-con-r.html#cb1030-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1030-26"><a href="análisis-de-datos-con-r.html#cb1030-26" aria-hidden="true" tabindex="-1"></a>tabla12</span>
<span id="cb1030-27"><a href="análisis-de-datos-con-r.html#cb1030-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1030-28"><a href="análisis-de-datos-con-r.html#cb1030-28" aria-hidden="true" tabindex="-1"></a><span class="co"># También podemos hacerlo utilizando `get_summary_stats()`</span></span>
<span id="cb1030-29"><a href="análisis-de-datos-con-r.html#cb1030-29" aria-hidden="true" tabindex="-1"></a>tabla13 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1030-30"><a href="análisis-de-datos-con-r.html#cb1030-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hospital) <span class="sc">%&gt;%</span> </span>
<span id="cb1030-31"><a href="análisis-de-datos-con-r.html#cb1030-31" aria-hidden="true" tabindex="-1"></a>  rstatix<span class="sc">::</span><span class="fu">get_summary_stats</span>(age, <span class="at">type =</span> <span class="st">&quot;quantile&quot;</span>)</span>
<span id="cb1030-32"><a href="análisis-de-datos-con-r.html#cb1030-32" aria-hidden="true" tabindex="-1"></a>tabla13 </span></code></pre></div>
<p>Resumir datos agregados:</p>
<div class="sourceCode" id="cb1031"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1031-1"><a href="análisis-de-datos-con-r.html#cb1031-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contamos y quitamos los NA</span></span>
<span id="cb1031-2"><a href="análisis-de-datos-con-r.html#cb1031-2" aria-hidden="true" tabindex="-1"></a>tabla14 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1031-3"><a href="análisis-de-datos-con-r.html#cb1031-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(gender, outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1031-4"><a href="análisis-de-datos-con-r.html#cb1031-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(outcome, gender)</span>
<span id="cb1031-5"><a href="análisis-de-datos-con-r.html#cb1031-5" aria-hidden="true" tabindex="-1"></a>tabla14</span>
<span id="cb1031-6"><a href="análisis-de-datos-con-r.html#cb1031-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-7"><a href="análisis-de-datos-con-r.html#cb1031-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Contamos por grupos y con condiciones. </span></span>
<span id="cb1031-8"><a href="análisis-de-datos-con-r.html#cb1031-8" aria-hidden="true" tabindex="-1"></a>tabla15 <span class="ot">&lt;-</span> tabla14 <span class="sc">%&gt;%</span> </span>
<span id="cb1031-9"><a href="análisis-de-datos-con-r.html#cb1031-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1031-10"><a href="análisis-de-datos-con-r.html#cb1031-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1031-11"><a href="análisis-de-datos-con-r.html#cb1031-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_cases  =</span> <span class="fu">sum</span>(n, <span class="at">na.rm=</span>T),</span>
<span id="cb1031-12"><a href="análisis-de-datos-con-r.html#cb1031-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">male_cases   =</span> <span class="fu">sum</span>(n[gender <span class="sc">==</span> <span class="st">&quot;m&quot;</span>], <span class="at">na.rm=</span>T),</span>
<span id="cb1031-13"><a href="análisis-de-datos-con-r.html#cb1031-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">female_cases =</span> <span class="fu">sum</span>(n[gender <span class="sc">==</span> <span class="st">&quot;f&quot;</span>], <span class="at">na.rm=</span>T))</span>
<span id="cb1031-14"><a href="análisis-de-datos-con-r.html#cb1031-14" aria-hidden="true" tabindex="-1"></a>tabla15</span>
<span id="cb1031-15"><a href="análisis-de-datos-con-r.html#cb1031-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-16"><a href="análisis-de-datos-con-r.html#cb1031-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Hacer lo mismo, pero para mas grupos y variables</span></span>
<span id="cb1031-17"><a href="análisis-de-datos-con-r.html#cb1031-17" aria-hidden="true" tabindex="-1"></a>tabla16 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1031-18"><a href="análisis-de-datos-con-r.html#cb1031-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1031-19"><a href="análisis-de-datos-con-r.html#cb1031-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="at">.cols =</span> <span class="fu">c</span>(age_years, temp, wt_kg, ht_cm),  <span class="co"># columnas</span></span>
<span id="cb1031-20"><a href="análisis-de-datos-con-r.html#cb1031-20" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.fns =</span> mean,                               <span class="co"># funcion</span></span>
<span id="cb1031-21"><a href="análisis-de-datos-con-r.html#cb1031-21" aria-hidden="true" tabindex="-1"></a>                   <span class="at">na.rm =</span> <span class="cn">TRUE</span>))                             <span class="co"># opciones</span></span>
<span id="cb1031-22"><a href="análisis-de-datos-con-r.html#cb1031-22" aria-hidden="true" tabindex="-1"></a>tabla16</span>
<span id="cb1031-23"><a href="análisis-de-datos-con-r.html#cb1031-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-24"><a href="análisis-de-datos-con-r.html#cb1031-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Para todas las variables numéricas </span></span>
<span id="cb1031-25"><a href="análisis-de-datos-con-r.html#cb1031-25" aria-hidden="true" tabindex="-1"></a>tabla17 <span class="ot">&lt;-</span></span>
<span id="cb1031-26"><a href="análisis-de-datos-con-r.html#cb1031-26" aria-hidden="true" tabindex="-1"></a>  datos <span class="sc">%&gt;%</span> </span>
<span id="cb1031-27"><a href="análisis-de-datos-con-r.html#cb1031-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span> </span>
<span id="cb1031-28"><a href="análisis-de-datos-con-r.html#cb1031-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb1031-29"><a href="análisis-de-datos-con-r.html#cb1031-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">where</span>(is.numeric), </span>
<span id="cb1031-30"><a href="análisis-de-datos-con-r.html#cb1031-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> mean,</span>
<span id="cb1031-31"><a href="análisis-de-datos-con-r.html#cb1031-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm=</span>T))</span>
<span id="cb1031-32"><a href="análisis-de-datos-con-r.html#cb1031-32" aria-hidden="true" tabindex="-1"></a>tabla17 </span>
<span id="cb1031-33"><a href="análisis-de-datos-con-r.html#cb1031-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-34"><a href="análisis-de-datos-con-r.html#cb1031-34" aria-hidden="true" tabindex="-1"></a><span class="co"># De long a wide</span></span>
<span id="cb1031-35"><a href="análisis-de-datos-con-r.html#cb1031-35" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(scales)</span>
<span id="cb1031-36"><a href="análisis-de-datos-con-r.html#cb1031-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-37"><a href="análisis-de-datos-con-r.html#cb1031-37" aria-hidden="true" tabindex="-1"></a>tabla18 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span>                  </span>
<span id="cb1031-38"><a href="análisis-de-datos-con-r.html#cb1031-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span>                         </span>
<span id="cb1031-39"><a href="análisis-de-datos-con-r.html#cb1031-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age_cat) <span class="sc">%&gt;%</span>                            </span>
<span id="cb1031-40"><a href="análisis-de-datos-con-r.html#cb1031-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent =</span> scales<span class="sc">::</span><span class="fu">percent</span>(n <span class="sc">/</span> <span class="fu">sum</span>(n))) </span>
<span id="cb1031-41"><a href="análisis-de-datos-con-r.html#cb1031-41" aria-hidden="true" tabindex="-1"></a>tabla18 </span>
<span id="cb1031-42"><a href="análisis-de-datos-con-r.html#cb1031-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-43"><a href="análisis-de-datos-con-r.html#cb1031-43" aria-hidden="true" tabindex="-1"></a><span class="co"># La tabla esta en formato long! </span></span>
<span id="cb1031-44"><a href="análisis-de-datos-con-r.html#cb1031-44" aria-hidden="true" tabindex="-1"></a>tabla19 <span class="ot">&lt;-</span> tabla18 <span class="sc">%&gt;%</span>  </span>
<span id="cb1031-45"><a href="análisis-de-datos-con-r.html#cb1031-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>percent) <span class="sc">%&gt;%</span>   <span class="co"># no quiero porcentaje</span></span>
<span id="cb1031-46"><a href="análisis-de-datos-con-r.html#cb1031-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> age_cat, </span>
<span id="cb1031-47"><a href="análisis-de-datos-con-r.html#cb1031-47" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n)  </span>
<span id="cb1031-48"><a href="análisis-de-datos-con-r.html#cb1031-48" aria-hidden="true" tabindex="-1"></a>tabla19</span>
<span id="cb1031-49"><a href="análisis-de-datos-con-r.html#cb1031-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-50"><a href="análisis-de-datos-con-r.html#cb1031-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla con totales</span></span>
<span id="cb1031-51"><a href="análisis-de-datos-con-r.html#cb1031-51" aria-hidden="true" tabindex="-1"></a>tabla20 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1031-52"><a href="análisis-de-datos-con-r.html#cb1031-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span></span>
<span id="cb1031-53"><a href="análisis-de-datos-con-r.html#cb1031-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1031-54"><a href="análisis-de-datos-con-r.html#cb1031-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">known_outcome =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(outcome)),           <span class="co"># Número de filas del grupo en las que no falta el resultado</span></span>
<span id="cb1031-55"><a href="análisis-de-datos-con-r.html#cb1031-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_death  =</span> <span class="fu">sum</span>(outcome <span class="sc">==</span> <span class="st">&quot;Death&quot;</span>, <span class="at">na.rm=</span>T),    <span class="co"># Número de filas en el grupo donde el resultado es Muerte</span></span>
<span id="cb1031-56"><a href="análisis-de-datos-con-r.html#cb1031-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_recover =</span> <span class="fu">sum</span>(outcome <span class="sc">==</span> <span class="st">&quot;Recover&quot;</span>, <span class="at">na.rm=</span>T), <span class="co"># Número de filas del grupo cuyo resultado es Recuperado</span></span>
<span id="cb1031-57"><a href="análisis-de-datos-con-r.html#cb1031-57" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1031-58"><a href="análisis-de-datos-con-r.html#cb1031-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>() <span class="sc">%&gt;%</span>                                <span class="co"># Adornar la fila total (suma de cada columna numérica)</span></span>
<span id="cb1031-59"><a href="análisis-de-datos-con-r.html#cb1031-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">&quot;row&quot;</span>) <span class="sc">%&gt;%</span>                      <span class="co"># Proporciones</span></span>
<span id="cb1031-60"><a href="análisis-de-datos-con-r.html#cb1031-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">%&gt;%</span>                        <span class="co"># porcetnaje</span></span>
<span id="cb1031-61"><a href="análisis-de-datos-con-r.html#cb1031-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>(<span class="at">position =</span> <span class="st">&quot;rear&quot;</span>)                      <span class="co"># ()</span></span>
<span id="cb1031-62"><a href="análisis-de-datos-con-r.html#cb1031-62" aria-hidden="true" tabindex="-1"></a>tabla20 </span>
<span id="cb1031-63"><a href="análisis-de-datos-con-r.html#cb1031-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-64"><a href="análisis-de-datos-con-r.html#cb1031-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportamos todas las tablas </span></span>
<span id="cb1031-65"><a href="análisis-de-datos-con-r.html#cb1031-65" aria-hidden="true" tabindex="-1"></a>lista_tablas <span class="ot">&lt;-</span> <span class="fu">list</span>(tabla1,tabla2,tabla3,tabla4,tabla5,</span>
<span id="cb1031-66"><a href="análisis-de-datos-con-r.html#cb1031-66" aria-hidden="true" tabindex="-1"></a>                     tabla6,tabla7,tabla8,tabla9,tabla10,</span>
<span id="cb1031-67"><a href="análisis-de-datos-con-r.html#cb1031-67" aria-hidden="true" tabindex="-1"></a>                     tabla11,tabla12,tabla13,tabla14,tabla15,</span>
<span id="cb1031-68"><a href="análisis-de-datos-con-r.html#cb1031-68" aria-hidden="true" tabindex="-1"></a>                     tabla16,tabla17,tabla18,tabla19,tabla20)</span>
<span id="cb1031-69"><a href="análisis-de-datos-con-r.html#cb1031-69" aria-hidden="true" tabindex="-1"></a>lista_tablas</span>
<span id="cb1031-70"><a href="análisis-de-datos-con-r.html#cb1031-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1031-71"><a href="análisis-de-datos-con-r.html#cb1031-71" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>){</span>
<span id="cb1031-72"><a href="análisis-de-datos-con-r.html#cb1031-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">export</span>(lista_tablas[i],<span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>, <span class="st">&quot;ejercicio2&quot;</span>, </span>
<span id="cb1031-73"><a href="análisis-de-datos-con-r.html#cb1031-73" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">paste</span>(<span class="st">&quot;tabla&quot;</span>,i,<span class="st">&quot;.xlsx&quot;</span>,<span class="at">sep=</span><span class="st">&quot;&quot;</span>)))</span>
<span id="cb1031-74"><a href="análisis-de-datos-con-r.html#cb1031-74" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Juntar tablas:</p>
<div class="sourceCode" id="cb1032"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1032-1"><a href="análisis-de-datos-con-r.html#cb1032-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Algunas estadísticas por hospital y outcome</span></span>
<span id="cb1032-2"><a href="análisis-de-datos-con-r.html#cb1032-2" aria-hidden="true" tabindex="-1"></a>tabla21 <span class="ot">&lt;-</span>datos <span class="sc">%&gt;%</span> </span>
<span id="cb1032-3"><a href="análisis-de-datos-con-r.html#cb1032-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(outcome) <span class="sc">&amp;</span> hospital <span class="sc">!=</span> <span class="st">&quot;Missing&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># Dejo todo lo que no sea missing</span></span>
<span id="cb1032-4"><a href="análisis-de-datos-con-r.html#cb1032-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(hospital, outcome) <span class="sc">%&gt;%</span>                      <span class="co"># agrupo por hospital y outcome</span></span>
<span id="cb1032-5"><a href="análisis-de-datos-con-r.html#cb1032-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(                                            </span>
<span id="cb1032-6"><a href="análisis-de-datos-con-r.html#cb1032-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>(),                                                 </span>
<span id="cb1032-7"><a href="análisis-de-datos-con-r.html#cb1032-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ct_value =</span> <span class="fu">median</span>(ct_blood, <span class="at">na.rm=</span>T))               </span>
<span id="cb1032-8"><a href="análisis-de-datos-con-r.html#cb1032-8" aria-hidden="true" tabindex="-1"></a>tabla21</span>
<span id="cb1032-9"><a href="análisis-de-datos-con-r.html#cb1032-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-10"><a href="análisis-de-datos-con-r.html#cb1032-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Algunas estadísticas solo por outcome </span></span>
<span id="cb1032-11"><a href="análisis-de-datos-con-r.html#cb1032-11" aria-hidden="true" tabindex="-1"></a>tabla22 <span class="ot">&lt;-</span> datos <span class="sc">%&gt;%</span> </span>
<span id="cb1032-12"><a href="análisis-de-datos-con-r.html#cb1032-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(outcome) <span class="sc">&amp;</span> hospital <span class="sc">!=</span> <span class="st">&quot;Missing&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1032-13"><a href="análisis-de-datos-con-r.html#cb1032-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(outcome) <span class="sc">%&gt;%</span>                            <span class="co"># Ahora agrupo solo por outcome, no hospital    </span></span>
<span id="cb1032-14"><a href="análisis-de-datos-con-r.html#cb1032-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1032-15"><a href="análisis-de-datos-con-r.html#cb1032-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>(),                                       <span class="co"># Estadisticas solo por outcome    </span></span>
<span id="cb1032-16"><a href="análisis-de-datos-con-r.html#cb1032-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">ct_value =</span> <span class="fu">median</span>(ct_blood, <span class="at">na.rm=</span>T))</span>
<span id="cb1032-17"><a href="análisis-de-datos-con-r.html#cb1032-17" aria-hidden="true" tabindex="-1"></a>tabla22</span>
<span id="cb1032-18"><a href="análisis-de-datos-con-r.html#cb1032-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-19"><a href="análisis-de-datos-con-r.html#cb1032-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Juntando </span></span>
<span id="cb1032-20"><a href="análisis-de-datos-con-r.html#cb1032-20" aria-hidden="true" tabindex="-1"></a>table_long <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(tabla21, tabla22) <span class="sc">%&gt;%</span> </span>
<span id="cb1032-21"><a href="análisis-de-datos-con-r.html#cb1032-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hospital =</span> <span class="fu">replace_na</span>(hospital, <span class="st">&quot;Total&quot;</span>))</span>
<span id="cb1032-22"><a href="análisis-de-datos-con-r.html#cb1032-22" aria-hidden="true" tabindex="-1"></a>table_long</span>
<span id="cb1032-23"><a href="análisis-de-datos-con-r.html#cb1032-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1032-24"><a href="análisis-de-datos-con-r.html#cb1032-24" aria-hidden="true" tabindex="-1"></a><span class="co"># A formato long y a exportar </span></span>
<span id="cb1032-25"><a href="análisis-de-datos-con-r.html#cb1032-25" aria-hidden="true" tabindex="-1"></a>table_long <span class="sc">%&gt;%</span> </span>
<span id="cb1032-26"><a href="análisis-de-datos-con-r.html#cb1032-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hospital =</span> <span class="fu">replace_na</span>(hospital, <span class="st">&quot;Total&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1032-27"><a href="análisis-de-datos-con-r.html#cb1032-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(                                         <span class="co"># de largo a ancho</span></span>
<span id="cb1032-28"><a href="análisis-de-datos-con-r.html#cb1032-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="fu">c</span>(ct_value, N),                       <span class="co"># cambio valores</span></span>
<span id="cb1032-29"><a href="análisis-de-datos-con-r.html#cb1032-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> outcome) <span class="sc">%&gt;%</span>                           <span class="co"># cambio columnas</span></span>
<span id="cb1032-30"><a href="análisis-de-datos-con-r.html#cb1032-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(                                              <span class="co"># agrego nuevas columnas</span></span>
<span id="cb1032-31"><a href="análisis-de-datos-con-r.html#cb1032-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">N_Known =</span> N_Death <span class="sc">+</span> N_Recover,                               <span class="co"># numero total</span></span>
<span id="cb1032-32"><a href="análisis-de-datos-con-r.html#cb1032-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">Pct_Death =</span> scales<span class="sc">::</span><span class="fu">percent</span>(N_Death <span class="sc">/</span> N_Known, <span class="fl">0.1</span>),         <span class="co"># % casos que murieron</span></span>
<span id="cb1032-33"><a href="análisis-de-datos-con-r.html#cb1032-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Pct_Recover =</span> scales<span class="sc">::</span><span class="fu">percent</span>(N_Recover <span class="sc">/</span> N_Known, <span class="fl">0.1</span>)) <span class="sc">%&gt;%</span> <span class="co"># % casos recuperados</span></span>
<span id="cb1032-34"><a href="análisis-de-datos-con-r.html#cb1032-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(                                              <span class="co"># reordeno columnas</span></span>
<span id="cb1032-35"><a href="análisis-de-datos-con-r.html#cb1032-35" aria-hidden="true" tabindex="-1"></a>    hospital, N_Known,                                   <span class="co"># totales</span></span>
<span id="cb1032-36"><a href="análisis-de-datos-con-r.html#cb1032-36" aria-hidden="true" tabindex="-1"></a>    N_Recover, Pct_Recover, ct_value_Recover,            <span class="co"># recuperado</span></span>
<span id="cb1032-37"><a href="análisis-de-datos-con-r.html#cb1032-37" aria-hidden="true" tabindex="-1"></a>    N_Death, Pct_Death, ct_value_Death)  <span class="sc">%&gt;%</span>             <span class="co"># muertes</span></span>
<span id="cb1032-38"><a href="análisis-de-datos-con-r.html#cb1032-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(N_Known)  <span class="sc">%&gt;%</span>                                  <span class="co"># Ordeno </span></span>
<span id="cb1032-39"><a href="análisis-de-datos-con-r.html#cb1032-39" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">flextable</span>() <span class="sc">%&gt;%</span>                     <span class="co"># a imagen</span></span>
<span id="cb1032-40"><a href="análisis-de-datos-con-r.html#cb1032-40" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">autofit</span>() <span class="sc">%&gt;%</span>                       <span class="co"># una linea por fila </span></span>
<span id="cb1032-41"><a href="análisis-de-datos-con-r.html#cb1032-41" aria-hidden="true" tabindex="-1"></a>  flextable<span class="sc">::</span><span class="fu">save_as_docx</span>(<span class="at">path =</span> <span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>,<span class="st">&quot;ejercicio2&quot;</span>,<span class="st">&quot;tablefinal.docx&quot;</span>))  <span class="co"># exporto</span></span></code></pre></div>
</div>
</div>
<div id="visualización" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Visualización<a href="análisis-de-datos-con-r.html#visualización" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="visualización-r-base" class="section level3 hasAnchor" number="8.7.1">
<h3><span class="header-section-number">8.7.1</span> Visualización: R base<a href="análisis-de-datos-con-r.html#visualización-r-base" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vamos a hacer graficos unicamente utilizando R básico.</p>
<div id="plot" class="section level4 hasAnchor" number="8.7.1.1">
<h4><span class="header-section-number">8.7.1.1</span> Plot<a href="análisis-de-datos-con-r.html#plot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1033"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1033-1"><a href="análisis-de-datos-con-r.html#cb1033-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para visualizar datos </span></span>
<span id="cb1033-2"><a href="análisis-de-datos-con-r.html#cb1033-2" aria-hidden="true" tabindex="-1"></a>altura <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">168</span>, <span class="dv">177</span>, <span class="dv">177</span>, <span class="dv">177</span>, <span class="dv">178</span>, <span class="dv">172</span>, <span class="dv">165</span>, <span class="dv">171</span>, <span class="dv">178</span>, <span class="dv">170</span>)</span>
<span id="cb1033-3"><a href="análisis-de-datos-con-r.html#cb1033-3" aria-hidden="true" tabindex="-1"></a>peso <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">88</span>, <span class="dv">72</span>, <span class="dv">85</span>, <span class="dv">52</span>, <span class="dv">71</span>, <span class="dv">69</span>, <span class="dv">61</span>, <span class="dv">61</span>, <span class="dv">51</span>, <span class="dv">75</span>)</span>
<span id="cb1033-4"><a href="análisis-de-datos-con-r.html#cb1033-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1033-5"><a href="análisis-de-datos-con-r.html#cb1033-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico simple </span></span>
<span id="cb1033-6"><a href="análisis-de-datos-con-r.html#cb1033-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(altura,</span>
<span id="cb1033-7"><a href="análisis-de-datos-con-r.html#cb1033-7" aria-hidden="true" tabindex="-1"></a>     peso, </span>
<span id="cb1033-8"><a href="análisis-de-datos-con-r.html#cb1033-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Peso (kg)&quot;</span>, </span>
<span id="cb1033-9"><a href="análisis-de-datos-con-r.html#cb1033-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Altura (cm)&quot;</span>)</span>
<span id="cb1033-10"><a href="análisis-de-datos-con-r.html#cb1033-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1033-11"><a href="análisis-de-datos-con-r.html#cb1033-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora lo vamos a exportar</span></span>
<span id="cb1033-12"><a href="análisis-de-datos-con-r.html#cb1033-12" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="fu">here</span>(<span class="st">&quot;figuras&quot;</span>))</span>
<span id="cb1033-13"><a href="análisis-de-datos-con-r.html#cb1033-13" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">&quot;g1.pdf&quot;</span>)</span>
<span id="cb1033-14"><a href="análisis-de-datos-con-r.html#cb1033-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(altura,peso)</span>
<span id="cb1033-15"><a href="análisis-de-datos-con-r.html#cb1033-15" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb1033-16"><a href="análisis-de-datos-con-r.html#cb1033-16" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(altura,peso)</span></code></pre></div>
</div>
<div id="histograma-2" class="section level4 hasAnchor" number="8.7.1.2">
<h4><span class="header-section-number">8.7.1.2</span> Histograma<a href="análisis-de-datos-con-r.html#histograma-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1034"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1034-1"><a href="análisis-de-datos-con-r.html#cb1034-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Buscar ayuda: </span></span>
<span id="cb1034-2"><a href="análisis-de-datos-con-r.html#cb1034-2" aria-hidden="true" tabindex="-1"></a>?<span class="fu">hist</span>()</span>
<span id="cb1034-3"><a href="análisis-de-datos-con-r.html#cb1034-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-4"><a href="análisis-de-datos-con-r.html#cb1034-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Implementarla </span></span>
<span id="cb1034-5"><a href="análisis-de-datos-con-r.html#cb1034-5" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">hist</span>(wage,</span>
<span id="cb1034-6"><a href="análisis-de-datos-con-r.html#cb1034-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="dv">20</span>,   <span class="co"># número de intervalos</span></span>
<span id="cb1034-7"><a href="análisis-de-datos-con-r.html#cb1034-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Distribución del Salario (dólares por hora)&quot;</span>,    <span class="co"># título del gráfico</span></span>
<span id="cb1034-8"><a href="análisis-de-datos-con-r.html#cb1034-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">&quot;Salario&quot;</span>,                                        <span class="co"># título del eje x</span></span>
<span id="cb1034-9"><a href="análisis-de-datos-con-r.html#cb1034-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&quot;Número de personas&quot;</span>                              <span class="co"># título del eje y</span></span>
<span id="cb1034-10"><a href="análisis-de-datos-con-r.html#cb1034-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1034-11"><a href="análisis-de-datos-con-r.html#cb1034-11" aria-hidden="true" tabindex="-1"></a>g2</span>
<span id="cb1034-12"><a href="análisis-de-datos-con-r.html#cb1034-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-13"><a href="análisis-de-datos-con-r.html#cb1034-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos agregar colores</span></span>
<span id="cb1034-14"><a href="análisis-de-datos-con-r.html#cb1034-14" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">hist</span>(wage,</span>
<span id="cb1034-15"><a href="análisis-de-datos-con-r.html#cb1034-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>,   <span class="co"># n?mero de intervalos</span></span>
<span id="cb1034-16"><a href="análisis-de-datos-con-r.html#cb1034-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Distribución del Salario (dólares por hora)&quot;</span>,    <span class="co"># título del gráfico</span></span>
<span id="cb1034-17"><a href="análisis-de-datos-con-r.html#cb1034-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Salario&quot;</span>,                                        <span class="co"># título del eje x</span></span>
<span id="cb1034-18"><a href="análisis-de-datos-con-r.html#cb1034-18" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Numero de personas&quot;</span>,                              <span class="co"># título del eje y</span></span>
<span id="cb1034-19"><a href="análisis-de-datos-con-r.html#cb1034-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;pink&quot;</span></span>
<span id="cb1034-20"><a href="análisis-de-datos-con-r.html#cb1034-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1034-21"><a href="análisis-de-datos-con-r.html#cb1034-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-22"><a href="análisis-de-datos-con-r.html#cb1034-22" aria-hidden="true" tabindex="-1"></a>g2</span>
<span id="cb1034-23"><a href="análisis-de-datos-con-r.html#cb1034-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-24"><a href="análisis-de-datos-con-r.html#cb1034-24" aria-hidden="true" tabindex="-1"></a><span class="co"># También podemos agregar límites en los ejes</span></span>
<span id="cb1034-25"><a href="análisis-de-datos-con-r.html#cb1034-25" aria-hidden="true" tabindex="-1"></a>g2 <span class="ot">&lt;-</span> <span class="fu">hist</span>(wage,</span>
<span id="cb1034-26"><a href="análisis-de-datos-con-r.html#cb1034-26" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>,   <span class="co"># número de intervalos</span></span>
<span id="cb1034-27"><a href="análisis-de-datos-con-r.html#cb1034-27" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Distribución del Salario (dólares por hora)&quot;</span>,    </span>
<span id="cb1034-28"><a href="análisis-de-datos-con-r.html#cb1034-28" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Salario&quot;</span>,                                        </span>
<span id="cb1034-29"><a href="análisis-de-datos-con-r.html#cb1034-29" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Número de personas&quot;</span>,                              </span>
<span id="cb1034-30"><a href="análisis-de-datos-con-r.html#cb1034-30" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span><span class="st">&quot;pink&quot;</span>,</span>
<span id="cb1034-31"><a href="análisis-de-datos-con-r.html#cb1034-31" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">50</span>),<span class="co"># Límites del histograma</span></span>
<span id="cb1034-32"><a href="análisis-de-datos-con-r.html#cb1034-32" aria-hidden="true" tabindex="-1"></a>     <span class="at">freq =</span> <span class="cn">TRUE</span> <span class="co">#TRUE = freq. absoluta, FALSE: relativa. </span></span>
<span id="cb1034-33"><a href="análisis-de-datos-con-r.html#cb1034-33" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1034-34"><a href="análisis-de-datos-con-r.html#cb1034-34" aria-hidden="true" tabindex="-1"></a>g2</span>
<span id="cb1034-35"><a href="análisis-de-datos-con-r.html#cb1034-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-36"><a href="análisis-de-datos-con-r.html#cb1034-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-37"><a href="análisis-de-datos-con-r.html#cb1034-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos hacer lo mismo, pero  agregar la distribución empirica</span></span>
<span id="cb1034-38"><a href="análisis-de-datos-con-r.html#cb1034-38" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">&quot;g3.pdf&quot;</span>)</span>
<span id="cb1034-39"><a href="análisis-de-datos-con-r.html#cb1034-39" aria-hidden="true" tabindex="-1"></a>g3 <span class="ot">&lt;-</span> <span class="fu">hist</span>(wage,</span>
<span id="cb1034-40"><a href="análisis-de-datos-con-r.html#cb1034-40" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="dv">20</span>,   <span class="co"># número de intervalos</span></span>
<span id="cb1034-41"><a href="análisis-de-datos-con-r.html#cb1034-41" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Distribución del Salario (dólares por hora)&quot;</span>,    </span>
<span id="cb1034-42"><a href="análisis-de-datos-con-r.html#cb1034-42" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Salario&quot;</span>,                                        </span>
<span id="cb1034-43"><a href="análisis-de-datos-con-r.html#cb1034-43" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Número de personas&quot;</span>,                              </span>
<span id="cb1034-44"><a href="análisis-de-datos-con-r.html#cb1034-44" aria-hidden="true" tabindex="-1"></a>     <span class="at">col=</span><span class="st">&quot;pink&quot;</span>,</span>
<span id="cb1034-45"><a href="análisis-de-datos-con-r.html#cb1034-45" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">30</span>),</span>
<span id="cb1034-46"><a href="análisis-de-datos-con-r.html#cb1034-46" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">12</span>), <span class="co"># Límites del histograma</span></span>
<span id="cb1034-47"><a href="análisis-de-datos-con-r.html#cb1034-47" aria-hidden="true" tabindex="-1"></a>     <span class="at">freq =</span> <span class="cn">FALSE</span>, <span class="co">#TRUE = freq. absoluta, FALSE: relativa. </span></span>
<span id="cb1034-48"><a href="análisis-de-datos-con-r.html#cb1034-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1034-49"><a href="análisis-de-datos-con-r.html#cb1034-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-50"><a href="análisis-de-datos-con-r.html#cb1034-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1034-51"><a href="análisis-de-datos-con-r.html#cb1034-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Agrego la distribución empirica de los datos </span></span>
<span id="cb1034-52"><a href="análisis-de-datos-con-r.html#cb1034-52" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(wage), <span class="at">col=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>)  </span></code></pre></div>
<p>Opciones:</p>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1035-1"><a href="análisis-de-datos-con-r.html#cb1035-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lwd = line width</span></span>
<span id="cb1035-2"><a href="análisis-de-datos-con-r.html#cb1035-2" aria-hidden="true" tabindex="-1"></a><span class="co"># col = color</span></span>
<span id="cb1035-3"><a href="análisis-de-datos-con-r.html#cb1035-3" aria-hidden="true" tabindex="-1"></a><span class="co"># lty = line type</span></span>
<span id="cb1035-4"><a href="análisis-de-datos-con-r.html#cb1035-4" aria-hidden="true" tabindex="-1"></a><span class="co"># opciones de lty (0 = blank,  1 = solid (default), </span></span>
<span id="cb1035-5"><a href="análisis-de-datos-con-r.html#cb1035-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                              2 = dashed, 3 = dotted, </span></span>
<span id="cb1035-6"><a href="análisis-de-datos-con-r.html#cb1035-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                              4 = dotdash, 5 = longdash, </span></span>
<span id="cb1035-7"><a href="análisis-de-datos-con-r.html#cb1035-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                              6 = twodash) </span></span>
<span id="cb1035-8"><a href="análisis-de-datos-con-r.html#cb1035-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1035-9"><a href="análisis-de-datos-con-r.html#cb1035-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar más de una distribución </span></span>
<span id="cb1035-10"><a href="análisis-de-datos-con-r.html#cb1035-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(wage, <span class="at">adjust=</span><span class="dv">2</span>), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">lty=</span><span class="dv">2</span>) <span class="co"># adjust=2 lo que hace es suavizar un poco la curva </span></span>
<span id="cb1035-11"><a href="análisis-de-datos-con-r.html#cb1035-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1035-12"><a href="análisis-de-datos-con-r.html#cb1035-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregar el promedio y la mediana </span></span>
<span id="cb1035-13"><a href="análisis-de-datos-con-r.html#cb1035-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1035-14"><a href="análisis-de-datos-con-r.html#cb1035-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Promedio </span></span>
<span id="cb1035-15"><a href="análisis-de-datos-con-r.html#cb1035-15" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(wage), </span>
<span id="cb1035-16"><a href="análisis-de-datos-con-r.html#cb1035-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb1035-17"><a href="análisis-de-datos-con-r.html#cb1035-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="dv">3</span>, </span>
<span id="cb1035-18"><a href="análisis-de-datos-con-r.html#cb1035-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span><span class="st">&quot;darkgreen&quot;</span>)</span>
<span id="cb1035-19"><a href="análisis-de-datos-con-r.html#cb1035-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1035-20"><a href="análisis-de-datos-con-r.html#cb1035-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Mediana </span></span>
<span id="cb1035-21"><a href="análisis-de-datos-con-r.html#cb1035-21" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">median</span>(wage), </span>
<span id="cb1035-22"><a href="análisis-de-datos-con-r.html#cb1035-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb1035-23"><a href="análisis-de-datos-con-r.html#cb1035-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">lty =</span> <span class="dv">3</span>, </span>
<span id="cb1035-24"><a href="análisis-de-datos-con-r.html#cb1035-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span><span class="st">&quot;darkblue&quot;</span>)    </span>
<span id="cb1035-25"><a href="análisis-de-datos-con-r.html#cb1035-25" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb1035-26"><a href="análisis-de-datos-con-r.html#cb1035-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1035-27"><a href="análisis-de-datos-con-r.html#cb1035-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que solo hemos utilizado paquetes básicos de R.</span></span>
<span id="cb1035-28"><a href="análisis-de-datos-con-r.html#cb1035-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, podemos exportar el gráfico a la carpeta.</span></span></code></pre></div>
</div>
<div id="gráfico-de-dispersión" class="section level4 hasAnchor" number="8.7.1.3">
<h4><span class="header-section-number">8.7.1.3</span> Gráfico de dispersión<a href="análisis-de-datos-con-r.html#gráfico-de-dispersión" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1036"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1036-1"><a href="análisis-de-datos-con-r.html#cb1036-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Básico </span></span>
<span id="cb1036-2"><a href="análisis-de-datos-con-r.html#cb1036-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb1036-3"><a href="análisis-de-datos-con-r.html#cb1036-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(experience, wage)</span>
<span id="cb1036-4"><a href="análisis-de-datos-con-r.html#cb1036-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(wage<span class="sc">~</span>experience)</span>
<span id="cb1036-5"><a href="análisis-de-datos-con-r.html#cb1036-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-6"><a href="análisis-de-datos-con-r.html#cb1036-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Mejorando la presentación </span></span>
<span id="cb1036-7"><a href="análisis-de-datos-con-r.html#cb1036-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span> (wage <span class="sc">~</span> experience,  </span>
<span id="cb1036-8"><a href="análisis-de-datos-con-r.html#cb1036-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Salario en función de la experiencia&quot;</span>,</span>
<span id="cb1036-9"><a href="análisis-de-datos-con-r.html#cb1036-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">&quot;Experiencia (en años)&quot;</span>,</span>
<span id="cb1036-10"><a href="análisis-de-datos-con-r.html#cb1036-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&quot;Salario&quot;</span></span>
<span id="cb1036-11"><a href="análisis-de-datos-con-r.html#cb1036-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1036-12"><a href="análisis-de-datos-con-r.html#cb1036-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-13"><a href="análisis-de-datos-con-r.html#cb1036-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos agrupar </span></span>
<span id="cb1036-14"><a href="análisis-de-datos-con-r.html#cb1036-14" aria-hidden="true" tabindex="-1"></a>CPS1985 <span class="ot">&lt;-</span> CPS1985 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">sexo =</span> <span class="fu">as.numeric</span>(gender))</span>
<span id="cb1036-15"><a href="análisis-de-datos-con-r.html#cb1036-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-16"><a href="análisis-de-datos-con-r.html#cb1036-16" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">&quot;g4.pdf&quot;</span>)</span>
<span id="cb1036-17"><a href="análisis-de-datos-con-r.html#cb1036-17" aria-hidden="true" tabindex="-1"></a>g4 <span class="ot">&lt;-</span> <span class="fu">plot</span> (wage <span class="sc">~</span> experience, </span>
<span id="cb1036-18"><a href="análisis-de-datos-con-r.html#cb1036-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> CPS1985, </span>
<span id="cb1036-19"><a href="análisis-de-datos-con-r.html#cb1036-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">pch =</span> sexo, <span class="co">#Diferente simbolo dependiendo del género</span></span>
<span id="cb1036-20"><a href="análisis-de-datos-con-r.html#cb1036-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> sexo,  <span class="co">#Color diferenciado por género</span></span>
<span id="cb1036-21"><a href="análisis-de-datos-con-r.html#cb1036-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Salario en función de la experiencia&quot;</span>,</span>
<span id="cb1036-22"><a href="análisis-de-datos-con-r.html#cb1036-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">&quot;Experiencia (en años)&quot;</span>,</span>
<span id="cb1036-23"><a href="análisis-de-datos-con-r.html#cb1036-23" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&quot;Salario&quot;</span></span>
<span id="cb1036-24"><a href="análisis-de-datos-con-r.html#cb1036-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1036-25"><a href="análisis-de-datos-con-r.html#cb1036-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-26"><a href="análisis-de-datos-con-r.html#cb1036-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos Leyenda </span></span>
<span id="cb1036-27"><a href="análisis-de-datos-con-r.html#cb1036-27" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>, </span>
<span id="cb1036-28"><a href="análisis-de-datos-con-r.html#cb1036-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend=</span><span class="fu">c</span>(<span class="st">&quot;Hombres&quot;</span>,<span class="st">&quot;Mujeres&quot;</span>), </span>
<span id="cb1036-29"><a href="análisis-de-datos-con-r.html#cb1036-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">pch=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, </span>
<span id="cb1036-30"><a href="análisis-de-datos-con-r.html#cb1036-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">col=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,</span>
<span id="cb1036-31"><a href="análisis-de-datos-con-r.html#cb1036-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">bty=</span><span class="st">&quot;n&quot;</span>) <span class="co">#Caja de la leyenda</span></span>
<span id="cb1036-32"><a href="análisis-de-datos-con-r.html#cb1036-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-33"><a href="análisis-de-datos-con-r.html#cb1036-33" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topleft&quot;</span>, <span class="at">legend=</span><span class="fu">c</span>(<span class="st">&quot;Hombres&quot;</span>,<span class="st">&quot;Mujeres&quot;</span>), <span class="at">pch=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">col=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb1036-34"><a href="análisis-de-datos-con-r.html#cb1036-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-35"><a href="análisis-de-datos-con-r.html#cb1036-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos una regresión </span></span>
<span id="cb1036-36"><a href="análisis-de-datos-con-r.html#cb1036-36" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(CPS1985[gender<span class="sc">==</span><span class="st">&quot;male&quot;</span>,], </span>
<span id="cb1036-37"><a href="análisis-de-datos-con-r.html#cb1036-37" aria-hidden="true" tabindex="-1"></a>     <span class="fu">abline</span>(<span class="fu">lm</span>(wage<span class="sc">~</span>experience), <span class="at">col=</span><span class="st">&quot;black&quot;</span>))</span>
<span id="cb1036-38"><a href="análisis-de-datos-con-r.html#cb1036-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1036-39"><a href="análisis-de-datos-con-r.html#cb1036-39" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(CPS1985[gender<span class="sc">==</span><span class="st">&quot;female&quot;</span>,], </span>
<span id="cb1036-40"><a href="análisis-de-datos-con-r.html#cb1036-40" aria-hidden="true" tabindex="-1"></a>     <span class="fu">abline</span>(<span class="fu">lm</span>(wage<span class="sc">~</span>experience), <span class="at">col=</span><span class="st">&quot;red&quot;</span>))</span>
<span id="cb1036-41"><a href="análisis-de-datos-con-r.html#cb1036-41" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="gráfico-de-barras" class="section level4 hasAnchor" number="8.7.1.4">
<h4><span class="header-section-number">8.7.1.4</span> Gráfico de barras<a href="análisis-de-datos-con-r.html#gráfico-de-barras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1037"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1037-1"><a href="análisis-de-datos-con-r.html#cb1037-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Primero tenemos que crear las frecuencias </span></span>
<span id="cb1037-2"><a href="análisis-de-datos-con-r.html#cb1037-2" aria-hidden="true" tabindex="-1"></a>frecuencias <span class="ot">&lt;-</span> <span class="fu">table</span>(occupation)  <span class="co"># con variable categórica</span></span>
<span id="cb1037-3"><a href="análisis-de-datos-con-r.html#cb1037-3" aria-hidden="true" tabindex="-1"></a>frecuencias</span>
<span id="cb1037-4"><a href="análisis-de-datos-con-r.html#cb1037-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1037-5"><a href="análisis-de-datos-con-r.html#cb1037-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Básico</span></span>
<span id="cb1037-6"><a href="análisis-de-datos-con-r.html#cb1037-6" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(frecuencias,</span>
<span id="cb1037-7"><a href="análisis-de-datos-con-r.html#cb1037-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb1037-8"><a href="análisis-de-datos-con-r.html#cb1037-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1037-9"><a href="análisis-de-datos-con-r.html#cb1037-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1037-10"><a href="análisis-de-datos-con-r.html#cb1037-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora con educación </span></span>
<span id="cb1037-11"><a href="análisis-de-datos-con-r.html#cb1037-11" aria-hidden="true" tabindex="-1"></a>educacion <span class="ot">&lt;-</span> <span class="fu">table</span>(education)</span>
<span id="cb1037-12"><a href="análisis-de-datos-con-r.html#cb1037-12" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">&quot;g5.pdf&quot;</span>)</span>
<span id="cb1037-13"><a href="análisis-de-datos-con-r.html#cb1037-13" aria-hidden="true" tabindex="-1"></a>g5 <span class="ot">&lt;-</span>  <span class="fu">barplot</span>(educacion,</span>
<span id="cb1037-14"><a href="análisis-de-datos-con-r.html#cb1037-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">dim</span>(educacion),  <span class="co"># para establecer el número de diferentes colores  (=diferentes valores)</span></span>
<span id="cb1037-15"><a href="análisis-de-datos-con-r.html#cb1037-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">horiz =</span> <span class="cn">FALSE</span>,            <span class="co"># orientación de las barras</span></span>
<span id="cb1037-16"><a href="análisis-de-datos-con-r.html#cb1037-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">250</span>)</span>
<span id="cb1037-17"><a href="análisis-de-datos-con-r.html#cb1037-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1037-18"><a href="análisis-de-datos-con-r.html#cb1037-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1037-19"><a href="análisis-de-datos-con-r.html#cb1037-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Agregamos un título</span></span>
<span id="cb1037-20"><a href="análisis-de-datos-con-r.html#cb1037-20" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;Distribución de la educación&quot;</span>, </span>
<span id="cb1037-21"><a href="análisis-de-datos-con-r.html#cb1037-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab=</span> <span class="st">&quot;Educación (en años)&quot;</span>, </span>
<span id="cb1037-22"><a href="análisis-de-datos-con-r.html#cb1037-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">&quot;Número de personas&quot;</span>)</span>
<span id="cb1037-23"><a href="análisis-de-datos-con-r.html#cb1037-23" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="gráfico-de-torta" class="section level4 hasAnchor" number="8.7.1.5">
<h4><span class="header-section-number">8.7.1.5</span> Gráfico de torta<a href="análisis-de-datos-con-r.html#gráfico-de-torta" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1038"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1038-1"><a href="análisis-de-datos-con-r.html#cb1038-1" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">table</span>(ethnicity)</span>
<span id="cb1038-2"><a href="análisis-de-datos-con-r.html#cb1038-2" aria-hidden="true" tabindex="-1"></a>datos</span>
<span id="cb1038-3"><a href="análisis-de-datos-con-r.html#cb1038-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pie</span>(datos, </span>
<span id="cb1038-4"><a href="análisis-de-datos-con-r.html#cb1038-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Caucasicos&quot;</span>, <span class="st">&quot;Hispanos&quot;</span>, <span class="st">&quot;Otros&quot;</span>), </span>
<span id="cb1038-5"><a href="análisis-de-datos-con-r.html#cb1038-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">heat.colors</span>(<span class="dv">3</span>),</span>
<span id="cb1038-6"><a href="análisis-de-datos-con-r.html#cb1038-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">main =</span> <span class="st">&quot;Frecuencia de etnias&quot;</span>,</span>
<span id="cb1038-7"><a href="análisis-de-datos-con-r.html#cb1038-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">clockwise =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1038-8"><a href="análisis-de-datos-con-r.html#cb1038-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1038-9"><a href="análisis-de-datos-con-r.html#cb1038-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Podemos cambiar los colores </span></span>
<span id="cb1038-10"><a href="análisis-de-datos-con-r.html#cb1038-10" aria-hidden="true" tabindex="-1"></a>colores<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;darkred&quot;</span>,<span class="st">&quot;pink&quot;</span>,<span class="st">&quot;red&quot;</span>)</span>
<span id="cb1038-11"><a href="análisis-de-datos-con-r.html#cb1038-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1038-12"><a href="análisis-de-datos-con-r.html#cb1038-12" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">&quot;g6.pdf&quot;</span>)</span>
<span id="cb1038-13"><a href="análisis-de-datos-con-r.html#cb1038-13" aria-hidden="true" tabindex="-1"></a>g6 <span class="ot">&lt;-</span> <span class="fu">pie</span>(datos, </span>
<span id="cb1038-14"><a href="análisis-de-datos-con-r.html#cb1038-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">levels</span>(ethnicity), </span>
<span id="cb1038-15"><a href="análisis-de-datos-con-r.html#cb1038-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> colores,</span>
<span id="cb1038-16"><a href="análisis-de-datos-con-r.html#cb1038-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="st">&quot;Frecuencia etnias&quot;</span>)</span>
<span id="cb1038-17"><a href="análisis-de-datos-con-r.html#cb1038-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
</div>
<div id="boxplot" class="section level4 hasAnchor" number="8.7.1.6">
<h4><span class="header-section-number">8.7.1.6</span> Boxplot<a href="análisis-de-datos-con-r.html#boxplot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Algunas cosas que tener en cuenta sobre un boxplot:</p>
<ol style="list-style-type: decimal">
<li>Se le llama grafico de caja y bigote.</li>
<li>Primer quartil (1): borde inferior de la caja.</li>
<li>Mediana: Linea de al medio de la caja.</li>
<li>Tercer quartil: Borde superior de la caja.</li>
<li>Rango intercuartil: Diferencia entre el tercer cuartil y el primero.</li>
</ol>
<p>Sobre el gráfico:</p>
<ol style="list-style-type: decimal">
<li>Caja más grande implica que los datos están mas dispersos.</li>
<li>Tamaño de la caja es el rango intercuartil.</li>
<li>Si la mediana esta al centro, la distribución es simétrica.</li>
<li>¿Que pasa si la parte superior (sobre la linea) es más grande? Los
datos se concentran en la parte baja de la distribución.</li>
<li>Los bigotes determinan el límite para valores atípicos.Su longitud
máxima es de un 150% del Rango intercuartil (RIC).</li>
</ol>
<div class="sourceCode" id="cb1039"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1039-1"><a href="análisis-de-datos-con-r.html#cb1039-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span>
<span id="cb1039-2"><a href="análisis-de-datos-con-r.html#cb1039-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(wage,</span>
<span id="cb1039-3"><a href="análisis-de-datos-con-r.html#cb1039-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">main =</span> <span class="st">&quot;Salario (dólares por hora)&quot;</span>,</span>
<span id="cb1039-4"><a href="análisis-de-datos-con-r.html#cb1039-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">ylab =</span> <span class="st">&quot;Salario&quot;</span>,</span>
<span id="cb1039-5"><a href="análisis-de-datos-con-r.html#cb1039-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">col =</span> <span class="st">&quot;pink&quot;</span>,</span>
<span id="cb1039-6"><a href="análisis-de-datos-con-r.html#cb1039-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">border =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb1039-7"><a href="análisis-de-datos-con-r.html#cb1039-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1039-8"><a href="análisis-de-datos-con-r.html#cb1039-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Separando por sexo</span></span>
<span id="cb1039-9"><a href="análisis-de-datos-con-r.html#cb1039-9" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(wage <span class="sc">~</span> gender,</span>
<span id="cb1039-10"><a href="análisis-de-datos-con-r.html#cb1039-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Salario (dólares por hora) según sexo&quot;</span>,</span>
<span id="cb1039-11"><a href="análisis-de-datos-con-r.html#cb1039-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Salario&quot;</span>,</span>
<span id="cb1039-12"><a href="análisis-de-datos-con-r.html#cb1039-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;pink&quot;</span>,<span class="st">&quot;darkgreen&quot;</span>),</span>
<span id="cb1039-13"><a href="análisis-de-datos-con-r.html#cb1039-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="st">&quot;black&quot;</span>)</span>
<span id="cb1039-14"><a href="análisis-de-datos-con-r.html#cb1039-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1039-15"><a href="análisis-de-datos-con-r.html#cb1039-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1039-16"><a href="análisis-de-datos-con-r.html#cb1039-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Horizontal</span></span>
<span id="cb1039-17"><a href="análisis-de-datos-con-r.html#cb1039-17" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(wage <span class="sc">~</span> gender,</span>
<span id="cb1039-18"><a href="análisis-de-datos-con-r.html#cb1039-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Salario (dólares por hora) según sexo&quot;</span>,</span>
<span id="cb1039-19"><a href="análisis-de-datos-con-r.html#cb1039-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Salario&quot;</span>,</span>
<span id="cb1039-20"><a href="análisis-de-datos-con-r.html#cb1039-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">names =</span> <span class="fu">c</span>(<span class="st">&quot;Hombres&quot;</span>,<span class="st">&quot;Mujeres&quot;</span>),    <span class="co">#Cambiar nombres</span></span>
<span id="cb1039-21"><a href="análisis-de-datos-con-r.html#cb1039-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">horizontal =</span> T,                    <span class="co">#Posición horizontal</span></span>
<span id="cb1039-22"><a href="análisis-de-datos-con-r.html#cb1039-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">rainbow</span>(<span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.8</span>),       <span class="co">#Paleta rainbow (aleatoria) y transparencia (alpha)</span></span>
<span id="cb1039-23"><a href="análisis-de-datos-con-r.html#cb1039-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="st">&quot;black&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="uso-paquete-ggplot" class="section level3 hasAnchor" number="8.7.2">
<h3><span class="header-section-number">8.7.2</span> Uso paquete ggplot<a href="análisis-de-datos-con-r.html#uso-paquete-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ahora vamos a utilizar un paquete avanzado de visualización. Primero,
algunos aspectos relacionados con la lógica de su uso.</p>
<ol style="list-style-type: decimal">
<li>Utilizar <code>ggplot2</code> es básicamente ir agregando capas. Entre cada
cosa que quiero agregar al gráfico debo colocar un signo <code>+</code>.</li>
<li>La sintaxis básica incluye:</li>
</ol>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Comience con el comando <code>ggplot()</code> de la línea de base, esto
“abre” el ggplot y permite que las funciones subsecuentes sean
agregadas con <code>+</code>. Normalmente el conjunto de datos también se
especifica en este comando.</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Añadir capas “geom”, estas funciones visualizan los datos como
geometrías (formas), por ejemplo, como un gráfico de barras, un
gráfico de líneas, un gráfico de dispersión, un histograma (¡o
una combinación!). Todas estas funciones comienzan con <code>geom_</code>
como prefijo.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Añade elementos de diseño al gráfico, como etiquetas de ejes,
títulos, fuentes, tamaños, esquemas de color, leyendas o
rotación de ejes.</li>
</ol></li>
</ul>
<p>Ejemplo:</p>
<div class="sourceCode" id="cb1040"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1040-1"><a href="análisis-de-datos-con-r.html#cb1040-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="fu">aes</span>(<span class="at">x =</span> experience, <span class="at">y =</span> wage)) <span class="sc">+</span>                               </span>
<span id="cb1040-2"><a href="análisis-de-datos-con-r.html#cb1040-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>( <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span>                          </span>
<span id="cb1040-3"><a href="análisis-de-datos-con-r.html#cb1040-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>()<span class="sc">+</span>                                    </span>
<span id="cb1040-4"><a href="análisis-de-datos-con-r.html#cb1040-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>()  </span></code></pre></div>
<p>Ahora ya entendemos la sintaxis general. Para cambiar de tipo de
gráficos tenemos distintas geometrías.</p>
<div class="sourceCode" id="cb1041"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1041-1"><a href="análisis-de-datos-con-r.html#cb1041-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_point (para puntos)</span></span>
<span id="cb1041-2"><a href="análisis-de-datos-con-r.html#cb1041-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_line (para lineas)</span></span>
<span id="cb1041-3"><a href="análisis-de-datos-con-r.html#cb1041-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_histogram (para histograma)</span></span>
<span id="cb1041-4"><a href="análisis-de-datos-con-r.html#cb1041-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_boxplot (para boxplot)</span></span>
<span id="cb1041-5"><a href="análisis-de-datos-con-r.html#cb1041-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_bar o geom_col() (para barras)</span></span>
<span id="cb1041-6"><a href="análisis-de-datos-con-r.html#cb1041-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_smooth (lineas suavizadas)</span></span></code></pre></div>
<div id="geometrías" class="section level4 hasAnchor" number="8.7.2.1">
<h4><span class="header-section-number">8.7.2.1</span> Geometrías<a href="análisis-de-datos-con-r.html#geometrías" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Otros tienen más sentido con una variable</p>
<div class="sourceCode" id="cb1042"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1042-1"><a href="análisis-de-datos-con-r.html#cb1042-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="fu">aes</span>(<span class="at">x =</span> experience))<span class="sc">+</span>                               </span>
<span id="cb1042-2"><a href="análisis-de-datos-con-r.html#cb1042-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span>                         </span>
<span id="cb1042-3"><a href="análisis-de-datos-con-r.html#cb1042-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>()<span class="sc">+</span>                                   </span>
<span id="cb1042-4"><a href="análisis-de-datos-con-r.html#cb1042-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>() </span>
<span id="cb1042-5"><a href="análisis-de-datos-con-r.html#cb1042-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1042-6"><a href="análisis-de-datos-con-r.html#cb1042-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> experience, <span class="at">y =</span> wage))<span class="sc">+</span>                               </span>
<span id="cb1042-7"><a href="análisis-de-datos-con-r.html#cb1042-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span>                         </span>
<span id="cb1042-8"><a href="análisis-de-datos-con-r.html#cb1042-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>()<span class="sc">+</span>                                   </span>
<span id="cb1042-9"><a href="análisis-de-datos-con-r.html#cb1042-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>() </span></code></pre></div>
</div>
<div id="aesthetics" class="section level4 hasAnchor" number="8.7.2.2">
<h4><span class="header-section-number">8.7.2.2</span> Aesthetics<a href="análisis-de-datos-con-r.html#aesthetics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Otro aspecto importante es lo que se denomina “aesthetics”. Estas son
las características visuales de los datos. En ggplot estos son
modificados dentro de la opción <code>theme()</code>. No todas las geometrías
tienen las mismas opciones. Sin embargo, algunas comunes son:</p>
<ul>
<li><code>shape</code>: Mostrar un punto con <code>geom_point()</code> como punto, estrella,
triángulo o cuadrado.</li>
<li><code>fill</code>: El color interior (por ejemplo, de una barra o boxplot)</li>
<li><code>color</code>: La línea exterior de una barra, boxplot, etc., o el color
del punto si se utiliza <code>geom_point()</code></li>
<li><code>size</code>: Tamaño (por ejemplo, grosor de la línea, tamaño del punto)</li>
<li><code>alpha</code>: Transparencia (1 = opaco, 0 = invisible)</li>
<li><code>binwidtho</code>: Ancho de los bins o cajas del histograma</li>
<li><code>width</code>: Anchura de las columnas del “bar plot”.</li>
<li><code>linetype</code>: Tipo de línea (por ejemplo, sólida, discontinua,
punteada)</li>
</ul>
<p>Los “aesthetics” pueden ser asignados a valores o a vectores.</p>
<p>Ejemplo:</p>
<div class="sourceCode" id="cb1043"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1043-1"><a href="análisis-de-datos-con-r.html#cb1043-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualización de puntos </span></span>
<span id="cb1043-2"><a href="análisis-de-datos-con-r.html#cb1043-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="fu">aes</span>(<span class="at">x =</span> experience, <span class="at">y =</span> wage))<span class="sc">+</span>                               </span>
<span id="cb1043-3"><a href="análisis-de-datos-con-r.html#cb1043-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">&quot;darkgreen&quot;</span>,</span>
<span id="cb1043-4"><a href="análisis-de-datos-con-r.html#cb1043-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">size  =</span> <span class="fl">2.8</span>, </span>
<span id="cb1043-5"><a href="análisis-de-datos-con-r.html#cb1043-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">theme</span>()</span>
<span id="cb1043-6"><a href="análisis-de-datos-con-r.html#cb1043-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1043-7"><a href="análisis-de-datos-con-r.html#cb1043-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma </span></span>
<span id="cb1043-8"><a href="análisis-de-datos-con-r.html#cb1043-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> wage))<span class="sc">+</span>                               </span>
<span id="cb1043-9"><a href="análisis-de-datos-con-r.html#cb1043-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>, </span>
<span id="cb1043-10"><a href="análisis-de-datos-con-r.html#cb1043-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill  =</span> <span class="st">&quot;pink&quot;</span>, </span>
<span id="cb1043-11"><a href="análisis-de-datos-con-r.html#cb1043-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">binwidth =</span> <span class="dv">5</span> , </span>
<span id="cb1043-12"><a href="análisis-de-datos-con-r.html#cb1043-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="dv">1</span>)</span></code></pre></div>
</div>
<div id="escalar-los-valores-o-agrupar" class="section level4 hasAnchor" number="8.7.2.3">
<h4><span class="header-section-number">8.7.2.3</span> Escalar los valores o agrupar<a href="análisis-de-datos-con-r.html#escalar-los-valores-o-agrupar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1044"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1044-1"><a href="análisis-de-datos-con-r.html#cb1044-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos diferenciar alguna variable categorica por color (agrupar)</span></span>
<span id="cb1044-2"><a href="análisis-de-datos-con-r.html#cb1044-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="fu">aes</span>(experience, wage, <span class="at">color =</span> gender)) <span class="sc">+</span> </span>
<span id="cb1044-3"><a href="análisis-de-datos-con-r.html#cb1044-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb1044-4"><a href="análisis-de-datos-con-r.html#cb1044-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1044-5"><a href="análisis-de-datos-con-r.html#cb1044-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Si queremos diferenciar alguna variable continua por tamaño (escalar)</span></span>
<span id="cb1044-6"><a href="análisis-de-datos-con-r.html#cb1044-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(datos, <span class="fu">aes</span>(<span class="at">x =</span> experience,</span>
<span id="cb1044-7"><a href="análisis-de-datos-con-r.html#cb1044-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> wage,</span>
<span id="cb1044-8"><a href="análisis-de-datos-con-r.html#cb1044-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> age)) <span class="sc">+</span> </span>
<span id="cb1044-9"><a href="análisis-de-datos-con-r.html#cb1044-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="st">&quot;circle&quot;</span>,</span>
<span id="cb1044-10"><a href="análisis-de-datos-con-r.html#cb1044-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.3</span>)</span>
<span id="cb1044-11"><a href="análisis-de-datos-con-r.html#cb1044-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1044-12"><a href="análisis-de-datos-con-r.html#cb1044-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Ambos (agrupar y escalar)</span></span>
<span id="cb1044-13"><a href="análisis-de-datos-con-r.html#cb1044-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> datos, </span>
<span id="cb1044-14"><a href="análisis-de-datos-con-r.html#cb1044-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> experience,</span>
<span id="cb1044-15"><a href="análisis-de-datos-con-r.html#cb1044-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> wage,</span>
<span id="cb1044-16"><a href="análisis-de-datos-con-r.html#cb1044-16" aria-hidden="true" tabindex="-1"></a>                     <span class="at">size =</span> age,</span>
<span id="cb1044-17"><a href="análisis-de-datos-con-r.html#cb1044-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> gender)) <span class="sc">+</span> </span>
<span id="cb1044-18"><a href="análisis-de-datos-con-r.html#cb1044-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="st">&quot;circle&quot;</span>,</span>
<span id="cb1044-19"><a href="análisis-de-datos-con-r.html#cb1044-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code></pre></div>
</div>
<div id="equivalencia-sintaxis-ggplot" class="section level4 hasAnchor" number="8.7.2.4">
<h4><span class="header-section-number">8.7.2.4</span> Equivalencia sintaxis ggplot<a href="análisis-de-datos-con-r.html#equivalencia-sintaxis-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1045"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1045-1"><a href="análisis-de-datos-con-r.html#cb1045-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notar que estas tres sintaxis son equivalentes</span></span>
<span id="cb1045-2"><a href="análisis-de-datos-con-r.html#cb1045-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> datos, </span>
<span id="cb1045-3"><a href="análisis-de-datos-con-r.html#cb1045-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age))<span class="sc">+</span></span>
<span id="cb1045-4"><a href="análisis-de-datos-con-r.html#cb1045-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb1045-5"><a href="análisis-de-datos-con-r.html#cb1045-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1045-6"><a href="análisis-de-datos-con-r.html#cb1045-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> datos)<span class="sc">+</span></span>
<span id="cb1045-7"><a href="análisis-de-datos-con-r.html#cb1045-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age))</span>
<span id="cb1045-8"><a href="análisis-de-datos-con-r.html#cb1045-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1045-9"><a href="análisis-de-datos-con-r.html#cb1045-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb1045-10"><a href="análisis-de-datos-con-r.html#cb1045-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">data =</span> datos, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age))</span></code></pre></div>
</div>
<div id="combinar-gráficos" class="section level4 hasAnchor" number="8.7.2.5">
<h4><span class="header-section-number">8.7.2.5</span> Combinar gráficos<a href="análisis-de-datos-con-r.html#combinar-gráficos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>facet_wrap()</code>: Mostrar un panel diferente para cada nivel de una sola
variable. Un ejemplo de esto podría ser mostrar una figura diferente
para cada region de un país. Las facetas se ordenan alfabéticamente, a
menos que la variable sea un factor con otro ordenamiento definido. Por
ejemplo:</p>
<div class="sourceCode" id="cb1046"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1046-1"><a href="análisis-de-datos-con-r.html#cb1046-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos </span></span>
<span id="cb1046-2"><a href="análisis-de-datos-con-r.html#cb1046-2" aria-hidden="true" tabindex="-1"></a>malaria_data <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;malaria_facility_count_data.rds&quot;</span>)) <span class="sc">%&gt;%</span>  </span>
<span id="cb1046-3"><a href="análisis-de-datos-con-r.html#cb1046-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>submitted_date, <span class="sc">-</span>Province, <span class="sc">-</span>newid)                                 </span>
<span id="cb1046-4"><a href="análisis-de-datos-con-r.html#cb1046-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1046-5"><a href="análisis-de-datos-con-r.html#cb1046-5" aria-hidden="true" tabindex="-1"></a><span class="co"># A plot with facets by district</span></span>
<span id="cb1046-6"><a href="análisis-de-datos-con-r.html#cb1046-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(malaria_data, <span class="fu">aes</span>(<span class="at">x =</span> data_date, <span class="at">y =</span> malaria_tot)) <span class="sc">+</span></span>
<span id="cb1046-7"><a href="análisis-de-datos-con-r.html#cb1046-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">&quot;darkred&quot;</span>) <span class="sc">+</span>   <span class="co"># graficamos datos como columnas</span></span>
<span id="cb1046-8"><a href="análisis-de-datos-con-r.html#cb1046-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span>         <span class="co"># simplificamos la parte de atras</span></span>
<span id="cb1046-9"><a href="análisis-de-datos-con-r.html#cb1046-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Fecha&quot;</span>,         <span class="co">#Etiquetas/labels</span></span>
<span id="cb1046-10"><a href="análisis-de-datos-con-r.html#cb1046-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">&quot;Casos de Malaria&quot;</span>,</span>
<span id="cb1046-11"><a href="análisis-de-datos-con-r.html#cb1046-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Casos de Malaria por distrito&quot;</span>) <span class="sc">+</span></span>
<span id="cb1046-12"><a href="análisis-de-datos-con-r.html#cb1046-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>District)   <span class="co"># creamos las facetas</span></span></code></pre></div>
<p><code>facet_grid()</code>: Se utiliza cuando se quiere introducir una segunda
variable en la disposición de las facetas. Aquí cada panel de una
cuadrícula muestra la intersección entre los valores de dos columnas.
Por ejemplo:</p>
<div class="sourceCode" id="cb1047"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1047-1"><a href="análisis-de-datos-con-r.html#cb1047-1" aria-hidden="true" tabindex="-1"></a>malaria_age <span class="ot">&lt;-</span> malaria_data <span class="sc">%&gt;%</span></span>
<span id="cb1047-2"><a href="análisis-de-datos-con-r.html#cb1047-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>malaria_tot) <span class="sc">%&gt;%</span> </span>
<span id="cb1047-3"><a href="análisis-de-datos-con-r.html#cb1047-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb1047-4"><a href="análisis-de-datos-con-r.html#cb1047-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="fu">starts_with</span>(<span class="st">&quot;malaria_rdt_&quot;</span>)),  </span>
<span id="cb1047-5"><a href="análisis-de-datos-con-r.html#cb1047-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;grupo_edad&quot;</span>,      </span>
<span id="cb1047-6"><a href="análisis-de-datos-con-r.html#cb1047-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;num_casos&quot;</span>      </span>
<span id="cb1047-7"><a href="análisis-de-datos-con-r.html#cb1047-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1047-8"><a href="análisis-de-datos-con-r.html#cb1047-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1047-9"><a href="análisis-de-datos-con-r.html#cb1047-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">str_replace</span>(grupo_edad, <span class="st">&quot;malaria_rdt_&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb1047-10"><a href="análisis-de-datos-con-r.html#cb1047-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1047-11"><a href="análisis-de-datos-con-r.html#cb1047-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(malaria_age, <span class="fu">aes</span>(<span class="at">x =</span> data_date, <span class="at">y =</span> num_casos)) <span class="sc">+</span></span>
<span id="cb1047-12"><a href="análisis-de-datos-con-r.html#cb1047-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;darkred&quot;</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1047-13"><a href="análisis-de-datos-con-r.html#cb1047-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb1047-14"><a href="análisis-de-datos-con-r.html#cb1047-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>( </span>
<span id="cb1047-15"><a href="análisis-de-datos-con-r.html#cb1047-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Fechas&quot;</span>,</span>
<span id="cb1047-16"><a href="análisis-de-datos-con-r.html#cb1047-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Casos&quot;</span>,</span>
<span id="cb1047-17"><a href="análisis-de-datos-con-r.html#cb1047-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Casos de Malaria por grupos de edad y distrito&quot;</span>) <span class="sc">+</span></span>
<span id="cb1047-18"><a href="análisis-de-datos-con-r.html#cb1047-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(District <span class="sc">~</span> age_group)</span></code></pre></div>
</div>
<div id="modificar-y-guardar" class="section level4 hasAnchor" number="8.7.2.6">
<h4><span class="header-section-number">8.7.2.6</span> Modificar y guardar<a href="análisis-de-datos-con-r.html#modificar-y-guardar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Modificar graficos: Una cosa muy positiva de <code>ggplot()</code> es que uno puede
definirlo con un nombre y luego ir sobre-escribiendolo. Eso es muy útil
para la sintaxis.</p>
<div class="sourceCode" id="cb1048"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1048-1"><a href="análisis-de-datos-con-r.html#cb1048-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico original </span></span>
<span id="cb1048-2"><a href="análisis-de-datos-con-r.html#cb1048-2" aria-hidden="true" tabindex="-1"></a>histograma <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> datos, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> age))<span class="sc">+</span></span>
<span id="cb1048-3"><a href="análisis-de-datos-con-r.html#cb1048-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">geom_histogram</span>()</span>
<span id="cb1048-4"><a href="análisis-de-datos-con-r.html#cb1048-4" aria-hidden="true" tabindex="-1"></a>histograma</span>
<span id="cb1048-5"><a href="análisis-de-datos-con-r.html#cb1048-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1048-6"><a href="análisis-de-datos-con-r.html#cb1048-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico modificado. </span></span>
<span id="cb1048-7"><a href="análisis-de-datos-con-r.html#cb1048-7" aria-hidden="true" tabindex="-1"></a>histograma_modificado <span class="ot">&lt;-</span> histograma <span class="sc">+</span></span>
<span id="cb1048-8"><a href="análisis-de-datos-con-r.html#cb1048-8" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">50</span>)</span>
<span id="cb1048-9"><a href="análisis-de-datos-con-r.html#cb1048-9" aria-hidden="true" tabindex="-1"></a>histograma_modificado</span>
<span id="cb1048-10"><a href="análisis-de-datos-con-r.html#cb1048-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Noten que solamente hemos agregado la nueva opción sobre el objeto asignado. </span></span>
<span id="cb1048-11"><a href="análisis-de-datos-con-r.html#cb1048-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Muy útil y recomendable para hacer visualizaciones en R. </span></span></code></pre></div>
<p>Exportar gráficos: Para los gráfico que se generen con <code>ggplot()</code> es
posible utilizar la opción <code>ggsave()</code>.</p>
<div class="sourceCode" id="cb1049"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1049-1"><a href="análisis-de-datos-con-r.html#cb1049-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">here</span>(<span class="st">&quot;figuras&quot;</span>, <span class="st">&quot;histograma.pdf&quot;</span>), histograma_modificado)</span></code></pre></div>
</div>
<div id="labels" class="section level4 hasAnchor" number="8.7.2.7">
<h4><span class="header-section-number">8.7.2.7</span> Labels<a href="análisis-de-datos-con-r.html#labels" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1050"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1050-1"><a href="análisis-de-datos-con-r.html#cb1050-1" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb1050-2"><a href="análisis-de-datos-con-r.html#cb1050-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> datos,      <span class="co"># datos</span></span>
<span id="cb1050-3"><a href="análisis-de-datos-con-r.html#cb1050-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(     <span class="co"># ejes</span></span>
<span id="cb1050-4"><a href="análisis-de-datos-con-r.html#cb1050-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> age,                        </span>
<span id="cb1050-5"><a href="análisis-de-datos-con-r.html#cb1050-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> wage,         </span>
<span id="cb1050-6"><a href="análisis-de-datos-con-r.html#cb1050-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> occupation))<span class="sc">+</span>     <span class="co"># agrupo</span></span>
<span id="cb1050-7"><a href="análisis-de-datos-con-r.html#cb1050-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span>               <span class="co"># geometria</span></span>
<span id="cb1050-8"><a href="análisis-de-datos-con-r.html#cb1050-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb1050-9"><a href="análisis-de-datos-con-r.html#cb1050-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Salarios por edad&quot;</span>,</span>
<span id="cb1050-10"><a href="análisis-de-datos-con-r.html#cb1050-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">&quot;Estados Unidos, 1985&quot;</span>,</span>
<span id="cb1050-11"><a href="análisis-de-datos-con-r.html#cb1050-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Edad en años&quot;</span>,</span>
<span id="cb1050-12"><a href="análisis-de-datos-con-r.html#cb1050-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Salario en dólares por hora&quot;</span>,</span>
<span id="cb1050-13"><a href="análisis-de-datos-con-r.html#cb1050-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;Ocupación&quot;</span>,</span>
<span id="cb1050-14"><a href="análisis-de-datos-con-r.html#cb1050-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">&quot;Maxima edad es: {max(datos$age, na.rm=TRUE)}&quot;</span>))</span>
<span id="cb1050-15"><a href="análisis-de-datos-con-r.html#cb1050-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1050-16"><a href="análisis-de-datos-con-r.html#cb1050-16" aria-hidden="true" tabindex="-1"></a>distribucion_salarios</span></code></pre></div>
</div>
<div id="temas" class="section level4 hasAnchor" number="8.7.2.8">
<h4><span class="header-section-number">8.7.2.8</span> Temas<a href="análisis-de-datos-con-r.html#temas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1051"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1051-1"><a href="análisis-de-datos-con-r.html#cb1051-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clasico </span></span>
<span id="cb1051-2"><a href="análisis-de-datos-con-r.html#cb1051-2" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="sc">+</span> <span class="fu">theme_classic</span>()</span>
<span id="cb1051-3"><a href="análisis-de-datos-con-r.html#cb1051-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1051-4"><a href="análisis-de-datos-con-r.html#cb1051-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mínimo </span></span>
<span id="cb1051-5"><a href="análisis-de-datos-con-r.html#cb1051-5" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb1051-6"><a href="análisis-de-datos-con-r.html#cb1051-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1051-7"><a href="análisis-de-datos-con-r.html#cb1051-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Oscuro </span></span>
<span id="cb1051-8"><a href="análisis-de-datos-con-r.html#cb1051-8" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="sc">+</span> <span class="fu">theme_dark</span>()</span>
<span id="cb1051-9"><a href="análisis-de-datos-con-r.html#cb1051-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1051-10"><a href="análisis-de-datos-con-r.html#cb1051-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Claro</span></span>
<span id="cb1051-11"><a href="análisis-de-datos-con-r.html#cb1051-11" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="sc">+</span> <span class="fu">theme_light</span>()</span>
<span id="cb1051-12"><a href="análisis-de-datos-con-r.html#cb1051-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1051-13"><a href="análisis-de-datos-con-r.html#cb1051-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Gris </span></span>
<span id="cb1051-14"><a href="análisis-de-datos-con-r.html#cb1051-14" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="sc">+</span> <span class="fu">theme_grey</span>()</span>
<span id="cb1051-15"><a href="análisis-de-datos-con-r.html#cb1051-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1051-16"><a href="análisis-de-datos-con-r.html#cb1051-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Blanco y negro </span></span>
<span id="cb1051-17"><a href="análisis-de-datos-con-r.html#cb1051-17" aria-hidden="true" tabindex="-1"></a>distribucion_salarios <span class="sc">+</span> <span class="fu">theme_bw</span>()</span></code></pre></div>
</div>
<div id="piping-y-ggplot" class="section level4 hasAnchor" number="8.7.2.9">
<h4><span class="header-section-number">8.7.2.9</span> Piping y ggplot<a href="análisis-de-datos-con-r.html#piping-y-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1052"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1052-1"><a href="análisis-de-datos-con-r.html#cb1052-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1052-2"><a href="análisis-de-datos-con-r.html#cb1052-2" aria-hidden="true" tabindex="-1"></a>  datos <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="fu">here</span>(<span class="st">&quot;datos&quot;</span>, <span class="st">&quot;linelist_cleaned.rds&quot;</span>))</span>
<span id="cb1052-3"><a href="análisis-de-datos-con-r.html#cb1052-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1052-4"><a href="análisis-de-datos-con-r.html#cb1052-4" aria-hidden="true" tabindex="-1"></a>  datos <span class="sc">%&gt;%</span>                                                     </span>
<span id="cb1052-5"><a href="análisis-de-datos-con-r.html#cb1052-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">c</span>(case_id, fever, chills, cough, aches, vomit)) <span class="sc">%&gt;%</span>    </span>
<span id="cb1052-6"><a href="análisis-de-datos-con-r.html#cb1052-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(                                                 </span>
<span id="cb1052-7"><a href="análisis-de-datos-con-r.html#cb1052-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">cols =</span> <span class="sc">-</span>case_id,                                  </span>
<span id="cb1052-8"><a href="análisis-de-datos-con-r.html#cb1052-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_to =</span> <span class="st">&quot;symptom_name&quot;</span>,</span>
<span id="cb1052-9"><a href="análisis-de-datos-con-r.html#cb1052-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_to =</span> <span class="st">&quot;symptom_is_present&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb1052-10"><a href="análisis-de-datos-con-r.html#cb1052-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(                                                      </span>
<span id="cb1052-11"><a href="análisis-de-datos-con-r.html#cb1052-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">symptom_is_present =</span> <span class="fu">replace_na</span>(symptom_is_present, <span class="st">&quot;unknown&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1052-12"><a href="análisis-de-datos-con-r.html#cb1052-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(                                                        </span>
<span id="cb1052-13"><a href="análisis-de-datos-con-r.html#cb1052-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> symptom_name, <span class="at">fill =</span> symptom_is_present))<span class="sc">+</span></span>
<span id="cb1052-14"><a href="análisis-de-datos-con-r.html#cb1052-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="at">col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span>                    </span>
<span id="cb1052-15"><a href="análisis-de-datos-con-r.html#cb1052-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb1052-16"><a href="análisis-de-datos-con-r.html#cb1052-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb1052-17"><a href="análisis-de-datos-con-r.html#cb1052-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Sintoma&quot;</span>,</span>
<span id="cb1052-18"><a href="análisis-de-datos-con-r.html#cb1052-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Sintoma (status)&quot;</span></span>
<span id="cb1052-19"><a href="análisis-de-datos-con-r.html#cb1052-19" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</div>
<div id="gráficos-para-variables-continuas" class="section level4 hasAnchor" number="8.7.2.10">
<h4><span class="header-section-number">8.7.2.10</span> Gráficos para variables continuas<a href="análisis-de-datos-con-r.html#gráficos-para-variables-continuas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Histograma:</p>
<div class="sourceCode" id="cb1053"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1053-1"><a href="análisis-de-datos-con-r.html#cb1053-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1053-2"><a href="análisis-de-datos-con-r.html#cb1053-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;CPS1985&quot;</span>)</span>
<span id="cb1053-3"><a href="análisis-de-datos-con-r.html#cb1053-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> CPS1985</span>
<span id="cb1053-4"><a href="análisis-de-datos-con-r.html#cb1053-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(CPS1985)</span>
<span id="cb1053-5"><a href="análisis-de-datos-con-r.html#cb1053-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(data)</span>
<span id="cb1053-6"><a href="análisis-de-datos-con-r.html#cb1053-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-7"><a href="análisis-de-datos-con-r.html#cb1053-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico absoluto</span></span>
<span id="cb1053-8"><a href="análisis-de-datos-con-r.html#cb1053-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1053-9"><a href="análisis-de-datos-con-r.html#cb1053-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb1053-10"><a href="análisis-de-datos-con-r.html#cb1053-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-11"><a href="análisis-de-datos-con-r.html#cb1053-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráfico relativo</span></span>
<span id="cb1053-12"><a href="análisis-de-datos-con-r.html#cb1053-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1053-13"><a href="análisis-de-datos-con-r.html#cb1053-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..))</span>
<span id="cb1053-14"><a href="análisis-de-datos-con-r.html#cb1053-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-15"><a href="análisis-de-datos-con-r.html#cb1053-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Histograma con 20 intervalos</span></span>
<span id="cb1053-16"><a href="análisis-de-datos-con-r.html#cb1053-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1053-17"><a href="análisis-de-datos-con-r.html#cb1053-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">100</span>, </span>
<span id="cb1053-18"><a href="análisis-de-datos-con-r.html#cb1053-18" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color=</span><span class="st">&quot;black&quot;</span>, </span>
<span id="cb1053-19"><a href="análisis-de-datos-con-r.html#cb1053-19" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill=</span><span class="st">&quot;blue&quot;</span>, </span>
<span id="cb1053-20"><a href="análisis-de-datos-con-r.html#cb1053-20" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.8</span>)</span>
<span id="cb1053-21"><a href="análisis-de-datos-con-r.html#cb1053-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-22"><a href="análisis-de-datos-con-r.html#cb1053-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Agregando títulos y limites</span></span>
<span id="cb1053-23"><a href="análisis-de-datos-con-r.html#cb1053-23" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1053-24"><a href="análisis-de-datos-con-r.html#cb1053-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">fill=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb1053-25"><a href="análisis-de-datos-con-r.html#cb1053-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del salario (dólares por hora)&quot;</span>,</span>
<span id="cb1053-26"><a href="análisis-de-datos-con-r.html#cb1053-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Salario&quot;</span>,</span>
<span id="cb1053-27"><a href="análisis-de-datos-con-r.html#cb1053-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Número de empleados&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1053-28"><a href="análisis-de-datos-con-r.html#cb1053-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">30</span>)</span>
<span id="cb1053-29"><a href="análisis-de-datos-con-r.html#cb1053-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-30"><a href="análisis-de-datos-con-r.html#cb1053-30" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráficos de subconjuntos</span></span>
<span id="cb1053-31"><a href="análisis-de-datos-con-r.html#cb1053-31" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1053-32"><a href="análisis-de-datos-con-r.html#cb1053-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">fill=</span><span class="st">&quot;pink&quot;</span>) <span class="sc">+</span></span>
<span id="cb1053-33"><a href="análisis-de-datos-con-r.html#cb1053-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(gender<span class="sc">~</span>.)</span>
<span id="cb1053-34"><a href="análisis-de-datos-con-r.html#cb1053-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-35"><a href="análisis-de-datos-con-r.html#cb1053-35" aria-hidden="true" tabindex="-1"></a><span class="co"># U horizontal</span></span>
<span id="cb1053-36"><a href="análisis-de-datos-con-r.html#cb1053-36" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1053-37"><a href="análisis-de-datos-con-r.html#cb1053-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>, <span class="at">color=</span><span class="st">&quot;white&quot;</span>, <span class="at">fill=</span><span class="st">&quot;pink&quot;</span>) <span class="sc">+</span></span>
<span id="cb1053-38"><a href="análisis-de-datos-con-r.html#cb1053-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gender)<span class="sc">+</span></span>
<span id="cb1053-39"><a href="análisis-de-datos-con-r.html#cb1053-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del salario (dólares por hora)&quot;</span>,</span>
<span id="cb1053-40"><a href="análisis-de-datos-con-r.html#cb1053-40" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Salario&quot;</span>,</span>
<span id="cb1053-41"><a href="análisis-de-datos-con-r.html#cb1053-41" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Número de empleados&quot;</span>) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">30</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span>
<span id="cb1053-42"><a href="análisis-de-datos-con-r.html#cb1053-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1053-43"><a href="análisis-de-datos-con-r.html#cb1053-43" aria-hidden="true" tabindex="-1"></a><span class="co"># O ambos juntos </span></span>
<span id="cb1053-44"><a href="análisis-de-datos-con-r.html#cb1053-44" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span></span>
<span id="cb1053-45"><a href="análisis-de-datos-con-r.html#cb1053-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">20</span>, <span class="fu">aes</span>(<span class="at">fill=</span>gender), </span>
<span id="cb1053-46"><a href="análisis-de-datos-con-r.html#cb1053-46" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position=</span><span class="st">&quot;fill&quot;</span>, </span>
<span id="cb1053-47"><a href="análisis-de-datos-con-r.html#cb1053-47" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha=</span><span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb1053-48"><a href="análisis-de-datos-con-r.html#cb1053-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribución del salario (dólares por hora)&quot;</span>,</span>
<span id="cb1053-49"><a href="análisis-de-datos-con-r.html#cb1053-49" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Salario&quot;</span>, </span>
<span id="cb1053-50"><a href="análisis-de-datos-con-r.html#cb1053-50" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>, </span>
<span id="cb1053-51"><a href="análisis-de-datos-con-r.html#cb1053-51" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Género&quot;</span>) <span class="sc">+</span>  <span class="co"># títulos de ejes y leyenda</span></span>
<span id="cb1053-52"><a href="análisis-de-datos-con-r.html#cb1053-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>)) <span class="sc">+</span>    <span class="co"># títulos claves leyenda</span></span>
<span id="cb1053-53"><a href="análisis-de-datos-con-r.html#cb1053-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">30</span>)</span></code></pre></div>
<p>Gráfico de densidad:</p>
<div class="sourceCode" id="cb1054"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1054-1"><a href="análisis-de-datos-con-r.html#cb1054-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage, <span class="at">color=</span>gender)) <span class="sc">+</span></span>
<span id="cb1054-2"><a href="análisis-de-datos-con-r.html#cb1054-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">bins=</span><span class="dv">20</span>, <span class="fu">aes</span>(<span class="at">y=</span>..density..)) <span class="sc">+</span></span>
<span id="cb1054-3"><a href="análisis-de-datos-con-r.html#cb1054-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color=</span><span class="st">&quot;Género&quot;</span>)</span>
<span id="cb1054-4"><a href="análisis-de-datos-con-r.html#cb1054-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1054-5"><a href="análisis-de-datos-con-r.html#cb1054-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Uniendo a y b</span></span>
<span id="cb1054-6"><a href="análisis-de-datos-con-r.html#cb1054-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>wage)) <span class="sc">+</span> </span>
<span id="cb1054-7"><a href="análisis-de-datos-con-r.html#cb1054-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..), </span>
<span id="cb1054-8"><a href="análisis-de-datos-con-r.html#cb1054-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins=</span><span class="dv">20</span>, </span>
<span id="cb1054-9"><a href="análisis-de-datos-con-r.html#cb1054-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color=</span><span class="st">&quot;white&quot;</span>, </span>
<span id="cb1054-10"><a href="análisis-de-datos-con-r.html#cb1054-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill=</span><span class="st">&quot;pink&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1054-11"><a href="análisis-de-datos-con-r.html#cb1054-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#stat_function(fun = dnorm, colour = &quot;red&quot;,</span></span>
<span id="cb1054-12"><a href="análisis-de-datos-con-r.html#cb1054-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#              args = list(mean = mean(wage, na.rm = TRUE),</span></span>
<span id="cb1054-13"><a href="análisis-de-datos-con-r.html#cb1054-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#                          sd = sd(wage, na.rm = TRUE))) +</span></span>
<span id="cb1054-14"><a href="análisis-de-datos-con-r.html#cb1054-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color=</span><span class="st">&quot;blue&quot;</span>)<span class="sc">+</span></span>
<span id="cb1054-15"><a href="análisis-de-datos-con-r.html#cb1054-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribución del salario (dólares por hora)&quot;</span>,</span>
<span id="cb1054-16"><a href="análisis-de-datos-con-r.html#cb1054-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Salario&quot;</span>, </span>
<span id="cb1054-17"><a href="análisis-de-datos-con-r.html#cb1054-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>)</span></code></pre></div>
<p>Diagrama de dispersión (scatterplot):</p>
<div class="sourceCode" id="cb1055"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1055-1"><a href="análisis-de-datos-con-r.html#cb1055-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(experience, <span class="fu">log</span>(wage))) <span class="sc">+</span></span>
<span id="cb1055-2"><a href="análisis-de-datos-con-r.html#cb1055-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1055-3"><a href="análisis-de-datos-con-r.html#cb1055-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de dispersión&quot;</span>,</span>
<span id="cb1055-4"><a href="análisis-de-datos-con-r.html#cb1055-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;ScatterPlot&quot;</span>,</span>
<span id="cb1055-5"><a href="análisis-de-datos-con-r.html#cb1055-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: CPS1985 (paquete AER)&quot;</span>,</span>
<span id="cb1055-6"><a href="análisis-de-datos-con-r.html#cb1055-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Experiencia (en años)&quot;</span>,</span>
<span id="cb1055-7"><a href="análisis-de-datos-con-r.html#cb1055-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Salario (en logaritmo)&quot;</span>)</span>
<span id="cb1055-8"><a href="análisis-de-datos-con-r.html#cb1055-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-9"><a href="análisis-de-datos-con-r.html#cb1055-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Formas de darle color al gráfico</span></span>
<span id="cb1055-10"><a href="análisis-de-datos-con-r.html#cb1055-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-11"><a href="análisis-de-datos-con-r.html#cb1055-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (1) Desde geom_()</span></span>
<span id="cb1055-12"><a href="análisis-de-datos-con-r.html#cb1055-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(experience, <span class="fu">log</span>(wage))) <span class="sc">+</span></span>
<span id="cb1055-13"><a href="análisis-de-datos-con-r.html#cb1055-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>gender))</span>
<span id="cb1055-14"><a href="análisis-de-datos-con-r.html#cb1055-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-15"><a href="análisis-de-datos-con-r.html#cb1055-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (2) Desde ggplot()</span></span>
<span id="cb1055-16"><a href="análisis-de-datos-con-r.html#cb1055-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(experience, <span class="fu">log</span>(wage), <span class="at">color=</span><span class="st">&quot;red&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1055-17"><a href="análisis-de-datos-con-r.html#cb1055-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb1055-18"><a href="análisis-de-datos-con-r.html#cb1055-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-19"><a href="análisis-de-datos-con-r.html#cb1055-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Función jitter (shortcut geom_point(position = &quot;jitter&quot;)</span></span>
<span id="cb1055-20"><a href="análisis-de-datos-con-r.html#cb1055-20" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(experience,<span class="fu">log</span>(wage))) <span class="sc">+</span></span>
<span id="cb1055-21"><a href="análisis-de-datos-con-r.html#cb1055-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width=</span>.<span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span>               <span class="co">#Suavizar la visualización de solapamiento</span></span>
<span id="cb1055-22"><a href="análisis-de-datos-con-r.html#cb1055-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de dispersión&quot;</span>,</span>
<span id="cb1055-23"><a href="análisis-de-datos-con-r.html#cb1055-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;ScatterPlot&quot;</span>,</span>
<span id="cb1055-24"><a href="análisis-de-datos-con-r.html#cb1055-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: CPS1985 (paquete AER)&quot;</span>,</span>
<span id="cb1055-25"><a href="análisis-de-datos-con-r.html#cb1055-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Experiencia (en años)&quot;</span>,</span>
<span id="cb1055-26"><a href="análisis-de-datos-con-r.html#cb1055-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Salario (en logaritmo)&quot;</span>)</span>
<span id="cb1055-27"><a href="análisis-de-datos-con-r.html#cb1055-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-28"><a href="análisis-de-datos-con-r.html#cb1055-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Diviendo por categorías</span></span>
<span id="cb1055-29"><a href="análisis-de-datos-con-r.html#cb1055-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(experience,<span class="fu">log</span>(wage), <span class="at">color=</span>gender)) <span class="sc">+</span></span>
<span id="cb1055-30"><a href="análisis-de-datos-con-r.html#cb1055-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>() <span class="sc">+</span></span>
<span id="cb1055-31"><a href="análisis-de-datos-con-r.html#cb1055-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>) <span class="sc">+</span> </span>
<span id="cb1055-32"><a href="análisis-de-datos-con-r.html#cb1055-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de dispersión&quot;</span>,</span>
<span id="cb1055-33"><a href="análisis-de-datos-con-r.html#cb1055-33" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Experiencia (en años)&quot;</span>,</span>
<span id="cb1055-34"><a href="análisis-de-datos-con-r.html#cb1055-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Salario (en logaritmo)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1055-35"><a href="análisis-de-datos-con-r.html#cb1055-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name=</span><span class="st">&quot;Género&quot;</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>))</span>
<span id="cb1055-36"><a href="análisis-de-datos-con-r.html#cb1055-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-37"><a href="análisis-de-datos-con-r.html#cb1055-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Nota: Ojo con realizar de otra manera, cambia la recta de regresión</span></span>
<span id="cb1055-38"><a href="análisis-de-datos-con-r.html#cb1055-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1055-39"><a href="análisis-de-datos-con-r.html#cb1055-39" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(experience,<span class="fu">log</span>(wage))) <span class="sc">+</span></span>
<span id="cb1055-40"><a href="análisis-de-datos-con-r.html#cb1055-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>gender)) <span class="sc">+</span></span>
<span id="cb1055-41"><a href="análisis-de-datos-con-r.html#cb1055-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb1055-42"><a href="análisis-de-datos-con-r.html#cb1055-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de dispersión&quot;</span>,</span>
<span id="cb1055-43"><a href="análisis-de-datos-con-r.html#cb1055-43" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Experiencia (en años)&quot;</span>,</span>
<span id="cb1055-44"><a href="análisis-de-datos-con-r.html#cb1055-44" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Salario (en logaritmo)&quot;</span>) <span class="sc">+</span></span>
<span id="cb1055-45"><a href="análisis-de-datos-con-r.html#cb1055-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="st">&quot;Género&quot;</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>))</span></code></pre></div>
<p>Boxplot:</p>
<div class="sourceCode" id="cb1056"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1056-1"><a href="análisis-de-datos-con-r.html#cb1056-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Básico</span></span>
<span id="cb1056-2"><a href="análisis-de-datos-con-r.html#cb1056-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>gender, <span class="at">y=</span>wage, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb1056-3"><a href="análisis-de-datos-con-r.html#cb1056-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb1056-4"><a href="análisis-de-datos-con-r.html#cb1056-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Boxplot&quot;</span>,</span>
<span id="cb1056-5"><a href="análisis-de-datos-con-r.html#cb1056-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Género&quot;</span>, </span>
<span id="cb1056-6"><a href="análisis-de-datos-con-r.html#cb1056-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Salario&quot;</span>, </span>
<span id="cb1056-7"><a href="análisis-de-datos-con-r.html#cb1056-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill=</span><span class="st">&quot;Género&quot;</span>) <span class="sc">+</span>   <span class="co"># titulo ejes y leyenda</span></span>
<span id="cb1056-8"><a href="análisis-de-datos-con-r.html#cb1056-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>)) <span class="sc">+</span>   <span class="co"># etiquetas del eje x</span></span>
<span id="cb1056-9"><a href="análisis-de-datos-con-r.html#cb1056-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>))  <span class="co"># etiquetas claves leyenda</span></span>
<span id="cb1056-10"><a href="análisis-de-datos-con-r.html#cb1056-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1056-11"><a href="análisis-de-datos-con-r.html#cb1056-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Visualizando todos los datos con paletas creadas (armamos una función)</span></span>
<span id="cb1056-12"><a href="análisis-de-datos-con-r.html#cb1056-12" aria-hidden="true" tabindex="-1"></a>ts4_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1056-13"><a href="análisis-de-datos-con-r.html#cb1056-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">pink</span><span class="st">`</span>        <span class="ot">=</span> <span class="st">&quot;#B40586&quot;</span>,</span>
<span id="cb1056-14"><a href="análisis-de-datos-con-r.html#cb1056-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">light blue</span><span class="st">`</span>       <span class="ot">=</span> <span class="st">&quot;#00A2E9&quot;</span>,</span>
<span id="cb1056-15"><a href="análisis-de-datos-con-r.html#cb1056-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">green</span><span class="st">`</span>      <span class="ot">=</span> <span class="st">&quot;#00AC8B&quot;</span>,</span>
<span id="cb1056-16"><a href="análisis-de-datos-con-r.html#cb1056-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">orange</span><span class="st">`</span>     <span class="ot">=</span> <span class="st">&quot;#f37735&quot;</span>,</span>
<span id="cb1056-17"><a href="análisis-de-datos-con-r.html#cb1056-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">red</span><span class="st">`</span>     <span class="ot">=</span> <span class="st">&quot;#FF1B6B&quot;</span>,</span>
<span id="cb1056-18"><a href="análisis-de-datos-con-r.html#cb1056-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">purple</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;#805FAA&quot;</span>,</span>
<span id="cb1056-19"><a href="análisis-de-datos-con-r.html#cb1056-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">blue</span><span class="st">`</span>  <span class="ot">=</span> <span class="st">&quot;#0059ff&quot;</span>,</span>
<span id="cb1056-20"><a href="análisis-de-datos-con-r.html#cb1056-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">light green</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;#7EAF64&quot;</span>)</span>
<span id="cb1056-21"><a href="análisis-de-datos-con-r.html#cb1056-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1056-22"><a href="análisis-de-datos-con-r.html#cb1056-22" aria-hidden="true" tabindex="-1"></a>ts4_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb1056-23"><a href="análisis-de-datos-con-r.html#cb1056-23" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">c</span>(...)</span>
<span id="cb1056-24"><a href="análisis-de-datos-con-r.html#cb1056-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.null</span>(cols)){</span>
<span id="cb1056-25"><a href="análisis-de-datos-con-r.html#cb1056-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span> (ts4_colors)</span>
<span id="cb1056-26"><a href="análisis-de-datos-con-r.html#cb1056-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1056-27"><a href="análisis-de-datos-con-r.html#cb1056-27" aria-hidden="true" tabindex="-1"></a>  ts4_colors[cols]</span>
<span id="cb1056-28"><a href="análisis-de-datos-con-r.html#cb1056-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1056-29"><a href="análisis-de-datos-con-r.html#cb1056-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ts4_cols</span>(<span class="st">&quot;red&quot;</span>)</span>
<span id="cb1056-30"><a href="análisis-de-datos-con-r.html#cb1056-30" aria-hidden="true" tabindex="-1"></a><span class="fu">ts4_cols</span>()</span>
<span id="cb1056-31"><a href="análisis-de-datos-con-r.html#cb1056-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1056-32"><a href="análisis-de-datos-con-r.html#cb1056-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x=</span>gender, <span class="at">y=</span>wage, <span class="at">fill=</span>gender) ) <span class="sc">+</span></span>
<span id="cb1056-33"><a href="análisis-de-datos-con-r.html#cb1056-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha=</span><span class="fl">0.3</span>, </span>
<span id="cb1056-34"><a href="análisis-de-datos-con-r.html#cb1056-34" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill=</span><span class="fu">ts4_cols</span>(<span class="st">&quot;pink&quot;</span>,<span class="st">&quot;light green&quot;</span>), </span>
<span id="cb1056-35"><a href="análisis-de-datos-con-r.html#cb1056-35" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.colour =</span> <span class="fu">ts4_cols</span>(<span class="st">&quot;blue&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1056-36"><a href="análisis-de-datos-con-r.html#cb1056-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Boxplot&quot;</span>,<span class="at">x=</span><span class="st">&quot;Género&quot;</span>, <span class="at">y=</span><span class="st">&quot;Salario&quot;</span>) <span class="sc">+</span></span>
<span id="cb1056-37"><a href="análisis-de-datos-con-r.html#cb1056-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1056-38"><a href="análisis-de-datos-con-r.html#cb1056-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb1056-39"><a href="análisis-de-datos-con-r.html#cb1056-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span>              </span>
<span id="cb1056-40"><a href="análisis-de-datos-con-r.html#cb1056-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">stat=</span> <span class="st">&quot;summary&quot;</span>, <span class="at">shape=</span><span class="dv">16</span>, <span class="at">size=</span><span class="dv">4</span>, <span class="at">colour=</span><span class="fu">ts4_cols</span>(<span class="st">&quot;purple&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1056-41"><a href="análisis-de-datos-con-r.html#cb1056-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">colour=</span><span class="fu">ts4_cols</span>(<span class="st">&quot;orange&quot;</span>))</span></code></pre></div>
<p>Gráfico de barras:</p>
<div class="sourceCode" id="cb1057"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1057-1"><a href="análisis-de-datos-con-r.html#cb1057-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(ethnicity)) <span class="sc">+</span></span>
<span id="cb1057-2"><a href="análisis-de-datos-con-r.html#cb1057-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb1057-3"><a href="análisis-de-datos-con-r.html#cb1057-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de barras&quot;</span>,</span>
<span id="cb1057-4"><a href="análisis-de-datos-con-r.html#cb1057-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Raza&quot;</span>,</span>
<span id="cb1057-5"><a href="análisis-de-datos-con-r.html#cb1057-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>) <span class="sc">+</span></span>
<span id="cb1057-6"><a href="análisis-de-datos-con-r.html#cb1057-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Caucásico&quot;</span>, <span class="st">&quot;Hispano&quot;</span>, <span class="st">&quot;Otros&quot;</span>))</span>
<span id="cb1057-7"><a href="análisis-de-datos-con-r.html#cb1057-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1057-8"><a href="análisis-de-datos-con-r.html#cb1057-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Distintos colores</span></span>
<span id="cb1057-9"><a href="análisis-de-datos-con-r.html#cb1057-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(ethnicity, <span class="at">fill=</span>ethnicity)) <span class="sc">+</span></span>
<span id="cb1057-10"><a href="análisis-de-datos-con-r.html#cb1057-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb1057-11"><a href="análisis-de-datos-con-r.html#cb1057-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribución de empleadores según etnia&quot;</span>,</span>
<span id="cb1057-12"><a href="análisis-de-datos-con-r.html#cb1057-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Raza&quot;</span>,</span>
<span id="cb1057-13"><a href="análisis-de-datos-con-r.html#cb1057-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>) <span class="sc">+</span></span>
<span id="cb1057-14"><a href="análisis-de-datos-con-r.html#cb1057-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Caucásico&quot;</span>, <span class="st">&quot;Hispano&quot;</span>, <span class="st">&quot;Otros&quot;</span>)) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill=</span><span class="cn">FALSE</span>)  <span class="co"># Sin/con leyenda</span></span>
<span id="cb1057-15"><a href="análisis-de-datos-con-r.html#cb1057-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1057-16"><a href="análisis-de-datos-con-r.html#cb1057-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ¿Cómo se distribuye el género sobre la etnia?</span></span>
<span id="cb1057-17"><a href="análisis-de-datos-con-r.html#cb1057-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(ethnicity, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb1057-18"><a href="análisis-de-datos-con-r.html#cb1057-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb1057-19"><a href="análisis-de-datos-con-r.html#cb1057-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de barras&quot;</span>,</span>
<span id="cb1057-20"><a href="análisis-de-datos-con-r.html#cb1057-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Etnia&quot;</span>,</span>
<span id="cb1057-21"><a href="análisis-de-datos-con-r.html#cb1057-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>) <span class="sc">+</span></span>
<span id="cb1057-22"><a href="análisis-de-datos-con-r.html#cb1057-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Caucásico&quot;</span>, <span class="st">&quot;Hispano&quot;</span>, <span class="st">&quot;Otros&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1057-23"><a href="análisis-de-datos-con-r.html#cb1057-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="st">&quot;Género&quot;</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>))</span>
<span id="cb1057-24"><a href="análisis-de-datos-con-r.html#cb1057-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1057-25"><a href="análisis-de-datos-con-r.html#cb1057-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Separado por género, pero paralelo</span></span>
<span id="cb1057-26"><a href="análisis-de-datos-con-r.html#cb1057-26" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(ethnicity, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb1057-27"><a href="análisis-de-datos-con-r.html#cb1057-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span>            <span class="co"># también: position=position_dodge()</span></span>
<span id="cb1057-28"><a href="análisis-de-datos-con-r.html#cb1057-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribución de empleadores según etnia&quot;</span>,</span>
<span id="cb1057-29"><a href="análisis-de-datos-con-r.html#cb1057-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Raza&quot;</span>,</span>
<span id="cb1057-30"><a href="análisis-de-datos-con-r.html#cb1057-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>) <span class="sc">+</span></span>
<span id="cb1057-31"><a href="análisis-de-datos-con-r.html#cb1057-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Caucásico&quot;</span>, <span class="st">&quot;Hispano&quot;</span>, <span class="st">&quot;Otros&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1057-32"><a href="análisis-de-datos-con-r.html#cb1057-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Accent&quot;</span>,                             <span class="co"># Definir la paleta manualmente </span></span>
<span id="cb1057-33"><a href="análisis-de-datos-con-r.html#cb1057-33" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Género&quot;</span>,</span>
<span id="cb1057-34"><a href="análisis-de-datos-con-r.html#cb1057-34" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>))</span></code></pre></div>
</div>
<div id="gráficos-con-plotly" class="section level4 hasAnchor" number="8.7.2.11">
<h4><span class="header-section-number">8.7.2.11</span> Gráficos con plotly<a href="análisis-de-datos-con-r.html#gráficos-con-plotly" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Ejemplo 1:</p>
<div class="sourceCode" id="cb1058"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1058-1"><a href="análisis-de-datos-con-r.html#cb1058-1" aria-hidden="true" tabindex="-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(ethnicity, <span class="at">fill=</span>gender)) <span class="sc">+</span></span>
<span id="cb1058-2"><a href="análisis-de-datos-con-r.html#cb1058-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span>            <span class="co"># también: position=position_dodge()</span></span>
<span id="cb1058-3"><a href="análisis-de-datos-con-r.html#cb1058-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Distribución de empleadores según etnia&quot;</span>,</span>
<span id="cb1058-4"><a href="análisis-de-datos-con-r.html#cb1058-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="st">&quot;Raza&quot;</span>,</span>
<span id="cb1058-5"><a href="análisis-de-datos-con-r.html#cb1058-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Empleados&quot;</span>) <span class="sc">+</span></span>
<span id="cb1058-6"><a href="análisis-de-datos-con-r.html#cb1058-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Caucásico&quot;</span>, <span class="st">&quot;Hispano&quot;</span>, <span class="st">&quot;Otros&quot;</span>)) <span class="sc">+</span></span>
<span id="cb1058-7"><a href="análisis-de-datos-con-r.html#cb1058-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Accent&quot;</span>,     <span class="co">#Definir la paleta manualmente </span></span>
<span id="cb1058-8"><a href="análisis-de-datos-con-r.html#cb1058-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Género&quot;</span>,</span>
<span id="cb1058-9"><a href="análisis-de-datos-con-r.html#cb1058-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Hombre&quot;</span>,<span class="st">&quot;Mujer&quot;</span>))</span>
<span id="cb1058-10"><a href="análisis-de-datos-con-r.html#cb1058-10" aria-hidden="true" tabindex="-1"></a>g1</span>
<span id="cb1058-11"><a href="análisis-de-datos-con-r.html#cb1058-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1058-12"><a href="análisis-de-datos-con-r.html#cb1058-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(g1)</span></code></pre></div>
<p>Ejemplo 2:</p>
<div class="sourceCode" id="cb1059"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1059-1"><a href="análisis-de-datos-con-r.html#cb1059-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>) <span class="co">#semilla</span></span>
<span id="cb1059-2"><a href="análisis-de-datos-con-r.html#cb1059-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1059-3"><a href="análisis-de-datos-con-r.html#cb1059-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> diamonds[<span class="fu">sample</span>(<span class="fu">nrow</span>(diamonds), <span class="dv">1000</span>), ]</span>
<span id="cb1059-4"><a href="análisis-de-datos-con-r.html#cb1059-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1059-5"><a href="análisis-de-datos-con-r.html#cb1059-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb1059-6"><a href="análisis-de-datos-con-r.html#cb1059-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">text =</span> <span class="fu">paste</span>(<span class="st">&quot;Clarity:&quot;</span>, clarity)), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb1059-7"><a href="análisis-de-datos-con-r.html#cb1059-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">colour =</span> cut, <span class="at">fill =</span> cut)) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> cut)</span>
<span id="cb1059-8"><a href="análisis-de-datos-con-r.html#cb1059-8" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb1059-9"><a href="análisis-de-datos-con-r.html#cb1059-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1059-10"><a href="análisis-de-datos-con-r.html#cb1059-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Recordatorio:</b> Set seed o sembrar la semilla nos permite generar
datos seudo aleatorizados pero replicables, de manera que cualquier
persona que acceda al script sea capaz de llegar a los mismos resultados
que nosotros. El número que se incluye dentro de la función actua como
un “código” que genera estos datos aleatorios, y puede ser cualquiera.</p>
</div>
<p>Ejemplo 3: Ocupar directamente plotly</p>
<div class="sourceCode" id="cb1060"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1060-1"><a href="análisis-de-datos-con-r.html#cb1060-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb1060-2"><a href="análisis-de-datos-con-r.html#cb1060-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-3"><a href="análisis-de-datos-con-r.html#cb1060-3" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> iris, </span>
<span id="cb1060-4"><a href="análisis-de-datos-con-r.html#cb1060-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">x =</span> <span class="sc">~</span>Sepal.Length, </span>
<span id="cb1060-5"><a href="análisis-de-datos-con-r.html#cb1060-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="sc">~</span>Petal.Length, </span>
<span id="cb1060-6"><a href="análisis-de-datos-con-r.html#cb1060-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">color=</span><span class="sc">~</span>Species)</span>
<span id="cb1060-7"><a href="análisis-de-datos-con-r.html#cb1060-7" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb1060-8"><a href="análisis-de-datos-con-r.html#cb1060-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-9"><a href="análisis-de-datos-con-r.html#cb1060-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Sacar barra de opciones y zoom</span></span>
<span id="cb1060-10"><a href="análisis-de-datos-con-r.html#cb1060-10" aria-hidden="true" tabindex="-1"></a>fig <span class="sc">%&gt;%</span></span>
<span id="cb1060-11"><a href="análisis-de-datos-con-r.html#cb1060-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">fixedrange =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1060-12"><a href="análisis-de-datos-con-r.html#cb1060-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">showlegend =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1060-13"><a href="análisis-de-datos-con-r.html#cb1060-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">fixedrange =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1060-14"><a href="análisis-de-datos-con-r.html#cb1060-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">config</span>(<span class="at">displayModeBar =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1060-15"><a href="análisis-de-datos-con-r.html#cb1060-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-16"><a href="análisis-de-datos-con-r.html#cb1060-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Line plot</span></span>
<span id="cb1060-17"><a href="análisis-de-datos-con-r.html#cb1060-17" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>)</span>
<span id="cb1060-18"><a href="análisis-de-datos-con-r.html#cb1060-18" aria-hidden="true" tabindex="-1"></a>random_y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="at">mean =</span> <span class="dv">0</span>)</span>
<span id="cb1060-19"><a href="análisis-de-datos-con-r.html#cb1060-19" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x, random_y)</span>
<span id="cb1060-20"><a href="análisis-de-datos-con-r.html#cb1060-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-21"><a href="análisis-de-datos-con-r.html#cb1060-21" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(data, <span class="at">x =</span> <span class="sc">~</span>x, </span>
<span id="cb1060-22"><a href="análisis-de-datos-con-r.html#cb1060-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="sc">~</span>random_y, </span>
<span id="cb1060-23"><a href="análisis-de-datos-con-r.html#cb1060-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, </span>
<span id="cb1060-24"><a href="análisis-de-datos-con-r.html#cb1060-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">mode =</span> <span class="st">&#39;lines&#39;</span>)</span>
<span id="cb1060-25"><a href="análisis-de-datos-con-r.html#cb1060-25" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb1060-26"><a href="análisis-de-datos-con-r.html#cb1060-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-27"><a href="análisis-de-datos-con-r.html#cb1060-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas</span></span>
<span id="cb1060-28"><a href="análisis-de-datos-con-r.html#cb1060-28" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="sc">~</span><span class="fu">rnorm</span>(<span class="dv">50</span>), </span>
<span id="cb1060-29"><a href="análisis-de-datos-con-r.html#cb1060-29" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">&quot;histogram&quot;</span>)</span>
<span id="cb1060-30"><a href="análisis-de-datos-con-r.html#cb1060-30" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb1060-31"><a href="análisis-de-datos-con-r.html#cb1060-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-32"><a href="análisis-de-datos-con-r.html#cb1060-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Con 2 grupos</span></span>
<span id="cb1060-33"><a href="análisis-de-datos-con-r.html#cb1060-33" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>)</span>
<span id="cb1060-34"><a href="análisis-de-datos-con-r.html#cb1060-34" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_histogram</span>(<span class="at">x =</span> <span class="sc">~</span><span class="fu">rnorm</span>(<span class="dv">500</span>))</span>
<span id="cb1060-35"><a href="análisis-de-datos-con-r.html#cb1060-35" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_histogram</span>(<span class="at">x =</span> <span class="sc">~</span><span class="fu">rnorm</span>(<span class="dv">500</span>) <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb1060-36"><a href="análisis-de-datos-con-r.html#cb1060-36" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">layout</span>(<span class="at">barmode =</span> <span class="st">&quot;overlay&quot;</span>)</span>
<span id="cb1060-37"><a href="análisis-de-datos-con-r.html#cb1060-37" aria-hidden="true" tabindex="-1"></a>fig</span>
<span id="cb1060-38"><a href="análisis-de-datos-con-r.html#cb1060-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1060-39"><a href="análisis-de-datos-con-r.html#cb1060-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb1060-40"><a href="análisis-de-datos-con-r.html#cb1060-40" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">y =</span> <span class="sc">~</span><span class="fu">rnorm</span>(<span class="dv">50</span>), <span class="at">type =</span> <span class="st">&quot;box&quot;</span>)</span>
<span id="cb1060-41"><a href="análisis-de-datos-con-r.html#cb1060-41" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span> <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span><span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">1</span>))</span>
<span id="cb1060-42"><a href="análisis-de-datos-con-r.html#cb1060-42" aria-hidden="true" tabindex="-1"></a>fig</span></code></pre></div>
</div>
</div>
</div>
<div id="análisis-de-datos-y-generación-de-informes-con-r-markdown" class="section level2 hasAnchor" number="8.8">
<h2><span class="header-section-number">8.8</span> Análisis de datos y generación de informes con R Markdown<a href="análisis-de-datos-con-r.html#análisis-de-datos-y-generación-de-informes-con-r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="test-de-hipótesis" class="section level3 hasAnchor" number="8.8.1">
<h3><span class="header-section-number">8.8.1</span> Test de hipótesis<a href="análisis-de-datos-con-r.html#test-de-hipótesis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Imaginen que una compañia quiere testear la efectividad de una
estrategia de venta. La estrategia A consiste en colocar un letrero que
diga “oferta final”. La estrategia B consiste en dejar todo como
siempre. Aleatoriamente se eligen los días y lugares en donde se
utilizara la estrategia A y los días en que se utilizara la estrategia
B. Luego, se registran los datos de ventas y se observan que las ventas
de la compañía con la estrategia B fueron un 43,4% mayores a las tiendas
con la estrategia A. La intuición se contradice con los datos, sin
embargo, ¿Es esto debido al azar? ¿o bien es un resultado
estadísticamente significativo?</p>
<div id="test-de-diferencia-de-media" class="section level4 hasAnchor" number="8.8.1.1">
<h4><span class="header-section-number">8.8.1.1</span> Test de diferencia de media<a href="análisis-de-datos-con-r.html#test-de-diferencia-de-media" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Una de las pruebas más comunes en estadística, la prueba t, se utiliza
para determinar si las medias de dos grupos son iguales entre sí. La
hipótesis de la prueba es que ambos grupos proceden de distribuciones
normales con varianzas iguales. La hipótesis nula es que las dos medias
son iguales, y la alternativa es que no lo son. Se sabe que bajo la
hipótesis nula, podemos calcular un estadístico t que seguirá una
distribución t.</p>
<p>También existe una modificación ampliamente utilizada de la prueba t,
conocida como prueba t de Welch, que ajusta el número de grados de
libertad cuando se cree que las varianzas no son iguales entre sí. Este
tutorial cubre los fundamentos de la realización de pruebas t en R.</p>
<p><code>t.test()</code> puede utilizarse para realizar pruebas t de una y dos
muestras en vectores de datos. La función contiene una variedad de
argumentos. La sintaxis es:</p>
<div class="sourceCode" id="cb1061"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1061-1"><a href="análisis-de-datos-con-r.html#cb1061-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos </span></span>
<span id="cb1061-2"><a href="análisis-de-datos-con-r.html#cb1061-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;midwest&quot;</span>)</span>
<span id="cb1061-3"><a href="análisis-de-datos-con-r.html#cb1061-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(midwest)</span>
<span id="cb1061-4"><a href="análisis-de-datos-con-r.html#cb1061-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(midwest)</span>
<span id="cb1061-5"><a href="análisis-de-datos-con-r.html#cb1061-5" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(midwest)</span>
<span id="cb1061-6"><a href="análisis-de-datos-con-r.html#cb1061-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1061-7"><a href="análisis-de-datos-con-r.html#cb1061-7" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(x, <span class="at">y =</span> <span class="cn">NULL</span>, </span>
<span id="cb1061-8"><a href="análisis-de-datos-con-r.html#cb1061-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">alternative =</span> <span class="fu">c</span>(<span class="st">&quot;two.sided&quot;</span>, <span class="st">&quot;less&quot;</span>, <span class="st">&quot;greater&quot;</span>), </span>
<span id="cb1061-9"><a href="análisis-de-datos-con-r.html#cb1061-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">paired =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1061-10"><a href="análisis-de-datos-con-r.html#cb1061-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">mu =</span> <span class="dv">0</span>,</span>
<span id="cb1061-11"><a href="análisis-de-datos-con-r.html#cb1061-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">var.equal =</span> <span class="cn">FALSE</span>, </span>
<span id="cb1061-12"><a href="análisis-de-datos-con-r.html#cb1061-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">conf.level =</span> <span class="fl">0.95</span>)</span></code></pre></div>
<p>Aquí <span class="math inline">\(x\)</span> es un vector numérico de valores de datos e <span class="math inline">\(y\)</span> es un vector
numérico opcional de valores de datos. Si se excluye <span class="math inline">\(y\)</span>, la función
realiza una prueba t de una muestra sobre los datos contenidos en <span class="math inline">\(x\)</span>,
si se incluye realiza una prueba t de dos muestras utilizando tanto <span class="math inline">\(x\)</span>
como <span class="math inline">\(y\)</span>.</p>
<p>El argumento <span class="math inline">\(mu\)</span> proporciona un número que indica el verdadero valor de
la media (o la diferencia de medias si se realiza una prueba de dos
muestras) bajo la hipótesis nula. Por defecto, la prueba realiza una
prueba t de dos caras; sin embargo, puede realizar una hipótesis
alternativa cambiando el argumento alternativo a “mayor” o “menor”
dependiendo de si la hipótesis alternativa es que la media es mayor o
menor que <span class="math inline">\(mu\)</span>, respectivamente.</p>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb1062"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1062-1"><a href="análisis-de-datos-con-r.html#cb1062-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(x, <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span>, <span class="at">mu =</span> <span class="dv">25</span>)</span></code></pre></div>
<p>Realiza una prueba t de una muestra sobre los datos contenidos en <span class="math inline">\(x\)</span>
donde la hipótesis nula es que <span class="math inline">\(mu = 25\)</span> y la alternativa es menor que
25. El argumento <code>var.equal</code> indica si se deben asumir o no varianzas
iguales al realizar una prueba t de dos muestras. Por defecto se asume
una varianza desigual.</p>
<p>Por último, el argumento <code>conf.level</code> determina el nivel de confianza
del intervalo de confianza.</p>
</div>
<div id="t-test-de-una-cola" class="section level4 hasAnchor" number="8.8.1.2">
<h4><span class="header-section-number">8.8.1.2</span> t-test de una cola<a href="análisis-de-datos-con-r.html#t-test-de-una-cola" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>La prueba t de una muestra compara la media de una muestra con un valor
conocido, cuando la varianza de la población es desconocida.
Consideremos que queremos evaluar el porcentaje de adultos con estudios
universitarios en el “midwest” y compararlo con un valor determinado.</p>
<p>Por ejemplo, supongamos que la media nacional de adultos con estudios
universitarios es del 32% (licenciatura o superior) y queremos ver si la
media del “midwest” es significativamente diferente (en terminos
estadísticos) de la media nacional. En concreto, queremos comprobar si
la media del medio oeste es inferior a la media nacional.</p>
<div class="sourceCode" id="cb1063"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1063-1"><a href="análisis-de-datos-con-r.html#cb1063-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(midwest<span class="sc">$</span>percollege)</span>
<span id="cb1063-2"><a href="análisis-de-datos-con-r.html#cb1063-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráficamente </span></span>
<span id="cb1063-3"><a href="análisis-de-datos-con-r.html#cb1063-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1063-4"><a href="análisis-de-datos-con-r.html#cb1063-4" aria-hidden="true" tabindex="-1"></a><span class="co"># En escala absoluta</span></span>
<span id="cb1063-5"><a href="análisis-de-datos-con-r.html#cb1063-5" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(midwest, <span class="fu">aes</span>(percollege)) <span class="sc">+</span> </span>
<span id="cb1063-6"><a href="análisis-de-datos-con-r.html#cb1063-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>)</span>
<span id="cb1063-7"><a href="análisis-de-datos-con-r.html#cb1063-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1063-8"><a href="análisis-de-datos-con-r.html#cb1063-8" aria-hidden="true" tabindex="-1"></a><span class="co"># En escala logarítmica </span></span>
<span id="cb1063-9"><a href="análisis-de-datos-con-r.html#cb1063-9" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(midwest, <span class="fu">aes</span>(percollege)) <span class="sc">+</span> </span>
<span id="cb1063-10"><a href="análisis-de-datos-con-r.html#cb1063-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>) <span class="sc">+</span></span>
<span id="cb1063-11"><a href="análisis-de-datos-con-r.html#cb1063-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span>
<span id="cb1063-12"><a href="análisis-de-datos-con-r.html#cb1063-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1063-13"><a href="análisis-de-datos-con-r.html#cb1063-13" aria-hidden="true" tabindex="-1"></a><span class="co"># La escala logarítmica es una transformación que sirve justificar el supuesto de normalidad. </span></span>
<span id="cb1063-14"><a href="análisis-de-datos-con-r.html#cb1063-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1063-15"><a href="análisis-de-datos-con-r.html#cb1063-15" aria-hidden="true" tabindex="-1"></a><span class="co"># La escala logarítmica hace que la distancia entre 10 y 100 sea la misma que entre 100 y 1000.       </span></span>
<span id="cb1063-16"><a href="análisis-de-datos-con-r.html#cb1063-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1063-17"><a href="análisis-de-datos-con-r.html#cb1063-17" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb1063-18"><a href="análisis-de-datos-con-r.html#cb1063-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Recordemos que queremos testear si el promedio del </span></span>
<span id="cb1063-19"><a href="análisis-de-datos-con-r.html#cb1063-19" aria-hidden="true" tabindex="-1"></a><span class="co">#    &quot;midwest&quot; es menor que el promedio nacional. </span></span>
<span id="cb1063-20"><a href="análisis-de-datos-con-r.html#cb1063-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Hacemos tres test: </span></span>
<span id="cb1063-21"><a href="análisis-de-datos-con-r.html#cb1063-21" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(midwest<span class="sc">$</span>percollege, </span>
<span id="cb1063-22"><a href="análisis-de-datos-con-r.html#cb1063-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">mu =</span> <span class="dv">32</span>, </span>
<span id="cb1063-23"><a href="análisis-de-datos-con-r.html#cb1063-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span>)</span></code></pre></div>
<p>El resultado nos indica que p &lt; 0.001 lo que nos dice que rechazamos la
hipótesis nula (de que es igual a la nacional) lo que nos da evidencia
estadística de que la media poblacional del “midwest” es menor que un
32%. Pero, como vimos anteriormente, tenemos problemas de no normalidad
(recuerden el gráfico con las distribuciones empíricas). Para
asegurarnos de que nuestra conclusión es correcta vamos a efectuar dos
versiones alternativas del test:</p>
<div class="sourceCode" id="cb1064"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1064-1"><a href="análisis-de-datos-con-r.html#cb1064-1" aria-hidden="true" tabindex="-1"></a><span class="co"># La misma versión, pero en logaritmos... </span></span>
<span id="cb1064-2"><a href="análisis-de-datos-con-r.html#cb1064-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(<span class="fu">log</span>(midwest<span class="sc">$</span>percollege), </span>
<span id="cb1064-3"><a href="análisis-de-datos-con-r.html#cb1064-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mu =</span> <span class="fu">log</span>(<span class="dv">32</span>), </span>
<span id="cb1064-4"><a href="análisis-de-datos-con-r.html#cb1064-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span>)</span>
<span id="cb1064-5"><a href="análisis-de-datos-con-r.html#cb1064-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1064-6"><a href="análisis-de-datos-con-r.html#cb1064-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Wilcox test sirve cuando no deseamos asumir que los datos provienen de una distribución normal. </span></span>
<span id="cb1064-7"><a href="análisis-de-datos-con-r.html#cb1064-7" aria-hidden="true" tabindex="-1"></a><span class="fu">wilcox.test</span>(midwest<span class="sc">$</span>percollege, </span>
<span id="cb1064-8"><a href="análisis-de-datos-con-r.html#cb1064-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">mu =</span> <span class="dv">32</span>, </span>
<span id="cb1064-9"><a href="análisis-de-datos-con-r.html#cb1064-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span>)</span></code></pre></div>
<p>Ambos resultados apoyan nuestra conclusión inicial de que el porcentaje
de adultos con estudios universitarios en el medio oeste es
estadísticamente inferior a la media nacional.</p>
</div>
<div id="t-test-de-dos-colas" class="section level4 hasAnchor" number="8.8.1.3">
<h4><span class="header-section-number">8.8.1.3</span> t-test de dos colas<a href="análisis-de-datos-con-r.html#t-test-de-dos-colas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Ahora digamos que queremos comparar las diferencias entre el porcentaje
promedio de adultos con estudios universitarios en Ohio y en Michigan.
En este caso, queremos realizar una prueba t de dos muestras.</p>
<div class="sourceCode" id="cb1065"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1065-1"><a href="análisis-de-datos-con-r.html#cb1065-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionamos los datos </span></span>
<span id="cb1065-2"><a href="análisis-de-datos-con-r.html#cb1065-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> midwest <span class="sc">%&gt;%</span></span>
<span id="cb1065-3"><a href="análisis-de-datos-con-r.html#cb1065-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;OH&quot;</span> <span class="sc">|</span> state <span class="sc">==</span> <span class="st">&quot;MI&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1065-4"><a href="análisis-de-datos-con-r.html#cb1065-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(state, percollege)</span>
<span id="cb1065-5"><a href="análisis-de-datos-con-r.html#cb1065-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1065-6"><a href="análisis-de-datos-con-r.html#cb1065-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Estadisticas para ohio</span></span>
<span id="cb1065-7"><a href="análisis-de-datos-con-r.html#cb1065-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;OH&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>percollege)</span>
<span id="cb1065-8"><a href="análisis-de-datos-con-r.html#cb1065-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1065-9"><a href="análisis-de-datos-con-r.html#cb1065-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Estadisticas para michigan </span></span>
<span id="cb1065-10"><a href="análisis-de-datos-con-r.html#cb1065-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">&quot;MI&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>percollege)</span></code></pre></div>
<p>Podemos ver que Ohio parece tener ligeramente menos adultos con estudios
universitarios que Michigan. No obstante, el gráfico no nos dice si es
estadísticamente significativo o no.</p>
<div class="sourceCode" id="cb1066"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1066-1"><a href="análisis-de-datos-con-r.html#cb1066-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(state, percollege)) <span class="sc">+</span></span>
<span id="cb1066-2"><a href="análisis-de-datos-con-r.html#cb1066-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb1066-3"><a href="análisis-de-datos-con-r.html#cb1066-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1066-4"><a href="análisis-de-datos-con-r.html#cb1066-4" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(percollege)) <span class="sc">+</span></span>
<span id="cb1066-5"><a href="análisis-de-datos-con-r.html#cb1066-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>) <span class="sc">+</span></span>
<span id="cb1066-6"><a href="análisis-de-datos-con-r.html#cb1066-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> state)</span>
<span id="cb1066-7"><a href="análisis-de-datos-con-r.html#cb1066-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1066-8"><a href="análisis-de-datos-con-r.html#cb1066-8" aria-hidden="true" tabindex="-1"></a><span class="co"># En logaritmos </span></span>
<span id="cb1066-9"><a href="análisis-de-datos-con-r.html#cb1066-9" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(percollege)) <span class="sc">+</span></span>
<span id="cb1066-10"><a href="análisis-de-datos-con-r.html#cb1066-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey30&quot;</span>) <span class="sc">+</span></span>
<span id="cb1066-11"><a href="análisis-de-datos-con-r.html#cb1066-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> state) <span class="sc">+</span></span>
<span id="cb1066-12"><a href="análisis-de-datos-con-r.html#cb1066-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span>
<span id="cb1066-13"><a href="análisis-de-datos-con-r.html#cb1066-13" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2, <span class="at">nrow =</span> <span class="dv">2</span>)</span>
<span id="cb1066-14"><a href="análisis-de-datos-con-r.html#cb1066-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1066-15"><a href="análisis-de-datos-con-r.html#cb1066-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Realizamos los test </span></span>
<span id="cb1066-16"><a href="análisis-de-datos-con-r.html#cb1066-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1066-17"><a href="análisis-de-datos-con-r.html#cb1066-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Sintaxis basica </span></span>
<span id="cb1066-18"><a href="análisis-de-datos-con-r.html#cb1066-18" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(percollege <span class="sc">~</span> state, </span>
<span id="cb1066-19"><a href="análisis-de-datos-con-r.html#cb1066-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> df)</span>
<span id="cb1066-20"><a href="análisis-de-datos-con-r.html#cb1066-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1066-21"><a href="análisis-de-datos-con-r.html#cb1066-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformando los datos</span></span>
<span id="cb1066-22"><a href="análisis-de-datos-con-r.html#cb1066-22" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(<span class="fu">log</span>(percollege) <span class="sc">~</span> state, </span>
<span id="cb1066-23"><a href="análisis-de-datos-con-r.html#cb1066-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> df)</span>
<span id="cb1066-24"><a href="análisis-de-datos-con-r.html#cb1066-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1066-25"><a href="análisis-de-datos-con-r.html#cb1066-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Sin asumir normalidad</span></span>
<span id="cb1066-26"><a href="análisis-de-datos-con-r.html#cb1066-26" aria-hidden="true" tabindex="-1"></a><span class="fu">wilcox.test</span>(percollege <span class="sc">~</span> state, </span>
<span id="cb1066-27"><a href="análisis-de-datos-con-r.html#cb1066-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> df)</span></code></pre></div>
<p>Los resultados que aparecen a continuación muestran un valor <span class="math inline">\(p &lt; 0.01\)</span>
que apoya la hipótesis alternativa de que “la verdadera diferencia de
medias no es igual a 0”; esencialmente afirma que existe una diferencia
estadística entre las dos medias.</p>
</div>
<div id="paired-t---test" class="section level4 hasAnchor" number="8.8.1.4">
<h4><span class="header-section-number">8.8.1.4</span> paired t - test<a href="análisis-de-datos-con-r.html#paired-t---test" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sirve para hacer test de diferencias de media para dos grupos que son
estadisticamente iguales, pero que fueron sometidos a un tratamientom
distinto. Lo que se quiere testear es si efectivamente la diferencia de
promedios de alguna variable puede estar asociada a este tratamiento.</p>
<p>Vamos a ocupar la base de datos de R llamada “sleep”. Imaginen queremos
testear si una droga particular tiene un efecto estadisticamente
significativo sobre las horas que se duerme. En particular, vamos a ver
si la variable “extra” es diferente entre ambos grupos. Vamos a utilizar
<code>t.test()</code> nuevamente, pero con la opción <code>paired = TRUE</code>.</p>
<div class="sourceCode" id="cb1067"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1067-1"><a href="análisis-de-datos-con-r.html#cb1067-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Miramos los datos graficamente </span></span>
<span id="cb1067-2"><a href="análisis-de-datos-con-r.html#cb1067-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sleep, <span class="fu">aes</span>(group, extra)) <span class="sc">+</span></span>
<span id="cb1067-3"><a href="análisis-de-datos-con-r.html#cb1067-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb1067-4"><a href="análisis-de-datos-con-r.html#cb1067-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1067-5"><a href="análisis-de-datos-con-r.html#cb1067-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Testeamos </span></span>
<span id="cb1067-6"><a href="análisis-de-datos-con-r.html#cb1067-6" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(extra <span class="sc">~</span> group, </span>
<span id="cb1067-7"><a href="análisis-de-datos-con-r.html#cb1067-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> sleep, </span>
<span id="cb1067-8"><a href="análisis-de-datos-con-r.html#cb1067-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">paired =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="regresión-lineal-en-r" class="section level3 hasAnchor" number="8.8.2">
<h3><span class="header-section-number">8.8.2</span> Regresión Lineal en R<a href="análisis-de-datos-con-r.html#regresión-lineal-en-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="mco-con-datos-generados" class="section level4 hasAnchor" number="8.8.2.1">
<h4><span class="header-section-number">8.8.2.1</span> MCO con datos generados<a href="análisis-de-datos-con-r.html#mco-con-datos-generados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1068"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1068-1"><a href="análisis-de-datos-con-r.html#cb1068-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limpiar </span></span>
<span id="cb1068-2"><a href="análisis-de-datos-con-r.html#cb1068-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1068-3"><a href="análisis-de-datos-con-r.html#cb1068-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-4"><a href="análisis-de-datos-con-r.html#cb1068-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fijar la semilla (Nos permite generar resultados reproducibles)</span></span>
<span id="cb1068-5"><a href="análisis-de-datos-con-r.html#cb1068-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb1068-6"><a href="análisis-de-datos-con-r.html#cb1068-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-7"><a href="análisis-de-datos-con-r.html#cb1068-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Genero número de observaciones </span></span>
<span id="cb1068-8"><a href="análisis-de-datos-con-r.html#cb1068-8" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">50</span> </span>
<span id="cb1068-9"><a href="análisis-de-datos-con-r.html#cb1068-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-10"><a href="análisis-de-datos-con-r.html#cb1068-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Simular una variable x con una distribución uniforme runif(N,min,max)</span></span>
<span id="cb1068-11"><a href="análisis-de-datos-con-r.html#cb1068-11" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(N,<span class="dv">1</span>,<span class="dv">40</span>)</span>
<span id="cb1068-12"><a href="análisis-de-datos-con-r.html#cb1068-12" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb1068-13"><a href="análisis-de-datos-con-r.html#cb1068-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-14"><a href="análisis-de-datos-con-r.html#cb1068-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Simular y rnorm(N,media,sd)</span></span>
<span id="cb1068-15"><a href="análisis-de-datos-con-r.html#cb1068-15" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">40</span> <span class="sc">+</span> <span class="fl">0.5</span><span class="sc">*</span>x <span class="sc">+</span> <span class="fu">rnorm</span>(N,<span class="dv">0</span>,<span class="dv">2</span>)</span>
<span id="cb1068-16"><a href="análisis-de-datos-con-r.html#cb1068-16" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb1068-17"><a href="análisis-de-datos-con-r.html#cb1068-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-18"><a href="análisis-de-datos-con-r.html#cb1068-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una base de datos (data.frame) con lo que yo genere. </span></span>
<span id="cb1068-19"><a href="análisis-de-datos-con-r.html#cb1068-19" aria-hidden="true" tabindex="-1"></a>mco_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,y)</span>
<span id="cb1068-20"><a href="análisis-de-datos-con-r.html#cb1068-20" aria-hidden="true" tabindex="-1"></a>mco_data</span>
<span id="cb1068-21"><a href="análisis-de-datos-con-r.html#cb1068-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-22"><a href="análisis-de-datos-con-r.html#cb1068-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Ahora, vamos a estimar por Minimos Cuadrados ordinarios </span></span>
<span id="cb1068-23"><a href="análisis-de-datos-con-r.html#cb1068-23" aria-hidden="true" tabindex="-1"></a><span class="co"># el modelo</span></span>
<span id="cb1068-24"><a href="análisis-de-datos-con-r.html#cb1068-24" aria-hidden="true" tabindex="-1"></a>mco <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x, </span>
<span id="cb1068-25"><a href="análisis-de-datos-con-r.html#cb1068-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> mco_data)</span>
<span id="cb1068-26"><a href="análisis-de-datos-con-r.html#cb1068-26" aria-hidden="true" tabindex="-1"></a>mco </span>
<span id="cb1068-27"><a href="análisis-de-datos-con-r.html#cb1068-27" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco)</span>
<span id="cb1068-28"><a href="análisis-de-datos-con-r.html#cb1068-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1068-29"><a href="análisis-de-datos-con-r.html#cb1068-29" aria-hidden="true" tabindex="-1"></a><span class="co"># También lo podemos ver gráficamente </span></span>
<span id="cb1068-30"><a href="análisis-de-datos-con-r.html#cb1068-30" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mco_data, <span class="fu">aes</span>(x,y))<span class="sc">+</span> </span>
<span id="cb1068-31"><a href="análisis-de-datos-con-r.html#cb1068-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">with=</span>.<span class="dv">2</span>, <span class="at">alpha=</span><span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb1068-32"><a href="análisis-de-datos-con-r.html#cb1068-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> </span>
<span id="cb1068-33"><a href="análisis-de-datos-con-r.html#cb1068-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Diagrama de dispersión&quot;</span>, </span>
<span id="cb1068-34"><a href="análisis-de-datos-con-r.html#cb1068-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;ScatterPlot&quot;</span>, </span>
<span id="cb1068-35"><a href="análisis-de-datos-con-r.html#cb1068-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;x&quot;</span>, </span>
<span id="cb1068-36"><a href="análisis-de-datos-con-r.html#cb1068-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;y&quot;</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code></pre></div>
<div class="alert alert-block alert-success">
<p><b>En resumen….</b> Para estimar:
<code>mco &lt;- lm(y ~ x1 + x2 + x3, data = misdatos)</code> Para mirar resultados:
<code>summary(mco)</code> Para mirar gráficamente:
<code>ggplot() + geom_point() + geom_smooth(method = "lm")</code></p>
</div>
</div>
<div id="mco-con-datos-reales" class="section level4 hasAnchor" number="8.8.2.2">
<h4><span class="header-section-number">8.8.2.2</span> MCO con datos reales<a href="análisis-de-datos-con-r.html#mco-con-datos-reales" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb1069"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1069-1"><a href="análisis-de-datos-con-r.html#cb1069-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1069-2"><a href="análisis-de-datos-con-r.html#cb1069-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;CPS1985&quot;</span>)</span>
<span id="cb1069-3"><a href="análisis-de-datos-con-r.html#cb1069-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(CPS1985)</span>
<span id="cb1069-4"><a href="análisis-de-datos-con-r.html#cb1069-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-5"><a href="análisis-de-datos-con-r.html#cb1069-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlación entre variables </span></span>
<span id="cb1069-6"><a href="análisis-de-datos-con-r.html#cb1069-6" aria-hidden="true" tabindex="-1"></a>CPS1985 <span class="sc">%&gt;%</span>  </span>
<span id="cb1069-7"><a href="análisis-de-datos-con-r.html#cb1069-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">cor1 =</span> <span class="fu">cor</span>(wage, education), </span>
<span id="cb1069-8"><a href="análisis-de-datos-con-r.html#cb1069-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">cor2 =</span> <span class="fu">cor</span>(wage, experience))</span>
<span id="cb1069-9"><a href="análisis-de-datos-con-r.html#cb1069-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-10"><a href="análisis-de-datos-con-r.html#cb1069-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráficamente </span></span>
<span id="cb1069-11"><a href="análisis-de-datos-con-r.html#cb1069-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CPS1985, <span class="fu">aes</span>(education, <span class="fu">log</span>(wage))) <span class="sc">+</span> </span>
<span id="cb1069-12"><a href="análisis-de-datos-con-r.html#cb1069-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb1069-13"><a href="análisis-de-datos-con-r.html#cb1069-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&#39;lm&#39;</span>, <span class="at">se =</span> T) <span class="sc">+</span></span>
<span id="cb1069-14"><a href="análisis-de-datos-con-r.html#cb1069-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Diagrama de dispersión&quot;</span>,</span>
<span id="cb1069-15"><a href="análisis-de-datos-con-r.html#cb1069-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span> <span class="st">&quot;ScatterPlot&quot;</span>,</span>
<span id="cb1069-16"><a href="análisis-de-datos-con-r.html#cb1069-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption=</span><span class="st">&quot;Fuente: CPS1985 (paquete AER)&quot;</span>,</span>
<span id="cb1069-17"><a href="análisis-de-datos-con-r.html#cb1069-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Educación en años&quot;</span>,</span>
<span id="cb1069-18"><a href="análisis-de-datos-con-r.html#cb1069-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Salario (en logaritmo)&quot;</span>)</span>
<span id="cb1069-19"><a href="análisis-de-datos-con-r.html#cb1069-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-20"><a href="análisis-de-datos-con-r.html#cb1069-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimación </span></span>
<span id="cb1069-21"><a href="análisis-de-datos-con-r.html#cb1069-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-22"><a href="análisis-de-datos-con-r.html#cb1069-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Creamos variables que utilizaremos en las estimaciones </span></span>
<span id="cb1069-23"><a href="análisis-de-datos-con-r.html#cb1069-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-24"><a href="análisis-de-datos-con-r.html#cb1069-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Crear dos variables: log(wage) y experiencia al cuadrado. </span></span>
<span id="cb1069-25"><a href="análisis-de-datos-con-r.html#cb1069-25" aria-hidden="true" tabindex="-1"></a>  CPS1985<span class="sc">$</span>lnwage <span class="ot">&lt;-</span> <span class="fu">log</span>(CPS1985<span class="sc">$</span>wage)</span>
<span id="cb1069-26"><a href="análisis-de-datos-con-r.html#cb1069-26" aria-hidden="true" tabindex="-1"></a>  CPS1985<span class="sc">$</span>exp2 <span class="ot">&lt;-</span> CPS1985<span class="sc">$</span>exp <span class="sc">*</span> CPS1985<span class="sc">$</span>exp </span>
<span id="cb1069-27"><a href="análisis-de-datos-con-r.html#cb1069-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-28"><a href="análisis-de-datos-con-r.html#cb1069-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># R no nos permite elevar variables al cuadrado dentro de la función</span></span>
<span id="cb1069-29"><a href="análisis-de-datos-con-r.html#cb1069-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generamos variables categóricas que queramos incluir en la regresión</span></span>
<span id="cb1069-30"><a href="análisis-de-datos-con-r.html#cb1069-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-31"><a href="análisis-de-datos-con-r.html#cb1069-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Variables dicótomicas (sobre variable binarias).  </span></span>
<span id="cb1069-32"><a href="análisis-de-datos-con-r.html#cb1069-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>(CPS1985<span class="sc">$</span>gender)</span>
<span id="cb1069-33"><a href="análisis-de-datos-con-r.html#cb1069-33" aria-hidden="true" tabindex="-1"></a>  CPS1985<span class="sc">$</span>sexo <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(CPS1985<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&quot;male&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb1069-34"><a href="análisis-de-datos-con-r.html#cb1069-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>(CPS1985<span class="sc">$</span>union)</span>
<span id="cb1069-35"><a href="análisis-de-datos-con-r.html#cb1069-35" aria-hidden="true" tabindex="-1"></a>  CPS1985<span class="sc">$</span>sind <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(CPS1985<span class="sc">$</span>union <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb1069-36"><a href="análisis-de-datos-con-r.html#cb1069-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-37"><a href="análisis-de-datos-con-r.html#cb1069-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Variables dicótomas (sobre variables categóricas)</span></span>
<span id="cb1069-38"><a href="análisis-de-datos-con-r.html#cb1069-38" aria-hidden="true" tabindex="-1"></a>  CPS1985 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(CPS1985, </span>
<span id="cb1069-39"><a href="análisis-de-datos-con-r.html#cb1069-39" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">dummy</span>(<span class="fu">factor</span>(CPS1985<span class="sc">$</span>occupation), <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>))</span>
<span id="cb1069-40"><a href="análisis-de-datos-con-r.html#cb1069-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-41"><a href="análisis-de-datos-con-r.html#cb1069-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generando formas editables </span></span>
<span id="cb1069-42"><a href="análisis-de-datos-con-r.html#cb1069-42" aria-hidden="true" tabindex="-1"></a>  f0 <span class="ot">&lt;-</span> wage <span class="sc">~</span> education </span>
<span id="cb1069-43"><a href="análisis-de-datos-con-r.html#cb1069-43" aria-hidden="true" tabindex="-1"></a>  f1 <span class="ot">&lt;-</span> lnwage <span class="sc">~</span> education </span>
<span id="cb1069-44"><a href="análisis-de-datos-con-r.html#cb1069-44" aria-hidden="true" tabindex="-1"></a>  f2 <span class="ot">&lt;-</span> lnwage <span class="sc">~</span> education <span class="sc">+</span> experience</span>
<span id="cb1069-45"><a href="análisis-de-datos-con-r.html#cb1069-45" aria-hidden="true" tabindex="-1"></a>  f3 <span class="ot">&lt;-</span> lnwage <span class="sc">~</span> education <span class="sc">+</span> experience <span class="sc">+</span> exp2</span>
<span id="cb1069-46"><a href="análisis-de-datos-con-r.html#cb1069-46" aria-hidden="true" tabindex="-1"></a>  f4 <span class="ot">&lt;-</span> lnwage <span class="sc">~</span> education <span class="sc">+</span> experience <span class="sc">+</span> exp2 <span class="sc">+</span> sexo</span>
<span id="cb1069-47"><a href="análisis-de-datos-con-r.html#cb1069-47" aria-hidden="true" tabindex="-1"></a>  f5 <span class="ot">&lt;-</span> lnwage <span class="sc">~</span> education <span class="sc">+</span> experience <span class="sc">+</span> exp2 <span class="sc">+</span> sexo <span class="sc">+</span> sind</span>
<span id="cb1069-48"><a href="análisis-de-datos-con-r.html#cb1069-48" aria-hidden="true" tabindex="-1"></a>  f6 <span class="ot">&lt;-</span> lnwage <span class="sc">~</span> education <span class="sc">+</span> experience <span class="sc">+</span> exp2 <span class="sc">+</span> sexo <span class="sc">+</span> sind <span class="sc">+</span> CPS1985_services</span>
<span id="cb1069-49"><a href="análisis-de-datos-con-r.html#cb1069-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-50"><a href="análisis-de-datos-con-r.html#cb1069-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimaciones </span></span>
<span id="cb1069-51"><a href="análisis-de-datos-con-r.html#cb1069-51" aria-hidden="true" tabindex="-1"></a>  mco_0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f0, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-52"><a href="análisis-de-datos-con-r.html#cb1069-52" aria-hidden="true" tabindex="-1"></a>  mco_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f1, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-53"><a href="análisis-de-datos-con-r.html#cb1069-53" aria-hidden="true" tabindex="-1"></a>  mco_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f2, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-54"><a href="análisis-de-datos-con-r.html#cb1069-54" aria-hidden="true" tabindex="-1"></a>  mco_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f3, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-55"><a href="análisis-de-datos-con-r.html#cb1069-55" aria-hidden="true" tabindex="-1"></a>  mco_4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f4, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-56"><a href="análisis-de-datos-con-r.html#cb1069-56" aria-hidden="true" tabindex="-1"></a>  mco_5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f5, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-57"><a href="análisis-de-datos-con-r.html#cb1069-57" aria-hidden="true" tabindex="-1"></a>  mco_6 <span class="ot">&lt;-</span> <span class="fu">lm</span>(f6, <span class="at">data=</span>CPS1985, <span class="at">na.action =</span> na.exclude)</span>
<span id="cb1069-58"><a href="análisis-de-datos-con-r.html#cb1069-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-59"><a href="análisis-de-datos-con-r.html#cb1069-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-60"><a href="análisis-de-datos-con-r.html#cb1069-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Mirar los resultados de mis estimaciones </span></span>
<span id="cb1069-61"><a href="análisis-de-datos-con-r.html#cb1069-61" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_0)</span>
<span id="cb1069-62"><a href="análisis-de-datos-con-r.html#cb1069-62" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_1)</span>
<span id="cb1069-63"><a href="análisis-de-datos-con-r.html#cb1069-63" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_2)</span>
<span id="cb1069-64"><a href="análisis-de-datos-con-r.html#cb1069-64" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_3)</span>
<span id="cb1069-65"><a href="análisis-de-datos-con-r.html#cb1069-65" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_4)</span>
<span id="cb1069-66"><a href="análisis-de-datos-con-r.html#cb1069-66" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_5)</span>
<span id="cb1069-67"><a href="análisis-de-datos-con-r.html#cb1069-67" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mco_6)</span>
<span id="cb1069-68"><a href="análisis-de-datos-con-r.html#cb1069-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-69"><a href="análisis-de-datos-con-r.html#cb1069-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Exportar resultados </span></span>
<span id="cb1069-70"><a href="análisis-de-datos-con-r.html#cb1069-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-71"><a href="análisis-de-datos-con-r.html#cb1069-71" aria-hidden="true" tabindex="-1"></a><span class="co"># El paquete se llama &quot;stargazer&quot;</span></span>
<span id="cb1069-72"><a href="análisis-de-datos-con-r.html#cb1069-72" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="fu">here</span>(<span class="st">&quot;resultados&quot;</span>))</span>
<span id="cb1069-73"><a href="análisis-de-datos-con-r.html#cb1069-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1069-74"><a href="análisis-de-datos-con-r.html#cb1069-74" aria-hidden="true" tabindex="-1"></a><span class="fu">stargazer</span>(mco_1, mco_2, mco_3, <span class="co"># Modelos</span></span>
<span id="cb1069-75"><a href="análisis-de-datos-con-r.html#cb1069-75" aria-hidden="true" tabindex="-1"></a>          <span class="at">type =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb1069-76"><a href="análisis-de-datos-con-r.html#cb1069-76" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">&quot;Estimación MCO salarios vs. educ&quot;</span>, </span>
<span id="cb1069-77"><a href="análisis-de-datos-con-r.html#cb1069-77" aria-hidden="true" tabindex="-1"></a>          <span class="at">style =</span> <span class="st">&quot;qje&quot;</span>, <span class="co"># Estilos </span></span>
<span id="cb1069-78"><a href="análisis-de-datos-con-r.html#cb1069-78" aria-hidden="true" tabindex="-1"></a>          <span class="at">notes =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">footnotezie ***p=.01; ** p =.05; *p=.1&quot;</span>, </span>
<span id="cb1069-79"><a href="análisis-de-datos-con-r.html#cb1069-79" aria-hidden="true" tabindex="-1"></a>          <span class="at">notes.append =</span> F, <span class="co"># Para remplazar notas puestas anteriormente. </span></span>
<span id="cb1069-80"><a href="análisis-de-datos-con-r.html#cb1069-80" aria-hidden="true" tabindex="-1"></a>          <span class="at">single.row =</span> F, <span class="co"># Para que los errores estandar esten en la misma linea que los coeficientes </span></span>
<span id="cb1069-81"><a href="análisis-de-datos-con-r.html#cb1069-81" aria-hidden="true" tabindex="-1"></a>          <span class="at">no.space =</span> T, <span class="co"># No se generen espacios entre los regresores.</span></span>
<span id="cb1069-82"><a href="análisis-de-datos-con-r.html#cb1069-82" aria-hidden="true" tabindex="-1"></a>          <span class="at">out =</span> <span class="st">&quot;est1-3.doc&quot;</span>, </span>
<span id="cb1069-83"><a href="análisis-de-datos-con-r.html#cb1069-83" aria-hidden="true" tabindex="-1"></a>          <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
</div>
<div id="r-markdown" class="section level3 hasAnchor" number="8.8.3">
<h3><span class="header-section-number">8.8.3</span> R Markdown<a href="análisis-de-datos-con-r.html#r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Herramienta para crear informes que sean automáticos, reproducibles
y con datos que se puedan actualizar en el tiempo.</li>
<li>Se pueden generar informes en formato word, pdf, html.</li>
<li>R markdown (Rmd) es básicamente una intersección entre texto
narrativo y código que genera visualizaciones y estimaciones con el
fin de analizar datos.</li>
<li>Rmd puede generar: texto plano, segmentos de co ́digo, gr ́aficos,
tablas, tableros interactivos.</li>
<li>R markdown es especialmente útil:
<ul>
<li><strong>Informes rutinarios:</strong> Por ejemplo, informe semanal sobre un
conjunto de análisis que se actualiza en el tiempo.</li>
<li><strong>Informes de análisis para un subconjunto de datos:</strong> Por
ejemplo, informes por país de una base de datos que contiene
información de distintos países.</li>
</ul></li>
</ul>
<div id="conceptos-básicos" class="section level4 hasAnchor" number="8.8.3.1">
<h4><span class="header-section-number">8.8.3.1</span> Conceptos Básicos<a href="análisis-de-datos-con-r.html#conceptos-básicos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Markdown</strong> es el lenguaje que permite escribir documentos en texto
plano. Los archivos escritos en Markdown tienen la extensión <code>.md</code>.</li>
<li><strong>R Markdown</strong> es la variación especifica para R. Permite escribir
texto plano con Markdown y adjuntar código proveniente de R. Los
archivos escritos en R Markdown tienen la extensión <code>.Rmd</code>.</li>
<li><strong>knirt:</strong> Paquete de R. Sirve para leer los segmentos de código que
queremos introducir en los reportes.</li>
<li><strong>Pandoc:</strong> Sirve para convertir el output en un archivo con formato
word/pdf/html. Es un software que viene instalado automáticamente en
<ol start="18" style="list-style-type: upper-alpha">
<li></li>
</ol></li>
</ul>
</div>
<div id="proceso" class="section level4 hasAnchor" number="8.8.3.2">
<h4><span class="header-section-number">8.8.3.2</span> Proceso<a href="análisis-de-datos-con-r.html#proceso" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="figure">
<img src="01figuras/C8.1.png" alt="" />
<p class="caption">Fuente: <a href="https://rmarkdown.rstudio.com/authoring" class="uri">https://rmarkdown.rstudio.com/authoring</a> quick
tour.html</p>
</div>
</div>
<div id="primer-archivo-en-r-markdown" class="section level4 hasAnchor" number="8.8.3.3">
<h4><span class="header-section-number">8.8.3.3</span> Primer archivo en R Markdown<a href="análisis-de-datos-con-r.html#primer-archivo-en-r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="01figuras/C8.2.png" /> <img src="01figuras/C8.3.png" /></p>
<ul>
<li>Opciones para elegir el tipo de documento y si quiero confeccionar
un documento/presentación/un tablero u otros tipos de archivo más
detallados.</li>
<li>Opciones para cambiar título y autor(a).</li>
</ul>
</div>
<div id="directorio-de-trabajo" class="section level4 hasAnchor" number="8.8.3.4">
<h4><span class="header-section-number">8.8.3.4</span> Directorio de trabajo<a href="análisis-de-datos-con-r.html#directorio-de-trabajo" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>El directorio de trabajo de un archivo <code>.Rmd</code> será donde esta
guardado el archivo con esa extensión.</li>
<li>De este modo, R buscará los archivos en la carpeta en donde este
guardado el archivo <code>.Rmd</code>.</li>
<li>Para este ejercicio simplemente dejaremos los datos que utilizaremos
junto al archivo.</li>
</ul>
</div>
<div id="componentes-de-r-markdown" class="section level4 hasAnchor" number="8.8.3.5">
<h4><span class="header-section-number">8.8.3.5</span> Componentes de R Markdown<a href="análisis-de-datos-con-r.html#componentes-de-r-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="01figuras/C8.4.png" /></p>
<ul>
<li>YAML: fijar título, fecha y tipo de output.</li>
<li>Markdown text: introducir texto.</li>
<li>Code Chunk: cargar paquetes, datos, visualizaciones.</li>
</ul>
<p><img src="01figuras/C8.5.png" /></p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Chang, Andrew C, and Phillip Li. 2015. <span>“Is Economics Research Replicable? Sixty Published Papers from Thirteen Journals Say’usually Not’.”</span>
</div>
<div class="csl-entry">
Christensen, Garret, and Edward Miguel. 2018. <span>“Transparency, Reproducibility, and the Credibility of Economics Research.”</span> <em>Journal of Economic Literature</em> 56 (3): 920–80.
</div>
<div class="csl-entry">
Gentzkow, Matthew, and Jesse M Shapiro. 2014. <span>“Code and Data for the Social Sciences: A Practitioner’s Guide.”</span> <em>Chicago, IL: University of Chicago</em>.
</div>
<div class="csl-entry">
Long, J Scott, and J Scott Long. 2009. <em>The Workflow of Data Analysis Using Stata</em>. Stata Press College Station, TX.
</div>
</div>
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="análisis-de-datos-con-python.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ncamposbijit/ncamposbijit/Analisis-de-Datos-Stata-nivel-avanzado/edit/main/08-cursoR.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ncamposbijit/ncamposbijit/Analisis-de-Datos-Stata-nivel-avanzado/blob/main/08-cursoR.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
