<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>9 Análisis de datos con R | Análisis de Datos con Stata, R y Python</title>
<meta name="author" content="Nicolás Campos Bijit">
<meta name="generator" content="bookdown 0.32 with bs4_book()">
<meta property="og:title" content="9 Análisis de datos con R | Análisis de Datos con Stata, R y Python">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="9 Análisis de datos con R | Análisis de Datos con Stata, R y Python">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style4.css">
<meta name="description" content="9.1 Introducción a R y RStudio  9.1.1 ¿Por qué utilizar R como lenguaje de programación? Código abierto: Licencia no tiene costo. Versátil: análisis estadístico y econométrico + tareas de...">
<meta property="og:description" content="9.1 Introducción a R y RStudio  9.1.1 ¿Por qué utilizar R como lenguaje de programación? Código abierto: Licencia no tiene costo. Versátil: análisis estadístico y econométrico + tareas de...">
<meta name="twitter:description" content="9.1 Introducción a R y RStudio  9.1.1 ¿Por qué utilizar R como lenguaje de programación? Código abierto: Licencia no tiene costo. Versátil: análisis estadístico y econométrico + tareas de...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Análisis de Datos con Stata, R y Python</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introducción</a></li>
<li><a class="" href="buenas-pr%C3%A1cticas-de-programaci%C3%B3n-y-visualizaci%C3%B3n.html"><span class="header-section-number">2</span> Buenas prácticas de programación y visualización</a></li>
<li><a class="" href="programar-do---files.html"><span class="header-section-number">3</span> Programar do - files</a></li>
<li><a class="" href="programar-ado---files.html"><span class="header-section-number">4</span> Programar ado - files</a></li>
<li><a class="" href="exportar-informaci%C3%B3n.html"><span class="header-section-number">5</span> Exportar Información</a></li>
<li><a class="" href="manejo-de-grandes-bases-de-datos-en-stata.html"><span class="header-section-number">6</span> Manejo de grandes bases de datos en Stata</a></li>
<li><a class="" href="mata.html"><span class="header-section-number">7</span> Mata</a></li>
<li><a class="" href="an%C3%A1lisis-de-datos-con-python.html"><span class="header-section-number">8</span> Análisis de Datos con Python</a></li>
<li><a class="active" href="an%C3%A1lisis-de-datos-con-r.html"><span class="header-section-number">9</span> Análisis de datos con R</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="análisis-de-datos-con-r" class="section level1" number="9">
<h1>
<span class="header-section-number">9</span> Análisis de datos con R<a class="anchor" aria-label="anchor" href="#an%C3%A1lisis-de-datos-con-r"><i class="fas fa-link"></i></a>
</h1>
<div id="introducción-a-r-y-rstudio" class="section level2" number="9.1">
<h2>
<span class="header-section-number">9.1</span> Introducción a R y RStudio<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n-a-r-y-rstudio"><i class="fas fa-link"></i></a>
</h2>
<div id="por-qué-utilizar-r-como-lenguaje-de-programación" class="section level3" number="9.1.1">
<h3>
<span class="header-section-number">9.1.1</span> ¿Por qué utilizar R como lenguaje de programación?<a class="anchor" aria-label="anchor" href="#por-qu%C3%A9-utilizar-r-como-lenguaje-de-programaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p><strong>Código abierto:</strong> Licencia no tiene costo.</p></li>
<li><p><strong>Versátil:</strong> análisis estadístico y econométrico + tareas de
programación útiles (ej. web - scraping).</p></li>
<li><p><strong>Flexible y reproducible:</strong> garantiza reproducibilidad, es flexible
ante cambios y detección de errores.</p></li>
<li><p><strong>Demandado:</strong> Lenguajes de programación de código abierto son solicitados cada vez más en el mercado laboral.</p></li>
</ul>
</div>
<div id="términos-clave-y-recurrentes-a-lo-largo-del-curso" class="section level3" number="9.1.2">
<h3>
<span class="header-section-number">9.1.2</span> Términos clave y recurrentes a lo largo del curso<a class="anchor" aria-label="anchor" href="#t%C3%A9rminos-clave-y-recurrentes-a-lo-largo-del-curso"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>
<strong>RStudio:</strong> Interfaz Gráfica para el usuario. Esta diseñada para un
uso más sencillo de R.</li>
<li>
<strong>Objetos:</strong> Cualquier cosa que guardes en R. Por ejemplo: bases de
datos, variables, listas de nombres, gráficos.</li>
<li>
<strong>Funciones:</strong> Una operación producida por un código tal que acepta
insumos y retorna productos.</li>
<li>
<strong>Paquetes:</strong> Es un conjunto de funciones agrupadas según su objetivo.</li>
<li>
<strong>Scripts/Códigos:</strong> Documento que contiene todos los comandos
utilizados en un proceso de análisis de datos.</li>
</ul>
</div>
<div id="recursos-de-aprendizaje" class="section level3" number="9.1.3">
<h3>
<span class="header-section-number">9.1.3</span> Recursos de Aprendizaje<a class="anchor" aria-label="anchor" href="#recursos-de-aprendizaje"><i class="fas fa-link"></i></a>
</h3>
<div style="text-align: justify">
<ul>
<li>Hojas de resumen: material disponible con un resumen de los
principales comandos/paquetes/funciones para distintos temas.
Disponibles en: <a href="https://www.rstudio.com/resources/cheatsheets/" class="uri">https://www.rstudio.com/resources/cheatsheets/</a>
</li>
</ul>
</div>
<ul>
<li>Foros y sitios web:
<ul>
<li><a href="https://stackoverflow.com/questions/tagged/r">Stackoverflow</a></li>
<li><a href="https://preettheman.medium.com/awesome-tricks-every-r-coder-should-know-c4220cd2cfbc">Medium</a></li>
<li><a href="https://posit.co/">El Blog de RStudio</a></li>
</ul>
</li>
<li>Libros:
<ul>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="https://posit.co/resources/videos/">Recursos sobre R en
español.</a></li>
<li><a href="https://bookdown.org/">Bookdown</a></li>
</ul>
</li>
<li>
</ul>
</div>
<div id="interfaz-rstudio" class="section level3" number="9.1.4">
<h3>
<span class="header-section-number">9.1.4</span> Interfaz RStudio<a class="anchor" aria-label="anchor" href="#interfaz-rstudio"><i class="fas fa-link"></i></a>
</h3>
<div id="cuatro-secciones-en-rstudio" class="section level4" number="9.1.4.1">
<h4>
<span class="header-section-number">9.1.4.1</span> Cuatro secciones en Rstudio<a class="anchor" aria-label="anchor" href="#cuatro-secciones-en-rstudio"><i class="fas fa-link"></i></a>
</h4>
<p>Las fundamentales son: <em>Scripts, Console,
Environment/Files/Help</em>.</p>
<ul>
<li>
<strong>Scripts:</strong> Donde desarrollaremos los códigos. Es un cuarderno.</li>
<li>
<strong>Console:</strong> Donde veremos los resultados.</li>
<li>
<strong>Environment:</strong> Donde veremos los datos y la información que vamos generando.</li>
<li>
<strong>Files:</strong> Donde veremos los archivos asociados a nuestros proyectos.</li>
<li>
<strong>Help:</strong> Donde desarrollaremos los códigos. Es un cuarderno.</li>
</ul>
<p>Para personalizar RStudio hay que ir a: <strong>Tools -&gt; Global Options</strong>.
Allí pueden cambiar el color del ambiente, tipo de letra, orden. La
idea es utilizar RStudio de la forma mas intuitiva posible.</p>
</div>
<div id="escribir-comentarios" class="section level4" number="9.1.4.2">
<h4>
<span class="header-section-number">9.1.4.2</span> Escribir comentarios<a class="anchor" aria-label="anchor" href="#escribir-comentarios"><i class="fas fa-link"></i></a>
</h4>
<p>Es muy importante escribir comentarios a lo largo de los códigos. Tambíen es importante saber escribir <strong>buenos</strong> comentarios. Una buena guía que habla un poco de eso y de muchas cosas más es: <a href="https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf">Code and Data for the Social Sciences: A Practitioner’s Guide</a>.</p>
<p><code>(#)</code> para escribir comentarios en el script. Si quiero marcar varias
lineas como comentario: <code>ctrl + shift + c</code></p>
</div>
<div id="índices" class="section level4" number="9.1.4.3">
<h4>
<span class="header-section-number">9.1.4.3</span> Índices<a class="anchor" aria-label="anchor" href="#%C3%ADndices"><i class="fas fa-link"></i></a>
</h4>
<p>Es importante escribir índices para documentar sus códigos. Para
observarlo debo escribir: <code>ctrl + shift + o</code></p>
<p>Los títulos pueden estar jerarquizados:</p>
<div class="sourceCode" id="cb851"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># El mas importante</span></span>
<span><span class="co">## Este es un poco menos importante</span></span>
<span><span class="co">### Este es un poco menos importante que el anterior</span></span>
<span><span class="co">#### El menos importante</span></span></code></pre></div>
<p>Es importante actualizarlo constantemente para no perder funcionalidad.</p>
</div>
</div>
<div id="instalación-de-paquetes-y-ayuda" class="section level3" number="9.1.5">
<h3>
<span class="header-section-number">9.1.5</span> Instalación de paquetes y ayuda<a class="anchor" aria-label="anchor" href="#instalaci%C3%B3n-de-paquetes-y-ayuda"><i class="fas fa-link"></i></a>
</h3>
<p>Los paquetes son basicamente conjuntos de funciones. Los paquetes se
instalan una vez, pero se llaman siempre que se vayan a utilizar.</p>
<div id="librerías" class="section level4" number="9.1.5.1">
<h4>
<span class="header-section-number">9.1.5.1</span> Librerías<a class="anchor" aria-label="anchor" href="#librer%C3%ADas"><i class="fas fa-link"></i></a>
</h4>
<p>Esto se puede hacer de dos maneras:</p>
<ol style="list-style-type: decimal">
<li><p>Desde la pestaña <em>packages</em> en la esquina inferior derecha.</p></li>
<li><p>Con comandos</p></li>
</ol>
<div class="sourceCode" id="cb852"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre></div>
<p>Varios paquetes a la vez:</p>
<div class="sourceCode" id="cb853"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>,<span class="st">"ggplot2"</span>,<span class="st">"rio"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Error común:</p>
<div class="sourceCode" id="cb854"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span><span class="op">)</span></span></code></pre></div>
<p>Por lo general es bueno instalarlas desde el inicio del trabajo dado que
comúnmente usamos las mismas librerías al realizar análisis de datos.
Con esta función le decimos a R que instale el paquete si este no está
instalado (algo típico cuando cambiamos de computador):</p>
<div class="sourceCode" id="cb855"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span><span class="op">}</span></span></code></pre></div>
<p>Cargar librerías:</p>
<div class="sourceCode" id="cb856"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Si queremos ver que hay dentro de cada paquete:</p>
<div class="sourceCode" id="cb857"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="st">"package:dplyr"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#ls = list objects</span></span></code></pre></div>
<p><strong>Importante</strong>: el paquete debe ser instalado una vez, pero cargado cada
vez que se utilice. Muchas veces hay actualizaciones. Para revisar e
instalarlas.</p>
<div class="sourceCode" id="cb858"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html">update.packages</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Alternativamente puedo conectar paquete con función utilizando <code>::</code>. Si
hago esto no es necesario llamar a la librería para utilizar esa función
en particular. No obstante, lo recomendable es cargar todas las
librerías de los paquetes que voy a utilizar al inicio.</p>
</div>
<div id="función-de-ayuda" class="section level4" number="9.1.5.2">
<h4>
<span class="header-section-number">9.1.5.2</span> Función de ayuda<a class="anchor" aria-label="anchor" href="#funci%C3%B3n-de-ayuda"><i class="fas fa-link"></i></a>
</h4>
<p>Sobre una función en particular:</p>
<div class="sourceCode" id="cb859"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span> </span>
<span><span class="op">?</span><span class="va">mean</span> </span>
<span><span class="va">mean</span> <span class="co">#pulsar la tecla F1 </span></span>
<span><span class="va">sd</span></span></code></pre></div>
<p>Sobre un paquete en particular:</p>
<div class="sourceCode" id="cb860"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span>help<span class="op">=</span><span class="st">"dplyr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="shortcuts-útiles" class="section level4" number="9.1.5.3">
<h4>
<span class="header-section-number">9.1.5.3</span> <em>Shortcuts</em> útiles<a class="anchor" aria-label="anchor" href="#shortcuts-%C3%BAtiles"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<code>Esc</code>: interrumpir el comando actual</li>
<li>
<code>Ctrl + s</code>: guardar</li>
<li>
<code>tab</code>: autocompletar</li>
<li>
<code>Ctrl + Enter</code>: ejecutar línea</li>
<li>
<code>Ctrl + Shift + C</code>: comentar</li>
<li>
<code>&lt;-</code>: Alt + - / option + -</li>
<li>
<code>%&gt;%</code>: ctrl + shift + m (<em>pipe</em>)</li>
<li>
<code>Ctrl + l</code>: limpiar</li>
<li>
<code>Ctrl + alt + b</code>: ejecutar todo hasta aquí (flechas en la consola me
permiten ver los últimos comandos utilizados).</li>
<li>
<code>Shift + lineas</code>: seleccionar varias lineas</li>
<li>
<code>Ctrl + f</code>: buscar/remplazar</li>
<li>
<code>Ctrl + "flecha arriba" en la consola</code>: ver comandos utilizados.</li>
</ul>
</div>
<div id="limpiar-environment-en-r" class="section level4" number="9.1.5.4">
<h4>
<span class="header-section-number">9.1.5.4</span> Limpiar <em>“environment”</em> en R<a class="anchor" aria-label="anchor" href="#limpiar-environment-en-r"><i class="fas fa-link"></i></a>
</h4>
<p>Eliminar todos los objetos:</p>
<div class="sourceCode" id="cb861"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Eliminar sólo un objeto:</p>
<div class="sourceCode" id="cb862"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">data1</span><span class="op">)</span></span></code></pre></div>
<p>Si quiero limpiar la consola tengo que apretar <code>Ctrl + L</code>.</p>
</div>
<div id="identificar-el-paquete-de-una-función" class="section level4" number="9.1.5.5">
<h4>
<span class="header-section-number">9.1.5.5</span> Identificar el paquete de una función<a class="anchor" aria-label="anchor" href="#identificar-el-paquete-de-una-funci%C3%B3n"><i class="fas fa-link"></i></a>
</h4>
<p>Hay ocasiones en que queremos saber de que paquete es una función
determinada. Para ello, revisar:
<a href="https://sebastiansauer.github.io/finds_funs/" class="uri">https://sebastiansauer.github.io/finds_funs/</a></p>
</div>
<div id="error-común" class="section level4" number="9.1.5.6">
<h4>
<span class="header-section-number">9.1.5.6</span> Error común<a class="anchor" aria-label="anchor" href="#error-com%C3%BAn"><i class="fas fa-link"></i></a>
</h4>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb863"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"hola"</span></span></code></pre></div>
<p>Noten que en la consola aparece un signo <code>+</code>. En estos casos RStudio se
detiene porque probablemente se les olvido un <code>)</code> o bien un <code>#</code>. En
estos casos hay que corregir el error para ejecutar nuevamente y luego
apretar <code>esc</code> en la consola para seguir ejecutando los comandos.</p>
</div>
</div>
<div id="manipulación-de-objetos" class="section level3" number="9.1.6">
<h3>
<span class="header-section-number">9.1.6</span> Manipulación de objetos<a class="anchor" aria-label="anchor" href="#manipulaci%C3%B3n-de-objetos"><i class="fas fa-link"></i></a>
</h3>
<div id="usar-r-como-calculadoraejecutar-comandos" class="section level4" number="9.1.6.1">
<h4>
<span class="header-section-number">9.1.6.1</span> Usar R como calculadora/ejecutar comandos<a class="anchor" aria-label="anchor" href="#usar-r-como-calculadoraejecutar-comandos"><i class="fas fa-link"></i></a>
</h4>
<p>De manera separada (seleccionar las <code>ordenes+ctrl+Enter</code>):</p>
<div class="sourceCode" id="cb864"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">+</span><span class="fl">2</span> </span>
<span><span class="fl">3</span><span class="op">*</span><span class="fl">5</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Ejecutar todas las instrucciones:</p>
<div class="sourceCode" id="cb865"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">+</span><span class="fl">2</span> ; <span class="fl">3</span><span class="op">*</span><span class="fl">5</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fl">3</span><span class="op">+</span><span class="fl">4</span> </span>
<span><span class="fl">5</span><span class="op">*</span><span class="fl">4</span> </span>
<span><span class="fl">8</span><span class="op">/</span><span class="fl">4</span> </span>
<span><span class="fl">6</span><span class="op">^</span><span class="fl">7</span></span>
<span><span class="fl">6</span><span class="op">^</span><span class="fl">77</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">91</span><span class="op">)</span> <span class="co"># raiz cuadrada</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">7.3</span><span class="op">)</span> <span class="co"># redondear</span></span></code></pre></div>
<p>Incluso grandes operaciones:</p>
<div class="sourceCode" id="cb866"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">91</span><span class="op">)</span> <span class="op">+</span> <span class="fl">4892788</span><span class="op">*</span><span class="fl">673</span> <span class="op">-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">67893.9181</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Incluso uso de números imaginarios:</p>
<div class="sourceCode" id="cb867"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2i</span><span class="op">+</span><span class="fl">5i</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">25i</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="creacion-de-objetos-asignaciones-y-funciones" class="section level4" number="9.1.6.2">
<h4>
<span class="header-section-number">9.1.6.2</span> Creacion de objetos: asignaciones y funciones<a class="anchor" aria-label="anchor" href="#creacion-de-objetos-asignaciones-y-funciones"><i class="fas fa-link"></i></a>
</h4>
<p>con el signo <code>&lt;-</code> asignamos valores. También se puede utilizar <code>=</code>, pero
no es recomendable, ya que confunde.</p>
<div class="sourceCode" id="cb868"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">+</span> <span class="fl">4</span> </span>
<span><span class="va">y</span></span></code></pre></div>
<p>Las asignaciones son MUDAS. Si no las llamo, no aparecen en la consola.
Lo anterior es una operación sencilla, pero lo que queremos es generar
asignaciones con funciones.</p>
<p>Podemos utilizar funciones. Las funciones son la parte central del uso
de R. Algunas funciones vienen instaladas en R. Otras funciones hay que
obtenerlas desde paquetes. También es posible escribir tus propias
funciones <code>()</code>. Las funciones estan por lo general escritas en
paréntesis, por ejemplo <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>. Hay ocasiones en que las funciones
estan relacionadas con un paquete específico <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code>.</p>
<ul>
<li>Ejemplo 1: función simple</li>
</ul>
<div class="sourceCode" id="cb869"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">49</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Ejemplo 2: sobre una base de datos</li>
</ul>
<div class="sourceCode" id="cb870"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span></code></pre></div>
<p><em>Nota:</em> mtcars viene incluidad en R.</p>
<p>Para ver mas:</p>
<div class="sourceCode" id="cb871"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Otra función:</p>
<div class="sourceCode" id="cb872"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span> </span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span> </span>
<span><span class="va">z</span></span></code></pre></div>
<p>Uso de funciones aritméticas:</p>
<div class="sourceCode" id="cb873"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></code></pre></div>
<p>Relaciones entre objetos:</p>
<div class="sourceCode" id="cb874"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></code></pre></div>
<p>Creación de objetos por asignación:</p>
<div class="sourceCode" id="cb875"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">3</span><span class="op">+</span><span class="fl">10</span> </span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">*</span><span class="fl">4</span></span></code></pre></div>
<p>Comparar objetos:</p>
<div class="sourceCode" id="cb876"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&gt;</span> <span class="va">b</span></span></code></pre></div>
<p>Notar que las asignaciones son silenciosas:</p>
<div class="sourceCode" id="cb877"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> </span>
<span><span class="va">b</span> </span>
<span><span class="co"># o altenativamente utilizar print </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></code></pre></div>
<p>Creación de objetos usando funciones:</p>
<div class="sourceCode" id="cb878"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">valores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span>
<span><span class="va">promedio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">valores</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">promedio</span><span class="op">)</span></span>
<span><span class="va">promedio</span></span></code></pre></div>
<p>Podemos escribir un promedio aquí usando función <code>mean():</code></p>
<div class="sourceCode" id="cb879"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span> </span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">valores1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span></span>
<span><span class="va">promedio1</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">valores1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">promedio1</span><span class="op">)</span></span></code></pre></div>
<p>Limpiamos datos nuevamente:</p>
<div class="sourceCode" id="cb880"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">promedio</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="creacion-de-objetos-y-asignaciones" class="section level4" number="9.1.6.3">
<h4>
<span class="header-section-number">9.1.6.3</span> Creacion de objetos y asignaciones<a class="anchor" aria-label="anchor" href="#creacion-de-objetos-y-asignaciones"><i class="fas fa-link"></i></a>
</h4>
<p>Es importante espaciar codigos. Definimos dos vectores utilizando la
función <code><a href="https://rdrr.io/r/base/c.html">c()</a></code></p>
<div class="sourceCode" id="cb881"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">educ</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">12</span>,<span class="fl">8</span>,<span class="fl">11</span>,<span class="fl">16</span>,<span class="fl">14</span>,<span class="fl">8</span>,<span class="fl">10</span>,<span class="fl">14</span>,<span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">ingreso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">325</span>,<span class="fl">415</span>,<span class="fl">360</span>,<span class="fl">380</span>,<span class="fl">670</span>,<span class="fl">545</span>,<span class="fl">350</span>,<span class="fl">420</span>,<span class="fl">680</span>,<span class="fl">465</span><span class="op">)</span></span></code></pre></div>
<p>Calculamos promedio, desviación estándar y correlación</p>
<div class="sourceCode" id="cb882"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ingreso</span><span class="op">)</span></span>
<span><span class="va">promedioingreso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ingreso</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">ingreso</span><span class="op">)</span></span>
<span><span class="va">sdingreso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">ingreso</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">educ</span>, <span class="va">ingreso</span><span class="op">)</span></span>
<span><span class="va">coreduing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">educ</span>,<span class="va">ingreso</span><span class="op">)</span></span></code></pre></div>
<p>Graficamos</p>
<div class="sourceCode" id="cb883"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">educ</span>, <span class="va">ingreso</span><span class="op">)</span></span></code></pre></div>
<p>Estimar una regresión lineal</p>
<div class="sourceCode" id="cb884"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">ingreso</span> <span class="op">~</span> <span class="va">educ</span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.1.1:</b> Nombrar objetos</p>
<p>De los siguientes ejemplos, ¿Cuáles son nombres de variables válidas en
R?</p>
<div class="sourceCode" id="cb885"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># min_height</span></span>
<span><span class="co"># max.height</span></span>
<span><span class="co"># _age</span></span>
<span><span class="co"># .mass</span></span>
<span><span class="co"># MaxLength</span></span>
<span><span class="co"># Min-length</span></span>
<span><span class="co"># 2widths</span></span>
<span><span class="co"># Calsius2kelvin</span></span></code></pre></div>
</div>
</div>
</div>
<div id="tipos-de-objetos" class="section level3" number="9.1.7">
<h3>
<span class="header-section-number">9.1.7</span> Tipos de objetos<a class="anchor" aria-label="anchor" href="#tipos-de-objetos"><i class="fas fa-link"></i></a>
</h3>
<div id="vectores" class="section level4" number="9.1.7.1">
<h4>
<span class="header-section-number">9.1.7.1</span> Vectores<a class="anchor" aria-label="anchor" href="#vectores"><i class="fas fa-link"></i></a>
</h4>
<p>R opera componente por componente, por lo que es muy sencillo poder
trabajar con vectores y matrices.</p>
<p>Para crear un vector utilizamos la funcion <code><a href="https://rdrr.io/r/base/c.html">c()</a></code></p>
<div class="sourceCode" id="cb886"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#o bien</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">6</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<p>Veamos los vectores</p>
<div class="sourceCode" id="cb887"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span> </span>
<span><span class="va">z</span></span></code></pre></div>
<p>Supongamos los siguientes vectores:</p>
<div class="sourceCode" id="cb888"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">y</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>¿Cuál es su longitud?</p>
<div class="sourceCode" id="cb889"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<p>Si no tienen la misma longitud, ¿cual sería el resultado de <code>x + y</code>?</p>
<div class="sourceCode" id="cb890"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="va">y</span> </span>
<span><span class="va">z</span></span></code></pre></div>
<p><strong>IMPORTANTE</strong>: En este caso R realiza la operación de todos modos, pero
nos indica que hay una advertencia de que sus dimensiones difieren. Lo
relevante de los vectores es que sólo se puede concatenar elementos del
mismo tipo, de lo contrario R nos arroja error.</p>
<div class="sourceCode" id="cb891"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1.5</span><span class="op">:</span><span class="fl">9.5</span>,<span class="fl">4</span><span class="op">)</span> <span class="co">#genera repeticiones de los valores definidos </span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x1</span>,<span class="va">x2</span><span class="op">)</span></span>
<span><span class="va">x4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Subconjunto de un vector</p>
<div class="sourceCode" id="cb892"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="co"># obtener el tercer elemento </span></span>
<span><span class="va">y</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> </span>
<span><span class="va">y</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">y</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">y</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">16</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
</div>
<div id="matrices-1" class="section level4" number="9.1.7.2">
<h4>
<span class="header-section-number">9.1.7.2</span> Matrices<a class="anchor" aria-label="anchor" href="#matrices-1"><i class="fas fa-link"></i></a>
</h4>
<div id="definir-matrices" class="section level5" number="9.1.7.2.1">
<h5>
<span class="header-section-number">9.1.7.2.1</span> Definir matrices<a class="anchor" aria-label="anchor" href="#definir-matrices"><i class="fas fa-link"></i></a>
</h5>
<p>Sintaxis general</p>
<div class="sourceCode" id="cb893"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mi.matriz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="va">vector</span>,</span>
<span>                    ncol <span class="op">=</span> <span class="va">num_columnas</span>, nrow <span class="op">=</span> <span class="va">num_filas</span>,</span>
<span>                    byrow <span class="op">=</span> <span class="va">valor_logico</span>,</span>
<span>                    dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">vector_nombres_filas</span>,</span>
<span>                                   <span class="va">vector_nombres_columnas</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Para crear matrices utilizamos la función <code><a href="https://rdrr.io/r/base/matrix.html">matrix()</a></code></p>
<div class="sourceCode" id="cb894"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span> <span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>, </span>
<span>             nrow <span class="op">=</span> <span class="fl">2</span>, </span>
<span>             ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>, </span>
<span>             <span class="fl">2</span>, </span>
<span>             <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>No es necesario poner <code>data=</code>, pero por orden mental es mejor hacerlo.</p>
<div class="sourceCode" id="cb895"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> </span>
<span><span class="va">x1</span></span></code></pre></div>
<p>Notar que por DEFECTO rellena columna por columna. Podemos explicitar
que queremos realizar la matriz fila por fila</p>
<div class="sourceCode" id="cb896"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>          nrow <span class="op">=</span> <span class="fl">3</span>, </span>
<span>          ncol <span class="op">=</span> <span class="fl">2</span>, </span>
<span>          byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">y</span></span></code></pre></div>
<p>Podemos saber cual es la dimensión de <code>x</code></p>
<div class="sourceCode" id="cb897"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="co"># cantidad de filas</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="co"># cantidad de columnas</span></span>
<span></span>
<span><span class="va">y</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">2</span>, byrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">y</span></span></code></pre></div>
<p>Los va a repetir!</p>
<div class="sourceCode" id="cb898"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">2</span>, ncol<span class="op">=</span><span class="fl">3</span>, byrow<span class="op">=</span> <span class="fl">2</span><span class="op">)</span> </span>
<span><span class="va">y</span></span></code></pre></div>
<p>Notar que el orden en cualquier matrix es <strong>filas x columnas</strong>. Podemos
también omitir la cantidad de filas o columnas en la matriz y obtenemos
el mismo resultado</p>
<div class="sourceCode" id="cb899"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, <span class="fl">2</span>, byrow<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">y</span> </span></code></pre></div>
<p>En el caso de crear matrices vacías hay que definir las dimensiones</p>
<div class="sourceCode" id="cb900"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span>nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="co">#útil para los loops</span></span></code></pre></div>
<p>Darle nombre a las filas y columnas</p>
<div class="sourceCode" id="cb901"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>             dimnames<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"X1"</span>,<span class="st">"X2"</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Y1"</span>, <span class="st">"Y2"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y</span></span></code></pre></div>
<p>Se puede realizar desde las funciones colnames y rownames</p>
<div class="sourceCode" id="cb902"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Variable 1"</span>, <span class="st">"Variable 2"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a1"</span>, <span class="st">"a2"</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<p>Añadir filas o columnas a una matriz</p>
<div class="sourceCode" id="cb903"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="unir-matrices" class="section level5" number="9.1.7.2.2">
<h5>
<span class="header-section-number">9.1.7.2.2</span> Unir matrices<a class="anchor" aria-label="anchor" href="#unir-matrices"><i class="fas fa-link"></i></a>
</h5>
<p>Unir mediante filas (queda con el nombre del vector la observación)</p>
<div class="sourceCode" id="cb904"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">w</span><span class="op">)</span> </span>
<span><span class="va">z</span></span></code></pre></div>
<p>Unir mediante columnas</p>
<div class="sourceCode" id="cb905"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">w</span><span class="op">)</span> </span>
<span><span class="va">z</span></span></code></pre></div>
<p>¿Y si tienen diferente cantidad de filas y/o columnas? repite el vector
o observaci?n con menor longitud</p>
<div class="sourceCode" id="cb906"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">y</span></span>
<span></span>
<span><span class="va">z</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span></span>
<span><span class="va">z</span> </span></code></pre></div>
<p>Podemos pasar un vector a una matriz</p>
<div class="sourceCode" id="cb907"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">&lt;-</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span>
<span><span class="va">x</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<p>Trasponer matrices:</p>
<div class="sourceCode" id="cb908"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">xtraspuesta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Potencialmente se pueden hacer muchas más operaciones que involucren
matrices. Por ejemplo, subconjuntos de una matriz: segundo y cuarto
elemento de la segunda fila:</p>
<div class="sourceCode" id="cb909"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">M</span></span>
<span><span class="va">M</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">M</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span>
<span><span class="va">M</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">M</span><span class="op">[</span><span class="fl">2</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="herramientas-de-programación-1" class="section level2" number="9.2">
<h2>
<span class="header-section-number">9.2</span> Herramientas de programación<a class="anchor" aria-label="anchor" href="#herramientas-de-programaci%C3%B3n-1"><i class="fas fa-link"></i></a>
</h2>
<div id="objetos-adicionales" class="section level3" number="9.2.1">
<h3>
<span class="header-section-number">9.2.1</span> Objetos adicionales<a class="anchor" aria-label="anchor" href="#objetos-adicionales"><i class="fas fa-link"></i></a>
</h3>
<div id="arreglos" class="section level4" number="9.2.1.1">
<h4>
<span class="header-section-number">9.2.1.1</span> Arreglos<a class="anchor" aria-label="anchor" href="#arreglos"><i class="fas fa-link"></i></a>
</h4>
<p>Crear arreglos: La única diferencia con matrices es que acepta mas de
dos dimensiones.</p>
<p>Para generarlos:</p>
<div class="sourceCode" id="cb910"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mi.arreglo</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="va">vector</span>, </span>
<span>                   <span class="va">dimensiones</span>, </span>
<span>                   dimnames <span class="op">=</span> <span class="va">etiquetas_dim</span><span class="op">)</span></span></code></pre></div>
<p>Para nombrarlos definimos etiquetas y luego las agregamos. Es mucho
mejor y mas ordenado hacerlo así:</p>
<div class="sourceCode" id="cb911"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dim1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A2"</span><span class="op">)</span></span>
<span><span class="va">dim2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"B1"</span>, <span class="st">"B2"</span>, <span class="st">"B3"</span>, <span class="st">"B4"</span><span class="op">)</span></span>
<span><span class="va">dim3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"C3"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Ejemplo de arreglo:</strong> Defino un arreglo de 3 matrices de 2 (filas) x 4
(columnas)</p>
<div class="sourceCode" id="cb912"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html">array</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">24</span>,</span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">3</span><span class="op">)</span>,</span>
<span>           dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">dim1</span>, <span class="va">dim2</span>, <span class="va">dim3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<p>Notar la tercera dimensión!</p>
<p><strong>Subconjuntos de un arreglo:</strong> x[Fila,Columna, Matriz]</p>
<div class="sourceCode" id="cb913"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">]</span>       <span class="co"># 1 fila, 2da columna, 3ra matriz</span></span>
<span><span class="va">x</span><span class="op">[</span>,,<span class="fl">3</span><span class="op">]</span>         <span class="co"># 3era matriz completa</span></span>
<span><span class="va">x</span><span class="op">[</span>,<span class="fl">4</span>,<span class="op">]</span>         <span class="co"># 4ta columna de todas las matrices</span></span>
<span><span class="va">x</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span>       <span class="co"># Todas las filas, sin la primera columna, de la matriz 2. </span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fl">3</span><span class="op">]</span> <span class="co"># Todas las columnas, sin la fila 1, de la matriz 3. </span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">]</span>    <span class="co"># Columnas 1 y 2, sin la fila 1, de la matriz 3. </span></span>
<span><span class="va">x</span><span class="op">[</span>,,<span class="fl">1</span><span class="op">]</span><span class="op">*</span><span class="fl">2</span></span></code></pre></div>
</div>
<div id="listas-1" class="section level4" number="9.2.1.2">
<h4>
<span class="header-section-number">9.2.1.2</span> Listas<a class="anchor" aria-label="anchor" href="#listas-1"><i class="fas fa-link"></i></a>
</h4>
<p>Las listas contienen elementos de diferente tipo: matrices, objetos,
dataframes, vectores, etc.</p>
<div class="sourceCode" id="cb914"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>, <span class="st">"R"</span>, <span class="cn">TRUE</span>, <span class="fl">2</span><span class="op">+</span><span class="fl">3i</span>, <span class="fl">5L</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="co">#separa todo componente</span></span></code></pre></div>
<p>Para acceder a un objeto dentro de la lista se debe utilizar DOBLE
CORCHETE:</p>
<div class="sourceCode" id="cb915"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<p>Veamos un ejemplo de cómo trabaja:</p>
<div class="sourceCode" id="cb916"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>Titulacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Economia"</span>, <span class="st">"Administracion"</span>, <span class="st">"Politica"</span><span class="op">)</span>, </span>
<span>           Edad <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">23</span>,<span class="fl">27</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<p>Al nombrar los componentes dentro de la lista, podemos llamarlos sin
necesidad de los corchetes:</p>
<div class="sourceCode" id="cb917"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">Titulacion</span></span>
<span><span class="va">x</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">x</span><span class="op">[[</span><span class="st">"Titulacion"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">Edad</span></span>
<span><span class="va">x</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<p>Como los componentes dentro de las listas tienen definida una
naturaleza, podemos hacer operaciones con ellas también:</p>
<div class="sourceCode" id="cb918"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[[</span><span class="st">"Edad"</span><span class="op">]</span><span class="op">]</span><span class="op">*</span><span class="fl">3</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">Edad</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">*</span><span class="fl">3</span></span></code></pre></div>
<p>Finalmente, tambien podemos crear listas vacias (útil para rellenar
utilizando iteradores):</p>
<div class="sourceCode" id="cb919"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html">vector</a></span><span class="op">(</span><span class="st">"list"</span>, length <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><strong>Ejemplo de una lista:</strong> Definimos una lista</p>
<div class="sourceCode" id="cb920"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">milista</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  </span>
<span>  <span class="co"># Primer elemento sera un vector</span></span>
<span>  hospitales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Van Buren"</span>, <span class="st">"Gustavo Fricke"</span>, <span class="st">"Salvador"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Segundo elemento sera un dataframe</span></span>
<span>  direccion   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>    calle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"San Ignacio"</span>, <span class="st">"Av. Alvarez"</span>, <span class="st">"Av. Salvador"</span><span class="op">)</span>,</span>
<span>    ciudad   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Valparaíso"</span>, <span class="st">"Viña del Mar"</span>, <span class="st">"Santiago"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">milista</span></span></code></pre></div>
<p>Llamar a subconjuntos</p>
<div class="sourceCode" id="cb921"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retorna el elemento de la lista</span></span>
<span><span class="va">milista</span><span class="op">$</span><span class="va">hospitales</span></span>
<span><span class="va">milista</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Retorna el elemento, pero sin nombre y como vector</span></span>
<span><span class="va">milista</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">milista</span><span class="op">[[</span><span class="st">"hospitales"</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Elementos particulares</span></span>
<span><span class="va">milista</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="va">milista</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">milista</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span>
<span><span class="va">milista</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<p>Notar que es importante saber el tipo de dato.</p>
</div>
<div id="dataframes" class="section level4" number="9.2.1.3">
<h4>
<span class="header-section-number">9.2.1.3</span> Dataframes<a class="anchor" aria-label="anchor" href="#dataframes"><i class="fas fa-link"></i></a>
</h4>
<p><strong>Crear un dataframe:</strong> Es básicamente una matriz donde filas y columnas
tienen significado. Contiene tanto valores numericos, carácteres,
variables categóricas, etc.</p>
<div class="sourceCode" id="cb922"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Titulacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Economia"</span>, <span class="st">"Administracion"</span>, </span>
<span>                                   <span class="st">"Administracion"</span><span class="op">)</span>,</span>
<span>                    Edad <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">23</span>,<span class="fl">27</span><span class="op">)</span>, </span>
<span>                    ocupacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos</span></span></code></pre></div>
<p>Esto es lo mas cercano a una base de datos. Es uno de los objetos
básicos que veremos muchas veces a lo largo del curso.</p>
<p><strong>Dimensiones de un dataframe:</strong> Para ver las dimensiones hay que
utilizar nrow(), ncol() o bien dim().</p>
<div class="sourceCode" id="cb923"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span></code></pre></div>
<p>Notar que nrow() y ncol() tambien sirven para matrices.</p>
<p><strong>Subconjuntos de un dataframe:</strong> Al igual que en las matrices,
utilizamos <code>[ ]</code> para acceder a elementos dentro de la base.</p>
<div class="sourceCode" id="cb924"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">datos</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">datos</span><span class="op">[</span>,<span class="op">-</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">datos</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">datos</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Titulacion"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Tambien puedo ocupar $ para llamar. </span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">Titulacion</span></span>
<span></span>
<span><span class="co"># Ojo que esto lo puedo hacer con todo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">datos</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">datos</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">datos</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">[</span><span class="st">"Max."</span><span class="op">]</span></span></code></pre></div>
<p><strong>Tibbles:</strong> Una version mas moderna de dataframes. Es la misma idea:
lista de vectores con nombres.</p>
<div class="sourceCode" id="cb925"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Altura</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">168</span>, <span class="fl">177</span>, <span class="fl">177</span>, <span class="fl">177</span>, <span class="fl">178</span>, <span class="fl">172</span>, <span class="fl">165</span>, <span class="fl">171</span>, <span class="fl">178</span>, <span class="fl">170</span><span class="op">)</span></span>
<span><span class="va">Peso</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">88</span>, <span class="fl">72</span>, <span class="fl">85</span>, <span class="fl">95</span>, <span class="fl">71</span>, <span class="fl">69</span>, <span class="fl">61</span>, <span class="fl">61</span>, <span class="fl">51</span>, <span class="fl">75</span><span class="op">)</span></span>
<span><span class="va">M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">Altura</span>, <span class="va">Peso</span><span class="op">)</span></span></code></pre></div>
<p>Paquete para trabajar con bases de datos (más detalles en secciones 2.3
y 2.4)</p>
<div class="sourceCode" id="cb926"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span> <span class="co"># Una libreria dentro de tidyverse. </span></span>
<span><span class="va">misdatos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span></span>
<span><span class="va">misdatos</span></span>
<span></span>
<span><span class="co"># Podemos ver los nombres o bien estadistica básica de cada variable. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">misdatos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">misdatos</span><span class="op">)</span></span></code></pre></div>
<p><strong>Agregar columnas a un dataframe:</strong> Podemos agregar variables a la
base. Dos opciones:</p>
<div class="sourceCode" id="cb927"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Opción 1: utilizando $nombre_columna&lt;-vector</span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">datos</span></span>
<span></span>
<span><span class="co"># Opción 2: utilizando el cbind (al igual que con matrices)</span></span>
<span><span class="va">id2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">datos1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">id2</span>,<span class="va">datos</span><span class="op">)</span> </span>
<span><span class="va">datos1</span></span></code></pre></div>
<p><strong>Attach:</strong></p>
<p>Notación muy inconveniente</p>
<div class="sourceCode" id="cb928"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">misdatos</span><span class="op">$</span><span class="va">Altura</span></span>
<span><span class="va">misdatos</span><span class="op">$</span><span class="va">Peso</span></span></code></pre></div>
<p>Para evitar escribir datos cada vez que quiera llamar a una variable voy
a utilizar la funcion <code><a href="https://rdrr.io/r/base/attach.html">attach()</a></code>:</p>
<div class="sourceCode" id="cb929"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="co"># para comenzar</span></span>
<span></span>
<span><span class="co"># Ahora puedo llamar a sus variables sin utilizar datos</span></span>
<span><span class="va">nueva</span> <span class="op">&lt;-</span> <span class="va">Edad</span> <span class="op">*</span> <span class="va">ocupacion</span> </span>
<span><span class="va">nueva</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">$</span><span class="va">Edad</span> <span class="op">*</span> <span class="va">datos</span><span class="op">$</span><span class="va">ocupacion</span></span>
<span><span class="va">nueva</span> </span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="co"># para terminar</span></span></code></pre></div>
<p>Esta es una forma mucho mas conveniente de trabajar con dataframes o
tibble en R.</p>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.2.1:</b> Crear un dataframe</p>
<div class="inline-figure">Cree su primera base de datos. Debe armar una tabla igual a la figura.
Tiene 5 minutos. <img src="01figuras/ejercicio2.PNG" alt="Ejercicio">
</div>
</div>
<p>Respuesta:</p>
<div class="sourceCode" id="cb930"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ejer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Tipo_animal <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Perro"</span>, <span class="st">"Perro"</span>,<span class="st">"Gato"</span>,<span class="st">"Perro"</span>, </span>
<span>                                   <span class="st">"Gato"</span>,<span class="st">"Gato"</span>,<span class="st">"Gato"</span><span class="op">)</span>,</span>
<span>                   Color <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Café"</span>,<span class="st">"Blanco"</span>,<span class="st">"Negro"</span>,<span class="st">"Manchas"</span>,<span class="st">"Café"</span>,<span class="st">"Tricolor"</span>,<span class="st">"Negro"</span><span class="op">)</span>, </span>
<span>                   Peso <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">5</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">2</span>,<span class="fl">5</span>,<span class="fl">4</span><span class="op">)</span>,</span>
<span>                   Pasea<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sí"</span>,<span class="st">"Sí"</span>,<span class="st">"Sí"</span>,<span class="st">"No"</span>,<span class="st">"No"</span>,<span class="st">"No"</span>,<span class="st">"Sí"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="acceder-a-elementos-de-un-objeto" class="section level3" number="9.2.2">
<h3>
<span class="header-section-number">9.2.2</span> Acceder a elementos de un objeto<a class="anchor" aria-label="anchor" href="#acceder-a-elementos-de-un-objeto"><i class="fas fa-link"></i></a>
</h3>
<div id="vectores-1" class="section level4" number="9.2.2.1">
<h4>
<span class="header-section-number">9.2.2.1</span> Vectores<a class="anchor" aria-label="anchor" href="#vectores-1"><i class="fas fa-link"></i></a>
</h4>
<p>Para acceder a los elementos de un objeto debemos utilizar los corchetes
<code>[ ]</code></p>
<div class="sourceCode" id="cb931"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Veamos en un vector</span></span>
<span></span>
<span><span class="va">x</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"FALSE"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span>,<span class="fl">1</span><span class="op">+</span><span class="fl">2i</span>,<span class="st">"t"</span>, <span class="st">"c"</span>,<span class="st">"a"</span>,<span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Podemos llamar a un objeto de un vector </span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<p>De esta manera podemos extraerlo o utilizarlo en diferentes operaciones.
Pero sólo debe ser entre observaciones numericas:</p>
<div class="sourceCode" id="cb932"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">+</span><span class="va">x</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span> <span class="co">#de lo contrario R nos arroja un error </span></span>
<span><span class="va">y</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">1</span><span class="op">+</span><span class="fl">2i</span><span class="op">)</span></span>
<span><span class="va">y</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">+</span><span class="va">y</span><span class="op">[</span><span class="fl">7</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#O podemos visualizar a x, pero sin el primer objeto</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#O eliminar el primer objeto </span></span>
<span><span class="va">x</span><span class="op">&lt;-</span><span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
</div>
<div id="matrices-2" class="section level4" number="9.2.2.2">
<h4>
<span class="header-section-number">9.2.2.2</span> Matrices<a class="anchor" aria-label="anchor" href="#matrices-2"><i class="fas fa-link"></i></a>
</h4>
<p>Si analizamos los objetos de una matriz:</p>
<div class="sourceCode" id="cb933"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">w</span></span>
<span></span>
<span><span class="co"># Elemento [1,1]</span></span>
<span><span class="va">w</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="co"># Toda la primera columna </span></span>
<span><span class="va">w</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span></span>
<span><span class="co"># Toda la segunda fila</span></span>
<span><span class="va">w</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span></span>
<span><span class="co"># Dos columnas</span></span>
<span><span class="va">w</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="co"># w[,-3]</span></span>
<span><span class="co"># Todas las filas menos la primera</span></span>
<span><span class="va">w</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span>,<span class="op">]</span></span></code></pre></div>
</div>
<div id="listas-2" class="section level4" number="9.2.2.3">
<h4>
<span class="header-section-number">9.2.2.3</span> Listas<a class="anchor" aria-label="anchor" href="#listas-2"><i class="fas fa-link"></i></a>
</h4>
<p>Si queremos llamar a un objeto dentro de una lista:</p>
<div class="sourceCode" id="cb934"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>, <span class="st">"R"</span>, <span class="cn">T</span>, <span class="fl">2</span><span class="op">+</span><span class="fl">3i</span>, <span class="fl">5L</span><span class="op">)</span></span>
<span><span class="va">z</span> <span class="co">#separa todo componente</span></span></code></pre></div>
<p>Para acceder a un objeto dentro de la lista se debe utilizar doble
corchete:</p>
<div class="sourceCode" id="cb935"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#Y algo dentro de ese objeto </span></span>
<span><span class="va">z</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#Tambien podemos analizar su clasificacion </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">z</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="co">#numerico </span></span>
<span></span>
<span><span class="co">#Si es numerico, entonces tambien podemos hacer operaciones </span></span>
<span><span class="va">z</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">*</span><span class="va">z</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
</div>
</div>
<div id="tipos-de-objetos-y-datos" class="section level3" number="9.2.3">
<h3>
<span class="header-section-number">9.2.3</span> Tipos de objetos y datos<a class="anchor" aria-label="anchor" href="#tipos-de-objetos-y-datos"><i class="fas fa-link"></i></a>
</h3>
<div id="identificar-tipos-de-objetos" class="section level4" number="9.2.3.1">
<h4>
<span class="header-section-number">9.2.3.1</span> Identificar tipos de objetos<a class="anchor" aria-label="anchor" href="#identificar-tipos-de-objetos"><i class="fas fa-link"></i></a>
</h4>
<p>Veamos en un vector cualquiera</p>
<div class="sourceCode" id="cb936"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="cn">FALSE</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span>,<span class="fl">1</span><span class="op">+</span><span class="fl">2i</span>,<span class="st">"t"</span>, <span class="st">"c"</span>,<span class="st">"a"</span>,<span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Como bien sabemos todo en R es un objeto. Para saber que tipo de objeto
es puedo utilizar la función <code><a href="https://rdrr.io/r/base/class.html">class()</a></code>:</p>
<div class="sourceCode" id="cb937"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span> <span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Note que <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> identifico que es un “data.frame” y una lista.
También puedo ver los tipos de elementos dentro de un determinado
objeto. Para datos, existen 5 tipos principales, llamados:</p>
<ol style="list-style-type: decimal">
<li>
<strong>carácteres:</strong> texto. Se escriben con comillas (ej: “3”, “swc”).</li>
<li>
<strong>numéricos:</strong> numeros reales (ej. 2, 15.5).</li>
<li>
<strong>enteros:</strong> numeros enteros (“L” le dice a R que guarde esto como
un entero).</li>
<li>
<strong>logical:</strong> valores logicos (ej. TRUE, FALSE).</li>
<li>
<strong>complejos:</strong> 1 + 4i (Numero complejos).</li>
</ol>
</div>
<div id="identificar-tipos-de-datos" class="section level4" number="9.2.3.2">
<h4>
<span class="header-section-number">9.2.3.2</span> Identificar tipos de datos<a class="anchor" aria-label="anchor" href="#identificar-tipos-de-datos"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb938"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Carácteres</span></span>
<span><span class="va">z</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Números enteros</span></span>
<span><span class="va">w</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1L</span>,<span class="fl">2L</span>,<span class="fl">3L</span><span class="op">)</span> <span class="co">#la L es para obligar que sea entero</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">w</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Numéricos </span></span>
<span><span class="va">w1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">w1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Notar que la L lo obliga a ser entero ¿Qué ocurre si no coloco la L? </span></span>
<span></span>
<span><span class="co"># 4. Valores logicos</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">v1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Notar que si estan entre comillas son caracteres, no logical!. </span></span>
<span><span class="va">v</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"FALSE"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5. Números complejos </span></span>
<span><span class="va">t</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="fl">2i</span>,<span class="fl">1</span><span class="op">+</span><span class="fl">3i</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span></span></code></pre></div>
<p>Hay más clases: Date(fechas), Factor(variables categóricas), data.frame,
tibble, list.</p>
</div>
<div id="importan-los-tipos-de-los-objetos" class="section level4" number="9.2.3.3">
<h4>
<span class="header-section-number">9.2.3.3</span> ¿Importan los tipos de los objetos?<a class="anchor" aria-label="anchor" href="#importan-los-tipos-de-los-objetos"><i class="fas fa-link"></i></a>
</h4>
<p>R intenta mantener dentro de un vector el tipo de objeto. Si es que
tratamos de juntar distintos tipos de datos en un vector. Igualar a la
clase. Por ejemplo, si intentamos generar un vector con texto y
número/logical todo será texto:</p>
<div class="sourceCode" id="cb939"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="st">"a"</span>, <span class="cn">TRUE</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">h</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">h</span><span class="op">)</span></span></code></pre></div>
<p>Si intentamos juntar un “Logical” con un número todo será número:</p>
<div class="sourceCode" id="cb940"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">h1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">h1</span><span class="op">)</span></span></code></pre></div>
<p>Aquí carácter todo se va a caracter:</p>
<div class="sourceCode" id="cb941"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"FALSE"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">+</span><span class="fl">2i</span>, <span class="st">"t"</span>, <span class="st">"c"</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<p>Si utilizo el operador <code>:</code> para crear vectores lo interpreta como un
<em>integer</em>.</p>
</div>
<div id="forzar-a-r-para-que-utilice-un-tipo-de-dato" class="section level4" number="9.2.3.4">
<h4>
<span class="header-section-number">9.2.3.4</span> Forzar a R para que utilice un tipo de dato<a class="anchor" aria-label="anchor" href="#forzar-a-r-para-que-utilice-un-tipo-de-dato"><i class="fas fa-link"></i></a>
</h4>
<p>Forzar a R a llevar el vector solo a numérico:</p>
<div class="sourceCode" id="cb942"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span>
<span><span class="va">z</span> </span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> fuerza al vector a solo tener números. Noten que remplaza
los que no son numérico por NA.</p>
<p>Forzar a R a llevar el vector solo a carácteres:</p>
<div class="sourceCode" id="cb943"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">z1</span><span class="op">)</span></span>
<span><span class="va">z1</span></span></code></pre></div>
<p>Noten que ahora se agregaron las dobles comillas.</p>
<p>Forzar a R a llevar el vector sólo a carácter.</p>
<div class="sourceCode" id="cb944"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span>
<span><span class="va">z2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/logical.html">as.logical</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">z2</span><span class="op">)</span></span>
<span><span class="va">z2</span> </span></code></pre></div>
<p>Noten que “T” fue aceptado como TRUE!</p>
</div>
<div id="cómo-saber-que-tipo-de-datos-tengo" class="section level4" number="9.2.3.5">
<h4>
<span class="header-section-number">9.2.3.5</span> ¿Cómo saber que tipo de datos tengo?<a class="anchor" aria-label="anchor" href="#c%C3%B3mo-saber-que-tipo-de-datos-tengo"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb945"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Puedo preguntar a R sobre el tipo. </span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>   <span class="co"># Es numerico?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># Es caracter?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/logical.html">is.logical</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>   <span class="co"># Es logico?</span></span>
<span></span>
<span><span class="co"># La respuesta a esta pregunta va a ser un valor lógico</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># También se puede utilizar la opcion `typeof`</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="mayúsculas-importan" class="section level4" number="9.2.3.6">
<h4>
<span class="header-section-number">9.2.3.6</span> Mayúsculas importan<a class="anchor" aria-label="anchor" href="#may%C3%BAsculas-importan"><i class="fas fa-link"></i></a>
</h4>
<p>Como vimos en lasección anterior, R es sensible a las mayúsculas. Esto
aplica para nombres de funciones, paquetes, comando y también para los
datos. Por ejemplo:</p>
<div class="sourceCode" id="cb946"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"a"</span>,<span class="st">"a"</span>,<span class="st">"a"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>,<span class="st">"b"</span>, <span class="st">"A"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">'a'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">'b'</span><span class="op">)</span></span></code></pre></div>
<p>Para R las minúsculas y mayúsculas SI IMPORTAN!.</p>
</div>
<div id="carácteres-especiales" class="section level4" number="9.2.3.7">
<h4>
<span class="header-section-number">9.2.3.7</span> Carácteres especiales<a class="anchor" aria-label="anchor" href="#car%C3%A1cteres-especiales"><i class="fas fa-link"></i></a>
</h4>
<p>Vimos que existen nombres de variables no validos en R. Tambien existe
un conjunto de caracteres invalidos.</p>
<ul>
<li>
<strong>NA:</strong> Not Available (missing values)</li>
<li>
<strong>NaN:</strong> Not a Numbers (ej. 0/0)</li>
<li>
<strong>Inf:</strong> Infinito (1/0)</li>
<li>
<strong>-Inf:</strong> Menos infinito</li>
</ul>
<div class="sourceCode" id="cb947"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">0</span><span class="op">/</span><span class="fl">0</span></span>
<span><span class="op">-</span><span class="fl">1</span><span class="op">/</span><span class="fl">0</span> </span></code></pre></div>
</div>
<div id="missing-values-3" class="section level4" number="9.2.3.8">
<h4>
<span class="header-section-number">9.2.3.8</span> Missing values<a class="anchor" aria-label="anchor" href="#missing-values-3"><i class="fas fa-link"></i></a>
</h4>
<p>En R, los valores perdidos (“missing values”) se representan con el
valor especial <code>NA</code> (letras mayusculas N y A - sin comillas). Para saber
si tengo valores <code>NA</code> en un objeto, puedo ocupar la funcion <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>:</p>
<div class="sourceCode" id="cb948"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ejemplo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="cn">NA</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ejemplo</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ejemplo</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">ejemplo</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># El resultado es un vector. Noten que es importante para utilizar algunas funciones:</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ejemplo</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ejemplo</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>No funciona en el primer caso, si en el segundo. Veremos mas detalles
sobre como tratar missing values (ej. recodificar) en las clases de
manipulacion y analisis de datos.</p>
</div>
<div id="funciones-útiles" class="section level4" number="9.2.3.9">
<h4>
<span class="header-section-number">9.2.3.9</span> Funciones útiles<a class="anchor" aria-label="anchor" href="#funciones-%C3%BAtiles"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb949"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Redondear</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">x</span>,digits <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.53</span>, <span class="fl">3.52</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estadística simple</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>    <span class="co"># promedio</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>  <span class="co"># mediana</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>      <span class="co"># desviacion estandar</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>     <span class="co"># suma del vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>     <span class="co"># Valor minimo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>     <span class="co"># Valor maximo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>   <span class="co"># rango </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># resumen </span></span>
<span></span>
<span><span class="co"># Notar que tienen que ser vectores!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">6</span>, <span class="fl">12</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># En el primer caso sólo toma el primer valor! Ojo, siempre un vector. </span></span>
<span></span>
<span><span class="co"># Otras funciones</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span>,<span class="fl">2</span> <span class="op">)</span>                        <span class="co"># Crear secuencias</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fl">10</span><span class="op">)</span>                    <span class="co"># Repetir</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">x</span>,<span class="fl">2</span><span class="op">)</span>                            <span class="co"># subdividir</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">x</span>, size <span class="op">=</span> <span class="fl">3</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Generar un aleatorio</span></span>
<span></span>
<span><span class="co"># El analisis de datos es...</span></span>
<span></span>
<span><span class="va">Altura</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">168</span>, <span class="fl">177</span>, <span class="fl">177</span>, <span class="fl">177</span>, <span class="fl">178</span>, <span class="fl">172</span>, <span class="fl">165</span>, <span class="fl">171</span>, <span class="fl">178</span>, <span class="fl">170</span><span class="op">)</span></span>
<span><span class="va">Peso</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">88</span>, <span class="fl">72</span>, <span class="fl">85</span>, <span class="fl">95</span>, <span class="fl">71</span>, <span class="fl">69</span>, <span class="fl">61</span>, <span class="fl">61</span>, <span class="fl">51</span>, <span class="fl">75</span><span class="op">)</span></span>
<span><span class="va">M</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">Altura</span>, <span class="va">Peso</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Paquete para trabajar con bases de datos (más detalles en secciones 2.3 y 2.4)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span> <span class="co"># Una libreria dentro de tidyverse. </span></span>
<span><span class="va">misdatos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">M</span><span class="op">)</span></span>
<span><span class="va">misdatos</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">misdatos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">Altura</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">misdatos</span><span class="op">$</span><span class="va">Peso</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">misdatos</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="herramientas-en-r" class="section level3" number="9.2.4">
<h3>
<span class="header-section-number">9.2.4</span> Herramientas en R<a class="anchor" aria-label="anchor" href="#herramientas-en-r"><i class="fas fa-link"></i></a>
</h3>
<div id="escribir-códigos" class="section level4" number="9.2.4.1">
<h4>
<span class="header-section-number">9.2.4.1</span> Escribir Códigos<a class="anchor" aria-label="anchor" href="#escribir-c%C3%B3digos"><i class="fas fa-link"></i></a>
</h4>
<p>Algunos comentarios con respecto a la escritura de codigos:</p>
<ol style="list-style-type: decimal">
<li>Siempre escribir comentarios autocontenidos.</li>
<li>Siempre utilizar índice.</li>
</ol>
<ul>
<li>Me permite reducir el código.</li>
<li>Me permite ver donde estoy también en un código largo.</li>
<li>Puedo verlo con ctrl + shift + O o bien en la esquina inferior
izquierda del script.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Separar códigos largos en varios códigos. Cada código debe tener un
objetivo claro que debe explicar en una oración.</li>
<li>Escribir códigos en bloques.</li>
<li>Tres consejos básicos de estilo:</li>
</ol>
<ul>
<li>utilizar <code>_</code> para generar variables o bien otra convención.</li>
<li>separar entre objetos y operaciones.</li>
</ul>
</div>
<div id="condicionales-y-controladores-de-flujo" class="section level4" number="9.2.4.2">
<h4>
<span class="header-section-number">9.2.4.2</span> Condicionales y controladores de flujo<a class="anchor" aria-label="anchor" href="#condicionales-y-controladores-de-flujo"><i class="fas fa-link"></i></a>
</h4>
<p>Operadores básicos:</p>
<div class="sourceCode" id="cb950"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Asignador</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="op">*</span> <span class="fl">3</span></span>
<span><span class="va">a</span> </span>
<span></span>
<span><span class="va">a1</span> <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="fl">3</span></span>
<span><span class="va">a1</span> </span>
<span></span>
<span><span class="co"># Nota: Nunca ocupar igual. </span></span>
<span></span>
<span><span class="co"># Igualdad </span></span>
<span><span class="cn">TRUE</span> <span class="op">==</span> <span class="cn">TRUE</span> </span>
<span><span class="cn">TRUE</span> <span class="op">==</span> <span class="cn">FALSE</span></span>
<span></span>
<span><span class="co"># Nota: Para comparar elementos se utiliza doble igual "==".  </span></span>
<span></span>
<span></span>
<span><span class="co"># Desigualdad (!=)</span></span>
<span><span class="cn">TRUE</span> <span class="op">!=</span> <span class="cn">FALSE</span> </span>
<span><span class="st">"Hola"</span> <span class="op">!=</span> <span class="st">"Chao"</span></span>
<span></span>
<span><span class="co"># Otros comparadores: &lt;, &gt; (&gt;=), (&lt;=) </span></span>
<span><span class="fl">3</span> <span class="op">&lt;</span> <span class="fl">5</span></span>
<span><span class="fl">5</span> <span class="op">&gt;</span> <span class="fl">8</span></span>
<span><span class="fl">5</span> <span class="op">&gt;=</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># Nota: No confundir con &lt;- que es para asignar. </span></span>
<span></span>
<span><span class="cn">TRUE</span> <span class="op">&gt;</span> <span class="cn">FALSE</span></span>
<span></span>
<span><span class="co"># Noten que la respuesta en un logical. </span></span>
<span></span>
<span><span class="co"># En vectores y matrices</span></span>
<span><span class="va">vector1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">16</span>,<span class="fl">9</span>,<span class="fl">13</span><span class="op">)</span></span>
<span><span class="va">vector2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">12</span>,<span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Comparar contra un escalar</span></span>
<span><span class="va">vector1</span> <span class="op">&gt;</span> <span class="fl">10</span></span>
<span><span class="va">vector2</span> <span class="op">&lt;</span> <span class="fl">10</span></span>
<span></span>
<span><span class="co"># Compararlos entre ellos </span></span>
<span><span class="va">vector1</span> <span class="op">&lt;</span> <span class="va">vector2</span></span>
<span></span>
<span><span class="co"># Veamos en una matriz </span></span>
<span><span class="va">matrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">vector1</span>, <span class="va">vector2</span><span class="op">)</span>, </span>
<span>                 byrow <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                 nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">matrix</span></span>
<span></span>
<span><span class="va">matrix</span> <span class="op">&gt;</span> <span class="fl">10</span></span></code></pre></div>
<p>Operador %in%: Un operador muy útil para comparar valores y para evaluar
rápidamente si un valor está dentro de un vector o marco de datos.</p>
<div class="sourceCode" id="cb951"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="va">v2</span> <span class="op">&lt;-</span> <span class="fl">101</span></span>
<span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># El valor v1 ¿se encuentra dentro de t?</span></span>
<span><span class="va">v1</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">t</span> </span>
<span></span>
<span><span class="co"># Otro ejemplo....</span></span>
<span><span class="va">mivector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span><span class="op">)</span></span>
<span><span class="st">"a"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">mivector</span></span>
<span></span>
<span><span class="co"># Si no  está en el vector da un FALSE</span></span>
<span><span class="st">"h"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">mivector</span></span>
<span></span>
<span><span class="co"># Si le quiero preguntar si NO está, coloco un signo de exclamación al frente. </span></span>
<span><span class="op">!</span><span class="st">"a"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">mivector</span></span>
<span></span>
<span><span class="co"># Un vector en otro vector </span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">19</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">16</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Veamos si los elementos de un vector "largo" están en uno "corto" </span></span>
<span><span class="va">b</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">a</span></span>
<span></span>
<span><span class="co"># Esto va a ser muy útil cuando trabajemos con bases de datos. </span></span></code></pre></div>
<p>Operadores para seleccionar subconjuntos de datos:</p>
<div class="sourceCode" id="cb952"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="cn">NA</span>,<span class="fl">8</span><span class="op">)</span></span>
<span><span class="va">y</span></span>
<span></span>
<span><span class="co"># Vamos a seleccionar solo los que no son NA</span></span>
<span><span class="va">y1</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">y1</span> </span>
<span></span>
<span><span class="co"># Noten que utilizamos la funcion is.NA y un operador (!). Más detalles en parte de análisis de datos, pero noten que la idea principal está aquí. </span></span></code></pre></div>
<p>Operadores lógicos:</p>
<div class="sourceCode" id="cb953"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Operador (&amp;): operador "y"</span></span>
<span><span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="cn">TRUE</span> </span>
<span><span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="cn">FALSE</span></span>
<span><span class="cn">FALSE</span> <span class="op">&amp;</span> <span class="cn">TRUE</span></span>
<span><span class="cn">FALSE</span> <span class="op">&amp;</span> <span class="cn">FALSE</span> </span>
<span></span>
<span><span class="co"># Ejemplo </span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">12</span> </span>
<span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;</span> <span class="fl">11</span>  </span>
<span></span>
<span><span class="co"># Operador (|): operador "o". Condiciones no excluyentes.</span></span>
<span><span class="cn">TRUE</span>  <span class="op">|</span> <span class="cn">TRUE</span> </span>
<span><span class="cn">TRUE</span>  <span class="op">|</span> <span class="cn">FALSE</span> </span>
<span><span class="cn">FALSE</span> <span class="op">|</span> <span class="cn">TRUE</span></span>
<span><span class="cn">FALSE</span> <span class="op">|</span> <span class="cn">FALSE</span> </span>
<span></span>
<span><span class="co"># Ejemplo</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="va">y</span> <span class="op">&lt;</span> <span class="fl">5</span> <span class="op">|</span> <span class="va">y</span> <span class="op">&gt;</span> <span class="fl">15</span> </span>
<span></span>
<span><span class="co"># Operador de negación (!)</span></span>
<span><span class="op">!</span><span class="cn">TRUE</span> </span>
<span><span class="op">!</span><span class="cn">FALSE</span> </span>
<span></span>
<span><span class="co"># Combinarlo con funciones </span></span>
<span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="st">"Hello"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Operadores con vectores </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Si utilizo dos "&amp;&amp;" sólo compara el primer elemento del vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span><span class="op">)</span> <span class="op">||</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="condicionales" class="section level4" number="9.2.4.3">
<h4>
<span class="header-section-number">9.2.4.3</span> Condicionales<a class="anchor" aria-label="anchor" href="#condicionales"><i class="fas fa-link"></i></a>
</h4>
<p>If:</p>
<div class="sourceCode" id="cb954"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span>  </span>
<span><span class="co">#if (condicion){</span></span>
<span></span>
<span><span class="co">#  cualquier cosa que quiero que se haga si la condición se cumple </span></span>
<span></span>
<span><span class="co">#}</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es número mayor que cero"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es un número mayor que cero "</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es un número menor que cero"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>Else:</p>
<div class="sourceCode" id="cb955"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es un número positivo"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span> <span class="kw">else</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es un número negativo"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>Elseif:</p>
<div class="sourceCode" id="cb956"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es mayor que cero"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es igual a cero"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es menor que cero"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Importante: `(%%) corresponde al resto de una división`</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">6</span> </span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es divisible por 2"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">3</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x es divisible por 3"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"x no es divisible ni por 2 ni por 3"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Notar que si la primera condición se cumple, la segunda no se ejecuta aunque sea cierta.  </span></span></code></pre></div>
</div>
<div id="funciones-3" class="section level4" number="9.2.4.4">
<h4>
<span class="header-section-number">9.2.4.4</span> Funciones<a class="anchor" aria-label="anchor" href="#funciones-3"><i class="fas fa-link"></i></a>
</h4>
<p>Idea principal: <span class="math inline">\(f(x) = 2x + 1\)</span>, <span class="math inline">\(x \in R\)</span> <span class="math inline">\(f(x) = 'hola' + x\)</span>,
<span class="math inline">\(x \in ('pepe', 'pepa', 'marta')\)</span></p>
<div class="sourceCode" id="cb957"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">valores</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">valores</span><span class="op">)</span></span></code></pre></div>
<p>Algunas cosas adicionales sobre funciones: <code>n</code> me permite ver los
argumentos de una función, sin necesidad de ver la documentación. Útil a
veces.</p>
<div class="sourceCode" id="cb958"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Escribir funciones con un argumento</span></span>
<span><span class="va">triple</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">x</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="va">triple</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">x</span><span class="op">/</span><span class="fl">2</span></span>
<span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">triple</span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Escribir funciones con mas de un argumento</span></span>
<span><span class="va">operacion</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">a</span><span class="op">*</span><span class="va">b</span> <span class="op">+</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span></span>
<span>  </span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">operacion</span><span class="op">(</span><span class="fl">4</span>,<span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Escribir funciones fijando opción por defecto.</span></span>
<span><span class="va">operacion_defecto</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">a</span><span class="op">*</span><span class="va">b</span> <span class="op">+</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span></span>
<span>  </span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">operacion_defecto</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu">operacion_defecto</span><span class="op">(</span><span class="fl">4</span>,<span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Escribir funciones utilizando if y return.</span></span>
<span><span class="va">operacion_condicionales</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">b</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">a</span><span class="op">*</span><span class="va">b</span> <span class="op">+</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span>  </span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">operacion_condicionales</span><span class="op">(</span><span class="fl">4</span>,<span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Funciones con texto </span></span>
<span><span class="va">texto</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Hola mundo!"</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">texto</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Funciones por defecto en ambos casos</span></span>
<span><span class="va">operacion_dosdefectos</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span> <span class="op">=</span> <span class="fl">1</span>,<span class="va">b</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">b</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">a</span><span class="op">*</span><span class="va">b</span> <span class="op">+</span> <span class="va">a</span><span class="op">/</span><span class="va">b</span>  </span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">operacion_dosdefectos</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.2.2:</b> Funciones</p>
<p>Genere una función que sea igual a la división de dos elementos. Coloque
un mensaje que indique cuando la división es indeterminada.</p>
</div>
<p>Respuesta:</p>
<div class="sourceCode" id="cb959"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">operacion_indeterminada</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">a</span><span class="op">/</span><span class="va">b</span> </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">b</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="st">"Es indeterminado"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">operacion_indeterminada</span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-i-1" class="section level2" number="9.3">
<h2>
<span class="header-section-number">9.3</span> Manipulación de bases de datos (Parte I)<a class="anchor" aria-label="anchor" href="#manipulaci%C3%B3n-de-bases-de-datos-parte-i-1"><i class="fas fa-link"></i></a>
</h2>
<div id="principios-de-programación" class="section level3" number="9.3.1">
<h3>
<span class="header-section-number">9.3.1</span> Principios de programación<a class="anchor" aria-label="anchor" href="#principios-de-programaci%C3%B3n"><i class="fas fa-link"></i></a>
</h3>
<div id="iteradores-1" class="section level4" number="9.3.1.1">
<h4>
<span class="header-section-number">9.3.1.1</span> Iteradores<a class="anchor" aria-label="anchor" href="#iteradores-1"><i class="fas fa-link"></i></a>
</h4>
<p>For loop:</p>
<div class="sourceCode" id="cb960"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Imaginen que queremos mostrar los nombres de un vector de forma reiterada</span></span>
<span><span class="va">ciudades</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Nueva York"</span>, <span class="st">"Paris"</span>, <span class="st">"Santiago"</span>, <span class="st">"Rancagua"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Lo anterior se puede hacer utilizando un iterador.</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Utilizando variables ocultas...</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">.j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="va">.j</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">.j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="va">.j</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># o escrito señalando el nombre de cada elemento de un vector. </span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ciudad</span> <span class="kw">in</span> <span class="va">ciudades</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudad</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Otro ejemplo:</span></span>
<span><span class="va">semana</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Domingo"</span>,</span>
<span>            <span class="st">"Lunes"</span>,</span>
<span>            <span class="st">"Martes"</span>,</span>
<span>            <span class="st">"Miercoles"</span>,</span>
<span>            <span class="st">"Jueves"</span>,</span>
<span>            <span class="st">"Viernes"</span>,</span>
<span>            <span class="st">"Sabado"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">dia</span> <span class="kw">in</span> <span class="va">semana</span><span class="op">)</span></span>
<span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">dia</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>For loop con opciones:</p>
<div class="sourceCode" id="cb961"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ciudades</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Nueva York"</span>, <span class="st">"Paris"</span>, <span class="st">"Santiago"</span>, <span class="st">"Tokio"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Agregar opcion break: quiebra el loop</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ciudad</span> <span class="kw">in</span> <span class="va">ciudades</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">ciudad</span><span class="op">)</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">break</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudad</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Agregar  Opción next: se salta ese elemento</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ciudad</span> <span class="kw">in</span> <span class="va">ciudades</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">ciudad</span><span class="op">)</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">next</span> </span>
<span>  <span class="op">}</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudad</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Flexibilizar el iterador:</p>
<div class="sourceCode" id="cb962"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ciudades</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Nueva York"</span>, <span class="st">"Paris"</span>, <span class="st">"Santiago"</span>, </span>
<span>              <span class="st">"Tokio"</span>, <span class="st">"Rancagua"</span>, <span class="st">"Roma"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ahora el tamaño del loop es flexible. Esto es muy inportante para cuando trabajemos con bases de datos. </span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Noten que ahora llamo a los elementos dentro de un loop como subconjuntos de un vector. </span></span>
<span></span>
<span><span class="co"># En resumen, dos versiones de lo mismo </span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">ciudad</span> <span class="kw">in</span> <span class="va">ciudades</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ciudad</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Ejemplo: para dejar mensajes </span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">ciudades</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="st">"esta en la posicion"</span>,<span class="va">i</span>, </span>
<span>              <span class="st">"en el vector ciudades"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Lo anterior es aplicable para inspecciones de bases de datos, por ejemplo, podemos dejar un mensaje</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"el promedio de la variable"</span>,</span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>, <span class="st">"es"</span>,</span>
<span>              <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>,<span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>While: mientras que…</p>
<div class="sourceCode" id="cb963"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span> </span>
<span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">7</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"x es"</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="co"># Actualización </span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">while</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">700</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"x es"</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="co"># Actualizacion </span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span> </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Muy importante la actualización.</span></span></code></pre></div>
</div>
<div id="lapply-sapply-y-vapply" class="section level4" number="9.3.1.2">
<h4>
<span class="header-section-number">9.3.1.2</span> Lapply, Sapply y Vapply<a class="anchor" aria-label="anchor" href="#lapply-sapply-y-vapply"><i class="fas fa-link"></i></a>
</h4>
<p>Lapply:</p>
<div class="sourceCode" id="cb964"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nyc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>poblacion <span class="op">=</span> <span class="fl">8405837</span>, </span>
<span>            barrios <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Manhattan"</span>, <span class="st">"Bronx"</span>, </span>
<span>                        <span class="st">"Brooklyn"</span>, <span class="st">"Queens"</span>, </span>
<span>                        <span class="st">"Staten Island"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">nyc</span></span></code></pre></div>
<ul>
<li>Equivalencia loop y lapply. Quiero saber todas las clases de la
lista:</li>
</ul>
<div class="sourceCode" id="cb965"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Puedo hacer esto con un loop </span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">objeto</span> <span class="kw">in</span> <span class="va">nyc</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">objeto</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">nyc</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">nyc</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Pero, si utilizo `lapply()` puedo hacerlo mucho más eficiente. </span></span>
<span><span class="co"># Lapply: que aplica esto como si fuese un `for`. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">nyc</span>,<span class="va">class</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Resultado de lapply con vector:</li>
</ul>
<div class="sourceCode" id="cb966"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Lapply ejecuta la función, en este caso class, para todo elemento del objeto, en este caso nyc. </span></span>
<span></span>
<span><span class="co"># Si quiero saber el número de carácteres</span></span>
<span><span class="va">cities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"New york"</span>,<span class="st">"Paris"</span>, <span class="st">"Tokyo"</span>, <span class="st">" Rio de Janeiro"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">cities</span>,<span class="va">nchar</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">cities</span>,<span class="va">nchar</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Noten que el resultado aquí es una lista. Si quiero que sea un vector, puedo utilizar la función `unlist()`. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">cities</span>,<span class="va">nchar</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">cities</span>,<span class="va">nchar</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Lapply como función:</li>
</ul>
<div class="sourceCode" id="cb967"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">precios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">2.25</span>, <span class="fl">2.18</span>, <span class="fl">2.89</span>, <span class="fl">2.84</span>, <span class="fl">2.89</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Creamos una función</span></span>
<span><span class="va">multiplicar</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">factor</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">*</span> <span class="va">factor</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Ahora, podemos aplicar lapply y agregar opciones de la función</span></span>
<span><span class="va">tresveces</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">precios</span>, <span class="va">multiplicar</span>, factor <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">tresveces</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="va">tresveces</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Noten que la sintaxis es: objeto, función, opciones. Es decir, igual a lo anterior, pero pudiendo agregar opcionales. </span></span></code></pre></div>
<p><strong>Sapply:</strong> Es una variacion de <code>lapply</code> que sirve para simplificar
<code>lapply</code>. Ahora el resultado es un vector, no una lista.</p>
<div class="sourceCode" id="cb968"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"New york"</span>,<span class="st">"Paris"</span>, <span class="st">"Tokyo"</span>, <span class="st">" Rio de Janeiro"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">cities</span>,<span class="va">nchar</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">cities</span>,<span class="va">nchar</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Noten que es bastante ordenado. Sin embargo, falla cuando no es fácil ordenar el resultado. </span></span></code></pre></div>
<p><strong>Vapply:</strong> Es una variación que sirve para definir explícitamente el
tipo de objeto del resultado.</p>
<div class="sourceCode" id="cb969"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">vapply</a></span><span class="op">(</span><span class="va">cities</span>, <span class="va">nchar</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="manipulacion-de-bases-de-datos-en-r" class="section level3" number="9.3.2">
<h3>
<span class="header-section-number">9.3.2</span> Manipulacion de bases de datos en R<a class="anchor" aria-label="anchor" href="#manipulacion-de-bases-de-datos-en-r"><i class="fas fa-link"></i></a>
</h3>
<p>Analizar datos es parte importante de las labores que uno desea realizar
al utilizar R. Vamos a revisar cuatro aspectos iniciales de cualquier
trabajo con datos:</p>
<ol style="list-style-type: decimal">
<li>Importar datos en distintos formatos.</li>
<li>Inspeccionar y limpiar los datos que tenemos.</li>
<li>Transformar los datos con el fin de crear nuevas variables.</li>
<li>Juntar bases de datos de distinto tipo.</li>
</ol>
<div id="importar-bases-de-datos" class="section level4" number="9.3.2.1">
<h4>
<span class="header-section-number">9.3.2.1</span> Importar bases de datos<a class="anchor" aria-label="anchor" href="#importar-bases-de-datos"><i class="fas fa-link"></i></a>
</h4>
<ol style="list-style-type: decimal">
<li><p>Para poder utilizar, cargar, renovar datos es importante tenerlos
todos en un solo lugar.</p></li>
<li><p>Esto también aplica para los resultados y codigos.</p></li>
<li><p>Para que esto efectivamente ocurra necesitamos decirle a R cual va a
ser nuestro directorio de trabajo. Es decir, el lugar donde
guardaremos los datos que queremos trabajar, los resultados de
nuestros análisis y nuestros códigos.</p></li>
</ol>
<p>Directorios de trabajo en R:</p>
<div class="sourceCode" id="cb970"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Me dice donde estoy </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Si quiero indicarle otra ruta tengo dos opciones: </span></span>
<span></span>
<span><span class="co"># Opcion 1: Indicar a R la ruta/carpeta donde tengo mis datos </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Opcion 2: Lo mismo que opcion 1, pero más ordenado. </span></span>
<span><span class="va">ruta</span> <span class="op">&lt;-</span><span class="st">"C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">ruta</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Noten que es necesario ocupar `/`. Por defecto las rutas al copiarlas vienen con otro tipo de "slash". Para cambiarlas fácilmente, y no una por una, vamos a utilizar `ctrl + f`. </span></span>
<span></span>
<span><span class="co"># Con este atajo podemos remplazar varios elementos a la vez. Cuidado!! Es importante decirle si queremos que modifique todo el documento o bien solo una parte. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="va">ruta</span><span class="op">)</span></span></code></pre></div>
<p>Ejemplo de ordenar carpetas:</p>
<div class="sourceCode" id="cb971"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ruta</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3"</span></span>
<span></span>
<span><span class="co"># Codigos </span></span>
<span><span class="va">codigos</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3/codigos"</span></span>
<span><span class="va">codigos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">ruta</span>,<span class="st">"/"</span>,<span class="st">"codigos"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">codigos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="va">codigos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Datos </span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/catab/Dropbox/Curso R - Agosto 2022/Clase 3/datos"</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">ruta</span>,<span class="st">"/"</span>,<span class="st">"datos"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Datos raw </span></span>
<span><span class="va">datosraw</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/catab/Dropbox/Cursos de R/Curso R - Noviembre 2022/Clase 3/datos/raw"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="va">datosraw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Todo lo anterior no es muy recomendado. </span></span></code></pre></div>
<p>Proyectos de R:</p>
<ul>
<li>Proyecto: piensen en muchos proyectos con muchos códigos.</li>
<li>Es una herramienta incorporada en RStudio que permite manejar un
proyecto de análisis de datos.</li>
<li>Permite dividir el trabajo en múltiples contextos cada uno con su
propio directorio de trabajo, espacio de trabajo e historial.</li>
<li>¿Por qué utilizarlo?
<ul>
<li>Mantiene códigos y datos en la misma carpeta.</li>
<li>Mantiene códigos y datos separados de otros proyectos: evita
confusiones o errores.</li>
<li>Identifica automáticamente el directorio de trabajo, facilitando
cooperación.</li>
</ul>
</li>
</ul>
<p>Pasos para crear un proyecto:</p>
<ul>
<li>Dos opciones:
<ul>
<li>R crea una carpeta de trabajo.</li>
<li>Crear una carpeta primero, y luego decirle a R que la
identifique.</li>
</ul>
</li>
<li>Todos los nuevos archivos serán automáticamente guardados en la
carpeta del proyecto.</li>
<li>Una vez hecho el proyecto se genera un archivo con extensión
<code>R.proj</code>.</li>
<li>Aquí R guarda información del proyecto: historial, datos, etc.</li>
<li>Lo más importante es que fija el directorio de trabajo de forma tal
de que siempre sea el mismo una vez que se abre un proyecto. Evita
cambiar directorios de trabajo al colaborar.</li>
</ul>
<p>Package here:</p>
<div class="sourceCode" id="cb972"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"pacman"</span><span class="op">)</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="st">"here"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">here</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span><span class="op">)</span></span></code></pre></div>
<p>Package <code>rio</code>: R tiene bases de datos propias. Sin embargo, muchas veces
van a querer trabajar con datos propios. o bien de datos públicos que
muchas veces estan en distintos formatos. Rio package es una forma
flexible de importar datos en distintos.</p>
<p>Rio debe su nombre por R input/output. Dos funciones principales:
<code>import()</code> y <code>export()</code>. Además, cuando se le indica la extensión a
<code>rio</code> este leerá y utilizará la herramienta indicada para leer esos
datos.</p>
<div class="sourceCode" id="cb973"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman">pacman</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">here</span>, <span class="co"># Modificar carpetas</span></span>
<span>       <span class="va">rio</span><span class="op">)</span>  <span class="co"># Importar/exportar datos</span></span></code></pre></div>
<p>Hay otras opciones tambien para importar datos. Por ejemplo,
<code>read.csv() ("base R")</code>; <code>read.xlsx ("openxlsx")</code>. El problema es que
son difíciles de recordar. Mejor utilizar una.</p>
<p>Importar datos en distintos formatos: Utilizar <code>import()</code> para importar
un conjunto de datos es bastante sencillo. Basta con proporcionar la
ruta del archivo (incluyendo el nombre y la extensión del archivo) entre
comillas.</p>
<div class="sourceCode" id="cb974"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ocupamos R project, here e import para importar datos fácilmente</span></span>
<span></span>
<span><span class="va">datos_xlsx</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos_dta</span>  <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.dta"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos_txt</span>  <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.txt"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos_csv</span>  <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.csv"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Opciones:</p>
<div class="sourceCode" id="cb975"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Importar distintas hojas: Por defecto se importa la primer hoja de una base de datos, con "which" puedo elegir la hoja.</span></span>
<span></span>
<span><span class="va">datos_xlsx_h1</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, </span>
<span>                        which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span>
<span><span class="va">datos_xlsx_h2</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, </span>
<span>                        which <span class="op">=</span> <span class="st">"hoja2"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># 2. Puedo decirle a priori que valores son missings. </span></span>
<span></span>
<span><span class="co"># Especificar un missing</span></span>
<span><span class="va">datos_xlsx</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, na <span class="op">=</span> <span class="st">"2018"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Especificar varios a la vez..</span></span>
<span><span class="va">datos_xlsx</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, </span>
<span>                     na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Missing"</span>, <span class="st">""</span>, <span class="st">" "</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Saltar filas.</span></span>
<span><span class="va">datos_xlsx</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Noten que puedo hacerlo con cualquier tipo de datos, ya que son opciones de la función `rio`. </span></span>
<span></span>
<span><span class="va">datos_dta</span>  <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.dta"</span><span class="op">)</span> , skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># En la tabla de este link pueden ver los distintos paquetes que soporta `rio`, junto a ejemplo adicionales. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html">browseURL</a></span><span class="op">(</span><span class="st">"https://cran.r-project.org/web/packages/rio/vignettes/rio.html"</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-ii-1" class="section level2" number="9.4">
<h2>
<span class="header-section-number">9.4</span> Manipulación de bases de datos (Parte II)<a class="anchor" aria-label="anchor" href="#manipulaci%C3%B3n-de-bases-de-datos-parte-ii-1"><i class="fas fa-link"></i></a>
</h2>
<p>Ya sabemos cargar datos. Ahora vamos a hacer el primer proceso para
analizar cualquier base de datos.</p>
<div id="funciones-clave" class="section level3" number="9.4.1">
<h3>
<span class="header-section-number">9.4.1</span> Funciones clave<a class="anchor" aria-label="anchor" href="#funciones-clave"><i class="fas fa-link"></i></a>
</h3>
<p><code>Tidyverse</code> es una colección de paquetes de R. <code>Tidyverse</code> contiene
múltiples paquetes que iremos utilizando. Incluye: <code>dplyr</code>, <code>ggplot2</code>,
<code>tidyr</code>, <code>stringr</code>, <code>tibble</code>, <code>purrr</code>, <code>magrittr</code> y <code>forcats</code>. Una
paquete clave es <code>dplyr</code> que contiene muchas funciones para trabajar con
bases de datos.</p>
<p>Instalamos tidyverse:</p>
<div class="sourceCode" id="cb976"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman">pacman</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="operador-piping" class="section level3" number="9.4.2">
<h3>
<span class="header-section-number">9.4.2</span> Operador piping<a class="anchor" aria-label="anchor" href="#operador-piping"><i class="fas fa-link"></i></a>
</h3>
<p>Piping <code>%&gt;%</code>: <code>crtrl + shift + m</code>. Paquete asociado: <code>magrittr</code></p>
<div class="sourceCode" id="cb977"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">magrittr</span><span class="op">)</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Operador que permite encadenar las funciones para realizar de manera
sencilla transformaciones complejas en las bases de datos.</li>
<li>Lo que dice es pasar el elemento que esta a su izquierda como un
argumento de la función que tiene a la derecha.</li>
<li>Coloca el énfasis en las acciones. Pasa un output intermedio de una
función a la siguiente.</li>
<li>
<code>magrittr</code> es el paquete que permite ocupar <code>piping</code>. <code>piping</code> se
utiliza mucho con las librerias de <code>tidyverse</code> y <code>dplyr</code> enfocadas
en análisis de datos.</li>
<li>Excelente cuando existe una secuencia de acciones/operaciones que
queremos realizar.</li>
</ol>
<div class="sourceCode" id="cb978"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ejemplo 1: usar pipe como encadenador </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Con piping</span></span>
<span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ejemplo 2: obtener número total de observaciones y un promedio. </span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span><span class="va">mtcars</span>, </span>
<span>           media <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>promedio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Con piping </span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>promedio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">promedio_mpg_20</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">&gt;</span> <span class="fl">20</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>promedio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">promedio_mpg_20</span> </span></code></pre></div>
</div>
<div id="proceso-de-análisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar" class="section level3" number="9.4.3">
<h3>
<span class="header-section-number">9.4.3</span> Proceso de análisis de datos (Parte I): cargar, inspeccionar y limpiar<a class="anchor" aria-label="anchor" href="#proceso-de-an%C3%A1lisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar"><i class="fas fa-link"></i></a>
</h3>
<p>Preámbulo:</p>
<div class="sourceCode" id="cb979"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Limpiar</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargamos paquetes que vamos a utilizar</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman">pacman</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,        <span class="co"># Importar/Exportar datos </span></span>
<span>  <span class="va">here</span>,       <span class="co"># Determinar las rutas de mi carpeta </span></span>
<span>  <span class="va">tidyverse</span>,  <span class="co"># Analisis de datos y visualización</span></span>
<span>  <span class="va">magrittr</span>,   <span class="co"># Para utilizar operador %&gt;%  </span></span>
<span>  <span class="va">janitor</span>     <span class="co"># Para análisis de datos</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Importamos datos</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span></code></pre></div>
<p>Inspeccionar:</p>
<div class="sourceCode" id="cb980"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visión general </span></span>
<span><span class="va">datos</span> </span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/view.html">view</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Para una inspección detallada </span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">skimr</span><span class="op">)</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mirar algunas filas, columnas, etc.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span>     <span class="co"># muestra las 6 primeras filas </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span>     <span class="co"># últimas 6 filas </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fl">11</span><span class="op">)</span> <span class="co"># podemos pedir m?s de 6 </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fl">3</span><span class="op">)</span>  <span class="co"># o menos de 6</span></span>
<span></span>
<span><span class="co"># Mirar nombre variables/columnas</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># `names()` también puede ser </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"YEAR"</span>, <span class="st">"GDP"</span>, <span class="st">"GROSS_EXPORTS"</span>, </span>
<span>                  <span class="st">"GROSS_IMPORTS"</span>, <span class="st">"NET_EXPORTS"</span> <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mirar filas </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mirar la cantidad de variables de la base de datos</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="co"># columnas o variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ¿Qué tipo de objeto es? </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># También podemos inspeccionar elementos específicos</span></span>
<span><span class="va">datos</span><span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Si queremos ver la columna de GDP</span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">gdp</span></span>
<span><span class="va">datos</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">datos</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Para llamarlos solo por su nombre recordar ocupar `attach()`</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="va">gdp</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Si queremos un objeto dentro de una variable </span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">gdp</span><span class="op">[</span><span class="fl">7</span><span class="op">]</span></span>
<span><span class="va">datos</span><span class="op">[</span><span class="fl">7</span>,<span class="fl">2</span><span class="op">]</span>      <span class="co">#[fila, columna]</span></span>
<span><span class="va">datos</span><span class="op">[</span><span class="fl">7</span>,<span class="st">"gdp"</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Si queremos seleccionar parte de la columna </span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">gdp</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># o bien (solo por `attach()`)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="va">gdp</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># o bien </span></span>
<span><span class="va">datos</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">]</span> <span class="co"># mostrar las filas 1:2, de la columna 2</span></span>
<span></span>
<span><span class="co"># `table()` me permite hacer una tabla sencilla de frecuencias</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">datos</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.4.1:</b> Utilizando el operador pipping, mostrar las
últimas 2 filas de las primeras 11 filas.</p>
</div>
<p>Limpiar:</p>
<div class="sourceCode" id="cb981"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"YEAR"</span>, <span class="st">"GDP"</span>, <span class="st">"GROSS_EXPORTS"</span>, </span>
<span>                  <span class="st">"GROSS_IMPORTS"</span>, <span class="st">"NET_EXPORTS"</span> <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># La función `clean_names()` del paquete `janitor` estandariza nombres: </span></span>
<span></span>
<span><span class="va">datos_nuevos</span> <span class="op">&lt;-</span> <span class="fu">clean_names</span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos_nuevos</span><span class="op">)</span></span></code></pre></div>
<p>Renombrar variables:</p>
<div class="sourceCode" id="cb982"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos</span><span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Función para renombrar variables. Sintaxis: rename(nuevonombre = viejonombre)</span></span>
<span></span>
<span><span class="co"># Escribamos esto, pero con `piping`</span></span>
<span><span class="va">datos_renombrados</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>tiempo <span class="op">=</span> <span class="va">year</span>, </span>
<span>                     pib <span class="op">=</span> <span class="va">gdp</span>, </span>
<span>                     exportaciones <span class="op">=</span> <span class="va">gross_exports</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos_renombrados</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">datos_renombrados</span><span class="op">)</span></span></code></pre></div>
<p>Seleccionar variables o columnas:</p>
<div class="sourceCode" id="cb983"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos</span><span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># select() de `dplyr` permite seleccionar variables</span></span>
<span><span class="va">datos_select</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">gdp</span><span class="op">)</span>  </span>
<span></span>
<span><span class="va">datos_select1</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos_select1</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># También puedo seleccionar en base a un criterio (Sólo sirve para string)</span></span>
<span><span class="va">datos_select2</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"Gross"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Con `select` también se puede renombrar </span></span>
<span><span class="va">datos_select_renombrados</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>tiempo <span class="op">=</span> <span class="va">year</span>, </span>
<span>                                    pib <span class="op">=</span> <span class="va">gdp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Una opción es ocupar select con `everything()` para ordeanar mis columnas. </span></span>
<span><span class="va">datos_select_ordenados</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gdp</span>, <span class="va">year</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Remover columnas:</p>
<div class="sourceCode" id="cb984"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># La idea aqui es decir: todas se quedan, menos las que pongo aquí. </span></span>
<span><span class="va">datos_select_remover</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">gdp</span>, <span class="va">year</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p>Mirar si hay duplicados. En ocasiones es importante revisar si hay
duplicados. El paquete <code>dplyr</code> contiene <code><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct()</a></code>. Esta función
examina cada fila y reduce los datos solo a las que sean valores
diferentes:</p>
<div class="sourceCode" id="cb985"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos1</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ¿Cuantos duplicados?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dif</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">datos1</span><span class="op">)</span> </span>
<span><span class="va">dif</span></span></code></pre></div>
</div>
<div id="proceso-de-análisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar" class="section level3" number="9.4.4">
<h3>
<span class="header-section-number">9.4.4</span> Proceso de análisis de datos (Parte II): cargar, inspeccionar y limpiar<a class="anchor" aria-label="anchor" href="#proceso-de-an%C3%A1lisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar"><i class="fas fa-link"></i></a>
</h3>
<p>Cargar:</p>
<div class="sourceCode" id="cb986"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Limpiamos consola</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargamos paquetes que vamos a utilizar</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,        <span class="co"># importar/exportar datos. </span></span>
<span>  <span class="va">here</span>,       <span class="co"># escribir rutas de las carpetas.  </span></span>
<span>  <span class="va">janitor</span>,    <span class="co"># limpiar datos y tablas.</span></span>
<span>  <span class="va">tidyverse</span>,  <span class="co"># Manejo de bases de datos y visualización. </span></span>
<span>  <span class="va">magrittr</span>,    <span class="co"># Permite utilizar operador %&gt;% (piping). </span></span>
<span>  <span class="va">skimr</span>,       <span class="co"># Inspeccionar datos</span></span>
<span>  <span class="va">inspectdf</span>,   <span class="co"># Inspeccionar datos</span></span>
<span>  <span class="va">gapminder</span>    <span class="co"># Base de datos con información de países. </span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"gapminder"</span><span class="op">)</span></span>
<span><span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/view.html">view</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargamos datos que vienen incluidos en R. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span> </span>
<span><span class="va">starwars</span> </span></code></pre></div>
<p>Inspeccionar datos:</p>
<div class="sourceCode" id="cb987"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#  Inspect_cat() retorna una base de datos que resume características de un data.frame.</span></span>
<span><span class="va">inspeccion</span> <span class="op">&lt;-</span> <span class="fu">inspect_cat</span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span>
<span><span class="va">inspeccion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">inspeccion</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Las columnas son: </span></span>
<span></span>
<span><span class="co"># col_names: nombre de cada columna</span></span>
<span><span class="co"># cnt: número de valores únicos por nivel</span></span>
<span><span class="co"># common: el nivel más común</span></span>
<span><span class="co"># common_pcnt: el porcentaje de ocurrencia del nivel más común.</span></span>
<span><span class="co"># levels: una lista de dataframes (tibbles) cada uno con tablas de frecuencia para todos los niveles. </span></span>
<span></span>
<span><span class="co"># Notar que una de las columnas de un data frame pueden ser listas: </span></span>
<span><span class="va">inspeccion</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">inspeccion</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">inspeccion</span><span class="op">[</span><span class="fl">3</span>,<span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">inspeccion</span><span class="op">[</span><span class="fl">4</span>,<span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">inspeccion</span><span class="op">[</span><span class="fl">5</span>,<span class="fl">5</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Ahora, si quiero ver el contenido, debo utilizar doble paréntesis cuadrado</span></span>
<span><span class="va">inspeccion</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">]</span>      <span class="co"># Con el nombre</span></span>
<span><span class="va">inspeccion</span><span class="op">[[</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">]</span><span class="op">]</span>    <span class="co"># El contenido</span></span>
<span><span class="va">inspeccion</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span>      <span class="co"># El contenido de todas las filas, en este caso, listas</span></span>
<span><span class="va">inspeccion</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">inspeccion</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Una forma más simple de mirar esta información es:</span></span>
<span><span class="va">inspeccion</span><span class="op">$</span><span class="va">levels</span><span class="op">$</span><span class="va">eye_color</span></span>
<span><span class="va">inspeccion</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Otra cosa interesante de este paquete es la función `show_plot()`</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">inspect_cat</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">show_plot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Esta función permite ver las categorías de cada variable categórica. Noten que las zonas en gris son los NA. </span></span></code></pre></div>
<p>Limpiar bases de datos (continuación):</p>
<div class="sourceCode" id="cb988"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos</span><span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span></code></pre></div>
<ul>
<li>Seleccionar columnas:</li>
</ul>
<div class="sourceCode" id="cb989"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Vimos que `select()` es parte importante. `select()` puede ser utilizado con varias funciones adicionales: </span></span>
<span></span>
<span><span class="co"># 1. everything () - todas las otras columnas no mencionadas.</span></span>
<span><span class="va">datos_everything</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> <span class="op">(</span><span class="va">year</span>, <span class="va">gdp</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># 2. last_col () - la última columna.</span></span>
<span><span class="va">datos_last_col</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">year</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">last_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. where () - aplicar una función a todas las columnas y </span></span>
<span><span class="co">#               selecciona solo las que cumple esta condición </span></span>
<span><span class="co">#               (es decir, cuando es verdadera). </span></span>
<span><span class="va">datos_where</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.logical</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4. contains () - columns containing a character string</span></span>
<span><span class="va">datos_contains</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"exports"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 5. starts_with () - selecciona la variable si se tiene un prefijo determinado</span></span>
<span><span class="va">datos_starts_with</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"gross_"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># 6. ends_with () - selecciona la variable si se tiene un sufijo determinado</span></span>
<span><span class="va">datos_ends_with</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"_imports"</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># 7. matches () - aplicar una expresión regular </span></span>
<span><span class="va">datos_matches</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">matches</a></span><span class="op">(</span><span class="st">"gross|gdp"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 8. any_of () - la selecciona si la columna existe pero NO retorna error </span></span>
<span><span class="co">#                si no la encuentra. </span></span>
<span><span class="va">datos_any_of</span>  <span class="op">&lt;-</span>  <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html">any_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"gdp"</span>, <span class="st">"cualquiercosa"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>Manipulación de NAs: Con vectores. Los NA son parte importante de la
limpieza de los datos. Recordemos que la función <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> nos
permite identificarlos.</li>
</ul>
<div class="sourceCode" id="cb990"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">malos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>  </span>
<span><span class="va">malos</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">malos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Si queremos eliminar los NA es cosa de colocar un vector sobre otro</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">!</span><span class="va">malos</span><span class="op">]</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="op">!</span><span class="va">malos</span><span class="op">]</span></span>
<span><span class="va">x</span></span></code></pre></div>
<ul>
<li>Manipulación de NAs: con <code>complete cases()</code>
</li>
</ul>
<div class="sourceCode" id="cb991"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Miremos un caso más práctico con iris</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generar NA en la base de datos (después veremos esto en detalle ahora concéntrense solo en los NA)</span></span>
<span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">&lt;</span><span class="fl">5</span>, <span class="cn">NA</span>,<span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dos opciones: </span></span>
<span></span>
<span>  <span class="co"># (i) como antes</span></span>
<span>  <span class="va">malos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">)</span></span>
<span>  <span class="va">iris2</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="op">!</span><span class="va">malos</span>,<span class="op">]</span> </span>
<span>  <span class="va">iris2</span></span>
<span></span>
<span>  <span class="co"># (ii) utilizando `complete.cases()`</span></span>
<span>  <span class="va">completos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/complete.cases.html">complete.cases</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">completos</span>, <span class="fl">100</span><span class="op">)</span> </span>
<span></span>
<span>  <span class="co"># Creamos una base nueva solo con casos completos. </span></span>
<span>  <span class="va">iris3</span> <span class="op">&lt;-</span> <span class="va">iris</span><span class="op">[</span><span class="va">completos</span>,<span class="op">]</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris3</span><span class="op">)</span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">iris3</span><span class="op">)</span> </span></code></pre></div>
</div>
</div>
<div id="manipulación-de-bases-de-datos-parte-iii" class="section level2" number="9.5">
<h2>
<span class="header-section-number">9.5</span> Manipulación de bases de datos (Parte III)<a class="anchor" aria-label="anchor" href="#manipulaci%C3%B3n-de-bases-de-datos-parte-iii"><i class="fas fa-link"></i></a>
</h2>
<div id="crear-variables" class="section level3" number="9.5.1">
<h3>
<span class="header-section-number">9.5.1</span> Crear Variables<a class="anchor" aria-label="anchor" href="#crear-variables"><i class="fas fa-link"></i></a>
</h3>
<div id="crear-variables-binarias" class="section level4" number="9.5.1.1">
<h4>
<span class="header-section-number">9.5.1.1</span> Crear variables binarias<a class="anchor" aria-label="anchor" href="#crear-variables-binarias"><i class="fas fa-link"></i></a>
</h4>
<p>Ahora vamos a ver como crear variables dicótomas o binarias. Estas
variables son muy importantes para hacer análisis de datos. Vamos a
utilizar la función <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>.</p>
<div class="sourceCode" id="cb992"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Asignar valor 1 si estamos en democracia, 0 caso contrario</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>demo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span><span class="op">&gt;=</span><span class="fl">1990</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">demo</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tabla 1: ¿Cual fue el pib promedio en democracia y en dictadura?</span></span>
<span><span class="va">tabla1</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">demo</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>promediopib <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">gdp</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">tabla1</span> </span>
<span></span>
<span><span class="co"># Asignar valor 1 si estamos en democracia y el pib es mayor a su media</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">demo</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">gdp</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">gdp</span><span class="op">)</span>,</span>
<span>                                         <span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">gdp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Asignar valor 1 si estamos en democracia y si dentro de esos periodos</span></span>
<span><span class="co"># las exportaciones netas son mayores a la mediana de las importaciones </span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">expo</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">demo</span><span class="op">==</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">gross_exports</span><span class="op">&gt;</span></span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">gross_imports</span><span class="op">)</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">expo</span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-block alert-warning">
<p><b>Ejercicio 2.5.1:</b> Escriba lo anterior utilizando mutate.</p>
</div>
<p>Respuesta:</p>
<div class="sourceCode" id="cb993"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>expo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">demo</span><span class="op">==</span><span class="fl">1</span>, </span>
<span>                                      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">gross_exports</span><span class="op">&gt;</span></span>
<span>                                          <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">gross_imports</span><span class="op">)</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="crear-variables-categóricas" class="section level4" number="9.5.1.2">
<h4>
<span class="header-section-number">9.5.1.2</span> Crear variables categóricas<a class="anchor" aria-label="anchor" href="#crear-variables-categ%C3%B3ricas"><i class="fas fa-link"></i></a>
</h4>
<p>También podemos crear variables categóricas utilizando <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code>. De
manera muy sencilla podemos generar variables según ciertas condiciones:</p>
<div class="sourceCode" id="cb994"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># De manera muy sencilla podemos generar variables según ciertas condiciones  </span></span>
<span><span class="va">data</span><span class="op">$</span><span class="va">tipo</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">year</span><span class="op">&lt;</span><span class="fl">1980</span> <span class="op">&amp;</span> <span class="va">data</span><span class="op">$</span><span class="va">year</span><span class="op">&gt;</span><span class="fl">1959</span>,<span class="fl">1</span>,</span>
<span>                  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">year</span><span class="op">&lt;</span><span class="fl">2000</span> <span class="op">&amp;</span> <span class="va">data</span><span class="op">$</span><span class="va">year</span><span class="op">&gt;</span><span class="fl">1979</span>,<span class="fl">2</span>,</span>
<span>                         <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">year</span><span class="op">&lt;</span><span class="fl">2010</span> <span class="op">&amp;</span> <span class="va">data</span><span class="op">$</span><span class="va">year</span><span class="op">&gt;</span><span class="fl">1999</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span></span>
<span>                  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">tipo</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co">#  Nota: no es recomendable utilizar o escribir tantos `ifelse()` juntos.</span></span>
<span><span class="co"># Es mejor utilizar `case_when()` que veremos un más adelante. </span></span></code></pre></div>
</div>
</div>
<div id="factores" class="section level3" number="9.5.2">
<h3>
<span class="header-section-number">9.5.2</span> Factores<a class="anchor" aria-label="anchor" href="#factores"><i class="fas fa-link"></i></a>
</h3>
<p>R puede codificar automáticamente una variable categorica (factor) con
un número entero. Sirven para hacer estadisticas o estimar regresiones.
Los factores, pueden ser ordenados o no ordenados, se utilizan para
representar variables que se agrupan en categorías.</p>
<p>Veamos un ejemplo:</p>
<div class="sourceCode" id="cb995"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ford"</span>,<span class="st">"BMW"</span>,<span class="st">"Peugeot"</span><span class="op">)</span>,<span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># `factor()`</span></span>
<span><span class="va">factor_nominal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">factor_nominal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">factor_nominal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">factor_nominal</span><span class="op">)</span> <span class="co">#para analizar que niveles tiene el objeto</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">factor_nominal</span><span class="op">)</span>  <span class="co"># resume la cantidad de observaciones por nivel</span></span></code></pre></div>
</div>
<div id="funciones-útiles-para-transformar-bases-de-datos" class="section level3" number="9.5.3">
<h3>
<span class="header-section-number">9.5.3</span> Funciones útiles para transformar bases de datos<a class="anchor" aria-label="anchor" href="#funciones-%C3%BAtiles-para-transformar-bases-de-datos"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code>: Algunas veces queremos aplicar una función a múltiples
variables, para ello vamos a utilizar la función <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code> y
especificar la función con <code>fns</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb996"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos2</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, fns <span class="op">=</span> <span class="va">as.numeric</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Aquí `across()`, que es una función de "dplyr", permite ser utilizada con `mutate()`, `select()`, `filter()`, `summarise()`, etc. </span></span>
<span><span class="va">datos3</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">contains</a></span><span class="op">(</span><span class="st">"gross"</span><span class="op">)</span>, .fns <span class="op">=</span> <span class="va">as.numeric</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code>: Suma acumulada</p>
<div class="sourceCode" id="cb997"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Para hacer operaciones acumuladas</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">15</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span>     <span class="co"># Retorna la suma del vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">15</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Retorna la suma acumulada del vector</span></span>
<span></span>
<span><span class="co"># Puedo utilizarla con mutate ()</span></span>
<span><span class="va">datos_acumulados</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">gdp</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>gdp_acumulado <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos_acumulados</span></span></code></pre></div>
<p>Recodificar variables: A continuación se presentan algunos escenarios en
los que es necesario recodificar (cambiar) los valores:</p>
<ol style="list-style-type: decimal">
<li>Editar un valor específico (por ejemplo, una fecha con un año o
formato incorrecto)</li>
<li>Para conciliar valores que no se escriben igual</li>
<li>Crear una nueva columna de valores categóricas</li>
<li>Crear una nueva columna de categorías numéricas (por ejemplo,
categorías de edad)</li>
</ol>
<p><code><a href="https://dplyr.tidyverse.org/reference/recode.html">recode ()</a></code>: Cambiar valores</p>
<div class="sourceCode" id="cb998"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"Data.xlsx"</span><span class="op">)</span>, which <span class="op">=</span> <span class="st">"hoja1"</span><span class="op">)</span> </span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>demo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">year</span><span class="op">&gt;=</span><span class="fl">1990</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Seguimos con data </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Creamos una nueva variable </span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>regimen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">demo</span> <span class="op">==</span> <span class="fl">1</span>, <span class="st">"Democracia"</span>, <span class="st">"Dictadura"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos</span> </span>
<span></span>
<span><span class="co"># Recodificamos (cambiar nombres)</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>         <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>regimen <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/recode.html">recode</a></span><span class="op">(</span><span class="va">regimen</span>, <span class="st">"Democracia"</span> <span class="op">=</span> <span class="st">"Demo"</span>, </span>
<span>                          <span class="st">"Dictadura"</span> <span class="op">=</span> <span class="st">"Dict"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos</span> </span>
<span></span>
<span><span class="co"># Notar que es vieja variable por nueva variable</span></span></code></pre></div>
<p><code><a href="https://rdrr.io/r/base/replace.html">replace()</a></code>: Reemplazar valores</p>
<div class="sourceCode" id="cb999"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>avance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">demo</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">gdp</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">gdp</span><span class="op">)</span>,</span>
<span>                                           <span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Similar sintaxis a la de recode</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>         <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>regimen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span><span class="va">regimen</span>, <span class="va">avance</span> <span class="op">==</span> <span class="fl">0</span>, <span class="st">"No cambio en el pib"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sintaxis</span></span>
<span><span class="co"># mutate(columna a cambiar = replace(columna a cambiar, </span></span>
<span><span class="co">#                                      criterio para las filas, </span></span>
<span><span class="co">#                                      nuevo valor)).</span></span>
<span></span>
<span><span class="co"># Un equivalente a `replace()` es utilizar []. </span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">regimen</span><span class="op">[</span><span class="va">datos</span><span class="op">$</span><span class="va">avance</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"No cambio en el pib"</span></span></code></pre></div>
<p><code><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na()</a></code>: Para cambiar los valores perdidos (NA) por un valor
específico, como “Missing”, utilice la función <code>dplyr</code> <code><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na()</a></code>
dentro de <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>:</p>
<div class="sourceCode" id="cb1000"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos_ficticios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>var1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>                              var2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fl">11</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos_ficticios</span></span>
<span></span>
<span><span class="va">datos_ficticios1</span> <span class="op">&lt;-</span> <span class="va">datos_ficticios</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>                    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>var1 <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">var1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos_ficticios1</span></span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Recordatorio:</b> Esta función cambia los missing values solo por
valores de la misma clase de la variable/columna, por lo tanto, si
trabajamos con valores de clase numérica los reemplazos deben ser
también numéricos.</p>
</div>
<p><code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>: una función de <code>dplyr</code>. Es útil para asignar múltiples
valores. Sirve si se necesita recodificar muchos grupos:</p>
<div class="sourceCode" id="cb1001"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datosedad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>edad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">1</span>,<span class="fl">500</span>,<span class="fl">2330</span>,<span class="fl">8</span>,<span class="fl">10</span>,<span class="fl">12</span><span class="op">)</span>, </span>
<span>                        unidad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"años"</span>,<span class="st">"años"</span>, <span class="st">"años"</span>, <span class="cn">NA</span>, <span class="st">"meses"</span>, <span class="st">"meses"</span>, </span>
<span>                                   <span class="st">"años"</span>, <span class="st">"años"</span>, <span class="st">"semanas"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datosedad</span></span>
<span></span>
<span><span class="co"># Imaginemos que queremos tener una medida comparable de edad, para ello</span></span>
<span><span class="co"># podemos utilizar `case_when()`. </span></span>
<span><span class="va">datos_case_when</span> <span class="op">&lt;-</span>  <span class="va">datosedad</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>edad_años <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">unidad</span> <span class="op">==</span> <span class="st">"años"</span>  <span class="op">~</span> <span class="va">edad</span>, </span>
<span>    <span class="va">unidad</span> <span class="op">==</span> <span class="st">"meses"</span> <span class="op">~</span> <span class="va">edad</span><span class="op">/</span><span class="fl">12</span>, </span>
<span>    <span class="va">unidad</span> <span class="op">==</span> <span class="st">"semanas"</span> <span class="op">~</span> <span class="va">edad</span><span class="op">/</span><span class="fl">52</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">unidad</span><span class="op">)</span> <span class="op">~</span> <span class="va">edad</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos_case_when</span></span></code></pre></div>
</div>
<div id="cambio-de-formato-de-los-datos" class="section level3" number="9.5.4">
<h3>
<span class="header-section-number">9.5.4</span> Cambio de formato de los datos<a class="anchor" aria-label="anchor" href="#cambio-de-formato-de-los-datos"><i class="fas fa-link"></i></a>
</h3>
<div id="de-ancho-a-largo" class="section level4" number="9.5.4.1">
<h4>
<span class="header-section-number">9.5.4.1</span> De ancho a largo<a class="anchor" aria-label="anchor" href="#de-ancho-a-largo"><i class="fas fa-link"></i></a>
</h4>
<p>En en siguiente ejemplo, los datos están guardaos en “wide” para las
columnas que tienen el número de casos de malaria por tramos de edad.
Para un trabajo de análisis de datos es importante transformar los datos
a “long”.</p>
<div class="sourceCode" id="cb1002"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">count_data</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>,<span class="st">"malaria_facility_count_data.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">count_data</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer()</a></code>: función del paquete <code>tidyr</code>. Paquete incluido en
<code>tidyverse()</code>. Transforma los datos de wide a long.</p>
<div class="sourceCode" id="cb1003"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_long</span> <span class="op">&lt;-</span> <span class="va">count_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"malaria_rdt_0-4"</span>, </span>
<span>             <span class="st">"malaria_rdt_5-14"</span>, </span>
<span>             <span class="st">"malaria_rdt_15"</span>, </span>
<span>             <span class="st">"malaria_tot"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">df_long</span> </span>
<span></span>
<span><span class="co"># Una mejor opción es con la función starts_with(): </span></span>
<span><span class="va">count_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"malaria_"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Para agregar nombres a las nuevas variable creadas</span></span>
<span><span class="va">df_long1</span> <span class="op">&lt;-</span> <span class="va">count_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"malaria_"</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"grupo_edad"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"casos_malaria"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">df_long1</span></span></code></pre></div>
</div>
<div id="de-largo-a-ancho" class="section level4" number="9.5.4.2">
<h4>
<span class="header-section-number">9.5.4.2</span> De largo a ancho<a class="anchor" aria-label="anchor" href="#de-largo-a-ancho"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider()</a></code>: Transforma los datos de long a wide. Útil si quiero
hacer una tabla mas amigable para el o la lectora.</p>
<div class="sourceCode" id="cb1004"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>,<span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span> <span class="va">df_wide</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span></span>
<span> <span class="va">df_wide</span></span>
<span></span>
<span><span class="co"># En un mejor formato</span></span>
<span> <span class="va">table_wide</span> <span class="op">&lt;-</span> <span class="va">df_wide</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span></span>
<span>     id_cols <span class="op">=</span> <span class="va">age_cat</span>,</span>
<span>     names_from <span class="op">=</span> <span class="va">gender</span>,</span>
<span>     values_from <span class="op">=</span> <span class="va">n</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span> <span class="va">table_wide</span></span></code></pre></div>
<p>Otra opción para hacer esto mismo es <code><a href="https://tidyr.tidyverse.org/reference/gather.html">gather()</a></code> y <code><a href="https://tidyr.tidyverse.org/reference/spread.html">spread()</a></code>:</p>
<div class="sourceCode" id="cb1005"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>,<span class="st">"Cuadro_1.xls"</span><span class="op">)</span>, skip <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Cargamos datos que estan en formato ancho y los preparamos un poco...</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1960</span><span class="op">:</span><span class="fl">2018</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Como vemos, los años estan en las columnas, y queremos pasar a long data, </span></span>
<span><span class="co"># de forma tal que los años esten en una columna y el pib en otra </span></span>
<span><span class="co"># 2. La funciom "gather()" transforma los datos de formato ancho (wide) a </span></span>
<span><span class="co"># formato largo (long)</span></span>
<span></span>
<span><span class="co"># De ancho a largo: utilizando la función gather()</span></span>
<span><span class="co"># La primera es la variable "clave" y la segunda es la del valor</span></span>
<span><span class="va">data_long</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span><span class="va">año</span>, <span class="va">pib</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">59</span><span class="op">)</span></span>
<span><span class="va">data_long</span></span>
<span></span>
<span><span class="co"># De largo a ancho: utilizando la función spread()</span></span>
<span><span class="va">data_wide</span> <span class="op">&lt;-</span> <span class="va">data_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span><span class="op">(</span><span class="va">año</span>,<span class="va">pib</span><span class="op">)</span></span>
<span><span class="va">data_wide</span></span></code></pre></div>
</div>
</div>
<div id="juntar-bases-de-datos" class="section level3" number="9.5.5">
<h3>
<span class="header-section-number">9.5.5</span> Juntar bases de datos<a class="anchor" aria-label="anchor" href="#juntar-bases-de-datos"><i class="fas fa-link"></i></a>
</h3>
<div id="pegar-hacia-el-lado-por-columnas" class="section level4" number="9.5.5.1">
<h4>
<span class="header-section-number">9.5.5.1</span> Pegar hacia el lado (por columnas)<a class="anchor" aria-label="anchor" href="#pegar-hacia-el-lado-por-columnas"><i class="fas fa-link"></i></a>
</h4>
<p>En el siguiente ejemplo, tenemos datos de hospitales.</p>
<div class="sourceCode" id="cb1006"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hosp_info</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>,<span class="st">"hosp_info_final.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">linelist_mini</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>,<span class="st">"linelist_mini_final.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Sintaxis: Imaginemos que tenemos dos bases de datos “df1”, “df2”. df1
tienen una columna llamada “ID”. df2 tiene una columna que se llama
identificador.</p>
<div class="sourceCode" id="cb1007"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Caso 1: nombres de identificadores distintos.</span></span>
<span><span class="va">data_junta</span> <span class="op">&lt;-</span> <span class="fu">join</span><span class="op">(</span><span class="va">df1</span>,</span>
<span>                   <span class="va">df2</span>,</span>
<span>                   by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ID"</span> <span class="op">=</span> <span class="st">"identificador"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Caso 2: imaginemos ambas bases de datos (df1, df2) tienen un</span></span>
<span><span class="co">#         identificador llamado "ID"</span></span>
<span></span>
<span><span class="va">data_junta</span> <span class="op">&lt;-</span> <span class="fu">join</span><span class="op">(</span><span class="va">df1</span>,</span>
<span>                        <span class="va">df2</span>,</span>
<span>                        by <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Caso 3: imaginemos queremos pegar bases de datos considerando más</span></span>
<span><span class="co">#         de un identificador.</span></span>
<span><span class="va">data_junta</span> <span class="op">&lt;-</span> <span class="fu">join</span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nombre"</span> <span class="op">=</span> <span class="st">"primernombre"</span>,</span>
<span>                                         <span class="st">"apellido"</span> <span class="op">=</span> <span class="st">"primerapellido"</span>,</span>
<span>                                         <span class="st">"Edad"</span> <span class="op">=</span> <span class="st">"edad"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Left y Right join:</strong></p>
<div class="sourceCode" id="cb1008"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Left join: la primera base de datos que aparece es la referencia.</span></span>
<span><span class="co"># Right join: la segunda base de datos que aparece es la referencia.</span></span>
<span></span>
<span><span class="co"># Left_join</span></span>
<span><span class="va">left_join_ex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">linelist_mini</span>,</span>
<span>                           <span class="va">hosp_info</span>,</span>
<span>                           by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hospital"</span> <span class="op">=</span> <span class="st">"hosp_name"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">right_join_ex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">hosp_info</span>,</span>
<span>                             <span class="va">linelist_mini</span>,</span>
<span>                             by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hosp_name"</span> <span class="op">=</span> <span class="st">"hospital"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ambos son equivalentes. </span></span>
<span><span class="va">right_join_ex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join</a></span><span class="op">(</span><span class="va">linelist_mini</span>,</span>
<span>                             <span class="va">hosp_info</span>,</span>
<span>                             by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hospital"</span> <span class="op">=</span> <span class="st">"hosp_name"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">left_join_ex2</span> <span class="op">&lt;-</span> <span class="va">linelist_mini</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">hosp_info</span>,</span>
<span>            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hospital"</span> <span class="op">=</span> <span class="st">"hosp_name"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Notas:</span></span>
<span></span>
<span><span class="co"># 1. Todas las filas/observaciones de la base de datos de referencia</span></span>
<span><span class="co">#    se mantienen.</span></span>
<span><span class="co"># 2. Si hay más de un match, se duplican las observaciones.</span></span>
<span><span class="co"># 3. Los identificadores se combinan. Según el nombre</span></span>
<span><span class="co">#     de la columna de la base de datos de referencia.</span></span>
<span><span class="co"># 4. Cuando no hay un "match" las columnas se llenan con un NA</span></span>
<span><span class="co">#     para las observaciones de la base de referencia.</span></span>
<span><span class="co"># 5. No "match" por la base que no es de referencia se borran.</span></span></code></pre></div>
<p><strong>Full Join:</strong> El más inclusivo de los “joins”. Retorna todas las
observaciones/filas:</p>
<div class="sourceCode" id="cb1009"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">full_join_ex3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">linelist_mini</span>,</span>
<span>                           <span class="va">hosp_info</span>,</span>
<span>                           by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hospital"</span> <span class="op">=</span> <span class="st">"hosp_name"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">full_join_ex3</span> <span class="op">&lt;-</span> <span class="va">linelist_mini</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">hosp_info</span>,</span>
<span>            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hospital"</span> <span class="op">=</span> <span class="st">"hosp_name"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Inner join:</strong> El más restrictivo de los “join”. Retorna solo las filas
que hicieron match entre ambas bases de datos.</p>
<div class="sourceCode" id="cb1010"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Su análogo en stata es:  merge 1:1, keep _merge==3</span></span>
<span><span class="co"># Los que se pegaron perfectamente entre ambas bases.</span></span>
<span></span>
<span><span class="va">inner_join_example</span> <span class="op">&lt;-</span> <span class="va">linelist_mini</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">hosp_info</span>,</span>
<span>             by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hospital"</span> <span class="op">=</span> <span class="st">"hosp_name"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Semi - join:</strong> Mantiene todas las observaciones de la base de
referencia que tengan un “match” en la base secundaria, pero NO agrega
nuevas columnas ni duplicados en casos de multiples “match”.</p>
<div class="sourceCode" id="cb1011"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">semi_join_example1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span><span class="op">(</span><span class="va">hosp_info</span>, <span class="va">linelist_mini</span>, </span>
<span>                                by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hosp_name"</span> <span class="op">=</span><span class="st">"hospital"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">semi_join_example</span> <span class="op">&lt;-</span> <span class="va">hosp_info</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                     <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span><span class="op">(</span><span class="va">linelist_mini</span>,</span>
<span>                     by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hosp_name"</span> <span class="op">=</span> <span class="st">"hospital"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Anti- join:</strong> Se le llama, al igual que semi-join “join de filtros”.
Retorna las observaciones/filas en la base de datos de referencia que no
hacen “match” en base de datos secundaria.</p>
<div class="sourceCode" id="cb1012"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">anti_join_example</span> <span class="op">&lt;-</span> <span class="va">hosp_info</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">linelist_mini</span>,</span>
<span>            by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hosp_name"</span> <span class="op">=</span> <span class="st">"hospital"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>La función <code>merge</code>:</p>
<div class="sourceCode" id="cb1013"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">authors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  surname <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Tukey"</span>, <span class="st">"Venables"</span>, <span class="st">"Tierney"</span>, <span class="st">"Ripley"</span>, <span class="st">"McNeil"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  nationality <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"US"</span>, <span class="st">"Australia"</span>, <span class="st">"US"</span>, <span class="st">"UK"</span>, <span class="st">"Australia"</span><span class="op">)</span>,</span>
<span>  deceased <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"yes"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"no"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">authors</span></span>
<span></span>
<span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Tukey"</span>, <span class="st">"Venables"</span>, <span class="st">"Tierney"</span>,</span>
<span>             <span class="st">"Ripley"</span>, <span class="st">"Ripley"</span>, <span class="st">"McNeil"</span>, <span class="st">"R Core"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Exploratory Data Analysis"</span>,</span>
<span>            <span class="st">"Modern Applied Statistics ..."</span>,</span>
<span>            <span class="st">"LISP-STAT"</span>,</span>
<span>            <span class="st">"Spatial Statistics"</span>, <span class="st">"Stochastic Simulation"</span>,</span>
<span>            <span class="st">"Interactive Data Analysis"</span>,</span>
<span>            <span class="st">"An Introduction to R"</span><span class="op">)</span>,</span>
<span>  other.author <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"Ripley"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span>                   <span class="st">"Venables &amp; Smith"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">books</span></span>
<span></span>
<span><span class="va">m0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">authors</span>,</span>
<span>            <span class="va">books</span>,</span>
<span>            by.x <span class="op">=</span> <span class="st">"surname"</span>, by.y <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></span>
<span><span class="va">m0</span></span>
<span></span>
<span><span class="co"># Por defecto solo mantiene las que hicieron match.</span></span>
<span><span class="va">m1</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">authors</span>,</span>
<span>             <span class="va">books</span>,</span>
<span>             by.x <span class="op">=</span> <span class="st">"surname"</span>, by.y <span class="op">=</span> <span class="st">"name"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">m1</span></span></code></pre></div>
</div>
<div id="pegar-hacia-abajo-por-filas" class="section level4" number="9.5.5.2">
<h4>
<span class="header-section-number">9.5.5.2</span> Pegar hacia abajo (por filas)<a class="anchor" aria-label="anchor" href="#pegar-hacia-abajo-por-filas"><i class="fas fa-link"></i></a>
</h4>
<p>Otra forma de unir bases de datos es agregar filas. Similar a lo que se
hace con <code><a href="https://rdrr.io/r/base/append.html">append()</a></code> en Stata. Vamos a utilizar la función <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code>
desde el paquete “dplyr”.</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code> es bastante inclusivo. Cualquier columna presente en
las bases de datos se incluye en el output.</li>
<li>Si ambas columnas se llaman igual, se alinearan correctamente.</li>
<li>Adicionalmente, podemos agregar el argumento <code>.id=</code>. Este argumento
genera una nueva columna que sirve para identificar de donde
proviene la informacion.</li>
</ol>
<p><strong>Ejemplo 1:</strong> caso sencillo</p>
<div class="sourceCode" id="cb1014"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">continente_resumen</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">continent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    cases <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    gdpPercapmedian <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">gdpPercap</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">continente_resumen</span></span>
<span></span>
<span><span class="co"># Crear Tabla 2: sin agrupar</span></span>
<span><span class="va">totales</span> <span class="op">&lt;-</span> <span class="va">gapminder</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    cases <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    gdpPercapmedian <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">gdpPercap</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">totales</span></span>
<span></span>
<span><span class="co"># Ahora las podemos pegar</span></span>
<span><span class="va">combinadas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">continente_resumen</span>, <span class="va">totales</span><span class="op">)</span></span>
<span><span class="va">combinadas</span></span>
<span></span>
<span><span class="co"># ¿Como cambiar ese NA? </span></span>
<span><span class="va">combinadas</span> <span class="op">&lt;-</span> <span class="va">combinadas</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>continent <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">combinadas</span></span>
<span></span>
<span><span class="co"># Muy util colocar "id"</span></span>
<span><span class="va">combinadas_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">continente_resumen</span>, </span>
<span>                           <span class="va">totales</span>, </span>
<span>                           .id <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="va">combinadas_id</span></span></code></pre></div>
<p><strong>Ejemplo 2:</strong> ¿Qué ocurre si hay más de un archivo?</p>
<div class="sourceCode" id="cb1015"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Base de datos maestra</span></span>
<span><span class="va">trial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  year    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">2017</span>, <span class="fl">2018</span>, <span class="fl">2019</span><span class="op">)</span>,</span>
<span>  n       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">501</span>, <span class="fl">499</span>, <span class="fl">498</span>, <span class="fl">502</span><span class="op">)</span>,</span>
<span>  outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">51</span>, <span class="fl">52</span>, <span class="fl">49</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Base de datos 1</span></span>
<span><span class="va">trial_2020</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  year    <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  n       <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  outcome <span class="op">=</span> <span class="fl">48</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Base de datos 2</span></span>
<span><span class="va">trial_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  year      <span class="op">=</span> <span class="fl">2021</span>,</span>
<span>  n         <span class="op">=</span> <span class="fl">598</span>,</span>
<span>  outcome   <span class="op">=</span> <span class="fl">57</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Para combinar mas de una base de datos</span></span>
<span><span class="va">trial1</span><span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">trial</span>,<span class="va">trial_2020</span>, <span class="va">trial_2021</span><span class="op">)</span></span></code></pre></div>
<p><strong>Ejemplo 3:</strong> ¿Qué ocurre si tengo muchos archivos?</p>
<div class="sourceCode" id="cb1016"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trinker/pacman">pacman</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">plyr</span><span class="op">)</span>    <span class="co"># Recomendable ocupar paquete plyr.</span></span>
<span></span>
<span><span class="va">allfiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"datos"</span>,</span>
<span>                       pattern <span class="op">=</span> <span class="st">".csv"</span>,</span>
<span>                       full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">allfiles</span></span>
<span></span>
<span><span class="co"># Append data</span></span>
<span><span class="va">combined_data</span><span class="op">&lt;-</span> <span class="fu">ldply</span><span class="op">(</span><span class="va">allfiles</span>, <span class="va">read_csv</span><span class="op">)</span></span>
<span><span class="va">combined_data</span></span>
<span></span>
<span><span class="co"># Transformar a un data.frame.</span></span>
<span><span class="va">combined_data_sep</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">combined_data</span>,</span>
<span>                              col <span class="op">=</span> <span class="st">"year;n;outcome"</span>,</span>
<span>                              into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"n"</span>, <span class="st">"outcome"</span><span class="op">)</span>,</span>
<span>                              sep <span class="op">=</span> <span class="st">";"</span><span class="op">)</span></span>
<span><span class="va">combined_data_sep</span></span></code></pre></div>
</div>
</div>
</div>
<div id="análisis-de-datos" class="section level2" number="9.6">
<h2>
<span class="header-section-number">9.6</span> Análisis de datos<a class="anchor" aria-label="anchor" href="#an%C3%A1lisis-de-datos"><i class="fas fa-link"></i></a>
</h2>
<div id="inspección-de-datos" class="section level3" number="9.6.1">
<h3>
<span class="header-section-number">9.6.1</span> Inspección de datos<a class="anchor" aria-label="anchor" href="#inspecci%C3%B3n-de-datos"><i class="fas fa-link"></i></a>
</h3>
<p>Preámbulo:</p>
<div class="sourceCode" id="cb1017"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Limpiamos consola</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cargamos paquetes que vamos a utilizar</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span></span>
<span>  <span class="va">rio</span>,        <span class="co"># importar/exportar datos. </span></span>
<span>  <span class="va">here</span>,       <span class="co"># escribir rutas de las carpetas.  </span></span>
<span>  <span class="va">janitor</span>,    <span class="co"># limpiar datos y tablas.</span></span>
<span>  <span class="va">tidyverse</span>,  <span class="co"># Manejo de bases de datos y visualización. </span></span>
<span>  <span class="va">magrittr</span>,    <span class="co"># Permite utilizar operador %&gt;% (piping). </span></span>
<span>  <span class="va">skimr</span>,       <span class="co"># Inspeccionar datos</span></span>
<span>  <span class="va">inspectdf</span>,   <span class="co"># Inspeccionar datos</span></span>
<span>  <span class="va">gapminder</span>    <span class="co"># Base de datos con información de países. </span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Ahora vamos a crear tablas de estadística descriptiva que nos interesen
para el análisis de datos.</p>
<div class="sourceCode" id="cb1018"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Importamos datos</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>,<span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Inspeccionamos los datos</span></span>
<span></span>
<span><span class="co"># a.  Visión general de la base de datos</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># b. Información sobre cada columna</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># c. Información sobre cada variable categórica. </span></span>
<span><span class="va">insp</span> <span class="op">&lt;-</span> <span class="fu">inspect_cat</span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="va">insp</span></span>
<span><span class="va">insp_figura</span> <span class="op">&lt;-</span> <span class="va">insp</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">show_plot</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">insp_figura</span></span>
<span></span>
<span><span class="co"># d. Miramos nombre de las variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Nota 1: Tenemos 29 variables y el id es igual a case_id. </span></span></code></pre></div>
<p>Transformamos variables de interés:</p>
<div class="sourceCode" id="cb1019"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a. Miramos la clase de cada variable </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">datos</span>,<span class="va">class</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Nota 2: gender esta como texto, podría estar como factor. Lo mismo ocurre con outcome. </span></span>
<span></span>
<span><span class="co"># b. Transformamos gender/outcome en factores </span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">datos</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">datos</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datos</span><span class="op">$</span><span class="va">outcome</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">datos</span><span class="op">$</span><span class="va">outcome</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">datos</span><span class="op">$</span><span class="va">outcome</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Miramos como esta codificado ahora </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">datos</span>,<span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="st">"gender"</span><span class="op">]</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># c. Seleccionamos solo variables que nos interesa ocupar: reducir el problema!</span></span>
<span><span class="va">datos_trabajo</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">outcome</span>, <span class="va">gender</span>, <span class="va">age</span>, </span>
<span>                                  <span class="va">age_years</span>, <span class="va">age_cat</span>, <span class="va">hospital</span>, <span class="va">wt_kg</span><span class="op">:</span><span class="va">temp</span>, </span>
<span>                                  <span class="va">days_onset_hosp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># d. Vemos que hay variables que están codificadas como "yes" y "no". </span></span>
<span><span class="co">#    Vamos a crearlas como variables binarias. </span></span>
<span></span>
<span><span class="va">datos_trabajo</span> <span class="op">&lt;-</span>  <span class="va">datos_trabajo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>chills <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">chills</span> <span class="op">==</span> <span class="st">"yes"</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>         cough  <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">cough</span> <span class="op">==</span> <span class="st">"yes"</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>, </span>
<span>         aches  <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">aches</span> <span class="op">==</span> <span class="st">"yes"</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span>, </span>
<span>         vomit  <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">vomit</span> <span class="op">==</span> <span class="st">"yes"</span>,<span class="fl">1</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">datos_trabajo</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Limpiamos para quedarnos solo con los datos que nos interesan. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">insp</span>, <span class="va">insp_figura</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Inspeccionamos nuevamente</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">datos_trabajo</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># e. Ahora vamos a dejar una base de datos unicamente con valores completos</span></span>
<span><span class="va">completos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/complete.cases.html">complete.cases</a></span><span class="op">(</span><span class="va">datos_trabajo</span><span class="op">)</span></span>
<span><span class="va">completos</span> </span>
<span><span class="va">datos_trabajo</span> <span class="op">&lt;-</span> <span class="va">datos_trabajo</span><span class="op">[</span><span class="va">completos</span>,<span class="op">]</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">datos_trabajo</span><span class="op">)</span>            </span>
<span></span>
<span><span class="co"># f. Finalmente, vamos a renombrar la base de datos con la que vamos a trabajar.  </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">datos</span>, <span class="va">completos</span><span class="op">)</span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="va">datos_trabajo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">datos_trabajo</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="estadística-descriptiva" class="section level3" number="9.6.2">
<h3>
<span class="header-section-number">9.6.2</span> Estadística descriptiva<a class="anchor" aria-label="anchor" href="#estad%C3%ADstica-descriptiva"><i class="fas fa-link"></i></a>
</h3>
<p>Describiendo los datos:</p>
<div class="sourceCode" id="cb1020"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">rstatix</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Opcion 1: utilizar get_summary_stats() del paquete "rstatix". </span></span>
<span><span class="co"># El resultado se guarda en un dataframe. </span></span>
<span><span class="va">tabla1</span> <span class="op">&lt;-</span> <span class="va">datos</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">get_summary_stats</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>,  </span>
<span>    type <span class="op">=</span> <span class="st">"full"</span><span class="op">)</span>                    </span>
<span><span class="va">tabla1</span> </span>
<span></span>
<span><span class="co"># Puedo exportar esta tabla en excel utilizando `rio` y `here`.</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">tabla1</span>, <span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, </span>
<span>                    <span class="st">"ejercicio1"</span>, </span>
<span>                    <span class="st">"tabla1.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="tablas-de-frecuencia" class="section level3" number="9.6.3">
<h3>
<span class="header-section-number">9.6.3</span> Tablas de frecuencia<a class="anchor" aria-label="anchor" href="#tablas-de-frecuencia"><i class="fas fa-link"></i></a>
</h3>
<p>El paquete “janitor” ofrece la función <code>tabyl()</code> para producir
tabulaciones simples y tabulaciones cruzadas, que pueden ser “adornadas”
o modificadas con funciones de ayuda para mostrar porcentajes,
proporciones, recuentos, etc.</p>
<p>El uso por defecto de <code>tabyl()</code> en una columna específica produce los
valores únicos, los recuentos y los “porcentajes” de la columna (en
realidad proporciones). Las proporciones pueden tener muchos dígitos.
Puede ajustar el número de décimales con la función <code>adorn_rounding()</code>
como se describe a continuación.</p>
<div id="tablas-de-frecuencias-con-una-entrada" class="section level4" number="9.6.3.1">
<h4>
<span class="header-section-number">9.6.3.1</span> Tablas de frecuencias con una entrada<a class="anchor" aria-label="anchor" href="#tablas-de-frecuencias-con-una-entrada"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1021"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Frecuencia para age_cat </span></span>
<span><span class="va">tabla2a</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span></span>
<span><span class="va">tabla2a</span> </span>
<span></span>
<span><span class="va">tabla2b</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">gender</span><span class="op">)</span></span>
<span><span class="va">tabla2b</span> </span>
<span></span>
<span><span class="va">tabla2c</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></span>
<span><span class="va">tabla2c</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">tabla2a</span>, <span class="va">tabla2b</span>, <span class="va">tabla2c</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ¿Qué pasa si queremos hacer una tabla de frecuencias para </span></span>
<span><span class="co"># todas las variables que son factores? -&gt; iteradores! </span></span>
<span></span>
<span><span class="co"># Nombre de todas las variables de la base de datos</span></span>
<span><span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span>
<span><span class="va">nombres</span> </span>
<span></span>
<span><span class="co"># Selecciono solo a las que son categóricas (factores)</span></span>
<span><span class="va">select</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">datos</span>, <span class="va">is.factor</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">select</span> </span>
<span></span>
<span><span class="va">nombres</span> <span class="op">&lt;-</span> <span class="va">nombres</span><span class="op">[</span><span class="va">select</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">]</span></span>
<span><span class="va">nombres</span> </span></code></pre></div>
<p>Ahora voy a generar tantas tablas como variables categóricas para ello
vamos a hacer uso de iteraciones. Creo una lista vacía, donde voy a
guardar las tablas (data frames) que se generen.</p>
<div class="sourceCode" id="cb1022"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tabla2</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla2a</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span></span>
<span><span class="va">tabla2a</span> </span>
<span></span>
<span><span class="va">tabla2b</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">gender</span><span class="op">)</span></span>
<span><span class="va">tabla2b</span> </span>
<span></span>
<span><span class="va">tabla2c</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></span>
<span><span class="va">tabla2c</span> </span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">nombres</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">tabla2</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">nombres</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Ahora tengo una lista de tablas. Cada tabla habla de un variable
categórica. Si vemos son equivalente a generarlas de otra forma. Si
tengo pocas variables categóricas, esta forma puede no ser relevante,
sin embargo, si tengo muchas, puede ser una buena forma de generar
estadística descriptiva.</p>
<div class="sourceCode" id="cb1023"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Comparamos </span></span>
<span><span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">outcome</span>,show_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">tabla2</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">gender</span>,show_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">tabla2</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Exportamos utilizando `rio` y `here` de nuevo </span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">tabla2</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, <span class="st">"ejercicio1"</span>, <span class="st">"tabla2-1-freq-outcomes.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">tabla2</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,<span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, <span class="st">"ejercicio1"</span>, <span class="st">"tabla2-2-freq-gender.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="va">tabla2</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span>,<span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, <span class="st">"ejercicio1"</span>, <span class="st">"tabla2-3-freq-age_cat.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="tablas-de-frecuencias-con-más-de-una-entrada" class="section level4" number="9.6.3.2">
<h4>
<span class="header-section-number">9.6.3.2</span> Tablas de frecuencias con más de una entrada<a class="anchor" aria-label="anchor" href="#tablas-de-frecuencias-con-m%C3%A1s-de-una-entrada"><i class="fas fa-link"></i></a>
</h4>
<p>Imaginen que estamos interesados o interesadas en saber cuantas
observaciones por categoría de edad por genero. Para ello nos gustaría
hacer una tabla de doble entrada. Podemos ocupar <code>tabyl()</code> para hacer
eso fácilmente:</p>
<div class="sourceCode" id="cb1024"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tabla3</span> <span class="op">&lt;-</span> <span class="va">datos</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span>, show_na <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">tabla3</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">tabla3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Hacemos una lista </span></span>
<span><span class="va">tabla3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla3</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span></span>
<span><span class="va">tabla3</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">outcome</span>, <span class="va">age_cat</span><span class="op">)</span></span>
<span><span class="va">tabla3</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla3</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">tabla3</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">tabla3</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Exportamos pero a diferentes hojas</span></span>
<span><span class="fu">export</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"tabla 3.1"</span> <span class="op">=</span> <span class="va">tabla3</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,<span class="st">"tabla 3.2"</span> <span class="op">=</span> <span class="va">tabla3</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>,</span>
<span>            <span class="st">"tabla 3.3"</span> <span class="op">=</span> <span class="va">tabla3</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,   <span class="co">#Podemos asignarles nombres</span></span>
<span>       <span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, <span class="st">"ejercicio1"</span>, <span class="st">"tabla3_cruzadas.xlsx"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="tablas-mejoradas-con-opciones" class="section level4" number="9.6.3.3">
<h4>
<span class="header-section-number">9.6.3.3</span> Tablas mejoradas con opciones<a class="anchor" aria-label="anchor" href="#tablas-mejoradas-con-opciones"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1025"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Tabular los recuentos y las proporciones por categoría de edad</span></span>
<span></span>
<span><span class="co"># Con porcentajes para una de una entrada</span></span>
<span><span class="va">tabla4</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>               </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>       </span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span>   <span class="co"># convertir proporciones en porcentajes</span></span>
<span><span class="va">tabla4</span></span>
<span></span>
<span><span class="co"># Con porcentajes por fila</span></span>
<span><span class="va">tabla5</span> <span class="op">&lt;-</span> <span class="va">datos</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># contar para edad y género</span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># agregar totales</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># cambiar a porcentaje</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>            <span class="co"># numero de digitos</span></span>
<span><span class="va">tabla5</span> </span>
<span></span>
<span><span class="co"># Nota: ¿Qué ocurre si cambio col/row en adorn_percentages? </span></span>
<span></span>
<span><span class="co"># Con porcentajes  por columna </span></span>
<span><span class="va">tabla6</span> <span class="op">&lt;-</span> <span class="va">datos</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># contar para edad y genero</span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># agregar totales</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># cambiar a porcentaje</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>            <span class="co"># nùmero de digitos</span></span>
<span></span>
<span><span class="va">tabla6</span> </span>
<span></span>
<span></span>
<span><span class="co"># Con total  por columna y fila </span></span>
<span><span class="va">tabla7</span> <span class="op">&lt;-</span> <span class="va">datos</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  <span class="co"># contar para edad y genero</span></span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"row"</span>,<span class="st">"col"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># agregar totales</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># cambiar a porcentaje</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>            <span class="co"># nùmero de digitos</span></span>
<span><span class="va">tabla7</span> </span>
<span></span>
<span><span class="co"># ¿Como se diferencian estas tablas? </span></span>
<span><span class="va">tabla4</span></span>
<span><span class="va">tabla5</span> <span class="co"># por fila</span></span>
<span><span class="va">tabla6</span> <span class="co"># por la columna</span></span>
<span><span class="va">tabla7</span> <span class="co"># agrega dos totales</span></span>
<span></span>
<span><span class="co"># Agregamos titulos </span></span>
<span><span class="va">tabla8</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                 </span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>            </span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># </span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>        </span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"rear"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># front para colocar parentesis en %        </span></span>
<span>  <span class="fu">adorn_title</span><span class="op">(</span>                     <span class="co"># Agregar titulos            </span></span>
<span>    row_name <span class="op">=</span> <span class="st">"Cat. edad"</span>,</span>
<span>    col_name <span class="op">=</span> <span class="st">"Genero"</span><span class="op">)</span></span>
<span><span class="va">tabla8</span></span>
<span></span>
<span><span class="co"># Exportamos tablas utilizando `rio` y `here`. </span></span>
<span><span class="va">lista</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">tabla4</span>,<span class="va">tabla5</span>,<span class="va">tabla6</span>,<span class="va">tabla7</span>,<span class="va">tabla8</span><span class="op">)</span></span>
<span><span class="va">lista</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu">export</span><span class="op">(</span><span class="va">lista</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,<span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, <span class="st">"ejercicio1"</span>, </span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"tabla"</span>,<span class="va">i</span> <span class="op">+</span> <span class="fl">3</span>,<span class="st">".xlsx"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">flextable</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Exportamos la tabla directamente desde flextable</span></span>
<span><span class="va">tabla8_imagen_word</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">tabyl</span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span>where <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span>denominator <span class="op">=</span> <span class="st">"col"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"front"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_title</span><span class="op">(</span></span>
<span>    row_name <span class="op">=</span> <span class="st">"Categoria Edad"</span>,</span>
<span>    col_name <span class="op">=</span> <span class="st">"Genero"</span>,</span>
<span>    placement <span class="op">=</span> <span class="st">"combined"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  </span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html">autofit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                       </span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/save_as_docx.html">save_as_docx</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"tabla8_imagen.docx"</span><span class="op">)</span>  </span></code></pre></div>
</div>
</div>
<div id="estadística-descriptiva-con-dplyr" class="section level3" number="9.6.4">
<h3>
<span class="header-section-number">9.6.4</span> Estadística descriptiva con “dplyr”<a class="anchor" aria-label="anchor" href="#estad%C3%ADstica-descriptiva-con-dplyr"><i class="fas fa-link"></i></a>
</h3>
<p>Ahora vamos a volver a utilizar los verbos del paquete “dplyr” que vimos
la sección anterior. Vamos a generar las mismas cosas, pero de otra
forma.</p>
<p>Frecuencias:</p>
<div class="sourceCode" id="cb1026"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Removemos todo, menos datos </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">!</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"datos"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. ¿Cuál es el total de datos?</span></span>
<span><span class="va">tabla1</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                 </span>
<span>          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>   </span>
<span><span class="va">tabla1</span> </span>
<span></span>
<span><span class="co"># 2. ¿Cuál es el total por categorías de edad? (con group_by y con summarize)?</span></span>
<span><span class="va">tabla2</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>     </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>   </span>
<span><span class="va">tabla2</span> </span>
<span></span>
<span><span class="co"># 3. ¿Cuál es el total por categorías de edad (con count)?</span></span>
<span><span class="va">tabla3</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span></span>
<span><span class="va">tabla3</span> </span>
<span></span>
<span><span class="co"># 4. ¿Cuál es el total por categorías de edad y outcome (con count)?</span></span>
<span><span class="va">tabla4</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">outcome</span><span class="op">)</span></span>
<span><span class="va">tabla4</span> </span>
<span></span>
<span><span class="co"># 5. Equivalente con group_by()</span></span>
<span><span class="va">tabla4a</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">age_cat</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n_rows <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tabla4a</span></span></code></pre></div>
<p>Porcentajes:</p>
<div class="sourceCode" id="cb1027"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tabla5</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                     </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                            </span>
<span>    percent <span class="op">=</span> <span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> </span>
<span><span class="va">tabla5</span></span>
<span></span>
<span><span class="va">tabla6</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                          </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">tabla6</span> </span></code></pre></div>
<p>Resumen:</p>
<div class="sourceCode" id="cb1028"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tabla7</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>         <span class="co"># armamos la tabla como un nuevo objeto</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>    <span class="co"># agrupamos todos los cálculos por hospital</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>                <span class="co"># generamos la estadística que nos interesa</span></span>
<span>    cases       <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,      <span class="co"># número de observaciones por grupo</span></span>
<span>    delay_max   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,  <span class="co"># maximo retraso</span></span>
<span>    delay_mean  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,  <span class="co"># retraso promedio</span></span>
<span>    delay_sd    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">days_onset_hosp</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,  <span class="co"># desviacion estandar retraso</span></span>
<span>    delay_3     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">days_onset_hosp</span> <span class="op">&gt;=</span> <span class="fl">3</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,   <span class="co"># número de hospitales on retrasos mayores a tres dias</span></span>
<span>    pct_delay_3 <span class="op">=</span> <span class="op">(</span><span class="va">delay_3</span> <span class="op">/</span> <span class="va">cases</span><span class="op">)</span><span class="op">)</span>                    <span class="co"># porcentaje de lo anterior </span></span>
<span><span class="va">tabla7</span></span></code></pre></div>
<p>Estadísticas condicionales:</p>
<div class="sourceCode" id="cb1029"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tabla8</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    max_temp_fvr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[</span><span class="va">fever</span> <span class="op">==</span> <span class="st">"yes"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    max_temp_no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[</span><span class="va">fever</span> <span class="op">==</span> <span class="st">"no"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">tabla8</span></span>
<span></span>
<span><span class="co"># ¿Cuál es la temperatura promedio para los pacientes que tuvieron fiebre y para los que no?</span></span>
<span><span class="va">tabla9</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    promedio_temp_fvr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[</span><span class="va">fever</span> <span class="op">==</span> <span class="st">"yes"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    promedio_temp_no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">temp</span><span class="op">[</span><span class="va">fever</span> <span class="op">==</span> <span class="st">"no"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">tabla9</span></span></code></pre></div>
<p>Percentiles:</p>
<div class="sourceCode" id="cb1030"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Percentiles por defecto de la variable edad (0%, 25%, 50%, 75%, 100%). </span></span>
<span><span class="co"># Usamos la función `quantile()`. </span></span>
<span><span class="va">tabla10</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>percentiles_edad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tabla10</span></span>
<span></span>
<span><span class="co"># Agregarlos manualmente</span></span>
<span><span class="va">tabla11</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    percentiles_edad <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span></span>
<span>      <span class="va">age_years</span>,</span>
<span>      probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.98</span><span class="op">)</span>, </span>
<span>      na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">tabla11</span> </span>
<span></span>
<span><span class="co"># También los podemos calcular combinando con otro verbos y mas especifico</span></span>
<span><span class="va">tabla12</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span>,<span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    p05 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.05</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    p50 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.5</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    p75 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.75</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    p98 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">age_years</span>, probs <span class="op">=</span> <span class="fl">0.98</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">tabla12</span></span>
<span></span>
<span><span class="co"># También podemos hacerlo utilizando `get_summary_stats()`</span></span>
<span><span class="va">tabla13</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">rstatix</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/rstatix/reference/get_summary_stats.html">get_summary_stats</a></span><span class="op">(</span><span class="va">age</span>, type <span class="op">=</span> <span class="st">"quantile"</span><span class="op">)</span></span>
<span><span class="va">tabla13</span> </span></code></pre></div>
<p>Resumir datos agregados:</p>
<div class="sourceCode" id="cb1031"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Contamos y quitamos los NA</span></span>
<span><span class="va">tabla14</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">outcome</span>, <span class="va">gender</span><span class="op">)</span></span>
<span><span class="va">tabla14</span></span>
<span></span>
<span><span class="co"># Contamos por grupos y con condiciones. </span></span>
<span><span class="va">tabla15</span> <span class="op">&lt;-</span> <span class="va">tabla14</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    total_cases  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    male_cases   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">[</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"m"</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>    female_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">[</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"f"</span><span class="op">]</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tabla15</span></span>
<span></span>
<span><span class="co"># Hacer lo mismo, pero para mas grupos y variables</span></span>
<span><span class="va">tabla16</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span>.cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">age_years</span>, <span class="va">temp</span>, <span class="va">wt_kg</span>, <span class="va">ht_cm</span><span class="op">)</span>,  <span class="co"># columnas</span></span>
<span>                   .fns <span class="op">=</span> <span class="va">mean</span>,                               <span class="co"># funcion</span></span>
<span>                   na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>                             <span class="co"># opciones</span></span>
<span><span class="va">tabla16</span></span>
<span></span>
<span><span class="co"># Para todas las variables numéricas </span></span>
<span><span class="va">tabla17</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span></span>
<span>    .cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, </span>
<span>    .fns <span class="op">=</span> <span class="va">mean</span>,</span>
<span>    na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tabla17</span> </span>
<span></span>
<span><span class="co"># De long a wide</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">scales</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tabla18</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                         </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">age_cat</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>percent <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">tabla18</span> </span>
<span></span>
<span><span class="co"># La tabla esta en formato long! </span></span>
<span><span class="va">tabla19</span> <span class="op">&lt;-</span> <span class="va">tabla18</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">percent</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>   <span class="co"># no quiero porcentaje</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">age_cat</span>, </span>
<span>              values_from <span class="op">=</span> <span class="va">n</span><span class="op">)</span>  </span>
<span><span class="va">tabla19</span></span>
<span></span>
<span><span class="co"># Tabla con totales</span></span>
<span><span class="va">tabla20</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    known_outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span><span class="op">)</span>,           <span class="co"># Número de filas del grupo en las que no falta el resultado</span></span>
<span>    n_death  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Death"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,    <span class="co"># Número de filas en el grupo donde el resultado es Muerte</span></span>
<span>    n_recover <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"Recover"</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="co"># Número de filas del grupo cuyo resultado es Recuperado</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">adorn_totals</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                <span class="co"># Adornar la fila total (suma de cada columna numérica)</span></span>
<span>  <span class="fu">adorn_percentages</span><span class="op">(</span><span class="st">"row"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                      <span class="co"># Proporciones</span></span>
<span>  <span class="fu">adorn_pct_formatting</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                        <span class="co"># porcetnaje</span></span>
<span>  <span class="fu">adorn_ns</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"rear"</span><span class="op">)</span>                      <span class="co"># ()</span></span>
<span><span class="va">tabla20</span> </span>
<span></span>
<span><span class="co"># Exportamos todas las tablas </span></span>
<span><span class="va">lista_tablas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">tabla1</span>,<span class="va">tabla2</span>,<span class="va">tabla3</span>,<span class="va">tabla4</span>,<span class="va">tabla5</span>,</span>
<span>                     <span class="va">tabla6</span>,<span class="va">tabla7</span>,<span class="va">tabla8</span>,<span class="va">tabla9</span>,<span class="va">tabla10</span>,</span>
<span>                     <span class="va">tabla11</span>,<span class="va">tabla12</span>,<span class="va">tabla13</span>,<span class="va">tabla14</span>,<span class="va">tabla15</span>,</span>
<span>                     <span class="va">tabla16</span>,<span class="va">tabla17</span>,<span class="va">tabla18</span>,<span class="va">tabla19</span>,<span class="va">tabla20</span><span class="op">)</span></span>
<span><span class="va">lista_tablas</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu">export</span><span class="op">(</span><span class="va">lista_tablas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,<span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>, <span class="st">"ejercicio2"</span>, </span>
<span>                              <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"tabla"</span>,<span class="va">i</span>,<span class="st">".xlsx"</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Juntar tablas:</p>
<div class="sourceCode" id="cb1032"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Algunas estadísticas por hospital y outcome</span></span>
<span><span class="va">tabla21</span> <span class="op">&lt;-</span><span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">hospital</span> <span class="op">!=</span> <span class="st">"Missing"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  <span class="co"># Dejo todo lo que no sea missing</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                      <span class="co"># agrupo por hospital y outcome</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>                                            </span>
<span>    N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,                                                 </span>
<span>    ct_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">ct_blood</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span>               </span>
<span><span class="va">tabla21</span></span>
<span></span>
<span><span class="co"># Algunas estadísticas solo por outcome </span></span>
<span><span class="va">tabla22</span> <span class="op">&lt;-</span> <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">hospital</span> <span class="op">!=</span> <span class="st">"Missing"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                            <span class="co"># Ahora agrupo solo por outcome, no hospital    </span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    N <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,                                       <span class="co"># Estadisticas solo por outcome    </span></span>
<span>    ct_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">ct_blood</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tabla22</span></span>
<span></span>
<span><span class="co"># Juntando </span></span>
<span><span class="va">table_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows</a></span><span class="op">(</span><span class="va">tabla21</span>, <span class="va">tabla22</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">table_long</span></span>
<span></span>
<span><span class="co"># A formato long y a exportar </span></span>
<span><span class="va">table_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hospital <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">hospital</span>, <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>                                         <span class="co"># de largo a ancho</span></span>
<span>    values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">ct_value</span>, <span class="va">N</span><span class="op">)</span>,                       <span class="co"># cambio valores</span></span>
<span>    names_from <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                           <span class="co"># cambio columnas</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                                              <span class="co"># agrego nuevas columnas</span></span>
<span>    N_Known <span class="op">=</span> <span class="va">N_Death</span> <span class="op">+</span> <span class="va">N_Recover</span>,                               <span class="co"># numero total</span></span>
<span>    Pct_Death <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">N_Death</span> <span class="op">/</span> <span class="va">N_Known</span>, <span class="fl">0.1</span><span class="op">)</span>,         <span class="co"># % casos que murieron</span></span>
<span>    Pct_Recover <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">N_Recover</span> <span class="op">/</span> <span class="va">N_Known</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># % casos recuperados</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>                                              <span class="co"># reordeno columnas</span></span>
<span>    <span class="va">hospital</span>, <span class="va">N_Known</span>,                                   <span class="co"># totales</span></span>
<span>    <span class="va">N_Recover</span>, <span class="va">Pct_Recover</span>, <span class="va">ct_value_Recover</span>,            <span class="co"># recuperado</span></span>
<span>    <span class="va">N_Death</span>, <span class="va">Pct_Death</span>, <span class="va">ct_value_Death</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>             <span class="co"># muertes</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">N_Known</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                  <span class="co"># Ordeno </span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/flextable.html">flextable</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                     <span class="co"># a imagen</span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/autofit.html">autofit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                       <span class="co"># una linea por fila </span></span>
<span>  <span class="fu">flextable</span><span class="fu">::</span><span class="fu"><a href="https://davidgohel.github.io/flextable/reference/save_as_docx.html">save_as_docx</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span>,<span class="st">"ejercicio2"</span>,<span class="st">"tablefinal.docx"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># exporto</span></span></code></pre></div>
</div>
</div>
<div id="visualización" class="section level2" number="9.7">
<h2>
<span class="header-section-number">9.7</span> Visualización<a class="anchor" aria-label="anchor" href="#visualizaci%C3%B3n"><i class="fas fa-link"></i></a>
</h2>
<div id="visualización-r-base" class="section level3" number="9.7.1">
<h3>
<span class="header-section-number">9.7.1</span> Visualización: R base<a class="anchor" aria-label="anchor" href="#visualizaci%C3%B3n-r-base"><i class="fas fa-link"></i></a>
</h3>
<p>Vamos a hacer graficos unicamente utilizando R básico.</p>
<div id="plot" class="section level4" number="9.7.1.1">
<h4>
<span class="header-section-number">9.7.1.1</span> Plot<a class="anchor" aria-label="anchor" href="#plot"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1033"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Para visualizar datos </span></span>
<span><span class="va">altura</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">168</span>, <span class="fl">177</span>, <span class="fl">177</span>, <span class="fl">177</span>, <span class="fl">178</span>, <span class="fl">172</span>, <span class="fl">165</span>, <span class="fl">171</span>, <span class="fl">178</span>, <span class="fl">170</span><span class="op">)</span></span>
<span><span class="va">peso</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">88</span>, <span class="fl">72</span>, <span class="fl">85</span>, <span class="fl">52</span>, <span class="fl">71</span>, <span class="fl">69</span>, <span class="fl">61</span>, <span class="fl">61</span>, <span class="fl">51</span>, <span class="fl">75</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Gráfico simple </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">altura</span>,</span>
<span>     <span class="va">peso</span>, </span>
<span>     ylab <span class="op">=</span> <span class="st">"Peso (kg)"</span>, </span>
<span>     xlab <span class="op">=</span> <span class="st">"Altura (cm)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ahora lo vamos a exportar</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"figuras"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">"g1.pdf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">altura</span>,<span class="va">peso</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">altura</span>,<span class="va">peso</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="histograma-2" class="section level4" number="9.7.1.2">
<h4>
<span class="header-section-number">9.7.1.2</span> Histograma<a class="anchor" aria-label="anchor" href="#histograma-2"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1034"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Buscar ayuda: </span></span>
<span><span class="op">?</span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Implementarla </span></span>
<span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">wage</span>,</span>
<span>      breaks <span class="op">=</span> <span class="fl">20</span>,   <span class="co"># número de intervalos</span></span>
<span>      main <span class="op">=</span> <span class="st">"Distribución del Salario (dólares por hora)"</span>,    <span class="co"># título del gráfico</span></span>
<span>      xlab <span class="op">=</span> <span class="st">"Salario"</span>,                                        <span class="co"># título del eje x</span></span>
<span>      ylab <span class="op">=</span> <span class="st">"Número de personas"</span>                              <span class="co"># título del eje y</span></span>
<span><span class="op">)</span></span>
<span><span class="va">g2</span></span>
<span></span>
<span><span class="co"># Podemos agregar colores</span></span>
<span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">wage</span>,</span>
<span>     breaks <span class="op">=</span> <span class="fl">20</span>,   <span class="co"># n?mero de intervalos</span></span>
<span>     main <span class="op">=</span> <span class="st">"Distribución del Salario (dólares por hora)"</span>,    <span class="co"># título del gráfico</span></span>
<span>     xlab <span class="op">=</span> <span class="st">"Salario"</span>,                                        <span class="co"># título del eje x</span></span>
<span>     ylab <span class="op">=</span> <span class="st">"Numero de personas"</span>,                              <span class="co"># título del eje y</span></span>
<span>     col <span class="op">=</span> <span class="st">"pink"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">g2</span></span>
<span></span>
<span><span class="co"># También podemos agregar límites en los ejes</span></span>
<span><span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">wage</span>,</span>
<span>     breaks <span class="op">=</span> <span class="fl">20</span>,   <span class="co"># número de intervalos</span></span>
<span>     main <span class="op">=</span> <span class="st">"Distribución del Salario (dólares por hora)"</span>,    </span>
<span>     xlab <span class="op">=</span> <span class="st">"Salario"</span>,                                        </span>
<span>     ylab <span class="op">=</span> <span class="st">"Número de personas"</span>,                              </span>
<span>     col<span class="op">=</span><span class="st">"pink"</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span><span class="op">)</span>,<span class="co"># Límites del histograma</span></span>
<span>     freq <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">#TRUE = freq. absoluta, FALSE: relativa. </span></span>
<span><span class="op">)</span></span>
<span><span class="va">g2</span></span>
<span></span>
<span></span>
<span><span class="co"># Podemos hacer lo mismo, pero  agregar la distribución empirica</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">"g3.pdf"</span><span class="op">)</span></span>
<span><span class="va">g3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">wage</span>,</span>
<span>     breaks <span class="op">=</span> <span class="fl">20</span>,   <span class="co"># número de intervalos</span></span>
<span>     main <span class="op">=</span> <span class="st">"Distribución del Salario (dólares por hora)"</span>,    </span>
<span>     xlab <span class="op">=</span> <span class="st">"Salario"</span>,                                        </span>
<span>     ylab <span class="op">=</span> <span class="st">"Número de personas"</span>,                              </span>
<span>     col<span class="op">=</span><span class="st">"pink"</span>,</span>
<span>     xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span><span class="op">)</span>,</span>
<span>     ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">.12</span><span class="op">)</span>, <span class="co"># Límites del histograma</span></span>
<span>     freq <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co">#TRUE = freq. absoluta, FALSE: relativa. </span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Agrego la distribución empirica de los datos </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"blue"</span>, lwd<span class="op">=</span><span class="fl">2</span><span class="op">)</span>  </span></code></pre></div>
<p>Opciones:</p>
<div class="sourceCode" id="cb1035"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># lwd = line width</span></span>
<span><span class="co"># col = color</span></span>
<span><span class="co"># lty = line type</span></span>
<span><span class="co"># opciones de lty (0 = blank,  1 = solid (default), </span></span>
<span><span class="co">#                              2 = dashed, 3 = dotted, </span></span>
<span><span class="co">#                              4 = dotdash, 5 = longdash, </span></span>
<span><span class="co">#                              6 = twodash) </span></span>
<span></span>
<span><span class="co"># Agregar más de una distribución </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span><span class="va">wage</span>, adjust<span class="op">=</span><span class="fl">2</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"red"</span>, lwd<span class="op">=</span><span class="fl">2</span>, lty<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="co"># adjust=2 lo que hace es suavizar un poco la curva </span></span>
<span></span>
<span><span class="co"># Agregar el promedio y la mediana </span></span>
<span></span>
<span><span class="co"># Promedio </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fl">2</span>, </span>
<span>       lty <span class="op">=</span> <span class="fl">3</span>, </span>
<span>       col<span class="op">=</span><span class="st">"darkgreen"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mediana </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fl">2</span>, </span>
<span>       lty <span class="op">=</span> <span class="fl">3</span>, </span>
<span>       col<span class="op">=</span><span class="st">"darkblue"</span><span class="op">)</span>    </span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Notar que solo hemos utilizado paquetes básicos de R.</span></span>
<span><span class="co"># Ahora, podemos exportar el gráfico a la carpeta.</span></span></code></pre></div>
</div>
<div id="gráfico-de-dispersión" class="section level4" number="9.7.1.3">
<h4>
<span class="header-section-number">9.7.1.3</span> Gráfico de dispersión<a class="anchor" aria-label="anchor" href="#gr%C3%A1fico-de-dispersi%C3%B3n"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1036"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Básico </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">experience</span>, <span class="va">wage</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">wage</span><span class="op">~</span><span class="va">experience</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mejorando la presentación </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span> <span class="op">(</span><span class="va">wage</span> <span class="op">~</span> <span class="va">experience</span>,  </span>
<span>      main <span class="op">=</span> <span class="st">"Salario en función de la experiencia"</span>,</span>
<span>      xlab <span class="op">=</span> <span class="st">"Experiencia (en años)"</span>,</span>
<span>      ylab <span class="op">=</span> <span class="st">"Salario"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Podemos agrupar </span></span>
<span><span class="va">CPS1985</span> <span class="op">&lt;-</span> <span class="va">CPS1985</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sexo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">"g4.pdf"</span><span class="op">)</span></span>
<span><span class="va">g4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span> <span class="op">(</span><span class="va">wage</span> <span class="op">~</span> <span class="va">experience</span>, </span>
<span>      data <span class="op">=</span> <span class="va">CPS1985</span>, </span>
<span>      pch <span class="op">=</span> <span class="va">sexo</span>, <span class="co">#Diferente simbolo dependiendo del género</span></span>
<span>      col <span class="op">=</span> <span class="va">sexo</span>,  <span class="co">#Color diferenciado por género</span></span>
<span>      main <span class="op">=</span> <span class="st">"Salario en función de la experiencia"</span>,</span>
<span>      xlab <span class="op">=</span> <span class="st">"Experiencia (en años)"</span>,</span>
<span>      ylab <span class="op">=</span> <span class="st">"Salario"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Agregamos Leyenda </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"topright"</span>, </span>
<span>       legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombres"</span>,<span class="st">"Mujeres"</span><span class="op">)</span>, </span>
<span>       pch<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, </span>
<span>       col<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>       bty<span class="op">=</span><span class="st">"n"</span><span class="op">)</span> <span class="co">#Caja de la leyenda</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"topleft"</span>, legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombres"</span>,<span class="st">"Mujeres"</span><span class="op">)</span>, pch<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, col<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Agregamos una regresión </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">[</span><span class="va">gender</span><span class="op">==</span><span class="st">"male"</span>,<span class="op">]</span>, </span>
<span>     <span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">wage</span><span class="op">~</span><span class="va">experience</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">[</span><span class="va">gender</span><span class="op">==</span><span class="st">"female"</span>,<span class="op">]</span>, </span>
<span>     <span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">wage</span><span class="op">~</span><span class="va">experience</span><span class="op">)</span>, col<span class="op">=</span><span class="st">"red"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="gráfico-de-barras" class="section level4" number="9.7.1.4">
<h4>
<span class="header-section-number">9.7.1.4</span> Gráfico de barras<a class="anchor" aria-label="anchor" href="#gr%C3%A1fico-de-barras"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1037"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Primero tenemos que crear las frecuencias </span></span>
<span><span class="va">frecuencias</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">occupation</span><span class="op">)</span>  <span class="co"># con variable categórica</span></span>
<span><span class="va">frecuencias</span></span>
<span></span>
<span><span class="co"># Básico</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">frecuencias</span>,</span>
<span>        col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ahora con educación </span></span>
<span><span class="va">educacion</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">education</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">"g5.pdf"</span><span class="op">)</span></span>
<span><span class="va">g5</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span><span class="op">(</span><span class="va">educacion</span>,</span>
<span>        col <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">educacion</span><span class="op">)</span>,  <span class="co"># para establecer el número de diferentes colores  (=diferentes valores)</span></span>
<span>        horiz <span class="op">=</span> <span class="cn">FALSE</span>,            <span class="co"># orientación de las barras</span></span>
<span>        ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">250</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Agregamos un título</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html">title</a></span><span class="op">(</span><span class="st">"Distribución de la educación"</span>, </span>
<span>      xlab<span class="op">=</span> <span class="st">"Educación (en años)"</span>, </span>
<span>      ylab <span class="op">=</span> <span class="st">"Número de personas"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="gráfico-de-torta" class="section level4" number="9.7.1.5">
<h4>
<span class="header-section-number">9.7.1.5</span> Gráfico de torta<a class="anchor" aria-label="anchor" href="#gr%C3%A1fico-de-torta"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1038"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">ethnicity</span><span class="op">)</span></span>
<span><span class="va">datos</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/pie.html">pie</a></span><span class="op">(</span><span class="va">datos</span>, </span>
<span>       labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caucasicos"</span>, <span class="st">"Hispanos"</span>, <span class="st">"Otros"</span><span class="op">)</span>, </span>
<span>       col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html">heat.colors</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>       main <span class="op">=</span> <span class="st">"Frecuencia de etnias"</span>,</span>
<span>       clockwise <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Podemos cambiar los colores </span></span>
<span><span class="va">colores</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"darkred"</span>,<span class="st">"pink"</span>,<span class="st">"red"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html">pdf</a></span><span class="op">(</span><span class="st">"g6.pdf"</span><span class="op">)</span></span>
<span><span class="va">g6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/pie.html">pie</a></span><span class="op">(</span><span class="va">datos</span>, </span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">ethnicity</span><span class="op">)</span>, </span>
<span>    col <span class="op">=</span> <span class="va">colores</span>,</span>
<span>    main <span class="op">=</span> <span class="st">"Frecuencia etnias"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="boxplot" class="section level4" number="9.7.1.6">
<h4>
<span class="header-section-number">9.7.1.6</span> Boxplot<a class="anchor" aria-label="anchor" href="#boxplot"><i class="fas fa-link"></i></a>
</h4>
<p>Algunas cosas que tener en cuenta sobre un boxplot:</p>
<ol style="list-style-type: decimal">
<li>Se le llama grafico de caja y bigote.</li>
<li>Primer quartil (1): borde inferior de la caja.</li>
<li>Mediana: Linea de al medio de la caja.</li>
<li>Tercer quartil: Borde superior de la caja.</li>
<li>Rango intercuartil: Diferencia entre el tercer cuartil y el primero.</li>
</ol>
<p>Sobre el gráfico:</p>
<ol style="list-style-type: decimal">
<li>Caja más grande implica que los datos están mas dispersos.</li>
<li>Tamaño de la caja es el rango intercuartil.</li>
<li>Si la mediana esta al centro, la distribución es simétrica.</li>
<li>¿Que pasa si la parte superior (sobre la linea) es más grande? Los
datos se concentran en la parte baja de la distribución.</li>
<li>Los bigotes determinan el límite para valores atípicos.Su longitud
máxima es de un 150% del Rango intercuartil (RIC).</li>
</ol>
<div class="sourceCode" id="cb1039"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/grDevices/dev.html">dev.off</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">wage</span>,</span>
<span>          main <span class="op">=</span> <span class="st">"Salario (dólares por hora)"</span>,</span>
<span>          ylab <span class="op">=</span> <span class="st">"Salario"</span>,</span>
<span>          col <span class="op">=</span> <span class="st">"pink"</span>,</span>
<span>          border <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Separando por sexo</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">wage</span> <span class="op">~</span> <span class="va">gender</span>,</span>
<span>        main <span class="op">=</span> <span class="st">"Salario (dólares por hora) según sexo"</span>,</span>
<span>        ylab <span class="op">=</span> <span class="st">"Salario"</span>,</span>
<span>        col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"pink"</span>,<span class="st">"darkgreen"</span><span class="op">)</span>,</span>
<span>        border <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">#Horizontal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">wage</span> <span class="op">~</span> <span class="va">gender</span>,</span>
<span>        main <span class="op">=</span> <span class="st">"Salario (dólares por hora) según sexo"</span>,</span>
<span>        ylab <span class="op">=</span> <span class="st">"Salario"</span>,</span>
<span>        names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombres"</span>,<span class="st">"Mujeres"</span><span class="op">)</span>,    <span class="co">#Cambiar nombres</span></span>
<span>        horizontal <span class="op">=</span> <span class="cn">T</span>,                    <span class="co">#Posición horizontal</span></span>
<span>        col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html">rainbow</a></span><span class="op">(</span><span class="fl">2</span>, alpha<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span>,       <span class="co">#Paleta rainbow (aleatoria) y transparencia (alpha)</span></span>
<span>        border <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="uso-paquete-ggplot" class="section level3" number="9.7.2">
<h3>
<span class="header-section-number">9.7.2</span> Uso paquete ggplot<a class="anchor" aria-label="anchor" href="#uso-paquete-ggplot"><i class="fas fa-link"></i></a>
</h3>
<p>Ahora vamos a utilizar un paquete avanzado de visualización. Primero,
algunos aspectos relacionados con la lógica de su uso.</p>
<ol style="list-style-type: decimal">
<li>Utilizar <code>ggplot2</code> es básicamente ir agregando capas. Entre cada
cosa que quiero agregar al gráfico debo colocar un signo <code>+</code>.</li>
<li>La sintaxis básica incluye:</li>
</ol>
<ul>
<li><ol style="list-style-type: lower-alpha">
<li>Comience con el comando <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> de la línea de base, esto
“abre” el ggplot y permite que las funciones subsecuentes sean
agregadas con <code>+</code>. Normalmente el conjunto de datos también se
especifica en este comando.</li>
</ol></li>
<li><ol start="2" style="list-style-type: lower-alpha">
<li>Añadir capas “geom”, estas funciones visualizan los datos como
geometrías (formas), por ejemplo, como un gráfico de barras, un
gráfico de líneas, un gráfico de dispersión, un histograma (¡o
una combinación!). Todas estas funciones comienzan con <code>geom_</code>
como prefijo.</li>
</ol></li>
<li><ol start="3" style="list-style-type: lower-alpha">
<li>Añade elementos de diseño al gráfico, como etiquetas de ejes,
títulos, fuentes, tamaños, esquemas de color, leyendas o
rotación de ejes.</li>
</ol></li>
</ul>
<p>Ejemplo:</p>
<div class="sourceCode" id="cb1040"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">experience</span>, y <span class="op">=</span> <span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>                               </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span> color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span>                          </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                    </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span><span class="op">)</span>  </span></code></pre></div>
<p>Ahora ya entendemos la sintaxis general. Para cambiar de tipo de
gráficos tenemos distintas geometrías.</p>
<div class="sourceCode" id="cb1041"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># geom_point (para puntos)</span></span>
<span>  <span class="co"># geom_line (para lineas)</span></span>
<span>  <span class="co"># geom_histogram (para histograma)</span></span>
<span>  <span class="co"># geom_boxplot (para boxplot)</span></span>
<span>  <span class="co"># geom_bar o geom_col() (para barras)</span></span>
<span>  <span class="co"># geom_smooth (lineas suavizadas)</span></span></code></pre></div>
<div id="geometrías" class="section level4" number="9.7.2.1">
<h4>
<span class="header-section-number">9.7.2.1</span> Geometrías<a class="anchor" aria-label="anchor" href="#geometr%C3%ADas"><i class="fas fa-link"></i></a>
</h4>
<p>Otros tienen más sentido con una variable</p>
<div class="sourceCode" id="cb1042"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">experience</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                               </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>                         </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                   </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">experience</span>, y <span class="op">=</span> <span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                               </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>                         </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>                                   </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
</div>
<div id="aesthetics" class="section level4" number="9.7.2.2">
<h4>
<span class="header-section-number">9.7.2.2</span> Aesthetics<a class="anchor" aria-label="anchor" href="#aesthetics"><i class="fas fa-link"></i></a>
</h4>
<p>Otro aspecto importante es lo que se denomina “aesthetics”. Estas son
las características visuales de los datos. En ggplot estos son
modificados dentro de la opción <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code>. No todas las geometrías
tienen las mismas opciones. Sin embargo, algunas comunes son:</p>
<ul>
<li>
<code>shape</code>: Mostrar un punto con <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code> como punto, estrella,
triángulo o cuadrado.</li>
<li>
<code>fill</code>: El color interior (por ejemplo, de una barra o boxplot)</li>
<li>
<code>color</code>: La línea exterior de una barra, boxplot, etc., o el color
del punto si se utiliza <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>
</li>
<li>
<code>size</code>: Tamaño (por ejemplo, grosor de la línea, tamaño del punto)</li>
<li>
<code>alpha</code>: Transparencia (1 = opaco, 0 = invisible)</li>
<li>
<code>binwidtho</code>: Ancho de los bins o cajas del histograma</li>
<li>
<code>width</code>: Anchura de las columnas del “bar plot”.</li>
<li>
<code>linetype</code>: Tipo de línea (por ejemplo, sólida, discontinua,
punteada)</li>
</ul>
<p>Los “aesthetics” pueden ser asignados a valores o a vectores.</p>
<p>Ejemplo:</p>
<div class="sourceCode" id="cb1043"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualización de puntos </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">experience</span>, y <span class="op">=</span> <span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                               </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"darkgreen"</span>,</span>
<span>             size  <span class="op">=</span> <span class="fl">2.8</span>, </span>
<span>             alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Histograma </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>                               </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"white"</span>, </span>
<span>                 fill  <span class="op">=</span> <span class="st">"pink"</span>, </span>
<span>                 binwidth <span class="op">=</span> <span class="fl">5</span> , </span>
<span>                 alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="escalar-los-valores-o-agrupar" class="section level4" number="9.7.2.3">
<h4>
<span class="header-section-number">9.7.2.3</span> Escalar los valores o agrupar<a class="anchor" aria-label="anchor" href="#escalar-los-valores-o-agrupar"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1044"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Si queremos diferenciar alguna variable categorica por color (agrupar)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>, <span class="va">wage</span>, color <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Si queremos diferenciar alguna variable continua por tamaño (escalar)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">datos</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">experience</span>,</span>
<span>                  y <span class="op">=</span> <span class="va">wage</span>,</span>
<span>                  size <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>             alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ambos (agrupar y escalar)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos</span>, </span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">experience</span>,</span>
<span>                     y <span class="op">=</span> <span class="va">wage</span>,</span>
<span>                     size <span class="op">=</span> <span class="va">age</span>,</span>
<span>                     color <span class="op">=</span> <span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"circle"</span>,</span>
<span>             alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="equivalencia-sintaxis-ggplot" class="section level4" number="9.7.2.4">
<h4>
<span class="header-section-number">9.7.2.4</span> Equivalencia sintaxis ggplot<a class="anchor" aria-label="anchor" href="#equivalencia-sintaxis-ggplot"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1045"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Notar que estas tres sintaxis son equivalentes</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos</span>, </span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="combinar-gráficos" class="section level4" number="9.7.2.5">
<h4>
<span class="header-section-number">9.7.2.5</span> Combinar gráficos<a class="anchor" aria-label="anchor" href="#combinar-gr%C3%A1ficos"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>: Mostrar un panel diferente para cada nivel de una sola
variable. Un ejemplo de esto podría ser mostrar una figura diferente
para cada region de un país. Las facetas se ordenan alfabéticamente, a
menos que la variable sea un factor con otro ordenamiento definido. Por
ejemplo:</p>
<div class="sourceCode" id="cb1046"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Datos </span></span>
<span><span class="va">malaria_data</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"malaria_facility_count_data.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">submitted_date</span>, <span class="op">-</span><span class="va">Province</span>, <span class="op">-</span><span class="va">newid</span><span class="op">)</span>                                 </span>
<span></span>
<span><span class="co"># A plot with facets by district</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">malaria_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">data_date</span>, y <span class="op">=</span> <span class="va">malaria_tot</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span> <span class="op">+</span>   <span class="co"># graficamos datos como columnas</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>         <span class="co"># simplificamos la parte de atras</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Fecha"</span>,         <span class="co">#Etiquetas/labels</span></span>
<span>         y <span class="op">=</span> <span class="st">"Casos de Malaria"</span>,</span>
<span>         title <span class="op">=</span> <span class="st">"Casos de Malaria por distrito"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">District</span><span class="op">)</span>   <span class="co"># creamos las facetas</span></span></code></pre></div>
<p><code><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid()</a></code>: Se utiliza cuando se quiere introducir una segunda
variable en la disposición de las facetas. Aquí cada panel de una
cuadrícula muestra la intersección entre los valores de dos columnas.
Por ejemplo:</p>
<div class="sourceCode" id="cb1047"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">malaria_age</span> <span class="op">&lt;-</span> <span class="va">malaria_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">malaria_tot</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"malaria_rdt_"</span><span class="op">)</span><span class="op">)</span>,  </span>
<span>    names_to <span class="op">=</span> <span class="st">"grupo_edad"</span>,      </span>
<span>    values_to <span class="op">=</span> <span class="st">"num_casos"</span>      </span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    age_group <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace</a></span><span class="op">(</span><span class="va">grupo_edad</span>, <span class="st">"malaria_rdt_"</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">malaria_age</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">data_date</span>, y <span class="op">=</span> <span class="va">num_casos</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"darkred"</span>, width <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span> </span>
<span>    x <span class="op">=</span> <span class="st">"Fechas"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Casos"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Casos de Malaria por grupos de edad y distrito"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">District</span> <span class="op">~</span> <span class="va">age_group</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="modificar-y-guardar" class="section level4" number="9.7.2.6">
<h4>
<span class="header-section-number">9.7.2.6</span> Modificar y guardar<a class="anchor" aria-label="anchor" href="#modificar-y-guardar"><i class="fas fa-link"></i></a>
</h4>
<p>Modificar graficos: Una cosa muy positiva de <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> es que uno puede
definirlo con un nombre y luego ir sobre-escribiendolo. Eso es muy útil
para la sintaxis.</p>
<div class="sourceCode" id="cb1048"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Gráfico original </span></span>
<span><span class="va">histograma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">datos</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>              <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">histograma</span></span>
<span></span>
<span><span class="co"># Gráfico modificado. </span></span>
<span><span class="va">histograma_modificado</span> <span class="op">&lt;-</span> <span class="va">histograma</span> <span class="op">+</span></span>
<span>                         <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">histograma_modificado</span></span>
<span><span class="co"># Noten que solamente hemos agregado la nueva opción sobre el objeto asignado. </span></span>
<span><span class="co"># Muy útil y recomendable para hacer visualizaciones en R. </span></span></code></pre></div>
<p>Exportar gráficos: Para los gráfico que se generen con <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> es
posible utilizar la opción <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>.</p>
<div class="sourceCode" id="cb1049"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"figuras"</span>, <span class="st">"histograma.pdf"</span><span class="op">)</span>, <span class="va">histograma_modificado</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="labels" class="section level4" number="9.7.2.7">
<h4>
<span class="header-section-number">9.7.2.7</span> Labels<a class="anchor" aria-label="anchor" href="#labels"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1050"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">distribucion_salarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">datos</span>,      <span class="co"># datos</span></span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>     <span class="co"># ejes</span></span>
<span>    x <span class="op">=</span> <span class="va">age</span>,                        </span>
<span>    y <span class="op">=</span> <span class="va">wage</span>,         </span>
<span>    color <span class="op">=</span> <span class="va">occupation</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>     <span class="co"># agrupo</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>               <span class="co"># geometria</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Salarios por edad"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Estados Unidos, 1985"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Edad en años"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Salario en dólares por hora"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Ocupación"</span>,</span>
<span>    caption <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"Maxima edad es: {max(datos$age, na.rm=TRUE)}"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">distribucion_salarios</span></span></code></pre></div>
</div>
<div id="temas" class="section level4" number="9.7.2.8">
<h4>
<span class="header-section-number">9.7.2.8</span> Temas<a class="anchor" aria-label="anchor" href="#temas"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1051"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clasico </span></span>
<span><span class="va">distribucion_salarios</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Mínimo </span></span>
<span><span class="va">distribucion_salarios</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Oscuro </span></span>
<span><span class="va">distribucion_salarios</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_dark</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Claro</span></span>
<span><span class="va">distribucion_salarios</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_light</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Gris </span></span>
<span><span class="va">distribucion_salarios</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Blanco y negro </span></span>
<span><span class="va">distribucion_salarios</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="piping-y-ggplot" class="section level4" number="9.7.2.9">
<h4>
<span class="header-section-number">9.7.2.9</span> Piping y ggplot<a class="anchor" aria-label="anchor" href="#piping-y-ggplot"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1052"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu">import</span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"datos"</span>, <span class="st">"linelist_cleaned.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">datos</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>                                                     </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">case_id</span>, <span class="va">fever</span>, <span class="va">chills</span>, <span class="va">cough</span>, <span class="va">aches</span>, <span class="va">vomit</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>    </span>
<span>    <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span>                                                 </span>
<span>      cols <span class="op">=</span> <span class="op">-</span><span class="va">case_id</span>,                                  </span>
<span>      names_to <span class="op">=</span> <span class="st">"symptom_name"</span>,</span>
<span>      values_to <span class="op">=</span> <span class="st">"symptom_is_present"</span><span class="op">)</span><span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>                                                      </span>
<span>      symptom_is_present <span class="op">=</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="va">symptom_is_present</span>, <span class="st">"unknown"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>                                                        </span>
<span>      mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">symptom_name</span>, fill <span class="op">=</span> <span class="va">symptom_is_present</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span>, col <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>                    </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="st">"Sintoma"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">"Sintoma (status)"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
</div>
<div id="gráficos-para-variables-continuas" class="section level4" number="9.7.2.10">
<h4>
<span class="header-section-number">9.7.2.10</span> Gráficos para variables continuas<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-para-variables-continuas"><i class="fas fa-link"></i></a>
</h4>
<p>Histograma:</p>
<div class="sourceCode" id="cb1053"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"CPS1985"</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">CPS1985</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Gráfico absoluto</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Gráfico relativo</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">..density..</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Histograma con 20 intervalos</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">100</span>, </span>
<span>                 color<span class="op">=</span><span class="st">"black"</span>, </span>
<span>                 fill<span class="op">=</span><span class="st">"blue"</span>, </span>
<span>                 alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Agregando títulos y limites</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">20</span>, color<span class="op">=</span><span class="st">"white"</span>, fill<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribución del salario (dólares por hora)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Salario"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Número de empleados"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Gráficos de subconjuntos</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">20</span>, color<span class="op">=</span><span class="st">"white"</span>, fill<span class="op">=</span><span class="st">"pink"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">gender</span><span class="op">~</span><span class="va">.</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># U horizontal</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">20</span>, color<span class="op">=</span><span class="st">"white"</span>, fill<span class="op">=</span><span class="st">"pink"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">gender</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribución del salario (dólares por hora)"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Salario"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Número de empleados"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># O ambos juntos </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">20</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">gender</span><span class="op">)</span>, </span>
<span>                 position<span class="op">=</span><span class="st">"fill"</span>, </span>
<span>                 alpha<span class="op">=</span><span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Distribución del salario (dólares por hora)"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Salario"</span>, </span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span>, </span>
<span>       fill<span class="op">=</span><span class="st">"Género"</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># títulos de ejes y leyenda</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>    <span class="co"># títulos claves leyenda</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span><span class="op">)</span></span></code></pre></div>
<p>Gráfico de densidad:</p>
<div class="sourceCode" id="cb1054"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span>, color<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">20</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">..density..</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"Género"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Uniendo a y b</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">..density..</span><span class="op">)</span>, </span>
<span>                 bins<span class="op">=</span><span class="fl">20</span>, </span>
<span>                 color<span class="op">=</span><span class="st">"white"</span>, </span>
<span>                 fill<span class="op">=</span><span class="st">"pink"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co">#stat_function(fun = dnorm, colour = "red",</span></span>
<span>  <span class="co">#              args = list(mean = mean(wage, na.rm = TRUE),</span></span>
<span>  <span class="co">#                          sd = sd(wage, na.rm = TRUE))) +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Distribución del salario (dólares por hora)"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Salario"</span>, </span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span><span class="op">)</span></span></code></pre></div>
<p>Diagrama de dispersión (scatterplot):</p>
<div class="sourceCode" id="cb1055"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de dispersión"</span>,</span>
<span>       subtitle<span class="op">=</span> <span class="st">"ScatterPlot"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"Fuente: CPS1985 (paquete AER)"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Experiencia (en años)"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Salario (en logaritmo)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Formas de darle color al gráfico</span></span>
<span></span>
<span>  <span class="co"># (1) Desde geom_()</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># (2) Desde ggplot()</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, color<span class="op">=</span><span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Función jitter (shortcut geom_point(position = "jitter")</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>,<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>width<span class="op">=</span><span class="fl">.2</span>, alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>               <span class="co">#Suavizar la visualización de solapamiento</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de dispersión"</span>,</span>
<span>       subtitle<span class="op">=</span> <span class="st">"ScatterPlot"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"Fuente: CPS1985 (paquete AER)"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Experiencia (en años)"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Salario (en logaritmo)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Diviendo por categorías</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>,<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, color<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de dispersión"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Experiencia (en años)"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Salario (en logaritmo)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_color_discrete</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Género"</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Nota: Ojo con realizar de otra manera, cambia la recta de regresión</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">experience</span>,<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de dispersión"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Experiencia (en años)"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Salario (en logaritmo)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_color_discrete</a></span><span class="op">(</span><span class="st">"Género"</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Boxplot:</p>
<div class="sourceCode" id="cb1056"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Básico</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">gender</span>, y<span class="op">=</span><span class="va">wage</span>, fill<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Boxplot"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Género"</span>, </span>
<span>       y<span class="op">=</span><span class="st">"Salario"</span>, </span>
<span>       fill<span class="op">=</span><span class="st">"Género"</span><span class="op">)</span> <span class="op">+</span>   <span class="co"># titulo ejes y leyenda</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>   <span class="co"># etiquetas del eje x</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># etiquetas claves leyenda</span></span>
<span></span>
<span><span class="co">#Visualizando todos los datos con paletas creadas (armamos una función)</span></span>
<span><span class="va">ts4_colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  `pink`        <span class="op">=</span> <span class="st">"#B40586"</span>,</span>
<span>  `light blue`       <span class="op">=</span> <span class="st">"#00A2E9"</span>,</span>
<span>  `green`      <span class="op">=</span> <span class="st">"#00AC8B"</span>,</span>
<span>  `orange`     <span class="op">=</span> <span class="st">"#f37735"</span>,</span>
<span>  `red`     <span class="op">=</span> <span class="st">"#FF1B6B"</span>,</span>
<span>  `purple` <span class="op">=</span> <span class="st">"#805FAA"</span>,</span>
<span>  `blue`  <span class="op">=</span> <span class="st">"#0059ff"</span>,</span>
<span>  `light green` <span class="op">=</span> <span class="st">"#7EAF64"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ts4_cols</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span><span class="op">(</span><span class="va">cols</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span> <span class="op">(</span><span class="va">ts4_colors</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">ts4_colors</span><span class="op">[</span><span class="va">cols</span><span class="op">]</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">ts4_cols</span><span class="op">(</span><span class="st">"red"</span><span class="op">)</span></span>
<span><span class="fu">ts4_cols</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">gender</span>, y<span class="op">=</span><span class="va">wage</span>, fill<span class="op">=</span><span class="va">gender</span><span class="op">)</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">0.3</span>, </span>
<span>               fill<span class="op">=</span><span class="fu">ts4_cols</span><span class="op">(</span><span class="st">"pink"</span>,<span class="st">"light green"</span><span class="op">)</span>, </span>
<span>               outlier.colour <span class="op">=</span> <span class="fu">ts4_cols</span><span class="op">(</span><span class="st">"blue"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Boxplot"</span>,x<span class="op">=</span><span class="st">"Género"</span>, y<span class="op">=</span><span class="st">"Salario"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>              </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>stat<span class="op">=</span> <span class="st">"summary"</span>, shape<span class="op">=</span><span class="fl">16</span>, size<span class="op">=</span><span class="fl">4</span>, colour<span class="op">=</span><span class="fu">ts4_cols</span><span class="op">(</span><span class="st">"purple"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.1</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, colour<span class="op">=</span><span class="fu">ts4_cols</span><span class="op">(</span><span class="st">"orange"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Gráfico de barras:</p>
<div class="sourceCode" id="cb1057"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">ethnicity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de barras"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Raza"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caucásico"</span>, <span class="st">"Hispano"</span>, <span class="st">"Otros"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Distintos colores</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">ethnicity</span>, fill<span class="op">=</span><span class="va">ethnicity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Distribución de empleadores según etnia"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Raza"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caucásico"</span>, <span class="st">"Hispano"</span>, <span class="st">"Otros"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>fill<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Sin/con leyenda</span></span>
<span></span>
<span><span class="co"># ¿Cómo se distribuye el género sobre la etnia?</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">ethnicity</span>, fill<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de barras"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Etnia"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caucásico"</span>, <span class="st">"Hispano"</span>, <span class="st">"Otros"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_fill_discrete</a></span><span class="op">(</span><span class="st">"Género"</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Separado por género, pero paralelo</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">ethnicity</span>, fill<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position<span class="op">=</span><span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span>            <span class="co"># también: position=position_dodge()</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Distribución de empleadores según etnia"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Raza"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caucásico"</span>, <span class="st">"Hispano"</span>, <span class="st">"Otros"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Accent"</span>,                             <span class="co"># Definir la paleta manualmente </span></span>
<span>                    <span class="st">"Género"</span>,</span>
<span>                    labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="gráficos-con-plotly" class="section level4" number="9.7.2.11">
<h4>
<span class="header-section-number">9.7.2.11</span> Gráficos con plotly<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos-con-plotly"><i class="fas fa-link"></i></a>
</h4>
<p>Ejemplo 1:</p>
<div class="sourceCode" id="cb1058"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">g1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">ethnicity</span>, fill<span class="op">=</span><span class="va">gender</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position<span class="op">=</span><span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span>            <span class="co"># también: position=position_dodge()</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Distribución de empleadores según etnia"</span>,</span>
<span>       x<span class="op">=</span> <span class="st">"Raza"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Empleados"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Caucásico"</span>, <span class="st">"Hispano"</span>, <span class="st">"Otros"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Accent"</span>,     <span class="co">#Definir la paleta manualmente </span></span>
<span>                    <span class="st">"Género"</span>,</span>
<span>                    labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hombre"</span>,<span class="st">"Mujer"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g1</span></span>
<span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">g1</span><span class="op">)</span></span></code></pre></div>
<p>Ejemplo 2:</p>
<div class="sourceCode" id="cb1059"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span> <span class="co">#semilla</span></span>
<span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">diamonds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span>, <span class="fl">1000</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"Clarity:"</span>, <span class="va">clarity</span><span class="op">)</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">cut</span>, fill <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">cut</span><span class="op">)</span></span>
<span><span class="va">p</span></span>
<span></span>
<span><span class="fu">ggplotly</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-block alert-danger">
<p><b>Recordatorio:</b> Set seed o sembrar la semilla nos permite generar
datos seudo aleatorizados pero replicables, de manera que cualquier
persona que acceda al script sea capaz de llegar a los mismos resultados
que nosotros. El número que se incluye dentro de la función actua como
un “código” que genera estos datos aleatorios, y puede ser cualquiera.</p>
</div>
<p>Ejemplo 3: Ocupar directamente plotly</p>
<div class="sourceCode" id="cb1060"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu">plot_ly</span><span class="op">(</span>data <span class="op">=</span> <span class="va">iris</span>, </span>
<span>               x <span class="op">=</span> <span class="op">~</span><span class="va">Sepal.Length</span>, </span>
<span>               y <span class="op">=</span> <span class="op">~</span><span class="va">Petal.Length</span>, </span>
<span>               color<span class="op">=</span><span class="op">~</span><span class="va">Species</span><span class="op">)</span></span>
<span><span class="va">fig</span></span>
<span></span>
<span><span class="co"># Sacar barra de opciones y zoom</span></span>
<span><span class="va">fig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fixedrange <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>         showlegend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>         xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>fixedrange <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">config</span><span class="op">(</span>displayModeBar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Line plot</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">random_y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span>, mean <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">random_y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu">plot_ly</span><span class="op">(</span><span class="va">data</span>, x <span class="op">=</span> <span class="op">~</span><span class="va">x</span>, </span>
<span>               y <span class="op">=</span> <span class="op">~</span><span class="va">random_y</span>, </span>
<span>               type <span class="op">=</span> <span class="st">'scatter'</span>, </span>
<span>               mode <span class="op">=</span> <span class="st">'lines'</span><span class="op">)</span></span>
<span><span class="va">fig</span></span>
<span></span>
<span><span class="co"># Histogramas</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu">plot_ly</span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, </span>
<span>               type <span class="op">=</span> <span class="st">"histogram"</span><span class="op">)</span></span>
<span><span class="va">fig</span></span>
<span></span>
<span><span class="co"># Con 2 grupos</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu">plot_ly</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="va">fig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">add_histogram</span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="va">fig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">add_histogram</span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="va">fig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html">layout</a></span><span class="op">(</span>barmode <span class="op">=</span> <span class="st">"overlay"</span><span class="op">)</span></span>
<span><span class="va">fig</span></span>
<span></span>
<span><span class="co"># Boxplot</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="fu">plot_ly</span><span class="op">(</span>y <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"box"</span><span class="op">)</span></span>
<span><span class="va">fig</span> <span class="op">&lt;-</span> <span class="va">fig</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">add_trace</span><span class="op">(</span>y <span class="op">=</span> <span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fig</span></span></code></pre></div>
</div>
</div>
</div>
<div id="análisis-de-datos-y-generación-de-informes-con-r-markdown" class="section level2" number="9.8">
<h2>
<span class="header-section-number">9.8</span> Análisis de datos y generación de informes con R Markdown<a class="anchor" aria-label="anchor" href="#an%C3%A1lisis-de-datos-y-generaci%C3%B3n-de-informes-con-r-markdown"><i class="fas fa-link"></i></a>
</h2>
<div id="test-de-hipótesis" class="section level3" number="9.8.1">
<h3>
<span class="header-section-number">9.8.1</span> Test de hipótesis<a class="anchor" aria-label="anchor" href="#test-de-hip%C3%B3tesis"><i class="fas fa-link"></i></a>
</h3>
<p>Imaginen que una compañia quiere testear la efectividad de una
estrategia de venta. La estrategia A consiste en colocar un letrero que
diga “oferta final”. La estrategia B consiste en dejar todo como
siempre. Aleatoriamente se eligen los días y lugares en donde se
utilizara la estrategia A y los días en que se utilizara la estrategia
B. Luego, se registran los datos de ventas y se observan que las ventas
de la compañía con la estrategia B fueron un 43,4% mayores a las tiendas
con la estrategia A. La intuición se contradice con los datos, sin
embargo, ¿Es esto debido al azar? ¿o bien es un resultado
estadísticamente significativo?</p>
<div id="test-de-diferencia-de-media" class="section level4" number="9.8.1.1">
<h4>
<span class="header-section-number">9.8.1.1</span> Test de diferencia de media<a class="anchor" aria-label="anchor" href="#test-de-diferencia-de-media"><i class="fas fa-link"></i></a>
</h4>
<p>Una de las pruebas más comunes en estadística, la prueba t, se utiliza
para determinar si las medias de dos grupos son iguales entre sí. La
hipótesis de la prueba es que ambos grupos proceden de distribuciones
normales con varianzas iguales. La hipótesis nula es que las dos medias
son iguales, y la alternativa es que no lo son. Se sabe que bajo la
hipótesis nula, podemos calcular un estadístico t que seguirá una
distribución t.</p>
<p>También existe una modificación ampliamente utilizada de la prueba t,
conocida como prueba t de Welch, que ajusta el número de grados de
libertad cuando se cree que las varianzas no son iguales entre sí. Este
tutorial cubre los fundamentos de la realización de pruebas t en R.</p>
<p><code><a href="https://rdrr.io/r/stats/t.test.html">t.test()</a></code> puede utilizarse para realizar pruebas t de una y dos
muestras en vectores de datos. La función contiene una variedad de
argumentos. La sintaxis es:</p>
<div class="sourceCode" id="cb1061"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Datos </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"midwest"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">midwest</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">midwest</span><span class="op">)</span></span>
<span><span class="fu">skim</span><span class="op">(</span><span class="va">midwest</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">x</span>, y <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>       alternative <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"two.sided"</span>, <span class="st">"less"</span>, <span class="st">"greater"</span><span class="op">)</span>, </span>
<span>       paired <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>       mu <span class="op">=</span> <span class="fl">0</span>,</span>
<span>       var.equal <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>       conf.level <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></code></pre></div>
<p>Aquí <span class="math inline">\(x\)</span> es un vector numérico de valores de datos e <span class="math inline">\(y\)</span> es un vector
numérico opcional de valores de datos. Si se excluye <span class="math inline">\(y\)</span>, la función
realiza una prueba t de una muestra sobre los datos contenidos en <span class="math inline">\(x\)</span>,
si se incluye realiza una prueba t de dos muestras utilizando tanto <span class="math inline">\(x\)</span>
como <span class="math inline">\(y\)</span>.</p>
<p>El argumento <span class="math inline">\(mu\)</span> proporciona un número que indica el verdadero valor de
la media (o la diferencia de medias si se realiza una prueba de dos
muestras) bajo la hipótesis nula. Por defecto, la prueba realiza una
prueba t de dos caras; sin embargo, puede realizar una hipótesis
alternativa cambiando el argumento alternativo a “mayor” o “menor”
dependiendo de si la hipótesis alternativa es que la media es mayor o
menor que <span class="math inline">\(mu\)</span>, respectivamente.</p>
<p>Por ejemplo:</p>
<div class="sourceCode" id="cb1062"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">x</span>, alternative <span class="op">=</span> <span class="st">"less"</span>, mu <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
<p>Realiza una prueba t de una muestra sobre los datos contenidos en <span class="math inline">\(x\)</span>
donde la hipótesis nula es que <span class="math inline">\(mu = 25\)</span> y la alternativa es menor que
25. El argumento <code>var.equal</code> indica si se deben asumir o no varianzas
iguales al realizar una prueba t de dos muestras. Por defecto se asume
una varianza desigual.</p>
<p>Por último, el argumento <code>conf.level</code> determina el nivel de confianza
del intervalo de confianza.</p>
</div>
<div id="t-test-de-una-cola" class="section level4" number="9.8.1.2">
<h4>
<span class="header-section-number">9.8.1.2</span> t-test de una cola<a class="anchor" aria-label="anchor" href="#t-test-de-una-cola"><i class="fas fa-link"></i></a>
</h4>
<p>La prueba t de una muestra compara la media de una muestra con un valor
conocido, cuando la varianza de la población es desconocida.
Consideremos que queremos evaluar el porcentaje de adultos con estudios
universitarios en el “midwest” y compararlo con un valor determinado.</p>
<p>Por ejemplo, supongamos que la media nacional de adultos con estudios
universitarios es del 32% (licenciatura o superior) y queremos ver si la
media del “midwest” es significativamente diferente (en terminos
estadísticos) de la media nacional. En concreto, queremos comprobar si
la media del medio oeste es inferior a la media nacional.</p>
<div class="sourceCode" id="cb1063"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">midwest</span><span class="op">$</span><span class="va">percollege</span><span class="op">)</span></span>
<span><span class="co"># Gráficamente </span></span>
<span></span>
<span><span class="co"># En escala absoluta</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">midwest</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">percollege</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, color <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># En escala logarítmica </span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">midwest</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">percollege</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, color <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># La escala logarítmica es una transformación que sirve justificar el supuesto de normalidad. </span></span>
<span></span>
<span><span class="co"># La escala logarítmica hace que la distancia entre 10 y 100 sea la misma que entre 100 y 1000.       </span></span>
<span></span>
<span><span class="fu">grid.arrange</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co"># 1. Recordemos que queremos testear si el promedio del </span></span>
<span><span class="co">#    "midwest" es menor que el promedio nacional. </span></span>
<span><span class="co"># 2. Hacemos tres test: </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">midwest</span><span class="op">$</span><span class="va">percollege</span>, </span>
<span>       mu <span class="op">=</span> <span class="fl">32</span>, </span>
<span>       alternative <span class="op">=</span> <span class="st">"less"</span><span class="op">)</span></span></code></pre></div>
<p>El resultado nos indica que p &lt; 0.001 lo que nos dice que rechazamos la
hipótesis nula (de que es igual a la nacional) lo que nos da evidencia
estadística de que la media poblacional del “midwest” es menor que un
32%. Pero, como vimos anteriormente, tenemos problemas de no normalidad
(recuerden el gráfico con las distribuciones empíricas). Para
asegurarnos de que nuestra conclusión es correcta vamos a efectuar dos
versiones alternativas del test:</p>
<div class="sourceCode" id="cb1064"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># La misma versión, pero en logaritmos... </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">midwest</span><span class="op">$</span><span class="va">percollege</span><span class="op">)</span>, </span>
<span>       mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">32</span><span class="op">)</span>, </span>
<span>       alternative <span class="op">=</span> <span class="st">"less"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Wilcox test sirve cuando no deseamos asumir que los datos provienen de una distribución normal. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/wilcox.test.html">wilcox.test</a></span><span class="op">(</span><span class="va">midwest</span><span class="op">$</span><span class="va">percollege</span>, </span>
<span>            mu <span class="op">=</span> <span class="fl">32</span>, </span>
<span>            alternative <span class="op">=</span> <span class="st">"less"</span><span class="op">)</span></span></code></pre></div>
<p>Ambos resultados apoyan nuestra conclusión inicial de que el porcentaje
de adultos con estudios universitarios en el medio oeste es
estadísticamente inferior a la media nacional.</p>
</div>
<div id="t-test-de-dos-colas" class="section level4" number="9.8.1.3">
<h4>
<span class="header-section-number">9.8.1.3</span> t-test de dos colas<a class="anchor" aria-label="anchor" href="#t-test-de-dos-colas"><i class="fas fa-link"></i></a>
</h4>
<p>Ahora digamos que queremos comparar las diferencias entre el porcentaje
promedio de adultos con estudios universitarios en Ohio y en Michigan.
En este caso, queremos realizar una prueba t de dos muestras.</p>
<div class="sourceCode" id="cb1065"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Seleccionamos los datos </span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">midwest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"OH"</span> <span class="op">|</span> <span class="va">state</span> <span class="op">==</span> <span class="st">"MI"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">state</span>, <span class="va">percollege</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estadisticas para ohio</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"OH"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">.</span><span class="op">$</span><span class="va">percollege</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estadisticas para michigan </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"MI"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">.</span><span class="op">$</span><span class="va">percollege</span><span class="op">)</span></span></code></pre></div>
<p>Podemos ver que Ohio parece tener ligeramente menos adultos con estudios
universitarios que Michigan. No obstante, el gráfico no nos dice si es
estadísticamente significativo o no.</p>
<div class="sourceCode" id="cb1066"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">state</span>, <span class="va">percollege</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">percollege</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, color <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">state</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># En logaritmos </span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">percollege</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, color <span class="op">=</span> <span class="st">"grey30"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">state</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">grid.arrange</span><span class="op">(</span><span class="va">p1</span>, <span class="va">p2</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Realizamos los test </span></span>
<span></span>
<span><span class="co"># Sintaxis basica </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">percollege</span> <span class="op">~</span> <span class="va">state</span>, </span>
<span>       data <span class="op">=</span> <span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transformando los datos</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">percollege</span><span class="op">)</span> <span class="op">~</span> <span class="va">state</span>, </span>
<span>       data <span class="op">=</span> <span class="va">df</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sin asumir normalidad</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/wilcox.test.html">wilcox.test</a></span><span class="op">(</span><span class="va">percollege</span> <span class="op">~</span> <span class="va">state</span>, </span>
<span>            data <span class="op">=</span> <span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p>Los resultados que aparecen a continuación muestran un valor <span class="math inline">\(p &lt; 0.01\)</span>
que apoya la hipótesis alternativa de que “la verdadera diferencia de
medias no es igual a 0”; esencialmente afirma que existe una diferencia
estadística entre las dos medias.</p>
</div>
<div id="paired-t---test" class="section level4" number="9.8.1.4">
<h4>
<span class="header-section-number">9.8.1.4</span> paired t - test<a class="anchor" aria-label="anchor" href="#paired-t---test"><i class="fas fa-link"></i></a>
</h4>
<p>Sirve para hacer test de diferencias de media para dos grupos que son
estadisticamente iguales, pero que fueron sometidos a un tratamientom
distinto. Lo que se quiere testear es si efectivamente la diferencia de
promedios de alguna variable puede estar asociada a este tratamiento.</p>
<p>Vamos a ocupar la base de datos de R llamada “sleep”. Imaginen queremos
testear si una droga particular tiene un efecto estadisticamente
significativo sobre las horas que se duerme. En particular, vamos a ver
si la variable “extra” es diferente entre ambos grupos. Vamos a utilizar
<code><a href="https://rdrr.io/r/stats/t.test.html">t.test()</a></code> nuevamente, pero con la opción <code>paired = TRUE</code>.</p>
<div class="sourceCode" id="cb1067"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Miramos los datos graficamente </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">sleep</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">group</span>, <span class="va">extra</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Testeamos </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">extra</span> <span class="op">~</span> <span class="va">group</span>, </span>
<span>       data <span class="op">=</span> <span class="va">sleep</span>, </span>
<span>       paired <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="regresión-lineal-en-r" class="section level3" number="9.8.2">
<h3>
<span class="header-section-number">9.8.2</span> Regresión Lineal en R<a class="anchor" aria-label="anchor" href="#regresi%C3%B3n-lineal-en-r"><i class="fas fa-link"></i></a>
</h3>
<div id="mco-con-datos-generados" class="section level4" number="9.8.2.1">
<h4>
<span class="header-section-number">9.8.2.1</span> MCO con datos generados<a class="anchor" aria-label="anchor" href="#mco-con-datos-generados"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1068"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Limpiar </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fijar la semilla (Nos permite generar resultados reproducibles)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Genero número de observaciones </span></span>
<span><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">50</span> </span>
<span></span>
<span><span class="co"># Simular una variable x con una distribución uniforme runif(N,min,max)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="va">N</span>,<span class="fl">1</span>,<span class="fl">40</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span></span>
<span><span class="co"># Simular y rnorm(N,media,sd)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">40</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span><span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span>,<span class="fl">0</span>,<span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">y</span></span>
<span></span>
<span><span class="co"># Crear una base de datos (data.frame) con lo que yo genere. </span></span>
<span><span class="va">mco_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span></span>
<span><span class="va">mco_data</span></span>
<span></span>
<span><span class="co"># Ahora, vamos a estimar por Minimos Cuadrados ordinarios </span></span>
<span><span class="co"># el modelo</span></span>
<span><span class="va">mco</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x</span>, </span>
<span>          data <span class="op">=</span> <span class="va">mco_data</span><span class="op">)</span></span>
<span><span class="va">mco</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># También lo podemos ver gráficamente </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mco_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>with<span class="op">=</span><span class="fl">.2</span>, alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, se <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Diagrama de dispersión"</span>, </span>
<span>       subtitle <span class="op">=</span> <span class="st">"ScatterPlot"</span>, </span>
<span>       x <span class="op">=</span> <span class="st">"x"</span>, </span>
<span>       y <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-block alert-success">
<p><b>En resumen….</b> Para estimar:
<code>mco &lt;- lm(y ~ x1 + x2 + x3, data = misdatos)</code> Para mirar resultados:
<code>summary(mco)</code> Para mirar gráficamente:
<code>ggplot() + geom_point() + geom_smooth(method = "lm")</code></p>
</div>
</div>
<div id="mco-con-datos-reales" class="section level4" number="9.8.2.2">
<h4>
<span class="header-section-number">9.8.2.2</span> MCO con datos reales<a class="anchor" aria-label="anchor" href="#mco-con-datos-reales"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1069"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"CPS1985"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Correlación entre variables </span></span>
<span><span class="va">CPS1985</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>cor1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">wage</span>, <span class="va">education</span><span class="op">)</span>, </span>
<span>            cor2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">wage</span>, <span class="va">experience</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Gráficamente </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">CPS1985</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">education</span>, <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">'lm'</span>, se <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Diagrama de dispersión"</span>,</span>
<span>       subtitle<span class="op">=</span> <span class="st">"ScatterPlot"</span>,</span>
<span>       caption<span class="op">=</span><span class="st">"Fuente: CPS1985 (paquete AER)"</span>,</span>
<span>       x<span class="op">=</span><span class="st">"Educación en años"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Salario (en logaritmo)"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Estimación </span></span>
<span></span>
<span>  <span class="co"># Creamos variables que utilizaremos en las estimaciones </span></span>
<span></span>
<span>  <span class="co"># Crear dos variables: log(wage) y experiencia al cuadrado. </span></span>
<span>  <span class="va">CPS1985</span><span class="op">$</span><span class="va">lnwage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">wage</span><span class="op">)</span></span>
<span>  <span class="va">CPS1985</span><span class="op">$</span><span class="va">exp2</span> <span class="op">&lt;-</span> <span class="va">CPS1985</span><span class="op">$</span><span class="va">exp</span> <span class="op">*</span> <span class="va">CPS1985</span><span class="op">$</span><span class="va">exp</span> </span>
<span></span>
<span>  <span class="co"># R no nos permite elevar variables al cuadrado dentro de la función</span></span>
<span>  <span class="co"># Generamos variables categóricas que queramos incluir en la regresión</span></span>
<span></span>
<span>  <span class="co"># Variables dicótomicas (sobre variable binarias).  </span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span>
<span>  <span class="va">CPS1985</span><span class="op">$</span><span class="va">sexo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"male"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">union</span><span class="op">)</span></span>
<span>  <span class="va">CPS1985</span><span class="op">$</span><span class="va">sind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">union</span> <span class="op">==</span> <span class="st">"yes"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Variables dicótomas (sobre variables categóricas)</span></span>
<span>  <span class="va">CPS1985</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">CPS1985</span>, </span>
<span>                 <span class="fu">dummy</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">CPS1985</span><span class="op">$</span><span class="va">occupation</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Generando formas editables </span></span>
<span>  <span class="va">f0</span> <span class="op">&lt;-</span> <span class="va">wage</span> <span class="op">~</span> <span class="va">education</span> </span>
<span>  <span class="va">f1</span> <span class="op">&lt;-</span> <span class="va">lnwage</span> <span class="op">~</span> <span class="va">education</span> </span>
<span>  <span class="va">f2</span> <span class="op">&lt;-</span> <span class="va">lnwage</span> <span class="op">~</span> <span class="va">education</span> <span class="op">+</span> <span class="va">experience</span></span>
<span>  <span class="va">f3</span> <span class="op">&lt;-</span> <span class="va">lnwage</span> <span class="op">~</span> <span class="va">education</span> <span class="op">+</span> <span class="va">experience</span> <span class="op">+</span> <span class="va">exp2</span></span>
<span>  <span class="va">f4</span> <span class="op">&lt;-</span> <span class="va">lnwage</span> <span class="op">~</span> <span class="va">education</span> <span class="op">+</span> <span class="va">experience</span> <span class="op">+</span> <span class="va">exp2</span> <span class="op">+</span> <span class="va">sexo</span></span>
<span>  <span class="va">f5</span> <span class="op">&lt;-</span> <span class="va">lnwage</span> <span class="op">~</span> <span class="va">education</span> <span class="op">+</span> <span class="va">experience</span> <span class="op">+</span> <span class="va">exp2</span> <span class="op">+</span> <span class="va">sexo</span> <span class="op">+</span> <span class="va">sind</span></span>
<span>  <span class="va">f6</span> <span class="op">&lt;-</span> <span class="va">lnwage</span> <span class="op">~</span> <span class="va">education</span> <span class="op">+</span> <span class="va">experience</span> <span class="op">+</span> <span class="va">exp2</span> <span class="op">+</span> <span class="va">sexo</span> <span class="op">+</span> <span class="va">sind</span> <span class="op">+</span> <span class="va">CPS1985_services</span></span>
<span></span>
<span>  <span class="co"># Estimaciones </span></span>
<span>  <span class="va">mco_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f0</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span>  <span class="va">mco_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f1</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span>  <span class="va">mco_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f2</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span>  <span class="va">mco_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f3</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span>  <span class="va">mco_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f4</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span>  <span class="va">mco_5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f5</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span>  <span class="va">mco_6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">f6</span>, data<span class="op">=</span><span class="va">CPS1985</span>, na.action <span class="op">=</span> <span class="va">na.exclude</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Mirar los resultados de mis estimaciones </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_0</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mco_6</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Exportar resultados </span></span>
<span></span>
<span><span class="co"># El paquete se llama "stargazer"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="fu">here</span><span class="op">(</span><span class="st">"resultados"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">stargazer</span><span class="op">(</span><span class="va">mco_1</span>, <span class="va">mco_2</span>, <span class="va">mco_3</span>, <span class="co"># Modelos</span></span>
<span>          type <span class="op">=</span> <span class="st">"text"</span>, </span>
<span>          title <span class="op">=</span> <span class="st">"Estimación MCO salarios vs. educ"</span>, </span>
<span>          style <span class="op">=</span> <span class="st">"qje"</span>, <span class="co"># Estilos </span></span>
<span>          notes <span class="op">=</span> <span class="st">"\\footnotezie ***p=.01; ** p =.05; *p=.1"</span>, </span>
<span>          notes.append <span class="op">=</span> <span class="cn">F</span>, <span class="co"># Para remplazar notas puestas anteriormente. </span></span>
<span>          single.row <span class="op">=</span> <span class="cn">F</span>, <span class="co"># Para que los errores estandar esten en la misma linea que los coeficientes </span></span>
<span>          no.space <span class="op">=</span> <span class="cn">T</span>, <span class="co"># No se generen espacios entre los regresores.</span></span>
<span>          out <span class="op">=</span> <span class="st">"est1-3.doc"</span>, </span>
<span>          digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="r-markdown" class="section level3" number="9.8.3">
<h3>
<span class="header-section-number">9.8.3</span> R Markdown<a class="anchor" aria-label="anchor" href="#r-markdown"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Herramienta para crear informes que sean automáticos, reproducibles
y con datos que se puedan actualizar en el tiempo.</li>
<li>Se pueden generar informes en formato word, pdf, html.</li>
<li>R markdown (Rmd) es básicamente una intersección entre texto
narrativo y código que genera visualizaciones y estimaciones con el
fin de analizar datos.</li>
<li>Rmd puede generar: texto plano, segmentos de co ́digo, gr ́aficos,
tablas, tableros interactivos.</li>
<li>R markdown es especialmente útil:
<ul>
<li>
<strong>Informes rutinarios:</strong> Por ejemplo, informe semanal sobre un
conjunto de análisis que se actualiza en el tiempo.</li>
<li>
<strong>Informes de análisis para un subconjunto de datos:</strong> Por
ejemplo, informes por país de una base de datos que contiene
información de distintos países.</li>
</ul>
</li>
</ul>
<div id="conceptos-básicos" class="section level4" number="9.8.3.1">
<h4>
<span class="header-section-number">9.8.3.1</span> Conceptos Básicos<a class="anchor" aria-label="anchor" href="#conceptos-b%C3%A1sicos"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>
<strong>Markdown</strong> es el lenguaje que permite escribir documentos en texto
plano. Los archivos escritos en Markdown tienen la extensión <code>.md</code>.</li>
<li>
<strong>R Markdown</strong> es la variación especifica para R. Permite escribir
texto plano con Markdown y adjuntar código proveniente de R. Los
archivos escritos en R Markdown tienen la extensión <code>.Rmd</code>.</li>
<li>
<strong>knirt:</strong> Paquete de R. Sirve para leer los segmentos de código que
queremos introducir en los reportes.</li>
<li>
<strong>Pandoc:</strong> Sirve para convertir el output en un archivo con formato
word/pdf/html. Es un software que viene instalado automáticamente en
<ol start="18" style="list-style-type: upper-alpha">
<li>
</ol>
</li>
</ul>
</div>
<div id="proceso" class="section level4" number="9.8.3.2">
<h4>
<span class="header-section-number">9.8.3.2</span> Proceso<a class="anchor" aria-label="anchor" href="#proceso"><i class="fas fa-link"></i></a>
</h4>
<div class="figure">
<img src="01figuras/C8.1.png" alt=""><p class="caption">Fuente: <a href="https://rmarkdown.rstudio.com/authoring" class="uri">https://rmarkdown.rstudio.com/authoring</a> quick
tour.html</p>
</div>
</div>
<div id="primer-archivo-en-r-markdown" class="section level4" number="9.8.3.3">
<h4>
<span class="header-section-number">9.8.3.3</span> Primer archivo en R Markdown<a class="anchor" aria-label="anchor" href="#primer-archivo-en-r-markdown"><i class="fas fa-link"></i></a>
</h4>
<p><img src="01figuras/C8.2.png"><img src="01figuras/C8.3.png"></p>
<ul>
<li>Opciones para elegir el tipo de documento y si quiero confeccionar
un documento/presentación/un tablero u otros tipos de archivo más
detallados.</li>
<li>Opciones para cambiar título y autor(a).</li>
</ul>
</div>
<div id="directorio-de-trabajo" class="section level4" number="9.8.3.4">
<h4>
<span class="header-section-number">9.8.3.4</span> Directorio de trabajo<a class="anchor" aria-label="anchor" href="#directorio-de-trabajo"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>El directorio de trabajo de un archivo <code>.Rmd</code> será donde esta
guardado el archivo con esa extensión.</li>
<li>De este modo, R buscará los archivos en la carpeta en donde este
guardado el archivo <code>.Rmd</code>.</li>
<li>Para este ejercicio simplemente dejaremos los datos que utilizaremos
junto al archivo.</li>
</ul>
</div>
<div id="componentes-de-r-markdown" class="section level4" number="9.8.3.5">
<h4>
<span class="header-section-number">9.8.3.5</span> Componentes de R Markdown<a class="anchor" aria-label="anchor" href="#componentes-de-r-markdown"><i class="fas fa-link"></i></a>
</h4>
<div class="inline-figure"><img src="01figuras/C8.4.png"></div>
<ul>
<li>YAML: fijar título, fecha y tipo de output.</li>
<li>Markdown text: introducir texto.</li>
<li>Code Chunk: cargar paquetes, datos, visualizaciones.</li>
</ul>
<div class="inline-figure">
<img src="01figuras/C8.5.png">
# Referencias</div>

<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-chang2015economics" class="csl-entry">
Chang, Andrew C, and Phillip Li. 2015. <span>“Is Economics Research Replicable? Sixty Published Papers from Thirteen Journals Say’usually Not’.”</span>
</div>
</div>
</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="an%C3%A1lisis-de-datos-con-python.html"><span class="header-section-number">8</span> Análisis de Datos con Python</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#an%C3%A1lisis-de-datos-con-r"><span class="header-section-number">9</span> Análisis de datos con R</a></li>
<li>
<a class="nav-link" href="#introducci%C3%B3n-a-r-y-rstudio"><span class="header-section-number">9.1</span> Introducción a R y RStudio</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#por-qu%C3%A9-utilizar-r-como-lenguaje-de-programaci%C3%B3n"><span class="header-section-number">9.1.1</span> ¿Por qué utilizar R como lenguaje de programación?</a></li>
<li><a class="nav-link" href="#t%C3%A9rminos-clave-y-recurrentes-a-lo-largo-del-curso"><span class="header-section-number">9.1.2</span> Términos clave y recurrentes a lo largo del curso</a></li>
<li><a class="nav-link" href="#recursos-de-aprendizaje"><span class="header-section-number">9.1.3</span> Recursos de Aprendizaje</a></li>
<li><a class="nav-link" href="#interfaz-rstudio"><span class="header-section-number">9.1.4</span> Interfaz RStudio</a></li>
<li><a class="nav-link" href="#instalaci%C3%B3n-de-paquetes-y-ayuda"><span class="header-section-number">9.1.5</span> Instalación de paquetes y ayuda</a></li>
<li><a class="nav-link" href="#manipulaci%C3%B3n-de-objetos"><span class="header-section-number">9.1.6</span> Manipulación de objetos</a></li>
<li><a class="nav-link" href="#tipos-de-objetos"><span class="header-section-number">9.1.7</span> Tipos de objetos</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#herramientas-de-programaci%C3%B3n-1"><span class="header-section-number">9.2</span> Herramientas de programación</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#objetos-adicionales"><span class="header-section-number">9.2.1</span> Objetos adicionales</a></li>
<li><a class="nav-link" href="#acceder-a-elementos-de-un-objeto"><span class="header-section-number">9.2.2</span> Acceder a elementos de un objeto</a></li>
<li><a class="nav-link" href="#tipos-de-objetos-y-datos"><span class="header-section-number">9.2.3</span> Tipos de objetos y datos</a></li>
<li><a class="nav-link" href="#herramientas-en-r"><span class="header-section-number">9.2.4</span> Herramientas en R</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#manipulaci%C3%B3n-de-bases-de-datos-parte-i-1"><span class="header-section-number">9.3</span> Manipulación de bases de datos (Parte I)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#principios-de-programaci%C3%B3n"><span class="header-section-number">9.3.1</span> Principios de programación</a></li>
<li><a class="nav-link" href="#manipulacion-de-bases-de-datos-en-r"><span class="header-section-number">9.3.2</span> Manipulacion de bases de datos en R</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#manipulaci%C3%B3n-de-bases-de-datos-parte-ii-1"><span class="header-section-number">9.4</span> Manipulación de bases de datos (Parte II)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#funciones-clave"><span class="header-section-number">9.4.1</span> Funciones clave</a></li>
<li><a class="nav-link" href="#operador-piping"><span class="header-section-number">9.4.2</span> Operador piping</a></li>
<li><a class="nav-link" href="#proceso-de-an%C3%A1lisis-de-datos-parte-i-cargar-inspeccionar-y-limpiar"><span class="header-section-number">9.4.3</span> Proceso de análisis de datos (Parte I): cargar, inspeccionar y limpiar</a></li>
<li><a class="nav-link" href="#proceso-de-an%C3%A1lisis-de-datos-parte-ii-cargar-inspeccionar-y-limpiar"><span class="header-section-number">9.4.4</span> Proceso de análisis de datos (Parte II): cargar, inspeccionar y limpiar</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#manipulaci%C3%B3n-de-bases-de-datos-parte-iii"><span class="header-section-number">9.5</span> Manipulación de bases de datos (Parte III)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#crear-variables"><span class="header-section-number">9.5.1</span> Crear Variables</a></li>
<li><a class="nav-link" href="#factores"><span class="header-section-number">9.5.2</span> Factores</a></li>
<li><a class="nav-link" href="#funciones-%C3%BAtiles-para-transformar-bases-de-datos"><span class="header-section-number">9.5.3</span> Funciones útiles para transformar bases de datos</a></li>
<li><a class="nav-link" href="#cambio-de-formato-de-los-datos"><span class="header-section-number">9.5.4</span> Cambio de formato de los datos</a></li>
<li><a class="nav-link" href="#juntar-bases-de-datos"><span class="header-section-number">9.5.5</span> Juntar bases de datos</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#an%C3%A1lisis-de-datos"><span class="header-section-number">9.6</span> Análisis de datos</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#inspecci%C3%B3n-de-datos"><span class="header-section-number">9.6.1</span> Inspección de datos</a></li>
<li><a class="nav-link" href="#estad%C3%ADstica-descriptiva"><span class="header-section-number">9.6.2</span> Estadística descriptiva</a></li>
<li><a class="nav-link" href="#tablas-de-frecuencia"><span class="header-section-number">9.6.3</span> Tablas de frecuencia</a></li>
<li><a class="nav-link" href="#estad%C3%ADstica-descriptiva-con-dplyr"><span class="header-section-number">9.6.4</span> Estadística descriptiva con “dplyr”</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#visualizaci%C3%B3n"><span class="header-section-number">9.7</span> Visualización</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#visualizaci%C3%B3n-r-base"><span class="header-section-number">9.7.1</span> Visualización: R base</a></li>
<li><a class="nav-link" href="#uso-paquete-ggplot"><span class="header-section-number">9.7.2</span> Uso paquete ggplot</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#an%C3%A1lisis-de-datos-y-generaci%C3%B3n-de-informes-con-r-markdown"><span class="header-section-number">9.8</span> Análisis de datos y generación de informes con R Markdown</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#test-de-hip%C3%B3tesis"><span class="header-section-number">9.8.1</span> Test de hipótesis</a></li>
<li><a class="nav-link" href="#regresi%C3%B3n-lineal-en-r"><span class="header-section-number">9.8.2</span> Regresión Lineal en R</a></li>
<li><a class="nav-link" href="#r-markdown"><span class="header-section-number">9.8.3</span> R Markdown</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Análisis de Datos con Stata, R y Python</strong>" was written by Nicolás Campos Bijit. It was last built on Octubre 2023.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
